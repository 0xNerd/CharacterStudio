var q5=Object.defineProperty;var ez=(n,e,t)=>e in n?q5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var tt=(n,e,t)=>(ez(n,typeof e!="symbol"?e+"":e,t),t),Mb=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var vs=(n,e,t)=>(Mb(n,e,"read from private field"),t?t.call(n):e.get(n)),Nu=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Tb=(n,e,t,r)=>(Mb(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);var XQ=(n,e,t)=>(Mb(n,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m3(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function tz(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var J={},nz={get exports(){return J},set exports(n){J=n}},AC={},pe={},rz={get exports(){return pe},set exports(n){pe=n}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm=Symbol.for("react.element"),iz=Symbol.for("react.portal"),sz=Symbol.for("react.fragment"),oz=Symbol.for("react.strict_mode"),az=Symbol.for("react.profiler"),Az=Symbol.for("react.provider"),lz=Symbol.for("react.context"),cz=Symbol.for("react.forward_ref"),uz=Symbol.for("react.suspense"),fz=Symbol.for("react.memo"),dz=Symbol.for("react.lazy"),YQ=Symbol.iterator;function hz(n){return n===null||typeof n!="object"?null:(n=YQ&&n[YQ]||n["@@iterator"],typeof n=="function"?n:null)}var v3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y3=Object.assign,B3={};function bh(n,e,t){this.props=n,this.context=e,this.refs=B3,this.updater=t||v3}bh.prototype.isReactComponent={};bh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};bh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function w3(){}w3.prototype=bh.prototype;function VU(n,e,t){this.props=n,this.context=e,this.refs=B3,this.updater=t||v3}var LU=VU.prototype=new w3;LU.constructor=VU;y3(LU,bh.prototype);LU.isPureReactComponent=!0;var KQ=Array.isArray,C3=Object.prototype.hasOwnProperty,PU={current:null},b3={key:!0,ref:!0,__self:!0,__source:!0};function x3(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)C3.call(e,r)&&!b3.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var A=Array(a),l=0;l<a;l++)A[l]=arguments[l+2];i.children=A}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Xm,type:n,key:s,ref:o,props:i,_owner:PU.current}}function pz(n,e){return{$$typeof:Xm,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function WU(n){return typeof n=="object"&&n!==null&&n.$$typeof===Xm}function gz(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var jQ=/\/+/g;function Nb(n,e){return typeof n=="object"&&n!==null&&n.key!=null?gz(""+n.key):e.toString(36)}function Ey(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Xm:case iz:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Nb(o,0):r,KQ(i)?(t="",n!=null&&(t=n.replace(jQ,"$&/")+"/"),Ey(i,e,t,"",function(l){return l})):i!=null&&(WU(i)&&(i=pz(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(jQ,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",KQ(n))for(var a=0;a<n.length;a++){s=n[a];var A=r+Nb(s,a);o+=Ey(s,e,t,A,i)}else if(A=hz(n),typeof A=="function")for(n=A.call(n),a=0;!(s=n.next()).done;)s=s.value,A=r+Nb(s,a++),o+=Ey(s,e,t,A,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function E0(n,e,t){if(n==null)return n;var r=[],i=0;return Ey(n,r,"","",function(s){return e.call(t,s,i++)}),r}function mz(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ui={current:null},Uy={transition:null},vz={ReactCurrentDispatcher:ui,ReactCurrentBatchConfig:Uy,ReactCurrentOwner:PU};Et.Children={map:E0,forEach:function(n,e,t){E0(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return E0(n,function(){e++}),e},toArray:function(n){return E0(n,function(e){return e})||[]},only:function(n){if(!WU(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Et.Component=bh;Et.Fragment=sz;Et.Profiler=az;Et.PureComponent=VU;Et.StrictMode=oz;Et.Suspense=uz;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vz;Et.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=y3({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=PU.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(A in e)C3.call(e,A)&&!b3.hasOwnProperty(A)&&(r[A]=e[A]===void 0&&a!==void 0?a[A]:e[A])}var A=arguments.length-2;if(A===1)r.children=t;else if(1<A){a=Array(A);for(var l=0;l<A;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Xm,type:n.type,key:i,ref:s,props:r,_owner:o}};Et.createContext=function(n){return n={$$typeof:lz,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Az,_context:n},n.Consumer=n};Et.createElement=x3;Et.createFactory=function(n){var e=x3.bind(null,n);return e.type=n,e};Et.createRef=function(){return{current:null}};Et.forwardRef=function(n){return{$$typeof:cz,render:n}};Et.isValidElement=WU;Et.lazy=function(n){return{$$typeof:dz,_payload:{_status:-1,_result:n},_init:mz}};Et.memo=function(n,e){return{$$typeof:fz,type:n,compare:e===void 0?null:e}};Et.startTransition=function(n){var e=Uy.transition;Uy.transition={};try{n()}finally{Uy.transition=e}};Et.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Et.useCallback=function(n,e){return ui.current.useCallback(n,e)};Et.useContext=function(n){return ui.current.useContext(n)};Et.useDebugValue=function(){};Et.useDeferredValue=function(n){return ui.current.useDeferredValue(n)};Et.useEffect=function(n,e){return ui.current.useEffect(n,e)};Et.useId=function(){return ui.current.useId()};Et.useImperativeHandle=function(n,e,t){return ui.current.useImperativeHandle(n,e,t)};Et.useInsertionEffect=function(n,e){return ui.current.useInsertionEffect(n,e)};Et.useLayoutEffect=function(n,e){return ui.current.useLayoutEffect(n,e)};Et.useMemo=function(n,e){return ui.current.useMemo(n,e)};Et.useReducer=function(n,e,t){return ui.current.useReducer(n,e,t)};Et.useRef=function(n){return ui.current.useRef(n)};Et.useState=function(n){return ui.current.useState(n)};Et.useSyncExternalStore=function(n,e,t){return ui.current.useSyncExternalStore(n,e,t)};Et.useTransition=function(){return ui.current.useTransition()};Et.version="18.2.0";(function(n){n.exports=Et})(rz);const Y=m3(pe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yz=pe,Bz=Symbol.for("react.element"),wz=Symbol.for("react.fragment"),Cz=Object.prototype.hasOwnProperty,bz=yz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xz={key:!0,ref:!0,__self:!0,__source:!0};function I3(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Cz.call(e,r)&&!xz.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Bz,type:n,key:s,ref:o,props:i,_owner:bz.current}}AC.Fragment=wz;AC.jsx=I3;AC.jsxs=I3;(function(n){n.exports=AC})(nz);var H1={},Iz={get exports(){return H1},set exports(n){H1=n}};const Fz={},Ez=Object.freeze(Object.defineProperty({__proto__:null,default:Fz},Symbol.toStringTag,{value:"Module"})),Uz=tz(Ez);(function(n){(function(e,t){function r(Q,B){if(!Q)throw new Error(B||"Assertion failed")}function i(Q,B){Q.super_=B;var E=function(){};E.prototype=B.prototype,Q.prototype=new E,Q.prototype.constructor=Q}function s(Q,B,E){if(s.isBN(Q))return Q;this.negative=0,this.words=null,this.length=0,this.red=null,Q!==null&&((B==="le"||B==="be")&&(E=B,B=10),this._init(Q||0,B||10,E||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Uz.Buffer}catch{}s.isBN=function(B){return B instanceof s?!0:B!==null&&typeof B=="object"&&B.constructor.wordSize===s.wordSize&&Array.isArray(B.words)},s.max=function(B,E){return B.cmp(E)>0?B:E},s.min=function(B,E){return B.cmp(E)<0?B:E},s.prototype._init=function(B,E,R){if(typeof B=="number")return this._initNumber(B,E,R);if(typeof B=="object")return this._initArray(B,E,R);E==="hex"&&(E=16),r(E===(E|0)&&E>=2&&E<=36),B=B.toString().replace(/\s+/g,"");var k=0;B[0]==="-"&&(k++,this.negative=1),k<B.length&&(E===16?this._parseHex(B,k,R):(this._parseBase(B,E,k),R==="le"&&this._initArray(this.toArray(),E,R)))},s.prototype._initNumber=function(B,E,R){B<0&&(this.negative=1,B=-B),B<67108864?(this.words=[B&67108863],this.length=1):B<4503599627370496?(this.words=[B&67108863,B/67108864&67108863],this.length=2):(r(B<9007199254740992),this.words=[B&67108863,B/67108864&67108863,1],this.length=3),R==="le"&&this._initArray(this.toArray(),E,R)},s.prototype._initArray=function(B,E,R){if(r(typeof B.length=="number"),B.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(B.length/3),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var M,L,Z=0;if(R==="be")for(k=B.length-1,M=0;k>=0;k-=3)L=B[k]|B[k-1]<<8|B[k-2]<<16,this.words[M]|=L<<Z&67108863,this.words[M+1]=L>>>26-Z&67108863,Z+=24,Z>=26&&(Z-=26,M++);else if(R==="le")for(k=0,M=0;k<B.length;k+=3)L=B[k]|B[k+1]<<8|B[k+2]<<16,this.words[M]|=L<<Z&67108863,this.words[M+1]=L>>>26-Z&67108863,Z+=24,Z>=26&&(Z-=26,M++);return this._strip()};function a(Q,B){var E=Q.charCodeAt(B);if(E>=48&&E<=57)return E-48;if(E>=65&&E<=70)return E-55;if(E>=97&&E<=102)return E-87;r(!1,"Invalid character in "+Q)}function A(Q,B,E){var R=a(Q,E);return E-1>=B&&(R|=a(Q,E-1)<<4),R}s.prototype._parseHex=function(B,E,R){this.length=Math.ceil((B.length-E)/6),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var M=0,L=0,Z;if(R==="be")for(k=B.length-1;k>=E;k-=2)Z=A(B,E,k)<<M,this.words[L]|=Z&67108863,M>=18?(M-=18,L+=1,this.words[L]|=Z>>>26):M+=8;else{var P=B.length-E;for(k=P%2===0?E+1:E;k<B.length;k+=2)Z=A(B,E,k)<<M,this.words[L]|=Z&67108863,M>=18?(M-=18,L+=1,this.words[L]|=Z>>>26):M+=8}this._strip()};function l(Q,B,E,R){for(var k=0,M=0,L=Math.min(Q.length,E),Z=B;Z<L;Z++){var P=Q.charCodeAt(Z)-48;k*=R,P>=49?M=P-49+10:P>=17?M=P-17+10:M=P,r(P>=0&&M<R,"Invalid character"),k+=M}return k}s.prototype._parseBase=function(B,E,R){this.words=[0],this.length=1;for(var k=0,M=1;M<=67108863;M*=E)k++;k--,M=M/E|0;for(var L=B.length-R,Z=L%k,P=Math.min(L,L-Z)+R,U=0,G=R;G<P;G+=k)U=l(B,G,G+k,E),this.imuln(M),this.words[0]+U<67108864?this.words[0]+=U:this._iaddn(U);if(Z!==0){var oe=1;for(U=l(B,G,B.length,E),G=0;G<Z;G++)oe*=E;this.imuln(oe),this.words[0]+U<67108864?this.words[0]+=U:this._iaddn(U)}this._strip()},s.prototype.copy=function(B){B.words=new Array(this.length);for(var E=0;E<this.length;E++)B.words[E]=this.words[E];B.length=this.length,B.negative=this.negative,B.red=this.red};function c(Q,B){Q.words=B.words,Q.length=B.length,Q.negative=B.negative,Q.red=B.red}if(s.prototype._move=function(B){c(B,this)},s.prototype.clone=function(){var B=new s(null);return this.copy(B),B},s.prototype._expand=function(B){for(;this.length<B;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch{s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(B,E){B=B||10,E=E|0||1;var R;if(B===16||B==="hex"){R="";for(var k=0,M=0,L=0;L<this.length;L++){var Z=this.words[L],P=((Z<<k|M)&16777215).toString(16);M=Z>>>24-k&16777215,k+=2,k>=26&&(k-=26,L--),M!==0||L!==this.length-1?R=f[6-P.length]+P+R:R=P+R}for(M!==0&&(R=M.toString(16)+R);R.length%E!==0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}if(B===(B|0)&&B>=2&&B<=36){var U=d[B],G=h[B];R="";var oe=this.clone();for(oe.negative=0;!oe.isZero();){var D=oe.modrn(G).toString(B);oe=oe.idivn(G),oe.isZero()?R=D+R:R=f[U-D.length]+D+R}for(this.isZero()&&(R="0"+R);R.length%E!==0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var B=this.words[0];return this.length===2?B+=this.words[1]*67108864:this.length===3&&this.words[2]===1?B+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-B:B},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(B,E){return this.toArrayLike(o,B,E)}),s.prototype.toArray=function(B,E){return this.toArrayLike(Array,B,E)};var p=function(B,E){return B.allocUnsafe?B.allocUnsafe(E):new B(E)};s.prototype.toArrayLike=function(B,E,R){this._strip();var k=this.byteLength(),M=R||Math.max(1,k);r(k<=M,"byte array longer than desired length"),r(M>0,"Requested array length <= 0");var L=p(B,M),Z=E==="le"?"LE":"BE";return this["_toArrayLike"+Z](L,k),L},s.prototype._toArrayLikeLE=function(B,E){for(var R=0,k=0,M=0,L=0;M<this.length;M++){var Z=this.words[M]<<L|k;B[R++]=Z&255,R<B.length&&(B[R++]=Z>>8&255),R<B.length&&(B[R++]=Z>>16&255),L===6?(R<B.length&&(B[R++]=Z>>24&255),k=0,L=0):(k=Z>>>24,L+=2)}if(R<B.length)for(B[R++]=k;R<B.length;)B[R++]=0},s.prototype._toArrayLikeBE=function(B,E){for(var R=B.length-1,k=0,M=0,L=0;M<this.length;M++){var Z=this.words[M]<<L|k;B[R--]=Z&255,R>=0&&(B[R--]=Z>>8&255),R>=0&&(B[R--]=Z>>16&255),L===6?(R>=0&&(B[R--]=Z>>24&255),k=0,L=0):(k=Z>>>24,L+=2)}if(R>=0)for(B[R--]=k;R>=0;)B[R--]=0},Math.clz32?s.prototype._countBits=function(B){return 32-Math.clz32(B)}:s.prototype._countBits=function(B){var E=B,R=0;return E>=4096&&(R+=13,E>>>=13),E>=64&&(R+=7,E>>>=7),E>=8&&(R+=4,E>>>=4),E>=2&&(R+=2,E>>>=2),R+E},s.prototype._zeroBits=function(B){if(B===0)return 26;var E=B,R=0;return E&8191||(R+=13,E>>>=13),E&127||(R+=7,E>>>=7),E&15||(R+=4,E>>>=4),E&3||(R+=2,E>>>=2),E&1||R++,R},s.prototype.bitLength=function(){var B=this.words[this.length-1],E=this._countBits(B);return(this.length-1)*26+E};function m(Q){for(var B=new Array(Q.bitLength()),E=0;E<B.length;E++){var R=E/26|0,k=E%26;B[E]=Q.words[R]>>>k&1}return B}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var B=0,E=0;E<this.length;E++){var R=this._zeroBits(this.words[E]);if(B+=R,R!==26)break}return B},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(B){return this.negative!==0?this.abs().inotn(B).iaddn(1):this.clone()},s.prototype.fromTwos=function(B){return this.testn(B-1)?this.notn(B).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(B){for(;this.length<B.length;)this.words[this.length++]=0;for(var E=0;E<B.length;E++)this.words[E]=this.words[E]|B.words[E];return this._strip()},s.prototype.ior=function(B){return r((this.negative|B.negative)===0),this.iuor(B)},s.prototype.or=function(B){return this.length>B.length?this.clone().ior(B):B.clone().ior(this)},s.prototype.uor=function(B){return this.length>B.length?this.clone().iuor(B):B.clone().iuor(this)},s.prototype.iuand=function(B){var E;this.length>B.length?E=B:E=this;for(var R=0;R<E.length;R++)this.words[R]=this.words[R]&B.words[R];return this.length=E.length,this._strip()},s.prototype.iand=function(B){return r((this.negative|B.negative)===0),this.iuand(B)},s.prototype.and=function(B){return this.length>B.length?this.clone().iand(B):B.clone().iand(this)},s.prototype.uand=function(B){return this.length>B.length?this.clone().iuand(B):B.clone().iuand(this)},s.prototype.iuxor=function(B){var E,R;this.length>B.length?(E=this,R=B):(E=B,R=this);for(var k=0;k<R.length;k++)this.words[k]=E.words[k]^R.words[k];if(this!==E)for(;k<E.length;k++)this.words[k]=E.words[k];return this.length=E.length,this._strip()},s.prototype.ixor=function(B){return r((this.negative|B.negative)===0),this.iuxor(B)},s.prototype.xor=function(B){return this.length>B.length?this.clone().ixor(B):B.clone().ixor(this)},s.prototype.uxor=function(B){return this.length>B.length?this.clone().iuxor(B):B.clone().iuxor(this)},s.prototype.inotn=function(B){r(typeof B=="number"&&B>=0);var E=Math.ceil(B/26)|0,R=B%26;this._expand(E),R>0&&E--;for(var k=0;k<E;k++)this.words[k]=~this.words[k]&67108863;return R>0&&(this.words[k]=~this.words[k]&67108863>>26-R),this._strip()},s.prototype.notn=function(B){return this.clone().inotn(B)},s.prototype.setn=function(B,E){r(typeof B=="number"&&B>=0);var R=B/26|0,k=B%26;return this._expand(R+1),E?this.words[R]=this.words[R]|1<<k:this.words[R]=this.words[R]&~(1<<k),this._strip()},s.prototype.iadd=function(B){var E;if(this.negative!==0&&B.negative===0)return this.negative=0,E=this.isub(B),this.negative^=1,this._normSign();if(this.negative===0&&B.negative!==0)return B.negative=0,E=this.isub(B),B.negative=1,E._normSign();var R,k;this.length>B.length?(R=this,k=B):(R=B,k=this);for(var M=0,L=0;L<k.length;L++)E=(R.words[L]|0)+(k.words[L]|0)+M,this.words[L]=E&67108863,M=E>>>26;for(;M!==0&&L<R.length;L++)E=(R.words[L]|0)+M,this.words[L]=E&67108863,M=E>>>26;if(this.length=R.length,M!==0)this.words[this.length]=M,this.length++;else if(R!==this)for(;L<R.length;L++)this.words[L]=R.words[L];return this},s.prototype.add=function(B){var E;return B.negative!==0&&this.negative===0?(B.negative=0,E=this.sub(B),B.negative^=1,E):B.negative===0&&this.negative!==0?(this.negative=0,E=B.sub(this),this.negative=1,E):this.length>B.length?this.clone().iadd(B):B.clone().iadd(this)},s.prototype.isub=function(B){if(B.negative!==0){B.negative=0;var E=this.iadd(B);return B.negative=1,E._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(B),this.negative=1,this._normSign();var R=this.cmp(B);if(R===0)return this.negative=0,this.length=1,this.words[0]=0,this;var k,M;R>0?(k=this,M=B):(k=B,M=this);for(var L=0,Z=0;Z<M.length;Z++)E=(k.words[Z]|0)-(M.words[Z]|0)+L,L=E>>26,this.words[Z]=E&67108863;for(;L!==0&&Z<k.length;Z++)E=(k.words[Z]|0)+L,L=E>>26,this.words[Z]=E&67108863;if(L===0&&Z<k.length&&k!==this)for(;Z<k.length;Z++)this.words[Z]=k.words[Z];return this.length=Math.max(this.length,Z),k!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(B){return this.clone().isub(B)};function g(Q,B,E){E.negative=B.negative^Q.negative;var R=Q.length+B.length|0;E.length=R,R=R-1|0;var k=Q.words[0]|0,M=B.words[0]|0,L=k*M,Z=L&67108863,P=L/67108864|0;E.words[0]=Z;for(var U=1;U<R;U++){for(var G=P>>>26,oe=P&67108863,D=Math.min(U,B.length-1),K=Math.max(0,U-Q.length+1);K<=D;K++){var ce=U-K|0;k=Q.words[ce]|0,M=B.words[K]|0,L=k*M+oe,G+=L/67108864|0,oe=L&67108863}E.words[U]=oe|0,P=G|0}return P!==0?E.words[U]=P|0:E.length--,E._strip()}var v=function(B,E,R){var k=B.words,M=E.words,L=R.words,Z=0,P,U,G,oe=k[0]|0,D=oe&8191,K=oe>>>13,ce=k[1]|0,le=ce&8191,he=ce>>>13,$=k[2]|0,ae=$&8191,te=$>>>13,Ae=k[3]|0,re=Ae&8191,me=Ae>>>13,Pe=k[4]|0,_e=Pe&8191,Se=Pe>>>13,Fe=k[5]|0,Ue=Fe&8191,Me=Fe>>>13,W=k[6]|0,O=W&8191,se=W>>>13,de=k[7]|0,Be=de&8191,V=de>>>13,_=k[8]|0,x=_&8191,N=_>>>13,j=k[9]|0,q=j&8191,ne=j>>>13,Ce=M[0]|0,be=Ce&8191,Ee=Ce>>>13,We=M[1]|0,Te=We&8191,ie=We>>>13,we=M[2]|0,xe=we&8191,Qe=we>>>13,He=M[3]|0,qe=He&8191,ot=He>>>13,rn=M[4]|0,wt=rn&8191,nt=rn>>>13,er=M[5]|0,ht=er&8191,Xt=er>>>13,Ao=M[6]|0,Zt=Ao&8191,Yt=Ao>>>13,ee=M[7]|0,ue=ee&8191,ve=ee>>>13,ge=M[8]|0,ye=ge&8191,Ve=ge>>>13,rt=M[9]|0,Ye=rt&8191,ze=rt>>>13;R.negative=B.negative^E.negative,R.length=19,P=Math.imul(D,be),U=Math.imul(D,Ee),U=U+Math.imul(K,be)|0,G=Math.imul(K,Ee);var pt=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(pt>>>26)|0,pt&=67108863,P=Math.imul(le,be),U=Math.imul(le,Ee),U=U+Math.imul(he,be)|0,G=Math.imul(he,Ee),P=P+Math.imul(D,Te)|0,U=U+Math.imul(D,ie)|0,U=U+Math.imul(K,Te)|0,G=G+Math.imul(K,ie)|0;var At=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(At>>>26)|0,At&=67108863,P=Math.imul(ae,be),U=Math.imul(ae,Ee),U=U+Math.imul(te,be)|0,G=Math.imul(te,Ee),P=P+Math.imul(le,Te)|0,U=U+Math.imul(le,ie)|0,U=U+Math.imul(he,Te)|0,G=G+Math.imul(he,ie)|0,P=P+Math.imul(D,xe)|0,U=U+Math.imul(D,Qe)|0,U=U+Math.imul(K,xe)|0,G=G+Math.imul(K,Qe)|0;var ft=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(ft>>>26)|0,ft&=67108863,P=Math.imul(re,be),U=Math.imul(re,Ee),U=U+Math.imul(me,be)|0,G=Math.imul(me,Ee),P=P+Math.imul(ae,Te)|0,U=U+Math.imul(ae,ie)|0,U=U+Math.imul(te,Te)|0,G=G+Math.imul(te,ie)|0,P=P+Math.imul(le,xe)|0,U=U+Math.imul(le,Qe)|0,U=U+Math.imul(he,xe)|0,G=G+Math.imul(he,Qe)|0,P=P+Math.imul(D,qe)|0,U=U+Math.imul(D,ot)|0,U=U+Math.imul(K,qe)|0,G=G+Math.imul(K,ot)|0;var Ot=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,P=Math.imul(_e,be),U=Math.imul(_e,Ee),U=U+Math.imul(Se,be)|0,G=Math.imul(Se,Ee),P=P+Math.imul(re,Te)|0,U=U+Math.imul(re,ie)|0,U=U+Math.imul(me,Te)|0,G=G+Math.imul(me,ie)|0,P=P+Math.imul(ae,xe)|0,U=U+Math.imul(ae,Qe)|0,U=U+Math.imul(te,xe)|0,G=G+Math.imul(te,Qe)|0,P=P+Math.imul(le,qe)|0,U=U+Math.imul(le,ot)|0,U=U+Math.imul(he,qe)|0,G=G+Math.imul(he,ot)|0,P=P+Math.imul(D,wt)|0,U=U+Math.imul(D,nt)|0,U=U+Math.imul(K,wt)|0,G=G+Math.imul(K,nt)|0;var Tr=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,P=Math.imul(Ue,be),U=Math.imul(Ue,Ee),U=U+Math.imul(Me,be)|0,G=Math.imul(Me,Ee),P=P+Math.imul(_e,Te)|0,U=U+Math.imul(_e,ie)|0,U=U+Math.imul(Se,Te)|0,G=G+Math.imul(Se,ie)|0,P=P+Math.imul(re,xe)|0,U=U+Math.imul(re,Qe)|0,U=U+Math.imul(me,xe)|0,G=G+Math.imul(me,Qe)|0,P=P+Math.imul(ae,qe)|0,U=U+Math.imul(ae,ot)|0,U=U+Math.imul(te,qe)|0,G=G+Math.imul(te,ot)|0,P=P+Math.imul(le,wt)|0,U=U+Math.imul(le,nt)|0,U=U+Math.imul(he,wt)|0,G=G+Math.imul(he,nt)|0,P=P+Math.imul(D,ht)|0,U=U+Math.imul(D,Xt)|0,U=U+Math.imul(K,ht)|0,G=G+Math.imul(K,Xt)|0;var Wo=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(Wo>>>26)|0,Wo&=67108863,P=Math.imul(O,be),U=Math.imul(O,Ee),U=U+Math.imul(se,be)|0,G=Math.imul(se,Ee),P=P+Math.imul(Ue,Te)|0,U=U+Math.imul(Ue,ie)|0,U=U+Math.imul(Me,Te)|0,G=G+Math.imul(Me,ie)|0,P=P+Math.imul(_e,xe)|0,U=U+Math.imul(_e,Qe)|0,U=U+Math.imul(Se,xe)|0,G=G+Math.imul(Se,Qe)|0,P=P+Math.imul(re,qe)|0,U=U+Math.imul(re,ot)|0,U=U+Math.imul(me,qe)|0,G=G+Math.imul(me,ot)|0,P=P+Math.imul(ae,wt)|0,U=U+Math.imul(ae,nt)|0,U=U+Math.imul(te,wt)|0,G=G+Math.imul(te,nt)|0,P=P+Math.imul(le,ht)|0,U=U+Math.imul(le,Xt)|0,U=U+Math.imul(he,ht)|0,G=G+Math.imul(he,Xt)|0,P=P+Math.imul(D,Zt)|0,U=U+Math.imul(D,Yt)|0,U=U+Math.imul(K,Zt)|0,G=G+Math.imul(K,Yt)|0;var Oo=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(Oo>>>26)|0,Oo&=67108863,P=Math.imul(Be,be),U=Math.imul(Be,Ee),U=U+Math.imul(V,be)|0,G=Math.imul(V,Ee),P=P+Math.imul(O,Te)|0,U=U+Math.imul(O,ie)|0,U=U+Math.imul(se,Te)|0,G=G+Math.imul(se,ie)|0,P=P+Math.imul(Ue,xe)|0,U=U+Math.imul(Ue,Qe)|0,U=U+Math.imul(Me,xe)|0,G=G+Math.imul(Me,Qe)|0,P=P+Math.imul(_e,qe)|0,U=U+Math.imul(_e,ot)|0,U=U+Math.imul(Se,qe)|0,G=G+Math.imul(Se,ot)|0,P=P+Math.imul(re,wt)|0,U=U+Math.imul(re,nt)|0,U=U+Math.imul(me,wt)|0,G=G+Math.imul(me,nt)|0,P=P+Math.imul(ae,ht)|0,U=U+Math.imul(ae,Xt)|0,U=U+Math.imul(te,ht)|0,G=G+Math.imul(te,Xt)|0,P=P+Math.imul(le,Zt)|0,U=U+Math.imul(le,Yt)|0,U=U+Math.imul(he,Zt)|0,G=G+Math.imul(he,Yt)|0,P=P+Math.imul(D,ue)|0,U=U+Math.imul(D,ve)|0,U=U+Math.imul(K,ue)|0,G=G+Math.imul(K,ve)|0;var di=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(di>>>26)|0,di&=67108863,P=Math.imul(x,be),U=Math.imul(x,Ee),U=U+Math.imul(N,be)|0,G=Math.imul(N,Ee),P=P+Math.imul(Be,Te)|0,U=U+Math.imul(Be,ie)|0,U=U+Math.imul(V,Te)|0,G=G+Math.imul(V,ie)|0,P=P+Math.imul(O,xe)|0,U=U+Math.imul(O,Qe)|0,U=U+Math.imul(se,xe)|0,G=G+Math.imul(se,Qe)|0,P=P+Math.imul(Ue,qe)|0,U=U+Math.imul(Ue,ot)|0,U=U+Math.imul(Me,qe)|0,G=G+Math.imul(Me,ot)|0,P=P+Math.imul(_e,wt)|0,U=U+Math.imul(_e,nt)|0,U=U+Math.imul(Se,wt)|0,G=G+Math.imul(Se,nt)|0,P=P+Math.imul(re,ht)|0,U=U+Math.imul(re,Xt)|0,U=U+Math.imul(me,ht)|0,G=G+Math.imul(me,Xt)|0,P=P+Math.imul(ae,Zt)|0,U=U+Math.imul(ae,Yt)|0,U=U+Math.imul(te,Zt)|0,G=G+Math.imul(te,Yt)|0,P=P+Math.imul(le,ue)|0,U=U+Math.imul(le,ve)|0,U=U+Math.imul(he,ue)|0,G=G+Math.imul(he,ve)|0,P=P+Math.imul(D,ye)|0,U=U+Math.imul(D,Ve)|0,U=U+Math.imul(K,ye)|0,G=G+Math.imul(K,Ve)|0;var Tt=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,P=Math.imul(q,be),U=Math.imul(q,Ee),U=U+Math.imul(ne,be)|0,G=Math.imul(ne,Ee),P=P+Math.imul(x,Te)|0,U=U+Math.imul(x,ie)|0,U=U+Math.imul(N,Te)|0,G=G+Math.imul(N,ie)|0,P=P+Math.imul(Be,xe)|0,U=U+Math.imul(Be,Qe)|0,U=U+Math.imul(V,xe)|0,G=G+Math.imul(V,Qe)|0,P=P+Math.imul(O,qe)|0,U=U+Math.imul(O,ot)|0,U=U+Math.imul(se,qe)|0,G=G+Math.imul(se,ot)|0,P=P+Math.imul(Ue,wt)|0,U=U+Math.imul(Ue,nt)|0,U=U+Math.imul(Me,wt)|0,G=G+Math.imul(Me,nt)|0,P=P+Math.imul(_e,ht)|0,U=U+Math.imul(_e,Xt)|0,U=U+Math.imul(Se,ht)|0,G=G+Math.imul(Se,Xt)|0,P=P+Math.imul(re,Zt)|0,U=U+Math.imul(re,Yt)|0,U=U+Math.imul(me,Zt)|0,G=G+Math.imul(me,Yt)|0,P=P+Math.imul(ae,ue)|0,U=U+Math.imul(ae,ve)|0,U=U+Math.imul(te,ue)|0,G=G+Math.imul(te,ve)|0,P=P+Math.imul(le,ye)|0,U=U+Math.imul(le,Ve)|0,U=U+Math.imul(he,ye)|0,G=G+Math.imul(he,Ve)|0,P=P+Math.imul(D,Ye)|0,U=U+Math.imul(D,ze)|0,U=U+Math.imul(K,Ye)|0,G=G+Math.imul(K,ze)|0;var Zo=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(Zo>>>26)|0,Zo&=67108863,P=Math.imul(q,Te),U=Math.imul(q,ie),U=U+Math.imul(ne,Te)|0,G=Math.imul(ne,ie),P=P+Math.imul(x,xe)|0,U=U+Math.imul(x,Qe)|0,U=U+Math.imul(N,xe)|0,G=G+Math.imul(N,Qe)|0,P=P+Math.imul(Be,qe)|0,U=U+Math.imul(Be,ot)|0,U=U+Math.imul(V,qe)|0,G=G+Math.imul(V,ot)|0,P=P+Math.imul(O,wt)|0,U=U+Math.imul(O,nt)|0,U=U+Math.imul(se,wt)|0,G=G+Math.imul(se,nt)|0,P=P+Math.imul(Ue,ht)|0,U=U+Math.imul(Ue,Xt)|0,U=U+Math.imul(Me,ht)|0,G=G+Math.imul(Me,Xt)|0,P=P+Math.imul(_e,Zt)|0,U=U+Math.imul(_e,Yt)|0,U=U+Math.imul(Se,Zt)|0,G=G+Math.imul(Se,Yt)|0,P=P+Math.imul(re,ue)|0,U=U+Math.imul(re,ve)|0,U=U+Math.imul(me,ue)|0,G=G+Math.imul(me,ve)|0,P=P+Math.imul(ae,ye)|0,U=U+Math.imul(ae,Ve)|0,U=U+Math.imul(te,ye)|0,G=G+Math.imul(te,Ve)|0,P=P+Math.imul(le,Ye)|0,U=U+Math.imul(le,ze)|0,U=U+Math.imul(he,Ye)|0,G=G+Math.imul(he,ze)|0;var hn=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(hn>>>26)|0,hn&=67108863,P=Math.imul(q,xe),U=Math.imul(q,Qe),U=U+Math.imul(ne,xe)|0,G=Math.imul(ne,Qe),P=P+Math.imul(x,qe)|0,U=U+Math.imul(x,ot)|0,U=U+Math.imul(N,qe)|0,G=G+Math.imul(N,ot)|0,P=P+Math.imul(Be,wt)|0,U=U+Math.imul(Be,nt)|0,U=U+Math.imul(V,wt)|0,G=G+Math.imul(V,nt)|0,P=P+Math.imul(O,ht)|0,U=U+Math.imul(O,Xt)|0,U=U+Math.imul(se,ht)|0,G=G+Math.imul(se,Xt)|0,P=P+Math.imul(Ue,Zt)|0,U=U+Math.imul(Ue,Yt)|0,U=U+Math.imul(Me,Zt)|0,G=G+Math.imul(Me,Yt)|0,P=P+Math.imul(_e,ue)|0,U=U+Math.imul(_e,ve)|0,U=U+Math.imul(Se,ue)|0,G=G+Math.imul(Se,ve)|0,P=P+Math.imul(re,ye)|0,U=U+Math.imul(re,Ve)|0,U=U+Math.imul(me,ye)|0,G=G+Math.imul(me,Ve)|0,P=P+Math.imul(ae,Ye)|0,U=U+Math.imul(ae,ze)|0,U=U+Math.imul(te,Ye)|0,G=G+Math.imul(te,ze)|0;var Nr=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,P=Math.imul(q,qe),U=Math.imul(q,ot),U=U+Math.imul(ne,qe)|0,G=Math.imul(ne,ot),P=P+Math.imul(x,wt)|0,U=U+Math.imul(x,nt)|0,U=U+Math.imul(N,wt)|0,G=G+Math.imul(N,nt)|0,P=P+Math.imul(Be,ht)|0,U=U+Math.imul(Be,Xt)|0,U=U+Math.imul(V,ht)|0,G=G+Math.imul(V,Xt)|0,P=P+Math.imul(O,Zt)|0,U=U+Math.imul(O,Yt)|0,U=U+Math.imul(se,Zt)|0,G=G+Math.imul(se,Yt)|0,P=P+Math.imul(Ue,ue)|0,U=U+Math.imul(Ue,ve)|0,U=U+Math.imul(Me,ue)|0,G=G+Math.imul(Me,ve)|0,P=P+Math.imul(_e,ye)|0,U=U+Math.imul(_e,Ve)|0,U=U+Math.imul(Se,ye)|0,G=G+Math.imul(Se,Ve)|0,P=P+Math.imul(re,Ye)|0,U=U+Math.imul(re,ze)|0,U=U+Math.imul(me,Ye)|0,G=G+Math.imul(me,ze)|0;var ms=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(ms>>>26)|0,ms&=67108863,P=Math.imul(q,wt),U=Math.imul(q,nt),U=U+Math.imul(ne,wt)|0,G=Math.imul(ne,nt),P=P+Math.imul(x,ht)|0,U=U+Math.imul(x,Xt)|0,U=U+Math.imul(N,ht)|0,G=G+Math.imul(N,Xt)|0,P=P+Math.imul(Be,Zt)|0,U=U+Math.imul(Be,Yt)|0,U=U+Math.imul(V,Zt)|0,G=G+Math.imul(V,Yt)|0,P=P+Math.imul(O,ue)|0,U=U+Math.imul(O,ve)|0,U=U+Math.imul(se,ue)|0,G=G+Math.imul(se,ve)|0,P=P+Math.imul(Ue,ye)|0,U=U+Math.imul(Ue,Ve)|0,U=U+Math.imul(Me,ye)|0,G=G+Math.imul(Me,Ve)|0,P=P+Math.imul(_e,Ye)|0,U=U+Math.imul(_e,ze)|0,U=U+Math.imul(Se,Ye)|0,G=G+Math.imul(Se,ze)|0;var Da=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(Da>>>26)|0,Da&=67108863,P=Math.imul(q,ht),U=Math.imul(q,Xt),U=U+Math.imul(ne,ht)|0,G=Math.imul(ne,Xt),P=P+Math.imul(x,Zt)|0,U=U+Math.imul(x,Yt)|0,U=U+Math.imul(N,Zt)|0,G=G+Math.imul(N,Yt)|0,P=P+Math.imul(Be,ue)|0,U=U+Math.imul(Be,ve)|0,U=U+Math.imul(V,ue)|0,G=G+Math.imul(V,ve)|0,P=P+Math.imul(O,ye)|0,U=U+Math.imul(O,Ve)|0,U=U+Math.imul(se,ye)|0,G=G+Math.imul(se,Ve)|0,P=P+Math.imul(Ue,Ye)|0,U=U+Math.imul(Ue,ze)|0,U=U+Math.imul(Me,Ye)|0,G=G+Math.imul(Me,ze)|0;var uc=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(uc>>>26)|0,uc&=67108863,P=Math.imul(q,Zt),U=Math.imul(q,Yt),U=U+Math.imul(ne,Zt)|0,G=Math.imul(ne,Yt),P=P+Math.imul(x,ue)|0,U=U+Math.imul(x,ve)|0,U=U+Math.imul(N,ue)|0,G=G+Math.imul(N,ve)|0,P=P+Math.imul(Be,ye)|0,U=U+Math.imul(Be,Ve)|0,U=U+Math.imul(V,ye)|0,G=G+Math.imul(V,Ve)|0,P=P+Math.imul(O,Ye)|0,U=U+Math.imul(O,ze)|0,U=U+Math.imul(se,Ye)|0,G=G+Math.imul(se,ze)|0;var tr=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(tr>>>26)|0,tr&=67108863,P=Math.imul(q,ue),U=Math.imul(q,ve),U=U+Math.imul(ne,ue)|0,G=Math.imul(ne,ve),P=P+Math.imul(x,ye)|0,U=U+Math.imul(x,Ve)|0,U=U+Math.imul(N,ye)|0,G=G+Math.imul(N,Ve)|0,P=P+Math.imul(Be,Ye)|0,U=U+Math.imul(Be,ze)|0,U=U+Math.imul(V,Ye)|0,G=G+Math.imul(V,ze)|0;var lo=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(lo>>>26)|0,lo&=67108863,P=Math.imul(q,ye),U=Math.imul(q,Ve),U=U+Math.imul(ne,ye)|0,G=Math.imul(ne,Ve),P=P+Math.imul(x,Ye)|0,U=U+Math.imul(x,ze)|0,U=U+Math.imul(N,Ye)|0,G=G+Math.imul(N,ze)|0;var fc=(Z+P|0)+((U&8191)<<13)|0;Z=(G+(U>>>13)|0)+(fc>>>26)|0,fc&=67108863,P=Math.imul(q,Ye),U=Math.imul(q,ze),U=U+Math.imul(ne,Ye)|0,G=Math.imul(ne,ze);var Cr=(Z+P|0)+((U&8191)<<13)|0;return Z=(G+(U>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,L[0]=pt,L[1]=At,L[2]=ft,L[3]=Ot,L[4]=Tr,L[5]=Wo,L[6]=Oo,L[7]=di,L[8]=Tt,L[9]=Zo,L[10]=hn,L[11]=Nr,L[12]=ms,L[13]=Da,L[14]=uc,L[15]=tr,L[16]=lo,L[17]=fc,L[18]=Cr,Z!==0&&(L[19]=Z,R.length++),R};Math.imul||(v=g);function y(Q,B,E){E.negative=B.negative^Q.negative,E.length=Q.length+B.length;for(var R=0,k=0,M=0;M<E.length-1;M++){var L=k;k=0;for(var Z=R&67108863,P=Math.min(M,B.length-1),U=Math.max(0,M-Q.length+1);U<=P;U++){var G=M-U,oe=Q.words[G]|0,D=B.words[U]|0,K=oe*D,ce=K&67108863;L=L+(K/67108864|0)|0,ce=ce+Z|0,Z=ce&67108863,L=L+(ce>>>26)|0,k+=L>>>26,L&=67108863}E.words[M]=Z,R=L,L=k}return R!==0?E.words[M]=R:E.length--,E._strip()}function w(Q,B,E){return y(Q,B,E)}s.prototype.mulTo=function(B,E){var R,k=this.length+B.length;return this.length===10&&B.length===10?R=v(this,B,E):k<63?R=g(this,B,E):k<1024?R=y(this,B,E):R=w(this,B,E),R},s.prototype.mul=function(B){var E=new s(null);return E.words=new Array(this.length+B.length),this.mulTo(B,E)},s.prototype.mulf=function(B){var E=new s(null);return E.words=new Array(this.length+B.length),w(this,B,E)},s.prototype.imul=function(B){return this.clone().mulTo(B,this)},s.prototype.imuln=function(B){var E=B<0;E&&(B=-B),r(typeof B=="number"),r(B<67108864);for(var R=0,k=0;k<this.length;k++){var M=(this.words[k]|0)*B,L=(M&67108863)+(R&67108863);R>>=26,R+=M/67108864|0,R+=L>>>26,this.words[k]=L&67108863}return R!==0&&(this.words[k]=R,this.length++),E?this.ineg():this},s.prototype.muln=function(B){return this.clone().imuln(B)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(B){var E=m(B);if(E.length===0)return new s(1);for(var R=this,k=0;k<E.length&&E[k]===0;k++,R=R.sqr());if(++k<E.length)for(var M=R.sqr();k<E.length;k++,M=M.sqr())E[k]!==0&&(R=R.mul(M));return R},s.prototype.iushln=function(B){r(typeof B=="number"&&B>=0);var E=B%26,R=(B-E)/26,k=67108863>>>26-E<<26-E,M;if(E!==0){var L=0;for(M=0;M<this.length;M++){var Z=this.words[M]&k,P=(this.words[M]|0)-Z<<E;this.words[M]=P|L,L=Z>>>26-E}L&&(this.words[M]=L,this.length++)}if(R!==0){for(M=this.length-1;M>=0;M--)this.words[M+R]=this.words[M];for(M=0;M<R;M++)this.words[M]=0;this.length+=R}return this._strip()},s.prototype.ishln=function(B){return r(this.negative===0),this.iushln(B)},s.prototype.iushrn=function(B,E,R){r(typeof B=="number"&&B>=0);var k;E?k=(E-E%26)/26:k=0;var M=B%26,L=Math.min((B-M)/26,this.length),Z=67108863^67108863>>>M<<M,P=R;if(k-=L,k=Math.max(0,k),P){for(var U=0;U<L;U++)P.words[U]=this.words[U];P.length=L}if(L!==0)if(this.length>L)for(this.length-=L,U=0;U<this.length;U++)this.words[U]=this.words[U+L];else this.words[0]=0,this.length=1;var G=0;for(U=this.length-1;U>=0&&(G!==0||U>=k);U--){var oe=this.words[U]|0;this.words[U]=G<<26-M|oe>>>M,G=oe&Z}return P&&G!==0&&(P.words[P.length++]=G),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(B,E,R){return r(this.negative===0),this.iushrn(B,E,R)},s.prototype.shln=function(B){return this.clone().ishln(B)},s.prototype.ushln=function(B){return this.clone().iushln(B)},s.prototype.shrn=function(B){return this.clone().ishrn(B)},s.prototype.ushrn=function(B){return this.clone().iushrn(B)},s.prototype.testn=function(B){r(typeof B=="number"&&B>=0);var E=B%26,R=(B-E)/26,k=1<<E;if(this.length<=R)return!1;var M=this.words[R];return!!(M&k)},s.prototype.imaskn=function(B){r(typeof B=="number"&&B>=0);var E=B%26,R=(B-E)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=R)return this;if(E!==0&&R++,this.length=Math.min(R,this.length),E!==0){var k=67108863^67108863>>>E<<E;this.words[this.length-1]&=k}return this._strip()},s.prototype.maskn=function(B){return this.clone().imaskn(B)},s.prototype.iaddn=function(B){return r(typeof B=="number"),r(B<67108864),B<0?this.isubn(-B):this.negative!==0?this.length===1&&(this.words[0]|0)<=B?(this.words[0]=B-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(B),this.negative=1,this):this._iaddn(B)},s.prototype._iaddn=function(B){this.words[0]+=B;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},s.prototype.isubn=function(B){if(r(typeof B=="number"),r(B<67108864),B<0)return this.iaddn(-B);if(this.negative!==0)return this.negative=0,this.iaddn(B),this.negative=1,this;if(this.words[0]-=B,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this._strip()},s.prototype.addn=function(B){return this.clone().iaddn(B)},s.prototype.subn=function(B){return this.clone().isubn(B)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(B,E,R){var k=B.length+R,M;this._expand(k);var L,Z=0;for(M=0;M<B.length;M++){L=(this.words[M+R]|0)+Z;var P=(B.words[M]|0)*E;L-=P&67108863,Z=(L>>26)-(P/67108864|0),this.words[M+R]=L&67108863}for(;M<this.length-R;M++)L=(this.words[M+R]|0)+Z,Z=L>>26,this.words[M+R]=L&67108863;if(Z===0)return this._strip();for(r(Z===-1),Z=0,M=0;M<this.length;M++)L=-(this.words[M]|0)+Z,Z=L>>26,this.words[M]=L&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(B,E){var R=this.length-B.length,k=this.clone(),M=B,L=M.words[M.length-1]|0,Z=this._countBits(L);R=26-Z,R!==0&&(M=M.ushln(R),k.iushln(R),L=M.words[M.length-1]|0);var P=k.length-M.length,U;if(E!=="mod"){U=new s(null),U.length=P+1,U.words=new Array(U.length);for(var G=0;G<U.length;G++)U.words[G]=0}var oe=k.clone()._ishlnsubmul(M,1,P);oe.negative===0&&(k=oe,U&&(U.words[P]=1));for(var D=P-1;D>=0;D--){var K=(k.words[M.length+D]|0)*67108864+(k.words[M.length+D-1]|0);for(K=Math.min(K/L|0,67108863),k._ishlnsubmul(M,K,D);k.negative!==0;)K--,k.negative=0,k._ishlnsubmul(M,1,D),k.isZero()||(k.negative^=1);U&&(U.words[D]=K)}return U&&U._strip(),k._strip(),E!=="div"&&R!==0&&k.iushrn(R),{div:U||null,mod:k}},s.prototype.divmod=function(B,E,R){if(r(!B.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var k,M,L;return this.negative!==0&&B.negative===0?(L=this.neg().divmod(B,E),E!=="mod"&&(k=L.div.neg()),E!=="div"&&(M=L.mod.neg(),R&&M.negative!==0&&M.iadd(B)),{div:k,mod:M}):this.negative===0&&B.negative!==0?(L=this.divmod(B.neg(),E),E!=="mod"&&(k=L.div.neg()),{div:k,mod:L.mod}):this.negative&B.negative?(L=this.neg().divmod(B.neg(),E),E!=="div"&&(M=L.mod.neg(),R&&M.negative!==0&&M.isub(B)),{div:L.div,mod:M}):B.length>this.length||this.cmp(B)<0?{div:new s(0),mod:this}:B.length===1?E==="div"?{div:this.divn(B.words[0]),mod:null}:E==="mod"?{div:null,mod:new s(this.modrn(B.words[0]))}:{div:this.divn(B.words[0]),mod:new s(this.modrn(B.words[0]))}:this._wordDiv(B,E)},s.prototype.div=function(B){return this.divmod(B,"div",!1).div},s.prototype.mod=function(B){return this.divmod(B,"mod",!1).mod},s.prototype.umod=function(B){return this.divmod(B,"mod",!0).mod},s.prototype.divRound=function(B){var E=this.divmod(B);if(E.mod.isZero())return E.div;var R=E.div.negative!==0?E.mod.isub(B):E.mod,k=B.ushrn(1),M=B.andln(1),L=R.cmp(k);return L<0||M===1&&L===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},s.prototype.modrn=function(B){var E=B<0;E&&(B=-B),r(B<=67108863);for(var R=(1<<26)%B,k=0,M=this.length-1;M>=0;M--)k=(R*k+(this.words[M]|0))%B;return E?-k:k},s.prototype.modn=function(B){return this.modrn(B)},s.prototype.idivn=function(B){var E=B<0;E&&(B=-B),r(B<=67108863);for(var R=0,k=this.length-1;k>=0;k--){var M=(this.words[k]|0)+R*67108864;this.words[k]=M/B|0,R=M%B}return this._strip(),E?this.ineg():this},s.prototype.divn=function(B){return this.clone().idivn(B)},s.prototype.egcd=function(B){r(B.negative===0),r(!B.isZero());var E=this,R=B.clone();E.negative!==0?E=E.umod(B):E=E.clone();for(var k=new s(1),M=new s(0),L=new s(0),Z=new s(1),P=0;E.isEven()&&R.isEven();)E.iushrn(1),R.iushrn(1),++P;for(var U=R.clone(),G=E.clone();!E.isZero();){for(var oe=0,D=1;!(E.words[0]&D)&&oe<26;++oe,D<<=1);if(oe>0)for(E.iushrn(oe);oe-- >0;)(k.isOdd()||M.isOdd())&&(k.iadd(U),M.isub(G)),k.iushrn(1),M.iushrn(1);for(var K=0,ce=1;!(R.words[0]&ce)&&K<26;++K,ce<<=1);if(K>0)for(R.iushrn(K);K-- >0;)(L.isOdd()||Z.isOdd())&&(L.iadd(U),Z.isub(G)),L.iushrn(1),Z.iushrn(1);E.cmp(R)>=0?(E.isub(R),k.isub(L),M.isub(Z)):(R.isub(E),L.isub(k),Z.isub(M))}return{a:L,b:Z,gcd:R.iushln(P)}},s.prototype._invmp=function(B){r(B.negative===0),r(!B.isZero());var E=this,R=B.clone();E.negative!==0?E=E.umod(B):E=E.clone();for(var k=new s(1),M=new s(0),L=R.clone();E.cmpn(1)>0&&R.cmpn(1)>0;){for(var Z=0,P=1;!(E.words[0]&P)&&Z<26;++Z,P<<=1);if(Z>0)for(E.iushrn(Z);Z-- >0;)k.isOdd()&&k.iadd(L),k.iushrn(1);for(var U=0,G=1;!(R.words[0]&G)&&U<26;++U,G<<=1);if(U>0)for(R.iushrn(U);U-- >0;)M.isOdd()&&M.iadd(L),M.iushrn(1);E.cmp(R)>=0?(E.isub(R),k.isub(M)):(R.isub(E),M.isub(k))}var oe;return E.cmpn(1)===0?oe=k:oe=M,oe.cmpn(0)<0&&oe.iadd(B),oe},s.prototype.gcd=function(B){if(this.isZero())return B.abs();if(B.isZero())return this.abs();var E=this.clone(),R=B.clone();E.negative=0,R.negative=0;for(var k=0;E.isEven()&&R.isEven();k++)E.iushrn(1),R.iushrn(1);do{for(;E.isEven();)E.iushrn(1);for(;R.isEven();)R.iushrn(1);var M=E.cmp(R);if(M<0){var L=E;E=R,R=L}else if(M===0||R.cmpn(1)===0)break;E.isub(R)}while(!0);return R.iushln(k)},s.prototype.invm=function(B){return this.egcd(B).a.umod(B)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(B){return this.words[0]&B},s.prototype.bincn=function(B){r(typeof B=="number");var E=B%26,R=(B-E)/26,k=1<<E;if(this.length<=R)return this._expand(R+1),this.words[R]|=k,this;for(var M=k,L=R;M!==0&&L<this.length;L++){var Z=this.words[L]|0;Z+=M,M=Z>>>26,Z&=67108863,this.words[L]=Z}return M!==0&&(this.words[L]=M,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(B){var E=B<0;if(this.negative!==0&&!E)return-1;if(this.negative===0&&E)return 1;this._strip();var R;if(this.length>1)R=1;else{E&&(B=-B),r(B<=67108863,"Number is too big");var k=this.words[0]|0;R=k===B?0:k<B?-1:1}return this.negative!==0?-R|0:R},s.prototype.cmp=function(B){if(this.negative!==0&&B.negative===0)return-1;if(this.negative===0&&B.negative!==0)return 1;var E=this.ucmp(B);return this.negative!==0?-E|0:E},s.prototype.ucmp=function(B){if(this.length>B.length)return 1;if(this.length<B.length)return-1;for(var E=0,R=this.length-1;R>=0;R--){var k=this.words[R]|0,M=B.words[R]|0;if(k!==M){k<M?E=-1:k>M&&(E=1);break}}return E},s.prototype.gtn=function(B){return this.cmpn(B)===1},s.prototype.gt=function(B){return this.cmp(B)===1},s.prototype.gten=function(B){return this.cmpn(B)>=0},s.prototype.gte=function(B){return this.cmp(B)>=0},s.prototype.ltn=function(B){return this.cmpn(B)===-1},s.prototype.lt=function(B){return this.cmp(B)===-1},s.prototype.lten=function(B){return this.cmpn(B)<=0},s.prototype.lte=function(B){return this.cmp(B)<=0},s.prototype.eqn=function(B){return this.cmpn(B)===0},s.prototype.eq=function(B){return this.cmp(B)===0},s.red=function(B){return new H(B)},s.prototype.toRed=function(B){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),B.convertTo(this)._forceRed(B)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(B){return this.red=B,this},s.prototype.forceRed=function(B){return r(!this.red,"Already a number in reduction context"),this._forceRed(B)},s.prototype.redAdd=function(B){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,B)},s.prototype.redIAdd=function(B){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,B)},s.prototype.redSub=function(B){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,B)},s.prototype.redISub=function(B){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,B)},s.prototype.redShl=function(B){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,B)},s.prototype.redMul=function(B){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,B),this.red.mul(this,B)},s.prototype.redIMul=function(B){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,B),this.red.imul(this,B)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(B){return r(this.red&&!B.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,B)};var C={k256:null,p224:null,p192:null,p25519:null};function b(Q,B){this.name=Q,this.p=new s(B,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}b.prototype._tmp=function(){var B=new s(null);return B.words=new Array(Math.ceil(this.n/13)),B},b.prototype.ireduce=function(B){var E=B,R;do this.split(E,this.tmp),E=this.imulK(E),E=E.iadd(this.tmp),R=E.bitLength();while(R>this.n);var k=R<this.n?-1:E.ucmp(this.p);return k===0?(E.words[0]=0,E.length=1):k>0?E.isub(this.p):E.strip!==void 0?E.strip():E._strip(),E},b.prototype.split=function(B,E){B.iushrn(this.n,0,E)},b.prototype.imulK=function(B){return B.imul(this.k)};function F(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,b),F.prototype.split=function(B,E){for(var R=4194303,k=Math.min(B.length,9),M=0;M<k;M++)E.words[M]=B.words[M];if(E.length=k,B.length<=9){B.words[0]=0,B.length=1;return}var L=B.words[9];for(E.words[E.length++]=L&R,M=10;M<B.length;M++){var Z=B.words[M]|0;B.words[M-10]=(Z&R)<<4|L>>>22,L=Z}L>>>=22,B.words[M-10]=L,L===0&&B.length>10?B.length-=10:B.length-=9},F.prototype.imulK=function(B){B.words[B.length]=0,B.words[B.length+1]=0,B.length+=2;for(var E=0,R=0;R<B.length;R++){var k=B.words[R]|0;E+=k*977,B.words[R]=E&67108863,E=k*64+(E/67108864|0)}return B.words[B.length-1]===0&&(B.length--,B.words[B.length-1]===0&&B.length--),B};function I(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(I,b);function S(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(S,b);function T(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(T,b),T.prototype.imulK=function(B){for(var E=0,R=0;R<B.length;R++){var k=(B.words[R]|0)*19+E,M=k&67108863;k>>>=26,B.words[R]=M,E=k}return E!==0&&(B.words[B.length++]=E),B},s._prime=function(B){if(C[B])return C[B];var E;if(B==="k256")E=new F;else if(B==="p224")E=new I;else if(B==="p192")E=new S;else if(B==="p25519")E=new T;else throw new Error("Unknown prime "+B);return C[B]=E,E};function H(Q){if(typeof Q=="string"){var B=s._prime(Q);this.m=B.p,this.prime=B}else r(Q.gtn(1),"modulus must be greater than 1"),this.m=Q,this.prime=null}H.prototype._verify1=function(B){r(B.negative===0,"red works only with positives"),r(B.red,"red works only with red numbers")},H.prototype._verify2=function(B,E){r((B.negative|E.negative)===0,"red works only with positives"),r(B.red&&B.red===E.red,"red works only with red numbers")},H.prototype.imod=function(B){return this.prime?this.prime.ireduce(B)._forceRed(this):(c(B,B.umod(this.m)._forceRed(this)),B)},H.prototype.neg=function(B){return B.isZero()?B.clone():this.m.sub(B)._forceRed(this)},H.prototype.add=function(B,E){this._verify2(B,E);var R=B.add(E);return R.cmp(this.m)>=0&&R.isub(this.m),R._forceRed(this)},H.prototype.iadd=function(B,E){this._verify2(B,E);var R=B.iadd(E);return R.cmp(this.m)>=0&&R.isub(this.m),R},H.prototype.sub=function(B,E){this._verify2(B,E);var R=B.sub(E);return R.cmpn(0)<0&&R.iadd(this.m),R._forceRed(this)},H.prototype.isub=function(B,E){this._verify2(B,E);var R=B.isub(E);return R.cmpn(0)<0&&R.iadd(this.m),R},H.prototype.shl=function(B,E){return this._verify1(B),this.imod(B.ushln(E))},H.prototype.imul=function(B,E){return this._verify2(B,E),this.imod(B.imul(E))},H.prototype.mul=function(B,E){return this._verify2(B,E),this.imod(B.mul(E))},H.prototype.isqr=function(B){return this.imul(B,B.clone())},H.prototype.sqr=function(B){return this.mul(B,B)},H.prototype.sqrt=function(B){if(B.isZero())return B.clone();var E=this.m.andln(3);if(r(E%2===1),E===3){var R=this.m.add(new s(1)).iushrn(2);return this.pow(B,R)}for(var k=this.m.subn(1),M=0;!k.isZero()&&k.andln(1)===0;)M++,k.iushrn(1);r(!k.isZero());var L=new s(1).toRed(this),Z=L.redNeg(),P=this.m.subn(1).iushrn(1),U=this.m.bitLength();for(U=new s(2*U*U).toRed(this);this.pow(U,P).cmp(Z)!==0;)U.redIAdd(Z);for(var G=this.pow(U,k),oe=this.pow(B,k.addn(1).iushrn(1)),D=this.pow(B,k),K=M;D.cmp(L)!==0;){for(var ce=D,le=0;ce.cmp(L)!==0;le++)ce=ce.redSqr();r(le<K);var he=this.pow(G,new s(1).iushln(K-le-1));oe=oe.redMul(he),G=he.redSqr(),D=D.redMul(G),K=le}return oe},H.prototype.invm=function(B){var E=B._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},H.prototype.pow=function(B,E){if(E.isZero())return new s(1).toRed(this);if(E.cmpn(1)===0)return B.clone();var R=4,k=new Array(1<<R);k[0]=new s(1).toRed(this),k[1]=B;for(var M=2;M<k.length;M++)k[M]=this.mul(k[M-1],B);var L=k[0],Z=0,P=0,U=E.bitLength()%26;for(U===0&&(U=26),M=E.length-1;M>=0;M--){for(var G=E.words[M],oe=U-1;oe>=0;oe--){var D=G>>oe&1;if(L!==k[0]&&(L=this.sqr(L)),D===0&&Z===0){P=0;continue}Z<<=1,Z|=D,P++,!(P!==R&&(M!==0||oe!==0))&&(L=this.mul(L,k[Z]),P=0,Z=0)}U=26}return L},H.prototype.convertTo=function(B){var E=B.umod(this.m);return E===B?E.clone():E},H.prototype.convertFrom=function(B){var E=B.clone();return E.red=null,E},s.mont=function(B){return new X(B)};function X(Q){H.call(this,Q),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(X,H),X.prototype.convertTo=function(B){return this.imod(B.ushln(this.shift))},X.prototype.convertFrom=function(B){var E=this.imod(B.mul(this.rinv));return E.red=null,E},X.prototype.imul=function(B,E){if(B.isZero()||E.isZero())return B.words[0]=0,B.length=1,B;var R=B.imul(E),k=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=R.isub(k).iushrn(this.shift),L=M;return M.cmp(this.m)>=0?L=M.isub(this.m):M.cmpn(0)<0&&(L=M.iadd(this.m)),L._forceRed(this)},X.prototype.mul=function(B,E){if(B.isZero()||E.isZero())return new s(0)._forceRed(this);var R=B.mul(E),k=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=R.isub(k).iushrn(this.shift),L=M;return M.cmp(this.m)>=0?L=M.isub(this.m):M.cmpn(0)<0&&(L=M.iadd(this.m)),L._forceRed(this)},X.prototype.invm=function(B){var E=this.imod(B._invmp(this.m).mul(this.r2));return E._forceRed(this)}})(n,Hf)})(Iz);const ut=H1,_z="logger/5.7.0";let $Q=!1,qQ=!1;const _y={debug:1,default:2,info:2,warning:3,error:4,off:5};let eR=_y.default,kb=null;function Sz(){try{const n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{n.push(e)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){return n.message}return null}const tR=Sz();var z1;(function(n){n.DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF"})(z1||(z1={}));var xo;(function(n){n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED"})(xo||(xo={}));const nR="0123456789abcdef";let fe=class rr{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();_y[r]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(eR>_y[r])&&console.log.apply(console,t)}debug(...e){this._log(rr.levels.DEBUG,e)}info(...e){this._log(rr.levels.INFO,e)}warn(...e){this._log(rr.levels.WARNING,e)}makeError(e,t,r){if(qQ)return this.makeError("censored error",t,{});t||(t=rr.errors.UNKNOWN_ERROR),r||(r={});const i=[];Object.keys(r).forEach(A=>{const l=r[A];try{if(l instanceof Uint8Array){let c="";for(let u=0;u<l.length;u++)c+=nR[l[u]>>4],c+=nR[l[u]&15];i.push(A+"=Uint8Array(0x"+c+")")}else i.push(A+"="+JSON.stringify(l))}catch{i.push(A+"="+JSON.stringify(r[A].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;let o="";switch(t){case xo.NUMERIC_FAULT:{o="NUMERIC_FAULT";const A=e;switch(A){case"overflow":case"underflow":case"division-by-zero":o+="-"+A;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case xo.CALL_EXCEPTION:case xo.INSUFFICIENT_FUNDS:case xo.MISSING_NEW:case xo.NONCE_EXPIRED:case xo.REPLACEMENT_UNDERPRICED:case xo.TRANSACTION_REPLACED:case xo.UNPREDICTABLE_GAS_LIMIT:o=t;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=t,Object.keys(r).forEach(function(A){a[A]=r[A]}),a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,rr.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,i){e||this.throwError(t,r,i)}assertArgument(e,t,r,i){e||this.throwArgumentError(t,r,i)}checkNormalize(e){tR&&this.throwError("platform missing String.prototype.normalize",rr.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:tR})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,rr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,rr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r?r=": "+r:r="",e<t&&this.throwError("missing argument"+r,rr.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,rr.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",rr.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",rr.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",rr.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return kb||(kb=new rr(_z)),kb}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",rr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),$Q){if(!e)return;this.globalLogger().throwError("error censorship permanent",rr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}qQ=!!e,$Q=!!t}static setLogLevel(e){const t=_y[e.toLowerCase()];if(t==null){rr.globalLogger().warn("invalid log level - "+e);return}eR=t}static from(e){return new rr(e)}};fe.errors=xo;fe.levels=z1;const Qz="bytes/5.7.0",Sn=new fe(Qz);function F3(n){return!!n.toHexString}function wd(n){return n.slice||(n.slice=function(){const e=Array.prototype.slice.call(arguments);return wd(new Uint8Array(Array.prototype.slice.apply(n,e)))}),n}function OU(n){return Bt(n)&&!(n.length%2)||lC(n)}function rR(n){return typeof n=="number"&&n==n&&n%1===0}function lC(n){if(n==null)return!1;if(n.constructor===Uint8Array)return!0;if(typeof n=="string"||!rR(n.length)||n.length<0)return!1;for(let e=0;e<n.length;e++){const t=n[e];if(!rR(t)||t<0||t>=256)return!1}return!0}function it(n,e){if(e||(e={}),typeof n=="number"){Sn.checkSafeUint53(n,"invalid arrayify value");const t=[];for(;n;)t.unshift(n&255),n=parseInt(String(n/256));return t.length===0&&t.push(0),wd(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),F3(n)&&(n=n.toHexString()),Bt(n)){let t=n.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":Sn.throwArgumentError("hex data is odd-length","value",n));const r=[];for(let i=0;i<t.length;i+=2)r.push(parseInt(t.substring(i,i+2),16));return wd(new Uint8Array(r))}return lC(n)?wd(new Uint8Array(n)):Sn.throwArgumentError("invalid arrayify value","value",n)}function ts(n){const e=n.map(i=>it(i)),t=e.reduce((i,s)=>i+s.length,0),r=new Uint8Array(t);return e.reduce((i,s)=>(r.set(s,i),i+s.length),0),wd(r)}function Jd(n){let e=it(n);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function Rz(n,e){n=it(n),n.length>e&&Sn.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(n,e-n.length),wd(t)}function Bt(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||e&&n.length!==2+2*e)}const Db="0123456789abcdef";function $e(n,e){if(e||(e={}),typeof n=="number"){Sn.checkSafeUint53(n,"invalid hexlify value");let t="";for(;n;)t=Db[n&15]+t,n=Math.floor(n/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof n=="bigint")return n=n.toString(16),n.length%2?"0x0"+n:"0x"+n;if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),F3(n))return n.toHexString();if(Bt(n))return n.length%2&&(e.hexPad==="left"?n="0x0"+n.substring(2):e.hexPad==="right"?n+="0":Sn.throwArgumentError("hex data is odd-length","value",n)),n.toLowerCase();if(lC(n)){let t="0x";for(let r=0;r<n.length;r++){let i=n[r];t+=Db[(i&240)>>4]+Db[i&15]}return t}return Sn.throwArgumentError("invalid hexlify value","value",n)}function tu(n){if(typeof n!="string")n=$e(n);else if(!Bt(n)||n.length%2)return null;return(n.length-2)/2}function Pr(n,e,t){return typeof n!="string"?n=$e(n):(!Bt(n)||n.length%2)&&Sn.throwArgumentError("invalid hexData","value",n),e=2+2*e,t!=null?"0x"+n.substring(e,2+2*t):"0x"+n.substring(e)}function wi(n){let e="0x";return n.forEach(t=>{e+=$e(t).substring(2)}),e}function cC(n){const e=Mz($e(n,{hexPad:"left"}));return e==="0x"?"0x0":e}function Mz(n){typeof n!="string"&&(n=$e(n)),Bt(n)||Sn.throwArgumentError("invalid hex string","value",n),n=n.substring(2);let e=0;for(;e<n.length&&n[e]==="0";)e++;return"0x"+n.substring(e)}function kn(n,e){for(typeof n!="string"?n=$e(n):Bt(n)||Sn.throwArgumentError("invalid hex string","value",n),n.length>2*e+2&&Sn.throwArgumentError("value out of range","value",arguments[1]);n.length<2*e+2;)n="0x0"+n.substring(2);return n}function uC(n){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(OU(n)){let t=it(n);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=$e(t.slice(0,32)),e.s=$e(t.slice(32,64))):t.length===65?(e.r=$e(t.slice(0,32)),e.s=$e(t.slice(32,64)),e.v=t[64]):Sn.throwArgumentError("invalid signature string","signature",n),e.v<27&&(e.v===0||e.v===1?e.v+=27:Sn.throwArgumentError("signature invalid v byte","signature",n)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=$e(t.slice(32,64))}else{if(e.r=n.r,e.s=n.s,e.v=n.v,e.recoveryParam=n.recoveryParam,e._vs=n._vs,e._vs!=null){const i=Rz(it(e._vs),32);e._vs=$e(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Sn.throwArgumentError("signature recoveryParam mismatch _vs","signature",n),i[0]&=127;const o=$e(i);e.s==null?e.s=o:e.s!==o&&Sn.throwArgumentError("signature v mismatch _vs","signature",n)}if(e.recoveryParam==null)e.v==null?Sn.throwArgumentError("signature missing v and recoveryParam","signature",n):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Sn.throwArgumentError("signature recoveryParam mismatch v","signature",n)}e.r==null||!Bt(e.r)?Sn.throwArgumentError("signature missing or invalid r","signature",n):e.r=kn(e.r,32),e.s==null||!Bt(e.s)?Sn.throwArgumentError("signature missing or invalid s","signature",n):e.s=kn(e.s,32);const t=it(e.s);t[0]>=128&&Sn.throwArgumentError("signature s out of range","signature",n),e.recoveryParam&&(t[0]|=128);const r=$e(t);e._vs&&(Bt(e._vs)||Sn.throwArgumentError("signature invalid _vs","signature",n),e._vs=kn(e._vs,32)),e._vs==null?e._vs=r:e._vs!==r&&Sn.throwArgumentError("signature _vs mismatch v and s","signature",n)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const Tz="bignumber/5.7.0";var vB=ut.BN;const eA=new fe(Tz),Vb={},iR=9007199254740991;let sR=!1;class Le{constructor(e,t){e!==Vb&&eA.throwError("cannot call constructor directly; use BigNumber.from",fe.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return hi(bt(this).fromTwos(e))}toTwos(e){return hi(bt(this).toTwos(e))}abs(){return this._hex[0]==="-"?Le.from(this._hex.substring(1)):this}add(e){return hi(bt(this).add(bt(e)))}sub(e){return hi(bt(this).sub(bt(e)))}div(e){return Le.from(e).isZero()&&ys("division-by-zero","div"),hi(bt(this).div(bt(e)))}mul(e){return hi(bt(this).mul(bt(e)))}mod(e){const t=bt(e);return t.isNeg()&&ys("division-by-zero","mod"),hi(bt(this).umod(t))}pow(e){const t=bt(e);return t.isNeg()&&ys("negative-power","pow"),hi(bt(this).pow(t))}and(e){const t=bt(e);return(this.isNegative()||t.isNeg())&&ys("unbound-bitwise-result","and"),hi(bt(this).and(t))}or(e){const t=bt(e);return(this.isNegative()||t.isNeg())&&ys("unbound-bitwise-result","or"),hi(bt(this).or(t))}xor(e){const t=bt(e);return(this.isNegative()||t.isNeg())&&ys("unbound-bitwise-result","xor"),hi(bt(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&ys("negative-width","mask"),hi(bt(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&ys("negative-width","shl"),hi(bt(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&ys("negative-width","shr"),hi(bt(this).shrn(e))}eq(e){return bt(this).eq(bt(e))}lt(e){return bt(this).lt(bt(e))}lte(e){return bt(this).lte(bt(e))}gt(e){return bt(this).gt(bt(e))}gte(e){return bt(this).gte(bt(e))}isNegative(){return this._hex[0]==="-"}isZero(){return bt(this).isZero()}toNumber(){try{return bt(this).toNumber()}catch{ys("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return eA.throwError("this platform does not support BigInt",fe.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?sR||(sR=!0,eA.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?eA.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",fe.errors.UNEXPECTED_ARGUMENT,{}):eA.throwError("BigNumber.toString does not accept parameters",fe.errors.UNEXPECTED_ARGUMENT,{})),bt(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Le)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new Le(Vb,Hg(e)):e.match(/^-?[0-9]+$/)?new Le(Vb,Hg(new vB(e))):eA.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&ys("underflow","BigNumber.from",e),(e>=iR||e<=-iR)&&ys("overflow","BigNumber.from",e),Le.from(String(e));const t=e;if(typeof t=="bigint")return Le.from(t.toString());if(lC(t))return Le.from($e(t));if(t)if(t.toHexString){const r=t.toHexString();if(typeof r=="string")return Le.from(r)}else{let r=t._hex;if(r==null&&t.type==="BigNumber"&&(r=t.hex),typeof r=="string"&&(Bt(r)||r[0]==="-"&&Bt(r.substring(1))))return Le.from(r)}return eA.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Hg(n){if(typeof n!="string")return Hg(n.toString(16));if(n[0]==="-")return n=n.substring(1),n[0]==="-"&&eA.throwArgumentError("invalid hex","value",n),n=Hg(n),n==="0x00"?n:"-"+n;if(n.substring(0,2)!=="0x"&&(n="0x"+n),n==="0x")return"0x00";for(n.length%2&&(n="0x0"+n.substring(2));n.length>4&&n.substring(0,4)==="0x00";)n="0x"+n.substring(4);return n}function hi(n){return Le.from(Hg(n))}function bt(n){const e=Le.from(n).toHexString();return e[0]==="-"?new vB("-"+e.substring(3),16):new vB(e.substring(2),16)}function ys(n,e,t){const r={fault:n,operation:e};return t!=null&&(r.value=t),eA.throwError(n,fe.errors.NUMERIC_FAULT,r)}function Nz(n){return new vB(n,36).toString(16)}const kz="properties/5.7.0";var Dz=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})};const yB=new fe(kz);function Ie(n,e,t){Object.defineProperty(n,e,{enumerable:!0,value:t,writable:!1})}function ns(n,e){for(let t=0;t<32;t++){if(n[e])return n[e];if(!n.prototype||typeof n.prototype!="object")break;n=Object.getPrototypeOf(n.prototype).constructor}return null}function zn(n){return Dz(this,void 0,void 0,function*(){const e=Object.keys(n).map(r=>{const i=n[r];return Promise.resolve(i).then(s=>({key:r,value:s}))});return(yield Promise.all(e)).reduce((r,i)=>(r[i.key]=i.value,r),{})})}function Vz(n,e){(!n||typeof n!="object")&&yB.throwArgumentError("invalid object","object",n),Object.keys(n).forEach(t=>{e[t]||yB.throwArgumentError("invalid object key - "+t,"transaction:"+t,n)})}function yn(n){const e={};for(const t in n)e[t]=n[t];return e}const Lz={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function E3(n){if(n==null||Lz[typeof n])return!0;if(Array.isArray(n)||typeof n=="object"){if(!Object.isFrozen(n))return!1;const e=Object.keys(n);for(let t=0;t<e.length;t++){let r=null;try{r=n[e[t]]}catch{continue}if(!E3(r))return!1}return!0}return yB.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function Pz(n){if(E3(n))return n;if(Array.isArray(n))return Object.freeze(n.map(e=>os(e)));if(typeof n=="object"){const e={};for(const t in n){const r=n[t];r!==void 0&&Ie(e,t,os(r))}return e}return yB.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function os(n){return Pz(n)}class Ym{constructor(e){for(const t in e)this[t]=os(e[t])}}const Wz="abstract-provider/5.7.0";var Oz=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})};const Zz=new fe(Wz);class Gz extends Ym{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class Km{constructor(){Zz.checkAbstract(new.target,Km),Ie(this,"_isProvider",!0)}getFeeData(){return Oz(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield zn({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let r=null,i=null,s=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,s=Le.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:r,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const Jz="networks/5.7.1",oR=new fe(Jz);function Hz(n){return n&&typeof n.renetwork=="function"}function oA(n){const e=function(t,r){r==null&&(r={});const i=[];if(t.InfuraProvider&&r.infura!=="-")try{i.push(new t.InfuraProvider(n,r.infura))}catch{}if(t.EtherscanProvider&&r.etherscan!=="-")try{i.push(new t.EtherscanProvider(n,r.etherscan))}catch{}if(t.AlchemyProvider&&r.alchemy!=="-")try{i.push(new t.AlchemyProvider(n,r.alchemy))}catch{}if(t.PocketProvider&&r.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new t.PocketProvider(n,r.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(t.CloudflareProvider&&r.cloudflare!=="-")try{i.push(new t.CloudflareProvider(n))}catch{}if(t.AnkrProvider&&r.ankr!=="-")try{const s=["ropsten"],o=new t.AnkrProvider(n,r.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(i.length===0)return null;if(t.FallbackProvider){let s=1;return r.quorum!=null?s=r.quorum:n==="homestead"&&(s=2),new t.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(t){return oA(t)},e}function BB(n,e){const t=function(r,i){return r.JsonRpcProvider?new r.JsonRpcProvider(n,e):null};return t.renetwork=function(r){return BB(n,r)},t}const aR={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:oA("homestead")},AR={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:oA("ropsten")},lR={chainId:63,name:"classicMordor",_defaultProvider:BB("https://www.ethercluster.com/mordor","classicMordor")},U0={unspecified:{chainId:0,name:"unspecified"},homestead:aR,mainnet:aR,morden:{chainId:2,name:"morden"},ropsten:AR,testnet:AR,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:oA("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:oA("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:oA("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:oA("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:BB("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:lR,classicTestnet:lR,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:BB("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:oA("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:oA("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function U3(n){if(n==null)return null;if(typeof n=="number"){for(const r in U0){const i=U0[r];if(i.chainId===n)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:n,name:"unknown"}}if(typeof n=="string"){const r=U0[n];return r==null?null:{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress,_defaultProvider:r._defaultProvider||null}}const e=U0[n.name];if(!e)return typeof n.chainId!="number"&&oR.throwArgumentError("invalid network chainId","network",n),n;n.chainId!==0&&n.chainId!==e.chainId&&oR.throwArgumentError("network chainId mismatch","network",n);let t=n._defaultProvider||null;return t==null&&e._defaultProvider&&(Hz(e._defaultProvider)?t=e._defaultProvider.renetwork(n):t=e._defaultProvider),{name:n.name,chainId:e.chainId,ensAddress:n.ensAddress||e.ensAddress||null,_defaultProvider:t}}function _3(n){n=atob(n);const e=[];for(let t=0;t<n.length;t++)e.push(n.charCodeAt(t));return it(e)}function S3(n){n=it(n);let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return btoa(e)}class Q3{constructor(e){Ie(this,"alphabet",e),Ie(this,"base",e.length),Ie(this,"_alphabetMap",{}),Ie(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=it(e);if(t.length===0)return"";let r=[0];for(let s=0;s<t.length;++s){let o=t[s];for(let a=0;a<r.length;++a)o+=r[a]<<8,r[a]=o%this.base,o=o/this.base|0;for(;o>0;)r.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;t[s]===0&&s<t.length-1;++s)i+=this._leader;for(let s=r.length-1;s>=0;--s)i+=this.alphabet[r[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let i=this._alphabetMap[e[r]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<t.length;++o)s+=t[o]*this.base,t[o]=s&255,s>>=8;for(;s>0;)t.push(s&255),s>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return it(new Uint8Array(t.reverse()))}}new Q3("abcdefghijklmnopqrstuvwxyz234567");const X1=new Q3("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),zz="0x0000000000000000000000000000000000000000",Xz=Le.from(-1),R3=Le.from(0),Yz=Le.from(1),Kz=Le.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),jz="0x0000000000000000000000000000000000000000000000000000000000000000";var Y1={},$z={get exports(){return Y1},set exports(n){Y1=n}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(n){(function(){var e="input is invalid type",t="finalize already called",r=typeof window=="object",i=r?window:{};i.JS_SHA3_NO_WINDOW&&(r=!1);var s=!r&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=Hf:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&n.exports,A=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),c=[31,7936,2031616,520093696],u=[4,1024,262144,67108864],f=[1,256,65536,16777216],d=[6,1536,393216,100663296],h=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],m=[224,256,384,512],g=[128,256],v=["hex","buffer","arrayBuffer","array","digest"],y={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(D){return Object.prototype.toString.call(D)==="[object Array]"}),A&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(D){return typeof D=="object"&&D.buffer&&D.buffer.constructor===ArrayBuffer});for(var w=function(D,K,ce){return function(le){return new U(D,K,D).update(le)[ce]()}},C=function(D,K,ce){return function(le,he){return new U(D,K,he).update(le)[ce]()}},b=function(D,K,ce){return function(le,he,$,ae){return B["cshake"+D].update(le,he,$,ae)[ce]()}},F=function(D,K,ce){return function(le,he,$,ae){return B["kmac"+D].update(le,he,$,ae)[ce]()}},I=function(D,K,ce,le){for(var he=0;he<v.length;++he){var $=v[he];D[$]=K(ce,le,$)}return D},S=function(D,K){var ce=w(D,K,"hex");return ce.create=function(){return new U(D,K,D)},ce.update=function(le){return ce.create().update(le)},I(ce,w,D,K)},T=function(D,K){var ce=C(D,K,"hex");return ce.create=function(le){return new U(D,K,le)},ce.update=function(le,he){return ce.create(he).update(le)},I(ce,C,D,K)},H=function(D,K){var ce=y[D],le=b(D,K,"hex");return le.create=function(he,$,ae){return!$&&!ae?B["shake"+D].create(he):new U(D,K,he).bytepad([$,ae],ce)},le.update=function(he,$,ae,te){return le.create($,ae,te).update(he)},I(le,b,D,K)},X=function(D,K){var ce=y[D],le=F(D,K,"hex");return le.create=function(he,$,ae){return new G(D,K,$).bytepad(["KMAC",ae],ce).bytepad([he],ce)},le.update=function(he,$,ae,te){return le.create(he,ae,te).update($)},I(le,F,D,K)},Q=[{name:"keccak",padding:f,bits:m,createMethod:S},{name:"sha3",padding:d,bits:m,createMethod:S},{name:"shake",padding:c,bits:g,createMethod:T},{name:"cshake",padding:u,bits:g,createMethod:H},{name:"kmac",padding:u,bits:g,createMethod:X}],B={},E=[],R=0;R<Q.length;++R)for(var k=Q[R],M=k.bits,L=0;L<M.length;++L){var Z=k.name+"_"+M[L];if(E.push(Z),B[Z]=k.createMethod(M[L],k.padding),k.name!=="sha3"){var P=k.name+M[L];E.push(P),B[P]=B[Z]}}function U(D,K,ce){this.blocks=[],this.s=[],this.padding=K,this.outputBits=ce,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(D<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=ce>>5,this.extraBytes=(ce&31)>>3;for(var le=0;le<50;++le)this.s[le]=0}U.prototype.update=function(D){if(this.finalized)throw new Error(t);var K,ce=typeof D;if(ce!=="string"){if(ce==="object"){if(D===null)throw new Error(e);if(A&&D.constructor===ArrayBuffer)D=new Uint8Array(D);else if(!Array.isArray(D)&&(!A||!ArrayBuffer.isView(D)))throw new Error(e)}else throw new Error(e);K=!0}for(var le=this.blocks,he=this.byteCount,$=D.length,ae=this.blockCount,te=0,Ae=this.s,re,me;te<$;){if(this.reset)for(this.reset=!1,le[0]=this.block,re=1;re<ae+1;++re)le[re]=0;if(K)for(re=this.start;te<$&&re<he;++te)le[re>>2]|=D[te]<<h[re++&3];else for(re=this.start;te<$&&re<he;++te)me=D.charCodeAt(te),me<128?le[re>>2]|=me<<h[re++&3]:me<2048?(le[re>>2]|=(192|me>>6)<<h[re++&3],le[re>>2]|=(128|me&63)<<h[re++&3]):me<55296||me>=57344?(le[re>>2]|=(224|me>>12)<<h[re++&3],le[re>>2]|=(128|me>>6&63)<<h[re++&3],le[re>>2]|=(128|me&63)<<h[re++&3]):(me=65536+((me&1023)<<10|D.charCodeAt(++te)&1023),le[re>>2]|=(240|me>>18)<<h[re++&3],le[re>>2]|=(128|me>>12&63)<<h[re++&3],le[re>>2]|=(128|me>>6&63)<<h[re++&3],le[re>>2]|=(128|me&63)<<h[re++&3]);if(this.lastByteIndex=re,re>=he){for(this.start=re-he,this.block=le[ae],re=0;re<ae;++re)Ae[re]^=le[re];oe(Ae),this.reset=!0}else this.start=re}return this},U.prototype.encode=function(D,K){var ce=D&255,le=1,he=[ce];for(D=D>>8,ce=D&255;ce>0;)he.unshift(ce),D=D>>8,ce=D&255,++le;return K?he.push(le):he.unshift(le),this.update(he),he.length},U.prototype.encodeString=function(D){var K,ce=typeof D;if(ce!=="string"){if(ce==="object"){if(D===null)throw new Error(e);if(A&&D.constructor===ArrayBuffer)D=new Uint8Array(D);else if(!Array.isArray(D)&&(!A||!ArrayBuffer.isView(D)))throw new Error(e)}else throw new Error(e);K=!0}var le=0,he=D.length;if(K)le=he;else for(var $=0;$<D.length;++$){var ae=D.charCodeAt($);ae<128?le+=1:ae<2048?le+=2:ae<55296||ae>=57344?le+=3:(ae=65536+((ae&1023)<<10|D.charCodeAt(++$)&1023),le+=4)}return le+=this.encode(le*8),this.update(D),le},U.prototype.bytepad=function(D,K){for(var ce=this.encode(K),le=0;le<D.length;++le)ce+=this.encodeString(D[le]);var he=K-ce%K,$=[];return $.length=he,this.update($),this},U.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var D=this.blocks,K=this.lastByteIndex,ce=this.blockCount,le=this.s;if(D[K>>2]|=this.padding[K&3],this.lastByteIndex===this.byteCount)for(D[0]=D[ce],K=1;K<ce+1;++K)D[K]=0;for(D[ce-1]|=2147483648,K=0;K<ce;++K)le[K]^=D[K];oe(le)}},U.prototype.toString=U.prototype.hex=function(){this.finalize();for(var D=this.blockCount,K=this.s,ce=this.outputBlocks,le=this.extraBytes,he=0,$=0,ae="",te;$<ce;){for(he=0;he<D&&$<ce;++he,++$)te=K[he],ae+=l[te>>4&15]+l[te&15]+l[te>>12&15]+l[te>>8&15]+l[te>>20&15]+l[te>>16&15]+l[te>>28&15]+l[te>>24&15];$%D===0&&(oe(K),he=0)}return le&&(te=K[he],ae+=l[te>>4&15]+l[te&15],le>1&&(ae+=l[te>>12&15]+l[te>>8&15]),le>2&&(ae+=l[te>>20&15]+l[te>>16&15])),ae},U.prototype.arrayBuffer=function(){this.finalize();var D=this.blockCount,K=this.s,ce=this.outputBlocks,le=this.extraBytes,he=0,$=0,ae=this.outputBits>>3,te;le?te=new ArrayBuffer(ce+1<<2):te=new ArrayBuffer(ae);for(var Ae=new Uint32Array(te);$<ce;){for(he=0;he<D&&$<ce;++he,++$)Ae[$]=K[he];$%D===0&&oe(K)}return le&&(Ae[he]=K[he],te=te.slice(0,ae)),te},U.prototype.buffer=U.prototype.arrayBuffer,U.prototype.digest=U.prototype.array=function(){this.finalize();for(var D=this.blockCount,K=this.s,ce=this.outputBlocks,le=this.extraBytes,he=0,$=0,ae=[],te,Ae;$<ce;){for(he=0;he<D&&$<ce;++he,++$)te=$<<2,Ae=K[he],ae[te]=Ae&255,ae[te+1]=Ae>>8&255,ae[te+2]=Ae>>16&255,ae[te+3]=Ae>>24&255;$%D===0&&oe(K)}return le&&(te=$<<2,Ae=K[he],ae[te]=Ae&255,le>1&&(ae[te+1]=Ae>>8&255),le>2&&(ae[te+2]=Ae>>16&255)),ae};function G(D,K,ce){U.call(this,D,K,ce)}G.prototype=new U,G.prototype.finalize=function(){return this.encode(this.outputBits,!0),U.prototype.finalize.call(this)};var oe=function(D){var K,ce,le,he,$,ae,te,Ae,re,me,Pe,_e,Se,Fe,Ue,Me,W,O,se,de,Be,V,_,x,N,j,q,ne,Ce,be,Ee,We,Te,ie,we,xe,Qe,He,qe,ot,rn,wt,nt,er,ht,Xt,Ao,Zt,Yt,ee,ue,ve,ge,ye,Ve,rt,Ye,ze,pt,At,ft,Ot,Tr;for(le=0;le<48;le+=2)he=D[0]^D[10]^D[20]^D[30]^D[40],$=D[1]^D[11]^D[21]^D[31]^D[41],ae=D[2]^D[12]^D[22]^D[32]^D[42],te=D[3]^D[13]^D[23]^D[33]^D[43],Ae=D[4]^D[14]^D[24]^D[34]^D[44],re=D[5]^D[15]^D[25]^D[35]^D[45],me=D[6]^D[16]^D[26]^D[36]^D[46],Pe=D[7]^D[17]^D[27]^D[37]^D[47],_e=D[8]^D[18]^D[28]^D[38]^D[48],Se=D[9]^D[19]^D[29]^D[39]^D[49],K=_e^(ae<<1|te>>>31),ce=Se^(te<<1|ae>>>31),D[0]^=K,D[1]^=ce,D[10]^=K,D[11]^=ce,D[20]^=K,D[21]^=ce,D[30]^=K,D[31]^=ce,D[40]^=K,D[41]^=ce,K=he^(Ae<<1|re>>>31),ce=$^(re<<1|Ae>>>31),D[2]^=K,D[3]^=ce,D[12]^=K,D[13]^=ce,D[22]^=K,D[23]^=ce,D[32]^=K,D[33]^=ce,D[42]^=K,D[43]^=ce,K=ae^(me<<1|Pe>>>31),ce=te^(Pe<<1|me>>>31),D[4]^=K,D[5]^=ce,D[14]^=K,D[15]^=ce,D[24]^=K,D[25]^=ce,D[34]^=K,D[35]^=ce,D[44]^=K,D[45]^=ce,K=Ae^(_e<<1|Se>>>31),ce=re^(Se<<1|_e>>>31),D[6]^=K,D[7]^=ce,D[16]^=K,D[17]^=ce,D[26]^=K,D[27]^=ce,D[36]^=K,D[37]^=ce,D[46]^=K,D[47]^=ce,K=me^(he<<1|$>>>31),ce=Pe^($<<1|he>>>31),D[8]^=K,D[9]^=ce,D[18]^=K,D[19]^=ce,D[28]^=K,D[29]^=ce,D[38]^=K,D[39]^=ce,D[48]^=K,D[49]^=ce,Fe=D[0],Ue=D[1],Xt=D[11]<<4|D[10]>>>28,Ao=D[10]<<4|D[11]>>>28,ne=D[20]<<3|D[21]>>>29,Ce=D[21]<<3|D[20]>>>29,At=D[31]<<9|D[30]>>>23,ft=D[30]<<9|D[31]>>>23,wt=D[40]<<18|D[41]>>>14,nt=D[41]<<18|D[40]>>>14,ie=D[2]<<1|D[3]>>>31,we=D[3]<<1|D[2]>>>31,Me=D[13]<<12|D[12]>>>20,W=D[12]<<12|D[13]>>>20,Zt=D[22]<<10|D[23]>>>22,Yt=D[23]<<10|D[22]>>>22,be=D[33]<<13|D[32]>>>19,Ee=D[32]<<13|D[33]>>>19,Ot=D[42]<<2|D[43]>>>30,Tr=D[43]<<2|D[42]>>>30,ye=D[5]<<30|D[4]>>>2,Ve=D[4]<<30|D[5]>>>2,xe=D[14]<<6|D[15]>>>26,Qe=D[15]<<6|D[14]>>>26,O=D[25]<<11|D[24]>>>21,se=D[24]<<11|D[25]>>>21,ee=D[34]<<15|D[35]>>>17,ue=D[35]<<15|D[34]>>>17,We=D[45]<<29|D[44]>>>3,Te=D[44]<<29|D[45]>>>3,x=D[6]<<28|D[7]>>>4,N=D[7]<<28|D[6]>>>4,rt=D[17]<<23|D[16]>>>9,Ye=D[16]<<23|D[17]>>>9,He=D[26]<<25|D[27]>>>7,qe=D[27]<<25|D[26]>>>7,de=D[36]<<21|D[37]>>>11,Be=D[37]<<21|D[36]>>>11,ve=D[47]<<24|D[46]>>>8,ge=D[46]<<24|D[47]>>>8,er=D[8]<<27|D[9]>>>5,ht=D[9]<<27|D[8]>>>5,j=D[18]<<20|D[19]>>>12,q=D[19]<<20|D[18]>>>12,ze=D[29]<<7|D[28]>>>25,pt=D[28]<<7|D[29]>>>25,ot=D[38]<<8|D[39]>>>24,rn=D[39]<<8|D[38]>>>24,V=D[48]<<14|D[49]>>>18,_=D[49]<<14|D[48]>>>18,D[0]=Fe^~Me&O,D[1]=Ue^~W&se,D[10]=x^~j&ne,D[11]=N^~q&Ce,D[20]=ie^~xe&He,D[21]=we^~Qe&qe,D[30]=er^~Xt&Zt,D[31]=ht^~Ao&Yt,D[40]=ye^~rt&ze,D[41]=Ve^~Ye&pt,D[2]=Me^~O&de,D[3]=W^~se&Be,D[12]=j^~ne&be,D[13]=q^~Ce&Ee,D[22]=xe^~He&ot,D[23]=Qe^~qe&rn,D[32]=Xt^~Zt&ee,D[33]=Ao^~Yt&ue,D[42]=rt^~ze&At,D[43]=Ye^~pt&ft,D[4]=O^~de&V,D[5]=se^~Be&_,D[14]=ne^~be&We,D[15]=Ce^~Ee&Te,D[24]=He^~ot&wt,D[25]=qe^~rn&nt,D[34]=Zt^~ee&ve,D[35]=Yt^~ue&ge,D[44]=ze^~At&Ot,D[45]=pt^~ft&Tr,D[6]=de^~V&Fe,D[7]=Be^~_&Ue,D[16]=be^~We&x,D[17]=Ee^~Te&N,D[26]=ot^~wt&ie,D[27]=rn^~nt&we,D[36]=ee^~ve&er,D[37]=ue^~ge&ht,D[46]=At^~Ot&ye,D[47]=ft^~Tr&Ve,D[8]=V^~Fe&Me,D[9]=_^~Ue&W,D[18]=We^~x&j,D[19]=Te^~N&q,D[28]=wt^~ie&xe,D[29]=nt^~we&Qe,D[38]=ve^~er&Xt,D[39]=ge^~ht&Ao,D[48]=Ot^~ye&rt,D[49]=Tr^~Ve&Ye,D[0]^=p[le],D[1]^=p[le+1]};if(a)n.exports=B;else for(R=0;R<E.length;++R)i[E[R]]=B[E[R]]})()})($z);const qz=Y1;function jn(n){return"0x"+qz.keccak_256(it(n))}const e9="strings/5.7.0",M3=new fe(e9);var zg;(function(n){n.current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD"})(zg||(zg={}));var Ki;(function(n){n.UNEXPECTED_CONTINUE="unexpected continuation byte",n.BAD_PREFIX="bad codepoint prefix",n.OVERRUN="string overrun",n.MISSING_CONTINUE="missing continuation byte",n.OUT_OF_RANGE="out of UTF-8 range",n.UTF16_SURROGATE="UTF-16 surrogate",n.OVERLONG="overlong representation"})(Ki||(Ki={}));function t9(n,e,t,r,i){return M3.throwArgumentError(`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function T3(n,e,t,r,i){if(n===Ki.BAD_PREFIX||n===Ki.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return n===Ki.OVERRUN?t.length-e-1:0}function n9(n,e,t,r,i){return n===Ki.OVERLONG?(r.push(i),0):(r.push(65533),T3(n,e,t))}const r9=Object.freeze({error:t9,ignore:T3,replace:n9});function N3(n,e){e==null&&(e=r9.error),n=it(n);const t=[];let r=0;for(;r<n.length;){const i=n[r++];if(!(i>>7)){t.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?r+=e(Ki.UNEXPECTED_CONTINUE,r-1,n,t):r+=e(Ki.BAD_PREFIX,r-1,n,t);continue}if(r-1+s>=n.length){r+=e(Ki.OVERRUN,r-1,n,t);continue}let a=i&(1<<8-s-1)-1;for(let A=0;A<s;A++){let l=n[r];if((l&192)!=128){r+=e(Ki.MISSING_CONTINUE,r,n,t),a=null;break}a=a<<6|l&63,r++}if(a!==null){if(a>1114111){r+=e(Ki.OUT_OF_RANGE,r-1-s,n,t,a);continue}if(a>=55296&&a<=57343){r+=e(Ki.UTF16_SURROGATE,r-1-s,n,t,a);continue}if(a<=o){r+=e(Ki.OVERLONG,r-1-s,n,t,a);continue}t.push(a)}}return t}function wa(n,e=zg.current){e!=zg.current&&(M3.checkNormalize(),n=n.normalize(e));let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const s=n.charCodeAt(r);if(r>=n.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return it(t)}function i9(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function jm(n,e){return i9(N3(n,e))}function s9(n,e=zg.current){return N3(wa(n,e))}function zf(n){return jn(wa(n))}const k3="hash/5.7.0";function D3(n,e){e==null&&(e=1);const t=[],r=t.forEach,i=function(s,o){r.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):t.push(a)})};return i(n,e),t}function o9(n){const e={};for(let t=0;t<n.length;t++){const r=n[t];e[r[0]]=r[1]}return e}function a9(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let C=1;C<r;C++)s.push(i+=t());let o=t(),a=e;e+=o;let A=0,l=0;function c(){return A==0&&(l=l<<8|n[e++],A=8),l>>--A&1}const u=31,f=Math.pow(2,u),d=f>>>1,h=d>>1,p=f-1;let m=0;for(let C=0;C<u;C++)m=m<<1|c();let g=[],v=0,y=f;for(;;){let C=Math.floor(((m-v+1)*i-1)/y),b=0,F=r;for(;F-b>1;){let T=b+F>>>1;C<s[T]?F=T:b=T}if(b==0)break;g.push(b);let I=v+Math.floor(y*s[b]/i),S=v+Math.floor(y*s[b+1]/i)-1;for(;!((I^S)&d);)m=m<<1&p|c(),I=I<<1&p,S=S<<1&p|1;for(;I&~S&h;)m=m&d|m<<1&p>>>1|c(),I=I<<1^d,S=(S^d)<<1|d|1;v=I,y=1+S-I}let w=r-4;return g.map(C=>{switch(C-w){case 3:return w+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return w+256+(n[a++]<<8|n[a++]);case 1:return w+n[a++];default:return C-1}})}function A9(n){let e=0;return()=>n[e++]}function l9(n){return A9(a9(n))}function c9(n){return n&1?~n>>1:n>>1}function u9(n,e){let t=Array(n);for(let r=0;r<n;r++)t[r]=1+e();return t}function cR(n,e){let t=Array(n);for(let r=0,i=-1;r<n;r++)t[r]=i+=1+e();return t}function f9(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=c9(e());return t}function wB(n,e){let t=cR(n(),n),r=n(),i=cR(r,n),s=u9(r,n);for(let o=0;o<r;o++)for(let a=0;a<s[o];a++)t.push(i[o]+a);return e?t.map(o=>e[o]):t}function d9(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(p9(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(g9(t,n))}return o9(D3(e))}function h9(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(t)}return e}function V3(n,e,t){let r=Array(n).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)f9(n,t).forEach((s,o)=>r[o].push(s));return r}function p9(n,e){let t=1+e(),r=e(),i=h9(e),s=V3(i.length,1+n,e);return D3(s.map((o,a)=>{const A=o[0],l=o.slice(1);return Array(i[a]).fill(void 0).map((c,u)=>{let f=u*r;return[A+u*t,l.map(d=>d+f)]})}))}function g9(n,e){let t=1+e();return V3(t,1+n,e).map(i=>[i[0],i.slice(1)])}function m9(n){let e=wB(n).sort((r,i)=>r-i);return t();function t(){let r=[];for(;;){let l=wB(n,e);if(l.length==0)break;r.push({set:new Set(l),node:t()})}r.sort((l,c)=>c.set.size-l.set.size);let i=n(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,A=i==2;return{branches:r,valid:s,fe0f:o,save:a,check:A}}}function v9(){return l9(_3("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const fC=v9(),y9=new Set(wB(fC)),B9=new Set(wB(fC)),w9=d9(fC),C9=m9(fC),uR=45,fR=95;function L3(n){return s9(n)}function b9(n){return n.filter(e=>e!=65039)}function P3(n){for(let e of n.split(".")){let t=L3(e);try{for(let r=t.lastIndexOf(fR)-1;r>=0;r--)if(t[r]!==fR)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(r=>r<128)&&t[2]===uR&&t[3]===uR)throw new Error("invalid label extension")}catch(r){throw new Error(`Invalid label "${e}": ${r.message}`)}}return n}function x9(n){return P3(I9(n,b9))}function I9(n,e){let t=L3(n).reverse(),r=[];for(;t.length;){let i=E9(t);if(i){r.push(...e(i));continue}let s=t.pop();if(y9.has(s)){r.push(s);continue}if(B9.has(s))continue;let o=w9[s];if(o){r.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return P3(F9(String.fromCodePoint(...r)))}function F9(n){return n.normalize("NFC")}function E9(n,e){var t;let r=C9,i,s,o=[],a=n.length;for(e&&(e.length=0);a;){let A=n[--a];if(r=(t=r.branches.find(l=>l.set.has(A)))===null||t===void 0?void 0:t.node,!r)break;if(r.save)s=A;else if(r.check&&A===s)break;o.push(A),r.fe0f&&(o.push(65039),a>0&&n[a-1]==65039&&a--),r.valid&&(i=o.slice(),r.valid==2&&i.splice(1,1),e&&e.push(...n.slice(a).reverse()),n.length=a)}return i}const U9=new fe(k3),W3=new Uint8Array(32);W3.fill(0);function dR(n){if(n.length===0)throw new Error("invalid ENS name; empty component");return n}function O3(n){const e=wa(x9(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(dR(e.slice(r,i))),r=i+1);if(r>=e.length)throw new Error("invalid ENS name; empty component");return t.push(dR(e.slice(r))),t}function Sy(n){typeof n!="string"&&U9.throwArgumentError("invalid ENS name; not a string","name",n);let e=W3;const t=O3(n);for(;t.length;)e=jn(ts([e,jn(t.pop())]));return $e(e)}function _9(n){return $e(ts(O3(n).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}const S9="rlp/5.7.0",ta=new fe(S9);function hR(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function pR(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function Z3(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(Z3(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=hR(r.length);return i.unshift(247+i.length),i.concat(r)}OU(n)||ta.throwArgumentError("RLP object must be BytesLike","object",n);const e=Array.prototype.slice.call(it(n));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=hR(e.length);return t.unshift(183+t.length),t.concat(e)}function dC(n){return $e(Z3(n))}function gR(n,e,t,r){const i=[];for(;t<e+1+r;){const s=G3(n,t);i.push(s.result),t+=s.consumed,t>e+1+r&&ta.throwError("child data too short",fe.errors.BUFFER_OVERRUN,{})}return{consumed:1+r,result:i}}function G3(n,e){if(n.length===0&&ta.throwError("data too short",fe.errors.BUFFER_OVERRUN,{}),n[e]>=248){const t=n[e]-247;e+1+t>n.length&&ta.throwError("data short segment too short",fe.errors.BUFFER_OVERRUN,{});const r=pR(n,e+1,t);return e+1+t+r>n.length&&ta.throwError("data long segment too short",fe.errors.BUFFER_OVERRUN,{}),gR(n,e,e+1+t,t+r)}else if(n[e]>=192){const t=n[e]-192;return e+1+t>n.length&&ta.throwError("data array too short",fe.errors.BUFFER_OVERRUN,{}),gR(n,e,e+1,t)}else if(n[e]>=184){const t=n[e]-183;e+1+t>n.length&&ta.throwError("data array too short",fe.errors.BUFFER_OVERRUN,{});const r=pR(n,e+1,t);e+1+t+r>n.length&&ta.throwError("data array too short",fe.errors.BUFFER_OVERRUN,{});const i=$e(n.slice(e+1+t,e+1+t+r));return{consumed:1+t+r,result:i}}else if(n[e]>=128){const t=n[e]-128;e+1+t>n.length&&ta.throwError("data too short",fe.errors.BUFFER_OVERRUN,{});const r=$e(n.slice(e+1,e+1+t));return{consumed:1+t,result:r}}return{consumed:1,result:$e(n[e])}}function ZU(n){const e=it(n),t=G3(e,0);return t.consumed!==e.length&&ta.throwArgumentError("invalid rlp data","data",n),t.result}const Q9="address/5.7.0",Xf=new fe(Q9);function mR(n){Bt(n,20)||Xf.throwArgumentError("invalid address","address",n),n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=it(jn(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const R9=9007199254740991;function M9(n){return Math.log10?Math.log10(n):Math.log(n)/Math.LN10}const GU={};for(let n=0;n<10;n++)GU[String(n)]=String(n);for(let n=0;n<26;n++)GU[String.fromCharCode(65+n)]=String(10+n);const vR=Math.floor(M9(R9));function T9(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>GU[r]).join("");for(;e.length>=vR;){let r=e.substring(0,vR);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function Sr(n){let e=null;if(typeof n!="string"&&Xf.throwArgumentError("invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/))n.substring(0,2)!=="0x"&&(n="0x"+n),e=mR(n),n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==n&&Xf.throwArgumentError("bad address checksum","address",n);else if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(n.substring(2,4)!==T9(n)&&Xf.throwArgumentError("bad icap checksum","address",n),e=Nz(n.substring(4));e.length<40;)e="0"+e;e=mR("0x"+e)}else Xf.throwArgumentError("invalid address","address",n);return e}function J3(n){let e=null;try{e=Sr(n.from)}catch{Xf.throwArgumentError("missing from address","transaction",n)}const t=Jd(it(Le.from(n.nonce).toHexString()));return Sr(Pr(jn(dC([e,t])),12))}var N9=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})};const wn=new fe(k3),H3=new Uint8Array(32);H3.fill(0);const k9=Le.from(-1),z3=Le.from(0),X3=Le.from(1),D9=Le.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function V9(n){const e=it(n),t=e.length%32;return t?wi([e,H3.slice(t)]):$e(e)}const L9=kn(X3.toHexString(),32),P9=kn(z3.toHexString(),32),yR={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Lb=["name","version","chainId","verifyingContract","salt"];function BR(n){return function(e){return typeof e!="string"&&wn.throwArgumentError(`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const W9={name:BR("name"),version:BR("version"),chainId:function(n){try{return Le.from(n).toString()}catch{}return wn.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",n)},verifyingContract:function(n){try{return Sr(n).toLowerCase()}catch{}return wn.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){try{const e=it(n);if(e.length!==32)throw new Error("bad length");return $e(e)}catch{}return wn.throwArgumentError('invalid domain value "salt"',"domain.salt",n)}};function Pb(n){{const e=n.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",r=parseInt(e[2]||"256");(r%8!==0||r>256||e[2]&&e[2]!==String(r))&&wn.throwArgumentError("invalid numeric width","type",n);const i=D9.mask(t?r-1:r),s=t?i.add(X3).mul(k9):z3;return function(o){const a=Le.from(o);return(a.lt(s)||a.gt(i))&&wn.throwArgumentError(`value out-of-bounds for ${n}`,"value",o),kn(a.toTwos(256).toHexString(),32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&wn.throwArgumentError("invalid bytes width","type",n),function(r){return it(r).length!==t&&wn.throwArgumentError(`invalid length for ${n}`,"value",r),V9(r)}}}switch(n){case"address":return function(e){return kn(Sr(e),32)};case"bool":return function(e){return e?L9:P9};case"bytes":return function(e){return jn(e)};case"string":return function(e){return zf(e)}}return null}function wR(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}class zi{constructor(e){Ie(this,"types",Object.freeze(os(e))),Ie(this,"_encoderCache",{}),Ie(this,"_types",{});const t={},r={},i={};Object.keys(e).forEach(a=>{t[a]={},r[a]=[],i[a]={}});for(const a in e){const A={};e[a].forEach(l=>{A[l.name]&&wn.throwArgumentError(`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(a)}`,"types",e),A[l.name]=!0;const c=l.type.match(/^([^\x5b]*)(\x5b|$)/)[1];c===a&&wn.throwArgumentError(`circular type reference to ${JSON.stringify(c)}`,"types",e),!Pb(c)&&(r[c]||wn.throwArgumentError(`unknown type ${JSON.stringify(c)}`,"types",e),r[c].push(a),t[a][c]=!0)})}const s=Object.keys(r).filter(a=>r[a].length===0);s.length===0?wn.throwArgumentError("missing primary type","types",e):s.length>1&&wn.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),Ie(this,"primaryType",s[0]);function o(a,A){A[a]&&wn.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),A[a]=!0,Object.keys(t[a]).forEach(l=>{r[l]&&(o(l,A),Object.keys(A).forEach(c=>{i[c][l]=!0}))}),delete A[a]}o(this.primaryType,{});for(const a in i){const A=Object.keys(i[a]);A.sort(),this._types[a]=wR(a,e[a])+A.map(l=>wR(l,e[l])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const i=Pb(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i),o=parseInt(t[3]);return a=>{o>=0&&a.length!==o&&wn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let A=a.map(s);return this._types[i]&&(A=A.map(jn)),jn(wi(A))}}const r=this.types[e];if(r){const i=zf(this._types[e]);return s=>{const o=r.map(({name:a,type:A})=>{const l=this.getEncoder(A)(s[a]);return this._types[A]?jn(l):l});return o.unshift(i),wi(o)}}return wn.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||wn.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return jn(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Pb(e))return r(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&wn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(A=>this._visit(o,A,r))}const s=this.types[e];return s?s.reduce((o,{name:a,type:A})=>(o[a]=this._visit(A,t[a],r),o),{}):wn.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new zi(e)}static getPrimaryType(e){return zi.from(e).primaryType}static hashStruct(e,t,r){return zi.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const i=yR[r];i||wn.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>Lb.indexOf(r.name)-Lb.indexOf(i.name)),zi.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return wi(["0x1901",zi.hashDomain(e),zi.from(t).hash(r)])}static hash(e,t,r){return jn(zi.encode(e,t,r))}static resolveNames(e,t,r,i){return N9(this,void 0,void 0,function*(){e=yn(e);const s={};e.verifyingContract&&!Bt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=zi.from(t);o.visit(r,(a,A)=>(a==="address"&&!Bt(A,20)&&(s[A]="0x"),A));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,A)=>a==="address"&&s[A]?s[A]:A),{domain:e,value:r}})}static getPayload(e,t,r){zi.hashDomain(e);const i={},s=[];Lb.forEach(A=>{const l=e[A];l!=null&&(i[A]=W9[A](l),s.push({name:A,type:yR[A]}))});const o=zi.from(t),a=yn(t);return a.EIP712Domain?wn.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(A,l)=>{if(A.match(/^bytes(\d*)/))return $e(it(l));if(A.match(/^u?int/))return Le.from(l).toString();switch(A){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return typeof l!="string"&&wn.throwArgumentError("invalid string","value",l),l}return wn.throwArgumentError("unsupported type","type",A)})}}}var Io={},Ut={},$m=Y3;function Y3(n,e){if(!n)throw new Error(e||"Assertion failed")}Y3.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var K1={},CR={get exports(){return K1},set exports(n){K1=n}};typeof Object.create=="function"?CR.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:CR.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var O9=$m,Z9=K1;Ut.inherits=Z9;function G9(n,e){return(n.charCodeAt(e)&64512)!==55296||e<0||e+1>=n.length?!1:(n.charCodeAt(e+1)&64512)===56320}function J9(n,e){if(Array.isArray(n))return n.slice();if(!n)return[];var t=[];if(typeof n=="string")if(e){if(e==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),i=0;i<n.length;i+=2)t.push(parseInt(n[i]+n[i+1],16))}else for(var r=0,i=0;i<n.length;i++){var s=n.charCodeAt(i);s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):G9(n,i)?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128)}else for(i=0;i<n.length;i++)t[i]=n[i]|0;return t}Ut.toArray=J9;function H9(n){for(var e="",t=0;t<n.length;t++)e+=j3(n[t].toString(16));return e}Ut.toHex=H9;function K3(n){var e=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return e>>>0}Ut.htonl=K3;function z9(n,e){for(var t="",r=0;r<n.length;r++){var i=n[r];e==="little"&&(i=K3(i)),t+=$3(i.toString(16))}return t}Ut.toHex32=z9;function j3(n){return n.length===1?"0"+n:n}Ut.zero2=j3;function $3(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}Ut.zero8=$3;function X9(n,e,t,r){var i=t-e;O9(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var A;r==="big"?A=n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3]:A=n[a+3]<<24|n[a+2]<<16|n[a+1]<<8|n[a],s[o]=A>>>0}return s}Ut.join32=X9;function Y9(n,e){for(var t=new Array(n.length*4),r=0,i=0;r<n.length;r++,i+=4){var s=n[r];e==="big"?(t[i]=s>>>24,t[i+1]=s>>>16&255,t[i+2]=s>>>8&255,t[i+3]=s&255):(t[i+3]=s>>>24,t[i+2]=s>>>16&255,t[i+1]=s>>>8&255,t[i]=s&255)}return t}Ut.split32=Y9;function K9(n,e){return n>>>e|n<<32-e}Ut.rotr32=K9;function j9(n,e){return n<<e|n>>>32-e}Ut.rotl32=j9;function $9(n,e){return n+e>>>0}Ut.sum32=$9;function q9(n,e,t){return n+e+t>>>0}Ut.sum32_3=q9;function eX(n,e,t,r){return n+e+t+r>>>0}Ut.sum32_4=eX;function tX(n,e,t,r,i){return n+e+t+r+i>>>0}Ut.sum32_5=tX;function nX(n,e,t,r){var i=n[e],s=n[e+1],o=r+s>>>0,a=(o<r?1:0)+t+i;n[e]=a>>>0,n[e+1]=o}Ut.sum64=nX;function rX(n,e,t,r){var i=e+r>>>0,s=(i<e?1:0)+n+t;return s>>>0}Ut.sum64_hi=rX;function iX(n,e,t,r){var i=e+r;return i>>>0}Ut.sum64_lo=iX;function sX(n,e,t,r,i,s,o,a){var A=0,l=e;l=l+r>>>0,A+=l<e?1:0,l=l+s>>>0,A+=l<s?1:0,l=l+a>>>0,A+=l<a?1:0;var c=n+t+i+o+A;return c>>>0}Ut.sum64_4_hi=sX;function oX(n,e,t,r,i,s,o,a){var A=e+r+s+a;return A>>>0}Ut.sum64_4_lo=oX;function aX(n,e,t,r,i,s,o,a,A,l){var c=0,u=e;u=u+r>>>0,c+=u<e?1:0,u=u+s>>>0,c+=u<s?1:0,u=u+a>>>0,c+=u<a?1:0,u=u+l>>>0,c+=u<l?1:0;var f=n+t+i+o+A+c;return f>>>0}Ut.sum64_5_hi=aX;function AX(n,e,t,r,i,s,o,a,A,l){var c=e+r+s+a+l;return c>>>0}Ut.sum64_5_lo=AX;function lX(n,e,t){var r=e<<32-t|n>>>t;return r>>>0}Ut.rotr64_hi=lX;function cX(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}Ut.rotr64_lo=cX;function uX(n,e,t){return n>>>t}Ut.shr64_hi=uX;function fX(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}Ut.shr64_lo=fX;var xh={},bR=Ut,dX=$m;function hC(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}xh.BlockHash=hC;hC.prototype.update=function(e,t){if(e=bR.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=bR.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};hC.prototype.digest=function(e){return this.update(this._pad()),dX(this.pending===null),this._digest(e)};hC.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var s=1;s<r;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var Ih={},Qa={},hX=Ut,da=hX.rotr32;function pX(n,e,t,r){if(n===0)return q3(e,t,r);if(n===1||n===3)return tP(e,t,r);if(n===2)return eP(e,t,r)}Qa.ft_1=pX;function q3(n,e,t){return n&e^~n&t}Qa.ch32=q3;function eP(n,e,t){return n&e^n&t^e&t}Qa.maj32=eP;function tP(n,e,t){return n^e^t}Qa.p32=tP;function gX(n){return da(n,2)^da(n,13)^da(n,22)}Qa.s0_256=gX;function mX(n){return da(n,6)^da(n,11)^da(n,25)}Qa.s1_256=mX;function vX(n){return da(n,7)^da(n,18)^n>>>3}Qa.g0_256=vX;function yX(n){return da(n,17)^da(n,19)^n>>>10}Qa.g1_256=yX;var Hd=Ut,BX=xh,wX=Qa,Wb=Hd.rotl32,ap=Hd.sum32,CX=Hd.sum32_5,bX=wX.ft_1,nP=BX.BlockHash,xX=[1518500249,1859775393,2400959708,3395469782];function Ca(){if(!(this instanceof Ca))return new Ca;nP.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Hd.inherits(Ca,nP);var IX=Ca;Ca.blockSize=512;Ca.outSize=160;Ca.hmacStrength=80;Ca.padLength=64;Ca.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=Wb(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],A=this.h[3],l=this.h[4];for(i=0;i<r.length;i++){var c=~~(i/20),u=CX(Wb(s,5),bX(c,o,a,A),l,r[i],xX[c]);l=A,A=a,a=Wb(o,30),o=s,s=u}this.h[0]=ap(this.h[0],s),this.h[1]=ap(this.h[1],o),this.h[2]=ap(this.h[2],a),this.h[3]=ap(this.h[3],A),this.h[4]=ap(this.h[4],l)};Ca.prototype._digest=function(e){return e==="hex"?Hd.toHex32(this.h,"big"):Hd.split32(this.h,"big")};var zd=Ut,FX=xh,Fh=Qa,EX=$m,co=zd.sum32,UX=zd.sum32_4,_X=zd.sum32_5,SX=Fh.ch32,QX=Fh.maj32,RX=Fh.s0_256,MX=Fh.s1_256,TX=Fh.g0_256,NX=Fh.g1_256,rP=FX.BlockHash,kX=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ba(){if(!(this instanceof ba))return new ba;rP.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=kX,this.W=new Array(64)}zd.inherits(ba,rP);var iP=ba;ba.blockSize=512;ba.outSize=256;ba.hmacStrength=192;ba.padLength=64;ba.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=UX(NX(r[i-2]),r[i-7],TX(r[i-15]),r[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],A=this.h[3],l=this.h[4],c=this.h[5],u=this.h[6],f=this.h[7];for(EX(this.k.length===r.length),i=0;i<r.length;i++){var d=_X(f,MX(l),SX(l,c,u),this.k[i],r[i]),h=co(RX(s),QX(s,o,a));f=u,u=c,c=l,l=co(A,d),A=a,a=o,o=s,s=co(d,h)}this.h[0]=co(this.h[0],s),this.h[1]=co(this.h[1],o),this.h[2]=co(this.h[2],a),this.h[3]=co(this.h[3],A),this.h[4]=co(this.h[4],l),this.h[5]=co(this.h[5],c),this.h[6]=co(this.h[6],u),this.h[7]=co(this.h[7],f)};ba.prototype._digest=function(e){return e==="hex"?zd.toHex32(this.h,"big"):zd.split32(this.h,"big")};var j1=Ut,sP=iP;function wA(){if(!(this instanceof wA))return new wA;sP.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}j1.inherits(wA,sP);var DX=wA;wA.blockSize=512;wA.outSize=224;wA.hmacStrength=192;wA.padLength=64;wA.prototype._digest=function(e){return e==="hex"?j1.toHex32(this.h.slice(0,7),"big"):j1.split32(this.h.slice(0,7),"big")};var Mi=Ut,VX=xh,LX=$m,ha=Mi.rotr64_hi,pa=Mi.rotr64_lo,oP=Mi.shr64_hi,aP=Mi.shr64_lo,PA=Mi.sum64,Ob=Mi.sum64_hi,Zb=Mi.sum64_lo,PX=Mi.sum64_4_hi,WX=Mi.sum64_4_lo,OX=Mi.sum64_5_hi,ZX=Mi.sum64_5_lo,AP=VX.BlockHash,GX=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ko(){if(!(this instanceof ko))return new ko;AP.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=GX,this.W=new Array(160)}Mi.inherits(ko,AP);var lP=ko;ko.blockSize=1024;ko.outSize=512;ko.hmacStrength=192;ko.padLength=128;ko.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var s=tY(r[i-4],r[i-3]),o=nY(r[i-4],r[i-3]),a=r[i-14],A=r[i-13],l=qX(r[i-30],r[i-29]),c=eY(r[i-30],r[i-29]),u=r[i-32],f=r[i-31];r[i]=PX(s,o,a,A,l,c,u,f),r[i+1]=WX(s,o,a,A,l,c,u,f)}};ko.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],A=this.h[4],l=this.h[5],c=this.h[6],u=this.h[7],f=this.h[8],d=this.h[9],h=this.h[10],p=this.h[11],m=this.h[12],g=this.h[13],v=this.h[14],y=this.h[15];LX(this.k.length===r.length);for(var w=0;w<r.length;w+=2){var C=v,b=y,F=jX(f,d),I=$X(f,d),S=JX(f,d,h,p,m),T=HX(f,d,h,p,m,g),H=this.k[w],X=this.k[w+1],Q=r[w],B=r[w+1],E=OX(C,b,F,I,S,T,H,X,Q,B),R=ZX(C,b,F,I,S,T,H,X,Q,B);C=YX(i,s),b=KX(i,s),F=zX(i,s,o,a,A),I=XX(i,s,o,a,A,l);var k=Ob(C,b,F,I),M=Zb(C,b,F,I);v=m,y=g,m=h,g=p,h=f,p=d,f=Ob(c,u,E,R),d=Zb(u,u,E,R),c=A,u=l,A=o,l=a,o=i,a=s,i=Ob(E,R,k,M),s=Zb(E,R,k,M)}PA(this.h,0,i,s),PA(this.h,2,o,a),PA(this.h,4,A,l),PA(this.h,6,c,u),PA(this.h,8,f,d),PA(this.h,10,h,p),PA(this.h,12,m,g),PA(this.h,14,v,y)};ko.prototype._digest=function(e){return e==="hex"?Mi.toHex32(this.h,"big"):Mi.split32(this.h,"big")};function JX(n,e,t,r,i){var s=n&t^~n&i;return s<0&&(s+=4294967296),s}function HX(n,e,t,r,i,s){var o=e&r^~e&s;return o<0&&(o+=4294967296),o}function zX(n,e,t,r,i){var s=n&t^n&i^t&i;return s<0&&(s+=4294967296),s}function XX(n,e,t,r,i,s){var o=e&r^e&s^r&s;return o<0&&(o+=4294967296),o}function YX(n,e){var t=ha(n,e,28),r=ha(e,n,2),i=ha(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function KX(n,e){var t=pa(n,e,28),r=pa(e,n,2),i=pa(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function jX(n,e){var t=ha(n,e,14),r=ha(n,e,18),i=ha(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function $X(n,e){var t=pa(n,e,14),r=pa(n,e,18),i=pa(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function qX(n,e){var t=ha(n,e,1),r=ha(n,e,8),i=oP(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function eY(n,e){var t=pa(n,e,1),r=pa(n,e,8),i=aP(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function tY(n,e){var t=ha(n,e,19),r=ha(e,n,29),i=oP(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}function nY(n,e){var t=pa(n,e,19),r=pa(e,n,29),i=aP(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}var $1=Ut,cP=lP;function CA(){if(!(this instanceof CA))return new CA;cP.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}$1.inherits(CA,cP);var rY=CA;CA.blockSize=1024;CA.outSize=384;CA.hmacStrength=192;CA.padLength=128;CA.prototype._digest=function(e){return e==="hex"?$1.toHex32(this.h.slice(0,12),"big"):$1.split32(this.h.slice(0,12),"big")};Ih.sha1=IX;Ih.sha224=DX;Ih.sha256=iP;Ih.sha384=rY;Ih.sha512=lP;var uP={},nu=Ut,iY=xh,_0=nu.rotl32,xR=nu.sum32,Ap=nu.sum32_3,IR=nu.sum32_4,fP=iY.BlockHash;function xa(){if(!(this instanceof xa))return new xa;fP.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}nu.inherits(xa,fP);uP.ripemd160=xa;xa.blockSize=512;xa.outSize=160;xa.hmacStrength=192;xa.padLength=64;xa.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],A=r,l=i,c=s,u=o,f=a,d=0;d<80;d++){var h=xR(_0(IR(r,FR(d,i,s,o),e[aY[d]+t],sY(d)),lY[d]),a);r=a,a=o,o=_0(s,10),s=i,i=h,h=xR(_0(IR(A,FR(79-d,l,c,u),e[AY[d]+t],oY(d)),cY[d]),f),A=f,f=u,u=_0(c,10),c=l,l=h}h=Ap(this.h[1],s,u),this.h[1]=Ap(this.h[2],o,f),this.h[2]=Ap(this.h[3],a,A),this.h[3]=Ap(this.h[4],r,l),this.h[4]=Ap(this.h[0],i,c),this.h[0]=h};xa.prototype._digest=function(e){return e==="hex"?nu.toHex32(this.h,"little"):nu.split32(this.h,"little")};function FR(n,e,t,r){return n<=15?e^t^r:n<=31?e&t|~e&r:n<=47?(e|~t)^r:n<=63?e&r|t&~r:e^(t|~r)}function sY(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function oY(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var aY=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],AY=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],lY=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],cY=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],uY=Ut,fY=$m;function Xd(n,e,t){if(!(this instanceof Xd))return new Xd(n,e,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(uY.toArray(e,t))}var dY=Xd;Xd.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),fY(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Xd.prototype.update=function(e,t){return this.inner.update(e,t),this};Xd.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(n){var e=n;e.utils=Ut,e.common=xh,e.sha=Ih,e.ripemd=uP,e.hmac=dY,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Io);function ER(n){return"0x"+Io.sha256().update(it(n)).digest("hex")}const hY="web/5.7.1";var pY=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})};function gY(n,e){return pY(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(t.mode=o.mode),o.cache&&(t.cache=o.cache),o.credentials&&(t.credentials=o.credentials),o.redirect&&(t.redirect=o.redirect),o.referrer&&(t.referrer=o.referrer)}const r=yield fetch(n,t),i=yield r.arrayBuffer(),s={};return r.headers.forEach?r.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):r.headers.keys().forEach(o=>{s[o.toLowerCase()]=r.headers.get(o)}),{headers:s,statusCode:r.status,statusMessage:r.statusText,body:it(new Uint8Array(i))}})}var mY=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})};const Bo=new fe(hY);function UR(n){return new Promise(e=>{setTimeout(e,n)})}function WA(n,e){if(n==null)return null;if(typeof n=="string")return n;if(OU(n)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return jm(n)}catch{}return $e(n)}return n}function vY(n){return wa(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function yY(n,e,t){const r=typeof n=="object"&&n.throttleLimit!=null?n.throttleLimit:12;Bo.assertArgument(r>0&&r%1===0,"invalid connection throttle limit","connection.throttleLimit",r);const i=typeof n=="object"?n.throttleCallback:null,s=typeof n=="object"&&typeof n.throttleSlotInterval=="number"?n.throttleSlotInterval:100;Bo.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof n=="object"?!!n.errorPassThrough:!1,a={};let A=null;const l={method:"GET"};let c=!1,u=2*60*1e3;if(typeof n=="string")A=n;else if(typeof n=="object"){if((n==null||n.url==null)&&Bo.throwArgumentError("missing URL","connection.url",n),A=n.url,typeof n.timeout=="number"&&n.timeout>0&&(u=n.timeout),n.headers)for(const g in n.headers)a[g.toLowerCase()]={key:g,value:String(n.headers[g])},["if-none-match","if-modified-since"].indexOf(g.toLowerCase())>=0&&(c=!0);if(l.allowGzip=!!n.allowGzip,n.user!=null&&n.password!=null){A.substring(0,6)!=="https:"&&n.allowInsecureAuthentication!==!0&&Bo.throwError("basic authentication requires a secure https url",fe.errors.INVALID_ARGUMENT,{argument:"url",url:A,user:n.user,password:"[REDACTED]"});const g=n.user+":"+n.password;a.authorization={key:"Authorization",value:"Basic "+S3(wa(g))}}n.skipFetchSetup!=null&&(l.skipFetchSetup=!!n.skipFetchSetup),n.fetchOptions!=null&&(l.fetchOptions=yn(n.fetchOptions))}const f=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),d=A?A.match(f):null;if(d)try{const g={statusCode:200,statusMessage:"OK",headers:{"content-type":d[1]||"text/plain"},body:d[2]?_3(d[3]):vY(d[3])};let v=g.body;return t&&(v=t(g.body,g)),Promise.resolve(v)}catch(g){Bo.throwError("processing response error",fe.errors.SERVER_ERROR,{body:WA(d[1],d[2]),error:g,requestBody:null,requestMethod:"GET",url:A})}e&&(l.method="POST",l.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const h={};Object.keys(a).forEach(g=>{const v=a[g];h[v.key]=v.value}),l.headers=h;const p=function(){let g=null;return{promise:new Promise(function(w,C){u&&(g=setTimeout(()=>{g!=null&&(g=null,C(Bo.makeError("timeout",fe.errors.TIMEOUT,{requestBody:WA(l.body,h["content-type"]),requestMethod:l.method,timeout:u,url:A})))},u))}),cancel:function(){g!=null&&(clearTimeout(g),g=null)}}}(),m=function(){return mY(this,void 0,void 0,function*(){for(let g=0;g<r;g++){let v=null;try{if(v=yield gY(A,l),g<r){if(v.statusCode===301||v.statusCode===302){const w=v.headers.location||"";if(l.method==="GET"&&w.match(/^https:/)){A=v.headers.location;continue}}else if(v.statusCode===429){let w=!0;if(i&&(w=yield i(g,A)),w){let C=0;const b=v.headers["retry-after"];typeof b=="string"&&b.match(/^[1-9][0-9]*$/)?C=parseInt(b)*1e3:C=s*parseInt(String(Math.random()*Math.pow(2,g))),yield UR(C);continue}}}}catch(w){v=w.response,v==null&&(p.cancel(),Bo.throwError("missing response",fe.errors.SERVER_ERROR,{requestBody:WA(l.body,h["content-type"]),requestMethod:l.method,serverError:w,url:A}))}let y=v.body;if(c&&v.statusCode===304?y=null:!o&&(v.statusCode<200||v.statusCode>=300)&&(p.cancel(),Bo.throwError("bad response",fe.errors.SERVER_ERROR,{status:v.statusCode,headers:v.headers,body:WA(y,v.headers?v.headers["content-type"]:null),requestBody:WA(l.body,h["content-type"]),requestMethod:l.method,url:A})),t)try{const w=yield t(y,v);return p.cancel(),w}catch(w){if(w.throttleRetry&&g<r){let C=!0;if(i&&(C=yield i(g,A)),C){const b=s*parseInt(String(Math.random()*Math.pow(2,g)));yield UR(b);continue}}p.cancel(),Bo.throwError("processing response error",fe.errors.SERVER_ERROR,{body:WA(y,v.headers?v.headers["content-type"]:null),error:w,requestBody:WA(l.body,h["content-type"]),requestMethod:l.method,url:A})}return p.cancel(),y}return Bo.throwError("failed response",fe.errors.SERVER_ERROR,{requestBody:WA(l.body,h["content-type"]),requestMethod:l.method,url:A})})}();return Promise.race([p.promise,m])}function pC(n,e,t){let r=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(jm(s))}catch(A){Bo.throwError("invalid JSON",fe.errors.SERVER_ERROR,{body:s,error:A})}return t&&(a=t(a,o)),a},i=null;if(e!=null){i=wa(e);const s=typeof n=="string"?{url:n}:yn(n);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=yn(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},n=s}return yY(n,i,r)}function Yf(n,e){return e||(e={}),e=yn(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,r){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&r(new Error("timeout"))},e.timeout));const a=e.retryLimit;let A=0;function l(){return n().then(function(c){if(c!==void 0)o()&&t(c);else if(e.oncePoll)e.oncePoll.once("poll",l);else if(e.onceBlock)e.onceBlock.once("block",l);else if(!s){if(A++,A>a){o()&&r(new Error("retry limit reached"));return}let u=e.interval*parseInt(String(Math.random()*Math.pow(2,A)));u<e.floor&&(u=e.floor),u>e.ceiling&&(u=e.ceiling),setTimeout(l,u)}return null},function(c){o()&&r(c)})}l()})}var CB="qpzry9x8gf2tvdw0s3jn54khce6mua7l",q1={};for(var S0=0;S0<CB.length;S0++){var Gb=CB.charAt(S0);if(q1[Gb]!==void 0)throw new TypeError(Gb+" is ambiguous");q1[Gb]=S0}function Cd(n){var e=n>>25;return(n&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function dP(n){for(var e=1,t=0;t<n.length;++t){var r=n.charCodeAt(t);if(r<33||r>126)return"Invalid prefix ("+n+")";e=Cd(e)^r>>5}for(e=Cd(e),t=0;t<n.length;++t){var i=n.charCodeAt(t);e=Cd(e)^i&31}return e}function BY(n,e,t){if(t=t||90,n.length+7+e.length>t)throw new TypeError("Exceeds length limit");n=n.toLowerCase();var r=dP(n);if(typeof r=="string")throw new Error(r);for(var i=n+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");r=Cd(r)^o,i+=CB.charAt(o)}for(s=0;s<6;++s)r=Cd(r);for(r^=1,s=0;s<6;++s){var a=r>>(5-s)*5&31;i+=CB.charAt(a)}return i}function hP(n,e){if(e=e||90,n.length<8)return n+" too short";if(n.length>e)return"Exceeds length limit";var t=n.toLowerCase(),r=n.toUpperCase();if(n!==t&&n!==r)return"Mixed-case string "+n;n=t;var i=n.lastIndexOf("1");if(i===-1)return"No separator character for "+n;if(i===0)return"Missing prefix for "+n;var s=n.slice(0,i),o=n.slice(i+1);if(o.length<6)return"Data too short";var a=dP(s);if(typeof a=="string")return a;for(var A=[],l=0;l<o.length;++l){var c=o.charAt(l),u=q1[c];if(u===void 0)return"Unknown character "+c;a=Cd(a)^u,!(l+6>=o.length)&&A.push(u)}return a!==1?"Invalid checksum for "+n:{prefix:s,words:A}}function wY(){var n=hP.apply(null,arguments);if(typeof n=="object")return n}function CY(n){var e=hP.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function gC(n,e,t,r){for(var i=0,s=0,o=(1<<t)-1,a=[],A=0;A<n.length;++A)for(i=i<<e|n[A],s+=e;s>=t;)s-=t,a.push(i>>s&o);if(r)s>0&&a.push(i<<t-s&o);else{if(s>=e)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function bY(n){var e=gC(n,8,5,!0);if(Array.isArray(e))return e}function xY(n){var e=gC(n,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function IY(n){var e=gC(n,5,8,!1);if(Array.isArray(e))return e}function FY(n){var e=gC(n,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var _R={decodeUnsafe:wY,decode:CY,encode:BY,toWordsUnsafe:bY,toWords:xY,fromWordsUnsafe:IY,fromWords:FY};const Kr="providers/5.7.2";function Eh(n,e,t){return t={path:e,exports:{},require:function(r,i){return EY(r,i??t.path)}},n(t,t.exports),t.exports}function EY(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var JU=pP;function pP(n,e){if(!n)throw new Error(e||"Assertion failed")}pP.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var So=Eh(function(n,e){var t=e;function r(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var A=[];if(typeof o!="string"){for(var l=0;l<o.length;l++)A[l]=o[l]|0;return A}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var l=0;l<o.length;l+=2)A.push(parseInt(o[l]+o[l+1],16))}else for(var l=0;l<o.length;l++){var c=o.charCodeAt(l),u=c>>8,f=c&255;u?A.push(u,f):A.push(f)}return A}t.toArray=r;function i(o){return o.length===1?"0"+o:o}t.zero2=i;function s(o){for(var a="",A=0;A<o.length;A++)a+=i(o[A].toString(16));return a}t.toHex=s,t.encode=function(a,A){return A==="hex"?s(a):a}}),hs=Eh(function(n,e){var t=e;t.assert=JU,t.toArray=So.toArray,t.zero2=So.zero2,t.toHex=So.toHex,t.encode=So.encode;function r(A,l,c){var u=new Array(Math.max(A.bitLength(),c)+1);u.fill(0);for(var f=1<<l+1,d=A.clone(),h=0;h<u.length;h++){var p,m=d.andln(f-1);d.isOdd()?(m>(f>>1)-1?p=(f>>1)-m:p=m,d.isubn(p)):p=0,u[h]=p,d.iushrn(1)}return u}t.getNAF=r;function i(A,l){var c=[[],[]];A=A.clone(),l=l.clone();for(var u=0,f=0,d;A.cmpn(-u)>0||l.cmpn(-f)>0;){var h=A.andln(3)+u&3,p=l.andln(3)+f&3;h===3&&(h=-1),p===3&&(p=-1);var m;h&1?(d=A.andln(7)+u&7,(d===3||d===5)&&p===2?m=-h:m=h):m=0,c[0].push(m);var g;p&1?(d=l.andln(7)+f&7,(d===3||d===5)&&h===2?g=-p:g=p):g=0,c[1].push(g),2*u===m+1&&(u=1-u),2*f===g+1&&(f=1-f),A.iushrn(1),l.iushrn(1)}return c}t.getJSF=i;function s(A,l,c){var u="_"+l;A.prototype[l]=function(){return this[u]!==void 0?this[u]:this[u]=c.call(this)}}t.cachedProperty=s;function o(A){return typeof A=="string"?t.toArray(A,"hex"):A}t.parseBytes=o;function a(A){return new ut(A,"hex","le")}t.intFromLE=a}),bB=hs.getNAF,UY=hs.getJSF,xB=hs.assert;function tc(n,e){this.type=n,this.p=new ut(e.p,16),this.red=e.prime?ut.red(e.prime):ut.mont(this.p),this.zero=new ut(0).toRed(this.red),this.one=new ut(1).toRed(this.red),this.two=new ut(2).toRed(this.red),this.n=e.n&&new ut(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var mu=tc;tc.prototype.point=function(){throw new Error("Not implemented")};tc.prototype.validate=function(){throw new Error("Not implemented")};tc.prototype._fixedNafMul=function(e,t){xB(e.precomputed);var r=e._getDoubles(),i=bB(t,1,this._bitLength),s=(1<<r.step+1)-(r.step%2===0?2:1);s/=3;var o=[],a,A;for(a=0;a<i.length;a+=r.step){A=0;for(var l=a+r.step-1;l>=a;l--)A=(A<<1)+i[l];o.push(A)}for(var c=this.jpoint(null,null,null),u=this.jpoint(null,null,null),f=s;f>0;f--){for(a=0;a<o.length;a++)A=o[a],A===f?u=u.mixedAdd(r.points[a]):A===-f&&(u=u.mixedAdd(r.points[a].neg()));c=c.add(u)}return c.toP()};tc.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var s=i.points,o=bB(t,r,this._bitLength),a=this.jpoint(null,null,null),A=o.length-1;A>=0;A--){for(var l=0;A>=0&&o[A]===0;A--)l++;if(A>=0&&l++,a=a.dblp(l),A<0)break;var c=o[A];xB(c!==0),e.type==="affine"?c>0?a=a.mixedAdd(s[c-1>>1]):a=a.mixedAdd(s[-c-1>>1].neg()):c>0?a=a.add(s[c-1>>1]):a=a.add(s[-c-1>>1].neg())}return e.type==="affine"?a.toP():a};tc.prototype._wnafMulAdd=function(e,t,r,i,s){var o=this._wnafT1,a=this._wnafT2,A=this._wnafT3,l=0,c,u,f;for(c=0;c<i;c++){f=t[c];var d=f._getNAFPoints(e);o[c]=d.wnd,a[c]=d.points}for(c=i-1;c>=1;c-=2){var h=c-1,p=c;if(o[h]!==1||o[p]!==1){A[h]=bB(r[h],o[h],this._bitLength),A[p]=bB(r[p],o[p],this._bitLength),l=Math.max(A[h].length,l),l=Math.max(A[p].length,l);continue}var m=[t[h],null,null,t[p]];t[h].y.cmp(t[p].y)===0?(m[1]=t[h].add(t[p]),m[2]=t[h].toJ().mixedAdd(t[p].neg())):t[h].y.cmp(t[p].y.redNeg())===0?(m[1]=t[h].toJ().mixedAdd(t[p]),m[2]=t[h].add(t[p].neg())):(m[1]=t[h].toJ().mixedAdd(t[p]),m[2]=t[h].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],v=UY(r[h],r[p]);for(l=Math.max(v[0].length,l),A[h]=new Array(l),A[p]=new Array(l),u=0;u<l;u++){var y=v[0][u]|0,w=v[1][u]|0;A[h][u]=g[(y+1)*3+(w+1)],A[p][u]=0,a[h]=m}}var C=this.jpoint(null,null,null),b=this._wnafT4;for(c=l;c>=0;c--){for(var F=0;c>=0;){var I=!0;for(u=0;u<i;u++)b[u]=A[u][c]|0,b[u]!==0&&(I=!1);if(!I)break;F++,c--}if(c>=0&&F++,C=C.dblp(F),c<0)break;for(u=0;u<i;u++){var S=b[u];S!==0&&(S>0?f=a[u][S-1>>1]:S<0&&(f=a[u][-S-1>>1].neg()),f.type==="affine"?C=C.mixedAdd(f):C=C.add(f))}}for(c=0;c<i;c++)a[c]=null;return s?C:C.toP()};function qs(n,e){this.curve=n,this.type=e,this.precomputed=null}tc.BasePoint=qs;qs.prototype.eq=function(){throw new Error("Not implemented")};qs.prototype.validate=function(){return this.curve.validate(this)};tc.prototype.decodePoint=function(e,t){e=hs.toArray(e,t);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*r){e[0]===6?xB(e[e.length-1]%2===0):e[0]===7&&xB(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return i}else if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw new Error("Unknown point format")};qs.prototype.encodeCompressed=function(e){return this.encode(e,!0)};qs.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))};qs.prototype.encode=function(e,t){return hs.encode(this._encode(t),e)};qs.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};qs.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};qs.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,s=0;s<t;s+=e){for(var o=0;o<e;o++)i=i.dbl();r.push(i)}return{step:e,points:r}};qs.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=r===1?null:this.dbl(),s=1;s<r;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};qs.prototype._getBeta=function(){return null};qs.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var HU=Eh(function(n){typeof Object.create=="function"?n.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}}),_Y=hs.assert;function eo(n){mu.call(this,"short",n),this.a=new ut(n.a,16).toRed(this.red),this.b=new ut(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}HU(eo,mu);var SY=eo;eo.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,r;if(e.beta)t=new ut(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)r=new ut(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?r=s[0]:(r=s[1],_Y(this.g.mul(r).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new ut(a.a,16),b:new ut(a.b,16)}}):o=this._getEndoBasis(r),{beta:t,lambda:r,basis:o}}};eo.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:ut.mont(e),r=new ut(2).toRed(t).redInvm(),i=r.redNeg(),s=new ut(3).toRed(t).redNeg().redSqrt().redMul(r),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};eo.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=e,i=this.n.clone(),s=new ut(1),o=new ut(0),a=new ut(0),A=new ut(1),l,c,u,f,d,h,p,m=0,g,v;r.cmpn(0)!==0;){var y=i.div(r);g=i.sub(y.mul(r)),v=a.sub(y.mul(s));var w=A.sub(y.mul(o));if(!u&&g.cmp(t)<0)l=p.neg(),c=s,u=g.neg(),f=v;else if(u&&++m===2)break;p=g,i=r,r=g,a=s,s=v,A=o,o=w}d=g.neg(),h=v;var C=u.sqr().add(f.sqr()),b=d.sqr().add(h.sqr());return b.cmp(C)>=0&&(d=l,h=c),u.negative&&(u=u.neg(),f=f.neg()),d.negative&&(d=d.neg(),h=h.neg()),[{a:u,b:f},{a:d,b:h}]};eo.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=s.mul(r.a),A=o.mul(i.a),l=s.mul(r.b),c=o.mul(i.b),u=e.sub(a).sub(A),f=l.add(c).neg();return{k1:u,k2:f}};eo.prototype.pointFromX=function(e,t){e=new ut(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(i.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};eo.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return r.redSqr().redISub(s).cmpn(0)===0};eo.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),A=e[o],l=A._getBeta();a.k1.negative&&(a.k1.ineg(),A=A.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=A,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var c=this._wnafMulAdd(1,i,s,o*2,r),u=0;u<o*2;u++)i[u]=null,s[u]=null;return c};function wr(n,e,t,r){mu.BasePoint.call(this,n,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new ut(e,16),this.y=new ut(t,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}HU(wr,mu.BasePoint);eo.prototype.point=function(e,t,r){return new wr(this,e,t,r)};eo.prototype.pointFromJSON=function(e,t){return wr.fromJSON(this,e,t)};wr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(s){return r.point(s.x.redMul(r.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};wr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};wr.fromJSON=function(e,t,r){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function s(a){return e.point(a[0],a[1],r)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};wr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};wr.prototype.isInfinity=function(){return this.inf};wr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)};wr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),s=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};wr.prototype.getX=function(){return this.x.fromRed()};wr.prototype.getY=function(){return this.y.fromRed()};wr.prototype.mul=function(e){return e=new ut(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};wr.prototype.mulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};wr.prototype.jmulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};wr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};wr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t};wr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Rr(n,e,t,r){mu.BasePoint.call(this,n,"jacobian"),e===null&&t===null&&r===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new ut(0)):(this.x=new ut(e,16),this.y=new ut(t,16),this.z=new ut(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}HU(Rr,mu.BasePoint);eo.prototype.jpoint=function(e,t,r){return new Rr(this,e,t,r)};Rr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)};Rr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Rr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),A=i.redSub(s),l=o.redSub(a);if(A.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=A.redSqr(),u=c.redMul(A),f=i.redMul(c),d=l.redSqr().redIAdd(u).redISub(f).redISub(f),h=l.redMul(f.redISub(d)).redISub(o.redMul(u)),p=this.z.redMul(e.z).redMul(A);return this.curve.jpoint(d,h,p)};Rr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),s=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(i),A=s.redSub(o);if(a.cmpn(0)===0)return A.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),c=l.redMul(a),u=r.redMul(l),f=A.redSqr().redIAdd(c).redISub(u).redISub(u),d=A.redMul(u.redISub(f)).redISub(s.redMul(c)),h=this.z.redMul(a);return this.curve.jpoint(f,d,h)};Rr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,A=this.z,l=A.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var u=o.redSqr(),f=c.redSqr(),d=f.redSqr(),h=u.redAdd(u).redIAdd(u).redIAdd(i.redMul(l)),p=o.redMul(f),m=h.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),v=h.redMul(g);v=v.redIAdd(v).redISub(d);var y=c.redMul(A);t+1<e&&(l=l.redMul(d)),o=m,A=y,c=v}return this.curve.jpoint(o,c.redMul(s),A)};Rr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Rr.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var A=i.redAdd(i).redIAdd(i),l=A.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),e=l,t=A.redMul(a.redISub(l)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),f=this.y.redSqr(),d=f.redSqr(),h=this.x.redAdd(f).redSqr().redISub(u).redISub(d);h=h.redIAdd(h);var p=u.redAdd(u).redIAdd(u),m=p.redSqr(),g=d.redIAdd(d);g=g.redIAdd(g),g=g.redIAdd(g),e=m.redISub(h).redISub(h),t=p.redMul(h.redISub(e)).redISub(g),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,t,r)};Rr.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var A=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=A.redSqr().redISub(a).redISub(a);e=l;var c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),t=A.redMul(a.redISub(l)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),f=this.y.redSqr(),d=this.x.redMul(f),h=this.x.redSub(u).redMul(this.x.redAdd(u));h=h.redAdd(h).redIAdd(h);var p=d.redIAdd(d);p=p.redIAdd(p);var m=p.redAdd(p);e=h.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(f).redISub(u);var g=f.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g),t=h.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)};Rr.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),A=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=t.redAdd(t);l=l.redIAdd(l);var c=l.redMul(a),u=A.redSqr().redISub(c.redAdd(c)),f=c.redISub(u),d=a.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var h=A.redMul(f).redISub(d),p=r.redAdd(r).redMul(i);return this.curve.jpoint(u,h,p)};Rr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var A=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var c=s.redIAdd(a).redSqr().redISub(o).redISub(A).redISub(l),u=t.redMul(c);u=u.redIAdd(u),u=u.redIAdd(u);var f=this.x.redMul(A).redISub(u);f=f.redIAdd(f),f=f.redIAdd(f);var d=this.y.redMul(c.redMul(l.redISub(c)).redISub(a.redMul(A)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var h=this.z.redAdd(a).redSqr().redISub(r).redISub(A);return this.curve.jpoint(f,d,h)};Rr.prototype.mul=function(e,t){return e=new ut(e,t),this.curve._wnafMul(this,e)};Rr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=r.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Rr.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),this.x.cmp(r)===0)return!0}};Rr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Rr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Qy=Eh(function(n,e){var t=e;t.base=mu,t.short=SY,t.mont=null,t.edwards=null}),Ry=Eh(function(n,e){var t=e,r=hs.assert;function i(a){a.type==="short"?this.curve=new Qy.short(a):a.type==="edwards"?this.curve=new Qy.edwards(a):this.curve=new Qy.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,r(this.g.validate(),"Invalid curve"),r(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(a,A){Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){var l=new i(A);return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,value:l}),l}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Io.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Io.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Io.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Io.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Io.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Io.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Io.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Io.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function Ol(n){if(!(this instanceof Ol))return new Ol(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=So.toArray(n.entropy,n.entropyEnc||"hex"),t=So.toArray(n.nonce,n.nonceEnc||"hex"),r=So.toArray(n.pers,n.persEnc||"hex");JU(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,r)}var gP=Ol;Ol.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Ol.prototype._hmac=function(){return new Io.hmac(this.hash,this.K)};Ol.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Ol.prototype.reseed=function(e,t,r,i){typeof t!="string"&&(i=r,r=t,t=null),e=So.toArray(e,t),r=So.toArray(r,i),JU(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1};Ol.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=r,r=t,t=null),r&&(r=So.toArray(r,i||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(r),this._reseed++,So.encode(o,t)};var eF=hs.assert;function Hr(n,e){this.ec=n,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var zU=Hr;Hr.fromPublic=function(e,t,r){return t instanceof Hr?t:new Hr(e,{pub:t,pubEnc:r})};Hr.fromPrivate=function(e,t,r){return t instanceof Hr?t:new Hr(e,{priv:t,privEnc:r})};Hr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Hr.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Hr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Hr.prototype._importPrivate=function(e,t){this.priv=new ut(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Hr.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?eF(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&eF(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Hr.prototype.derive=function(e){return e.validate()||eF(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Hr.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)};Hr.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Hr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var QY=hs.assert;function mC(n,e){if(n instanceof mC)return n;this._importDER(n,e)||(QY(n.r&&n.s,"Signature without r or s"),this.r=new ut(n.r,16),this.s=new ut(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var vC=mC;function RY(){this.place=0}function Jb(n,e){var t=n[e.place++];if(!(t&128))return t;var r=t&15;if(r===0||r>4)return!1;for(var i=0,s=0,o=e.place;s<r;s++,o++)i<<=8,i|=n[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function SR(n){for(var e=0,t=n.length-1;!n[e]&&!(n[e+1]&128)&&e<t;)e++;return e===0?n:n.slice(e)}mC.prototype._importDER=function(e,t){e=hs.toArray(e,t);var r=new RY;if(e[r.place++]!==48)return!1;var i=Jb(e,r);if(i===!1||i+r.place!==e.length||e[r.place++]!==2)return!1;var s=Jb(e,r);if(s===!1)return!1;var o=e.slice(r.place,s+r.place);if(r.place+=s,e[r.place++]!==2)return!1;var a=Jb(e,r);if(a===!1||e.length!==a+r.place)return!1;var A=e.slice(r.place,a+r.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(A[0]===0)if(A[1]&128)A=A.slice(1);else return!1;return this.r=new ut(o),this.s=new ut(A),this.recoveryParam=null,!0};function Hb(n,e){if(e<128){n.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(n.push(t|128);--t;)n.push(e>>>(t<<3)&255);n.push(e)}mC.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),r[0]&128&&(r=[0].concat(r)),t=SR(t),r=SR(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var i=[2];Hb(i,t.length),i=i.concat(t),i.push(2),Hb(i,r.length);var s=i.concat(r),o=[48];return Hb(o,s.length),o=o.concat(s),hs.encode(o,e)};var MY=function(){throw new Error("unsupported")},mP=hs.assert;function Hs(n){if(!(this instanceof Hs))return new Hs(n);typeof n=="string"&&(mP(Object.prototype.hasOwnProperty.call(Ry,n),"Unknown curve "+n),n=Ry[n]),n instanceof Ry.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var TY=Hs;Hs.prototype.keyPair=function(e){return new zU(this,e)};Hs.prototype.keyFromPrivate=function(e,t){return zU.fromPrivate(this,e,t)};Hs.prototype.keyFromPublic=function(e,t){return zU.fromPublic(this,e,t)};Hs.prototype.genKeyPair=function(e){e||(e={});for(var t=new gP({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||MY(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new ut(2));;){var s=new ut(t.generate(r));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Hs.prototype._truncateToN=function(e,t){var r=e.byteLength()*8-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Hs.prototype.sign=function(e,t,r,i){typeof r=="object"&&(i=r,r=null),i||(i={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new ut(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),a=e.toArray("be",s),A=new gP({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new ut(1)),c=0;;c++){var u=i.k?i.k(c):new ut(A.generate(this.n.byteLength()));if(u=this._truncateToN(u,!0),!(u.cmpn(1)<=0||u.cmp(l)>=0)){var f=this.g.mul(u);if(!f.isInfinity()){var d=f.getX(),h=d.umod(this.n);if(h.cmpn(0)!==0){var p=u.invm(this.n).mul(h.mul(t.getPrivate()).iadd(e));if(p=p.umod(this.n),p.cmpn(0)!==0){var m=(f.getY().isOdd()?1:0)|(d.cmp(h)!==0?2:0);return i.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),m^=1),new vC({r:h,s:p,recoveryParam:m})}}}}}};Hs.prototype.verify=function(e,t,r,i){e=this._truncateToN(new ut(e,16)),r=this.keyFromPublic(r,i),t=new vC(t,"hex");var s=t.r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),A=a.mul(e).umod(this.n),l=a.mul(s).umod(this.n),c;return this.curve._maxwellTrick?(c=this.g.jmulAdd(A,r.getPublic(),l),c.isInfinity()?!1:c.eqXToP(s)):(c=this.g.mulAdd(A,r.getPublic(),l),c.isInfinity()?!1:c.getX().umod(this.n).cmp(s)===0)};Hs.prototype.recoverPubKey=function(n,e,t,r){mP((3&t)===t,"The recovery param is more than two bits"),e=new vC(e,r);var i=this.n,s=new ut(n),o=e.r,a=e.s,A=t&1,l=t>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),A):o=this.curve.pointFromX(o,A);var c=e.r.invm(i),u=i.sub(s).mul(c).umod(i),f=a.mul(c).umod(i);return this.g.mulAdd(u,o,f)};Hs.prototype.getKeyRecoveryParam=function(n,e,t,r){if(e=new vC(e,r),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(n,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var NY=Eh(function(n,e){var t=e;t.version="6.5.4",t.utils=hs,t.rand=function(){throw new Error("unsupported")},t.curve=Qy,t.curves=Ry,t.ec=TY,t.eddsa=null}),kY=NY.ec;const DY="signing-key/5.7.0",tF=new fe(DY);let zb=null;function na(){return zb||(zb=new kY("secp256k1")),zb}class VY{constructor(e){Ie(this,"curve","secp256k1"),Ie(this,"privateKey",$e(e)),tu(this.privateKey)!==32&&tF.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=na().keyFromPrivate(it(this.privateKey));Ie(this,"publicKey","0x"+t.getPublic(!1,"hex")),Ie(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),Ie(this,"_isSigningKey",!0)}_addPoint(e){const t=na().keyFromPublic(it(this.publicKey)),r=na().keyFromPublic(it(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=na().keyFromPrivate(it(this.privateKey)),r=it(e);r.length!==32&&tF.throwArgumentError("bad digest length","digest",e);const i=t.sign(r,{canonical:!0});return uC({recoveryParam:i.recoveryParam,r:kn("0x"+i.r.toString(16),32),s:kn("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=na().keyFromPrivate(it(this.privateKey)),r=na().keyFromPublic(it(vP(e)));return kn("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function LY(n,e){const t=uC(e),r={r:it(t.r),s:it(t.s)};return"0x"+na().recoverPubKey(it(n),r,t.recoveryParam).encode("hex",!1)}function vP(n,e){const t=it(n);if(t.length===32){const r=new VY(t);return e?"0x"+na().keyFromPrivate(t).getPublic(!0,"hex"):r.publicKey}else{if(t.length===33)return e?$e(t):"0x"+na().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+na().keyFromPublic(t).getPublic(!0,"hex"):$e(t)}return tF.throwArgumentError("invalid public or private key","key","[REDACTED]")}const PY="transactions/5.7.0",MA=new fe(PY);var QR;(function(n){n[n.legacy=0]="legacy",n[n.eip2930=1]="eip2930",n[n.eip1559=2]="eip1559"})(QR||(QR={}));function XU(n){return n==="0x"?null:Sr(n)}function Or(n){return n==="0x"?R3:Le.from(n)}function WY(n){const e=vP(n);return Sr(Pr(jn(Pr(e,1)),12))}function yP(n,e){return WY(LY(it(n),e))}function ji(n,e){const t=Jd(Le.from(n).toHexString());return t.length>32&&MA.throwArgumentError("invalid length for "+e,"transaction:"+e,n),t}function Xb(n,e){return{address:Sr(n),storageKeys:(e||[]).map((t,r)=>(tu(t)!==32&&MA.throwArgumentError("invalid access list storageKey",`accessList[${n}:${r}]`,t),t.toLowerCase()))}}function vu(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(t.length>2&&MA.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${r}]`,t),Xb(t[0],t[1])):Xb(t.address,t.storageKeys));const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return Xb(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function BP(n){return vu(n).map(e=>[e.address,e.storageKeys])}function OY(n,e){if(n.gasPrice!=null){const r=Le.from(n.gasPrice),i=Le.from(n.maxFeePerGas||0);r.eq(i)||MA.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:r,maxFeePerGas:i})}const t=[ji(n.chainId||0,"chainId"),ji(n.nonce||0,"nonce"),ji(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ji(n.maxFeePerGas||0,"maxFeePerGas"),ji(n.gasLimit||0,"gasLimit"),n.to!=null?Sr(n.to):"0x",ji(n.value||0,"value"),n.data||"0x",BP(n.accessList||[])];if(e){const r=uC(e);t.push(ji(r.recoveryParam,"recoveryParam")),t.push(Jd(r.r)),t.push(Jd(r.s))}return wi(["0x02",dC(t)])}function ZY(n,e){const t=[ji(n.chainId||0,"chainId"),ji(n.nonce||0,"nonce"),ji(n.gasPrice||0,"gasPrice"),ji(n.gasLimit||0,"gasLimit"),n.to!=null?Sr(n.to):"0x",ji(n.value||0,"value"),n.data||"0x",BP(n.accessList||[])];if(e){const r=uC(e);t.push(ji(r.recoveryParam,"recoveryParam")),t.push(Jd(r.r)),t.push(Jd(r.s))}return wi(["0x01",dC(t)])}function wP(n,e,t){try{const r=Or(e[0]).toNumber();if(r!==0&&r!==1)throw new Error("bad recid");n.v=r}catch{MA.throwArgumentError("invalid v for transaction type: 1","v",e[0])}n.r=kn(e[1],32),n.s=kn(e[2],32);try{const r=jn(t(n));n.from=yP(r,{r:n.r,s:n.s,recoveryParam:n.v})}catch{}}function GY(n){const e=ZU(n.slice(1));e.length!==9&&e.length!==12&&MA.throwArgumentError("invalid component count for transaction type: 2","payload",$e(n));const t=Or(e[2]),r=Or(e[3]),i={type:2,chainId:Or(e[0]).toNumber(),nonce:Or(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:r,gasPrice:null,gasLimit:Or(e[4]),to:XU(e[5]),value:Or(e[6]),data:e[7],accessList:vu(e[8])};return e.length===9||(i.hash=jn(n),wP(i,e.slice(9),OY)),i}function JY(n){const e=ZU(n.slice(1));e.length!==8&&e.length!==11&&MA.throwArgumentError("invalid component count for transaction type: 1","payload",$e(n));const t={type:1,chainId:Or(e[0]).toNumber(),nonce:Or(e[1]).toNumber(),gasPrice:Or(e[2]),gasLimit:Or(e[3]),to:XU(e[4]),value:Or(e[5]),data:e[6],accessList:vu(e[7])};return e.length===8||(t.hash=jn(n),wP(t,e.slice(8),ZY)),t}function HY(n){const e=ZU(n);e.length!==9&&e.length!==6&&MA.throwArgumentError("invalid raw transaction","rawTransaction",n);const t={nonce:Or(e[0]).toNumber(),gasPrice:Or(e[1]),gasLimit:Or(e[2]),to:XU(e[3]),value:Or(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=Le.from(e[6]).toNumber()}catch{return t}if(t.r=kn(e[7],32),t.s=kn(e[8],32),Le.from(t.r).isZero()&&Le.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let r=t.v-27;const i=e.slice(0,6);t.chainId!==0&&(i.push($e(t.chainId)),i.push("0x"),i.push("0x"),r-=t.chainId*2+8);const s=jn(dC(i));try{t.from=yP(s,{r:$e(t.r),s:$e(t.s),recoveryParam:r})}catch{}t.hash=jn(n)}return t.type=null,t}function zY(n){const e=it(n);if(e[0]>127)return HY(e);switch(e[0]){case 1:return JY(e);case 2:return GY(e)}return MA.throwError(`unsupported transaction type: ${e[0]}`,fe.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const lp=new fe(Kr);let RR=class Ke{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),A=this.number.bind(this),l=this.type.bind(this),c=u=>this.data(u,!0);return e.transaction={hash:o,type:l,accessList:Ke.allowNull(this.accessList.bind(this),null),blockHash:Ke.allowNull(o,null),blockNumber:Ke.allowNull(A,null),transactionIndex:Ke.allowNull(A,null),confirmations:Ke.allowNull(A,null),from:t,gasPrice:Ke.allowNull(r),maxPriorityFeePerGas:Ke.allowNull(r),maxFeePerGas:Ke.allowNull(r),gasLimit:r,to:Ke.allowNull(t,null),value:r,nonce:A,data:s,r:Ke.allowNull(this.uint256),s:Ke.allowNull(this.uint256),v:Ke.allowNull(A),creates:Ke.allowNull(t,null),raw:Ke.allowNull(s)},e.transactionRequest={from:Ke.allowNull(t),nonce:Ke.allowNull(A),gasLimit:Ke.allowNull(r),gasPrice:Ke.allowNull(r),maxPriorityFeePerGas:Ke.allowNull(r),maxFeePerGas:Ke.allowNull(r),to:Ke.allowNull(t),value:Ke.allowNull(r),data:Ke.allowNull(c),type:Ke.allowNull(A),accessList:Ke.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:A,blockNumber:A,transactionHash:o,address:t,topics:Ke.arrayOf(o),data:s,logIndex:A,blockHash:o},e.receipt={to:Ke.allowNull(this.address,null),from:Ke.allowNull(this.address,null),contractAddress:Ke.allowNull(t,null),transactionIndex:A,root:Ke.allowNull(a),gasUsed:r,logsBloom:Ke.allowNull(s),blockHash:o,transactionHash:o,logs:Ke.arrayOf(this.receiptLog.bind(this)),blockNumber:A,confirmations:Ke.allowNull(A,null),cumulativeGasUsed:r,effectiveGasPrice:Ke.allowNull(r),status:Ke.allowNull(A),type:l},e.block={hash:Ke.allowNull(o),parentHash:o,number:A,timestamp:A,nonce:Ke.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:Ke.allowNull(t),extraData:s,transactions:Ke.allowNull(Ke.arrayOf(o)),baseFeePerGas:Ke.allowNull(r)},e.blockWithTransactions=yn(e.block),e.blockWithTransactions.transactions=Ke.allowNull(Ke.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Ke.allowNull(i,void 0),toBlock:Ke.allowNull(i,void 0),blockHash:Ke.allowNull(o,void 0),address:Ke.allowNull(t,void 0),topics:Ke.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Ke.allowNull(A),blockHash:Ke.allowNull(o),transactionIndex:A,removed:Ke.allowNull(this.boolean.bind(this)),address:t,data:Ke.allowFalsish(s,"0x"),topics:Ke.arrayOf(o),transactionHash:o,logIndex:A},e}accessList(e){return vu(e||[])}number(e){return e==="0x"?0:Le.from(e).toNumber()}type(e){return e==="0x"||e==null?0:Le.from(e).toNumber()}bigNumber(e){return Le.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),Bt(e))?e.toLowerCase():lp.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!==0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return Sr(e)}callAddress(e){if(!Bt(e,32))return null;const t=Sr(Pr(e,12));return t===zz?null:t}contractAddress(e){return J3(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||Bt(e))return cC(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return tu(r)!==32?lp.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(e==null)return null;const t=Le.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!Bt(e))throw new Error("invalid uint256");return kn(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const r=e._difficulty!=null?e._difficulty:e.difficulty,i=Ke.check(t,e);return i._difficulty=r==null?null:Le.from(r),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Ke.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&Le.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=Ke.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;Bt(r)&&(r=Le.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;r==null&&t.v==null&&(r=e.chainId),Bt(r)&&(r=Le.from(r).toNumber()),typeof r!="number"&&t.v!=null&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),typeof r!="number"&&(r=0),t.chainId=r}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return zY(e)}receiptLog(e){return Ke.check(this.formats.receiptLog,e)}receipt(e){const t=Ke.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const r=Le.from(t.root).toNumber();r===0||r===1?(t.status!=null&&t.status!==r&&lp.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=r,delete t.root):lp.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&lp.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return Ke.check(this.formats.filter,e)}filterLog(e){return Ke.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const i in e)try{const s=e[i](t[i]);s!==void 0&&(r[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=t[i],s}return r}static allowNull(e,t){return function(r){return r==null?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(i){r.push(e(i))}),r}}};function XY(n){return n&&typeof n.isCommunityResource=="function"}function MR(n){return XY(n)&&n.isCommunityResource()}let TR=!1;function yC(){TR||(TR=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var lt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})};const vt=new fe(Kr),YY=10;function NR(n){return n==null?"null":(tu(n)!==32&&vt.throwArgumentError("invalid topic","topic",n),n.toLowerCase())}function kR(n){for(n=n.slice();n.length>0&&n[n.length-1]==null;)n.pop();return n.map(e=>{if(Array.isArray(e)){const t={};e.forEach(i=>{t[NR(i)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}else return NR(e)}).join("&")}function KY(n){return n===""?[]:n.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(r=>r==="null"?null:r);return t.length===1?t[0]:t})}function ku(n){if(typeof n=="string"){if(n=n.toLowerCase(),tu(n)===32)return"tx:"+n;if(n.indexOf(":")===-1)return n}else{if(Array.isArray(n))return"filter:*:"+kR(n);if(Gz.isForkEvent(n))throw vt.warn("not implemented"),new Error("not implemented");if(n&&typeof n=="object")return"filter:"+(n.address||"*")+":"+kR(n.topics||[])}throw new Error("invalid event - "+n)}function cp(){return new Date().getTime()}function DR(n){return new Promise(e=>{setTimeout(e,n)})}const jY=["block","network","pending","poll"];let $Y=class{constructor(e,t,r){Ie(this,"tag",e),Ie(this,"listener",t),Ie(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],r=KY(e[2]),i={};return r.length>0&&(i.topics=r),t&&t!=="*"&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||jY.indexOf(this.tag)>=0}};const qY={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Yb(n){return kn(Le.from(n).toHexString(),32)}function VR(n){return X1.encode(ts([n,Pr(ER(ER(n)),0,4)]))}const CP=new RegExp("^(ipfs)://(.*)$","i"),LR=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),CP,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function My(n,e){try{return jm(Xg(n,e))}catch{}return null}function Xg(n,e){if(n==="0x")return null;const t=Le.from(Pr(n,e,e+32)).toNumber(),r=Le.from(Pr(n,t,t+32)).toNumber();return Pr(n,t+32,t+32+r)}function Kb(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):vt.throwArgumentError("unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}function PR(n){const e=it(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function eK(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}function bP(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(null),t+=32;for(let r=0;r<n.length;r++){const i=it(n[r]);e[r]=PR(t),e.push(PR(i.length)),e.push(eK(i)),t+=32+Math.ceil(i.length/32)*32}return wi(e)}class WR{constructor(e,t,r,i){Ie(this,"provider",e),Ie(this,"name",r),Ie(this,"address",e.formatter.address(t)),Ie(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>Le.from(e).eq(1)).catch(e=>{if(e.code===fe.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return lt(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:wi([e,Sy(this.name),t||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,r.data=wi(["0x9061b923",bP([_9(this.name),r.data])]));try{let s=yield this.provider.call(r);return it(s).length%32===4&&vt.throwError("resolver threw error",fe.errors.CALL_EXCEPTION,{transaction:r,data:s}),i&&(s=Xg(s,0)),s}catch(s){if(s.code===fe.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,t){return lt(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return r!=null?Xg(r,0):null})}_getAddress(e,t){const r=qY[String(e)];if(r==null&&vt.throwError(`unsupported coin type: ${e}`,fe.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),r.ilk==="eth")return this.provider.formatter.address(t);const i=it(t);if(r.p2pkh!=null){const s=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return VR(ts([[r.p2pkh],"0x"+s[2]]))}}if(r.p2sh!=null){const s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return VR(ts([[r.p2sh],"0x"+s[2]]))}}if(r.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=_R.toWords(i.slice(2));return a.unshift(o),_R.encode(r.prefix,a)}}return null}getAddress(e){return lt(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===jz?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===fe.errors.CALL_EXCEPTION)return null;throw i}const t=yield this._fetchBytes("0xf1cb7e06",Yb(e));if(t==null||t==="0x")return null;const r=this._getAddress(e,t);return r==null&&vt.throwError("invalid or unsupported coin data",fe.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return lt(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let r=0;r<LR.length;r++){const i=t.match(LR[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:Kb(t)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const a=this._resolvedAddress||(yield this.getAddress()),A=(i[2]||"").split("/");if(A.length!==2)return null;const l=yield this.provider.formatter.address(A[0]),c=kn(Le.from(A[1]).toHexString(),32);if(s==="erc721"){const p=this.provider.formatter.callAddress(yield this.provider.call({to:l,data:wi(["0x6352211e",c])}));if(a!==p)return null;e.push({type:"owner",content:p})}else if(s==="erc1155"){const p=Le.from(yield this.provider.call({to:l,data:wi(["0x00fdd58e",kn(a,32),c])}));if(p.isZero())return null;e.push({type:"balance",content:p.toString()})}const u={to:this.provider.formatter.address(A[0]),data:wi([o,c])};let f=My(yield this.provider.call(u),0);if(f==null)return null;e.push({type:"metadata-url-base",content:f}),s==="erc1155"&&(f=f.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:f})),f.match(/^ipfs:/i)&&(f=Kb(f)),e.push({type:"metadata-url",content:f});const d=yield pC(f);if(!d)return null;e.push({type:"metadata",content:JSON.stringify(d)});let h=d.image;if(typeof h!="string")return null;if(!h.match(/^(https:\/\/|data:)/i)){if(h.match(CP)==null)return null;e.push({type:"url-ipfs",content:h}),h=Kb(h)}return e.push({type:"url",content:h}),{linkage:e,url:h}}}}}catch{}return null})}getContentHash(){return lt(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const o=parseInt(t[3],16);if(t[4].length===o*2)return"ipfs://"+X1.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipns://"+X1.encode("0x"+r[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+S3("0x"+s[1]).replace(/[=+\/]/g,A=>o[A])}return vt.throwError("invalid or unsupported content hash data",fe.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return lt(this,void 0,void 0,function*(){let t=wa(e);t=ts([Yb(64),Yb(t.length),t]),t.length%32!==0&&(t=ts([t,kn("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",$e(t));return r==null||r==="0x"?null:jm(r)})}}let jb=null,tK=1;class YU extends Km{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),Ie(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=ns(new.target,"getNetwork")(e);t?(Ie(this,"_network",t),this.emit("network",t,null)):vt.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return lt(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||vt.throwError("no network detected",fe.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:Ie(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Yf(()=>this._ready().then(e=>e,e=>{if(!(e.code===fe.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return jb==null&&(jb=new RR),jb}static getNetwork(e){return U3(e??"homestead")}ccipReadFetch(e,t,r){return lt(this,void 0,void 0,function*(){if(this.disableCcipRead||r.length===0)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const A=r[a],l=A.replace("{sender}",i).replace("{data}",s),c=A.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),u=yield pC({url:l,errorPassThrough:!0},c,(d,h)=>(d.status=h.statusCode,d));if(u.data)return u.data;const f=u.message||"unknown error";if(u.status>=400&&u.status<500)return vt.throwError(`response not found during CCIP fetch: ${f}`,fe.errors.SERVER_ERROR,{url:A,errorMessage:f});o.push(f)}return vt.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,fe.errors.SERVER_ERROR,{urls:r,errorMessages:o})})}_getInternalBlockNumber(e){return lt(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(cp()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const t=cp(),r=zn({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),s;const o=cp();return i=Le.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:t,respTime:o}});return this._internalBlockNumber=r,r.catch(i=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return lt(this,void 0,void 0,function*(){const e=tK++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)vt.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",vt.makeError("network block skew detected",fe.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let i=this._emitted.block+1;i<=r;i++)this.emit("block",i);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&r-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=r-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});t.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=r-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=r;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(A=>{i._inflight=!1,A.length!==0&&A.forEach(l=>{l.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=l.blockNumber),this._emitted["b:"+l.blockHash]=l.blockNumber,this._emitted["t:"+l.transactionHash]=l.blockNumber,this.emit(s,l)})}).catch(A=>{this.emit("error",A),i._inflight=!1});t.push(a)}break}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return lt(this,void 0,void 0,function*(){return vt.throwError("provider does not support network detection",fe.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return lt(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield DR(0),this._network;const r=vt.makeError("underlying network changed",fe.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=cp();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=cp(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return lt(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,r||0,null)})}_waitForTransaction(e,t,r,i){return lt(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((o,a)=>{const A=[];let l=!1;const c=function(){return l?!0:(l=!0,A.forEach(f=>{f()}),!1)},u=f=>{f.confirmations<t||c()||o(f)};if(this.on(e,u),A.push(()=>{this.removeListener(e,u)}),i){let f=i.startBlock,d=null;const h=p=>lt(this,void 0,void 0,function*(){l||(yield DR(1e3),this.getTransactionCount(i.from).then(m=>lt(this,void 0,void 0,function*(){if(!l){if(m<=i.nonce)f=p;else{{const g=yield this.getTransaction(e);if(g&&g.blockNumber!=null)return}for(d==null&&(d=f-3,d<i.startBlock&&(d=i.startBlock));d<=p;){if(l)return;const g=yield this.getBlockWithTransactions(d);for(let v=0;v<g.transactions.length;v++){const y=g.transactions[v];if(y.hash===e)return;if(y.from===i.from&&y.nonce===i.nonce){if(l)return;const w=yield this.waitForTransaction(y.hash,t);if(c())return;let C="replaced";y.data===i.data&&y.to===i.to&&y.value.eq(i.value)?C="repriced":y.data==="0x"&&y.from===y.to&&y.value.isZero()&&(C="cancelled"),a(vt.makeError("transaction was replaced",fe.errors.TRANSACTION_REPLACED,{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:this._wrapTransaction(y),hash:e,receipt:w}));return}}d++}}l||this.once("block",h)}}),m=>{l||this.once("block",h)}))});if(l)return;this.once("block",h),A.push(()=>{this.removeListener("block",h)})}if(typeof r=="number"&&r>0){const f=setTimeout(()=>{c()||a(vt.makeError("timeout exceeded",fe.errors.TIMEOUT,{timeout:r}))},r);f.unref&&f.unref(),A.push(()=>{clearTimeout(f)})}})})}getBlockNumber(){return lt(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return lt(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return Le.from(e)}catch(t){return vt.throwError("bad result from backend",fe.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return lt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield zn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",r);try{return Le.from(i)}catch(s){return vt.throwError("bad result from backend",fe.errors.SERVER_ERROR,{method:"getBalance",params:r,result:i,error:s})}})}getTransactionCount(e,t){return lt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield zn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",r);try{return Le.from(i).toNumber()}catch(s){return vt.throwError("bad result from backend",fe.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:i,error:s})}})}getCode(e,t){return lt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield zn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",r);try{return $e(i)}catch(s){return vt.throwError("bad result from backend",fe.errors.SERVER_ERROR,{method:"getCode",params:r,result:i,error:s})}})}getStorageAt(e,t,r){return lt(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield zn({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(o=>cC(o))}),s=yield this.perform("getStorageAt",i);try{return $e(s)}catch(o){return vt.throwError("bad result from backend",fe.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,t,r){if(t!=null&&tu(t)!==32)throw new Error("invalid response - sendTransaction");const i=e;return t!=null&&e.hash!==t&&vt.throwError("Transaction hash mismatch from Provider.sendTransaction.",fe.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(s,o)=>lt(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&r!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const A=yield this._waitForTransaction(e.hash,s,o,a);return A==null&&s===0?null:(this._emitted["t:"+e.hash]=A.blockNumber,A.status===0&&vt.throwError("transaction failed",fe.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:A}),A)}),i}sendTransaction(e){return lt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(s=>$e(s)),r=this.formatter.transaction(e);r.confirmations==null&&(r.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,s,i)}catch(s){throw s.transaction=r,s.transactionHash=r.hash,s}})}_getTransactionRequest(e){return lt(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?Le.from(s):null))}),["type"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s??null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?$e(s):null))}),this.formatter.transactionRequest(yield zn(r))})}_getFilter(e){return lt(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{e[r]!=null&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{e[r]!=null&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield zn(t))})}_call(e,t,r){return lt(this,void 0,void 0,function*(){r>=YY&&vt.throwError("CCIP read exceeded maximum redirections",fe.errors.SERVER_ERROR,{redirects:r,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&t==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&tu(s)%32===4)try{const o=Pr(s,4),a=Pr(o,0,32);Le.from(a).eq(i)||vt.throwError("CCIP Read sender did not match",fe.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const A=[],l=Le.from(Pr(o,32,64)).toNumber(),c=Le.from(Pr(o,l,l+32)).toNumber(),u=Pr(o,l+32);for(let g=0;g<c;g++){const v=My(u,g*32);v==null&&vt.throwError("CCIP Read contained corrupt URL string",fe.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),A.push(v)}const f=Xg(o,64);Le.from(Pr(o,100,128)).isZero()||vt.throwError("CCIP Read callback selector included junk",fe.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const d=Pr(o,96,100),h=Xg(o,128),p=yield this.ccipReadFetch(e,f,A);p==null&&vt.throwError("CCIP Read disabled or provided no URLs",fe.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const m={to:i,data:wi([d,bP([p,h])])};return this._call(m,t,r+1)}catch(o){if(o.code===fe.errors.SERVER_ERROR)throw o}try{return $e(s)}catch(o){return vt.throwError("bad result from backend",fe.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:o})}})}call(e,t){return lt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield zn({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return lt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield zn({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return Le.from(r)}catch(i){return vt.throwError("bad result from backend",fe.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:i})}})}_getAddress(e){return lt(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&vt.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&vt.throwError("ENS name not configured",fe.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return lt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const i={includeTransactions:!!t};if(Bt(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),Bt(i.blockTag)&&(r=parseInt(i.blockTag.substring(2),16))}catch{vt.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Yf(()=>lt(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&r>this._emitted.block?null:void 0;if(t){let o=null;for(let A=0;A<s.transactions.length;A++){const l=s.transactions[A];if(l.blockNumber==null)l.confirmations=0;else if(l.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let c=o-l.blockNumber+1;c<=0&&(c=1),l.confirmations=c}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(A=>this._wrapTransaction(A)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return lt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Yf(()=>lt(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return lt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Yf(()=>lt(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;if(r.blockHash==null)return;const i=this.formatter.receipt(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return lt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield zn({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(i=>{i.removed==null&&(i.removed=!1)}),RR.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return lt(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return lt(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&vt.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return lt(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const r=yield this._getResolver(t,"getResolver");if(r!=null){const i=new WR(this,r,e);return t!==e&&!(yield i.supportsWildcard())?null:i}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return lt(this,void 0,void 0,function*(){t==null&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||vt.throwError("network does not support ENS",fe.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const i=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+Sy(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return lt(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(r){if(Bt(e))throw r}typeof e!="string"&&vt.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return lt(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(r==null)return null;const i=My(yield this.call({to:r,data:"0x691f3431"+Sy(t).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return lt(this,void 0,void 0,function*(){let t=null;if(Bt(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;t=new WR(this,o,s);try{const a=yield t.getAvatar();if(a)return a.url}catch(a){if(a.code!==fe.errors.CALL_EXCEPTION)throw a}try{const a=My(yield this.call({to:o,data:"0x691f3431"+Sy(s).substring(2)}),0);t=yield this.getResolver(a)}catch(a){if(a.code!==fe.errors.CALL_EXCEPTION)throw a;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return r==null?null:r.url})}perform(e,t){return vt.throwError(e+" not implemented",fe.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,r){const i=new $Y(ku(e),t,r);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,i=[],s=ku(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,t)},0),r=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),r}listenerCount(e){if(!e)return this._events.length;let t=ku(e);return this._events.filter(r=>r.tag===t).length}listeners(e){if(e==null)return this._events.map(r=>r.listener);let t=ku(e);return this._events.filter(r=>r.tag===t).map(r=>r.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const r=[];let i=!1,s=ku(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=t||i?!0:(i=!0,r.push(o),!1)),r.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const r=ku(e);this._events=this._events.filter(i=>i.tag!==r?!0:(t.push(i),!1))}return t.forEach(r=>{this._stopEvent(r)}),this}}const nK="abstract-signer/5.7.0";var uo=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})};const Cs=new fe(nK),rK=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],iK=[fe.errors.INSUFFICIENT_FUNDS,fe.errors.NONCE_EXPIRED,fe.errors.REPLACEMENT_UNDERPRICED];class qm{constructor(){Cs.checkAbstract(new.target,qm),Ie(this,"_isSigner",!0)}getBalance(e){return uo(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return uo(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return uo(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield zn(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return uo(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield zn(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return uo(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return uo(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return uo(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return uo(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return uo(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const r in e)rK.indexOf(r)===-1&&Cs.throwArgumentError("invalid transaction key: "+r,"transaction",e);const t=yn(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(r=>(r[0].toLowerCase()!==r[1].toLowerCase()&&Cs.throwArgumentError("from address mismatch","transaction",e),r[0])),t}populateTransaction(e){return uo(this,void 0,void 0,function*(){const t=yield zn(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>uo(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Cs.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),t.to.catch(i=>{}));const r=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||r)?Cs.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&r&&Cs.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(t.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const s=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=s,t.maxPriorityFeePerGas=s}else t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(r&&Cs.throwError("network does not support EIP-1559",fe.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=i.gasPrice),t.type=0):Cs.throwError("failed to get consistent fee data",fe.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(i=>{if(iK.indexOf(i.code)>=0)throw i;return Cs.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",fe.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Cs.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield zn(t)})}_checkProvider(e){this.provider||Cs.throwError("missing provider",fe.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class KU extends qm{constructor(e,t){super(),Ie(this,"address",e),Ie(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{Cs.throwError(e,fe.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new KU(this.address,e)}}var tA=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})};const Xn=new fe(Kr),sK=["call","estimateGas"];function xg(n,e){if(n==null)return null;if(typeof n.message=="string"&&n.message.match("reverted")){const t=Bt(n.data)?n.data:null;if(!e||t)return{message:n.message,data:t}}if(typeof n=="object"){for(const t in n){const r=xg(n[t],e);if(r)return r}return null}if(typeof n=="string")try{return xg(JSON.parse(n),e)}catch{}return null}function xP(n,e,t){const r=t.transaction||t.signedTransaction;if(n==="call"){const s=xg(e,!0);if(s)return s.data;Xn.throwError("missing revert data in call exception; Transaction reverted without a reason string",fe.errors.CALL_EXCEPTION,{data:"0x",transaction:r,error:e})}if(n==="estimateGas"){let s=xg(e.body,!1);s==null&&(s=xg(e,!1)),s&&Xn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",fe.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:n,transaction:r,error:e})}let i=e.message;throw e.code===fe.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Xn.throwError("insufficient funds for intrinsic transaction cost",fe.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:r}),i.match(/nonce (is )?too low/i)&&Xn.throwError("nonce has already been used",fe.errors.NONCE_EXPIRED,{error:e,method:n,transaction:r}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Xn.throwError("replacement fee too low",fe.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:r}),i.match(/only replay-protected/i)&&Xn.throwError("legacy pre-eip-155 transactions not supported",fe.errors.UNSUPPORTED_OPERATION,{error:e,method:n,transaction:r}),sK.indexOf(n)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Xn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",fe.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:r}),e}function OR(n){return new Promise(function(e){setTimeout(e,n)})}function oK(n){if(n.error){const e=new Error(n.error.message);throw e.code=n.error.code,e.data=n.error.data,e}return n.result}function up(n){return n&&n.toLowerCase()}const nF={};class IP extends qm{constructor(e,t,r){if(super(),e!==nF)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");Ie(this,"provider",t),r==null&&(r=0),typeof r=="string"?(Ie(this,"_address",this.provider.formatter.address(r)),Ie(this,"_index",null)):typeof r=="number"?(Ie(this,"_index",r),Ie(this,"_address",null)):Xn.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return Xn.throwError("cannot alter JSON-RPC Signer connection",fe.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new aK(nF,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Xn.throwError("unknown account #"+this._index,fe.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=yn(e);const t=this.getAddress().then(r=>(r&&(r=r.toLowerCase()),r));if(e.gasLimit==null){const r=yn(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(r=>tA(this,void 0,void 0,function*(){if(r==null)return null;const i=yield this.provider.resolveName(r);return i==null&&Xn.throwArgumentError("provided ENS name resolves to null","tx.to",r),i}))),zn({tx:zn(e),sender:t}).then(({tx:r,sender:i})=>{r.from!=null?r.from.toLowerCase()!==i&&Xn.throwArgumentError("from address mismatch","transaction",e):r.from=i;const s=this.provider.constructor.hexlifyTransaction(r,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&Xn.throwError("user rejected transaction",fe.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:r}),xP("sendTransaction",o,s)))})}signTransaction(e){return Xn.throwError("signing transactions is unsupported",fe.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return tA(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield Yf(()=>tA(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(r);if(i!==null)return this.provider._wrapTransaction(i,r,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=r,i}})}signMessage(e){return tA(this,void 0,void 0,function*(){const t=typeof e=="string"?wa(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[$e(t),r.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Xn.throwError("user rejected signing",fe.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),i}})}_legacySignMessage(e){return tA(this,void 0,void 0,function*(){const t=typeof e=="string"?wa(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),$e(t)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Xn.throwError("user rejected signing",fe.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),i}})}_signTypedData(e,t,r){return tA(this,void 0,void 0,function*(){const i=yield zi.resolveNames(e,t,r,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(zi.getPayload(i.domain,t,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&Xn.throwError("user rejected signing",fe.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:t,value:i.value}}),o}})}unlock(e){return tA(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class aK extends IP{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:r=>this.provider.waitForTransaction(t,r)}))}}const AK={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Yg extends YU{constructor(e,t){let r=t;r==null&&(r=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(r),e||(e=ns(this.constructor,"defaultUrl")()),typeof e=="string"?Ie(this,"connection",Object.freeze({url:e})):Ie(this,"connection",Object.freeze(yn(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return tA(this,void 0,void 0,function*(){yield OR(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=ns(this.constructor,"getNetwork");try{return t(Le.from(e).toNumber())}catch(r){return Xn.throwError("could not detect network",fe.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:r})}}return Xn.throwError("could not detect network",fe.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new IP(nF,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:os(r),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=pC(this.connection,JSON.stringify(r),oK).then(o=>(this.emit("debug",{action:"response",request:r,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:r,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[up(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[up(t.address),t.blockTag]];case"getCode":return["eth_getCode",[up(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[up(t.address),kn(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[ns(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[ns(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=up(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return tA(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=t.transaction;if(i&&i.type!=null&&Le.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=yn(t),t.transaction=yn(i),delete t.transaction.type)}}const r=this.prepareRequest(e,t);r==null&&Xn.throwError(e+" not implemented",fe.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(i){return xP(e,i,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){function i(){e.send("eth_getFilterChanges",[r]).then(function(s){if(e._pendingFilter!=t)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(A){return e.emit("pending",A),null})})}),o.then(function(){return OR(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[r]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),r}).catch(r=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=yn(AK);if(t)for(const s in t)t[s]&&(r[s]=!0);Vz(e,r);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=cC(Le.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=$e(e[s]))}),e.accessList&&(i.accessList=vu(e.accessList)),i}}let Ig=null;try{if(Ig=WebSocket,Ig==null)throw new Error("inject please")}catch{const e=new fe(Kr);Ig=function(){e.throwError("WebSockets not supported in this environment",fe.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var $b=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})};const Q0=new fe(Kr);let lK=1;class jU extends Yg{constructor(e,t){t==="any"&&Q0.throwError("WebSocketProvider does not support 'any' network yet",fe.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,t):super("_websocket",t),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?Ie(this,"_websocket",new Ig(this.connection.url)):Ie(this,"_websocket",e),Ie(this,"_requests",{}),Ie(this,"_subs",{}),Ie(this,"_subIds",{}),Ie(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(i=>{this.websocket.send(this._requests[i].payload)})},this.websocket.onmessage=i=>{const s=i.data,o=JSON.parse(s);if(o.id!=null){const a=String(o.id),A=this._requests[a];if(delete this._requests[a],o.result!==void 0)A.callback(null,o.result),this.emit("debug",{action:"response",request:JSON.parse(A.payload),response:o.result,provider:this});else{let l=null;o.error?(l=new Error(o.error.message||"unknown error"),Ie(l,"code",o.error.code||null),Ie(l,"response",s)):l=new Error("unknown error"),A.callback(l,void 0),this.emit("debug",{action:"response",error:l,request:JSON.parse(A.payload),provider:this})}}else if(o.method==="eth_subscription"){const a=this._subs[o.params.subscription];a&&a.processFunc(o.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){Q0.throwError("cannot reset events block on WebSocketProvider",fe.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){Q0.throwError("cannot set polling interval on WebSocketProvider",fe.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return $b(this,void 0,void 0,function*(){return null})}set polling(e){e&&Q0.throwError("cannot set polling on WebSocketProvider",fe.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=lK++;return new Promise((i,s)=>{function o(A,l){return A?s(A):i(l)}const a=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(a),provider:this}),this._requests[String(r)]={callback:o,payload:a},this._wsReady&&this.websocket.send(a)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return $b(this,void 0,void 0,function*(){let i=this._subIds[e];i==null&&(i=Promise.all(t).then(o=>this.send("eth_subscribe",o)),this._subIds[e]=i);const s=yield i;this._subs[s]={tag:e,processFunc:r}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],t=>{const r=Le.from(t.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],t=>{this.emit("pending",t)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{t.removed==null&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{const t=r=>{const i=r.hash;this.getTransactionReceipt(i).then(s=>{s&&this.emit(i,s)})};t(e),this._subscribe("tx",["newHeads"],r=>{this._events.filter(i=>i.type==="tx").forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let t=e.tag;if(e.type==="tx"){if(this._events.filter(i=>i.type==="tx").length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then(i=>{this._subs[i]&&(delete this._subs[i],this.send("eth_unsubscribe",[i]))}))}destroy(){return $b(this,void 0,void 0,function*(){this.websocket.readyState===Ig.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var cK=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})};const qp=new fe(Kr);class FP extends Yg{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return cK(this,void 0,void 0,function*(){let t=this.network;return t==null&&(t=yield e.detectNetwork.call(this),t||qp.throwError("no network detected",fe.errors.UNKNOWN_ERROR,{}),this._network==null&&(Ie(this,"_network",t),this.emit("network",t,null))),t})}}class nc extends FP{constructor(e,t){qp.checkAbstract(new.target,nc),e=ns(new.target,"getNetwork")(e),t=ns(new.target,"getApiKey")(t);const r=ns(new.target,"getUrl")(e,t);super(r,e),typeof t=="string"?Ie(this,"apiKey",t):t!=null&&Object.keys(t).forEach(i=>{Ie(this,i,t[i])})}_startPending(){qp.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return qp.throwError("API provider does not support signing",fe.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return qp.throwError("not implemented; sub-classes must override getUrl",fe.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const ZR=new fe(Kr),Ty="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class uK extends jU{constructor(e,t){const r=new EP(e,t),i=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(i,r.network),Ie(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===Ty}}class EP extends nc{static getWebSocketProvider(e,t){return new uK(e,t)}static getApiKey(e){return e==null?Ty:(e&&typeof e!="string"&&ZR.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;default:ZR.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(i,s)=>(t===Ty&&yC(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===Ty}}const fK=new fe(Kr),R0="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function dK(n){switch(n){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return fK.throwArgumentError("unsupported network","name",n)}class hK extends nc{isCommunityResource(){return this.apiKey===R0}static getApiKey(e){return e??R0}static getUrl(e,t){t==null&&(t=R0);const r={allowGzip:!0,url:"https://"+dK(e.name)+t,throttleCallback:(i,s)=>(t.apiKey===R0&&yC(),Promise.resolve(!0))};return t.projectSecret!=null&&(r.user="",r.password=t.projectSecret),r}}var pK=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})};const GR=new fe(Kr);class gK extends nc{static getApiKey(e){return e!=null&&GR.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="https://cloudflare-eth.com/";break;default:GR.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return pK(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,e,t)})}}var M0=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})};const ul=new fe(Kr);function JR(n){const e={};for(let t in n){if(n[t]==null)continue;let r=n[t];t==="type"&&r===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[t]?r=cC($e(r)):t==="accessList"?r="["+vu(r).map(i=>`{address:"${i.address}",storageKeys:["${i.storageKeys.join('","')}"]}`).join(",")+"]":r=$e(r),e[t]=r)}return e}function mK(n){if(n.status==0&&(n.message==="No records found"||n.message==="No transactions found"))return n.result;if(n.status!=1||typeof n.message!="string"||!n.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(n),(n.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return n.result}function HR(n){if(n&&n.status==0&&n.message=="NOTOK"&&(n.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(n),e.throttleRetry=!0,e}if(n.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(n),e}if(n.error){const e=new Error(n.error.message||"unknown error");throw n.error.code&&(e.code=n.error.code),n.error.data&&(e.data=n.error.data),e}return n.result}function zR(n){if(n==="pending")throw new Error("pending not supported");return n==="latest"?n:parseInt(n.substring(2),16)}function qb(n,e,t){if(n==="call"&&e.code===fe.errors.SERVER_ERROR){const i=e.error;if(i&&(i.message.match(/reverted/i)||i.message.match(/VM execution error/i))){let s=i.data;if(s&&(s="0x"+s.replace(/^.*0x/i,"")),Bt(s))return s;ul.throwError("missing revert data in call exception",fe.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let r=e.message;throw e.code===fe.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?r=e.error.message:typeof e.body=="string"?r=e.body:typeof e.responseText=="string"&&(r=e.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&ul.throwError("insufficient funds for intrinsic transaction cost",fe.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:t}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&ul.throwError("nonce has already been used",fe.errors.NONCE_EXPIRED,{error:e,method:n,transaction:t}),r.match(/another transaction with same nonce/)&&ul.throwError("replacement fee too low",fe.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:t}),r.match(/execution failed due to an exception|execution reverted/)&&ul.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",fe.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:t}),e}class vK extends YU{constructor(e,t){super(e),Ie(this,"baseUrl",this.getBaseUrl()),Ie(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return ul.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const r=Object.keys(t).reduce((s,o)=>{const a=t[o];return a!=null&&(s+=`&${o}=${a}`),s},""),i=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${i}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return M0(this,void 0,void 0,function*(){const i=r?this.getPostUrl():this.getUrl(e,t),s=r?this.getPostData(e,t):null,o=e==="proxy"?HR:mK;this.emit("debug",{action:"request",request:i,provider:this});const a={url:i,throttleSlotInterval:1e3,throttleCallback:(c,u)=>(this.isCommunityResource()&&yC(),Promise.resolve(!0))};let A=null;s&&(a.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},A=Object.keys(s).map(c=>`${c}=${s[c]}`).join("&"));const l=yield pC(a,A,o||HR);return this.emit("debug",{action:"response",request:i,response:os(l),provider:this}),l})}detectNetwork(){return M0(this,void 0,void 0,function*(){return this.network})}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return M0(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(i=>qb("sendTransaction",i,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if(t.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const i=JR(t.transaction);i.module="proxy",i.action="eth_call";try{return yield this.fetch("proxy",i,!0)}catch(s){return qb("call",s,t.transaction)}}case"estimateGas":{const i=JR(t.transaction);i.module="proxy",i.action="eth_estimateGas";try{return yield this.fetch("proxy",i,!0)}catch(s){return qb("estimateGas",s,t.transaction)}}case"getLogs":{const i={action:"getLogs"};if(t.filter.fromBlock&&(i.fromBlock=zR(t.filter.fromBlock)),t.filter.toBlock&&(i.toBlock=zR(t.filter.toBlock)),t.filter.address&&(i.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&ul.throwError("unsupported topic count",fe.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),t.filter.topics.length===1)){const a=t.filter.topics[0];(typeof a!="string"||a.length!==66)&&ul.throwError("unsupported topic format",fe.errors.UNSUPPORTED_OPERATION,{topic0:a}),i.topic0=a}const s=yield this.fetch("logs",i);let o={};for(let a=0;a<s.length;a++){const A=s[a];if(A.blockHash==null){if(o[A.blockNumber]==null){const l=yield this.getBlock(A.blockNumber);l&&(o[A.blockNumber]=l.hash)}A.blockHash=o[A.blockNumber]}}return s}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)})}getHistory(e,t,r){return M0(this,void 0,void 0,function*(){const i={action:"txlist",address:yield this.resolveName(e),startblock:t??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",i)).map(o=>{["contractAddress","to"].forEach(function(A){o[A]==""&&delete o[A]}),o.creates==null&&o.contractAddress!=null&&(o.creates=o.contractAddress);const a=this.formatter.transactionResponse(o);return o.timeStamp&&(a.timestamp=parseInt(o.timeStamp)),a})})}isCommunityResource(){return this.apiKey==null}}function yK(n){n=n.slice();for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1)),r=n[e];n[e]=n[t],n[t]=r}return n}var IB=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})};const Rc=new fe(Kr);function T0(){return new Date().getTime()}function XR(n){let e=null;for(let t=0;t<n.length;t++){const r=n[t];if(r==null)return null;e?e.name===r.name&&e.chainId===r.chainId&&(e.ensAddress===r.ensAddress||e.ensAddress==null&&r.ensAddress==null)||Rc.throwArgumentError("provider mismatch","networks",n):e=r}return e}function YR(n,e){n=n.slice().sort();const t=Math.floor(n.length/2);if(n.length%2)return n[t];const r=n[t-1],i=n[t];return e!=null&&Math.abs(r-i)>e?null:(r+i)/2}function Kf(n){if(n===null)return"null";if(typeof n=="number"||typeof n=="boolean")return JSON.stringify(n);if(typeof n=="string")return n;if(Le.isBigNumber(n))return n.toString();if(Array.isArray(n))return JSON.stringify(n.map(e=>Kf(e)));if(typeof n=="object"){const e=Object.keys(n);return e.sort(),"{"+e.map(t=>{let r=n[t];return typeof r=="function"?r="[function]":r=Kf(r),JSON.stringify(t)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof n)}let BK=1;function KR(n){let e=null,t=null,r=new Promise(o=>{e=function(){t&&(clearTimeout(t),t=null),o()},t=setTimeout(e,n)});const i=o=>(r=r.then(o),r);function s(){return r}return{cancel:e,getPromise:s,wait:i}}const wK=[fe.errors.CALL_EXCEPTION,fe.errors.INSUFFICIENT_FUNDS,fe.errors.NONCE_EXPIRED,fe.errors.REPLACEMENT_UNDERPRICED,fe.errors.UNPREDICTABLE_GAS_LIMIT],CK=["address","args","errorArgs","errorSignature","method","transaction"];function N0(n,e){const t={weight:n.weight};return Object.defineProperty(t,"provider",{get:()=>n.provider}),n.start&&(t.start=n.start),e&&(t.duration=e-n.start),n.done&&(n.error?t.error=n.error:t.result=n.result||null),t}function bK(n,e){return function(t){const r={};t.forEach(s=>{const o=n(s.result);r[o]||(r[o]={count:0,result:s.result}),r[o].count++});const i=Object.keys(r);for(let s=0;s<i.length;s++){const o=r[i[s]];if(o.count>=e)return o.result}}}function xK(n,e,t){let r=Kf;switch(e){case"getBlockNumber":return function(i){const s=i.map(a=>a.result);let o=YR(i.map(a=>a.result),2);if(o!=null)return o=Math.ceil(o),s.indexOf(o+1)>=0&&o++,o>=n._highestBlockNumber&&(n._highestBlockNumber=o),n._highestBlockNumber};case"getGasPrice":return function(i){const s=i.map(o=>o.result);return s.sort(),s[Math.floor(s.length/2)]};case"getEtherPrice":return function(i){return YR(i.map(s=>s.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(i){return i==null?null:(i=yn(i),i.confirmations=-1,Kf(i))};break;case"getBlock":t.includeTransactions?r=function(i){return i==null?null:(i=yn(i),i.transactions=i.transactions.map(s=>(s=yn(s),s.confirmations=-1,s)),Kf(i))}:r=function(i){return i==null?null:Kf(i)};break;default:throw new Error("unknown method: "+e)}return bK(r,n.quorum)}function fp(n,e){return IB(this,void 0,void 0,function*(){const t=n.provider;return t.blockNumber!=null&&t.blockNumber>=e||e===-1?t:Yf(()=>new Promise((r,i)=>{setTimeout(function(){return t.blockNumber>=e?r(t):n.cancelled?r(null):r(void 0)},0)}),{oncePoll:t})})}function IK(n,e,t,r){return IB(this,void 0,void 0,function*(){let i=n.provider;switch(t){case"getBlockNumber":case"getGasPrice":return i[t]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&Bt(r.blockTag)&&(i=yield fp(n,e)),i[t](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&Bt(r.blockTag)&&(i=yield fp(n,e)),i.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&Bt(r.blockTag)&&(i=yield fp(n,e)),i[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&Bt(r.blockTag)&&(i=yield fp(n,e)),t==="call"&&r.blockTag?i[t](r.transaction,r.blockTag):i[t](r.transaction);case"getTransaction":case"getTransactionReceipt":return i[t](r.transactionHash);case"getLogs":{let s=r.filter;return(s.fromBlock&&Bt(s.fromBlock)||s.toBlock&&Bt(s.toBlock))&&(i=yield fp(n,e)),i.getLogs(s)}}return Rc.throwError("unknown method error",fe.errors.UNKNOWN_ERROR,{method:t,params:r})})}class FK extends YU{constructor(e,t){e.length===0&&Rc.throwArgumentError("missing providers","providers",e);const r=e.map((o,a)=>{if(Km.isProvider(o)){const c=MR(o)?2e3:750;return Object.freeze({provider:o,weight:1,stallTimeout:c,priority:1})}const A=yn(o);A.priority==null&&(A.priority=1),A.stallTimeout==null&&(A.stallTimeout=MR(o)?2e3:750),A.weight==null&&(A.weight=1);const l=A.weight;return(l%1||l>512||l<1)&&Rc.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${a}].weight`,l),Object.freeze(A)}),i=r.reduce((o,a)=>o+a.weight,0);t==null?t=i/2:t>i&&Rc.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let s=XR(r.map(o=>o.provider.network));s==null&&(s=new Promise((o,a)=>{setTimeout(()=>{this.detectNetwork().then(o,a)},0)})),super(s),Ie(this,"providerConfigs",Object.freeze(r)),Ie(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return IB(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(t=>t.provider.getNetwork()));return XR(e)})}perform(e,t){return IB(this,void 0,void 0,function*(){if(e==="sendTransaction"){const A=yield Promise.all(this.providerConfigs.map(l=>l.provider.sendTransaction(t.signedTransaction).then(c=>c.hash,c=>c)));for(let l=0;l<A.length;l++){const c=A[l];if(typeof c=="string")return c}throw A[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const r=xK(this,e,t),i=yK(this.providerConfigs.map(yn));i.sort((A,l)=>A.priority-l.priority);const s=this._highestBlockNumber;let o=0,a=!0;for(;;){const A=T0();let l=i.filter(d=>d.runner&&A-d.start<d.stallTimeout).reduce((d,h)=>d+h.weight,0);for(;l<this.quorum&&o<i.length;){const d=i[o++],h=BK++;d.start=T0(),d.staller=KR(d.stallTimeout),d.staller.wait(()=>{d.staller=null}),d.runner=IK(d,s,e,t).then(p=>{d.done=!0,d.result=p,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:h,backend:N0(d,T0()),request:{method:e,params:os(t)},provider:this})},p=>{d.done=!0,d.error=p,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:h,backend:N0(d,T0()),request:{method:e,params:os(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:h,backend:N0(d,null),request:{method:e,params:os(t)},provider:this}),l+=d.weight}const c=[];i.forEach(d=>{d.done||!d.runner||(c.push(d.runner),d.staller&&c.push(d.staller.getPromise()))}),c.length&&(yield Promise.race(c));const u=i.filter(d=>d.done&&d.error==null);if(u.length>=this.quorum){const d=r(u);if(d!==void 0)return i.forEach(h=>{h.staller&&h.staller.cancel(),h.cancelled=!0}),d;a||(yield KR(100).getPromise()),a=!1}const f=i.reduce((d,h)=>{if(!h.done||h.error==null)return d;const p=h.error.code;return wK.indexOf(p)>=0&&(d[p]||(d[p]={error:h.error,weight:0}),d[p].weight+=h.weight),d},{});if(Object.keys(f).forEach(d=>{const h=f[d];if(h.weight<this.quorum)return;i.forEach(g=>{g.staller&&g.staller.cancel(),g.cancelled=!0});const p=h.error,m={};CK.forEach(g=>{p[g]!=null&&(m[g]=p[g])}),Rc.throwError(p.reason||p.message,d,m)}),i.filter(d=>!d.done).length===0)break}return i.forEach(A=>{A.staller&&A.staller.cancel(),A.cancelled=!0}),Rc.throwError("failed to meet quorum",fe.errors.SERVER_ERROR,{method:e,params:t,results:i.map(A=>N0(A)),provider:this})})}}const EK=null,Ny=new fe(Kr),eg="84842078b09946638c03157f83405213";class UK extends jU{constructor(e,t){const r=new UP(e,t),i=r.connection;i.password&&Ny.throwError("INFURA WebSocket project secrets unsupported",fe.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const s=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(s,e),Ie(this,"apiKey",r.projectId),Ie(this,"projectId",r.projectId),Ie(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===eg}}class UP extends nc{static getWebSocketProvider(e,t){return new UK(e,t)}static getApiKey(e){const t={apiKey:eg,projectId:eg,projectSecret:null};return e==null||(typeof e=="string"?t.projectId=e:e.projectSecret!=null?(Ny.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),Ny.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;default:Ny.throwError("unsupported network",fe.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(s,o)=>(t.projectId===eg&&yC(),Promise.resolve(!0))};return t.projectSecret!=null&&(i.user="",i.password=t.projectSecret),i}isCommunityResource(){return this.projectId===eg}}const ex=new fe(Kr),_K="ETHERS_JS_SHARED";class SK extends nc{static getApiKey(e){return e&&typeof e!="string"&&ex.throwArgumentError("invalid apiKey","apiKey",e),e||_K}static getUrl(e,t){ex.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:ex.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const jR=new fe(Kr),$R="62e1ad51b37b8e00394bda3b";class QK extends nc{static getApiKey(e){const t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?t.applicationId=$R:typeof e=="string"?t.applicationId=e:e.applicationSecretKey!=null?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:jR.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:jR.throwError("unsupported network",fe.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i=`https://${r}/v1/lb/${t.applicationId}`,s={headers:{},url:i};return t.applicationSecretKey!=null&&(s.user="",s.password=t.applicationSecretKey),s}isCommunityResource(){return this.applicationId===$R}}const qR=new fe(Kr);let RK=1;function e2(n,e){const t="Web3LegacyFetcher";return function(r,i){const s={method:r,params:i,id:RK++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:t,request:os(s),provider:this}),e(s,(A,l)=>{if(A)return this.emit("debug",{action:"response",fetcher:t,error:A,request:s,provider:this}),a(A);if(this.emit("debug",{action:"response",fetcher:t,request:s,response:l,provider:this}),l.error){const c=new Error(l.error.message);return c.code=l.error.code,c.data=l.error.data,a(c)}o(l.result)})})}}function MK(n){return function(e,t){t==null&&(t=[]);const r={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:os(r),provider:this}),n.request(r).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,error:i,provider:this}),i})}}class $U extends Yg{constructor(e,t){e==null&&qR.throwArgumentError("missing provider","provider",e);let r=null,i=null,s=null;typeof e=="function"?(r="unknown:",i=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),s=e,e.request?(r===""&&(r="eip-1193:"),i=MK(e)):e.sendAsync?i=e2(e,e.sendAsync.bind(e)):e.send?i=e2(e,e.send.bind(e)):qR.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),Ie(this,"jsonRpcFetchFunc",i),Ie(this,"provider",s)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const t2=new fe(Kr);function TK(n,e){if(n==null&&(n="homestead"),typeof n=="string"){const r=n.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new Yg(n);case"ws":case"wss":return new jU(n);default:t2.throwArgumentError("unsupported URL scheme","network",n)}}const t=U3(n);return(!t||!t._defaultProvider)&&t2.throwError("unsupported getDefaultProvider network",fe.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:n}),t._defaultProvider({FallbackProvider:FK,AlchemyProvider:EP,AnkrProvider:hK,CloudflareProvider:gK,EtherscanProvider:vK,InfuraProvider:UP,JsonRpcProvider:Yg,NodesmithProvider:SK,PocketProvider:QK,Web3Provider:$U,IpcProvider:EK},e)}var NK=!0,tx="Invariant failed";function uA(n,e){if(!n){if(NK)throw new Error(tx);var t=typeof e=="function"?e():e,r=t?"".concat(tx,": ").concat(t):tx;throw new Error(r)}}var Uo;(function(n){n.Update="Web3ReactUpdate",n.Error="Web3ReactError",n.Deactivate="Web3ReactDeactivate"})(Uo||(Uo={}));function Kg(){return Kg=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kg.apply(this,arguments)}function _P(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,jg(n,e)}function rF(n){return rF=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},rF(n)}function jg(n,e){return jg=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},jg(n,e)}function kK(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ky(n,e,t){return kK()?ky=Reflect.construct:ky=function(i,s,o){var a=[null];a.push.apply(a,s);var A=Function.bind.apply(i,a),l=new A;return o&&jg(l,o.prototype),l},ky.apply(null,arguments)}function DK(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function FB(n){var e=typeof Map=="function"?new Map:void 0;return FB=function(r){if(r===null||!DK(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return ky(r,arguments,rF(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),jg(i,r)},FB(n)}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function n2(n,e){try{var t=n()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}function SP(n){if(typeof n=="string"){n=n.replace(/^Ox/,"0x");var e=Number.parseInt(n,n.trim().substring(0,2)==="0x"?16:10);return Number.isNaN(e)&&uA(!1),e}else return Number.isInteger(n)||uA(!1),n}function QP(n){typeof n=="string"&&n.match(/^(0x)?[0-9a-fA-F]{40}$/)||uA(!1);for(var e=n.substring(0,2)==="0x"?n:"0x"+n,t=e.toLowerCase().substring(2).split(""),r=new Uint8Array(40),i=0;i<40;i++)r[i]=t[i].charCodeAt(0);for(var s=it(jn(r)),o=0;o<40;o+=2)s[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(s[o>>1]&15)>=8&&(t[o+1]=t[o+1].toUpperCase());var a="0x"+t.join("");return e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==a&&uA(!1),a}var r2=function(e,t){try{var r=function(o){return Promise.resolve(Promise.all([t.chainId===void 0?e.getChainId():t.chainId,t.account===void 0?e.getAccount():t.account])).then(function(a){var A=a[0],l=a[1],c=SP(A);if(e.supportedChainIds&&!e.supportedChainIds.includes(c))throw new RP(c,e.supportedChainIds);var u=l===null?l:QP(l);return{provider:o,chainId:c,account:u}})},i=t.provider===void 0;return Promise.resolve(i?Promise.resolve(e.getProvider()).then(r):r(t.provider))}catch(s){return Promise.reject(s)}},k0=function(n){_P(e,n);function e(){var t;return t=n.call(this)||this,t.name=t.constructor.name,t}return e}(FB(Error)),RP=function(n){_P(e,n);function e(t,r){var i;return i=n.call(this)||this,i.name=i.constructor.name,i.message="Unsupported chain id: "+t+". Supported chain ids are: "+r+".",i}return e}(FB(Error)),hr;(function(n){n[n.ACTIVATE_CONNECTOR=0]="ACTIVATE_CONNECTOR",n[n.UPDATE=1]="UPDATE",n[n.UPDATE_FROM_ERROR=2]="UPDATE_FROM_ERROR",n[n.ERROR=3]="ERROR",n[n.ERROR_FROM_ACTIVATION=4]="ERROR_FROM_ACTIVATION",n[n.DEACTIVATE_CONNECTOR=5]="DEACTIVATE_CONNECTOR"})(hr||(hr={}));function VK(n,e){var t=e.type,r=e.payload;switch(t){case hr.ACTIVATE_CONNECTOR:{var i=r.connector,s=r.provider,o=r.chainId,a=r.account,A=r.onError;return{connector:i,provider:s,chainId:o,account:a,onError:A}}case hr.UPDATE:{var l=r.provider,c=r.chainId,u=r.account;return Kg({},n,l===void 0?{}:{provider:l},c===void 0?{}:{chainId:c},u===void 0?{}:{account:u})}case hr.UPDATE_FROM_ERROR:{var f=r.provider,d=r.chainId,h=r.account;return Kg({},n,f===void 0?{}:{provider:f},d===void 0?{}:{chainId:d},h===void 0?{}:{account:h},{error:void 0})}case hr.ERROR:{var p=r.error,m=n.connector,g=n.onError;return{connector:m,error:p,onError:g}}case hr.ERROR_FROM_ACTIVATION:{var v=r.connector,y=r.error;return{connector:v,error:y}}case hr.DEACTIVATE_CONNECTOR:return{}}}function LK(){var n=pe.useReducer(VK,{}),e=n[0],t=n[1],r=e.connector,i=e.provider,s=e.chainId,o=e.account,a=e.onError,A=e.error,l=pe.useRef(-1);l.current+=1;var c=pe.useCallback(function(m,g,v){v===void 0&&(v=!1);try{var y=l.current,w=!1;return Promise.resolve(n2(function(){return Promise.resolve(m.activate().then(function(C){return w=!0,C})).then(function(C){return Promise.resolve(r2(m,C)).then(function(b){if(l.current>y)throw new k0;t({type:hr.ACTIVATE_CONNECTOR,payload:Kg({connector:m},b,{onError:g})})})})},function(C){if(C instanceof k0)w&&m.deactivate();else{if(v)throw w&&m.deactivate(),C;g?(w&&m.deactivate(),g(C)):t({type:hr.ERROR_FROM_ACTIVATION,payload:{connector:m,error:C}})}}))}catch(C){return Promise.reject(C)}},[]),u=pe.useCallback(function(m){t({type:hr.ERROR,payload:{error:m}})},[]),f=pe.useCallback(function(){t({type:hr.DEACTIVATE_CONNECTOR})},[]),d=pe.useCallback(function(m){try{if(!r)throw Error("This should never happen, it's just so Typescript stops complaining");var g=l.current;return Promise.resolve(function(){if(A)return n2(function(){return Promise.resolve(r2(r,m)).then(function(C){if(l.current>g)throw new k0;t({type:hr.UPDATE_FROM_ERROR,payload:C})})},function(C){C instanceof k0||(a?a(C):t({type:hr.ERROR,payload:{error:C}}))});var v=m.chainId===void 0?void 0:SP(m.chainId);if(v!==void 0&&r.supportedChainIds&&!r.supportedChainIds.includes(v)){var y=new RP(v,r.supportedChainIds);a?a(y):t({type:hr.ERROR,payload:{error:y}})}else{var w=typeof m.account=="string"?QP(m.account):m.account;t({type:hr.UPDATE,payload:{provider:m.provider,chainId:v,account:w}})}}())}catch(v){return Promise.reject(v)}},[r,A,a]),h=pe.useCallback(function(m){a?a(m):t({type:hr.ERROR,payload:{error:m}})},[a]),p=pe.useCallback(function(){t({type:hr.DEACTIVATE_CONNECTOR})},[]);return pe.useEffect(function(){return function(){r&&r.deactivate()}},[r]),pe.useEffect(function(){return r&&r.on(Uo.Update,d).on(Uo.Error,h).on(Uo.Deactivate,p),function(){r&&r.off(Uo.Update,d).off(Uo.Error,h).off(Uo.Deactivate,p)}},[r,d,h,p]),{connector:r,provider:i,chainId:s,account:o,activate:c,setError:u,deactivate:f,error:A}}var MP="primary",jf={};function PK(n){jf[n]&&uA(!1),jf[n]=pe.createContext({activate:function(){try{return uA(!1),Promise.resolve()}catch(t){return Promise.reject(t)}},setError:function(){uA(!1)},deactivate:function(){uA(!1)},active:!1}),jf[n].displayName="Web3ReactContext - "+n;var e=jf[n].Provider;return function(r){var i=r.getLibrary,s=r.children,o=LK(),a=o.connector,A=o.provider,l=o.chainId,c=o.account,u=o.activate,f=o.setError,d=o.deactivate,h=o.error,p=a!==void 0&&l!==void 0&&c!==void 0&&!h,m=pe.useMemo(function(){return p&&l!==void 0&&Number.isInteger(l)&&a?i(A,a):void 0},[p,i,A,a,l]),g={connector:a,library:m,chainId:l,account:c,activate:u,setError:f,deactivate:d,active:p,error:h};return Y.createElement(e,{value:g},s)}}var WK=PK(MP);function OK(n){return n===void 0&&(n=MP),Object.keys(jf).includes(n)||uA(!1),jf[n]}function ZK(n){return pe.useContext(OK(n))}var iF={},sF={},GK={get exports(){return sF},set exports(n){sF=n}},ps={},oF={},JK={get exports(){return oF},set exports(n){oF=n}},TP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(M,L){var Z=M.length;M.push(L);e:for(;0<Z;){var P=Z-1>>>1,U=M[P];if(0<i(U,L))M[P]=L,M[Z]=U,Z=P;else break e}}function t(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var L=M[0],Z=M.pop();if(Z!==L){M[0]=Z;e:for(var P=0,U=M.length,G=U>>>1;P<G;){var oe=2*(P+1)-1,D=M[oe],K=oe+1,ce=M[K];if(0>i(D,Z))K<U&&0>i(ce,D)?(M[P]=ce,M[K]=Z,P=K):(M[P]=D,M[oe]=Z,P=oe);else if(K<U&&0>i(ce,Z))M[P]=ce,M[K]=Z,P=K;else break e}}return L}function i(M,L){var Z=M.sortIndex-L.sortIndex;return Z!==0?Z:M.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var A=[],l=[],c=1,u=null,f=3,d=!1,h=!1,p=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(M){for(var L=t(l);L!==null;){if(L.callback===null)r(l);else if(L.startTime<=M)r(l),L.sortIndex=L.expirationTime,e(A,L);else break;L=t(l)}}function w(M){if(p=!1,y(M),!h)if(t(A)!==null)h=!0,R(C);else{var L=t(l);L!==null&&k(w,L.startTime-M)}}function C(M,L){h=!1,p&&(p=!1,g(I),I=-1),d=!0;var Z=f;try{for(y(L),u=t(A);u!==null&&(!(u.expirationTime>L)||M&&!H());){var P=u.callback;if(typeof P=="function"){u.callback=null,f=u.priorityLevel;var U=P(u.expirationTime<=L);L=n.unstable_now(),typeof U=="function"?u.callback=U:u===t(A)&&r(A),y(L)}else r(A);u=t(A)}if(u!==null)var G=!0;else{var oe=t(l);oe!==null&&k(w,oe.startTime-L),G=!1}return G}finally{u=null,f=Z,d=!1}}var b=!1,F=null,I=-1,S=5,T=-1;function H(){return!(n.unstable_now()-T<S)}function X(){if(F!==null){var M=n.unstable_now();T=M;var L=!0;try{L=F(!0,M)}finally{L?Q():(b=!1,F=null)}}else b=!1}var Q;if(typeof v=="function")Q=function(){v(X)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,E=B.port2;B.port1.onmessage=X,Q=function(){E.postMessage(null)}}else Q=function(){m(X,0)};function R(M){F=M,b||(b=!0,Q())}function k(M,L){I=m(function(){M(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(M){M.callback=null},n.unstable_continueExecution=function(){h||d||(h=!0,R(C))},n.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<M?Math.floor(1e3/M):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(A)},n.unstable_next=function(M){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var Z=f;f=L;try{return M()}finally{f=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(M,L){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Z=f;f=M;try{return L()}finally{f=Z}},n.unstable_scheduleCallback=function(M,L,Z){var P=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?P+Z:P):Z=P,M){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Z+U,M={id:c++,callback:L,priorityLevel:M,startTime:Z,expirationTime:U,sortIndex:-1},Z>P?(M.sortIndex=Z,e(l,M),t(A)===null&&M===t(l)&&(p?(g(I),I=-1):p=!0,k(w,Z-P))):(M.sortIndex=U,e(A,M),h||d||(h=!0,R(C))),M},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(M){var L=f;return function(){var Z=f;f=L;try{return M.apply(this,arguments)}finally{f=Z}}}})(TP);(function(n){n.exports=TP})(JK);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NP=pe,ls=oF;function Re(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kP=new Set,$g={};function yu(n,e){Yd(n,e),Yd(n+"Capture",e)}function Yd(n,e){for($g[n]=e,n=0;n<e.length;n++)kP.add(e[n])}var bA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aF=Object.prototype.hasOwnProperty,HK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,i2={},s2={};function zK(n){return aF.call(s2,n)?!0:aF.call(i2,n)?!1:HK.test(n)?s2[n]=!0:(i2[n]=!0,!1)}function XK(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function YK(n,e,t,r){if(e===null||typeof e>"u"||XK(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fi(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Qr[n]=new fi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Qr[e]=new fi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Qr[n]=new fi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Qr[n]=new fi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Qr[n]=new fi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Qr[n]=new fi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Qr[n]=new fi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Qr[n]=new fi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Qr[n]=new fi(n,5,!1,n.toLowerCase(),null,!1,!1)});var qU=/[\-:]([a-z])/g;function e_(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(qU,e_);Qr[e]=new fi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(qU,e_);Qr[e]=new fi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(qU,e_);Qr[e]=new fi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Qr[n]=new fi(n,1,!1,n.toLowerCase(),null,!1,!1)});Qr.xlinkHref=new fi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Qr[n]=new fi(n,1,!1,n.toLowerCase(),null,!0,!0)});function t_(n,e,t,r){var i=Qr.hasOwnProperty(e)?Qr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YK(e,t,i,r)&&(t=null),r||i===null?zK(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var TA=NP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D0=Symbol.for("react.element"),$f=Symbol.for("react.portal"),qf=Symbol.for("react.fragment"),n_=Symbol.for("react.strict_mode"),AF=Symbol.for("react.profiler"),DP=Symbol.for("react.provider"),VP=Symbol.for("react.context"),r_=Symbol.for("react.forward_ref"),lF=Symbol.for("react.suspense"),cF=Symbol.for("react.suspense_list"),i_=Symbol.for("react.memo"),ol=Symbol.for("react.lazy"),LP=Symbol.for("react.offscreen"),o2=Symbol.iterator;function dp(n){return n===null||typeof n!="object"?null:(n=o2&&n[o2]||n["@@iterator"],typeof n=="function"?n:null)}var En=Object.assign,nx;function tg(n){if(nx===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);nx=e&&e[1]||""}return`
`+nx+n}var rx=!1;function ix(n,e){if(!n||rx)return"";rx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(n,[],e)}else{try{e.call()}catch(l){r=l}n.call(e.prototype)}else{try{throw Error()}catch(l){r=l}n()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var A=`
`+i[o].replace(" at new "," at ");return n.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",n.displayName)),A}while(1<=o&&0<=a);break}}}finally{rx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?tg(n):""}function KK(n){switch(n.tag){case 5:return tg(n.type);case 16:return tg("Lazy");case 13:return tg("Suspense");case 19:return tg("SuspenseList");case 0:case 2:case 15:return n=ix(n.type,!1),n;case 11:return n=ix(n.type.render,!1),n;case 1:return n=ix(n.type,!0),n;default:return""}}function uF(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case qf:return"Fragment";case $f:return"Portal";case AF:return"Profiler";case n_:return"StrictMode";case lF:return"Suspense";case cF:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case VP:return(n.displayName||"Context")+".Consumer";case DP:return(n._context.displayName||"Context")+".Provider";case r_:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case i_:return e=n.displayName||null,e!==null?e:uF(n.type)||"Memo";case ol:e=n._payload,n=n._init;try{return uF(n(e))}catch{}}return null}function jK(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uF(e);case 8:return e===n_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function PP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $K(n){var e=PP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function V0(n){n._valueTracker||(n._valueTracker=$K(n))}function WP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=PP(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function EB(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function fF(n,e){var t=e.checked;return En({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function a2(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Zl(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function OP(n,e){e=e.checked,e!=null&&t_(n,"checked",e,!1)}function dF(n,e){OP(n,e);var t=Zl(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?hF(n,e.type,t):e.hasOwnProperty("defaultValue")&&hF(n,e.type,Zl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function A2(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function hF(n,e,t){(e!=="number"||EB(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ng=Array.isArray;function bd(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Zl(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function pF(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Re(91));return En({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function l2(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Re(92));if(ng(t)){if(1<t.length)throw Error(Re(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Zl(t)}}function ZP(n,e){var t=Zl(e.value),r=Zl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function c2(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function GP(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gF(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?GP(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var L0,JP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(L0=L0||document.createElement("div"),L0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=L0.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function qg(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Fg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qK=["Webkit","ms","Moz","O"];Object.keys(Fg).forEach(function(n){qK.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Fg[e]=Fg[n]})});function HP(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Fg.hasOwnProperty(n)&&Fg[n]?(""+e).trim():e+"px"}function zP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=HP(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var e6=En({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mF(n,e){if(e){if(e6[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Re(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Re(62))}}function vF(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yF=null;function s_(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var BF=null,xd=null,Id=null;function u2(n){if(n=n0(n)){if(typeof BF!="function")throw Error(Re(280));var e=n.stateNode;e&&(e=xC(e),BF(n.stateNode,n.type,e))}}function XP(n){xd?Id?Id.push(n):Id=[n]:xd=n}function YP(){if(xd){var n=xd,e=Id;if(Id=xd=null,u2(n),e)for(n=0;n<e.length;n++)u2(e[n])}}function KP(n,e){return n(e)}function jP(){}var sx=!1;function $P(n,e,t){if(sx)return n(e,t);sx=!0;try{return KP(n,e,t)}finally{sx=!1,(xd!==null||Id!==null)&&(jP(),YP())}}function em(n,e){var t=n.stateNode;if(t===null)return null;var r=xC(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Re(231,e,typeof t));return t}var wF=!1;if(bA)try{var hp={};Object.defineProperty(hp,"passive",{get:function(){wF=!0}}),window.addEventListener("test",hp,hp),window.removeEventListener("test",hp,hp)}catch{wF=!1}function t6(n,e,t,r,i,s,o,a,A){var l=Array.prototype.slice.call(arguments,3);try{e.apply(t,l)}catch(c){this.onError(c)}}var Eg=!1,UB=null,_B=!1,CF=null,n6={onError:function(n){Eg=!0,UB=n}};function r6(n,e,t,r,i,s,o,a,A){Eg=!1,UB=null,t6.apply(n6,arguments)}function i6(n,e,t,r,i,s,o,a,A){if(r6.apply(this,arguments),Eg){if(Eg){var l=UB;Eg=!1,UB=null}else throw Error(Re(198));_B||(_B=!0,CF=l)}}function Bu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function qP(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function f2(n){if(Bu(n)!==n)throw Error(Re(188))}function s6(n){var e=n.alternate;if(!e){if(e=Bu(n),e===null)throw Error(Re(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return f2(i),n;if(s===r)return f2(i),e;s=s.sibling}throw Error(Re(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Re(189))}}if(t.alternate!==r)throw Error(Re(190))}if(t.tag!==3)throw Error(Re(188));return t.stateNode.current===t?n:e}function eW(n){return n=s6(n),n!==null?tW(n):null}function tW(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=tW(n);if(e!==null)return e;n=n.sibling}return null}var nW=ls.unstable_scheduleCallback,d2=ls.unstable_cancelCallback,o6=ls.unstable_shouldYield,a6=ls.unstable_requestPaint,Zn=ls.unstable_now,A6=ls.unstable_getCurrentPriorityLevel,o_=ls.unstable_ImmediatePriority,rW=ls.unstable_UserBlockingPriority,SB=ls.unstable_NormalPriority,l6=ls.unstable_LowPriority,iW=ls.unstable_IdlePriority,BC=null,ga=null;function c6(n){if(ga&&typeof ga.onCommitFiberRoot=="function")try{ga.onCommitFiberRoot(BC,n,void 0,(n.current.flags&128)===128)}catch{}}var Ro=Math.clz32?Math.clz32:d6,u6=Math.log,f6=Math.LN2;function d6(n){return n>>>=0,n===0?32:31-(u6(n)/f6|0)|0}var P0=64,W0=4194304;function rg(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function QB(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=rg(a):(s&=o,s!==0&&(r=rg(s)))}else o=t&~i,o!==0?r=rg(o):s!==0&&(r=rg(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ro(e),i=1<<t,r|=n[t],e&=~i;return r}function h6(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function p6(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Ro(s),a=1<<o,A=i[o];A===-1?(!(a&t)||a&r)&&(i[o]=h6(a,e)):A<=e&&(n.expiredLanes|=a),s&=~a}}function bF(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function sW(){var n=P0;return P0<<=1,!(P0&4194240)&&(P0=64),n}function ox(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function e0(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ro(e),n[e]=t}function g6(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Ro(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function a_(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Ro(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Kt=0;function oW(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var aW,A_,AW,lW,cW,xF=!1,O0=[],Fl=null,El=null,Ul=null,tm=new Map,nm=new Map,fl=[],m6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h2(n,e){switch(n){case"focusin":case"focusout":Fl=null;break;case"dragenter":case"dragleave":El=null;break;case"mouseover":case"mouseout":Ul=null;break;case"pointerover":case"pointerout":tm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nm.delete(e.pointerId)}}function pp(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=n0(e),e!==null&&A_(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function v6(n,e,t,r,i){switch(e){case"focusin":return Fl=pp(Fl,n,e,t,r,i),!0;case"dragenter":return El=pp(El,n,e,t,r,i),!0;case"mouseover":return Ul=pp(Ul,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return tm.set(s,pp(tm.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,nm.set(s,pp(nm.get(s)||null,n,e,t,r,i)),!0}return!1}function uW(n){var e=Nc(n.target);if(e!==null){var t=Bu(e);if(t!==null){if(e=t.tag,e===13){if(e=qP(t),e!==null){n.blockedOn=e,cW(n.priority,function(){AW(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Dy(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=IF(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);yF=r,t.target.dispatchEvent(r),yF=null}else return e=n0(t),e!==null&&A_(e),n.blockedOn=t,!1;e.shift()}return!0}function p2(n,e,t){Dy(n)&&t.delete(e)}function y6(){xF=!1,Fl!==null&&Dy(Fl)&&(Fl=null),El!==null&&Dy(El)&&(El=null),Ul!==null&&Dy(Ul)&&(Ul=null),tm.forEach(p2),nm.forEach(p2)}function gp(n,e){n.blockedOn===e&&(n.blockedOn=null,xF||(xF=!0,ls.unstable_scheduleCallback(ls.unstable_NormalPriority,y6)))}function rm(n){function e(i){return gp(i,n)}if(0<O0.length){gp(O0[0],n);for(var t=1;t<O0.length;t++){var r=O0[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Fl!==null&&gp(Fl,n),El!==null&&gp(El,n),Ul!==null&&gp(Ul,n),tm.forEach(e),nm.forEach(e),t=0;t<fl.length;t++)r=fl[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<fl.length&&(t=fl[0],t.blockedOn===null);)uW(t),t.blockedOn===null&&fl.shift()}var Fd=TA.ReactCurrentBatchConfig,RB=!0;function B6(n,e,t,r){var i=Kt,s=Fd.transition;Fd.transition=null;try{Kt=1,l_(n,e,t,r)}finally{Kt=i,Fd.transition=s}}function w6(n,e,t,r){var i=Kt,s=Fd.transition;Fd.transition=null;try{Kt=4,l_(n,e,t,r)}finally{Kt=i,Fd.transition=s}}function l_(n,e,t,r){if(RB){var i=IF(n,e,t,r);if(i===null)gx(n,e,r,MB,t),h2(n,r);else if(v6(i,n,e,t,r))r.stopPropagation();else if(h2(n,r),e&4&&-1<m6.indexOf(n)){for(;i!==null;){var s=n0(i);if(s!==null&&aW(s),s=IF(n,e,t,r),s===null&&gx(n,e,r,MB,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else gx(n,e,r,null,t)}}var MB=null;function IF(n,e,t,r){if(MB=null,n=s_(r),n=Nc(n),n!==null)if(e=Bu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=qP(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return MB=n,null}function fW(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A6()){case o_:return 1;case rW:return 4;case SB:case l6:return 16;case iW:return 536870912;default:return 16}default:return 16}}var gl=null,c_=null,Vy=null;function dW(){if(Vy)return Vy;var n,e=c_,t=e.length,r,i="value"in gl?gl.value:gl.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Vy=i.slice(n,1<r?1-r:void 0)}function Ly(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Z0(){return!0}function g2(){return!1}function gs(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Z0:g2,this.isPropagationStopped=g2,this}return En(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Z0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Z0)},persist:function(){},isPersistent:Z0}),e}var Uh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},u_=gs(Uh),t0=En({},Uh,{view:0,detail:0}),C6=gs(t0),ax,Ax,mp,wC=En({},t0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:f_,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==mp&&(mp&&n.type==="mousemove"?(ax=n.screenX-mp.screenX,Ax=n.screenY-mp.screenY):Ax=ax=0,mp=n),ax)},movementY:function(n){return"movementY"in n?n.movementY:Ax}}),m2=gs(wC),b6=En({},wC,{dataTransfer:0}),x6=gs(b6),I6=En({},t0,{relatedTarget:0}),lx=gs(I6),F6=En({},Uh,{animationName:0,elapsedTime:0,pseudoElement:0}),E6=gs(F6),U6=En({},Uh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),_6=gs(U6),S6=En({},Uh,{data:0}),v2=gs(S6),Q6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T6(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=M6[n])?!!e[n]:!1}function f_(){return T6}var N6=En({},t0,{key:function(n){if(n.key){var e=Q6[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Ly(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?R6[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:f_,charCode:function(n){return n.type==="keypress"?Ly(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ly(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),k6=gs(N6),D6=En({},wC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y2=gs(D6),V6=En({},t0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:f_}),L6=gs(V6),P6=En({},Uh,{propertyName:0,elapsedTime:0,pseudoElement:0}),W6=gs(P6),O6=En({},wC,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Z6=gs(O6),G6=[9,13,27,32],d_=bA&&"CompositionEvent"in window,Ug=null;bA&&"documentMode"in document&&(Ug=document.documentMode);var J6=bA&&"TextEvent"in window&&!Ug,hW=bA&&(!d_||Ug&&8<Ug&&11>=Ug),B2=String.fromCharCode(32),w2=!1;function pW(n,e){switch(n){case"keyup":return G6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gW(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ed=!1;function H6(n,e){switch(n){case"compositionend":return gW(e);case"keypress":return e.which!==32?null:(w2=!0,B2);case"textInput":return n=e.data,n===B2&&w2?null:n;default:return null}}function z6(n,e){if(ed)return n==="compositionend"||!d_&&pW(n,e)?(n=dW(),Vy=c_=gl=null,ed=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hW&&e.locale!=="ko"?null:e.data;default:return null}}var X6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!X6[n.type]:e==="textarea"}function mW(n,e,t,r){XP(r),e=TB(e,"onChange"),0<e.length&&(t=new u_("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var _g=null,im=null;function Y6(n){UW(n,0)}function CC(n){var e=rd(n);if(WP(e))return n}function K6(n,e){if(n==="change")return e}var vW=!1;if(bA){var cx;if(bA){var ux="oninput"in document;if(!ux){var b2=document.createElement("div");b2.setAttribute("oninput","return;"),ux=typeof b2.oninput=="function"}cx=ux}else cx=!1;vW=cx&&(!document.documentMode||9<document.documentMode)}function x2(){_g&&(_g.detachEvent("onpropertychange",yW),im=_g=null)}function yW(n){if(n.propertyName==="value"&&CC(im)){var e=[];mW(e,im,n,s_(n)),$P(Y6,e)}}function j6(n,e,t){n==="focusin"?(x2(),_g=e,im=t,_g.attachEvent("onpropertychange",yW)):n==="focusout"&&x2()}function $6(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return CC(im)}function q6(n,e){if(n==="click")return CC(e)}function e8(n,e){if(n==="input"||n==="change")return CC(e)}function t8(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Do=typeof Object.is=="function"?Object.is:t8;function sm(n,e){if(Do(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!aF.call(e,i)||!Do(n[i],e[i]))return!1}return!0}function I2(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function F2(n,e){var t=I2(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=I2(t)}}function BW(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?BW(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function wW(){for(var n=window,e=EB();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=EB(n.document)}return e}function h_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function n8(n){var e=wW(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&BW(t.ownerDocument.documentElement,t)){if(r!==null&&h_(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=F2(t,s);var o=F2(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var r8=bA&&"documentMode"in document&&11>=document.documentMode,td=null,FF=null,Sg=null,EF=!1;function E2(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;EF||td==null||td!==EB(r)||(r=td,"selectionStart"in r&&h_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sg&&sm(Sg,r)||(Sg=r,r=TB(FF,"onSelect"),0<r.length&&(e=new u_("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=td)))}function G0(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var nd={animationend:G0("Animation","AnimationEnd"),animationiteration:G0("Animation","AnimationIteration"),animationstart:G0("Animation","AnimationStart"),transitionend:G0("Transition","TransitionEnd")},fx={},CW={};bA&&(CW=document.createElement("div").style,"AnimationEvent"in window||(delete nd.animationend.animation,delete nd.animationiteration.animation,delete nd.animationstart.animation),"TransitionEvent"in window||delete nd.transitionend.transition);function bC(n){if(fx[n])return fx[n];if(!nd[n])return n;var e=nd[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in CW)return fx[n]=e[t];return n}var bW=bC("animationend"),xW=bC("animationiteration"),IW=bC("animationstart"),FW=bC("transitionend"),EW=new Map,U2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rc(n,e){EW.set(n,e),yu(e,[n])}for(var dx=0;dx<U2.length;dx++){var hx=U2[dx],i8=hx.toLowerCase(),s8=hx[0].toUpperCase()+hx.slice(1);rc(i8,"on"+s8)}rc(bW,"onAnimationEnd");rc(xW,"onAnimationIteration");rc(IW,"onAnimationStart");rc("dblclick","onDoubleClick");rc("focusin","onFocus");rc("focusout","onBlur");rc(FW,"onTransitionEnd");Yd("onMouseEnter",["mouseout","mouseover"]);Yd("onMouseLeave",["mouseout","mouseover"]);Yd("onPointerEnter",["pointerout","pointerover"]);Yd("onPointerLeave",["pointerout","pointerover"]);yu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yu("onBeforeInput",["compositionend","keypress","textInput","paste"]);yu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ig="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o8=new Set("cancel close invalid load scroll toggle".split(" ").concat(ig));function _2(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,i6(r,e,void 0,n),n.currentTarget=null}function UW(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],A=a.instance,l=a.currentTarget;if(a=a.listener,A!==s&&i.isPropagationStopped())break e;_2(i,a,l),s=A}else for(o=0;o<r.length;o++){if(a=r[o],A=a.instance,l=a.currentTarget,a=a.listener,A!==s&&i.isPropagationStopped())break e;_2(i,a,l),s=A}}}if(_B)throw n=CF,_B=!1,CF=null,n}function ln(n,e){var t=e[RF];t===void 0&&(t=e[RF]=new Set);var r=n+"__bubble";t.has(r)||(_W(e,n,2,!1),t.add(r))}function px(n,e,t){var r=0;e&&(r|=4),_W(t,n,r,e)}var J0="_reactListening"+Math.random().toString(36).slice(2);function om(n){if(!n[J0]){n[J0]=!0,kP.forEach(function(t){t!=="selectionchange"&&(o8.has(t)||px(t,!1,n),px(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[J0]||(e[J0]=!0,px("selectionchange",!1,e))}}function _W(n,e,t,r){switch(fW(e)){case 1:var i=B6;break;case 4:i=w6;break;default:i=l_}t=i.bind(null,e,t,n),i=void 0,!wF||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function gx(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var A=o.tag;if((A===3||A===4)&&(A=o.stateNode.containerInfo,A===i||A.nodeType===8&&A.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Nc(a),o===null)return;if(A=o.tag,A===5||A===6){r=s=o;continue e}a=a.parentNode}}r=r.return}$P(function(){var l=s,c=s_(t),u=[];e:{var f=EW.get(n);if(f!==void 0){var d=u_,h=n;switch(n){case"keypress":if(Ly(t)===0)break e;case"keydown":case"keyup":d=k6;break;case"focusin":h="focus",d=lx;break;case"focusout":h="blur",d=lx;break;case"beforeblur":case"afterblur":d=lx;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=m2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=x6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=L6;break;case bW:case xW:case IW:d=E6;break;case FW:d=W6;break;case"scroll":d=C6;break;case"wheel":d=Z6;break;case"copy":case"cut":case"paste":d=_6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=y2}var p=(e&4)!==0,m=!p&&n==="scroll",g=p?f!==null?f+"Capture":null:f;p=[];for(var v=l,y;v!==null;){y=v;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,g!==null&&(w=em(v,g),w!=null&&p.push(am(v,w,y)))),m)break;v=v.return}0<p.length&&(f=new d(f,h,null,t,c),u.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",d=n==="mouseout"||n==="pointerout",f&&t!==yF&&(h=t.relatedTarget||t.fromElement)&&(Nc(h)||h[xA]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(h=t.relatedTarget||t.toElement,d=l,h=h?Nc(h):null,h!==null&&(m=Bu(h),h!==m||h.tag!==5&&h.tag!==6)&&(h=null)):(d=null,h=l),d!==h)){if(p=m2,w="onMouseLeave",g="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(p=y2,w="onPointerLeave",g="onPointerEnter",v="pointer"),m=d==null?f:rd(d),y=h==null?f:rd(h),f=new p(w,v+"leave",d,t,c),f.target=m,f.relatedTarget=y,w=null,Nc(c)===l&&(p=new p(g,v+"enter",h,t,c),p.target=y,p.relatedTarget=m,w=p),m=w,d&&h)t:{for(p=d,g=h,v=0,y=p;y;y=Du(y))v++;for(y=0,w=g;w;w=Du(w))y++;for(;0<v-y;)p=Du(p),v--;for(;0<y-v;)g=Du(g),y--;for(;v--;){if(p===g||g!==null&&p===g.alternate)break t;p=Du(p),g=Du(g)}p=null}else p=null;d!==null&&S2(u,f,d,p,!1),h!==null&&m!==null&&S2(u,m,h,p,!0)}}e:{if(f=l?rd(l):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var C=K6;else if(C2(f))if(vW)C=e8;else{C=$6;var b=j6}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=q6);if(C&&(C=C(n,l))){mW(u,C,t,c);break e}b&&b(n,f,l),n==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&hF(f,"number",f.value)}switch(b=l?rd(l):window,n){case"focusin":(C2(b)||b.contentEditable==="true")&&(td=b,FF=l,Sg=null);break;case"focusout":Sg=FF=td=null;break;case"mousedown":EF=!0;break;case"contextmenu":case"mouseup":case"dragend":EF=!1,E2(u,t,c);break;case"selectionchange":if(r8)break;case"keydown":case"keyup":E2(u,t,c)}var F;if(d_)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ed?pW(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(hW&&t.locale!=="ko"&&(ed||I!=="onCompositionStart"?I==="onCompositionEnd"&&ed&&(F=dW()):(gl=c,c_="value"in gl?gl.value:gl.textContent,ed=!0)),b=TB(l,I),0<b.length&&(I=new v2(I,n,null,t,c),u.push({event:I,listeners:b}),F?I.data=F:(F=gW(t),F!==null&&(I.data=F)))),(F=J6?H6(n,t):z6(n,t))&&(l=TB(l,"onBeforeInput"),0<l.length&&(c=new v2("onBeforeInput","beforeinput",null,t,c),u.push({event:c,listeners:l}),c.data=F))}UW(u,e)})}function am(n,e,t){return{instance:n,listener:e,currentTarget:t}}function TB(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=em(n,t),s!=null&&r.unshift(am(n,s,i)),s=em(n,e),s!=null&&r.push(am(n,s,i))),n=n.return}return r}function Du(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function S2(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,A=a.alternate,l=a.stateNode;if(A!==null&&A===r)break;a.tag===5&&l!==null&&(a=l,i?(A=em(t,s),A!=null&&o.unshift(am(t,A,a))):i||(A=em(t,s),A!=null&&o.push(am(t,A,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var a8=/\r\n?/g,A8=/\u0000|\uFFFD/g;function Q2(n){return(typeof n=="string"?n:""+n).replace(a8,`
`).replace(A8,"")}function H0(n,e,t){if(e=Q2(e),Q2(n)!==e&&t)throw Error(Re(425))}function NB(){}var UF=null,_F=null;function SF(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var QF=typeof setTimeout=="function"?setTimeout:void 0,l8=typeof clearTimeout=="function"?clearTimeout:void 0,R2=typeof Promise=="function"?Promise:void 0,c8=typeof queueMicrotask=="function"?queueMicrotask:typeof R2<"u"?function(n){return R2.resolve(null).then(n).catch(u8)}:QF;function u8(n){setTimeout(function(){throw n})}function mx(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),rm(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);rm(e)}function _l(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function M2(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var _h=Math.random().toString(36).slice(2),sa="__reactFiber$"+_h,Am="__reactProps$"+_h,xA="__reactContainer$"+_h,RF="__reactEvents$"+_h,f8="__reactListeners$"+_h,d8="__reactHandles$"+_h;function Nc(n){var e=n[sa];if(e)return e;for(var t=n.parentNode;t;){if(e=t[xA]||t[sa]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=M2(n);n!==null;){if(t=n[sa])return t;n=M2(n)}return e}n=t,t=n.parentNode}return null}function n0(n){return n=n[sa]||n[xA],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function rd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Re(33))}function xC(n){return n[Am]||null}var MF=[],id=-1;function ic(n){return{current:n}}function dn(n){0>id||(n.current=MF[id],MF[id]=null,id--)}function an(n,e){id++,MF[id]=n.current,n.current=e}var Gl={},Yr=ic(Gl),Fi=ic(!1),ru=Gl;function Kd(n,e){var t=n.type.contextTypes;if(!t)return Gl;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ei(n){return n=n.childContextTypes,n!=null}function kB(){dn(Fi),dn(Yr)}function T2(n,e,t){if(Yr.current!==Gl)throw Error(Re(168));an(Yr,e),an(Fi,t)}function SW(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Re(108,jK(n)||"Unknown",i));return En({},t,r)}function DB(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Gl,ru=Yr.current,an(Yr,n),an(Fi,Fi.current),!0}function N2(n,e,t){var r=n.stateNode;if(!r)throw Error(Re(169));t?(n=SW(n,e,ru),r.__reactInternalMemoizedMergedChildContext=n,dn(Fi),dn(Yr),an(Yr,n)):dn(Fi),an(Fi,t)}var aA=null,IC=!1,vx=!1;function QW(n){aA===null?aA=[n]:aA.push(n)}function h8(n){IC=!0,QW(n)}function sc(){if(!vx&&aA!==null){vx=!0;var n=0,e=Kt;try{var t=aA;for(Kt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}aA=null,IC=!1}catch(i){throw aA!==null&&(aA=aA.slice(n+1)),nW(o_,sc),i}finally{Kt=e,vx=!1}}return null}var sd=[],od=0,VB=null,LB=0,Ss=[],Qs=0,iu=null,fA=1,dA="";function Ic(n,e){sd[od++]=LB,sd[od++]=VB,VB=n,LB=e}function RW(n,e,t){Ss[Qs++]=fA,Ss[Qs++]=dA,Ss[Qs++]=iu,iu=n;var r=fA;n=dA;var i=32-Ro(r)-1;r&=~(1<<i),t+=1;var s=32-Ro(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,fA=1<<32-Ro(e)+i|t<<i|r,dA=s+n}else fA=1<<s|t<<i|r,dA=n}function p_(n){n.return!==null&&(Ic(n,1),RW(n,1,0))}function g_(n){for(;n===VB;)VB=sd[--od],sd[od]=null,LB=sd[--od],sd[od]=null;for(;n===iu;)iu=Ss[--Qs],Ss[Qs]=null,dA=Ss[--Qs],Ss[Qs]=null,fA=Ss[--Qs],Ss[Qs]=null}var as=null,rs=null,mn=!1,_o=null;function MW(n,e){var t=Ns(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function k2(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,as=n,rs=_l(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,as=n,rs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=iu!==null?{id:fA,overflow:dA}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ns(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,as=n,rs=null,!0):!1;default:return!1}}function TF(n){return(n.mode&1)!==0&&(n.flags&128)===0}function NF(n){if(mn){var e=rs;if(e){var t=e;if(!k2(n,e)){if(TF(n))throw Error(Re(418));e=_l(t.nextSibling);var r=as;e&&k2(n,e)?MW(r,t):(n.flags=n.flags&-4097|2,mn=!1,as=n)}}else{if(TF(n))throw Error(Re(418));n.flags=n.flags&-4097|2,mn=!1,as=n}}}function D2(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;as=n}function z0(n){if(n!==as)return!1;if(!mn)return D2(n),mn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!SF(n.type,n.memoizedProps)),e&&(e=rs)){if(TF(n))throw TW(),Error(Re(418));for(;e;)MW(n,e),e=_l(e.nextSibling)}if(D2(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Re(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){rs=_l(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}rs=null}}else rs=as?_l(n.stateNode.nextSibling):null;return!0}function TW(){for(var n=rs;n;)n=_l(n.nextSibling)}function jd(){rs=as=null,mn=!1}function m_(n){_o===null?_o=[n]:_o.push(n)}var p8=TA.ReactCurrentBatchConfig;function Fo(n,e){if(n&&n.defaultProps){e=En({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var PB=ic(null),WB=null,ad=null,v_=null;function y_(){v_=ad=WB=null}function B_(n){var e=PB.current;dn(PB),n._currentValue=e}function kF(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ed(n,e){WB=n,v_=ad=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(xi=!0),n.firstContext=null)}function zs(n){var e=n._currentValue;if(v_!==n)if(n={context:n,memoizedValue:e,next:null},ad===null){if(WB===null)throw Error(Re(308));ad=n,WB.dependencies={lanes:0,firstContext:n}}else ad=ad.next=n;return e}var kc=null;function w_(n){kc===null?kc=[n]:kc.push(n)}function NW(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,w_(e)):(t.next=i.next,i.next=t),e.interleaved=t,IA(n,r)}function IA(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var al=!1;function C_(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kW(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function vA(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Sl(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Lt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,IA(n,t)}return i=r.interleaved,i===null?(e.next=e,w_(r)):(e.next=i.next,i.next=e),r.interleaved=e,IA(n,t)}function Py(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,a_(n,t)}}function V2(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function OB(n,e,t,r){var i=n.updateQueue;al=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var A=a,l=A.next;A.next=null,o===null?s=l:o.next=l,o=A;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=A))}if(s!==null){var u=i.baseState;o=0,c=l=A=null,a=s;do{var f=a.lane,d=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=n,p=a;switch(f=e,d=t,p.tag){case 1:if(h=p.payload,typeof h=="function"){u=h.call(d,u,f);break e}u=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=p.payload,f=typeof h=="function"?h.call(d,u,f):h,f==null)break e;u=En({},u,f);break e;case 2:al=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=d,A=u):c=c.next=d,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(c===null&&(A=u),i.baseState=A,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ou|=o,n.lanes=o,n.memoizedState=u}}function L2(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Re(191,i));i.call(r)}}}var DW=new NP.Component().refs;function DF(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:En({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var FC={isMounted:function(n){return(n=n._reactInternals)?Bu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=li(),i=Rl(n),s=vA(r,i);s.payload=e,t!=null&&(s.callback=t),e=Sl(n,s,i),e!==null&&(Mo(e,n,i,r),Py(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=li(),i=Rl(n),s=vA(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Sl(n,s,i),e!==null&&(Mo(e,n,i,r),Py(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=li(),r=Rl(n),i=vA(t,r);i.tag=2,e!=null&&(i.callback=e),e=Sl(n,i,r),e!==null&&(Mo(e,n,r,t),Py(e,n,r))}};function P2(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!sm(t,r)||!sm(i,s):!0}function VW(n,e,t){var r=!1,i=Gl,s=e.contextType;return typeof s=="object"&&s!==null?s=zs(s):(i=Ei(e)?ru:Yr.current,r=e.contextTypes,s=(r=r!=null)?Kd(n,i):Gl),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=FC,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function W2(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&FC.enqueueReplaceState(e,e.state,null)}function VF(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=DW,C_(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=zs(s):(s=Ei(e)?ru:Yr.current,i.context=Kd(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(DF(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&FC.enqueueReplaceState(i,i.state,null),OB(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function vp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Re(309));var r=t.stateNode}if(!r)throw Error(Re(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===DW&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Re(284));if(!t._owner)throw Error(Re(290,n))}return n}function X0(n,e){throw n=Object.prototype.toString.call(e),Error(Re(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function O2(n){var e=n._init;return e(n._payload)}function LW(n){function e(g,v){if(n){var y=g.deletions;y===null?(g.deletions=[v],g.flags|=16):y.push(v)}}function t(g,v){if(!n)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=Ml(g,v),g.index=0,g.sibling=null,g}function s(g,v,y){return g.index=y,n?(y=g.alternate,y!==null?(y=y.index,y<v?(g.flags|=2,v):y):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,v,y,w){return v===null||v.tag!==6?(v=Ix(y,g.mode,w),v.return=g,v):(v=i(v,y),v.return=g,v)}function A(g,v,y,w){var C=y.type;return C===qf?c(g,v,y.props.children,w,y.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ol&&O2(C)===v.type)?(w=i(v,y.props),w.ref=vp(g,v,y),w.return=g,w):(w=Hy(y.type,y.key,y.props,null,g.mode,w),w.ref=vp(g,v,y),w.return=g,w)}function l(g,v,y,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=Fx(y,g.mode,w),v.return=g,v):(v=i(v,y.children||[]),v.return=g,v)}function c(g,v,y,w,C){return v===null||v.tag!==7?(v=zc(y,g.mode,w,C),v.return=g,v):(v=i(v,y),v.return=g,v)}function u(g,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ix(""+v,g.mode,y),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case D0:return y=Hy(v.type,v.key,v.props,null,g.mode,y),y.ref=vp(g,null,v),y.return=g,y;case $f:return v=Fx(v,g.mode,y),v.return=g,v;case ol:var w=v._init;return u(g,w(v._payload),y)}if(ng(v)||dp(v))return v=zc(v,g.mode,y,null),v.return=g,v;X0(g,v)}return null}function f(g,v,y,w){var C=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return C!==null?null:a(g,v,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case D0:return y.key===C?A(g,v,y,w):null;case $f:return y.key===C?l(g,v,y,w):null;case ol:return C=y._init,f(g,v,C(y._payload),w)}if(ng(y)||dp(y))return C!==null?null:c(g,v,y,w,null);X0(g,y)}return null}function d(g,v,y,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(y)||null,a(v,g,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case D0:return g=g.get(w.key===null?y:w.key)||null,A(v,g,w,C);case $f:return g=g.get(w.key===null?y:w.key)||null,l(v,g,w,C);case ol:var b=w._init;return d(g,v,y,b(w._payload),C)}if(ng(w)||dp(w))return g=g.get(y)||null,c(v,g,w,C,null);X0(v,w)}return null}function h(g,v,y,w){for(var C=null,b=null,F=v,I=v=0,S=null;F!==null&&I<y.length;I++){F.index>I?(S=F,F=null):S=F.sibling;var T=f(g,F,y[I],w);if(T===null){F===null&&(F=S);break}n&&F&&T.alternate===null&&e(g,F),v=s(T,v,I),b===null?C=T:b.sibling=T,b=T,F=S}if(I===y.length)return t(g,F),mn&&Ic(g,I),C;if(F===null){for(;I<y.length;I++)F=u(g,y[I],w),F!==null&&(v=s(F,v,I),b===null?C=F:b.sibling=F,b=F);return mn&&Ic(g,I),C}for(F=r(g,F);I<y.length;I++)S=d(F,g,I,y[I],w),S!==null&&(n&&S.alternate!==null&&F.delete(S.key===null?I:S.key),v=s(S,v,I),b===null?C=S:b.sibling=S,b=S);return n&&F.forEach(function(H){return e(g,H)}),mn&&Ic(g,I),C}function p(g,v,y,w){var C=dp(y);if(typeof C!="function")throw Error(Re(150));if(y=C.call(y),y==null)throw Error(Re(151));for(var b=C=null,F=v,I=v=0,S=null,T=y.next();F!==null&&!T.done;I++,T=y.next()){F.index>I?(S=F,F=null):S=F.sibling;var H=f(g,F,T.value,w);if(H===null){F===null&&(F=S);break}n&&F&&H.alternate===null&&e(g,F),v=s(H,v,I),b===null?C=H:b.sibling=H,b=H,F=S}if(T.done)return t(g,F),mn&&Ic(g,I),C;if(F===null){for(;!T.done;I++,T=y.next())T=u(g,T.value,w),T!==null&&(v=s(T,v,I),b===null?C=T:b.sibling=T,b=T);return mn&&Ic(g,I),C}for(F=r(g,F);!T.done;I++,T=y.next())T=d(F,g,I,T.value,w),T!==null&&(n&&T.alternate!==null&&F.delete(T.key===null?I:T.key),v=s(T,v,I),b===null?C=T:b.sibling=T,b=T);return n&&F.forEach(function(X){return e(g,X)}),mn&&Ic(g,I),C}function m(g,v,y,w){if(typeof y=="object"&&y!==null&&y.type===qf&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case D0:e:{for(var C=y.key,b=v;b!==null;){if(b.key===C){if(C=y.type,C===qf){if(b.tag===7){t(g,b.sibling),v=i(b,y.props.children),v.return=g,g=v;break e}}else if(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ol&&O2(C)===b.type){t(g,b.sibling),v=i(b,y.props),v.ref=vp(g,b,y),v.return=g,g=v;break e}t(g,b);break}else e(g,b);b=b.sibling}y.type===qf?(v=zc(y.props.children,g.mode,w,y.key),v.return=g,g=v):(w=Hy(y.type,y.key,y.props,null,g.mode,w),w.ref=vp(g,v,y),w.return=g,g=w)}return o(g);case $f:e:{for(b=y.key;v!==null;){if(v.key===b)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){t(g,v.sibling),v=i(v,y.children||[]),v.return=g,g=v;break e}else{t(g,v);break}else e(g,v);v=v.sibling}v=Fx(y,g.mode,w),v.return=g,g=v}return o(g);case ol:return b=y._init,m(g,v,b(y._payload),w)}if(ng(y))return h(g,v,y,w);if(dp(y))return p(g,v,y,w);X0(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(t(g,v.sibling),v=i(v,y),v.return=g,g=v):(t(g,v),v=Ix(y,g.mode,w),v.return=g,g=v),o(g)):t(g,v)}return m}var $d=LW(!0),PW=LW(!1),r0={},ma=ic(r0),lm=ic(r0),cm=ic(r0);function Dc(n){if(n===r0)throw Error(Re(174));return n}function b_(n,e){switch(an(cm,e),an(lm,n),an(ma,r0),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gF(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=gF(e,n)}dn(ma),an(ma,e)}function qd(){dn(ma),dn(lm),dn(cm)}function WW(n){Dc(cm.current);var e=Dc(ma.current),t=gF(e,n.type);e!==t&&(an(lm,n),an(ma,t))}function x_(n){lm.current===n&&(dn(ma),dn(lm))}var Cn=ic(0);function ZB(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yx=[];function I_(){for(var n=0;n<yx.length;n++)yx[n]._workInProgressVersionPrimary=null;yx.length=0}var Wy=TA.ReactCurrentDispatcher,Bx=TA.ReactCurrentBatchConfig,su=0,Fn=null,ir=null,pr=null,GB=!1,Qg=!1,um=0,g8=0;function kr(){throw Error(Re(321))}function F_(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Do(n[t],e[t]))return!1;return!0}function E_(n,e,t,r,i,s){if(su=s,Fn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wy.current=n===null||n.memoizedState===null?B8:w8,n=t(r,i),Qg){s=0;do{if(Qg=!1,um=0,25<=s)throw Error(Re(301));s+=1,pr=ir=null,e.updateQueue=null,Wy.current=C8,n=t(r,i)}while(Qg)}if(Wy.current=JB,e=ir!==null&&ir.next!==null,su=0,pr=ir=Fn=null,GB=!1,e)throw Error(Re(300));return n}function U_(){var n=um!==0;return um=0,n}function qo(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?Fn.memoizedState=pr=n:pr=pr.next=n,pr}function Xs(){if(ir===null){var n=Fn.alternate;n=n!==null?n.memoizedState:null}else n=ir.next;var e=pr===null?Fn.memoizedState:pr.next;if(e!==null)pr=e,ir=n;else{if(n===null)throw Error(Re(310));ir=n,n={memoizedState:ir.memoizedState,baseState:ir.baseState,baseQueue:ir.baseQueue,queue:ir.queue,next:null},pr===null?Fn.memoizedState=pr=n:pr=pr.next=n}return pr}function fm(n,e){return typeof e=="function"?e(n):e}function wx(n){var e=Xs(),t=e.queue;if(t===null)throw Error(Re(311));t.lastRenderedReducer=n;var r=ir,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,A=null,l=s;do{var c=l.lane;if((su&c)===c)A!==null&&(A=A.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:n(r,l.action);else{var u={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};A===null?(a=A=u,o=r):A=A.next=u,Fn.lanes|=c,ou|=c}l=l.next}while(l!==null&&l!==s);A===null?o=r:A.next=a,Do(r,e.memoizedState)||(xi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=A,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Fn.lanes|=s,ou|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Cx(n){var e=Xs(),t=e.queue;if(t===null)throw Error(Re(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Do(s,e.memoizedState)||(xi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function OW(){}function ZW(n,e){var t=Fn,r=Xs(),i=e(),s=!Do(r.memoizedState,i);if(s&&(r.memoizedState=i,xi=!0),r=r.queue,__(HW.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||pr!==null&&pr.memoizedState.tag&1){if(t.flags|=2048,dm(9,JW.bind(null,t,r,i,e),void 0,null),yr===null)throw Error(Re(349));su&30||GW(t,e,i)}return i}function GW(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Fn.updateQueue,e===null?(e={lastEffect:null,stores:null},Fn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function JW(n,e,t,r){e.value=t,e.getSnapshot=r,zW(e)&&XW(n)}function HW(n,e,t){return t(function(){zW(e)&&XW(n)})}function zW(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Do(n,t)}catch{return!0}}function XW(n){var e=IA(n,1);e!==null&&Mo(e,n,1,-1)}function Z2(n){var e=qo();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fm,lastRenderedState:n},e.queue=n,n=n.dispatch=y8.bind(null,Fn,n),[e.memoizedState,n]}function dm(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Fn.updateQueue,e===null?(e={lastEffect:null,stores:null},Fn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function YW(){return Xs().memoizedState}function Oy(n,e,t,r){var i=qo();Fn.flags|=n,i.memoizedState=dm(1|e,t,void 0,r===void 0?null:r)}function EC(n,e,t,r){var i=Xs();r=r===void 0?null:r;var s=void 0;if(ir!==null){var o=ir.memoizedState;if(s=o.destroy,r!==null&&F_(r,o.deps)){i.memoizedState=dm(e,t,s,r);return}}Fn.flags|=n,i.memoizedState=dm(1|e,t,s,r)}function G2(n,e){return Oy(8390656,8,n,e)}function __(n,e){return EC(2048,8,n,e)}function KW(n,e){return EC(4,2,n,e)}function jW(n,e){return EC(4,4,n,e)}function $W(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function qW(n,e,t){return t=t!=null?t.concat([n]):null,EC(4,4,$W.bind(null,e,n),t)}function S_(){}function eO(n,e){var t=Xs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&F_(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function tO(n,e){var t=Xs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&F_(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function nO(n,e,t){return su&21?(Do(t,e)||(t=sW(),Fn.lanes|=t,ou|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,xi=!0),n.memoizedState=t)}function m8(n,e){var t=Kt;Kt=t!==0&&4>t?t:4,n(!0);var r=Bx.transition;Bx.transition={};try{n(!1),e()}finally{Kt=t,Bx.transition=r}}function rO(){return Xs().memoizedState}function v8(n,e,t){var r=Rl(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},iO(n))sO(e,t);else if(t=NW(n,e,t,r),t!==null){var i=li();Mo(t,n,r,i),oO(t,e,r)}}function y8(n,e,t){var r=Rl(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(iO(n))sO(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Do(a,o)){var A=e.interleaved;A===null?(i.next=i,w_(e)):(i.next=A.next,A.next=i),e.interleaved=i;return}}catch{}finally{}t=NW(n,e,i,r),t!==null&&(i=li(),Mo(t,n,r,i),oO(t,e,r))}}function iO(n){var e=n.alternate;return n===Fn||e!==null&&e===Fn}function sO(n,e){Qg=GB=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function oO(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,a_(n,t)}}var JB={readContext:zs,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useInsertionEffect:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useSyncExternalStore:kr,useId:kr,unstable_isNewReconciler:!1},B8={readContext:zs,useCallback:function(n,e){return qo().memoizedState=[n,e===void 0?null:e],n},useContext:zs,useEffect:G2,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Oy(4194308,4,$W.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Oy(4194308,4,n,e)},useInsertionEffect:function(n,e){return Oy(4,2,n,e)},useMemo:function(n,e){var t=qo();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=qo();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=v8.bind(null,Fn,n),[r.memoizedState,n]},useRef:function(n){var e=qo();return n={current:n},e.memoizedState=n},useState:Z2,useDebugValue:S_,useDeferredValue:function(n){return qo().memoizedState=n},useTransition:function(){var n=Z2(!1),e=n[0];return n=m8.bind(null,n[1]),qo().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Fn,i=qo();if(mn){if(t===void 0)throw Error(Re(407));t=t()}else{if(t=e(),yr===null)throw Error(Re(349));su&30||GW(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,G2(HW.bind(null,r,s,n),[n]),r.flags|=2048,dm(9,JW.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=qo(),e=yr.identifierPrefix;if(mn){var t=dA,r=fA;t=(r&~(1<<32-Ro(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=um++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=g8++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},w8={readContext:zs,useCallback:eO,useContext:zs,useEffect:__,useImperativeHandle:qW,useInsertionEffect:KW,useLayoutEffect:jW,useMemo:tO,useReducer:wx,useRef:YW,useState:function(){return wx(fm)},useDebugValue:S_,useDeferredValue:function(n){var e=Xs();return nO(e,ir.memoizedState,n)},useTransition:function(){var n=wx(fm)[0],e=Xs().memoizedState;return[n,e]},useMutableSource:OW,useSyncExternalStore:ZW,useId:rO,unstable_isNewReconciler:!1},C8={readContext:zs,useCallback:eO,useContext:zs,useEffect:__,useImperativeHandle:qW,useInsertionEffect:KW,useLayoutEffect:jW,useMemo:tO,useReducer:Cx,useRef:YW,useState:function(){return Cx(fm)},useDebugValue:S_,useDeferredValue:function(n){var e=Xs();return ir===null?e.memoizedState=n:nO(e,ir.memoizedState,n)},useTransition:function(){var n=Cx(fm)[0],e=Xs().memoizedState;return[n,e]},useMutableSource:OW,useSyncExternalStore:ZW,useId:rO,unstable_isNewReconciler:!1};function eh(n,e){try{var t="",r=e;do t+=KK(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function bx(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function LF(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var b8=typeof WeakMap=="function"?WeakMap:Map;function aO(n,e,t){t=vA(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){zB||(zB=!0,YF=r),LF(n,e)},t}function AO(n,e,t){t=vA(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){LF(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){LF(n,e),typeof r!="function"&&(Ql===null?Ql=new Set([this]):Ql.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function J2(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new b8;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=D8.bind(null,n,e,t),e.then(n,n))}function H2(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function z2(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=vA(-1,1),e.tag=2,Sl(t,e,1))),t.lanes|=1),n)}var x8=TA.ReactCurrentOwner,xi=!1;function ni(n,e,t,r){e.child=n===null?PW(e,null,t,r):$d(e,n.child,t,r)}function X2(n,e,t,r,i){t=t.render;var s=e.ref;return Ed(e,i),r=E_(n,e,t,r,s,i),t=U_(),n!==null&&!xi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,FA(n,e,i)):(mn&&t&&p_(e),e.flags|=1,ni(n,e,r,i),e.child)}function Y2(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!V_(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,lO(n,e,s,r,i)):(n=Hy(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:sm,t(o,r)&&n.ref===e.ref)return FA(n,e,i)}return e.flags|=1,n=Ml(s,r),n.ref=e.ref,n.return=e,e.child=n}function lO(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(sm(s,r)&&n.ref===e.ref)if(xi=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(xi=!0);else return e.lanes=n.lanes,FA(n,e,i)}return PF(n,e,t,r,i)}function cO(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(ld,Yi),Yi|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,an(ld,Yi),Yi|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,an(ld,Yi),Yi|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,an(ld,Yi),Yi|=r;return ni(n,e,i,t),e.child}function uO(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function PF(n,e,t,r,i){var s=Ei(t)?ru:Yr.current;return s=Kd(e,s),Ed(e,i),t=E_(n,e,t,r,s,i),r=U_(),n!==null&&!xi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,FA(n,e,i)):(mn&&r&&p_(e),e.flags|=1,ni(n,e,t,i),e.child)}function K2(n,e,t,r,i){if(Ei(t)){var s=!0;DB(e)}else s=!1;if(Ed(e,i),e.stateNode===null)Zy(n,e),VW(e,t,r),VF(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var A=o.context,l=t.contextType;typeof l=="object"&&l!==null?l=zs(l):(l=Ei(t)?ru:Yr.current,l=Kd(e,l));var c=t.getDerivedStateFromProps,u=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||A!==l)&&W2(e,o,r,l),al=!1;var f=e.memoizedState;o.state=f,OB(e,r,o,i),A=e.memoizedState,a!==r||f!==A||Fi.current||al?(typeof c=="function"&&(DF(e,t,c,r),A=e.memoizedState),(a=al||P2(e,t,a,r,f,A,l))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,kW(n,e),a=e.memoizedProps,l=e.type===e.elementType?a:Fo(e.type,a),o.props=l,u=e.pendingProps,f=o.context,A=t.contextType,typeof A=="object"&&A!==null?A=zs(A):(A=Ei(t)?ru:Yr.current,A=Kd(e,A));var d=t.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||f!==A)&&W2(e,o,r,A),al=!1,f=e.memoizedState,o.state=f,OB(e,r,o,i);var h=e.memoizedState;a!==u||f!==h||Fi.current||al?(typeof d=="function"&&(DF(e,t,d,r),h=e.memoizedState),(l=al||P2(e,t,l,r,f,h,A)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,h,A),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,h,A)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),o.props=r,o.state=h,o.context=A,r=l):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return WF(n,e,t,r,s,i)}function WF(n,e,t,r,i,s){uO(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&N2(e,t,!1),FA(n,e,s);r=e.stateNode,x8.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=$d(e,n.child,null,s),e.child=$d(e,null,a,s)):ni(n,e,a,s),e.memoizedState=r.state,i&&N2(e,t,!0),e.child}function fO(n){var e=n.stateNode;e.pendingContext?T2(n,e.pendingContext,e.pendingContext!==e.context):e.context&&T2(n,e.context,!1),b_(n,e.containerInfo)}function j2(n,e,t,r,i){return jd(),m_(i),e.flags|=256,ni(n,e,t,r),e.child}var OF={dehydrated:null,treeContext:null,retryLane:0};function ZF(n){return{baseLanes:n,cachePool:null,transitions:null}}function dO(n,e,t){var r=e.pendingProps,i=Cn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),an(Cn,i&1),n===null)return NF(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=SC(o,r,0,null),n=zc(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=ZF(t),e.memoizedState=OF,n):Q_(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return I8(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var A={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=A,e.deletions=null):(r=Ml(i,A),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ml(a,s):(s=zc(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?ZF(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=OF,r}return s=n.child,n=s.sibling,r=Ml(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Q_(n,e){return e=SC({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Y0(n,e,t,r){return r!==null&&m_(r),$d(e,n.child,null,t),n=Q_(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function I8(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=bx(Error(Re(422))),Y0(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=SC({mode:"visible",children:r.children},i,0,null),s=zc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$d(e,n.child,null,o),e.child.memoizedState=ZF(o),e.memoizedState=OF,s);if(!(e.mode&1))return Y0(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Re(419)),r=bx(s,r,void 0),Y0(n,e,o,r)}if(a=(o&n.childLanes)!==0,xi||a){if(r=yr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,IA(n,i),Mo(r,n,i,-1))}return D_(),r=bx(Error(Re(421))),Y0(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=V8.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,rs=_l(i.nextSibling),as=e,mn=!0,_o=null,n!==null&&(Ss[Qs++]=fA,Ss[Qs++]=dA,Ss[Qs++]=iu,fA=n.id,dA=n.overflow,iu=e),e=Q_(e,r.children),e.flags|=4096,e)}function $2(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),kF(n.return,e,t)}function xx(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function hO(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ni(n,e,r.children,t),r=Cn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$2(n,t,e);else if(n.tag===19)$2(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(an(Cn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&ZB(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),xx(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&ZB(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}xx(e,!0,t,null,s);break;case"together":xx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zy(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function FA(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ou|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Re(153));if(e.child!==null){for(n=e.child,t=Ml(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ml(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function F8(n,e,t){switch(e.tag){case 3:fO(e),jd();break;case 5:WW(e);break;case 1:Ei(e.type)&&DB(e);break;case 4:b_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;an(PB,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(an(Cn,Cn.current&1),e.flags|=128,null):t&e.child.childLanes?dO(n,e,t):(an(Cn,Cn.current&1),n=FA(n,e,t),n!==null?n.sibling:null);an(Cn,Cn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return hO(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),an(Cn,Cn.current),r)break;return null;case 22:case 23:return e.lanes=0,cO(n,e,t)}return FA(n,e,t)}var pO,GF,gO,mO;pO=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};GF=function(){};gO=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Dc(ma.current);var s=null;switch(t){case"input":i=fF(n,i),r=fF(n,r),s=[];break;case"select":i=En({},i,{value:void 0}),r=En({},r,{value:void 0}),s=[];break;case"textarea":i=pF(n,i),r=pF(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=NB)}mF(t,r);var o;t=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&($g.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var A=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&A!==a&&(A!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||A&&A.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in A)A.hasOwnProperty(o)&&a[o]!==A[o]&&(t||(t={}),t[o]=A[o])}else t||(s||(s=[]),s.push(l,t)),t=A;else l==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,a=a?a.__html:void 0,A!=null&&a!==A&&(s=s||[]).push(l,A)):l==="children"?typeof A!="string"&&typeof A!="number"||(s=s||[]).push(l,""+A):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&($g.hasOwnProperty(l)?(A!=null&&l==="onScroll"&&ln("scroll",n),s||a===A||(s=[])):(s=s||[]).push(l,A))}t&&(s=s||[]).push("style",t);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};mO=function(n,e,t,r){t!==r&&(e.flags|=4)};function yp(n,e){if(!mn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Dr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function E8(n,e,t){var r=e.pendingProps;switch(g_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(e),null;case 1:return Ei(e.type)&&kB(),Dr(e),null;case 3:return r=e.stateNode,qd(),dn(Fi),dn(Yr),I_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(z0(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_o!==null&&($F(_o),_o=null))),GF(n,e),Dr(e),null;case 5:x_(e);var i=Dc(cm.current);if(t=e.type,n!==null&&e.stateNode!=null)gO(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Re(166));return Dr(e),null}if(n=Dc(ma.current),z0(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[sa]=e,r[Am]=s,n=(e.mode&1)!==0,t){case"dialog":ln("cancel",r),ln("close",r);break;case"iframe":case"object":case"embed":ln("load",r);break;case"video":case"audio":for(i=0;i<ig.length;i++)ln(ig[i],r);break;case"source":ln("error",r);break;case"img":case"image":case"link":ln("error",r),ln("load",r);break;case"details":ln("toggle",r);break;case"input":a2(r,s),ln("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ln("invalid",r);break;case"textarea":l2(r,s),ln("invalid",r)}mF(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&H0(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&H0(r.textContent,a,n),i=["children",""+a]):$g.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ln("scroll",r)}switch(t){case"input":V0(r),A2(r,s,!0);break;case"textarea":V0(r),c2(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=NB)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=GP(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[sa]=e,n[Am]=r,pO(n,e,!1,!1),e.stateNode=n;e:{switch(o=vF(t,r),t){case"dialog":ln("cancel",n),ln("close",n),i=r;break;case"iframe":case"object":case"embed":ln("load",n),i=r;break;case"video":case"audio":for(i=0;i<ig.length;i++)ln(ig[i],n);i=r;break;case"source":ln("error",n),i=r;break;case"img":case"image":case"link":ln("error",n),ln("load",n),i=r;break;case"details":ln("toggle",n),i=r;break;case"input":a2(n,r),i=fF(n,r),ln("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=En({},r,{value:void 0}),ln("invalid",n);break;case"textarea":l2(n,r),i=pF(n,r),ln("invalid",n);break;default:i=r}mF(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var A=a[s];s==="style"?zP(n,A):s==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&JP(n,A)):s==="children"?typeof A=="string"?(t!=="textarea"||A!=="")&&qg(n,A):typeof A=="number"&&qg(n,""+A):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&($g.hasOwnProperty(s)?A!=null&&s==="onScroll"&&ln("scroll",n):A!=null&&t_(n,s,A,o))}switch(t){case"input":V0(n),A2(n,r,!1);break;case"textarea":V0(n),c2(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Zl(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?bd(n,!!r.multiple,s,!1):r.defaultValue!=null&&bd(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=NB)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dr(e),null;case 6:if(n&&e.stateNode!=null)mO(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Re(166));if(t=Dc(cm.current),Dc(ma.current),z0(e)){if(r=e.stateNode,t=e.memoizedProps,r[sa]=e,(s=r.nodeValue!==t)&&(n=as,n!==null))switch(n.tag){case 3:H0(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&H0(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[sa]=e,e.stateNode=r}return Dr(e),null;case 13:if(dn(Cn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(mn&&rs!==null&&e.mode&1&&!(e.flags&128))TW(),jd(),e.flags|=98560,s=!1;else if(s=z0(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Re(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Re(317));s[sa]=e}else jd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dr(e),s=!1}else _o!==null&&($F(_o),_o=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Cn.current&1?Ar===0&&(Ar=3):D_())),e.updateQueue!==null&&(e.flags|=4),Dr(e),null);case 4:return qd(),GF(n,e),n===null&&om(e.stateNode.containerInfo),Dr(e),null;case 10:return B_(e.type._context),Dr(e),null;case 17:return Ei(e.type)&&kB(),Dr(e),null;case 19:if(dn(Cn),s=e.memoizedState,s===null)return Dr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)yp(s,!1);else{if(Ar!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=ZB(n),o!==null){for(e.flags|=128,yp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return an(Cn,Cn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Zn()>th&&(e.flags|=128,r=!0,yp(s,!1),e.lanes=4194304)}else{if(!r)if(n=ZB(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),yp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!mn)return Dr(e),null}else 2*Zn()-s.renderingStartTime>th&&t!==1073741824&&(e.flags|=128,r=!0,yp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Zn(),e.sibling=null,t=Cn.current,an(Cn,r?t&1|2:t&1),e):(Dr(e),null);case 22:case 23:return k_(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yi&1073741824&&(Dr(e),e.subtreeFlags&6&&(e.flags|=8192)):Dr(e),null;case 24:return null;case 25:return null}throw Error(Re(156,e.tag))}function U8(n,e){switch(g_(e),e.tag){case 1:return Ei(e.type)&&kB(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return qd(),dn(Fi),dn(Yr),I_(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return x_(e),null;case 13:if(dn(Cn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Re(340));jd()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return dn(Cn),null;case 4:return qd(),null;case 10:return B_(e.type._context),null;case 22:case 23:return k_(),null;case 24:return null;default:return null}}var K0=!1,Zr=!1,_8=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Ad(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Rn(n,e,r)}else t.current=null}function JF(n,e,t){try{t()}catch(r){Rn(n,e,r)}}var q2=!1;function S8(n,e){if(UF=RB,n=wW(),h_(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,A=-1,l=0,c=0,u=n,f=null;t:for(;;){for(var d;u!==t||i!==0&&u.nodeType!==3||(a=o+i),u!==s||r!==0&&u.nodeType!==3||(A=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(d=u.firstChild)!==null;)f=u,u=d;for(;;){if(u===n)break t;if(f===t&&++l===i&&(a=o),f===s&&++c===r&&(A=o),(d=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=d}t=a===-1||A===-1?null:{start:a,end:A}}else t=null}t=t||{start:0,end:0}}else t=null;for(_F={focusedElem:n,selectionRange:t},RB=!1,Je=e;Je!==null;)if(e=Je,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Je=n;else for(;Je!==null;){e=Je;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var p=h.memoizedProps,m=h.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?p:Fo(e.type,p),m);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(w){Rn(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,Je=n;break}Je=e.return}return h=q2,q2=!1,h}function Rg(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&JF(e,t,s)}i=i.next}while(i!==r)}}function UC(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function HF(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function vO(n){var e=n.alternate;e!==null&&(n.alternate=null,vO(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[sa],delete e[Am],delete e[RF],delete e[f8],delete e[d8])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function yO(n){return n.tag===5||n.tag===3||n.tag===4}function eM(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||yO(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zF(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=NB));else if(r!==4&&(n=n.child,n!==null))for(zF(n,e,t),n=n.sibling;n!==null;)zF(n,e,t),n=n.sibling}function XF(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(XF(n,e,t),n=n.sibling;n!==null;)XF(n,e,t),n=n.sibling}var xr=null,Eo=!1;function OA(n,e,t){for(t=t.child;t!==null;)BO(n,e,t),t=t.sibling}function BO(n,e,t){if(ga&&typeof ga.onCommitFiberUnmount=="function")try{ga.onCommitFiberUnmount(BC,t)}catch{}switch(t.tag){case 5:Zr||Ad(t,e);case 6:var r=xr,i=Eo;xr=null,OA(n,e,t),xr=r,Eo=i,xr!==null&&(Eo?(n=xr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):xr.removeChild(t.stateNode));break;case 18:xr!==null&&(Eo?(n=xr,t=t.stateNode,n.nodeType===8?mx(n.parentNode,t):n.nodeType===1&&mx(n,t),rm(n)):mx(xr,t.stateNode));break;case 4:r=xr,i=Eo,xr=t.stateNode.containerInfo,Eo=!0,OA(n,e,t),xr=r,Eo=i;break;case 0:case 11:case 14:case 15:if(!Zr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&JF(t,e,o),i=i.next}while(i!==r)}OA(n,e,t);break;case 1:if(!Zr&&(Ad(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Rn(t,e,a)}OA(n,e,t);break;case 21:OA(n,e,t);break;case 22:t.mode&1?(Zr=(r=Zr)||t.memoizedState!==null,OA(n,e,t),Zr=r):OA(n,e,t);break;default:OA(n,e,t)}}function tM(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new _8),e.forEach(function(r){var i=L8.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function fo(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xr=a.stateNode,Eo=!1;break e;case 3:xr=a.stateNode.containerInfo,Eo=!0;break e;case 4:xr=a.stateNode.containerInfo,Eo=!0;break e}a=a.return}if(xr===null)throw Error(Re(160));BO(s,o,i),xr=null,Eo=!1;var A=i.alternate;A!==null&&(A.return=null),i.return=null}catch(l){Rn(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wO(e,n),e=e.sibling}function wO(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(fo(e,n),Go(n),r&4){try{Rg(3,n,n.return),UC(3,n)}catch(p){Rn(n,n.return,p)}try{Rg(5,n,n.return)}catch(p){Rn(n,n.return,p)}}break;case 1:fo(e,n),Go(n),r&512&&t!==null&&Ad(t,t.return);break;case 5:if(fo(e,n),Go(n),r&512&&t!==null&&Ad(t,t.return),n.flags&32){var i=n.stateNode;try{qg(i,"")}catch(p){Rn(n,n.return,p)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,A=n.updateQueue;if(n.updateQueue=null,A!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&OP(i,s),vF(a,o);var l=vF(a,s);for(o=0;o<A.length;o+=2){var c=A[o],u=A[o+1];c==="style"?zP(i,u):c==="dangerouslySetInnerHTML"?JP(i,u):c==="children"?qg(i,u):t_(i,c,u,l)}switch(a){case"input":dF(i,s);break;case"textarea":ZP(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?bd(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?bd(i,!!s.multiple,s.defaultValue,!0):bd(i,!!s.multiple,s.multiple?[]:"",!1))}i[Am]=s}catch(p){Rn(n,n.return,p)}}break;case 6:if(fo(e,n),Go(n),r&4){if(n.stateNode===null)throw Error(Re(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(p){Rn(n,n.return,p)}}break;case 3:if(fo(e,n),Go(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{rm(e.containerInfo)}catch(p){Rn(n,n.return,p)}break;case 4:fo(e,n),Go(n);break;case 13:fo(e,n),Go(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(T_=Zn())),r&4&&tM(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(Zr=(l=Zr)||c,fo(e,n),Zr=l):fo(e,n),Go(n),r&8192){if(l=n.memoizedState!==null,(n.stateNode.isHidden=l)&&!c&&n.mode&1)for(Je=n,c=n.child;c!==null;){for(u=Je=c;Je!==null;){switch(f=Je,d=f.child,f.tag){case 0:case 11:case 14:case 15:Rg(4,f,f.return);break;case 1:Ad(f,f.return);var h=f.stateNode;if(typeof h.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(p){Rn(r,t,p)}}break;case 5:Ad(f,f.return);break;case 22:if(f.memoizedState!==null){rM(u);continue}}d!==null?(d.return=f,Je=d):rM(u)}c=c.sibling}e:for(c=null,u=n;;){if(u.tag===5){if(c===null){c=u;try{i=u.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,A=u.memoizedProps.style,o=A!=null&&A.hasOwnProperty("display")?A.display:null,a.style.display=HP("display",o))}catch(p){Rn(n,n.return,p)}}}else if(u.tag===6){if(c===null)try{u.stateNode.nodeValue=l?"":u.memoizedProps}catch(p){Rn(n,n.return,p)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===n)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:fo(e,n),Go(n),r&4&&tM(n);break;case 21:break;default:fo(e,n),Go(n)}}function Go(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(yO(t)){var r=t;break e}t=t.return}throw Error(Re(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qg(i,""),r.flags&=-33);var s=eM(n);XF(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=eM(n);zF(n,a,o);break;default:throw Error(Re(161))}}catch(A){Rn(n,n.return,A)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Q8(n,e,t){Je=n,CO(n)}function CO(n,e,t){for(var r=(n.mode&1)!==0;Je!==null;){var i=Je,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||K0;if(!o){var a=i.alternate,A=a!==null&&a.memoizedState!==null||Zr;a=K0;var l=Zr;if(K0=o,(Zr=A)&&!l)for(Je=i;Je!==null;)o=Je,A=o.child,o.tag===22&&o.memoizedState!==null?iM(i):A!==null?(A.return=o,Je=A):iM(i);for(;s!==null;)Je=s,CO(s),s=s.sibling;Je=i,K0=a,Zr=l}nM(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Je=s):nM(n)}}function nM(n){for(;Je!==null;){var e=Je;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zr||UC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Zr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Fo(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&L2(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}L2(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var A=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&t.focus();break;case"img":A.src&&(t.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var u=c.dehydrated;u!==null&&rm(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}Zr||e.flags&512&&HF(e)}catch(f){Rn(e,e.return,f)}}if(e===n){Je=null;break}if(t=e.sibling,t!==null){t.return=e.return,Je=t;break}Je=e.return}}function rM(n){for(;Je!==null;){var e=Je;if(e===n){Je=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Je=t;break}Je=e.return}}function iM(n){for(;Je!==null;){var e=Je;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{UC(4,e)}catch(A){Rn(e,t,A)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(A){Rn(e,i,A)}}var s=e.return;try{HF(e)}catch(A){Rn(e,s,A)}break;case 5:var o=e.return;try{HF(e)}catch(A){Rn(e,o,A)}}}catch(A){Rn(e,e.return,A)}if(e===n){Je=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Je=a;break}Je=e.return}}var R8=Math.ceil,HB=TA.ReactCurrentDispatcher,R_=TA.ReactCurrentOwner,Ws=TA.ReactCurrentBatchConfig,Lt=0,yr=null,$n=null,_r=0,Yi=0,ld=ic(0),Ar=0,hm=null,ou=0,_C=0,M_=0,Mg=null,Bi=null,T_=0,th=1/0,nA=null,zB=!1,YF=null,Ql=null,j0=!1,ml=null,XB=0,Tg=0,KF=null,Gy=-1,Jy=0;function li(){return Lt&6?Zn():Gy!==-1?Gy:Gy=Zn()}function Rl(n){return n.mode&1?Lt&2&&_r!==0?_r&-_r:p8.transition!==null?(Jy===0&&(Jy=sW()),Jy):(n=Kt,n!==0||(n=window.event,n=n===void 0?16:fW(n.type)),n):1}function Mo(n,e,t,r){if(50<Tg)throw Tg=0,KF=null,Error(Re(185));e0(n,t,r),(!(Lt&2)||n!==yr)&&(n===yr&&(!(Lt&2)&&(_C|=t),Ar===4&&dl(n,_r)),Ui(n,r),t===1&&Lt===0&&!(e.mode&1)&&(th=Zn()+500,IC&&sc()))}function Ui(n,e){var t=n.callbackNode;p6(n,e);var r=QB(n,n===yr?_r:0);if(r===0)t!==null&&d2(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&d2(t),e===1)n.tag===0?h8(sM.bind(null,n)):QW(sM.bind(null,n)),c8(function(){!(Lt&6)&&sc()}),t=null;else{switch(oW(r)){case 1:t=o_;break;case 4:t=rW;break;case 16:t=SB;break;case 536870912:t=iW;break;default:t=SB}t=SO(t,bO.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function bO(n,e){if(Gy=-1,Jy=0,Lt&6)throw Error(Re(327));var t=n.callbackNode;if(Ud()&&n.callbackNode!==t)return null;var r=QB(n,n===yr?_r:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=YB(n,r);else{e=r;var i=Lt;Lt|=2;var s=IO();(yr!==n||_r!==e)&&(nA=null,th=Zn()+500,Hc(n,e));do try{N8();break}catch(a){xO(n,a)}while(1);y_(),HB.current=s,Lt=i,$n!==null?e=0:(yr=null,_r=0,e=Ar)}if(e!==0){if(e===2&&(i=bF(n),i!==0&&(r=i,e=jF(n,i))),e===1)throw t=hm,Hc(n,0),dl(n,r),Ui(n,Zn()),t;if(e===6)dl(n,r);else{if(i=n.current.alternate,!(r&30)&&!M8(i)&&(e=YB(n,r),e===2&&(s=bF(n),s!==0&&(r=s,e=jF(n,s))),e===1))throw t=hm,Hc(n,0),dl(n,r),Ui(n,Zn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Re(345));case 2:Fc(n,Bi,nA);break;case 3:if(dl(n,r),(r&130023424)===r&&(e=T_+500-Zn(),10<e)){if(QB(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){li(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=QF(Fc.bind(null,n,Bi,nA),e);break}Fc(n,Bi,nA);break;case 4:if(dl(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Ro(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Zn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*R8(r/1960))-r,10<r){n.timeoutHandle=QF(Fc.bind(null,n,Bi,nA),r);break}Fc(n,Bi,nA);break;case 5:Fc(n,Bi,nA);break;default:throw Error(Re(329))}}}return Ui(n,Zn()),n.callbackNode===t?bO.bind(null,n):null}function jF(n,e){var t=Mg;return n.current.memoizedState.isDehydrated&&(Hc(n,e).flags|=256),n=YB(n,e),n!==2&&(e=Bi,Bi=t,e!==null&&$F(e)),n}function $F(n){Bi===null?Bi=n:Bi.push.apply(Bi,n)}function M8(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Do(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dl(n,e){for(e&=~M_,e&=~_C,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ro(e),r=1<<t;n[t]=-1,e&=~r}}function sM(n){if(Lt&6)throw Error(Re(327));Ud();var e=QB(n,0);if(!(e&1))return Ui(n,Zn()),null;var t=YB(n,e);if(n.tag!==0&&t===2){var r=bF(n);r!==0&&(e=r,t=jF(n,r))}if(t===1)throw t=hm,Hc(n,0),dl(n,e),Ui(n,Zn()),t;if(t===6)throw Error(Re(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Fc(n,Bi,nA),Ui(n,Zn()),null}function N_(n,e){var t=Lt;Lt|=1;try{return n(e)}finally{Lt=t,Lt===0&&(th=Zn()+500,IC&&sc())}}function au(n){ml!==null&&ml.tag===0&&!(Lt&6)&&Ud();var e=Lt;Lt|=1;var t=Ws.transition,r=Kt;try{if(Ws.transition=null,Kt=1,n)return n()}finally{Kt=r,Ws.transition=t,Lt=e,!(Lt&6)&&sc()}}function k_(){Yi=ld.current,dn(ld)}function Hc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,l8(t)),$n!==null)for(t=$n.return;t!==null;){var r=t;switch(g_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kB();break;case 3:qd(),dn(Fi),dn(Yr),I_();break;case 5:x_(r);break;case 4:qd();break;case 13:dn(Cn);break;case 19:dn(Cn);break;case 10:B_(r.type._context);break;case 22:case 23:k_()}t=t.return}if(yr=n,$n=n=Ml(n.current,null),_r=Yi=e,Ar=0,hm=null,M_=_C=ou=0,Bi=Mg=null,kc!==null){for(e=0;e<kc.length;e++)if(t=kc[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}kc=null}return n}function xO(n,e){do{var t=$n;try{if(y_(),Wy.current=JB,GB){for(var r=Fn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}GB=!1}if(su=0,pr=ir=Fn=null,Qg=!1,um=0,R_.current=null,t===null||t.return===null){Ar=1,hm=e,$n=null;break}e:{var s=n,o=t.return,a=t,A=e;if(e=_r,a.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var l=A,c=a,u=c.tag;if(!(c.mode&1)&&(u===0||u===11||u===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=H2(o);if(d!==null){d.flags&=-257,z2(d,o,a,s,e),d.mode&1&&J2(s,l,e),e=d,A=l;var h=e.updateQueue;if(h===null){var p=new Set;p.add(A),e.updateQueue=p}else h.add(A);break e}else{if(!(e&1)){J2(s,l,e),D_();break e}A=Error(Re(426))}}else if(mn&&a.mode&1){var m=H2(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),z2(m,o,a,s,e),m_(eh(A,a));break e}}s=A=eh(A,a),Ar!==4&&(Ar=2),Mg===null?Mg=[s]:Mg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=aO(s,A,e);V2(s,g);break e;case 1:a=A;var v=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ql===null||!Ql.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=AO(s,a,e);V2(s,w);break e}}s=s.return}while(s!==null)}EO(t)}catch(C){e=C,$n===t&&t!==null&&($n=t=t.return);continue}break}while(1)}function IO(){var n=HB.current;return HB.current=JB,n===null?JB:n}function D_(){(Ar===0||Ar===3||Ar===2)&&(Ar=4),yr===null||!(ou&268435455)&&!(_C&268435455)||dl(yr,_r)}function YB(n,e){var t=Lt;Lt|=2;var r=IO();(yr!==n||_r!==e)&&(nA=null,Hc(n,e));do try{T8();break}catch(i){xO(n,i)}while(1);if(y_(),Lt=t,HB.current=r,$n!==null)throw Error(Re(261));return yr=null,_r=0,Ar}function T8(){for(;$n!==null;)FO($n)}function N8(){for(;$n!==null&&!o6();)FO($n)}function FO(n){var e=_O(n.alternate,n,Yi);n.memoizedProps=n.pendingProps,e===null?EO(n):$n=e,R_.current=null}function EO(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=U8(t,e),t!==null){t.flags&=32767,$n=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ar=6,$n=null;return}}else if(t=E8(t,e,Yi),t!==null){$n=t;return}if(e=e.sibling,e!==null){$n=e;return}$n=e=n}while(e!==null);Ar===0&&(Ar=5)}function Fc(n,e,t){var r=Kt,i=Ws.transition;try{Ws.transition=null,Kt=1,k8(n,e,t,r)}finally{Ws.transition=i,Kt=r}return null}function k8(n,e,t,r){do Ud();while(ml!==null);if(Lt&6)throw Error(Re(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Re(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(g6(n,s),n===yr&&($n=yr=null,_r=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||j0||(j0=!0,SO(SB,function(){return Ud(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ws.transition,Ws.transition=null;var o=Kt;Kt=1;var a=Lt;Lt|=4,R_.current=null,S8(n,t),wO(t,n),n8(_F),RB=!!UF,_F=UF=null,n.current=t,Q8(t),a6(),Lt=a,Kt=o,Ws.transition=s}else n.current=t;if(j0&&(j0=!1,ml=n,XB=i),s=n.pendingLanes,s===0&&(Ql=null),c6(t.stateNode),Ui(n,Zn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(zB)throw zB=!1,n=YF,YF=null,n;return XB&1&&n.tag!==0&&Ud(),s=n.pendingLanes,s&1?n===KF?Tg++:(Tg=0,KF=n):Tg=0,sc(),null}function Ud(){if(ml!==null){var n=oW(XB),e=Ws.transition,t=Kt;try{if(Ws.transition=null,Kt=16>n?16:n,ml===null)var r=!1;else{if(n=ml,ml=null,XB=0,Lt&6)throw Error(Re(331));var i=Lt;for(Lt|=4,Je=n.current;Je!==null;){var s=Je,o=s.child;if(Je.flags&16){var a=s.deletions;if(a!==null){for(var A=0;A<a.length;A++){var l=a[A];for(Je=l;Je!==null;){var c=Je;switch(c.tag){case 0:case 11:case 15:Rg(8,c,s)}var u=c.child;if(u!==null)u.return=c,Je=u;else for(;Je!==null;){c=Je;var f=c.sibling,d=c.return;if(vO(c),c===l){Je=null;break}if(f!==null){f.return=d,Je=f;break}Je=d}}}var h=s.alternate;if(h!==null){var p=h.child;if(p!==null){h.child=null;do{var m=p.sibling;p.sibling=null,p=m}while(p!==null)}}Je=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Je=o;else e:for(;Je!==null;){if(s=Je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Rg(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Je=g;break e}Je=s.return}}var v=n.current;for(Je=v;Je!==null;){o=Je;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,Je=y;else e:for(o=v;Je!==null;){if(a=Je,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:UC(9,a)}}catch(C){Rn(a,a.return,C)}if(a===o){Je=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Je=w;break e}Je=a.return}}if(Lt=i,sc(),ga&&typeof ga.onPostCommitFiberRoot=="function")try{ga.onPostCommitFiberRoot(BC,n)}catch{}r=!0}return r}finally{Kt=t,Ws.transition=e}}return!1}function oM(n,e,t){e=eh(t,e),e=aO(n,e,1),n=Sl(n,e,1),e=li(),n!==null&&(e0(n,1,e),Ui(n,e))}function Rn(n,e,t){if(n.tag===3)oM(n,n,t);else for(;e!==null;){if(e.tag===3){oM(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ql===null||!Ql.has(r))){n=eh(t,n),n=AO(e,n,1),e=Sl(e,n,1),n=li(),e!==null&&(e0(e,1,n),Ui(e,n));break}}e=e.return}}function D8(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=li(),n.pingedLanes|=n.suspendedLanes&t,yr===n&&(_r&t)===t&&(Ar===4||Ar===3&&(_r&130023424)===_r&&500>Zn()-T_?Hc(n,0):M_|=t),Ui(n,e)}function UO(n,e){e===0&&(n.mode&1?(e=W0,W0<<=1,!(W0&130023424)&&(W0=4194304)):e=1);var t=li();n=IA(n,e),n!==null&&(e0(n,e,t),Ui(n,t))}function V8(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),UO(n,t)}function L8(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Re(314))}r!==null&&r.delete(e),UO(n,t)}var _O;_O=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Fi.current)xi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return xi=!1,F8(n,e,t);xi=!!(n.flags&131072)}else xi=!1,mn&&e.flags&1048576&&RW(e,LB,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zy(n,e),n=e.pendingProps;var i=Kd(e,Yr.current);Ed(e,t),i=E_(null,e,r,n,i,t);var s=U_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ei(r)?(s=!0,DB(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,C_(e),i.updater=FC,e.stateNode=i,i._reactInternals=e,VF(e,r,n,t),e=WF(null,e,r,!0,s,t)):(e.tag=0,mn&&s&&p_(e),ni(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Zy(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=W8(r),n=Fo(r,n),i){case 0:e=PF(null,e,r,n,t);break e;case 1:e=K2(null,e,r,n,t);break e;case 11:e=X2(null,e,r,n,t);break e;case 14:e=Y2(null,e,r,Fo(r.type,n),t);break e}throw Error(Re(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fo(r,i),PF(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fo(r,i),K2(n,e,r,i,t);case 3:e:{if(fO(e),n===null)throw Error(Re(387));r=e.pendingProps,s=e.memoizedState,i=s.element,kW(n,e),OB(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=eh(Error(Re(423)),e),e=j2(n,e,r,t,i);break e}else if(r!==i){i=eh(Error(Re(424)),e),e=j2(n,e,r,t,i);break e}else for(rs=_l(e.stateNode.containerInfo.firstChild),as=e,mn=!0,_o=null,t=PW(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(jd(),r===i){e=FA(n,e,t);break e}ni(n,e,r,t)}e=e.child}return e;case 5:return WW(e),n===null&&NF(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,SF(r,i)?o=null:s!==null&&SF(r,s)&&(e.flags|=32),uO(n,e),ni(n,e,o,t),e.child;case 6:return n===null&&NF(e),null;case 13:return dO(n,e,t);case 4:return b_(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=$d(e,null,r,t):ni(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fo(r,i),X2(n,e,r,i,t);case 7:return ni(n,e,e.pendingProps,t),e.child;case 8:return ni(n,e,e.pendingProps.children,t),e.child;case 12:return ni(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,an(PB,r._currentValue),r._currentValue=o,s!==null)if(Do(s.value,o)){if(s.children===i.children&&!Fi.current){e=FA(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var A=a.firstContext;A!==null;){if(A.context===r){if(s.tag===1){A=vA(-1,t&-t),A.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?A.next=A:(A.next=c.next,c.next=A),l.pending=A}}s.lanes|=t,A=s.alternate,A!==null&&(A.lanes|=t),kF(s.return,t,e),a.lanes|=t;break}A=A.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Re(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),kF(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ni(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ed(e,t),i=zs(i),r=r(i),e.flags|=1,ni(n,e,r,t),e.child;case 14:return r=e.type,i=Fo(r,e.pendingProps),i=Fo(r.type,i),Y2(n,e,r,i,t);case 15:return lO(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fo(r,i),Zy(n,e),e.tag=1,Ei(r)?(n=!0,DB(e)):n=!1,Ed(e,t),VW(e,r,i),VF(e,r,i,t),WF(null,e,r,!0,n,t);case 19:return hO(n,e,t);case 22:return cO(n,e,t)}throw Error(Re(156,e.tag))};function SO(n,e){return nW(n,e)}function P8(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(n,e,t,r){return new P8(n,e,t,r)}function V_(n){return n=n.prototype,!(!n||!n.isReactComponent)}function W8(n){if(typeof n=="function")return V_(n)?1:0;if(n!=null){if(n=n.$$typeof,n===r_)return 11;if(n===i_)return 14}return 2}function Ml(n,e){var t=n.alternate;return t===null?(t=Ns(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Hy(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")V_(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case qf:return zc(t.children,i,s,e);case n_:o=8,i|=8;break;case AF:return n=Ns(12,t,e,i|2),n.elementType=AF,n.lanes=s,n;case lF:return n=Ns(13,t,e,i),n.elementType=lF,n.lanes=s,n;case cF:return n=Ns(19,t,e,i),n.elementType=cF,n.lanes=s,n;case LP:return SC(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case DP:o=10;break e;case VP:o=9;break e;case r_:o=11;break e;case i_:o=14;break e;case ol:o=16,r=null;break e}throw Error(Re(130,n==null?n:typeof n,""))}return e=Ns(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function zc(n,e,t,r){return n=Ns(7,n,r,e),n.lanes=t,n}function SC(n,e,t,r){return n=Ns(22,n,r,e),n.elementType=LP,n.lanes=t,n.stateNode={isHidden:!1},n}function Ix(n,e,t){return n=Ns(6,n,null,e),n.lanes=t,n}function Fx(n,e,t){return e=Ns(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function O8(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ox(0),this.expirationTimes=ox(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ox(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function L_(n,e,t,r,i,s,o,a,A){return n=new O8(n,e,t,a,A),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ns(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},C_(s),n}function Z8(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$f,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function QO(n){if(!n)return Gl;n=n._reactInternals;e:{if(Bu(n)!==n||n.tag!==1)throw Error(Re(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ei(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Re(171))}if(n.tag===1){var t=n.type;if(Ei(t))return SW(n,t,e)}return e}function RO(n,e,t,r,i,s,o,a,A){return n=L_(t,r,!0,n,i,s,o,a,A),n.context=QO(null),t=n.current,r=li(),i=Rl(t),s=vA(r,i),s.callback=e??null,Sl(t,s,i),n.current.lanes=i,e0(n,i,r),Ui(n,r),n}function QC(n,e,t,r){var i=e.current,s=li(),o=Rl(i);return t=QO(t),e.context===null?e.context=t:e.pendingContext=t,e=vA(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Sl(i,e,o),n!==null&&(Mo(n,i,o,s),Py(n,i,o)),o}function KB(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function aM(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function P_(n,e){aM(n,e),(n=n.alternate)&&aM(n,e)}function G8(){return null}var MO=typeof reportError=="function"?reportError:function(n){console.error(n)};function W_(n){this._internalRoot=n}RC.prototype.render=W_.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Re(409));QC(n,e,null,null)};RC.prototype.unmount=W_.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;au(function(){QC(null,n,null,null)}),e[xA]=null}};function RC(n){this._internalRoot=n}RC.prototype.unstable_scheduleHydration=function(n){if(n){var e=lW();n={blockedOn:null,target:n,priority:e};for(var t=0;t<fl.length&&e!==0&&e<fl[t].priority;t++);fl.splice(t,0,n),t===0&&uW(n)}};function O_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function MC(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function AM(){}function J8(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=KB(o);s.call(l)}}var o=RO(e,r,n,0,null,!1,!1,"",AM);return n._reactRootContainer=o,n[xA]=o.current,om(n.nodeType===8?n.parentNode:n),au(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=KB(A);a.call(l)}}var A=L_(n,0,!1,null,null,!1,!1,"",AM);return n._reactRootContainer=A,n[xA]=A.current,om(n.nodeType===8?n.parentNode:n),au(function(){QC(e,A,t,r)}),A}function TC(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var A=KB(o);a.call(A)}}QC(e,o,n,i)}else o=J8(t,e,n,i,r);return KB(o)}aW=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=rg(e.pendingLanes);t!==0&&(a_(e,t|1),Ui(e,Zn()),!(Lt&6)&&(th=Zn()+500,sc()))}break;case 13:au(function(){var r=IA(n,1);if(r!==null){var i=li();Mo(r,n,1,i)}}),P_(n,1)}};A_=function(n){if(n.tag===13){var e=IA(n,134217728);if(e!==null){var t=li();Mo(e,n,134217728,t)}P_(n,134217728)}};AW=function(n){if(n.tag===13){var e=Rl(n),t=IA(n,e);if(t!==null){var r=li();Mo(t,n,e,r)}P_(n,e)}};lW=function(){return Kt};cW=function(n,e){var t=Kt;try{return Kt=n,e()}finally{Kt=t}};BF=function(n,e,t){switch(e){case"input":if(dF(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=xC(r);if(!i)throw Error(Re(90));WP(r),dF(r,i)}}}break;case"textarea":ZP(n,t);break;case"select":e=t.value,e!=null&&bd(n,!!t.multiple,e,!1)}};KP=N_;jP=au;var H8={usingClientEntryPoint:!1,Events:[n0,rd,xC,XP,YP,N_]},Bp={findFiberByHostInstance:Nc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},z8={bundleType:Bp.bundleType,version:Bp.version,rendererPackageName:Bp.rendererPackageName,rendererConfig:Bp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:TA.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=eW(n),n===null?null:n.stateNode},findFiberByHostInstance:Bp.findFiberByHostInstance||G8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$0.isDisabled&&$0.supportsFiber)try{BC=$0.inject(z8),ga=$0}catch{}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H8;ps.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!O_(e))throw Error(Re(200));return Z8(n,e,null,t)};ps.createRoot=function(n,e){if(!O_(n))throw Error(Re(299));var t=!1,r="",i=MO;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=L_(n,1,!1,null,null,t,!1,r,i),n[xA]=e.current,om(n.nodeType===8?n.parentNode:n),new W_(e)};ps.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Re(188)):(n=Object.keys(n).join(","),Error(Re(268,n)));return n=eW(e),n=n===null?null:n.stateNode,n};ps.flushSync=function(n){return au(n)};ps.hydrate=function(n,e,t){if(!MC(e))throw Error(Re(200));return TC(null,n,e,!0,t)};ps.hydrateRoot=function(n,e,t){if(!O_(n))throw Error(Re(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=MO;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=RO(e,null,n,1,t??null,i,!1,s,o),n[xA]=e.current,om(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new RC(e)};ps.render=function(n,e,t){if(!MC(e))throw Error(Re(200));return TC(null,n,e,!1,t)};ps.unmountComponentAtNode=function(n){if(!MC(n))throw Error(Re(40));return n._reactRootContainer?(au(function(){TC(null,null,n,!1,function(){n._reactRootContainer=null,n[xA]=null})}),!0):!1};ps.unstable_batchedUpdates=N_;ps.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!MC(t))throw Error(Re(200));if(n==null||n._reactInternals===void 0)throw Error(Re(38));return TC(n,e,t,!1,r)};ps.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=ps})(GK);var lM=sF;iF.createRoot=lM.createRoot,iF.hydrateRoot=lM.hydrateRoot;const X8="/assets/cc_bgm_balanced-f542698c.wav",to=pe.createContext(),Y8=({children:n})=>{const[e,t]=pe.useState(!1),r=Y.useRef(null),i=()=>{t(!1);const o=r.current;o.src=X8,o.loop=!0,o.volume=0,o.play();let a=0;const A=5,l=setInterval(()=>{a=Math.max(a+1/(10*A*60),1),a>=1&&clearInterval(l),o.volume=a},1e3/60)},s=()=>{t(!0),r.current.pause()};return J.jsxs(to.Provider,{value:{isMute:e,setMute:t,enableAudio:i,disableAudio:s},children:[J.jsx("audio",{ref:r}),n]})},K8=pe.createContext(),j8=n=>{const[e,t]=pe.useState(null),[r,i]=pe.useState(null),[s,o]=pe.useState(!1),[a,A]=pe.useState([]);return J.jsx(K8.Provider,{value:{walletAddress:e,setWalletAddress:t,ensName:r,setEnsName:i,connected:s,setConnected:o,OTTokens:a,setOTTokens:A},children:n.children})};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Rs="146",Vu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Lu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},$8=0,cM=1,q8=2,TO=1,ej=2,sg=3,Ia=0,ci=1,Ii=2,Tl=0,_d=1,Au=2,uM=3,fM=4,tj=5,bf=100,nj=101,rj=102,dM=103,hM=104,ij=200,sj=201,oj=202,aj=203,NO=204,kO=205,Aj=206,lj=207,cj=208,uj=209,fj=210,dj=0,hj=1,pj=2,qF=3,gj=4,mj=5,vj=6,yj=7,NC=0,Bj=1,wj=2,yA=0,Cj=1,bj=2,xj=3,Ij=4,Fj=5,DO=300,nh=301,rh=302,jB=303,eE=304,kC=306,cs=1e3,ai=1001,pm=1002,mr=1003,$B=1004,qB=1005,ri=1006,Z_=1007,wu=1008,Jl=1009,Ej=1010,Uj=1011,VO=1012,_j=1013,Vc=1014,vl=1015,gm=1016,Sj=1017,Qj=1018,Sd=1020,Rj=1021,LO=1022,Ci=1023,Mj=1024,Tj=1025,Xc=1026,ih=1027,Nj=1028,kj=1029,Dj=1030,Vj=1031,Lj=1033,Ex=33776,Ux=33777,_x=33778,Sx=33779,pM=35840,gM=35841,mM=35842,vM=35843,Pj=36196,yM=37492,BM=37496,wM=37808,CM=37809,bM=37810,xM=37811,IM=37812,FM=37813,EM=37814,UM=37815,_M=37816,SM=37817,QM=37818,RM=37819,MM=37820,TM=37821,NM=36492,Wj=2200,Oj=2201,Zj=2202,sh=2300,lu=2301,Qx=2302,cd=2400,ud=2401,ew=2402,G_=2500,Gj=2501,Jj=1,PO=2,Ys=3e3,dt=3001,Hj=3200,zj=3201,Sh=0,Xj=1,rA="srgb",Lc="srgb-linear",Rx=7680,Yj=519,tE=35044,Kj=35048,kM="300 es",nE=1035;class oc{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Vr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let DM=1234567;const Ng=Math.PI/180,mm=180/Math.PI;function To(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Vr[n&255]+Vr[n>>8&255]+Vr[n>>16&255]+Vr[n>>24&255]+"-"+Vr[e&255]+Vr[e>>8&255]+"-"+Vr[e>>16&15|64]+Vr[e>>24&255]+"-"+Vr[t&63|128]+Vr[t>>8&255]+"-"+Vr[t>>16&255]+Vr[t>>24&255]+Vr[r&255]+Vr[r>>8&255]+Vr[r>>16&255]+Vr[r>>24&255]).toLowerCase()}function or(n,e,t){return Math.max(e,Math.min(t,n))}function J_(n,e){return(n%e+e)%e}function jj(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function $j(n,e,t){return n!==e?(t-n)/(e-n):0}function kg(n,e,t){return(1-t)*n+t*e}function qj(n,e,t,r){return kg(n,e,1-Math.exp(-t*r))}function e7(n,e=1){return e-Math.abs(J_(n,e*2)-e)}function t7(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function n7(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function r7(n,e){return n+Math.floor(Math.random()*(e-n+1))}function i7(n,e){return n+Math.random()*(e-n)}function s7(n){return n*(.5-Math.random())}function o7(n){n!==void 0&&(DM=n);let e=DM+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function a7(n){return n*Ng}function A7(n){return n*mm}function rE(n){return(n&n-1)===0&&n!==0}function WO(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function tw(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function l7(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),A=o(t/2),l=s((e+r)/2),c=o((e+r)/2),u=s((e-r)/2),f=o((e-r)/2),d=s((r-e)/2),h=o((r-e)/2);switch(i){case"XYX":n.set(a*c,A*u,A*f,a*l);break;case"YZY":n.set(A*f,a*c,A*u,a*l);break;case"ZXZ":n.set(A*u,A*f,a*c,a*l);break;case"XZX":n.set(a*c,A*h,A*d,a*l);break;case"YXY":n.set(A*d,a*c,A*h,a*l);break;case"ZYZ":n.set(A*h,A*d,a*c,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function hA(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function tn(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Dt=Object.freeze({__proto__:null,DEG2RAD:Ng,RAD2DEG:mm,generateUUID:To,clamp:or,euclideanModulo:J_,mapLinear:jj,inverseLerp:$j,lerp:kg,damp:qj,pingpong:e7,smoothstep:t7,smootherstep:n7,randInt:r7,randFloat:i7,randFloatSpread:s7,seededRandom:o7,degToRad:a7,radToDeg:A7,isPowerOfTwo:rE,ceilPowerOfTwo:WO,floorPowerOfTwo:tw,setQuaternionFromProperEuler:l7,normalize:tn,denormalize:hA});class Ge{constructor(e=0,t=0){Ge.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Mn{constructor(){Mn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,s,o,a,A,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=s,c[5]=A,c[6]=r,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],A=r[6],l=r[1],c=r[4],u=r[7],f=r[2],d=r[5],h=r[8],p=i[0],m=i[3],g=i[6],v=i[1],y=i[4],w=i[7],C=i[2],b=i[5],F=i[8];return s[0]=o*p+a*v+A*C,s[3]=o*m+a*y+A*b,s[6]=o*g+a*w+A*F,s[1]=l*p+c*v+u*C,s[4]=l*m+c*y+u*b,s[7]=l*g+c*w+u*F,s[2]=f*p+d*v+h*C,s[5]=f*m+d*y+h*b,s[8]=f*g+d*w+h*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],A=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-r*s*c+r*a*A+i*s*l-i*o*A}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],A=e[6],l=e[7],c=e[8],u=c*o-a*l,f=a*A-c*s,d=l*s-o*A,h=t*u+r*f+i*d;if(h===0)return this.set(0,0,0,0,0,0,0,0,0);const p=1/h;return e[0]=u*p,e[1]=(i*l-c*r)*p,e[2]=(a*r-i*o)*p,e[3]=f*p,e[4]=(c*t-i*A)*p,e[5]=(i*s-a*t)*p,e[6]=d*p,e[7]=(r*A-l*t)*p,e[8]=(o*t-r*s)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const A=Math.cos(s),l=Math.sin(s);return this.set(r*A,r*l,-r*(A*o+l*a)+o+e,-i*l,i*A,-i*(-l*o+A*a)+a+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,s=i[0],o=i[3],a=i[6],A=i[1],l=i[4],c=i[7];return i[0]=t*s+r*A,i[3]=t*o+r*l,i[6]=t*a+r*c,i[1]=-r*s+t*A,i[4]=-r*o+t*l,i[7]=-r*a+t*c,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function OO(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function vm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Yc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function zy(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const Mx={[rA]:{[Lc]:Yc},[Lc]:{[rA]:zy}},ho={legacyMode:!0,get workingColorSpace(){return Lc},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(Mx[e]&&Mx[e][t]!==void 0){const r=Mx[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},ZO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},nr={r:0,g:0,b:0},po={h:0,s:0,l:0},q0={h:0,s:0,l:0};function Tx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function ev(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Ne{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=rA){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ho.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Lc){return this.r=e,this.g=t,this.b=r,ho.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Lc){if(e=J_(e,1),t=or(t,0,1),r=or(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=Tx(o,s,e+1/3),this.g=Tx(o,s,e),this.b=Tx(o,s,e-1/3)}return ho.toWorkingColorSpace(this,i),this}setStyle(e,t=rA){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,ho.toWorkingColorSpace(this,t),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,ho.toWorkingColorSpace(this,t),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const A=parseFloat(s[1])/360,l=parseFloat(s[2])/100,c=parseFloat(s[3])/100;return r(s[4]),this.setHSL(A,l,c,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,ho.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,ho.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=rA){const r=ZO[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Yc(e.r),this.g=Yc(e.g),this.b=Yc(e.b),this}copyLinearToSRGB(e){return this.r=zy(e.r),this.g=zy(e.g),this.b=zy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=rA){return ho.fromWorkingColorSpace(ev(this,nr),e),or(nr.r*255,0,255)<<16^or(nr.g*255,0,255)<<8^or(nr.b*255,0,255)<<0}getHexString(e=rA){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Lc){ho.fromWorkingColorSpace(ev(this,nr),t);const r=nr.r,i=nr.g,s=nr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let A,l;const c=(a+o)/2;if(a===o)A=0,l=0;else{const u=o-a;switch(l=c<=.5?u/(o+a):u/(2-o-a),o){case r:A=(i-s)/u+(i<s?6:0);break;case i:A=(s-r)/u+2;break;case s:A=(r-i)/u+4;break}A/=6}return e.h=A,e.s=l,e.l=c,e}getRGB(e,t=Lc){return ho.fromWorkingColorSpace(ev(this,nr),t),e.r=nr.r,e.g=nr.g,e.b=nr.b,e}getStyle(e=rA){return ho.fromWorkingColorSpace(ev(this,nr),e),e!==rA?`color(${e} ${nr.r} ${nr.g} ${nr.b})`:`rgb(${nr.r*255|0},${nr.g*255|0},${nr.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(po),po.h+=e,po.s+=t,po.l+=r,this.setHSL(po.h,po.s,po.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(po),e.getHSL(q0);const r=kg(po.h,q0.h,t),i=kg(po.s,q0.s,t),s=kg(po.l,q0.l,t);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Ne.NAMES=ZO;let Pu;class GO{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Pu===void 0&&(Pu=vm("canvas")),Pu.width=e.width,Pu.height=e.height;const r=Pu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Pu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=vm("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Yc(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Yc(t[r]/255)*255):t[r]=Yc(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class H_{constructor(e=null){this.isSource=!0,this.uuid=To(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(Nx(i[o].image)):s.push(Nx(i[o]))}else s=Nx(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function Nx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?GO.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let c7=0;class qn extends oc{constructor(e=qn.DEFAULT_IMAGE,t=qn.DEFAULT_MAPPING,r=ai,i=ai,s=ri,o=wu,a=Ci,A=Jl,l=1,c=Ys){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:c7++}),this.uuid=To(),this.name="",this.source=new H_(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=A,this.offset=new Ge(0,0),this.repeat=new Ge(1,1),this.center=new Ge(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Mn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==DO)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case cs:e.x=e.x-Math.floor(e.x);break;case ai:e.x=e.x<0?0:1;break;case pm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case cs:e.y=e.y-Math.floor(e.y);break;case ai:e.y=e.y<0?0:1;break;case pm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}qn.DEFAULT_IMAGE=null;qn.DEFAULT_MAPPING=DO;class Vt{constructor(e=0,t=0,r=0,i=1){Vt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const A=e.elements,l=A[0],c=A[4],u=A[8],f=A[1],d=A[5],h=A[9],p=A[2],m=A[6],g=A[10];if(Math.abs(c-f)<.01&&Math.abs(u-p)<.01&&Math.abs(h-m)<.01){if(Math.abs(c+f)<.1&&Math.abs(u+p)<.1&&Math.abs(h+m)<.1&&Math.abs(l+d+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(l+1)/2,w=(d+1)/2,C=(g+1)/2,b=(c+f)/4,F=(u+p)/4,I=(h+m)/4;return y>w&&y>C?y<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(y),i=b/r,s=F/r):w>C?w<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(w),r=b/i,s=I/i):C<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(C),r=F/s,i=I/s),this.set(r,i,s,t),this}let v=Math.sqrt((m-h)*(m-h)+(u-p)*(u-p)+(f-c)*(f-c));return Math.abs(v)<.001&&(v=1),this.x=(m-h)/v,this.y=(u-p)/v,this.z=(f-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Hl extends oc{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Vt(0,0,e,t),this.scissorTest=!1,this.viewport=new Vt(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new qn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:ri,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new H_(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class JO extends qn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=mr,this.minFilter=mr,this.wrapR=ai,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class u7 extends qn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=mr,this.minFilter=mr,this.wrapR=ai,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class et{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let A=r[i+0],l=r[i+1],c=r[i+2],u=r[i+3];const f=s[o+0],d=s[o+1],h=s[o+2],p=s[o+3];if(a===0){e[t+0]=A,e[t+1]=l,e[t+2]=c,e[t+3]=u;return}if(a===1){e[t+0]=f,e[t+1]=d,e[t+2]=h,e[t+3]=p;return}if(u!==p||A!==f||l!==d||c!==h){let m=1-a;const g=A*f+l*d+c*h+u*p,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){const C=Math.sqrt(y),b=Math.atan2(C,g*v);m=Math.sin(m*b)/C,a=Math.sin(a*b)/C}const w=a*v;if(A=A*m+f*w,l=l*m+d*w,c=c*m+h*w,u=u*m+p*w,m===1-a){const C=1/Math.sqrt(A*A+l*l+c*c+u*u);A*=C,l*=C,c*=C,u*=C}}e[t]=A,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],A=r[i+1],l=r[i+2],c=r[i+3],u=s[o],f=s[o+1],d=s[o+2],h=s[o+3];return e[t]=a*h+c*u+A*d-l*f,e[t+1]=A*h+c*f+l*u-a*d,e[t+2]=l*h+c*d+a*f-A*u,e[t+3]=c*h-a*u-A*f-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,A=Math.sin,l=a(r/2),c=a(i/2),u=a(s/2),f=A(r/2),d=A(i/2),h=A(s/2);switch(o){case"XYZ":this._x=f*c*u+l*d*h,this._y=l*d*u-f*c*h,this._z=l*c*h+f*d*u,this._w=l*c*u-f*d*h;break;case"YXZ":this._x=f*c*u+l*d*h,this._y=l*d*u-f*c*h,this._z=l*c*h-f*d*u,this._w=l*c*u+f*d*h;break;case"ZXY":this._x=f*c*u-l*d*h,this._y=l*d*u+f*c*h,this._z=l*c*h+f*d*u,this._w=l*c*u-f*d*h;break;case"ZYX":this._x=f*c*u-l*d*h,this._y=l*d*u+f*c*h,this._z=l*c*h-f*d*u,this._w=l*c*u+f*d*h;break;case"YZX":this._x=f*c*u+l*d*h,this._y=l*d*u+f*c*h,this._z=l*c*h-f*d*u,this._w=l*c*u-f*d*h;break;case"XZY":this._x=f*c*u-l*d*h,this._y=l*d*u-f*c*h,this._z=l*c*h+f*d*u,this._w=l*c*u+f*d*h;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],A=t[9],l=t[2],c=t[6],u=t[10],f=r+a+u;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(c-A)*d,this._y=(s-l)*d,this._z=(o-i)*d}else if(r>a&&r>u){const d=2*Math.sqrt(1+r-a-u);this._w=(c-A)/d,this._x=.25*d,this._y=(i+o)/d,this._z=(s+l)/d}else if(a>u){const d=2*Math.sqrt(1+a-r-u);this._w=(s-l)/d,this._x=(i+o)/d,this._y=.25*d,this._z=(A+c)/d}else{const d=2*Math.sqrt(1+u-r-a);this._w=(o-i)/d,this._x=(s+l)/d,this._y=(A+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(or(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,A=t._y,l=t._z,c=t._w;return this._x=r*c+o*a+i*l-s*A,this._y=i*c+o*A+s*a-r*l,this._z=s*c+o*l+r*A-i*a,this._w=o*c-r*a-i*A-s*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const A=1-a*a;if(A<=Number.EPSILON){const d=1-t;return this._w=d*o+t*this._w,this._x=d*r+t*this._x,this._y=d*i+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(A),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,f=Math.sin(t*c)/l;return this._w=o*u+this._w*f,this._x=r*u+this._x*f,this._y=i*u+this._y*f,this._z=s*u+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class z{constructor(e=0,t=0,r=0){z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(VM.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(VM.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,A=e.w,l=A*t+o*i-a*r,c=A*r+a*t-s*i,u=A*i+s*r-o*t,f=-s*t-o*r-a*i;return this.x=l*A+f*-s+c*-a-u*-o,this.y=c*A+f*-o+u*-s-l*-a,this.z=u*A+f*-a+l*-o-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,A=t.z;return this.x=i*A-s*a,this.y=s*o-r*A,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return kx.copy(this).projectOnVector(e),this.sub(kx)}reflect(e){return this.sub(kx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(or(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const kx=new z,VM=new et;class no{constructor(e=new z(1/0,1/0,1/0),t=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let A=0,l=e.length;A<l;A+=3){const c=e[A],u=e[A+1],f=e[A+2];c<t&&(t=c),u<r&&(r=u),f<i&&(i=f),c>s&&(s=c),u>o&&(o=u),f>a&&(a=f)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let A=0,l=e.count;A<l;A++){const c=e.getX(A),u=e.getY(A),f=e.getZ(A);c<t&&(t=c),u<r&&(r=u),f<i&&(i=f),c>s&&(s=c),u>o&&(o=u),f>a&&(a=f)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=dc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)dc.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(dc)}else r.boundingBox===null&&r.computeBoundingBox(),Dx.copy(r.boundingBox),Dx.applyMatrix4(e.matrixWorld),this.union(Dx);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,dc),dc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(wp),tv.subVectors(this.max,wp),Wu.subVectors(e.a,wp),Ou.subVectors(e.b,wp),Zu.subVectors(e.c,wp),ZA.subVectors(Ou,Wu),GA.subVectors(Zu,Ou),hc.subVectors(Wu,Zu);let t=[0,-ZA.z,ZA.y,0,-GA.z,GA.y,0,-hc.z,hc.y,ZA.z,0,-ZA.x,GA.z,0,-GA.x,hc.z,0,-hc.x,-ZA.y,ZA.x,0,-GA.y,GA.x,0,-hc.y,hc.x,0];return!Vx(t,Wu,Ou,Zu,tv)||(t=[1,0,0,0,1,0,0,0,1],!Vx(t,Wu,Ou,Zu,tv))?!1:(nv.crossVectors(ZA,GA),t=[nv.x,nv.y,nv.z],Vx(t,Wu,Ou,Zu,tv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return dc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(dc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Va[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Va[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Va[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Va[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Va[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Va[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Va[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Va[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Va),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Va=[new z,new z,new z,new z,new z,new z,new z,new z],dc=new z,Dx=new no,Wu=new z,Ou=new z,Zu=new z,ZA=new z,GA=new z,hc=new z,wp=new z,tv=new z,nv=new z,pc=new z;function Vx(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){pc.fromArray(n,s);const a=i.x*Math.abs(pc.x)+i.y*Math.abs(pc.y)+i.z*Math.abs(pc.z),A=e.dot(pc),l=t.dot(pc),c=r.dot(pc);if(Math.max(-Math.max(A,l,c),Math.min(A,l,c))>a)return!1}return!0}const f7=new no,Cp=new z,Lx=new z;class Cu{constructor(e=new z,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):f7.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Cp.subVectors(e,this.center);const t=Cp.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Cp,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Lx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Cp.copy(e.center).add(Lx)),this.expandByPoint(Cp.copy(e.center).sub(Lx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const La=new z,Px=new z,rv=new z,JA=new z,Wx=new z,iv=new z,Ox=new z;class i0{constructor(e=new z,t=new z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,La)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=La.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(La.copy(this.direction).multiplyScalar(t).add(this.origin),La.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Px.copy(e).add(t).multiplyScalar(.5),rv.copy(t).sub(e).normalize(),JA.copy(this.origin).sub(Px);const s=e.distanceTo(t)*.5,o=-this.direction.dot(rv),a=JA.dot(this.direction),A=-JA.dot(rv),l=JA.lengthSq(),c=Math.abs(1-o*o);let u,f,d,h;if(c>0)if(u=o*A-a,f=o*a-A,h=s*c,u>=0)if(f>=-h)if(f<=h){const p=1/c;u*=p,f*=p,d=u*(u+o*f+2*a)+f*(o*u+f+2*A)+l}else f=s,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*A)+l;else f=-s,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*A)+l;else f<=-h?(u=Math.max(0,-(-o*s+a)),f=u>0?-s:Math.min(Math.max(-s,-A),s),d=-u*u+f*(f+2*A)+l):f<=h?(u=0,f=Math.min(Math.max(-s,-A),s),d=f*(f+2*A)+l):(u=Math.max(0,-(o*s+a)),f=u>0?s:Math.min(Math.max(-s,-A),s),d=-u*u+f*(f+2*A)+l);else f=o>0?-s:s,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*A)+l;return r&&r.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(rv).multiplyScalar(f).add(Px),d}intersectSphere(e,t){La.subVectors(e.center,this.origin);const r=La.dot(this.direction),i=La.dot(La)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,A=r+o;return a<0&&A<0?null:a<0?this.at(A,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,A;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,f=this.origin;return l>=0?(r=(e.min.x-f.x)*l,i=(e.max.x-f.x)*l):(r=(e.max.x-f.x)*l,i=(e.min.x-f.x)*l),c>=0?(s=(e.min.y-f.y)*c,o=(e.max.y-f.y)*c):(s=(e.max.y-f.y)*c,o=(e.min.y-f.y)*c),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),u>=0?(a=(e.min.z-f.z)*u,A=(e.max.z-f.z)*u):(a=(e.max.z-f.z)*u,A=(e.min.z-f.z)*u),r>A||a>i)||((a>r||r!==r)&&(r=a),(A<i||i!==i)&&(i=A),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,La)!==null}intersectTriangle(e,t,r,i,s){Wx.subVectors(t,e),iv.subVectors(r,e),Ox.crossVectors(Wx,iv);let o=this.direction.dot(Ox),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;JA.subVectors(this.origin,e);const A=a*this.direction.dot(iv.crossVectors(JA,iv));if(A<0)return null;const l=a*this.direction.dot(Wx.cross(JA));if(l<0||A+l>o)return null;const c=-a*JA.dot(Ox);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Oe{constructor(){Oe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,s,o,a,A,l,c,u,f,d,h,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=A,g[2]=l,g[6]=c,g[10]=u,g[14]=f,g[3]=d,g[7]=h,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Oe().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Gu.setFromMatrixColumn(e,0).length(),s=1/Gu.setFromMatrixColumn(e,1).length(),o=1/Gu.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),A=Math.cos(i),l=Math.sin(i),c=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const f=o*c,d=o*u,h=a*c,p=a*u;t[0]=A*c,t[4]=-A*u,t[8]=l,t[1]=d+h*l,t[5]=f-p*l,t[9]=-a*A,t[2]=p-f*l,t[6]=h+d*l,t[10]=o*A}else if(e.order==="YXZ"){const f=A*c,d=A*u,h=l*c,p=l*u;t[0]=f+p*a,t[4]=h*a-d,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=d*a-h,t[6]=p+f*a,t[10]=o*A}else if(e.order==="ZXY"){const f=A*c,d=A*u,h=l*c,p=l*u;t[0]=f-p*a,t[4]=-o*u,t[8]=h+d*a,t[1]=d+h*a,t[5]=o*c,t[9]=p-f*a,t[2]=-o*l,t[6]=a,t[10]=o*A}else if(e.order==="ZYX"){const f=o*c,d=o*u,h=a*c,p=a*u;t[0]=A*c,t[4]=h*l-d,t[8]=f*l+p,t[1]=A*u,t[5]=p*l+f,t[9]=d*l-h,t[2]=-l,t[6]=a*A,t[10]=o*A}else if(e.order==="YZX"){const f=o*A,d=o*l,h=a*A,p=a*l;t[0]=A*c,t[4]=p-f*u,t[8]=h*u+d,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=d*u+h,t[10]=f-p*u}else if(e.order==="XZY"){const f=o*A,d=o*l,h=a*A,p=a*l;t[0]=A*c,t[4]=-u,t[8]=l*c,t[1]=f*u+p,t[5]=o*c,t[9]=d*u-h,t[2]=h*u-d,t[6]=a*c,t[10]=p*u+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(d7,e,h7)}lookAt(e,t,r){const i=this.elements;return Li.subVectors(e,t),Li.lengthSq()===0&&(Li.z=1),Li.normalize(),HA.crossVectors(r,Li),HA.lengthSq()===0&&(Math.abs(r.z)===1?Li.x+=1e-4:Li.z+=1e-4,Li.normalize(),HA.crossVectors(r,Li)),HA.normalize(),sv.crossVectors(Li,HA),i[0]=HA.x,i[4]=sv.x,i[8]=Li.x,i[1]=HA.y,i[5]=sv.y,i[9]=Li.y,i[2]=HA.z,i[6]=sv.z,i[10]=Li.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],A=r[8],l=r[12],c=r[1],u=r[5],f=r[9],d=r[13],h=r[2],p=r[6],m=r[10],g=r[14],v=r[3],y=r[7],w=r[11],C=r[15],b=i[0],F=i[4],I=i[8],S=i[12],T=i[1],H=i[5],X=i[9],Q=i[13],B=i[2],E=i[6],R=i[10],k=i[14],M=i[3],L=i[7],Z=i[11],P=i[15];return s[0]=o*b+a*T+A*B+l*M,s[4]=o*F+a*H+A*E+l*L,s[8]=o*I+a*X+A*R+l*Z,s[12]=o*S+a*Q+A*k+l*P,s[1]=c*b+u*T+f*B+d*M,s[5]=c*F+u*H+f*E+d*L,s[9]=c*I+u*X+f*R+d*Z,s[13]=c*S+u*Q+f*k+d*P,s[2]=h*b+p*T+m*B+g*M,s[6]=h*F+p*H+m*E+g*L,s[10]=h*I+p*X+m*R+g*Z,s[14]=h*S+p*Q+m*k+g*P,s[3]=v*b+y*T+w*B+C*M,s[7]=v*F+y*H+w*E+C*L,s[11]=v*I+y*X+w*R+C*Z,s[15]=v*S+y*Q+w*k+C*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],A=e[9],l=e[13],c=e[2],u=e[6],f=e[10],d=e[14],h=e[3],p=e[7],m=e[11],g=e[15];return h*(+s*A*u-i*l*u-s*a*f+r*l*f+i*a*d-r*A*d)+p*(+t*A*d-t*l*f+s*o*f-i*o*d+i*l*c-s*A*c)+m*(+t*l*u-t*a*d-s*o*u+r*o*d+s*a*c-r*l*c)+g*(-i*a*c-t*A*u+t*a*f+i*o*u-r*o*f+r*A*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],A=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11],h=e[12],p=e[13],m=e[14],g=e[15],v=u*m*l-p*f*l+p*A*d-a*m*d-u*A*g+a*f*g,y=h*f*l-c*m*l-h*A*d+o*m*d+c*A*g-o*f*g,w=c*p*l-h*u*l+h*a*d-o*p*d-c*a*g+o*u*g,C=h*u*A-c*p*A-h*a*f+o*p*f+c*a*m-o*u*m,b=t*v+r*y+i*w+s*C;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/b;return e[0]=v*F,e[1]=(p*f*s-u*m*s-p*i*d+r*m*d+u*i*g-r*f*g)*F,e[2]=(a*m*s-p*A*s+p*i*l-r*m*l-a*i*g+r*A*g)*F,e[3]=(u*A*s-a*f*s-u*i*l+r*f*l+a*i*d-r*A*d)*F,e[4]=y*F,e[5]=(c*m*s-h*f*s+h*i*d-t*m*d-c*i*g+t*f*g)*F,e[6]=(h*A*s-o*m*s-h*i*l+t*m*l+o*i*g-t*A*g)*F,e[7]=(o*f*s-c*A*s+c*i*l-t*f*l-o*i*d+t*A*d)*F,e[8]=w*F,e[9]=(h*u*s-c*p*s-h*r*d+t*p*d+c*r*g-t*u*g)*F,e[10]=(o*p*s-h*a*s+h*r*l-t*p*l-o*r*g+t*a*g)*F,e[11]=(c*a*s-o*u*s-c*r*l+t*u*l+o*r*d-t*a*d)*F,e[12]=C*F,e[13]=(c*p*i-h*u*i+h*r*f-t*p*f-c*r*m+t*u*m)*F,e[14]=(h*a*i-o*p*i-h*r*A+t*p*A+o*r*m-t*a*m)*F,e[15]=(o*u*i-c*a*i+c*r*A-t*u*A-o*r*f+t*a*f)*F,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,A=e.z,l=s*o,c=s*a;return this.set(l*o+r,l*a-i*A,l*A+i*a,0,l*a+i*A,c*a+r,c*A-i*o,0,l*A-i*a,c*A+i*o,s*A*A+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,A=t._w,l=s+s,c=o+o,u=a+a,f=s*l,d=s*c,h=s*u,p=o*c,m=o*u,g=a*u,v=A*l,y=A*c,w=A*u,C=r.x,b=r.y,F=r.z;return i[0]=(1-(p+g))*C,i[1]=(d+w)*C,i[2]=(h-y)*C,i[3]=0,i[4]=(d-w)*b,i[5]=(1-(f+g))*b,i[6]=(m+v)*b,i[7]=0,i[8]=(h+y)*F,i[9]=(m-v)*F,i[10]=(1-(f+p))*F,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Gu.set(i[0],i[1],i[2]).length();const o=Gu.set(i[4],i[5],i[6]).length(),a=Gu.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],go.copy(this);const l=1/s,c=1/o,u=1/a;return go.elements[0]*=l,go.elements[1]*=l,go.elements[2]*=l,go.elements[4]*=c,go.elements[5]*=c,go.elements[6]*=c,go.elements[8]*=u,go.elements[9]*=u,go.elements[10]*=u,t.setFromRotationMatrix(go),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){const a=this.elements,A=2*s/(t-e),l=2*s/(r-i),c=(t+e)/(t-e),u=(r+i)/(r-i),f=-(o+s)/(o-s),d=-2*o*s/(o-s);return a[0]=A,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,A=1/(t-e),l=1/(r-i),c=1/(o-s),u=(t+e)*A,f=(r+i)*l,d=(o+s)*c;return a[0]=2*A,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Gu=new z,go=new Oe,d7=new z(0,0,0),h7=new z(1,1,1),HA=new z,sv=new z,Li=new z,LM=new Oe,PM=new et;class Jr{constructor(e=0,t=0,r=0,i=Jr.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],A=i[1],l=i[5],c=i[9],u=i[2],f=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(or(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,l),this._z=0);break;case"YXZ":this._x=Math.asin(-or(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(A,l)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(or(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(A,s));break;case"ZYX":this._y=Math.asin(-or(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(A,s)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(or(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-or(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,l),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return LM.makeRotationFromQuaternion(e),this.setFromRotationMatrix(LM,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return PM.setFromEuler(this),this.setFromQuaternion(PM,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Jr.DefaultOrder="XYZ";Jr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class z_{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let p7=0;const WM=new z,Ju=new et,Pa=new Oe,ov=new z,bp=new z,g7=new z,m7=new et,OM=new z(1,0,0),ZM=new z(0,1,0),GM=new z(0,0,1),v7={type:"added"},JM={type:"removed"};class kt extends oc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:p7++}),this.uuid=To(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=kt.DefaultUp.clone();const e=new z,t=new Jr,r=new et,i=new z(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Oe},normalMatrix:{value:new Mn}}),this.matrix=new Oe,this.matrixWorld=new Oe,this.matrixAutoUpdate=kt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=kt.DefaultMatrixWorldAutoUpdate,this.layers=new z_,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ju.setFromAxisAngle(e,t),this.quaternion.multiply(Ju),this}rotateOnWorldAxis(e,t){return Ju.setFromAxisAngle(e,t),this.quaternion.premultiply(Ju),this}rotateX(e){return this.rotateOnAxis(OM,e)}rotateY(e){return this.rotateOnAxis(ZM,e)}rotateZ(e){return this.rotateOnAxis(GM,e)}translateOnAxis(e,t){return WM.copy(e).applyQuaternion(this.quaternion),this.position.add(WM.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(OM,e)}translateY(e){return this.translateOnAxis(ZM,e)}translateZ(e){return this.translateOnAxis(GM,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Pa.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?ov.copy(e):ov.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),bp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pa.lookAt(bp,ov,this.up):Pa.lookAt(ov,bp,this.up),this.quaternion.setFromRotationMatrix(Pa),i&&(Pa.extractRotation(i.matrixWorld),Ju.setFromRotationMatrix(Pa),this.quaternion.premultiply(Ju.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(v7)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(JM)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(JM)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Pa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Pa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Pa),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bp,e,g7),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bp,m7,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,A){return a[A.uuid]===void 0&&(a[A.uuid]=A.toJSON(e)),A.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const A=a.shapes;if(Array.isArray(A))for(let l=0,c=A.length;l<c;l++){const u=A[l];s(e.shapes,u)}else s(e.shapes,A)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let A=0,l=this.material.length;A<l;A++)a.push(s(e.materials,this.material[A]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const A=this.animations[a];i.animations.push(s(e.animations,A))}}if(t){const a=o(e.geometries),A=o(e.materials),l=o(e.textures),c=o(e.images),u=o(e.shapes),f=o(e.skeletons),d=o(e.animations),h=o(e.nodes);a.length>0&&(r.geometries=a),A.length>0&&(r.materials=A),l.length>0&&(r.textures=l),c.length>0&&(r.images=c),u.length>0&&(r.shapes=u),f.length>0&&(r.skeletons=f),d.length>0&&(r.animations=d),h.length>0&&(r.nodes=h)}return r.object=i,r;function o(a){const A=[];for(const l in a){const c=a[l];delete c.metadata,A.push(c)}return A}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}kt.DefaultUp=new z(0,1,0);kt.DefaultMatrixAutoUpdate=!0;kt.DefaultMatrixWorldAutoUpdate=!0;const mo=new z,Wa=new z,Zx=new z,Oa=new z,Hu=new z,zu=new z,HM=new z,Gx=new z,Jx=new z,Hx=new z;class qi{constructor(e=new z,t=new z,r=new z){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),mo.subVectors(e,t),i.cross(mo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){mo.subVectors(i,t),Wa.subVectors(r,t),Zx.subVectors(e,t);const o=mo.dot(mo),a=mo.dot(Wa),A=mo.dot(Zx),l=Wa.dot(Wa),c=Wa.dot(Zx),u=o*l-a*a;if(u===0)return s.set(-2,-1,-1);const f=1/u,d=(l*A-a*c)*f,h=(o*c-a*A)*f;return s.set(1-d-h,h,d)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Oa),Oa.x>=0&&Oa.y>=0&&Oa.x+Oa.y<=1}static getUV(e,t,r,i,s,o,a,A){return this.getBarycoord(e,t,r,i,Oa),A.set(0,0),A.addScaledVector(s,Oa.x),A.addScaledVector(o,Oa.y),A.addScaledVector(a,Oa.z),A}static isFrontFacing(e,t,r,i){return mo.subVectors(r,t),Wa.subVectors(e,t),mo.cross(Wa).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return mo.subVectors(this.c,this.b),Wa.subVectors(this.a,this.b),mo.cross(Wa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return qi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return qi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return qi.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return qi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return qi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Hu.subVectors(i,r),zu.subVectors(s,r),Gx.subVectors(e,r);const A=Hu.dot(Gx),l=zu.dot(Gx);if(A<=0&&l<=0)return t.copy(r);Jx.subVectors(e,i);const c=Hu.dot(Jx),u=zu.dot(Jx);if(c>=0&&u<=c)return t.copy(i);const f=A*u-c*l;if(f<=0&&A>=0&&c<=0)return o=A/(A-c),t.copy(r).addScaledVector(Hu,o);Hx.subVectors(e,s);const d=Hu.dot(Hx),h=zu.dot(Hx);if(h>=0&&d<=h)return t.copy(s);const p=d*l-A*h;if(p<=0&&l>=0&&h<=0)return a=l/(l-h),t.copy(r).addScaledVector(zu,a);const m=c*h-d*u;if(m<=0&&u-c>=0&&d-h>=0)return HM.subVectors(s,i),a=(u-c)/(u-c+(d-h)),t.copy(i).addScaledVector(HM,a);const g=1/(m+p+f);return o=p*g,a=f*g,t.copy(r).addScaledVector(Hu,o).addScaledVector(zu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let y7=0,Os=class extends oc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:y7++}),this.uuid=To(),this.name="",this.type="Material",this.blending=_d,this.side=Ia,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=NO,this.blendDst=kO,this.blendEquation=bf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=qF,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Yj,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Rx,this.stencilZFail=Rx,this.stencilZPass=Rx,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==_d&&(r.blending=this.blending),this.side!==Ia&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const A=s[a];delete A.metadata,o.push(A)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}};class is extends Os{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=NC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Jn=new z,av=new Ge;class st{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=tE,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)av.fromBufferAttribute(this,t),av.applyMatrix3(e),this.setXY(t,av.x,av.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.applyMatrix3(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.applyMatrix4(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.applyNormalMatrix(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.transformDirection(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=hA(t,this.array)),t}setX(e,t){return this.normalized&&(t=tn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=hA(t,this.array)),t}setY(e,t){return this.normalized&&(t=tn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=hA(t,this.array)),t}setZ(e,t){return this.normalized&&(t=tn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=hA(t,this.array)),t}setW(e,t){return this.normalized&&(t=tn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array),i=tn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array),i=tn(i,this.array),s=tn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==tE&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class DC extends st{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class HO extends st{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class vn extends st{constructor(e,t,r){super(new Float32Array(e),t,r)}}let B7=0;const Bs=new Oe,zx=new kt,Xu=new z,Pi=new no,xp=new no,ur=new z;class zt extends oc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:B7++}),this.uuid=To(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(OO(e)?HO:DC)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Mn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Bs.makeRotationFromQuaternion(e),this.applyMatrix4(Bs),this}rotateX(e){return Bs.makeRotationX(e),this.applyMatrix4(Bs),this}rotateY(e){return Bs.makeRotationY(e),this.applyMatrix4(Bs),this}rotateZ(e){return Bs.makeRotationZ(e),this.applyMatrix4(Bs),this}translate(e,t,r){return Bs.makeTranslation(e,t,r),this.applyMatrix4(Bs),this}scale(e,t,r){return Bs.makeScale(e,t,r),this.applyMatrix4(Bs),this}lookAt(e){return zx.lookAt(e),zx.updateMatrix(),this.applyMatrix4(zx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xu).negate(),this.translate(Xu.x,Xu.y,Xu.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new vn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new no);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Pi.setFromBufferAttribute(s),this.morphTargetsRelative?(ur.addVectors(this.boundingBox.min,Pi.min),this.boundingBox.expandByPoint(ur),ur.addVectors(this.boundingBox.max,Pi.max),this.boundingBox.expandByPoint(ur)):(this.boundingBox.expandByPoint(Pi.min),this.boundingBox.expandByPoint(Pi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Cu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new z,1/0);return}if(e){const r=this.boundingSphere.center;if(Pi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];xp.setFromBufferAttribute(a),this.morphTargetsRelative?(ur.addVectors(Pi.min,xp.min),Pi.expandByPoint(ur),ur.addVectors(Pi.max,xp.max),Pi.expandByPoint(ur)):(Pi.expandByPoint(xp.min),Pi.expandByPoint(xp.max))}Pi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)ur.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(ur));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],A=this.morphTargetsRelative;for(let l=0,c=a.count;l<c;l++)ur.fromBufferAttribute(a,l),A&&(Xu.fromBufferAttribute(e,l),ur.add(Xu)),i=Math.max(i,r.distanceToSquared(ur))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new st(new Float32Array(4*a),4));const A=this.getAttribute("tangent").array,l=[],c=[];for(let T=0;T<a;T++)l[T]=new z,c[T]=new z;const u=new z,f=new z,d=new z,h=new Ge,p=new Ge,m=new Ge,g=new z,v=new z;function y(T,H,X){u.fromArray(i,T*3),f.fromArray(i,H*3),d.fromArray(i,X*3),h.fromArray(o,T*2),p.fromArray(o,H*2),m.fromArray(o,X*2),f.sub(u),d.sub(u),p.sub(h),m.sub(h);const Q=1/(p.x*m.y-m.x*p.y);isFinite(Q)&&(g.copy(f).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(Q),v.copy(d).multiplyScalar(p.x).addScaledVector(f,-m.x).multiplyScalar(Q),l[T].add(g),l[H].add(g),l[X].add(g),c[T].add(v),c[H].add(v),c[X].add(v))}let w=this.groups;w.length===0&&(w=[{start:0,count:r.length}]);for(let T=0,H=w.length;T<H;++T){const X=w[T],Q=X.start,B=X.count;for(let E=Q,R=Q+B;E<R;E+=3)y(r[E+0],r[E+1],r[E+2])}const C=new z,b=new z,F=new z,I=new z;function S(T){F.fromArray(s,T*3),I.copy(F);const H=l[T];C.copy(H),C.sub(F.multiplyScalar(F.dot(H))).normalize(),b.crossVectors(I,H);const Q=b.dot(c[T])<0?-1:1;A[T*4]=C.x,A[T*4+1]=C.y,A[T*4+2]=C.z,A[T*4+3]=Q}for(let T=0,H=w.length;T<H;++T){const X=w[T],Q=X.start,B=X.count;for(let E=Q,R=Q+B;E<R;E+=3)S(r[E+0]),S(r[E+1]),S(r[E+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new st(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,d=r.count;f<d;f++)r.setXYZ(f,0,0,0);const i=new z,s=new z,o=new z,a=new z,A=new z,l=new z,c=new z,u=new z;if(e)for(let f=0,d=e.count;f<d;f+=3){const h=e.getX(f+0),p=e.getX(f+1),m=e.getX(f+2);i.fromBufferAttribute(t,h),s.fromBufferAttribute(t,p),o.fromBufferAttribute(t,m),c.subVectors(o,s),u.subVectors(i,s),c.cross(u),a.fromBufferAttribute(r,h),A.fromBufferAttribute(r,p),l.fromBufferAttribute(r,m),a.add(c),A.add(c),l.add(c),r.setXYZ(h,a.x,a.y,a.z),r.setXYZ(p,A.x,A.y,A.z),r.setXYZ(m,l.x,l.y,l.z)}else for(let f=0,d=t.count;f<d;f+=3)i.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),c.subVectors(o,s),u.subVectors(i,s),c.cross(u),r.setXYZ(f+0,c.x,c.y,c.z),r.setXYZ(f+1,c.x,c.y,c.z),r.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ur.fromBufferAttribute(e,t),ur.normalize(),e.setXYZ(t,ur.x,ur.y,ur.z)}toNonIndexed(){function e(a,A){const l=a.array,c=a.itemSize,u=a.normalized,f=new l.constructor(A.length*c);let d=0,h=0;for(let p=0,m=A.length;p<m;p++){a.isInterleavedBufferAttribute?d=A[p]*a.data.stride+a.offset:d=A[p]*c;for(let g=0;g<c;g++)f[h++]=l[d++]}return new st(f,c,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new zt,r=this.index.array,i=this.attributes;for(const a in i){const A=i[a],l=e(A,r);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const A=[],l=s[a];for(let c=0,u=l.length;c<u;c++){const f=l[c],d=e(f,r);A.push(d)}t.morphAttributes[a]=A}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,A=o.length;a<A;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const A=this.parameters;for(const l in A)A[l]!==void 0&&(e[l]=A[l]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const A in r){const l=r[A];e.data.attributes[A]=l.toJSON(e.data)}const i={};let s=!1;for(const A in this.morphAttributes){const l=this.morphAttributes[A],c=[];for(let u=0,f=l.length;u<f;u++){const d=l[u];c.push(d.toJSON(e.data))}c.length>0&&(i[A]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const l in i){const c=i[l];this.setAttribute(l,c.clone(t))}const s=e.morphAttributes;for(const l in s){const c=[],u=s[l];for(let f=0,d=u.length;f<d;f++)c.push(u[f].clone(t));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const u=o[l];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const A=e.boundingSphere;return A!==null&&(this.boundingSphere=A.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const zM=new Oe,Yu=new i0,Xx=new Cu,zA=new z,XA=new z,YA=new z,Yx=new z,Kx=new z,jx=new z,Av=new z,lv=new z,cv=new z,uv=new Ge,fv=new Ge,dv=new Ge,$x=new z,hv=new z;class Tn extends kt{constructor(e=new zt,t=new is){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),Xx.copy(r.boundingSphere),Xx.applyMatrix4(s),e.ray.intersectsSphere(Xx)===!1)||(zM.copy(s).invert(),Yu.copy(e.ray).applyMatrix4(zM),r.boundingBox!==null&&Yu.intersectsBox(r.boundingBox)===!1))return;let o;const a=r.index,A=r.attributes.position,l=r.morphAttributes.position,c=r.morphTargetsRelative,u=r.attributes.uv,f=r.attributes.uv2,d=r.groups,h=r.drawRange;if(a!==null)if(Array.isArray(i))for(let p=0,m=d.length;p<m;p++){const g=d[p],v=i[g.materialIndex],y=Math.max(g.start,h.start),w=Math.min(a.count,Math.min(g.start+g.count,h.start+h.count));for(let C=y,b=w;C<b;C+=3){const F=a.getX(C),I=a.getX(C+1),S=a.getX(C+2);o=pv(this,v,e,Yu,A,l,c,u,f,F,I,S),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{const p=Math.max(0,h.start),m=Math.min(a.count,h.start+h.count);for(let g=p,v=m;g<v;g+=3){const y=a.getX(g),w=a.getX(g+1),C=a.getX(g+2);o=pv(this,i,e,Yu,A,l,c,u,f,y,w,C),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}else if(A!==void 0)if(Array.isArray(i))for(let p=0,m=d.length;p<m;p++){const g=d[p],v=i[g.materialIndex],y=Math.max(g.start,h.start),w=Math.min(A.count,Math.min(g.start+g.count,h.start+h.count));for(let C=y,b=w;C<b;C+=3){const F=C,I=C+1,S=C+2;o=pv(this,v,e,Yu,A,l,c,u,f,F,I,S),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{const p=Math.max(0,h.start),m=Math.min(A.count,h.start+h.count);for(let g=p,v=m;g<v;g+=3){const y=g,w=g+1,C=g+2;o=pv(this,i,e,Yu,A,l,c,u,f,y,w,C),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}}}function w7(n,e,t,r,i,s,o,a){let A;if(e.side===ci?A=r.intersectTriangle(o,s,i,!0,a):A=r.intersectTriangle(i,s,o,e.side!==Ii,a),A===null)return null;hv.copy(a),hv.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(hv);return l<t.near||l>t.far?null:{distance:l,point:hv.clone(),object:n}}function pv(n,e,t,r,i,s,o,a,A,l,c,u){zA.fromBufferAttribute(i,l),XA.fromBufferAttribute(i,c),YA.fromBufferAttribute(i,u);const f=n.morphTargetInfluences;if(s&&f){Av.set(0,0,0),lv.set(0,0,0),cv.set(0,0,0);for(let h=0,p=s.length;h<p;h++){const m=f[h],g=s[h];m!==0&&(Yx.fromBufferAttribute(g,l),Kx.fromBufferAttribute(g,c),jx.fromBufferAttribute(g,u),o?(Av.addScaledVector(Yx,m),lv.addScaledVector(Kx,m),cv.addScaledVector(jx,m)):(Av.addScaledVector(Yx.sub(zA),m),lv.addScaledVector(Kx.sub(XA),m),cv.addScaledVector(jx.sub(YA),m)))}zA.add(Av),XA.add(lv),YA.add(cv)}n.isSkinnedMesh&&(n.boneTransform(l,zA),n.boneTransform(c,XA),n.boneTransform(u,YA));const d=w7(n,e,t,r,zA,XA,YA,$x);if(d){a&&(uv.fromBufferAttribute(a,l),fv.fromBufferAttribute(a,c),dv.fromBufferAttribute(a,u),d.uv=qi.getUV($x,zA,XA,YA,uv,fv,dv,new Ge)),A&&(uv.fromBufferAttribute(A,l),fv.fromBufferAttribute(A,c),dv.fromBufferAttribute(A,u),d.uv2=qi.getUV($x,zA,XA,YA,uv,fv,dv,new Ge));const h={a:l,b:c,c:u,normal:new z,materialIndex:0};qi.getNormal(zA,XA,YA,h.normal),d.face=h}return d}class s0 extends zt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const A=[],l=[],c=[],u=[];let f=0,d=0;h("z","y","x",-1,-1,r,t,e,o,s,0),h("z","y","x",1,-1,r,t,-e,o,s,1),h("x","z","y",1,1,e,r,t,i,o,2),h("x","z","y",1,-1,e,r,-t,i,o,3),h("x","y","z",1,-1,e,t,r,i,s,4),h("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(A),this.setAttribute("position",new vn(l,3)),this.setAttribute("normal",new vn(c,3)),this.setAttribute("uv",new vn(u,2));function h(p,m,g,v,y,w,C,b,F,I,S){const T=w/F,H=C/I,X=w/2,Q=C/2,B=b/2,E=F+1,R=I+1;let k=0,M=0;const L=new z;for(let Z=0;Z<R;Z++){const P=Z*H-Q;for(let U=0;U<E;U++){const G=U*T-X;L[p]=G*v,L[m]=P*y,L[g]=B,l.push(L.x,L.y,L.z),L[p]=0,L[m]=0,L[g]=b>0?1:-1,c.push(L.x,L.y,L.z),u.push(U/F),u.push(1-Z/I),k+=1}}for(let Z=0;Z<I;Z++)for(let P=0;P<F;P++){const U=f+P+E*Z,G=f+P+E*(Z+1),oe=f+(P+1)+E*(Z+1),D=f+(P+1)+E*Z;A.push(U,G,D),A.push(G,oe,D),M+=6}a.addGroup(d,M,S),d+=M,f+=k}}static fromJSON(e){return new s0(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function oh(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function ti(n){const e={};for(let t=0;t<n.length;t++){const r=oh(n[t]);for(const i in r)e[i]=r[i]}return e}function C7(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const zO={clone:oh,merge:ti};var b7=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,x7=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ti extends Os{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=b7,this.fragmentShader=x7,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=oh(e.uniforms),this.uniformsGroups=C7(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class XO extends kt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Oe,this.projectionMatrix=new Oe,this.projectionMatrixInverse=new Oe}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ir extends XO{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=mm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ng*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return mm*2*Math.atan(Math.tan(Ng*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ng*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const A=o.fullWidth,l=o.fullHeight;s+=o.offsetX*i/A,t-=o.offsetY*r/l,i*=o.width/A,r*=o.height/l}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ku=90,ju=1;class I7 extends kt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new Ir(Ku,ju,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new z(1,0,0)),this.add(i);const s=new Ir(Ku,ju,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new z(-1,0,0)),this.add(s);const o=new Ir(Ku,ju,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new z(0,1,0)),this.add(o);const a=new Ir(Ku,ju,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new z(0,-1,0)),this.add(a);const A=new Ir(Ku,ju,e,t);A.layers=this.layers,A.up.set(0,-1,0),A.lookAt(new z(0,0,1)),this.add(A);const l=new Ir(Ku,ju,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new z(0,0,-1)),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,A,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,f=e.xr.enabled;e.toneMapping=yA,e.xr.enabled=!1;const d=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,A),r.texture.generateMipmaps=d,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=f,r.texture.needsPMREMUpdate=!0}}class YO extends qn{constructor(e,t,r,i,s,o,a,A,l,c){e=e!==void 0?e:[],t=t!==void 0?t:nh,super(e,t,r,i,s,o,a,A,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class F7 extends Hl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new YO(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ri}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new s0(5,5,5),s=new Ti({name:"CubemapFromEquirect",uniforms:oh(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ci,blending:Tl});s.uniforms.tEquirect.value=t;const o=new Tn(i,s),a=t.minFilter;return t.minFilter===wu&&(t.minFilter=ri),new I7(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const qx=new z,E7=new z,U7=new Mn;class AA{constructor(e=new z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=qx.subVectors(r,t).cross(E7.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(qx),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||U7.getNormalMatrix(e),i=this.coplanarPoint(qx).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const $u=new Cu,gv=new z;class X_{constructor(e=new AA,t=new AA,r=new AA,i=new AA,s=new AA,o=new AA){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],A=r[4],l=r[5],c=r[6],u=r[7],f=r[8],d=r[9],h=r[10],p=r[11],m=r[12],g=r[13],v=r[14],y=r[15];return t[0].setComponents(a-i,u-A,p-f,y-m).normalize(),t[1].setComponents(a+i,u+A,p+f,y+m).normalize(),t[2].setComponents(a+s,u+l,p+d,y+g).normalize(),t[3].setComponents(a-s,u-l,p-d,y-g).normalize(),t[4].setComponents(a-o,u-c,p-h,y-v).normalize(),t[5].setComponents(a+o,u+c,p+h,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),$u.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere($u)}intersectsSprite(e){return $u.center.set(0,0,0),$u.radius=.7071067811865476,$u.applyMatrix4(e.matrixWorld),this.intersectsSphere($u)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(gv.x=i.normal.x>0?e.max.x:e.min.x,gv.y=i.normal.y>0?e.max.y:e.min.y,gv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(gv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function KO(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function _7(n,e){const t=e.isWebGL2,r=new WeakMap;function i(l,c){const u=l.array,f=l.usage,d=n.createBuffer();n.bindBuffer(c,d),n.bufferData(c,u,f),l.onUploadCallback();let h;if(u instanceof Float32Array)h=5126;else if(u instanceof Uint16Array)if(l.isFloat16BufferAttribute)if(t)h=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else h=5123;else if(u instanceof Int16Array)h=5122;else if(u instanceof Uint32Array)h=5125;else if(u instanceof Int32Array)h=5124;else if(u instanceof Int8Array)h=5120;else if(u instanceof Uint8Array)h=5121;else if(u instanceof Uint8ClampedArray)h=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:d,type:h,bytesPerElement:u.BYTES_PER_ELEMENT,version:l.version}}function s(l,c,u){const f=c.array,d=c.updateRange;n.bindBuffer(u,l),d.count===-1?n.bufferSubData(u,0,f):(t?n.bufferSubData(u,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):n.bufferSubData(u,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1)}function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),r.get(l)}function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=r.get(l);c&&(n.deleteBuffer(c.buffer),r.delete(l))}function A(l,c){if(l.isGLBufferAttribute){const f=r.get(l);(!f||f.version<l.version)&&r.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}l.isInterleavedBufferAttribute&&(l=l.data);const u=r.get(l);u===void 0?r.set(l,i(l,c)):u.version<l.version&&(s(u.buffer,l,c),u.version=l.version)}return{get:o,remove:a,update:A}}class Qh extends zt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),A=Math.floor(i),l=a+1,c=A+1,u=e/a,f=t/A,d=[],h=[],p=[],m=[];for(let g=0;g<c;g++){const v=g*f-o;for(let y=0;y<l;y++){const w=y*u-s;h.push(w,-v,0),p.push(0,0,1),m.push(y/a),m.push(1-g/A)}}for(let g=0;g<A;g++)for(let v=0;v<a;v++){const y=v+l*g,w=v+l*(g+1),C=v+1+l*(g+1),b=v+1+l*g;d.push(y,w,b),d.push(w,C,b)}this.setIndex(d),this.setAttribute("position",new vn(h,3)),this.setAttribute("normal",new vn(p,3)),this.setAttribute("uv",new vn(m,2))}static fromJSON(e){return new Qh(e.width,e.height,e.widthSegments,e.heightSegments)}}var S7=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Q7=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,R7=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,M7=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,T7=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,N7=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,k7="vec3 transformed = vec3( position );",D7=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,V7=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,L7=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,P7=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,W7=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,O7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Z7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,G7=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,J7=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,H7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,z7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,X7=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Y7=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,K7=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,j7=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,$7=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,q7=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,e$=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,t$=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,n$="gl_FragColor = linearToOutputTexel( gl_FragColor );",r$=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,i$=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,s$=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,o$=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,a$=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,A$=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,l$=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,c$=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,u$=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,f$=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,d$=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,h$=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,p$=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,g$=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,m$=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,v$=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,y$=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,B$=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,w$=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,C$=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,b$=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,x$=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,I$=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,F$=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,E$=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,U$=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,_$=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,S$=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Q$=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,R$=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,M$=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,T$=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,N$=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,k$=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,D$=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,V$=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,L$=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,P$=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,W$=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,O$=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Z$=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,G$=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,J$=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,H$=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,z$=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,X$=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Y$=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,K$=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,j$=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,$$=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,q$=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,eq=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,tq=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,nq=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,rq=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,iq=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,sq=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,oq=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,aq=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Aq=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,lq=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,cq=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,uq=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,fq=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,dq=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,hq=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,pq=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,gq=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,mq=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,vq=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,yq=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,Bq=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,wq=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Cq=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,bq=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,xq=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Iq=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Fq=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Eq=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Uq=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,_q=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Sq=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Qq=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Rq=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Mq=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Tq=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Nq=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,kq=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Dq=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Vq=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Lq=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Pq=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Wq=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Oq=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Zq=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gq=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Jq=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hq=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,zq=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xq=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Yq=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Kq=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jq=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$q=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,qq=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eee=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tee=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nee=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ree=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iee=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,see=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,oee=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,aee=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,gt={alphamap_fragment:S7,alphamap_pars_fragment:Q7,alphatest_fragment:R7,alphatest_pars_fragment:M7,aomap_fragment:T7,aomap_pars_fragment:N7,begin_vertex:k7,beginnormal_vertex:D7,bsdfs:V7,iridescence_fragment:L7,bumpmap_pars_fragment:P7,clipping_planes_fragment:W7,clipping_planes_pars_fragment:O7,clipping_planes_pars_vertex:Z7,clipping_planes_vertex:G7,color_fragment:J7,color_pars_fragment:H7,color_pars_vertex:z7,color_vertex:X7,common:Y7,cube_uv_reflection_fragment:K7,defaultnormal_vertex:j7,displacementmap_pars_vertex:$7,displacementmap_vertex:q7,emissivemap_fragment:e$,emissivemap_pars_fragment:t$,encodings_fragment:n$,encodings_pars_fragment:r$,envmap_fragment:i$,envmap_common_pars_fragment:s$,envmap_pars_fragment:o$,envmap_pars_vertex:a$,envmap_physical_pars_fragment:y$,envmap_vertex:A$,fog_vertex:l$,fog_pars_vertex:c$,fog_fragment:u$,fog_pars_fragment:f$,gradientmap_pars_fragment:d$,lightmap_fragment:h$,lightmap_pars_fragment:p$,lights_lambert_fragment:g$,lights_lambert_pars_fragment:m$,lights_pars_begin:v$,lights_toon_fragment:B$,lights_toon_pars_fragment:w$,lights_phong_fragment:C$,lights_phong_pars_fragment:b$,lights_physical_fragment:x$,lights_physical_pars_fragment:I$,lights_fragment_begin:F$,lights_fragment_maps:E$,lights_fragment_end:U$,logdepthbuf_fragment:_$,logdepthbuf_pars_fragment:S$,logdepthbuf_pars_vertex:Q$,logdepthbuf_vertex:R$,map_fragment:M$,map_pars_fragment:T$,map_particle_fragment:N$,map_particle_pars_fragment:k$,metalnessmap_fragment:D$,metalnessmap_pars_fragment:V$,morphcolor_vertex:L$,morphnormal_vertex:P$,morphtarget_pars_vertex:W$,morphtarget_vertex:O$,normal_fragment_begin:Z$,normal_fragment_maps:G$,normal_pars_fragment:J$,normal_pars_vertex:H$,normal_vertex:z$,normalmap_pars_fragment:X$,clearcoat_normal_fragment_begin:Y$,clearcoat_normal_fragment_maps:K$,clearcoat_pars_fragment:j$,iridescence_pars_fragment:$$,output_fragment:q$,packing:eq,premultiplied_alpha_fragment:tq,project_vertex:nq,dithering_fragment:rq,dithering_pars_fragment:iq,roughnessmap_fragment:sq,roughnessmap_pars_fragment:oq,shadowmap_pars_fragment:aq,shadowmap_pars_vertex:Aq,shadowmap_vertex:lq,shadowmask_pars_fragment:cq,skinbase_vertex:uq,skinning_pars_vertex:fq,skinning_vertex:dq,skinnormal_vertex:hq,specularmap_fragment:pq,specularmap_pars_fragment:gq,tonemapping_fragment:mq,tonemapping_pars_fragment:vq,transmission_fragment:yq,transmission_pars_fragment:Bq,uv_pars_fragment:wq,uv_pars_vertex:Cq,uv_vertex:bq,uv2_pars_fragment:xq,uv2_pars_vertex:Iq,uv2_vertex:Fq,worldpos_vertex:Eq,background_vert:Uq,background_frag:_q,backgroundCube_vert:Sq,backgroundCube_frag:Qq,cube_vert:Rq,cube_frag:Mq,depth_vert:Tq,depth_frag:Nq,distanceRGBA_vert:kq,distanceRGBA_frag:Dq,equirect_vert:Vq,equirect_frag:Lq,linedashed_vert:Pq,linedashed_frag:Wq,meshbasic_vert:Oq,meshbasic_frag:Zq,meshlambert_vert:Gq,meshlambert_frag:Jq,meshmatcap_vert:Hq,meshmatcap_frag:zq,meshnormal_vert:Xq,meshnormal_frag:Yq,meshphong_vert:Kq,meshphong_frag:jq,meshphysical_vert:$q,meshphysical_frag:qq,meshtoon_vert:eee,meshtoon_frag:tee,points_vert:nee,points_frag:ree,shadow_vert:iee,shadow_frag:see,sprite_vert:oee,sprite_frag:aee},ke={common:{diffuse:{value:new Ne(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Mn},uv2Transform:{value:new Mn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ge(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ne(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ne(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Mn}},sprite:{diffuse:{value:new Ne(16777215)},opacity:{value:1},center:{value:new Ge(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Mn}}},ra={basic:{uniforms:ti([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.fog]),vertexShader:gt.meshbasic_vert,fragmentShader:gt.meshbasic_frag},lambert:{uniforms:ti([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,ke.lights,{emissive:{value:new Ne(0)}}]),vertexShader:gt.meshlambert_vert,fragmentShader:gt.meshlambert_frag},phong:{uniforms:ti([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,ke.lights,{emissive:{value:new Ne(0)},specular:{value:new Ne(1118481)},shininess:{value:30}}]),vertexShader:gt.meshphong_vert,fragmentShader:gt.meshphong_frag},standard:{uniforms:ti([ke.common,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.roughnessmap,ke.metalnessmap,ke.fog,ke.lights,{emissive:{value:new Ne(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:gt.meshphysical_vert,fragmentShader:gt.meshphysical_frag},toon:{uniforms:ti([ke.common,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.gradientmap,ke.fog,ke.lights,{emissive:{value:new Ne(0)}}]),vertexShader:gt.meshtoon_vert,fragmentShader:gt.meshtoon_frag},matcap:{uniforms:ti([ke.common,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,{matcap:{value:null}}]),vertexShader:gt.meshmatcap_vert,fragmentShader:gt.meshmatcap_frag},points:{uniforms:ti([ke.points,ke.fog]),vertexShader:gt.points_vert,fragmentShader:gt.points_frag},dashed:{uniforms:ti([ke.common,ke.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:gt.linedashed_vert,fragmentShader:gt.linedashed_frag},depth:{uniforms:ti([ke.common,ke.displacementmap]),vertexShader:gt.depth_vert,fragmentShader:gt.depth_frag},normal:{uniforms:ti([ke.common,ke.bumpmap,ke.normalmap,ke.displacementmap,{opacity:{value:1}}]),vertexShader:gt.meshnormal_vert,fragmentShader:gt.meshnormal_frag},sprite:{uniforms:ti([ke.sprite,ke.fog]),vertexShader:gt.sprite_vert,fragmentShader:gt.sprite_frag},background:{uniforms:{uvTransform:{value:new Mn},t2D:{value:null}},vertexShader:gt.background_vert,fragmentShader:gt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:gt.backgroundCube_vert,fragmentShader:gt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:gt.cube_vert,fragmentShader:gt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:gt.equirect_vert,fragmentShader:gt.equirect_frag},distanceRGBA:{uniforms:ti([ke.common,ke.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:gt.distanceRGBA_vert,fragmentShader:gt.distanceRGBA_frag},shadow:{uniforms:ti([ke.lights,ke.fog,{color:{value:new Ne(0)},opacity:{value:1}}]),vertexShader:gt.shadow_vert,fragmentShader:gt.shadow_frag}};ra.physical={uniforms:ti([ra.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ge(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Ne(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ge},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ne(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ne(1,1,1)},specularColorMap:{value:null}}]),vertexShader:gt.meshphysical_vert,fragmentShader:gt.meshphysical_frag};function Aee(n,e,t,r,i,s,o){const a=new Ne(0);let A=s===!0?0:1,l,c,u=null,f=0,d=null;function h(m,g){let v=!1,y=g.isScene===!0?g.background:null;y&&y.isTexture&&(y=(g.backgroundBlurriness>0?t:e).get(y));const w=n.xr,C=w.getSession&&w.getSession();C&&C.environmentBlendMode==="additive"&&(y=null),y===null?p(a,A):y&&y.isColor&&(p(y,1),v=!0),(n.autoClear||v)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||y.mapping===kC)?(c===void 0&&(c=new Tn(new s0(1,1,1),new Ti({name:"BackgroundCubeMaterial",uniforms:oh(ra.backgroundCube.uniforms),vertexShader:ra.backgroundCube.vertexShader,fragmentShader:ra.backgroundCube.fragmentShader,side:ci,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(b,F,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=y,c.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,(u!==y||f!==y.version||d!==n.toneMapping)&&(c.material.needsUpdate=!0,u=y,f=y.version,d=n.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):y&&y.isTexture&&(l===void 0&&(l=new Tn(new Qh(2,2),new Ti({name:"BackgroundMaterial",uniforms:oh(ra.background.uniforms),vertexShader:ra.background.vertexShader,fragmentShader:ra.background.fragmentShader,side:Ia,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(u!==y||f!==y.version||d!==n.toneMapping)&&(l.material.needsUpdate=!0,u=y,f=y.version,d=n.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}function p(m,g){r.buffers.color.setClear(m.r,m.g,m.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(m,g=1){a.set(m),A=g,p(a,A)},getClearAlpha:function(){return A},setClearAlpha:function(m){A=m,p(a,A)},render:h}}function lee(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},A=m(null);let l=A,c=!1;function u(B,E,R,k,M){let L=!1;if(o){const Z=p(k,R,E);l!==Z&&(l=Z,d(l.object)),L=g(B,k,R,M),L&&v(B,k,R,M)}else{const Z=E.wireframe===!0;(l.geometry!==k.id||l.program!==R.id||l.wireframe!==Z)&&(l.geometry=k.id,l.program=R.id,l.wireframe=Z,L=!0)}M!==null&&t.update(M,34963),(L||c)&&(c=!1,I(B,E,R,k),M!==null&&n.bindBuffer(34963,t.get(M).buffer))}function f(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function d(B){return r.isWebGL2?n.bindVertexArray(B):s.bindVertexArrayOES(B)}function h(B){return r.isWebGL2?n.deleteVertexArray(B):s.deleteVertexArrayOES(B)}function p(B,E,R){const k=R.wireframe===!0;let M=a[B.id];M===void 0&&(M={},a[B.id]=M);let L=M[E.id];L===void 0&&(L={},M[E.id]=L);let Z=L[k];return Z===void 0&&(Z=m(f()),L[k]=Z),Z}function m(B){const E=[],R=[],k=[];for(let M=0;M<i;M++)E[M]=0,R[M]=0,k[M]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:E,enabledAttributes:R,attributeDivisors:k,object:B,attributes:{},index:null}}function g(B,E,R,k){const M=l.attributes,L=E.attributes;let Z=0;const P=R.getAttributes();for(const U in P)if(P[U].location>=0){const oe=M[U];let D=L[U];if(D===void 0&&(U==="instanceMatrix"&&B.instanceMatrix&&(D=B.instanceMatrix),U==="instanceColor"&&B.instanceColor&&(D=B.instanceColor)),oe===void 0||oe.attribute!==D||D&&oe.data!==D.data)return!0;Z++}return l.attributesNum!==Z||l.index!==k}function v(B,E,R,k){const M={},L=E.attributes;let Z=0;const P=R.getAttributes();for(const U in P)if(P[U].location>=0){let oe=L[U];oe===void 0&&(U==="instanceMatrix"&&B.instanceMatrix&&(oe=B.instanceMatrix),U==="instanceColor"&&B.instanceColor&&(oe=B.instanceColor));const D={};D.attribute=oe,oe&&oe.data&&(D.data=oe.data),M[U]=D,Z++}l.attributes=M,l.attributesNum=Z,l.index=k}function y(){const B=l.newAttributes;for(let E=0,R=B.length;E<R;E++)B[E]=0}function w(B){C(B,0)}function C(B,E){const R=l.newAttributes,k=l.enabledAttributes,M=l.attributeDivisors;R[B]=1,k[B]===0&&(n.enableVertexAttribArray(B),k[B]=1),M[B]!==E&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](B,E),M[B]=E)}function b(){const B=l.newAttributes,E=l.enabledAttributes;for(let R=0,k=E.length;R<k;R++)E[R]!==B[R]&&(n.disableVertexAttribArray(R),E[R]=0)}function F(B,E,R,k,M,L){r.isWebGL2===!0&&(R===5124||R===5125)?n.vertexAttribIPointer(B,E,R,M,L):n.vertexAttribPointer(B,E,R,k,M,L)}function I(B,E,R,k){if(r.isWebGL2===!1&&(B.isInstancedMesh||k.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;y();const M=k.attributes,L=R.getAttributes(),Z=E.defaultAttributeValues;for(const P in L){const U=L[P];if(U.location>=0){let G=M[P];if(G===void 0&&(P==="instanceMatrix"&&B.instanceMatrix&&(G=B.instanceMatrix),P==="instanceColor"&&B.instanceColor&&(G=B.instanceColor)),G!==void 0){const oe=G.normalized,D=G.itemSize,K=t.get(G);if(K===void 0)continue;const ce=K.buffer,le=K.type,he=K.bytesPerElement;if(G.isInterleavedBufferAttribute){const $=G.data,ae=$.stride,te=G.offset;if($.isInstancedInterleavedBuffer){for(let Ae=0;Ae<U.locationSize;Ae++)C(U.location+Ae,$.meshPerAttribute);B.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=$.meshPerAttribute*$.count)}else for(let Ae=0;Ae<U.locationSize;Ae++)w(U.location+Ae);n.bindBuffer(34962,ce);for(let Ae=0;Ae<U.locationSize;Ae++)F(U.location+Ae,D/U.locationSize,le,oe,ae*he,(te+D/U.locationSize*Ae)*he)}else{if(G.isInstancedBufferAttribute){for(let $=0;$<U.locationSize;$++)C(U.location+$,G.meshPerAttribute);B.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let $=0;$<U.locationSize;$++)w(U.location+$);n.bindBuffer(34962,ce);for(let $=0;$<U.locationSize;$++)F(U.location+$,D/U.locationSize,le,oe,D*he,D/U.locationSize*$*he)}}else if(Z!==void 0){const oe=Z[P];if(oe!==void 0)switch(oe.length){case 2:n.vertexAttrib2fv(U.location,oe);break;case 3:n.vertexAttrib3fv(U.location,oe);break;case 4:n.vertexAttrib4fv(U.location,oe);break;default:n.vertexAttrib1fv(U.location,oe)}}}}b()}function S(){X();for(const B in a){const E=a[B];for(const R in E){const k=E[R];for(const M in k)h(k[M].object),delete k[M];delete E[R]}delete a[B]}}function T(B){if(a[B.id]===void 0)return;const E=a[B.id];for(const R in E){const k=E[R];for(const M in k)h(k[M].object),delete k[M];delete E[R]}delete a[B.id]}function H(B){for(const E in a){const R=a[E];if(R[B.id]===void 0)continue;const k=R[B.id];for(const M in k)h(k[M].object),delete k[M];delete R[B.id]}}function X(){Q(),c=!0,l!==A&&(l=A,d(l.object))}function Q(){A.geometry=null,A.program=null,A.wireframe=!1}return{setup:u,reset:X,resetDefaultState:Q,dispose:S,releaseStatesOfGeometry:T,releaseStatesOfProgram:H,initAttributes:y,enableAttribute:w,disableUnusedAttributes:b}}function cee(n,e,t,r){const i=r.isWebGL2;let s;function o(l){s=l}function a(l,c){n.drawArrays(s,l,c),t.update(c,s,1)}function A(l,c,u){if(u===0)return;let f,d;if(i)f=n,d="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[d](s,l,c,u),t.update(c,s,u)}this.setMode=o,this.render=a,this.renderInstances=A}function uee(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(F){if(F==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";F="mediump"}return F==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const A=s(a);A!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",A,"instead."),a=A);const l=o||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,u=n.getParameter(34930),f=n.getParameter(35660),d=n.getParameter(3379),h=n.getParameter(34076),p=n.getParameter(34921),m=n.getParameter(36347),g=n.getParameter(36348),v=n.getParameter(36349),y=f>0,w=o||e.has("OES_texture_float"),C=y&&w,b=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:w,floatVertexTextures:C,maxSamples:b}}function fee(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new AA,a=new Mn,A={value:null,needsUpdate:!1};this.uniform=A,this.numPlanes=0,this.numIntersection=0,this.init=function(u,f,d){const h=u.length!==0||f||r!==0||i;return i=f,t=c(u,d,0),r=u.length,h},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,l()},this.setState=function(u,f,d){const h=u.clippingPlanes,p=u.clipIntersection,m=u.clipShadows,g=n.get(u);if(!i||h===null||h.length===0||s&&!m)s?c(null):l();else{const v=s?0:r,y=v*4;let w=g.clippingState||null;A.value=w,w=c(h,f,y,d);for(let C=0;C!==y;++C)w[C]=t[C];g.clippingState=w,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=v}};function l(){A.value!==t&&(A.value=t,A.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(u,f,d,h){const p=u!==null?u.length:0;let m=null;if(p!==0){if(m=A.value,h!==!0||m===null){const g=d+p*4,v=f.matrixWorldInverse;a.getNormalMatrix(v),(m===null||m.length<g)&&(m=new Float32Array(g));for(let y=0,w=d;y!==p;++y,w+=4)o.copy(u[y]).applyMatrix4(v,a),o.normal.toArray(m,w),m[w+3]=o.constant}A.value=m,A.needsUpdate=!0}return e.numPlanes=p,e.numIntersection=0,m}}function dee(n){let e=new WeakMap;function t(o,a){return a===jB?o.mapping=nh:a===eE&&(o.mapping=rh),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===jB||a===eE)if(e.has(o)){const A=e.get(o).texture;return t(A,o.mapping)}else{const A=o.image;if(A&&A.height>0){const l=new F7(A.height/2);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",i),t(l.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const A=e.get(a);A!==void 0&&(e.delete(a),A.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class o0 extends XO{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,A=i-t;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=c*this.view.offsetY,A=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,A,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const fd=4,XM=[.125,.215,.35,.446,.526,.582],Mc=20,eI=new o0,YM=new Ne;let tI=null;const Ec=(1+Math.sqrt(5))/2,qu=1/Ec,KM=[new z(1,1,1),new z(-1,1,1),new z(1,1,-1),new z(-1,1,-1),new z(0,Ec,qu),new z(0,Ec,-qu),new z(qu,0,Ec),new z(-qu,0,Ec),new z(Ec,qu,0),new z(-Ec,qu,0)];class jM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){tI=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=eT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=qM(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(tI),e.scissorTest=!1,mv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===nh||e.mapping===rh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),tI=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:ri,minFilter:ri,generateMipmaps:!1,type:gm,format:Ci,encoding:Ys,depthBuffer:!1},i=$M(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=$M(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=hee(s)),this._blurMaterial=pee(s,e,t)}return i}_compileMaterial(e){const t=new Tn(this._lodPlanes[0],e);this._renderer.compile(t,eI)}_sceneToCubeUV(e,t,r,i){const a=new Ir(90,1,t,r),A=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear,f=c.toneMapping;c.getClearColor(YM),c.toneMapping=yA,c.autoClear=!1;const d=new is({name:"PMREM.Background",side:ci,depthWrite:!1,depthTest:!1}),h=new Tn(new s0,d);let p=!1;const m=e.background;m?m.isColor&&(d.color.copy(m),e.background=null,p=!0):(d.color.copy(YM),p=!0);for(let g=0;g<6;g++){const v=g%3;v===0?(a.up.set(0,A[g],0),a.lookAt(l[g],0,0)):v===1?(a.up.set(0,0,A[g]),a.lookAt(0,l[g],0)):(a.up.set(0,A[g],0),a.lookAt(0,0,l[g]));const y=this._cubeSize;mv(i,v*y,g>2?y:0,y,y),c.setRenderTarget(i),p&&c.render(h,a),c.render(e,a)}h.geometry.dispose(),h.material.dispose(),c.toneMapping=f,c.autoClear=u,e.background=m}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===nh||e.mapping===rh;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=eT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=qM());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Tn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const A=this._cubeSize;mv(t,0,0,3*A,2*A),r.setRenderTarget(t),r.render(o,eI)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=KM[(i-1)%KM.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const A=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,u=new Tn(this._lodPlanes[i],l),f=l.uniforms,d=this._sizeLods[r]-1,h=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*Mc-1),p=s/h,m=isFinite(s)?1+Math.floor(c*p):Mc;m>Mc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Mc}`);const g=[];let v=0;for(let F=0;F<Mc;++F){const I=F/p,S=Math.exp(-I*I/2);g.push(S),F===0?v+=S:F<m&&(v+=2*S)}for(let F=0;F<g.length;F++)g[F]=g[F]/v;f.envMap.value=e.texture,f.samples.value=m,f.weights.value=g,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:y}=this;f.dTheta.value=h,f.mipInt.value=y-r;const w=this._sizeLods[i],C=3*w*(i>y-fd?i-y+fd:0),b=4*(this._cubeSize-w);mv(t,C,b,3*w,2*w),A.setRenderTarget(t),A.render(u,eI)}}function hee(n){const e=[],t=[],r=[];let i=n;const s=n-fd+1+XM.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let A=1/a;o>n-fd?A=XM[o-n+fd-1]:o===0&&(A=0),r.push(A);const l=1/(a-2),c=-l,u=1+l,f=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,h=6,p=3,m=2,g=1,v=new Float32Array(p*h*d),y=new Float32Array(m*h*d),w=new Float32Array(g*h*d);for(let b=0;b<d;b++){const F=b%3*2/3-1,I=b>2?0:-1,S=[F,I,0,F+2/3,I,0,F+2/3,I+1,0,F,I,0,F+2/3,I+1,0,F,I+1,0];v.set(S,p*h*b),y.set(f,m*h*b);const T=[b,b,b,b,b,b];w.set(T,g*h*b)}const C=new zt;C.setAttribute("position",new st(v,p)),C.setAttribute("uv",new st(y,m)),C.setAttribute("faceIndex",new st(w,g)),e.push(C),i>fd&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function $M(n,e,t){const r=new Hl(n,e,t);return r.texture.mapping=kC,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function mv(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function pee(n,e,t){const r=new Float32Array(Mc),i=new z(0,1,0);return new Ti({name:"SphericalGaussianBlur",defines:{n:Mc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Y_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Tl,depthTest:!1,depthWrite:!1})}function qM(){return new Ti({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Y_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Tl,depthTest:!1,depthWrite:!1})}function eT(){return new Ti({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Y_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Tl,depthTest:!1,depthWrite:!1})}function Y_(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function gee(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const A=a.mapping,l=A===jB||A===eE,c=A===nh||A===rh;if(l||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=e.get(a);return t===null&&(t=new jM(n)),u=l?t.fromEquirectangular(a,u):t.fromCubemap(a,u),e.set(a,u),u.texture}else{if(e.has(a))return e.get(a).texture;{const u=a.image;if(l&&u&&u.height>0||c&&u&&i(u)){t===null&&(t=new jM(n));const f=l?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",s),f.texture}else return null}}}return a}function i(a){let A=0;const l=6;for(let c=0;c<l;c++)a[c]!==void 0&&A++;return A===l}function s(a){const A=a.target;A.removeEventListener("dispose",s);const l=e.get(A);l!==void 0&&(e.delete(A),l.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function mee(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function vee(n,e,t,r){const i={},s=new WeakMap;function o(u){const f=u.target;f.index!==null&&e.remove(f.index);for(const h in f.attributes)e.remove(f.attributes[h]);f.removeEventListener("dispose",o),delete i[f.id];const d=s.get(f);d&&(e.remove(d),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(u,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,t.memory.geometries++),f}function A(u){const f=u.attributes;for(const h in f)e.update(f[h],34962);const d=u.morphAttributes;for(const h in d){const p=d[h];for(let m=0,g=p.length;m<g;m++)e.update(p[m],34962)}}function l(u){const f=[],d=u.index,h=u.attributes.position;let p=0;if(d!==null){const v=d.array;p=d.version;for(let y=0,w=v.length;y<w;y+=3){const C=v[y+0],b=v[y+1],F=v[y+2];f.push(C,b,b,F,F,C)}}else{const v=h.array;p=h.version;for(let y=0,w=v.length/3-1;y<w;y+=3){const C=y+0,b=y+1,F=y+2;f.push(C,b,b,F,F,C)}}const m=new(OO(f)?HO:DC)(f,1);m.version=p;const g=s.get(u);g&&e.remove(g),s.set(u,m)}function c(u){const f=s.get(u);if(f){const d=u.index;d!==null&&f.version<d.version&&l(u)}else l(u);return s.get(u)}return{get:a,update:A,getWireframeAttribute:c}}function yee(n,e,t,r){const i=r.isWebGL2;let s;function o(f){s=f}let a,A;function l(f){a=f.type,A=f.bytesPerElement}function c(f,d){n.drawElements(s,d,a,f*A),t.update(d,s,1)}function u(f,d,h){if(h===0)return;let p,m;if(i)p=n,m="drawElementsInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",p===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,d,a,f*A,h),t.update(d,s,h)}this.setMode=o,this.setIndex=l,this.render=c,this.renderInstances=u}function Bee(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function wee(n,e){return n[0]-e[0]}function Cee(n,e){return Math.abs(e[1])-Math.abs(n[1])}function bee(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new Vt,a=[];for(let l=0;l<8;l++)a[l]=[l,0];function A(l,c,u,f){const d=l.morphTargetInfluences;if(e.isWebGL2===!0){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=h!==void 0?h.length:0;let m=s.get(c);if(m===void 0||m.count!==p){let E=function(){Q.dispose(),s.delete(c),c.removeEventListener("dispose",E)};m!==void 0&&m.texture.dispose();const y=c.morphAttributes.position!==void 0,w=c.morphAttributes.normal!==void 0,C=c.morphAttributes.color!==void 0,b=c.morphAttributes.position||[],F=c.morphAttributes.normal||[],I=c.morphAttributes.color||[];let S=0;y===!0&&(S=1),w===!0&&(S=2),C===!0&&(S=3);let T=c.attributes.position.count*S,H=1;T>e.maxTextureSize&&(H=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const X=new Float32Array(T*H*4*p),Q=new JO(X,T,H,p);Q.type=vl,Q.needsUpdate=!0;const B=S*4;for(let R=0;R<p;R++){const k=b[R],M=F[R],L=I[R],Z=T*H*4*R;for(let P=0;P<k.count;P++){const U=P*B;y===!0&&(o.fromBufferAttribute(k,P),X[Z+U+0]=o.x,X[Z+U+1]=o.y,X[Z+U+2]=o.z,X[Z+U+3]=0),w===!0&&(o.fromBufferAttribute(M,P),X[Z+U+4]=o.x,X[Z+U+5]=o.y,X[Z+U+6]=o.z,X[Z+U+7]=0),C===!0&&(o.fromBufferAttribute(L,P),X[Z+U+8]=o.x,X[Z+U+9]=o.y,X[Z+U+10]=o.z,X[Z+U+11]=L.itemSize===4?o.w:1)}}m={count:p,texture:Q,size:new Ge(T,H)},s.set(c,m),c.addEventListener("dispose",E)}let g=0;for(let y=0;y<d.length;y++)g+=d[y];const v=c.morphTargetsRelative?1:1-g;f.getUniforms().setValue(n,"morphTargetBaseInfluence",v),f.getUniforms().setValue(n,"morphTargetInfluences",d),f.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}else{const h=d===void 0?0:d.length;let p=r[c.id];if(p===void 0||p.length!==h){p=[];for(let w=0;w<h;w++)p[w]=[w,0];r[c.id]=p}for(let w=0;w<h;w++){const C=p[w];C[0]=w,C[1]=d[w]}p.sort(Cee);for(let w=0;w<8;w++)w<h&&p[w][1]?(a[w][0]=p[w][0],a[w][1]=p[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(wee);const m=c.morphAttributes.position,g=c.morphAttributes.normal;let v=0;for(let w=0;w<8;w++){const C=a[w],b=C[0],F=C[1];b!==Number.MAX_SAFE_INTEGER&&F?(m&&c.getAttribute("morphTarget"+w)!==m[b]&&c.setAttribute("morphTarget"+w,m[b]),g&&c.getAttribute("morphNormal"+w)!==g[b]&&c.setAttribute("morphNormal"+w,g[b]),i[w]=F,v+=F):(m&&c.hasAttribute("morphTarget"+w)===!0&&c.deleteAttribute("morphTarget"+w),g&&c.hasAttribute("morphNormal"+w)===!0&&c.deleteAttribute("morphNormal"+w),i[w]=0)}const y=c.morphTargetsRelative?1:1-v;f.getUniforms().setValue(n,"morphTargetBaseInfluence",y),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:A}}function xee(n,e,t,r){let i=new WeakMap;function s(A){const l=r.render.frame,c=A.geometry,u=e.get(A,c);return i.get(u)!==l&&(e.update(u),i.set(u,l)),A.isInstancedMesh&&(A.hasEventListener("dispose",a)===!1&&A.addEventListener("dispose",a),t.update(A.instanceMatrix,34962),A.instanceColor!==null&&t.update(A.instanceColor,34962)),u}function o(){i=new WeakMap}function a(A){const l=A.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),l.instanceColor!==null&&t.remove(l.instanceColor)}return{update:s,dispose:o}}const jO=new qn,$O=new JO,qO=new u7,eZ=new YO,tT=[],nT=[],rT=new Float32Array(16),iT=new Float32Array(9),sT=new Float32Array(4);function Rh(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=tT[i];if(s===void 0&&(s=new Float32Array(i),tT[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function lr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function cr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function VC(n,e){let t=nT[e];t===void 0&&(t=new Int32Array(e),nT[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Iee(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Fee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(lr(t,e))return;n.uniform2fv(this.addr,e),cr(t,e)}}function Eee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(lr(t,e))return;n.uniform3fv(this.addr,e),cr(t,e)}}function Uee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(lr(t,e))return;n.uniform4fv(this.addr,e),cr(t,e)}}function _ee(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(lr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),cr(t,e)}else{if(lr(t,r))return;sT.set(r),n.uniformMatrix2fv(this.addr,!1,sT),cr(t,r)}}function See(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(lr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),cr(t,e)}else{if(lr(t,r))return;iT.set(r),n.uniformMatrix3fv(this.addr,!1,iT),cr(t,r)}}function Qee(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(lr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),cr(t,e)}else{if(lr(t,r))return;rT.set(r),n.uniformMatrix4fv(this.addr,!1,rT),cr(t,r)}}function Ree(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Mee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(lr(t,e))return;n.uniform2iv(this.addr,e),cr(t,e)}}function Tee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(lr(t,e))return;n.uniform3iv(this.addr,e),cr(t,e)}}function Nee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(lr(t,e))return;n.uniform4iv(this.addr,e),cr(t,e)}}function kee(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Dee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(lr(t,e))return;n.uniform2uiv(this.addr,e),cr(t,e)}}function Vee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(lr(t,e))return;n.uniform3uiv(this.addr,e),cr(t,e)}}function Lee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(lr(t,e))return;n.uniform4uiv(this.addr,e),cr(t,e)}}function Pee(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||jO,i)}function Wee(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||qO,i)}function Oee(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||eZ,i)}function Zee(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||$O,i)}function Gee(n){switch(n){case 5126:return Iee;case 35664:return Fee;case 35665:return Eee;case 35666:return Uee;case 35674:return _ee;case 35675:return See;case 35676:return Qee;case 5124:case 35670:return Ree;case 35667:case 35671:return Mee;case 35668:case 35672:return Tee;case 35669:case 35673:return Nee;case 5125:return kee;case 36294:return Dee;case 36295:return Vee;case 36296:return Lee;case 35678:case 36198:case 36298:case 36306:case 35682:return Pee;case 35679:case 36299:case 36307:return Wee;case 35680:case 36300:case 36308:case 36293:return Oee;case 36289:case 36303:case 36311:case 36292:return Zee}}function Jee(n,e){n.uniform1fv(this.addr,e)}function Hee(n,e){const t=Rh(e,this.size,2);n.uniform2fv(this.addr,t)}function zee(n,e){const t=Rh(e,this.size,3);n.uniform3fv(this.addr,t)}function Xee(n,e){const t=Rh(e,this.size,4);n.uniform4fv(this.addr,t)}function Yee(n,e){const t=Rh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Kee(n,e){const t=Rh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function jee(n,e){const t=Rh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function $ee(n,e){n.uniform1iv(this.addr,e)}function qee(n,e){n.uniform2iv(this.addr,e)}function ete(n,e){n.uniform3iv(this.addr,e)}function tte(n,e){n.uniform4iv(this.addr,e)}function nte(n,e){n.uniform1uiv(this.addr,e)}function rte(n,e){n.uniform2uiv(this.addr,e)}function ite(n,e){n.uniform3uiv(this.addr,e)}function ste(n,e){n.uniform4uiv(this.addr,e)}function ote(n,e,t){const r=this.cache,i=e.length,s=VC(t,i);lr(r,s)||(n.uniform1iv(this.addr,s),cr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||jO,s[o])}function ate(n,e,t){const r=this.cache,i=e.length,s=VC(t,i);lr(r,s)||(n.uniform1iv(this.addr,s),cr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||qO,s[o])}function Ate(n,e,t){const r=this.cache,i=e.length,s=VC(t,i);lr(r,s)||(n.uniform1iv(this.addr,s),cr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||eZ,s[o])}function lte(n,e,t){const r=this.cache,i=e.length,s=VC(t,i);lr(r,s)||(n.uniform1iv(this.addr,s),cr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||$O,s[o])}function cte(n){switch(n){case 5126:return Jee;case 35664:return Hee;case 35665:return zee;case 35666:return Xee;case 35674:return Yee;case 35675:return Kee;case 35676:return jee;case 5124:case 35670:return $ee;case 35667:case 35671:return qee;case 35668:case 35672:return ete;case 35669:case 35673:return tte;case 5125:return nte;case 36294:return rte;case 36295:return ite;case 36296:return ste;case 35678:case 36198:case 36298:case 36306:case 35682:return ote;case 35679:case 36299:case 36307:return ate;case 35680:case 36300:case 36308:case 36293:return Ate;case 36289:case 36303:case 36311:case 36292:return lte}}class ute{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=Gee(t.type)}}class fte{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=cte(t.type)}}class dte{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const nI=/(\w+)(\])?(\[|\.)?/g;function oT(n,e){n.seq.push(e),n.map[e.id]=e}function hte(n,e,t){const r=n.name,i=r.length;for(nI.lastIndex=0;;){const s=nI.exec(r),o=nI.lastIndex;let a=s[1];const A=s[2]==="]",l=s[3];if(A&&(a=a|0),l===void 0||l==="["&&o+2===i){oT(t,l===void 0?new ute(a,n,e):new fte(a,n,e));break}else{let u=t.map[a];u===void 0&&(u=new dte(a),oT(t,u)),t=u}}}class Xy{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);hte(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],A=r[a.id];A.needsUpdate!==!1&&a.setValue(e,A.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function aT(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let pte=0;function gte(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function mte(n){switch(n){case Ys:return["Linear","( value )"];case dt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function AT(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+gte(n.getShaderSource(e),o)}else return i}function vte(n,e){const t=mte(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function yte(n,e){let t;switch(e){case Cj:t="Linear";break;case bj:t="Reinhard";break;case xj:t="OptimizedCineon";break;case Ij:t="ACESFilmic";break;case Fj:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Bte(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(og).join(`
`)}function wte(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Cte(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function og(n){return n!==""}function lT(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function cT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const bte=/^[ \t]*#include +<([\w\d./]+)>/gm;function iE(n){return n.replace(bte,xte)}function xte(n,e){const t=gt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return iE(t)}const Ite=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function uT(n){return n.replace(Ite,Fte)}function Fte(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function fT(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Ete(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===TO?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===ej?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===sg&&(e="SHADOWMAP_TYPE_VSM"),e}function Ute(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case nh:case rh:e="ENVMAP_TYPE_CUBE";break;case kC:e="ENVMAP_TYPE_CUBE_UV";break}return e}function _te(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case rh:e="ENVMAP_MODE_REFRACTION";break}return e}function Ste(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case NC:e="ENVMAP_BLENDING_MULTIPLY";break;case Bj:e="ENVMAP_BLENDING_MIX";break;case wj:e="ENVMAP_BLENDING_ADD";break}return e}function Qte(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Rte(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const A=Ete(t),l=Ute(t),c=_te(t),u=Ste(t),f=Qte(t),d=t.isWebGL2?"":Bte(t),h=wte(s),p=i.createProgram();let m,g,v=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(m=[h].filter(og).join(`
`),m.length>0&&(m+=`
`),g=[d,h].filter(og).join(`
`),g.length>0&&(g+=`
`)):(m=[fT(t),"#define SHADER_NAME "+t.shaderName,h,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+A:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(og).join(`
`),g=[d,fT(t),"#define SHADER_NAME "+t.shaderName,h,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+A:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==yA?"#define TONE_MAPPING":"",t.toneMapping!==yA?gt.tonemapping_pars_fragment:"",t.toneMapping!==yA?yte("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",gt.encodings_pars_fragment,vte("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(og).join(`
`)),o=iE(o),o=lT(o,t),o=cT(o,t),a=iE(a),a=lT(a,t),a=cT(a,t),o=uT(o),a=uT(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,g=["#define varying in",t.glslVersion===kM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===kM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const y=v+m+o,w=v+g+a,C=aT(i,35633,y),b=aT(i,35632,w);if(i.attachShader(p,C),i.attachShader(p,b),t.index0AttributeName!==void 0?i.bindAttribLocation(p,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(p,0,"position"),i.linkProgram(p),n.debug.checkShaderErrors){const S=i.getProgramInfoLog(p).trim(),T=i.getShaderInfoLog(C).trim(),H=i.getShaderInfoLog(b).trim();let X=!0,Q=!0;if(i.getProgramParameter(p,35714)===!1){X=!1;const B=AT(i,C,"vertex"),E=AT(i,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(p,35715)+`

Program Info Log: `+S+`
`+B+`
`+E)}else S!==""?console.warn("THREE.WebGLProgram: Program Info Log:",S):(T===""||H==="")&&(Q=!1);Q&&(this.diagnostics={runnable:X,programLog:S,vertexShader:{log:T,prefix:m},fragmentShader:{log:H,prefix:g}})}i.deleteShader(C),i.deleteShader(b);let F;this.getUniforms=function(){return F===void 0&&(F=new Xy(i,p)),F};let I;return this.getAttributes=function(){return I===void 0&&(I=Cte(i,p)),I},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(p),this.program=void 0},this.name=t.shaderName,this.id=pte++,this.cacheKey=e,this.usedTimes=1,this.program=p,this.vertexShader=C,this.fragmentShader=b,this}let Mte=0;class Tte{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Nte(e),t.set(e,r)),r}}class Nte{constructor(e){this.id=Mte++,this.code=e,this.usedTimes=0}}function kte(n,e,t,r,i,s,o){const a=new z_,A=new Tte,l=[],c=i.isWebGL2,u=i.logarithmicDepthBuffer,f=i.vertexTextures;let d=i.precision;const h={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(I,S,T,H,X){const Q=H.fog,B=X.geometry,E=I.isMeshStandardMaterial?H.environment:null,R=(I.isMeshStandardMaterial?t:e).get(I.envMap||E),k=R&&R.mapping===kC?R.image.height:null,M=h[I.type];I.precision!==null&&(d=i.getMaxPrecision(I.precision),d!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",d,"instead."));const L=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,Z=L!==void 0?L.length:0;let P=0;B.morphAttributes.position!==void 0&&(P=1),B.morphAttributes.normal!==void 0&&(P=2),B.morphAttributes.color!==void 0&&(P=3);let U,G,oe,D;if(M){const ae=ra[M];U=ae.vertexShader,G=ae.fragmentShader}else U=I.vertexShader,G=I.fragmentShader,A.update(I),oe=A.getVertexShaderID(I),D=A.getFragmentShaderID(I);const K=n.getRenderTarget(),ce=I.alphaTest>0,le=I.clearcoat>0,he=I.iridescence>0;return{isWebGL2:c,shaderID:M,shaderName:I.type,vertexShader:U,fragmentShader:G,defines:I.defines,customVertexShaderID:oe,customFragmentShaderID:D,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:d,instancing:X.isInstancedMesh===!0,instancingColor:X.isInstancedMesh===!0&&X.instanceColor!==null,supportsVertexTextures:f,outputEncoding:K===null?n.outputEncoding:K.isXRRenderTarget===!0?K.texture.encoding:Ys,map:!!I.map,matcap:!!I.matcap,envMap:!!R,envMapMode:R&&R.mapping,envMapCubeUVHeight:k,lightMap:!!I.lightMap,aoMap:!!I.aoMap,emissiveMap:!!I.emissiveMap,bumpMap:!!I.bumpMap,normalMap:!!I.normalMap,objectSpaceNormalMap:I.normalMapType===Xj,tangentSpaceNormalMap:I.normalMapType===Sh,decodeVideoTexture:!!I.map&&I.map.isVideoTexture===!0&&I.map.encoding===dt,clearcoat:le,clearcoatMap:le&&!!I.clearcoatMap,clearcoatRoughnessMap:le&&!!I.clearcoatRoughnessMap,clearcoatNormalMap:le&&!!I.clearcoatNormalMap,iridescence:he,iridescenceMap:he&&!!I.iridescenceMap,iridescenceThicknessMap:he&&!!I.iridescenceThicknessMap,displacementMap:!!I.displacementMap,roughnessMap:!!I.roughnessMap,metalnessMap:!!I.metalnessMap,specularMap:!!I.specularMap,specularIntensityMap:!!I.specularIntensityMap,specularColorMap:!!I.specularColorMap,opaque:I.transparent===!1&&I.blending===_d,alphaMap:!!I.alphaMap,alphaTest:ce,gradientMap:!!I.gradientMap,sheen:I.sheen>0,sheenColorMap:!!I.sheenColorMap,sheenRoughnessMap:!!I.sheenRoughnessMap,transmission:I.transmission>0,transmissionMap:!!I.transmissionMap,thicknessMap:!!I.thicknessMap,combine:I.combine,vertexTangents:!!I.normalMap&&!!B.attributes.tangent,vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!B.attributes.color&&B.attributes.color.itemSize===4,vertexUvs:!!I.map||!!I.bumpMap||!!I.normalMap||!!I.specularMap||!!I.alphaMap||!!I.emissiveMap||!!I.roughnessMap||!!I.metalnessMap||!!I.clearcoatMap||!!I.clearcoatRoughnessMap||!!I.clearcoatNormalMap||!!I.iridescenceMap||!!I.iridescenceThicknessMap||!!I.displacementMap||!!I.transmissionMap||!!I.thicknessMap||!!I.specularIntensityMap||!!I.specularColorMap||!!I.sheenColorMap||!!I.sheenRoughnessMap,uvsVertexOnly:!(I.map||I.bumpMap||I.normalMap||I.specularMap||I.alphaMap||I.emissiveMap||I.roughnessMap||I.metalnessMap||I.clearcoatNormalMap||I.iridescenceMap||I.iridescenceThicknessMap||I.transmission>0||I.transmissionMap||I.thicknessMap||I.specularIntensityMap||I.specularColorMap||I.sheen>0||I.sheenColorMap||I.sheenRoughnessMap)&&!!I.displacementMap,fog:!!Q,useFog:I.fog===!0,fogExp2:Q&&Q.isFogExp2,flatShading:!!I.flatShading,sizeAttenuation:I.sizeAttenuation,logarithmicDepthBuffer:u,skinning:X.isSkinnedMesh===!0,morphTargets:B.morphAttributes.position!==void 0,morphNormals:B.morphAttributes.normal!==void 0,morphColors:B.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:P,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numSpotLightMaps:S.spotLightMap.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numSpotLightShadowsWithMaps:S.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&T.length>0,shadowMapType:n.shadowMap.type,toneMapping:I.toneMapped?n.toneMapping:yA,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Ii,flipSided:I.side===ci,useDepthPacking:!!I.depthPacking,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionDerivatives:I.extensions&&I.extensions.derivatives,extensionFragDepth:I.extensions&&I.extensions.fragDepth,extensionDrawBuffers:I.extensions&&I.extensions.drawBuffers,extensionShaderTextureLOD:I.extensions&&I.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:I.customProgramCacheKey()}}function m(I){const S=[];if(I.shaderID?S.push(I.shaderID):(S.push(I.customVertexShaderID),S.push(I.customFragmentShaderID)),I.defines!==void 0)for(const T in I.defines)S.push(T),S.push(I.defines[T]);return I.isRawShaderMaterial===!1&&(g(S,I),v(S,I),S.push(n.outputEncoding)),S.push(I.customProgramCacheKey),S.join()}function g(I,S){I.push(S.precision),I.push(S.outputEncoding),I.push(S.envMapMode),I.push(S.envMapCubeUVHeight),I.push(S.combine),I.push(S.vertexUvs),I.push(S.fogExp2),I.push(S.sizeAttenuation),I.push(S.morphTargetsCount),I.push(S.morphAttributeCount),I.push(S.numDirLights),I.push(S.numPointLights),I.push(S.numSpotLights),I.push(S.numSpotLightMaps),I.push(S.numHemiLights),I.push(S.numRectAreaLights),I.push(S.numDirLightShadows),I.push(S.numPointLightShadows),I.push(S.numSpotLightShadows),I.push(S.numSpotLightShadowsWithMaps),I.push(S.shadowMapType),I.push(S.toneMapping),I.push(S.numClippingPlanes),I.push(S.numClipIntersection),I.push(S.depthPacking)}function v(I,S){a.disableAll(),S.isWebGL2&&a.enable(0),S.supportsVertexTextures&&a.enable(1),S.instancing&&a.enable(2),S.instancingColor&&a.enable(3),S.map&&a.enable(4),S.matcap&&a.enable(5),S.envMap&&a.enable(6),S.lightMap&&a.enable(7),S.aoMap&&a.enable(8),S.emissiveMap&&a.enable(9),S.bumpMap&&a.enable(10),S.normalMap&&a.enable(11),S.objectSpaceNormalMap&&a.enable(12),S.tangentSpaceNormalMap&&a.enable(13),S.clearcoat&&a.enable(14),S.clearcoatMap&&a.enable(15),S.clearcoatRoughnessMap&&a.enable(16),S.clearcoatNormalMap&&a.enable(17),S.iridescence&&a.enable(18),S.iridescenceMap&&a.enable(19),S.iridescenceThicknessMap&&a.enable(20),S.displacementMap&&a.enable(21),S.specularMap&&a.enable(22),S.roughnessMap&&a.enable(23),S.metalnessMap&&a.enable(24),S.gradientMap&&a.enable(25),S.alphaMap&&a.enable(26),S.alphaTest&&a.enable(27),S.vertexColors&&a.enable(28),S.vertexAlphas&&a.enable(29),S.vertexUvs&&a.enable(30),S.vertexTangents&&a.enable(31),S.uvsVertexOnly&&a.enable(32),I.push(a.mask),a.disableAll(),S.fog&&a.enable(0),S.useFog&&a.enable(1),S.flatShading&&a.enable(2),S.logarithmicDepthBuffer&&a.enable(3),S.skinning&&a.enable(4),S.morphTargets&&a.enable(5),S.morphNormals&&a.enable(6),S.morphColors&&a.enable(7),S.premultipliedAlpha&&a.enable(8),S.shadowMapEnabled&&a.enable(9),S.physicallyCorrectLights&&a.enable(10),S.doubleSided&&a.enable(11),S.flipSided&&a.enable(12),S.useDepthPacking&&a.enable(13),S.dithering&&a.enable(14),S.specularIntensityMap&&a.enable(15),S.specularColorMap&&a.enable(16),S.transmission&&a.enable(17),S.transmissionMap&&a.enable(18),S.thicknessMap&&a.enable(19),S.sheen&&a.enable(20),S.sheenColorMap&&a.enable(21),S.sheenRoughnessMap&&a.enable(22),S.decodeVideoTexture&&a.enable(23),S.opaque&&a.enable(24),I.push(a.mask)}function y(I){const S=h[I.type];let T;if(S){const H=ra[S];T=zO.clone(H.uniforms)}else T=I.uniforms;return T}function w(I,S){let T;for(let H=0,X=l.length;H<X;H++){const Q=l[H];if(Q.cacheKey===S){T=Q,++T.usedTimes;break}}return T===void 0&&(T=new Rte(n,S,I,s),l.push(T)),T}function C(I){if(--I.usedTimes===0){const S=l.indexOf(I);l[S]=l[l.length-1],l.pop(),I.destroy()}}function b(I){A.remove(I)}function F(){A.dispose()}return{getParameters:p,getProgramCacheKey:m,getUniforms:y,acquireProgram:w,releaseProgram:C,releaseShaderCache:b,programs:l,dispose:F}}function Dte(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function Vte(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function dT(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function hT(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(u,f,d,h,p,m){let g=n[e];return g===void 0?(g={id:u.id,object:u,geometry:f,material:d,groupOrder:h,renderOrder:u.renderOrder,z:p,group:m},n[e]=g):(g.id=u.id,g.object=u,g.geometry=f,g.material=d,g.groupOrder=h,g.renderOrder=u.renderOrder,g.z=p,g.group=m),e++,g}function a(u,f,d,h,p,m){const g=o(u,f,d,h,p,m);d.transmission>0?r.push(g):d.transparent===!0?i.push(g):t.push(g)}function A(u,f,d,h,p,m){const g=o(u,f,d,h,p,m);d.transmission>0?r.unshift(g):d.transparent===!0?i.unshift(g):t.unshift(g)}function l(u,f){t.length>1&&t.sort(u||Vte),r.length>1&&r.sort(f||dT),i.length>1&&i.sort(f||dT)}function c(){for(let u=e,f=n.length;u<f;u++){const d=n[u];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:A,finish:c,sort:l}}function Lte(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new hT,n.set(r,[o])):i>=s.length?(o=new hT,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Pte(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new z,color:new Ne};break;case"SpotLight":t={position:new z,direction:new z,color:new Ne,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new z,color:new Ne,distance:0,decay:0};break;case"HemisphereLight":t={direction:new z,skyColor:new Ne,groundColor:new Ne};break;case"RectAreaLight":t={color:new Ne,position:new z,halfWidth:new z,halfHeight:new z};break}return n[e.id]=t,t}}}function Wte(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Ote=0;function Zte(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Gte(n,e){const t=new Pte,r=Wte(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new z);const s=new z,o=new Oe,a=new Oe;function A(c,u){let f=0,d=0,h=0;for(let H=0;H<9;H++)i.probe[H].set(0,0,0);let p=0,m=0,g=0,v=0,y=0,w=0,C=0,b=0,F=0,I=0;c.sort(Zte);const S=u!==!0?Math.PI:1;for(let H=0,X=c.length;H<X;H++){const Q=c[H],B=Q.color,E=Q.intensity,R=Q.distance,k=Q.shadow&&Q.shadow.map?Q.shadow.map.texture:null;if(Q.isAmbientLight)f+=B.r*E*S,d+=B.g*E*S,h+=B.b*E*S;else if(Q.isLightProbe)for(let M=0;M<9;M++)i.probe[M].addScaledVector(Q.sh.coefficients[M],E);else if(Q.isDirectionalLight){const M=t.get(Q);if(M.color.copy(Q.color).multiplyScalar(Q.intensity*S),Q.castShadow){const L=Q.shadow,Z=r.get(Q);Z.shadowBias=L.bias,Z.shadowNormalBias=L.normalBias,Z.shadowRadius=L.radius,Z.shadowMapSize=L.mapSize,i.directionalShadow[p]=Z,i.directionalShadowMap[p]=k,i.directionalShadowMatrix[p]=Q.shadow.matrix,w++}i.directional[p]=M,p++}else if(Q.isSpotLight){const M=t.get(Q);M.position.setFromMatrixPosition(Q.matrixWorld),M.color.copy(B).multiplyScalar(E*S),M.distance=R,M.coneCos=Math.cos(Q.angle),M.penumbraCos=Math.cos(Q.angle*(1-Q.penumbra)),M.decay=Q.decay,i.spot[g]=M;const L=Q.shadow;if(Q.map&&(i.spotLightMap[F]=Q.map,F++,L.updateMatrices(Q),Q.castShadow&&I++),i.spotLightMatrix[g]=L.matrix,Q.castShadow){const Z=r.get(Q);Z.shadowBias=L.bias,Z.shadowNormalBias=L.normalBias,Z.shadowRadius=L.radius,Z.shadowMapSize=L.mapSize,i.spotShadow[g]=Z,i.spotShadowMap[g]=k,b++}g++}else if(Q.isRectAreaLight){const M=t.get(Q);M.color.copy(B).multiplyScalar(E),M.halfWidth.set(Q.width*.5,0,0),M.halfHeight.set(0,Q.height*.5,0),i.rectArea[v]=M,v++}else if(Q.isPointLight){const M=t.get(Q);if(M.color.copy(Q.color).multiplyScalar(Q.intensity*S),M.distance=Q.distance,M.decay=Q.decay,Q.castShadow){const L=Q.shadow,Z=r.get(Q);Z.shadowBias=L.bias,Z.shadowNormalBias=L.normalBias,Z.shadowRadius=L.radius,Z.shadowMapSize=L.mapSize,Z.shadowCameraNear=L.camera.near,Z.shadowCameraFar=L.camera.far,i.pointShadow[m]=Z,i.pointShadowMap[m]=k,i.pointShadowMatrix[m]=Q.shadow.matrix,C++}i.point[m]=M,m++}else if(Q.isHemisphereLight){const M=t.get(Q);M.skyColor.copy(Q.color).multiplyScalar(E*S),M.groundColor.copy(Q.groundColor).multiplyScalar(E*S),i.hemi[y]=M,y++}}v>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ke.LTC_FLOAT_1,i.rectAreaLTC2=ke.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=ke.LTC_HALF_1,i.rectAreaLTC2=ke.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=d,i.ambient[2]=h;const T=i.hash;(T.directionalLength!==p||T.pointLength!==m||T.spotLength!==g||T.rectAreaLength!==v||T.hemiLength!==y||T.numDirectionalShadows!==w||T.numPointShadows!==C||T.numSpotShadows!==b||T.numSpotMaps!==F)&&(i.directional.length=p,i.spot.length=g,i.rectArea.length=v,i.point.length=m,i.hemi.length=y,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=b,i.spotShadowMap.length=b,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=b+F-I,i.spotLightMap.length=F,i.numSpotLightShadowsWithMaps=I,T.directionalLength=p,T.pointLength=m,T.spotLength=g,T.rectAreaLength=v,T.hemiLength=y,T.numDirectionalShadows=w,T.numPointShadows=C,T.numSpotShadows=b,T.numSpotMaps=F,i.version=Ote++)}function l(c,u){let f=0,d=0,h=0,p=0,m=0;const g=u.matrixWorldInverse;for(let v=0,y=c.length;v<y;v++){const w=c[v];if(w.isDirectionalLight){const C=i.directional[f];C.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),f++}else if(w.isSpotLight){const C=i.spot[h];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),h++}else if(w.isRectAreaLight){const C=i.rectArea[p];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),a.identity(),o.copy(w.matrixWorld),o.premultiply(g),a.extractRotation(o),C.halfWidth.set(w.width*.5,0,0),C.halfHeight.set(0,w.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),p++}else if(w.isPointLight){const C=i.point[d];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),d++}else if(w.isHemisphereLight){const C=i.hemi[m];C.direction.setFromMatrixPosition(w.matrixWorld),C.direction.transformDirection(g),m++}}}return{setup:A,setupView:l,state:i}}function pT(n,e){const t=new Gte(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(u){r.push(u)}function a(u){i.push(u)}function A(u){t.setup(r,u)}function l(u){t.setupView(r,u)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:A,setupLightsView:l,pushLight:o,pushShadow:a}}function Jte(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let A;return a===void 0?(A=new pT(n,e),t.set(s,[A])):o>=a.length?(A=new pT(n,e),a.push(A)):A=a[o],A}function i(){t=new WeakMap}return{get:r,dispose:i}}class Hte extends Os{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Hj,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class zte extends Os{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new z,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Xte=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Yte=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Kte(n,e,t){let r=new X_;const i=new Ge,s=new Ge,o=new Vt,a=new Hte({depthPacking:zj}),A=new zte,l={},c=t.maxTextureSize,u={0:ci,1:Ia,2:Ii},f=new Ti({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ge},radius:{value:4}},vertexShader:Xte,fragmentShader:Yte}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const h=new zt;h.setAttribute("position",new st(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new Tn(h,f),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=TO,this.render=function(w,C,b){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||w.length===0)return;const F=n.getRenderTarget(),I=n.getActiveCubeFace(),S=n.getActiveMipmapLevel(),T=n.state;T.setBlending(Tl),T.buffers.color.setClear(1,1,1,1),T.buffers.depth.setTest(!0),T.setScissorTest(!1);for(let H=0,X=w.length;H<X;H++){const Q=w[H],B=Q.shadow;if(B===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(B.autoUpdate===!1&&B.needsUpdate===!1)continue;i.copy(B.mapSize);const E=B.getFrameExtents();if(i.multiply(E),s.copy(B.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/E.x),i.x=s.x*E.x,B.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/E.y),i.y=s.y*E.y,B.mapSize.y=s.y)),B.map===null){const k=this.type!==sg?{minFilter:mr,magFilter:mr}:{};B.map=new Hl(i.x,i.y,k),B.map.texture.name=Q.name+".shadowMap",B.camera.updateProjectionMatrix()}n.setRenderTarget(B.map),n.clear();const R=B.getViewportCount();for(let k=0;k<R;k++){const M=B.getViewport(k);o.set(s.x*M.x,s.y*M.y,s.x*M.z,s.y*M.w),T.viewport(o),B.updateMatrices(Q,k),r=B.getFrustum(),y(C,b,B.camera,Q,this.type)}B.isPointLightShadow!==!0&&this.type===sg&&g(B,b),B.needsUpdate=!1}m.needsUpdate=!1,n.setRenderTarget(F,I,S)};function g(w,C){const b=e.update(p);f.defines.VSM_SAMPLES!==w.blurSamples&&(f.defines.VSM_SAMPLES=w.blurSamples,d.defines.VSM_SAMPLES=w.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new Hl(i.x,i.y)),f.uniforms.shadow_pass.value=w.map.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,n.setRenderTarget(w.mapPass),n.clear(),n.renderBufferDirect(C,null,b,f,p,null),d.uniforms.shadow_pass.value=w.mapPass.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,n.setRenderTarget(w.map),n.clear(),n.renderBufferDirect(C,null,b,d,p,null)}function v(w,C,b,F,I,S){let T=null;const H=b.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(H!==void 0?T=H:T=b.isPointLight===!0?A:a,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0){const X=T.uuid,Q=C.uuid;let B=l[X];B===void 0&&(B={},l[X]=B);let E=B[Q];E===void 0&&(E=T.clone(),B[Q]=E),T=E}return T.visible=C.visible,T.wireframe=C.wireframe,S===sg?T.side=C.shadowSide!==null?C.shadowSide:C.side:T.side=C.shadowSide!==null?C.shadowSide:u[C.side],T.alphaMap=C.alphaMap,T.alphaTest=C.alphaTest,T.clipShadows=C.clipShadows,T.clippingPlanes=C.clippingPlanes,T.clipIntersection=C.clipIntersection,T.displacementMap=C.displacementMap,T.displacementScale=C.displacementScale,T.displacementBias=C.displacementBias,T.wireframeLinewidth=C.wireframeLinewidth,T.linewidth=C.linewidth,b.isPointLight===!0&&T.isMeshDistanceMaterial===!0&&(T.referencePosition.setFromMatrixPosition(b.matrixWorld),T.nearDistance=F,T.farDistance=I),T}function y(w,C,b,F,I){if(w.visible===!1)return;if(w.layers.test(C.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&I===sg)&&(!w.frustumCulled||r.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,w.matrixWorld);const H=e.update(w),X=w.material;if(Array.isArray(X)){const Q=H.groups;for(let B=0,E=Q.length;B<E;B++){const R=Q[B],k=X[R.materialIndex];if(k&&k.visible){const M=v(w,k,F,b.near,b.far,I);n.renderBufferDirect(b,null,H,M,w,R)}}}else if(X.visible){const Q=v(w,X,F,b.near,b.far,I);n.renderBufferDirect(b,null,H,Q,w,null)}}const T=w.children;for(let H=0,X=T.length;H<X;H++)y(T[H],C,b,F,I)}}function jte(n,e,t){const r=t.isWebGL2;function i(){let ie=!1;const we=new Vt;let xe=null;const Qe=new Vt(0,0,0,0);return{setMask:function(He){xe!==He&&!ie&&(n.colorMask(He,He,He,He),xe=He)},setLocked:function(He){ie=He},setClear:function(He,qe,ot,rn,wt){wt===!0&&(He*=rn,qe*=rn,ot*=rn),we.set(He,qe,ot,rn),Qe.equals(we)===!1&&(n.clearColor(He,qe,ot,rn),Qe.copy(we))},reset:function(){ie=!1,xe=null,Qe.set(-1,0,0,0)}}}function s(){let ie=!1,we=null,xe=null,Qe=null;return{setTest:function(He){He?ce(2929):le(2929)},setMask:function(He){we!==He&&!ie&&(n.depthMask(He),we=He)},setFunc:function(He){if(xe!==He){switch(He){case dj:n.depthFunc(512);break;case hj:n.depthFunc(519);break;case pj:n.depthFunc(513);break;case qF:n.depthFunc(515);break;case gj:n.depthFunc(514);break;case mj:n.depthFunc(518);break;case vj:n.depthFunc(516);break;case yj:n.depthFunc(517);break;default:n.depthFunc(515)}xe=He}},setLocked:function(He){ie=He},setClear:function(He){Qe!==He&&(n.clearDepth(He),Qe=He)},reset:function(){ie=!1,we=null,xe=null,Qe=null}}}function o(){let ie=!1,we=null,xe=null,Qe=null,He=null,qe=null,ot=null,rn=null,wt=null;return{setTest:function(nt){ie||(nt?ce(2960):le(2960))},setMask:function(nt){we!==nt&&!ie&&(n.stencilMask(nt),we=nt)},setFunc:function(nt,er,ht){(xe!==nt||Qe!==er||He!==ht)&&(n.stencilFunc(nt,er,ht),xe=nt,Qe=er,He=ht)},setOp:function(nt,er,ht){(qe!==nt||ot!==er||rn!==ht)&&(n.stencilOp(nt,er,ht),qe=nt,ot=er,rn=ht)},setLocked:function(nt){ie=nt},setClear:function(nt){wt!==nt&&(n.clearStencil(nt),wt=nt)},reset:function(){ie=!1,we=null,xe=null,Qe=null,He=null,qe=null,ot=null,rn=null,wt=null}}}const a=new i,A=new s,l=new o,c=new WeakMap,u=new WeakMap;let f={},d={},h=new WeakMap,p=[],m=null,g=!1,v=null,y=null,w=null,C=null,b=null,F=null,I=null,S=!1,T=null,H=null,X=null,Q=null,B=null;const E=n.getParameter(35661);let R=!1,k=0;const M=n.getParameter(7938);M.indexOf("WebGL")!==-1?(k=parseFloat(/^WebGL (\d)/.exec(M)[1]),R=k>=1):M.indexOf("OpenGL ES")!==-1&&(k=parseFloat(/^OpenGL ES (\d)/.exec(M)[1]),R=k>=2);let L=null,Z={};const P=n.getParameter(3088),U=n.getParameter(2978),G=new Vt().fromArray(P),oe=new Vt().fromArray(U);function D(ie,we,xe){const Qe=new Uint8Array(4),He=n.createTexture();n.bindTexture(ie,He),n.texParameteri(ie,10241,9728),n.texParameteri(ie,10240,9728);for(let qe=0;qe<xe;qe++)n.texImage2D(we+qe,0,6408,1,1,0,6408,5121,Qe);return He}const K={};K[3553]=D(3553,3553,1),K[34067]=D(34067,34069,6),a.setClear(0,0,0,1),A.setClear(1),l.setClear(0),ce(2929),A.setFunc(qF),Pe(!1),_e(cM),ce(2884),re(Tl);function ce(ie){f[ie]!==!0&&(n.enable(ie),f[ie]=!0)}function le(ie){f[ie]!==!1&&(n.disable(ie),f[ie]=!1)}function he(ie,we){return d[ie]!==we?(n.bindFramebuffer(ie,we),d[ie]=we,r&&(ie===36009&&(d[36160]=we),ie===36160&&(d[36009]=we)),!0):!1}function $(ie,we){let xe=p,Qe=!1;if(ie)if(xe=h.get(we),xe===void 0&&(xe=[],h.set(we,xe)),ie.isWebGLMultipleRenderTargets){const He=ie.texture;if(xe.length!==He.length||xe[0]!==36064){for(let qe=0,ot=He.length;qe<ot;qe++)xe[qe]=36064+qe;xe.length=He.length,Qe=!0}}else xe[0]!==36064&&(xe[0]=36064,Qe=!0);else xe[0]!==1029&&(xe[0]=1029,Qe=!0);Qe&&(t.isWebGL2?n.drawBuffers(xe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(xe))}function ae(ie){return m!==ie?(n.useProgram(ie),m=ie,!0):!1}const te={[bf]:32774,[nj]:32778,[rj]:32779};if(r)te[dM]=32775,te[hM]=32776;else{const ie=e.get("EXT_blend_minmax");ie!==null&&(te[dM]=ie.MIN_EXT,te[hM]=ie.MAX_EXT)}const Ae={[ij]:0,[sj]:1,[oj]:768,[NO]:770,[fj]:776,[cj]:774,[Aj]:772,[aj]:769,[kO]:771,[uj]:775,[lj]:773};function re(ie,we,xe,Qe,He,qe,ot,rn){if(ie===Tl){g===!0&&(le(3042),g=!1);return}if(g===!1&&(ce(3042),g=!0),ie!==tj){if(ie!==v||rn!==S){if((y!==bf||b!==bf)&&(n.blendEquation(32774),y=bf,b=bf),rn)switch(ie){case _d:n.blendFuncSeparate(1,771,1,771);break;case Au:n.blendFunc(1,1);break;case uM:n.blendFuncSeparate(0,769,0,1);break;case fM:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}else switch(ie){case _d:n.blendFuncSeparate(770,771,1,771);break;case Au:n.blendFunc(770,1);break;case uM:n.blendFuncSeparate(0,769,0,1);break;case fM:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}w=null,C=null,F=null,I=null,v=ie,S=rn}return}He=He||we,qe=qe||xe,ot=ot||Qe,(we!==y||He!==b)&&(n.blendEquationSeparate(te[we],te[He]),y=we,b=He),(xe!==w||Qe!==C||qe!==F||ot!==I)&&(n.blendFuncSeparate(Ae[xe],Ae[Qe],Ae[qe],Ae[ot]),w=xe,C=Qe,F=qe,I=ot),v=ie,S=null}function me(ie,we){ie.side===Ii?le(2884):ce(2884);let xe=ie.side===ci;we&&(xe=!xe),Pe(xe),ie.blending===_d&&ie.transparent===!1?re(Tl):re(ie.blending,ie.blendEquation,ie.blendSrc,ie.blendDst,ie.blendEquationAlpha,ie.blendSrcAlpha,ie.blendDstAlpha,ie.premultipliedAlpha),A.setFunc(ie.depthFunc),A.setTest(ie.depthTest),A.setMask(ie.depthWrite),a.setMask(ie.colorWrite);const Qe=ie.stencilWrite;l.setTest(Qe),Qe&&(l.setMask(ie.stencilWriteMask),l.setFunc(ie.stencilFunc,ie.stencilRef,ie.stencilFuncMask),l.setOp(ie.stencilFail,ie.stencilZFail,ie.stencilZPass)),Fe(ie.polygonOffset,ie.polygonOffsetFactor,ie.polygonOffsetUnits),ie.alphaToCoverage===!0?ce(32926):le(32926)}function Pe(ie){T!==ie&&(ie?n.frontFace(2304):n.frontFace(2305),T=ie)}function _e(ie){ie!==$8?(ce(2884),ie!==H&&(ie===cM?n.cullFace(1029):ie===q8?n.cullFace(1028):n.cullFace(1032))):le(2884),H=ie}function Se(ie){ie!==X&&(R&&n.lineWidth(ie),X=ie)}function Fe(ie,we,xe){ie?(ce(32823),(Q!==we||B!==xe)&&(n.polygonOffset(we,xe),Q=we,B=xe)):le(32823)}function Ue(ie){ie?ce(3089):le(3089)}function Me(ie){ie===void 0&&(ie=33984+E-1),L!==ie&&(n.activeTexture(ie),L=ie)}function W(ie,we,xe){xe===void 0&&(L===null?xe=33984+E-1:xe=L);let Qe=Z[xe];Qe===void 0&&(Qe={type:void 0,texture:void 0},Z[xe]=Qe),(Qe.type!==ie||Qe.texture!==we)&&(L!==xe&&(n.activeTexture(xe),L=xe),n.bindTexture(ie,we||K[ie]),Qe.type=ie,Qe.texture=we)}function O(){const ie=Z[L];ie!==void 0&&ie.type!==void 0&&(n.bindTexture(ie.type,null),ie.type=void 0,ie.texture=void 0)}function se(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function de(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Be(){try{n.texSubImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function V(){try{n.texSubImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function _(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function x(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function N(){try{n.texStorage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function j(){try{n.texStorage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function q(){try{n.texImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function ne(){try{n.texImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ce(ie){G.equals(ie)===!1&&(n.scissor(ie.x,ie.y,ie.z,ie.w),G.copy(ie))}function be(ie){oe.equals(ie)===!1&&(n.viewport(ie.x,ie.y,ie.z,ie.w),oe.copy(ie))}function Ee(ie,we){let xe=u.get(we);xe===void 0&&(xe=new WeakMap,u.set(we,xe));let Qe=xe.get(ie);Qe===void 0&&(Qe=n.getUniformBlockIndex(we,ie.name),xe.set(ie,Qe))}function We(ie,we){const Qe=u.get(we).get(ie);c.get(ie)!==Qe&&(n.uniformBlockBinding(we,Qe,ie.__bindingPointIndex),c.set(ie,Qe))}function Te(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},L=null,Z={},d={},h=new WeakMap,p=[],m=null,g=!1,v=null,y=null,w=null,C=null,b=null,F=null,I=null,S=!1,T=null,H=null,X=null,Q=null,B=null,G.set(0,0,n.canvas.width,n.canvas.height),oe.set(0,0,n.canvas.width,n.canvas.height),a.reset(),A.reset(),l.reset()}return{buffers:{color:a,depth:A,stencil:l},enable:ce,disable:le,bindFramebuffer:he,drawBuffers:$,useProgram:ae,setBlending:re,setMaterial:me,setFlipSided:Pe,setCullFace:_e,setLineWidth:Se,setPolygonOffset:Fe,setScissorTest:Ue,activeTexture:Me,bindTexture:W,unbindTexture:O,compressedTexImage2D:se,compressedTexImage3D:de,texImage2D:q,texImage3D:ne,updateUBOMapping:Ee,uniformBlockBinding:We,texStorage2D:N,texStorage3D:j,texSubImage2D:Be,texSubImage3D:V,compressedTexSubImage2D:_,compressedTexSubImage3D:x,scissor:Ce,viewport:be,reset:Te}}function $te(n,e,t,r,i,s,o){const a=i.isWebGL2,A=i.maxTextures,l=i.maxCubemapSize,c=i.maxTextureSize,u=i.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),h=new WeakMap;let p;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(W,O){return g?new OffscreenCanvas(W,O):vm("canvas")}function y(W,O,se,de){let Be=1;if((W.width>de||W.height>de)&&(Be=de/Math.max(W.width,W.height)),Be<1||O===!0)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap){const V=O?tw:Math.floor,_=V(Be*W.width),x=V(Be*W.height);p===void 0&&(p=v(_,x));const N=se?v(_,x):p;return N.width=_,N.height=x,N.getContext("2d").drawImage(W,0,0,_,x),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+_+"x"+x+")."),N}else return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W;return W}function w(W){return rE(W.width)&&rE(W.height)}function C(W){return a?!1:W.wrapS!==ai||W.wrapT!==ai||W.minFilter!==mr&&W.minFilter!==ri}function b(W,O){return W.generateMipmaps&&O&&W.minFilter!==mr&&W.minFilter!==ri}function F(W){n.generateMipmap(W)}function I(W,O,se,de,Be=!1){if(a===!1)return O;if(W!==null){if(n[W]!==void 0)return n[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let V=O;return O===6403&&(se===5126&&(V=33326),se===5131&&(V=33325),se===5121&&(V=33321)),O===33319&&(se===5126&&(V=33328),se===5131&&(V=33327),se===5121&&(V=33323)),O===6408&&(se===5126&&(V=34836),se===5131&&(V=34842),se===5121&&(V=de===dt&&Be===!1?35907:32856),se===32819&&(V=32854),se===32820&&(V=32855)),(V===33325||V===33326||V===33327||V===33328||V===34842||V===34836)&&e.get("EXT_color_buffer_float"),V}function S(W,O,se){return b(W,se)===!0||W.isFramebufferTexture&&W.minFilter!==mr&&W.minFilter!==ri?Math.log2(Math.max(O.width,O.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?O.mipmaps.length:1}function T(W){return W===mr||W===$B||W===qB?9728:9729}function H(W){const O=W.target;O.removeEventListener("dispose",H),Q(O),O.isVideoTexture&&h.delete(O)}function X(W){const O=W.target;O.removeEventListener("dispose",X),E(O)}function Q(W){const O=r.get(W);if(O.__webglInit===void 0)return;const se=W.source,de=m.get(se);if(de){const Be=de[O.__cacheKey];Be.usedTimes--,Be.usedTimes===0&&B(W),Object.keys(de).length===0&&m.delete(se)}r.remove(W)}function B(W){const O=r.get(W);n.deleteTexture(O.__webglTexture);const se=W.source,de=m.get(se);delete de[O.__cacheKey],o.memory.textures--}function E(W){const O=W.texture,se=r.get(W),de=r.get(O);if(de.__webglTexture!==void 0&&(n.deleteTexture(de.__webglTexture),o.memory.textures--),W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let Be=0;Be<6;Be++)n.deleteFramebuffer(se.__webglFramebuffer[Be]),se.__webglDepthbuffer&&n.deleteRenderbuffer(se.__webglDepthbuffer[Be]);else{if(n.deleteFramebuffer(se.__webglFramebuffer),se.__webglDepthbuffer&&n.deleteRenderbuffer(se.__webglDepthbuffer),se.__webglMultisampledFramebuffer&&n.deleteFramebuffer(se.__webglMultisampledFramebuffer),se.__webglColorRenderbuffer)for(let Be=0;Be<se.__webglColorRenderbuffer.length;Be++)se.__webglColorRenderbuffer[Be]&&n.deleteRenderbuffer(se.__webglColorRenderbuffer[Be]);se.__webglDepthRenderbuffer&&n.deleteRenderbuffer(se.__webglDepthRenderbuffer)}if(W.isWebGLMultipleRenderTargets)for(let Be=0,V=O.length;Be<V;Be++){const _=r.get(O[Be]);_.__webglTexture&&(n.deleteTexture(_.__webglTexture),o.memory.textures--),r.remove(O[Be])}r.remove(O),r.remove(W)}let R=0;function k(){R=0}function M(){const W=R;return W>=A&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+A),R+=1,W}function L(W){const O=[];return O.push(W.wrapS),O.push(W.wrapT),O.push(W.wrapR||0),O.push(W.magFilter),O.push(W.minFilter),O.push(W.anisotropy),O.push(W.internalFormat),O.push(W.format),O.push(W.type),O.push(W.generateMipmaps),O.push(W.premultiplyAlpha),O.push(W.flipY),O.push(W.unpackAlignment),O.push(W.encoding),O.join()}function Z(W,O){const se=r.get(W);if(W.isVideoTexture&&Ue(W),W.isRenderTargetTexture===!1&&W.version>0&&se.__version!==W.version){const de=W.image;if(de===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(de.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{le(se,W,O);return}}t.bindTexture(3553,se.__webglTexture,33984+O)}function P(W,O){const se=r.get(W);if(W.version>0&&se.__version!==W.version){le(se,W,O);return}t.bindTexture(35866,se.__webglTexture,33984+O)}function U(W,O){const se=r.get(W);if(W.version>0&&se.__version!==W.version){le(se,W,O);return}t.bindTexture(32879,se.__webglTexture,33984+O)}function G(W,O){const se=r.get(W);if(W.version>0&&se.__version!==W.version){he(se,W,O);return}t.bindTexture(34067,se.__webglTexture,33984+O)}const oe={[cs]:10497,[ai]:33071,[pm]:33648},D={[mr]:9728,[$B]:9984,[qB]:9986,[ri]:9729,[Z_]:9985,[wu]:9987};function K(W,O,se){if(se?(n.texParameteri(W,10242,oe[O.wrapS]),n.texParameteri(W,10243,oe[O.wrapT]),(W===32879||W===35866)&&n.texParameteri(W,32882,oe[O.wrapR]),n.texParameteri(W,10240,D[O.magFilter]),n.texParameteri(W,10241,D[O.minFilter])):(n.texParameteri(W,10242,33071),n.texParameteri(W,10243,33071),(W===32879||W===35866)&&n.texParameteri(W,32882,33071),(O.wrapS!==ai||O.wrapT!==ai)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(W,10240,T(O.magFilter)),n.texParameteri(W,10241,T(O.minFilter)),O.minFilter!==mr&&O.minFilter!==ri&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const de=e.get("EXT_texture_filter_anisotropic");if(O.type===vl&&e.has("OES_texture_float_linear")===!1||a===!1&&O.type===gm&&e.has("OES_texture_half_float_linear")===!1)return;(O.anisotropy>1||r.get(O).__currentAnisotropy)&&(n.texParameterf(W,de.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,i.getMaxAnisotropy())),r.get(O).__currentAnisotropy=O.anisotropy)}}function ce(W,O){let se=!1;W.__webglInit===void 0&&(W.__webglInit=!0,O.addEventListener("dispose",H));const de=O.source;let Be=m.get(de);Be===void 0&&(Be={},m.set(de,Be));const V=L(O);if(V!==W.__cacheKey){Be[V]===void 0&&(Be[V]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,se=!0),Be[V].usedTimes++;const _=Be[W.__cacheKey];_!==void 0&&(Be[W.__cacheKey].usedTimes--,_.usedTimes===0&&B(O)),W.__cacheKey=V,W.__webglTexture=Be[V].texture}return se}function le(W,O,se){let de=3553;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(de=35866),O.isData3DTexture&&(de=32879);const Be=ce(W,O),V=O.source;t.bindTexture(de,W.__webglTexture,33984+se);const _=r.get(V);if(V.version!==_.__version||Be===!0){t.activeTexture(33984+se),n.pixelStorei(37440,O.flipY),n.pixelStorei(37441,O.premultiplyAlpha),n.pixelStorei(3317,O.unpackAlignment),n.pixelStorei(37443,0);const x=C(O)&&w(O.image)===!1;let N=y(O.image,x,!1,c);N=Me(O,N);const j=w(N)||a,q=s.convert(O.format,O.encoding);let ne=s.convert(O.type),Ce=I(O.internalFormat,q,ne,O.encoding,O.isVideoTexture);K(de,O,j);let be;const Ee=O.mipmaps,We=a&&O.isVideoTexture!==!0,Te=_.__version===void 0||Be===!0,ie=S(O,N,j);if(O.isDepthTexture)Ce=6402,a?O.type===vl?Ce=36012:O.type===Vc?Ce=33190:O.type===Sd?Ce=35056:Ce=33189:O.type===vl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),O.format===Xc&&Ce===6402&&O.type!==VO&&O.type!==Vc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),O.type=Vc,ne=s.convert(O.type)),O.format===ih&&Ce===6402&&(Ce=34041,O.type!==Sd&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),O.type=Sd,ne=s.convert(O.type))),Te&&(We?t.texStorage2D(3553,1,Ce,N.width,N.height):t.texImage2D(3553,0,Ce,N.width,N.height,0,q,ne,null));else if(O.isDataTexture)if(Ee.length>0&&j){We&&Te&&t.texStorage2D(3553,ie,Ce,Ee[0].width,Ee[0].height);for(let we=0,xe=Ee.length;we<xe;we++)be=Ee[we],We?t.texSubImage2D(3553,we,0,0,be.width,be.height,q,ne,be.data):t.texImage2D(3553,we,Ce,be.width,be.height,0,q,ne,be.data);O.generateMipmaps=!1}else We?(Te&&t.texStorage2D(3553,ie,Ce,N.width,N.height),t.texSubImage2D(3553,0,0,0,N.width,N.height,q,ne,N.data)):t.texImage2D(3553,0,Ce,N.width,N.height,0,q,ne,N.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){We&&Te&&t.texStorage3D(35866,ie,Ce,Ee[0].width,Ee[0].height,N.depth);for(let we=0,xe=Ee.length;we<xe;we++)be=Ee[we],O.format!==Ci?q!==null?We?t.compressedTexSubImage3D(35866,we,0,0,0,be.width,be.height,N.depth,q,be.data,0,0):t.compressedTexImage3D(35866,we,Ce,be.width,be.height,N.depth,0,be.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):We?t.texSubImage3D(35866,we,0,0,0,be.width,be.height,N.depth,q,ne,be.data):t.texImage3D(35866,we,Ce,be.width,be.height,N.depth,0,q,ne,be.data)}else{We&&Te&&t.texStorage2D(3553,ie,Ce,Ee[0].width,Ee[0].height);for(let we=0,xe=Ee.length;we<xe;we++)be=Ee[we],O.format!==Ci?q!==null?We?t.compressedTexSubImage2D(3553,we,0,0,be.width,be.height,q,be.data):t.compressedTexImage2D(3553,we,Ce,be.width,be.height,0,be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):We?t.texSubImage2D(3553,we,0,0,be.width,be.height,q,ne,be.data):t.texImage2D(3553,we,Ce,be.width,be.height,0,q,ne,be.data)}else if(O.isDataArrayTexture)We?(Te&&t.texStorage3D(35866,ie,Ce,N.width,N.height,N.depth),t.texSubImage3D(35866,0,0,0,0,N.width,N.height,N.depth,q,ne,N.data)):t.texImage3D(35866,0,Ce,N.width,N.height,N.depth,0,q,ne,N.data);else if(O.isData3DTexture)We?(Te&&t.texStorage3D(32879,ie,Ce,N.width,N.height,N.depth),t.texSubImage3D(32879,0,0,0,0,N.width,N.height,N.depth,q,ne,N.data)):t.texImage3D(32879,0,Ce,N.width,N.height,N.depth,0,q,ne,N.data);else if(O.isFramebufferTexture){if(Te)if(We)t.texStorage2D(3553,ie,Ce,N.width,N.height);else{let we=N.width,xe=N.height;for(let Qe=0;Qe<ie;Qe++)t.texImage2D(3553,Qe,Ce,we,xe,0,q,ne,null),we>>=1,xe>>=1}}else if(Ee.length>0&&j){We&&Te&&t.texStorage2D(3553,ie,Ce,Ee[0].width,Ee[0].height);for(let we=0,xe=Ee.length;we<xe;we++)be=Ee[we],We?t.texSubImage2D(3553,we,0,0,q,ne,be):t.texImage2D(3553,we,Ce,q,ne,be);O.generateMipmaps=!1}else We?(Te&&t.texStorage2D(3553,ie,Ce,N.width,N.height),t.texSubImage2D(3553,0,0,0,q,ne,N)):t.texImage2D(3553,0,Ce,q,ne,N);b(O,j)&&F(de),_.__version=V.version,O.onUpdate&&O.onUpdate(O)}W.__version=O.version}function he(W,O,se){if(O.image.length!==6)return;const de=ce(W,O),Be=O.source;t.bindTexture(34067,W.__webglTexture,33984+se);const V=r.get(Be);if(Be.version!==V.__version||de===!0){t.activeTexture(33984+se),n.pixelStorei(37440,O.flipY),n.pixelStorei(37441,O.premultiplyAlpha),n.pixelStorei(3317,O.unpackAlignment),n.pixelStorei(37443,0);const _=O.isCompressedTexture||O.image[0].isCompressedTexture,x=O.image[0]&&O.image[0].isDataTexture,N=[];for(let we=0;we<6;we++)!_&&!x?N[we]=y(O.image[we],!1,!0,l):N[we]=x?O.image[we].image:O.image[we],N[we]=Me(O,N[we]);const j=N[0],q=w(j)||a,ne=s.convert(O.format,O.encoding),Ce=s.convert(O.type),be=I(O.internalFormat,ne,Ce,O.encoding),Ee=a&&O.isVideoTexture!==!0,We=V.__version===void 0||de===!0;let Te=S(O,j,q);K(34067,O,q);let ie;if(_){Ee&&We&&t.texStorage2D(34067,Te,be,j.width,j.height);for(let we=0;we<6;we++){ie=N[we].mipmaps;for(let xe=0;xe<ie.length;xe++){const Qe=ie[xe];O.format!==Ci?ne!==null?Ee?t.compressedTexSubImage2D(34069+we,xe,0,0,Qe.width,Qe.height,ne,Qe.data):t.compressedTexImage2D(34069+we,xe,be,Qe.width,Qe.height,0,Qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ee?t.texSubImage2D(34069+we,xe,0,0,Qe.width,Qe.height,ne,Ce,Qe.data):t.texImage2D(34069+we,xe,be,Qe.width,Qe.height,0,ne,Ce,Qe.data)}}}else{ie=O.mipmaps,Ee&&We&&(ie.length>0&&Te++,t.texStorage2D(34067,Te,be,N[0].width,N[0].height));for(let we=0;we<6;we++)if(x){Ee?t.texSubImage2D(34069+we,0,0,0,N[we].width,N[we].height,ne,Ce,N[we].data):t.texImage2D(34069+we,0,be,N[we].width,N[we].height,0,ne,Ce,N[we].data);for(let xe=0;xe<ie.length;xe++){const He=ie[xe].image[we].image;Ee?t.texSubImage2D(34069+we,xe+1,0,0,He.width,He.height,ne,Ce,He.data):t.texImage2D(34069+we,xe+1,be,He.width,He.height,0,ne,Ce,He.data)}}else{Ee?t.texSubImage2D(34069+we,0,0,0,ne,Ce,N[we]):t.texImage2D(34069+we,0,be,ne,Ce,N[we]);for(let xe=0;xe<ie.length;xe++){const Qe=ie[xe];Ee?t.texSubImage2D(34069+we,xe+1,0,0,ne,Ce,Qe.image[we]):t.texImage2D(34069+we,xe+1,be,ne,Ce,Qe.image[we])}}}b(O,q)&&F(34067),V.__version=Be.version,O.onUpdate&&O.onUpdate(O)}W.__version=O.version}function $(W,O,se,de,Be){const V=s.convert(se.format,se.encoding),_=s.convert(se.type),x=I(se.internalFormat,V,_,se.encoding);r.get(O).__hasExternalTextures||(Be===32879||Be===35866?t.texImage3D(Be,0,x,O.width,O.height,O.depth,0,V,_,null):t.texImage2D(Be,0,x,O.width,O.height,0,V,_,null)),t.bindFramebuffer(36160,W),Fe(O)?f.framebufferTexture2DMultisampleEXT(36160,de,Be,r.get(se).__webglTexture,0,Se(O)):(Be===3553||Be>=34069&&Be<=34074)&&n.framebufferTexture2D(36160,de,Be,r.get(se).__webglTexture,0),t.bindFramebuffer(36160,null)}function ae(W,O,se){if(n.bindRenderbuffer(36161,W),O.depthBuffer&&!O.stencilBuffer){let de=33189;if(se||Fe(O)){const Be=O.depthTexture;Be&&Be.isDepthTexture&&(Be.type===vl?de=36012:Be.type===Vc&&(de=33190));const V=Se(O);Fe(O)?f.renderbufferStorageMultisampleEXT(36161,V,de,O.width,O.height):n.renderbufferStorageMultisample(36161,V,de,O.width,O.height)}else n.renderbufferStorage(36161,de,O.width,O.height);n.framebufferRenderbuffer(36160,36096,36161,W)}else if(O.depthBuffer&&O.stencilBuffer){const de=Se(O);se&&Fe(O)===!1?n.renderbufferStorageMultisample(36161,de,35056,O.width,O.height):Fe(O)?f.renderbufferStorageMultisampleEXT(36161,de,35056,O.width,O.height):n.renderbufferStorage(36161,34041,O.width,O.height),n.framebufferRenderbuffer(36160,33306,36161,W)}else{const de=O.isWebGLMultipleRenderTargets===!0?O.texture:[O.texture];for(let Be=0;Be<de.length;Be++){const V=de[Be],_=s.convert(V.format,V.encoding),x=s.convert(V.type),N=I(V.internalFormat,_,x,V.encoding),j=Se(O);se&&Fe(O)===!1?n.renderbufferStorageMultisample(36161,j,N,O.width,O.height):Fe(O)?f.renderbufferStorageMultisampleEXT(36161,j,N,O.width,O.height):n.renderbufferStorage(36161,N,O.width,O.height)}}n.bindRenderbuffer(36161,null)}function te(W,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,W),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(O.depthTexture).__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),Z(O.depthTexture,0);const de=r.get(O.depthTexture).__webglTexture,Be=Se(O);if(O.depthTexture.format===Xc)Fe(O)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,de,0,Be):n.framebufferTexture2D(36160,36096,3553,de,0);else if(O.depthTexture.format===ih)Fe(O)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,de,0,Be):n.framebufferTexture2D(36160,33306,3553,de,0);else throw new Error("Unknown depthTexture format")}function Ae(W){const O=r.get(W),se=W.isWebGLCubeRenderTarget===!0;if(W.depthTexture&&!O.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");te(O.__webglFramebuffer,W)}else if(se){O.__webglDepthbuffer=[];for(let de=0;de<6;de++)t.bindFramebuffer(36160,O.__webglFramebuffer[de]),O.__webglDepthbuffer[de]=n.createRenderbuffer(),ae(O.__webglDepthbuffer[de],W,!1)}else t.bindFramebuffer(36160,O.__webglFramebuffer),O.__webglDepthbuffer=n.createRenderbuffer(),ae(O.__webglDepthbuffer,W,!1);t.bindFramebuffer(36160,null)}function re(W,O,se){const de=r.get(W);O!==void 0&&$(de.__webglFramebuffer,W,W.texture,36064,3553),se!==void 0&&Ae(W)}function me(W){const O=W.texture,se=r.get(W),de=r.get(O);W.addEventListener("dispose",X),W.isWebGLMultipleRenderTargets!==!0&&(de.__webglTexture===void 0&&(de.__webglTexture=n.createTexture()),de.__version=O.version,o.memory.textures++);const Be=W.isWebGLCubeRenderTarget===!0,V=W.isWebGLMultipleRenderTargets===!0,_=w(W)||a;if(Be){se.__webglFramebuffer=[];for(let x=0;x<6;x++)se.__webglFramebuffer[x]=n.createFramebuffer()}else{if(se.__webglFramebuffer=n.createFramebuffer(),V)if(i.drawBuffers){const x=W.texture;for(let N=0,j=x.length;N<j;N++){const q=r.get(x[N]);q.__webglTexture===void 0&&(q.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&W.samples>0&&Fe(W)===!1){const x=V?O:[O];se.__webglMultisampledFramebuffer=n.createFramebuffer(),se.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,se.__webglMultisampledFramebuffer);for(let N=0;N<x.length;N++){const j=x[N];se.__webglColorRenderbuffer[N]=n.createRenderbuffer(),n.bindRenderbuffer(36161,se.__webglColorRenderbuffer[N]);const q=s.convert(j.format,j.encoding),ne=s.convert(j.type),Ce=I(j.internalFormat,q,ne,j.encoding,W.isXRRenderTarget===!0),be=Se(W);n.renderbufferStorageMultisample(36161,be,Ce,W.width,W.height),n.framebufferRenderbuffer(36160,36064+N,36161,se.__webglColorRenderbuffer[N])}n.bindRenderbuffer(36161,null),W.depthBuffer&&(se.__webglDepthRenderbuffer=n.createRenderbuffer(),ae(se.__webglDepthRenderbuffer,W,!0)),t.bindFramebuffer(36160,null)}}if(Be){t.bindTexture(34067,de.__webglTexture),K(34067,O,_);for(let x=0;x<6;x++)$(se.__webglFramebuffer[x],W,O,36064,34069+x);b(O,_)&&F(34067),t.unbindTexture()}else if(V){const x=W.texture;for(let N=0,j=x.length;N<j;N++){const q=x[N],ne=r.get(q);t.bindTexture(3553,ne.__webglTexture),K(3553,q,_),$(se.__webglFramebuffer,W,q,36064+N,3553),b(q,_)&&F(3553)}t.unbindTexture()}else{let x=3553;(W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(a?x=W.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(x,de.__webglTexture),K(x,O,_),$(se.__webglFramebuffer,W,O,36064,x),b(O,_)&&F(x),t.unbindTexture()}W.depthBuffer&&Ae(W)}function Pe(W){const O=w(W)||a,se=W.isWebGLMultipleRenderTargets===!0?W.texture:[W.texture];for(let de=0,Be=se.length;de<Be;de++){const V=se[de];if(b(V,O)){const _=W.isWebGLCubeRenderTarget?34067:3553,x=r.get(V).__webglTexture;t.bindTexture(_,x),F(_),t.unbindTexture()}}}function _e(W){if(a&&W.samples>0&&Fe(W)===!1){const O=W.isWebGLMultipleRenderTargets?W.texture:[W.texture],se=W.width,de=W.height;let Be=16384;const V=[],_=W.stencilBuffer?33306:36096,x=r.get(W),N=W.isWebGLMultipleRenderTargets===!0;if(N)for(let j=0;j<O.length;j++)t.bindFramebuffer(36160,x.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+j,36161,null),t.bindFramebuffer(36160,x.__webglFramebuffer),n.framebufferTexture2D(36009,36064+j,3553,null,0);t.bindFramebuffer(36008,x.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,x.__webglFramebuffer);for(let j=0;j<O.length;j++){V.push(36064+j),W.depthBuffer&&V.push(_);const q=x.__ignoreDepthValues!==void 0?x.__ignoreDepthValues:!1;if(q===!1&&(W.depthBuffer&&(Be|=256),W.stencilBuffer&&(Be|=1024)),N&&n.framebufferRenderbuffer(36008,36064,36161,x.__webglColorRenderbuffer[j]),q===!0&&(n.invalidateFramebuffer(36008,[_]),n.invalidateFramebuffer(36009,[_])),N){const ne=r.get(O[j]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,ne,0)}n.blitFramebuffer(0,0,se,de,0,0,se,de,Be,9728),d&&n.invalidateFramebuffer(36008,V)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),N)for(let j=0;j<O.length;j++){t.bindFramebuffer(36160,x.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+j,36161,x.__webglColorRenderbuffer[j]);const q=r.get(O[j]).__webglTexture;t.bindFramebuffer(36160,x.__webglFramebuffer),n.framebufferTexture2D(36009,36064+j,3553,q,0)}t.bindFramebuffer(36009,x.__webglMultisampledFramebuffer)}}function Se(W){return Math.min(u,W.samples)}function Fe(W){const O=r.get(W);return a&&W.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function Ue(W){const O=o.render.frame;h.get(W)!==O&&(h.set(W,O),W.update())}function Me(W,O){const se=W.encoding,de=W.format,Be=W.type;return W.isCompressedTexture===!0||W.isVideoTexture===!0||W.format===nE||se!==Ys&&(se===dt?a===!1?e.has("EXT_sRGB")===!0&&de===Ci?(W.format=nE,W.minFilter=ri,W.generateMipmaps=!1):O=GO.sRGBToLinear(O):(de!==Ci||Be!==Jl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",se)),O}this.allocateTextureUnit=M,this.resetTextureUnits=k,this.setTexture2D=Z,this.setTexture2DArray=P,this.setTexture3D=U,this.setTextureCube=G,this.rebindTextures=re,this.setupRenderTarget=me,this.updateRenderTargetMipmap=Pe,this.updateMultisampleRenderTarget=_e,this.setupDepthRenderbuffer=Ae,this.setupFrameBufferTexture=$,this.useMultisampledRTT=Fe}function qte(n,e,t){const r=t.isWebGL2;function i(s,o=null){let a;if(s===Jl)return 5121;if(s===Sj)return 32819;if(s===Qj)return 32820;if(s===Ej)return 5120;if(s===Uj)return 5122;if(s===VO)return 5123;if(s===_j)return 5124;if(s===Vc)return 5125;if(s===vl)return 5126;if(s===gm)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===Rj)return 6406;if(s===Ci)return 6408;if(s===Mj)return 6409;if(s===Tj)return 6410;if(s===Xc)return 6402;if(s===ih)return 34041;if(s===Nj)return 6403;if(s===LO)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===nE)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===kj)return 36244;if(s===Dj)return 33319;if(s===Vj)return 33320;if(s===Lj)return 36249;if(s===Ex||s===Ux||s===_x||s===Sx)if(o===dt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Ex)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Ux)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===_x)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Sx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Ex)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Ux)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===_x)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Sx)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===pM||s===gM||s===mM||s===vM)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===pM)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===gM)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===mM)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===vM)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Pj)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===yM||s===BM)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===yM)return o===dt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===BM)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===wM||s===CM||s===bM||s===xM||s===IM||s===FM||s===EM||s===UM||s===_M||s===SM||s===QM||s===RM||s===MM||s===TM)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===wM)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===CM)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===bM)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===xM)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===IM)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===FM)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===EM)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===UM)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===_M)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===SM)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===QM)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===RM)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===MM)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===TM)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===NM)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===NM)return o===dt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Sd?r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class ene extends Ir{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Er extends kt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const tne={type:"move"};class rI{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Er,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Er,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Er,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,A=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){o=!0;for(const p of e.hand.values()){const m=t.getJointPose(p,r);if(l.joints[p.jointName]===void 0){const v=new Er;v.matrixAutoUpdate=!1,v.visible=!1,l.joints[p.jointName]=v,l.add(v)}const g=l.joints[p.jointName];m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=m.radius),g.visible=m!==null}const c=l.joints["index-finger-tip"],u=l.joints["thumb-tip"],f=c.position.distanceTo(u.position),d=.02,h=.005;l.inputState.pinching&&f>d+h?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&f<=d-h&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else A!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(A.matrix.fromArray(s.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),s.linearVelocity?(A.hasLinearVelocity=!0,A.linearVelocity.copy(s.linearVelocity)):A.hasLinearVelocity=!1,s.angularVelocity?(A.hasAngularVelocity=!0,A.angularVelocity.copy(s.angularVelocity)):A.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(tne)))}return a!==null&&(a.visible=i!==null),A!==null&&(A.visible=s!==null),l!==null&&(l.visible=o!==null),this}}class nne extends qn{constructor(e,t,r,i,s,o,a,A,l,c){if(c=c!==void 0?c:Xc,c!==Xc&&c!==ih)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Xc&&(r=Vc),r===void 0&&c===ih&&(r=Sd),super(null,i,s,o,a,A,c,r,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:mr,this.minFilter=A!==void 0?A:mr,this.flipY=!1,this.generateMipmaps=!1}}class rne extends oc{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",A=null,l=null,c=null,u=null,f=null,d=null;const h=t.getContextAttributes();let p=null,m=null;const g=[],v=[],y=new Ir;y.layers.enable(1),y.viewport=new Vt;const w=new Ir;w.layers.enable(2),w.viewport=new Vt;const C=[y,w],b=new ene;b.layers.enable(1),b.layers.enable(2);let F=null,I=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(L){let Z=g[L];return Z===void 0&&(Z=new rI,g[L]=Z),Z.getTargetRaySpace()},this.getControllerGrip=function(L){let Z=g[L];return Z===void 0&&(Z=new rI,g[L]=Z),Z.getGripSpace()},this.getHand=function(L){let Z=g[L];return Z===void 0&&(Z=new rI,g[L]=Z),Z.getHandSpace()};function S(L){const Z=v.indexOf(L.inputSource);if(Z===-1)return;const P=g[Z];P!==void 0&&P.dispatchEvent({type:L.type,data:L.inputSource})}function T(){i.removeEventListener("select",S),i.removeEventListener("selectstart",S),i.removeEventListener("selectend",S),i.removeEventListener("squeeze",S),i.removeEventListener("squeezestart",S),i.removeEventListener("squeezeend",S),i.removeEventListener("end",T),i.removeEventListener("inputsourceschange",H);for(let L=0;L<g.length;L++){const Z=v[L];Z!==null&&(v[L]=null,g[L].disconnect(Z))}F=null,I=null,e.setRenderTarget(p),f=null,u=null,c=null,i=null,m=null,M.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(L){s=L,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(L){a=L,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return A||o},this.setReferenceSpace=function(L){A=L},this.getBaseLayer=function(){return u!==null?u:f},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return i},this.setSession=async function(L){if(i=L,i!==null){if(p=e.getRenderTarget(),i.addEventListener("select",S),i.addEventListener("selectstart",S),i.addEventListener("selectend",S),i.addEventListener("squeeze",S),i.addEventListener("squeezestart",S),i.addEventListener("squeezeend",S),i.addEventListener("end",T),i.addEventListener("inputsourceschange",H),h.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Z={antialias:i.renderState.layers===void 0?h.antialias:!0,alpha:h.alpha,depth:h.depth,stencil:h.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(i,t,Z),i.updateRenderState({baseLayer:f}),m=new Hl(f.framebufferWidth,f.framebufferHeight,{format:Ci,type:Jl,encoding:e.outputEncoding,stencilBuffer:h.stencil})}else{let Z=null,P=null,U=null;h.depth&&(U=h.stencil?35056:33190,Z=h.stencil?ih:Xc,P=h.stencil?Sd:Vc);const G={colorFormat:32856,depthFormat:U,scaleFactor:s};c=new XRWebGLBinding(i,t),u=c.createProjectionLayer(G),i.updateRenderState({layers:[u]}),m=new Hl(u.textureWidth,u.textureHeight,{format:Ci,type:Jl,depthTexture:new nne(u.textureWidth,u.textureHeight,P,void 0,void 0,void 0,void 0,void 0,void 0,Z),stencilBuffer:h.stencil,encoding:e.outputEncoding,samples:h.antialias?4:0});const oe=e.properties.get(m);oe.__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),A=null,o=await i.requestReferenceSpace(a),M.setContext(i),M.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function H(L){for(let Z=0;Z<L.removed.length;Z++){const P=L.removed[Z],U=v.indexOf(P);U>=0&&(v[U]=null,g[U].dispatchEvent({type:"disconnected",data:P}))}for(let Z=0;Z<L.added.length;Z++){const P=L.added[Z];let U=v.indexOf(P);if(U===-1){for(let oe=0;oe<g.length;oe++)if(oe>=v.length){v.push(P),U=oe;break}else if(v[oe]===null){v[oe]=P,U=oe;break}if(U===-1)break}const G=g[U];G&&G.dispatchEvent({type:"connected",data:P})}}const X=new z,Q=new z;function B(L,Z,P){X.setFromMatrixPosition(Z.matrixWorld),Q.setFromMatrixPosition(P.matrixWorld);const U=X.distanceTo(Q),G=Z.projectionMatrix.elements,oe=P.projectionMatrix.elements,D=G[14]/(G[10]-1),K=G[14]/(G[10]+1),ce=(G[9]+1)/G[5],le=(G[9]-1)/G[5],he=(G[8]-1)/G[0],$=(oe[8]+1)/oe[0],ae=D*he,te=D*$,Ae=U/(-he+$),re=Ae*-he;Z.matrixWorld.decompose(L.position,L.quaternion,L.scale),L.translateX(re),L.translateZ(Ae),L.matrixWorld.compose(L.position,L.quaternion,L.scale),L.matrixWorldInverse.copy(L.matrixWorld).invert();const me=D+Ae,Pe=K+Ae,_e=ae-re,Se=te+(U-re),Fe=ce*K/Pe*me,Ue=le*K/Pe*me;L.projectionMatrix.makePerspective(_e,Se,Fe,Ue,me,Pe)}function E(L,Z){Z===null?L.matrixWorld.copy(L.matrix):L.matrixWorld.multiplyMatrices(Z.matrixWorld,L.matrix),L.matrixWorldInverse.copy(L.matrixWorld).invert()}this.updateCamera=function(L){if(i===null)return;b.near=w.near=y.near=L.near,b.far=w.far=y.far=L.far,(F!==b.near||I!==b.far)&&(i.updateRenderState({depthNear:b.near,depthFar:b.far}),F=b.near,I=b.far);const Z=L.parent,P=b.cameras;E(b,Z);for(let G=0;G<P.length;G++)E(P[G],Z);b.matrixWorld.decompose(b.position,b.quaternion,b.scale),L.matrix.copy(b.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale);const U=L.children;for(let G=0,oe=U.length;G<oe;G++)U[G].updateMatrixWorld(!0);P.length===2?B(b,y,w):b.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return b},this.getFoveation=function(){if(u!==null)return u.fixedFoveation;if(f!==null)return f.fixedFoveation},this.setFoveation=function(L){u!==null&&(u.fixedFoveation=L),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=L)};let R=null;function k(L,Z){if(l=Z.getViewerPose(A||o),d=Z,l!==null){const P=l.views;f!==null&&(e.setRenderTargetFramebuffer(m,f.framebuffer),e.setRenderTarget(m));let U=!1;P.length!==b.cameras.length&&(b.cameras.length=0,U=!0);for(let G=0;G<P.length;G++){const oe=P[G];let D=null;if(f!==null)D=f.getViewport(oe);else{const ce=c.getViewSubImage(u,oe);D=ce.viewport,G===0&&(e.setRenderTargetTextures(m,ce.colorTexture,u.ignoreDepthValues?void 0:ce.depthStencilTexture),e.setRenderTarget(m))}let K=C[G];K===void 0&&(K=new Ir,K.layers.enable(G),K.viewport=new Vt,C[G]=K),K.matrix.fromArray(oe.transform.matrix),K.projectionMatrix.fromArray(oe.projectionMatrix),K.viewport.set(D.x,D.y,D.width,D.height),G===0&&b.matrix.copy(K.matrix),U===!0&&b.cameras.push(K)}}for(let P=0;P<g.length;P++){const U=v[P],G=g[P];U!==null&&G!==void 0&&G.update(U,Z,A||o)}R&&R(L,Z),d=null}const M=new KO;M.setAnimationLoop(k),this.setAnimationLoop=function(L){R=L},this.dispose=function(){}}}function ine(n,e){function t(p,m){p.fogColor.value.copy(m.color),m.isFog?(p.fogNear.value=m.near,p.fogFar.value=m.far):m.isFogExp2&&(p.fogDensity.value=m.density)}function r(p,m,g,v,y){m.isMeshBasicMaterial||m.isMeshLambertMaterial?i(p,m):m.isMeshToonMaterial?(i(p,m),c(p,m)):m.isMeshPhongMaterial?(i(p,m),l(p,m)):m.isMeshStandardMaterial?(i(p,m),u(p,m),m.isMeshPhysicalMaterial&&f(p,m,y)):m.isMeshMatcapMaterial?(i(p,m),d(p,m)):m.isMeshDepthMaterial?i(p,m):m.isMeshDistanceMaterial?(i(p,m),h(p,m)):m.isMeshNormalMaterial?i(p,m):m.isLineBasicMaterial?(s(p,m),m.isLineDashedMaterial&&o(p,m)):m.isPointsMaterial?a(p,m,g,v):m.isSpriteMaterial?A(p,m):m.isShadowMaterial?(p.color.value.copy(m.color),p.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function i(p,m){p.opacity.value=m.opacity,m.color&&p.diffuse.value.copy(m.color),m.emissive&&p.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.bumpMap&&(p.bumpMap.value=m.bumpMap,p.bumpScale.value=m.bumpScale,m.side===ci&&(p.bumpScale.value*=-1)),m.displacementMap&&(p.displacementMap.value=m.displacementMap,p.displacementScale.value=m.displacementScale,p.displacementBias.value=m.displacementBias),m.emissiveMap&&(p.emissiveMap.value=m.emissiveMap),m.normalMap&&(p.normalMap.value=m.normalMap,p.normalScale.value.copy(m.normalScale),m.side===ci&&p.normalScale.value.negate()),m.specularMap&&(p.specularMap.value=m.specularMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);const g=e.get(m).envMap;if(g&&(p.envMap.value=g,p.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=m.reflectivity,p.ior.value=m.ior,p.refractionRatio.value=m.refractionRatio),m.lightMap){p.lightMap.value=m.lightMap;const w=n.physicallyCorrectLights!==!0?Math.PI:1;p.lightMapIntensity.value=m.lightMapIntensity*w}m.aoMap&&(p.aoMap.value=m.aoMap,p.aoMapIntensity.value=m.aoMapIntensity);let v;m.map?v=m.map:m.specularMap?v=m.specularMap:m.displacementMap?v=m.displacementMap:m.normalMap?v=m.normalMap:m.bumpMap?v=m.bumpMap:m.roughnessMap?v=m.roughnessMap:m.metalnessMap?v=m.metalnessMap:m.alphaMap?v=m.alphaMap:m.emissiveMap?v=m.emissiveMap:m.clearcoatMap?v=m.clearcoatMap:m.clearcoatNormalMap?v=m.clearcoatNormalMap:m.clearcoatRoughnessMap?v=m.clearcoatRoughnessMap:m.iridescenceMap?v=m.iridescenceMap:m.iridescenceThicknessMap?v=m.iridescenceThicknessMap:m.specularIntensityMap?v=m.specularIntensityMap:m.specularColorMap?v=m.specularColorMap:m.transmissionMap?v=m.transmissionMap:m.thicknessMap?v=m.thicknessMap:m.sheenColorMap?v=m.sheenColorMap:m.sheenRoughnessMap&&(v=m.sheenRoughnessMap),v!==void 0&&(v.isWebGLRenderTarget&&(v=v.texture),v.matrixAutoUpdate===!0&&v.updateMatrix(),p.uvTransform.value.copy(v.matrix));let y;m.aoMap?y=m.aoMap:m.lightMap&&(y=m.lightMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),p.uv2Transform.value.copy(y.matrix))}function s(p,m){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity}function o(p,m){p.dashSize.value=m.dashSize,p.totalSize.value=m.dashSize+m.gapSize,p.scale.value=m.scale}function a(p,m,g,v){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity,p.size.value=m.size*g,p.scale.value=v*.5,m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);let y;m.map?y=m.map:m.alphaMap&&(y=m.alphaMap),y!==void 0&&(y.matrixAutoUpdate===!0&&y.updateMatrix(),p.uvTransform.value.copy(y.matrix))}function A(p,m){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity,p.rotation.value=m.rotation,m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);let g;m.map?g=m.map:m.alphaMap&&(g=m.alphaMap),g!==void 0&&(g.matrixAutoUpdate===!0&&g.updateMatrix(),p.uvTransform.value.copy(g.matrix))}function l(p,m){p.specular.value.copy(m.specular),p.shininess.value=Math.max(m.shininess,1e-4)}function c(p,m){m.gradientMap&&(p.gradientMap.value=m.gradientMap)}function u(p,m){p.roughness.value=m.roughness,p.metalness.value=m.metalness,m.roughnessMap&&(p.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(p.metalnessMap.value=m.metalnessMap),e.get(m).envMap&&(p.envMapIntensity.value=m.envMapIntensity)}function f(p,m,g){p.ior.value=m.ior,m.sheen>0&&(p.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),p.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(p.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(p.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(p.clearcoat.value=m.clearcoat,p.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(p.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),p.clearcoatNormalMap.value=m.clearcoatNormalMap,m.side===ci&&p.clearcoatNormalScale.value.negate())),m.iridescence>0&&(p.iridescence.value=m.iridescence,p.iridescenceIOR.value=m.iridescenceIOR,p.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(p.iridescenceMap.value=m.iridescenceMap),m.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=m.iridescenceThicknessMap)),m.transmission>0&&(p.transmission.value=m.transmission,p.transmissionSamplerMap.value=g.texture,p.transmissionSamplerSize.value.set(g.width,g.height),m.transmissionMap&&(p.transmissionMap.value=m.transmissionMap),p.thickness.value=m.thickness,m.thicknessMap&&(p.thicknessMap.value=m.thicknessMap),p.attenuationDistance.value=m.attenuationDistance,p.attenuationColor.value.copy(m.attenuationColor)),p.specularIntensity.value=m.specularIntensity,p.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(p.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(p.specularColorMap.value=m.specularColorMap)}function d(p,m){m.matcap&&(p.matcap.value=m.matcap)}function h(p,m){p.referencePosition.value.copy(m.referencePosition),p.nearDistance.value=m.nearDistance,p.farDistance.value=m.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function sne(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function A(v,y){const w=y.program;r.uniformBlockBinding(v,w)}function l(v,y){let w=i[v.id];w===void 0&&(h(v),w=c(v),i[v.id]=w,v.addEventListener("dispose",m));const C=y.program;r.updateUBOMapping(v,C);const b=e.render.frame;s[v.id]!==b&&(f(v),s[v.id]=b)}function c(v){const y=u();v.__bindingPointIndex=y;const w=n.createBuffer(),C=v.__size,b=v.usage;return n.bindBuffer(35345,w),n.bufferData(35345,C,b),n.bindBuffer(35345,null),n.bindBufferBase(35345,y,w),w}function u(){for(let v=0;v<a;v++)if(o.indexOf(v)===-1)return o.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(v){const y=i[v.id],w=v.uniforms,C=v.__cache;n.bindBuffer(35345,y);for(let b=0,F=w.length;b<F;b++){const I=w[b];if(d(I,b,C)===!0){const S=I.value,T=I.__offset;typeof S=="number"?(I.__data[0]=S,n.bufferSubData(35345,T,I.__data)):(I.value.isMatrix3?(I.__data[0]=I.value.elements[0],I.__data[1]=I.value.elements[1],I.__data[2]=I.value.elements[2],I.__data[3]=I.value.elements[0],I.__data[4]=I.value.elements[3],I.__data[5]=I.value.elements[4],I.__data[6]=I.value.elements[5],I.__data[7]=I.value.elements[0],I.__data[8]=I.value.elements[6],I.__data[9]=I.value.elements[7],I.__data[10]=I.value.elements[8],I.__data[11]=I.value.elements[0]):S.toArray(I.__data),n.bufferSubData(35345,T,I.__data))}}n.bindBuffer(35345,null)}function d(v,y,w){const C=v.value;if(w[y]===void 0)return typeof C=="number"?w[y]=C:w[y]=C.clone(),!0;if(typeof C=="number"){if(w[y]!==C)return w[y]=C,!0}else{const b=w[y];if(b.equals(C)===!1)return b.copy(C),!0}return!1}function h(v){const y=v.uniforms;let w=0;const C=16;let b=0;for(let F=0,I=y.length;F<I;F++){const S=y[F],T=p(S);if(S.__data=new Float32Array(T.storage/Float32Array.BYTES_PER_ELEMENT),S.__offset=w,F>0){b=w%C;const H=C-b;b!==0&&H-T.boundary<0&&(w+=C-b,S.__offset=w)}w+=T.storage}return b=w%C,b>0&&(w+=C-b),v.__size=w,v.__cache={},this}function p(v){const y=v.value,w={boundary:0,storage:0};return typeof y=="number"?(w.boundary=4,w.storage=4):y.isVector2?(w.boundary=8,w.storage=8):y.isVector3||y.isColor?(w.boundary=16,w.storage=12):y.isVector4?(w.boundary=16,w.storage=16):y.isMatrix3?(w.boundary=48,w.storage=48):y.isMatrix4?(w.boundary=64,w.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),w}function m(v){const y=v.target;y.removeEventListener("dispose",m);const w=o.indexOf(y.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(i[y.id]),delete i[y.id],delete s[y.id]}function g(){for(const v in i)n.deleteBuffer(i[v]);o=[],i={},s={}}return{bind:A,update:l,dispose:g}}function one(){const n=vm("canvas");return n.style.display="block",n}function LC(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:one(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,A=n.powerPreference!==void 0?n.powerPreference:"default",l=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let c;t!==null?c=t.getContextAttributes().alpha:c=n.alpha!==void 0?n.alpha:!1;let u=null,f=null;const d=[],h=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ys,this.physicallyCorrectLights=!1,this.toneMapping=yA,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const p=this;let m=!1,g=0,v=0,y=null,w=-1,C=null;const b=new Vt,F=new Vt;let I=null,S=e.width,T=e.height,H=1,X=null,Q=null;const B=new Vt(0,0,S,T),E=new Vt(0,0,S,T);let R=!1;const k=new X_;let M=!1,L=!1,Z=null;const P=new Oe,U=new Ge,G=new z,oe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function D(){return y===null?H:1}let K=t;function ce(ee,ue){for(let ve=0;ve<ee.length;ve++){const ge=ee[ve],ye=e.getContext(ge,ue);if(ye!==null)return ye}return null}try{const ee={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:A,failIfMajorPerformanceCaveat:l};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Rs}`),e.addEventListener("webglcontextlost",Ce,!1),e.addEventListener("webglcontextrestored",be,!1),e.addEventListener("webglcontextcreationerror",Ee,!1),K===null){const ue=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&ue.shift(),K=ce(ue,ee),K===null)throw ce(ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}K.getShaderPrecisionFormat===void 0&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ee){throw console.error("THREE.WebGLRenderer: "+ee.message),ee}let le,he,$,ae,te,Ae,re,me,Pe,_e,Se,Fe,Ue,Me,W,O,se,de,Be,V,_,x,N,j;function q(){le=new mee(K),he=new uee(K,le,n),le.init(he),x=new qte(K,le,he),$=new jte(K,le,he),ae=new Bee,te=new Dte,Ae=new $te(K,le,$,te,he,x,ae),re=new dee(p),me=new gee(p),Pe=new _7(K,he),N=new lee(K,le,Pe,he),_e=new vee(K,Pe,ae,N),Se=new xee(K,_e,Pe,ae),Be=new bee(K,he,Ae),O=new fee(te),Fe=new kte(p,re,me,le,he,N,O),Ue=new ine(p,te),Me=new Lte,W=new Jte(le,he),de=new Aee(p,re,me,$,Se,c,o),se=new Kte(p,Se,he),j=new sne(K,ae,he,$),V=new cee(K,le,ae,he),_=new yee(K,le,ae,he),ae.programs=Fe.programs,p.capabilities=he,p.extensions=le,p.properties=te,p.renderLists=Me,p.shadowMap=se,p.state=$,p.info=ae}q();const ne=new rne(p,K);this.xr=ne,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const ee=le.get("WEBGL_lose_context");ee&&ee.loseContext()},this.forceContextRestore=function(){const ee=le.get("WEBGL_lose_context");ee&&ee.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(ee){ee!==void 0&&(H=ee,this.setSize(S,T,!1))},this.getSize=function(ee){return ee.set(S,T)},this.setSize=function(ee,ue,ve){if(ne.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}S=ee,T=ue,e.width=Math.floor(ee*H),e.height=Math.floor(ue*H),ve!==!1&&(e.style.width=ee+"px",e.style.height=ue+"px"),this.setViewport(0,0,ee,ue)},this.getDrawingBufferSize=function(ee){return ee.set(S*H,T*H).floor()},this.setDrawingBufferSize=function(ee,ue,ve){S=ee,T=ue,H=ve,e.width=Math.floor(ee*ve),e.height=Math.floor(ue*ve),this.setViewport(0,0,ee,ue)},this.getCurrentViewport=function(ee){return ee.copy(b)},this.getViewport=function(ee){return ee.copy(B)},this.setViewport=function(ee,ue,ve,ge){ee.isVector4?B.set(ee.x,ee.y,ee.z,ee.w):B.set(ee,ue,ve,ge),$.viewport(b.copy(B).multiplyScalar(H).floor())},this.getScissor=function(ee){return ee.copy(E)},this.setScissor=function(ee,ue,ve,ge){ee.isVector4?E.set(ee.x,ee.y,ee.z,ee.w):E.set(ee,ue,ve,ge),$.scissor(F.copy(E).multiplyScalar(H).floor())},this.getScissorTest=function(){return R},this.setScissorTest=function(ee){$.setScissorTest(R=ee)},this.setOpaqueSort=function(ee){X=ee},this.setTransparentSort=function(ee){Q=ee},this.getClearColor=function(ee){return ee.copy(de.getClearColor())},this.setClearColor=function(){de.setClearColor.apply(de,arguments)},this.getClearAlpha=function(){return de.getClearAlpha()},this.setClearAlpha=function(){de.setClearAlpha.apply(de,arguments)},this.clear=function(ee=!0,ue=!0,ve=!0){let ge=0;ee&&(ge|=16384),ue&&(ge|=256),ve&&(ge|=1024),K.clear(ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ce,!1),e.removeEventListener("webglcontextrestored",be,!1),e.removeEventListener("webglcontextcreationerror",Ee,!1),Me.dispose(),W.dispose(),te.dispose(),re.dispose(),me.dispose(),Se.dispose(),N.dispose(),j.dispose(),Fe.dispose(),ne.dispose(),ne.removeEventListener("sessionstart",Qe),ne.removeEventListener("sessionend",He),Z&&(Z.dispose(),Z=null),qe.stop()};function Ce(ee){ee.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function be(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const ee=ae.autoReset,ue=se.enabled,ve=se.autoUpdate,ge=se.needsUpdate,ye=se.type;q(),ae.autoReset=ee,se.enabled=ue,se.autoUpdate=ve,se.needsUpdate=ge,se.type=ye}function Ee(ee){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ee.statusMessage)}function We(ee){const ue=ee.target;ue.removeEventListener("dispose",We),Te(ue)}function Te(ee){ie(ee),te.remove(ee)}function ie(ee){const ue=te.get(ee).programs;ue!==void 0&&(ue.forEach(function(ve){Fe.releaseProgram(ve)}),ee.isShaderMaterial&&Fe.releaseShaderCache(ee))}this.renderBufferDirect=function(ee,ue,ve,ge,ye,Ve){ue===null&&(ue=oe);const rt=ye.isMesh&&ye.matrixWorld.determinant()<0,Ye=Ao(ee,ue,ve,ge,ye);$.setMaterial(ge,rt);let ze=ve.index;const pt=ve.attributes.position;if(ze===null){if(pt===void 0||pt.count===0)return}else if(ze.count===0)return;let At=1;ge.wireframe===!0&&(ze=_e.getWireframeAttribute(ve),At=2),N.setup(ye,ge,Ye,ve,ze);let ft,Ot=V;ze!==null&&(ft=Pe.get(ze),Ot=_,Ot.setIndex(ft));const Tr=ze!==null?ze.count:pt.count,Wo=ve.drawRange.start*At,Oo=ve.drawRange.count*At,di=Ve!==null?Ve.start*At:0,Tt=Ve!==null?Ve.count*At:1/0,Zo=Math.max(Wo,di),hn=Math.min(Tr,Wo+Oo,di+Tt)-1,Nr=Math.max(0,hn-Zo+1);if(Nr!==0){if(ye.isMesh)ge.wireframe===!0?($.setLineWidth(ge.wireframeLinewidth*D()),Ot.setMode(1)):Ot.setMode(4);else if(ye.isLine){let ms=ge.linewidth;ms===void 0&&(ms=1),$.setLineWidth(ms*D()),ye.isLineSegments?Ot.setMode(1):ye.isLineLoop?Ot.setMode(2):Ot.setMode(3)}else ye.isPoints?Ot.setMode(0):ye.isSprite&&Ot.setMode(4);if(ye.isInstancedMesh)Ot.renderInstances(Zo,Nr,ye.count);else if(ve.isInstancedBufferGeometry){const ms=Math.min(ve.instanceCount,ve._maxInstanceCount);Ot.renderInstances(Zo,Nr,ms)}else Ot.render(Zo,Nr)}},this.compile=function(ee,ue){function ve(ge,ye,Ve){ge.transparent===!0&&ge.side===Ii?(ge.side=ci,ge.needsUpdate=!0,ht(ge,ye,Ve),ge.side=Ia,ge.needsUpdate=!0,ht(ge,ye,Ve),ge.side=Ii):ht(ge,ye,Ve)}f=W.get(ee),f.init(),h.push(f),ee.traverseVisible(function(ge){ge.isLight&&ge.layers.test(ue.layers)&&(f.pushLight(ge),ge.castShadow&&f.pushShadow(ge))}),f.setupLights(p.physicallyCorrectLights),ee.traverse(function(ge){const ye=ge.material;if(ye)if(Array.isArray(ye))for(let Ve=0;Ve<ye.length;Ve++){const rt=ye[Ve];ve(rt,ee,ge)}else ve(ye,ee,ge)}),h.pop(),f=null};let we=null;function xe(ee){we&&we(ee)}function Qe(){qe.stop()}function He(){qe.start()}const qe=new KO;qe.setAnimationLoop(xe),typeof self<"u"&&qe.setContext(self),this.setAnimationLoop=function(ee){we=ee,ne.setAnimationLoop(ee),ee===null?qe.stop():qe.start()},ne.addEventListener("sessionstart",Qe),ne.addEventListener("sessionend",He),this.render=function(ee,ue){if(ue!==void 0&&ue.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),ue.parent===null&&ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),ne.enabled===!0&&ne.isPresenting===!0&&(ne.cameraAutoUpdate===!0&&ne.updateCamera(ue),ue=ne.getCamera()),ee.isScene===!0&&ee.onBeforeRender(p,ee,ue,y),f=W.get(ee,h.length),f.init(),h.push(f),P.multiplyMatrices(ue.projectionMatrix,ue.matrixWorldInverse),k.setFromProjectionMatrix(P),L=this.localClippingEnabled,M=O.init(this.clippingPlanes,L,ue),u=Me.get(ee,d.length),u.init(),d.push(u),ot(ee,ue,0,p.sortObjects),u.finish(),p.sortObjects===!0&&u.sort(X,Q),M===!0&&O.beginShadows();const ve=f.state.shadowsArray;if(se.render(ve,ee,ue),M===!0&&O.endShadows(),this.info.autoReset===!0&&this.info.reset(),de.render(u,ee),f.setupLights(p.physicallyCorrectLights),ue.isArrayCamera){const ge=ue.cameras;for(let ye=0,Ve=ge.length;ye<Ve;ye++){const rt=ge[ye];rn(u,ee,rt,rt.viewport)}}else rn(u,ee,ue);y!==null&&(Ae.updateMultisampleRenderTarget(y),Ae.updateRenderTargetMipmap(y)),ee.isScene===!0&&ee.onAfterRender(p,ee,ue),N.resetDefaultState(),w=-1,C=null,h.pop(),h.length>0?f=h[h.length-1]:f=null,d.pop(),d.length>0?u=d[d.length-1]:u=null};function ot(ee,ue,ve,ge){if(ee.visible===!1)return;if(ee.layers.test(ue.layers)){if(ee.isGroup)ve=ee.renderOrder;else if(ee.isLOD)ee.autoUpdate===!0&&ee.update(ue);else if(ee.isLight)f.pushLight(ee),ee.castShadow&&f.pushShadow(ee);else if(ee.isSprite){if(!ee.frustumCulled||k.intersectsSprite(ee)){ge&&G.setFromMatrixPosition(ee.matrixWorld).applyMatrix4(P);const rt=Se.update(ee),Ye=ee.material;Ye.visible&&u.push(ee,rt,Ye,ve,G.z,null)}}else if((ee.isMesh||ee.isLine||ee.isPoints)&&(ee.isSkinnedMesh&&ee.skeleton.frame!==ae.render.frame&&(ee.skeleton.update(),ee.skeleton.frame=ae.render.frame),!ee.frustumCulled||k.intersectsObject(ee))){ge&&G.setFromMatrixPosition(ee.matrixWorld).applyMatrix4(P);const rt=Se.update(ee),Ye=ee.material;if(Array.isArray(Ye)){const ze=rt.groups;for(let pt=0,At=ze.length;pt<At;pt++){const ft=ze[pt],Ot=Ye[ft.materialIndex];Ot&&Ot.visible&&u.push(ee,rt,Ot,ve,G.z,ft)}}else Ye.visible&&u.push(ee,rt,Ye,ve,G.z,null)}}const Ve=ee.children;for(let rt=0,Ye=Ve.length;rt<Ye;rt++)ot(Ve[rt],ue,ve,ge)}function rn(ee,ue,ve,ge){const ye=ee.opaque,Ve=ee.transmissive,rt=ee.transparent;f.setupLightsView(ve),Ve.length>0&&wt(ye,ue,ve),ge&&$.viewport(b.copy(ge)),ye.length>0&&nt(ye,ue,ve),Ve.length>0&&nt(Ve,ue,ve),rt.length>0&&nt(rt,ue,ve),$.buffers.depth.setTest(!0),$.buffers.depth.setMask(!0),$.buffers.color.setMask(!0),$.setPolygonOffset(!1)}function wt(ee,ue,ve){const ge=he.isWebGL2;Z===null&&(Z=new Hl(1,1,{generateMipmaps:!0,type:le.has("EXT_color_buffer_half_float")?gm:Jl,minFilter:wu,samples:ge&&s===!0?4:0})),p.getDrawingBufferSize(U),ge?Z.setSize(U.x,U.y):Z.setSize(tw(U.x),tw(U.y));const ye=p.getRenderTarget();p.setRenderTarget(Z),p.clear();const Ve=p.toneMapping;p.toneMapping=yA,nt(ee,ue,ve),p.toneMapping=Ve,Ae.updateMultisampleRenderTarget(Z),Ae.updateRenderTargetMipmap(Z),p.setRenderTarget(ye)}function nt(ee,ue,ve){const ge=ue.isScene===!0?ue.overrideMaterial:null;for(let ye=0,Ve=ee.length;ye<Ve;ye++){const rt=ee[ye],Ye=rt.object,ze=rt.geometry,pt=ge===null?rt.material:ge,At=rt.group;Ye.layers.test(ve.layers)&&er(Ye,ue,ve,ze,pt,At)}}function er(ee,ue,ve,ge,ye,Ve){ee.onBeforeRender(p,ue,ve,ge,ye,Ve),ee.modelViewMatrix.multiplyMatrices(ve.matrixWorldInverse,ee.matrixWorld),ee.normalMatrix.getNormalMatrix(ee.modelViewMatrix),ye.onBeforeRender(p,ue,ve,ge,ee,Ve),ye.transparent===!0&&ye.side===Ii?(ye.side=ci,ye.needsUpdate=!0,p.renderBufferDirect(ve,ue,ge,ye,ee,Ve),ye.side=Ia,ye.needsUpdate=!0,p.renderBufferDirect(ve,ue,ge,ye,ee,Ve),ye.side=Ii):p.renderBufferDirect(ve,ue,ge,ye,ee,Ve),ee.onAfterRender(p,ue,ve,ge,ye,Ve)}function ht(ee,ue,ve){ue.isScene!==!0&&(ue=oe);const ge=te.get(ee),ye=f.state.lights,Ve=f.state.shadowsArray,rt=ye.state.version,Ye=Fe.getParameters(ee,ye.state,Ve,ue,ve),ze=Fe.getProgramCacheKey(Ye);let pt=ge.programs;ge.environment=ee.isMeshStandardMaterial?ue.environment:null,ge.fog=ue.fog,ge.envMap=(ee.isMeshStandardMaterial?me:re).get(ee.envMap||ge.environment),pt===void 0&&(ee.addEventListener("dispose",We),pt=new Map,ge.programs=pt);let At=pt.get(ze);if(At!==void 0){if(ge.currentProgram===At&&ge.lightsStateVersion===rt)return Xt(ee,Ye),At}else Ye.uniforms=Fe.getUniforms(ee),ee.onBuild(ve,Ye,p),ee.onBeforeCompile(Ye,p),At=Fe.acquireProgram(Ye,ze),pt.set(ze,At),ge.uniforms=Ye.uniforms;const ft=ge.uniforms;(!ee.isShaderMaterial&&!ee.isRawShaderMaterial||ee.clipping===!0)&&(ft.clippingPlanes=O.uniform),Xt(ee,Ye),ge.needsLights=Yt(ee),ge.lightsStateVersion=rt,ge.needsLights&&(ft.ambientLightColor.value=ye.state.ambient,ft.lightProbe.value=ye.state.probe,ft.directionalLights.value=ye.state.directional,ft.directionalLightShadows.value=ye.state.directionalShadow,ft.spotLights.value=ye.state.spot,ft.spotLightShadows.value=ye.state.spotShadow,ft.rectAreaLights.value=ye.state.rectArea,ft.ltc_1.value=ye.state.rectAreaLTC1,ft.ltc_2.value=ye.state.rectAreaLTC2,ft.pointLights.value=ye.state.point,ft.pointLightShadows.value=ye.state.pointShadow,ft.hemisphereLights.value=ye.state.hemi,ft.directionalShadowMap.value=ye.state.directionalShadowMap,ft.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,ft.spotShadowMap.value=ye.state.spotShadowMap,ft.spotLightMatrix.value=ye.state.spotLightMatrix,ft.spotLightMap.value=ye.state.spotLightMap,ft.pointShadowMap.value=ye.state.pointShadowMap,ft.pointShadowMatrix.value=ye.state.pointShadowMatrix);const Ot=At.getUniforms(),Tr=Xy.seqWithValue(Ot.seq,ft);return ge.currentProgram=At,ge.uniformsList=Tr,At}function Xt(ee,ue){const ve=te.get(ee);ve.outputEncoding=ue.outputEncoding,ve.instancing=ue.instancing,ve.skinning=ue.skinning,ve.morphTargets=ue.morphTargets,ve.morphNormals=ue.morphNormals,ve.morphColors=ue.morphColors,ve.morphTargetsCount=ue.morphTargetsCount,ve.numClippingPlanes=ue.numClippingPlanes,ve.numIntersection=ue.numClipIntersection,ve.vertexAlphas=ue.vertexAlphas,ve.vertexTangents=ue.vertexTangents,ve.toneMapping=ue.toneMapping}function Ao(ee,ue,ve,ge,ye){ue.isScene!==!0&&(ue=oe),Ae.resetTextureUnits();const Ve=ue.fog,rt=ge.isMeshStandardMaterial?ue.environment:null,Ye=y===null?p.outputEncoding:y.isXRRenderTarget===!0?y.texture.encoding:Ys,ze=(ge.isMeshStandardMaterial?me:re).get(ge.envMap||rt),pt=ge.vertexColors===!0&&!!ve.attributes.color&&ve.attributes.color.itemSize===4,At=!!ge.normalMap&&!!ve.attributes.tangent,ft=!!ve.morphAttributes.position,Ot=!!ve.morphAttributes.normal,Tr=!!ve.morphAttributes.color,Wo=ge.toneMapped?p.toneMapping:yA,Oo=ve.morphAttributes.position||ve.morphAttributes.normal||ve.morphAttributes.color,di=Oo!==void 0?Oo.length:0,Tt=te.get(ge),Zo=f.state.lights;if(M===!0&&(L===!0||ee!==C)){const Cr=ee===C&&ge.id===w;O.setState(ge,ee,Cr)}let hn=!1;ge.version===Tt.__version?(Tt.needsLights&&Tt.lightsStateVersion!==Zo.state.version||Tt.outputEncoding!==Ye||ye.isInstancedMesh&&Tt.instancing===!1||!ye.isInstancedMesh&&Tt.instancing===!0||ye.isSkinnedMesh&&Tt.skinning===!1||!ye.isSkinnedMesh&&Tt.skinning===!0||Tt.envMap!==ze||ge.fog===!0&&Tt.fog!==Ve||Tt.numClippingPlanes!==void 0&&(Tt.numClippingPlanes!==O.numPlanes||Tt.numIntersection!==O.numIntersection)||Tt.vertexAlphas!==pt||Tt.vertexTangents!==At||Tt.morphTargets!==ft||Tt.morphNormals!==Ot||Tt.morphColors!==Tr||Tt.toneMapping!==Wo||he.isWebGL2===!0&&Tt.morphTargetsCount!==di)&&(hn=!0):(hn=!0,Tt.__version=ge.version);let Nr=Tt.currentProgram;hn===!0&&(Nr=ht(ge,ue,ye));let ms=!1,Da=!1,uc=!1;const tr=Nr.getUniforms(),lo=Tt.uniforms;if($.useProgram(Nr.program)&&(ms=!0,Da=!0,uc=!0),ge.id!==w&&(w=ge.id,Da=!0),ms||C!==ee){if(tr.setValue(K,"projectionMatrix",ee.projectionMatrix),he.logarithmicDepthBuffer&&tr.setValue(K,"logDepthBufFC",2/(Math.log(ee.far+1)/Math.LN2)),C!==ee&&(C=ee,Da=!0,uc=!0),ge.isShaderMaterial||ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshStandardMaterial||ge.envMap){const Cr=tr.map.cameraPosition;Cr!==void 0&&Cr.setValue(K,G.setFromMatrixPosition(ee.matrixWorld))}(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&tr.setValue(K,"isOrthographic",ee.isOrthographicCamera===!0),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial||ge.isShadowMaterial||ye.isSkinnedMesh)&&tr.setValue(K,"viewMatrix",ee.matrixWorldInverse)}if(ye.isSkinnedMesh){tr.setOptional(K,ye,"bindMatrix"),tr.setOptional(K,ye,"bindMatrixInverse");const Cr=ye.skeleton;Cr&&(he.floatVertexTextures?(Cr.boneTexture===null&&Cr.computeBoneTexture(),tr.setValue(K,"boneTexture",Cr.boneTexture,Ae),tr.setValue(K,"boneTextureSize",Cr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const fc=ve.morphAttributes;if((fc.position!==void 0||fc.normal!==void 0||fc.color!==void 0&&he.isWebGL2===!0)&&Be.update(ye,ve,ge,Nr),(Da||Tt.receiveShadow!==ye.receiveShadow)&&(Tt.receiveShadow=ye.receiveShadow,tr.setValue(K,"receiveShadow",ye.receiveShadow)),ge.isMeshGouraudMaterial&&ge.envMap!==null&&(lo.envMap.value=ze,lo.flipEnvMap.value=ze.isCubeTexture&&ze.isRenderTargetTexture===!1?-1:1),Da&&(tr.setValue(K,"toneMappingExposure",p.toneMappingExposure),Tt.needsLights&&Zt(lo,uc),Ve&&ge.fog===!0&&Ue.refreshFogUniforms(lo,Ve),Ue.refreshMaterialUniforms(lo,ge,H,T,Z),Xy.upload(K,Tt.uniformsList,lo,Ae)),ge.isShaderMaterial&&ge.uniformsNeedUpdate===!0&&(Xy.upload(K,Tt.uniformsList,lo,Ae),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&tr.setValue(K,"center",ye.center),tr.setValue(K,"modelViewMatrix",ye.modelViewMatrix),tr.setValue(K,"normalMatrix",ye.normalMatrix),tr.setValue(K,"modelMatrix",ye.matrixWorld),ge.isShaderMaterial||ge.isRawShaderMaterial){const Cr=ge.uniformsGroups;for(let Rb=0,$5=Cr.length;Rb<$5;Rb++)if(he.isWebGL2){const zQ=Cr[Rb];j.update(zQ,Nr),j.bind(zQ,Nr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Nr}function Zt(ee,ue){ee.ambientLightColor.needsUpdate=ue,ee.lightProbe.needsUpdate=ue,ee.directionalLights.needsUpdate=ue,ee.directionalLightShadows.needsUpdate=ue,ee.pointLights.needsUpdate=ue,ee.pointLightShadows.needsUpdate=ue,ee.spotLights.needsUpdate=ue,ee.spotLightShadows.needsUpdate=ue,ee.rectAreaLights.needsUpdate=ue,ee.hemisphereLights.needsUpdate=ue}function Yt(ee){return ee.isMeshLambertMaterial||ee.isMeshToonMaterial||ee.isMeshPhongMaterial||ee.isMeshStandardMaterial||ee.isShadowMaterial||ee.isShaderMaterial&&ee.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(ee,ue,ve){te.get(ee.texture).__webglTexture=ue,te.get(ee.depthTexture).__webglTexture=ve;const ge=te.get(ee);ge.__hasExternalTextures=!0,ge.__hasExternalTextures&&(ge.__autoAllocateDepthBuffer=ve===void 0,ge.__autoAllocateDepthBuffer||le.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ge.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ee,ue){const ve=te.get(ee);ve.__webglFramebuffer=ue,ve.__useDefaultFramebuffer=ue===void 0},this.setRenderTarget=function(ee,ue=0,ve=0){y=ee,g=ue,v=ve;let ge=!0,ye=null,Ve=!1,rt=!1;if(ee){const ze=te.get(ee);ze.__useDefaultFramebuffer!==void 0?($.bindFramebuffer(36160,null),ge=!1):ze.__webglFramebuffer===void 0?Ae.setupRenderTarget(ee):ze.__hasExternalTextures&&Ae.rebindTextures(ee,te.get(ee.texture).__webglTexture,te.get(ee.depthTexture).__webglTexture);const pt=ee.texture;(pt.isData3DTexture||pt.isDataArrayTexture||pt.isCompressedArrayTexture)&&(rt=!0);const At=te.get(ee).__webglFramebuffer;ee.isWebGLCubeRenderTarget?(ye=At[ue],Ve=!0):he.isWebGL2&&ee.samples>0&&Ae.useMultisampledRTT(ee)===!1?ye=te.get(ee).__webglMultisampledFramebuffer:ye=At,b.copy(ee.viewport),F.copy(ee.scissor),I=ee.scissorTest}else b.copy(B).multiplyScalar(H).floor(),F.copy(E).multiplyScalar(H).floor(),I=R;if($.bindFramebuffer(36160,ye)&&he.drawBuffers&&ge&&$.drawBuffers(ee,ye),$.viewport(b),$.scissor(F),$.setScissorTest(I),Ve){const ze=te.get(ee.texture);K.framebufferTexture2D(36160,36064,34069+ue,ze.__webglTexture,ve)}else if(rt){const ze=te.get(ee.texture),pt=ue||0;K.framebufferTextureLayer(36160,36064,ze.__webglTexture,ve||0,pt)}w=-1},this.readRenderTargetPixels=function(ee,ue,ve,ge,ye,Ve,rt){if(!(ee&&ee.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ye=te.get(ee).__webglFramebuffer;if(ee.isWebGLCubeRenderTarget&&rt!==void 0&&(Ye=Ye[rt]),Ye){$.bindFramebuffer(36160,Ye);try{const ze=ee.texture,pt=ze.format,At=ze.type;if(pt!==Ci&&x.convert(pt)!==K.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ft=At===gm&&(le.has("EXT_color_buffer_half_float")||he.isWebGL2&&le.has("EXT_color_buffer_float"));if(At!==Jl&&x.convert(At)!==K.getParameter(35738)&&!(At===vl&&(he.isWebGL2||le.has("OES_texture_float")||le.has("WEBGL_color_buffer_float")))&&!ft){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ue>=0&&ue<=ee.width-ge&&ve>=0&&ve<=ee.height-ye&&K.readPixels(ue,ve,ge,ye,x.convert(pt),x.convert(At),Ve)}finally{const ze=y!==null?te.get(y).__webglFramebuffer:null;$.bindFramebuffer(36160,ze)}}},this.copyFramebufferToTexture=function(ee,ue,ve=0){const ge=Math.pow(2,-ve),ye=Math.floor(ue.image.width*ge),Ve=Math.floor(ue.image.height*ge);Ae.setTexture2D(ue,0),K.copyTexSubImage2D(3553,ve,0,0,ee.x,ee.y,ye,Ve),$.unbindTexture()},this.copyTextureToTexture=function(ee,ue,ve,ge=0){const ye=ue.image.width,Ve=ue.image.height,rt=x.convert(ve.format),Ye=x.convert(ve.type);Ae.setTexture2D(ve,0),K.pixelStorei(37440,ve.flipY),K.pixelStorei(37441,ve.premultiplyAlpha),K.pixelStorei(3317,ve.unpackAlignment),ue.isDataTexture?K.texSubImage2D(3553,ge,ee.x,ee.y,ye,Ve,rt,Ye,ue.image.data):ue.isCompressedTexture?K.compressedTexSubImage2D(3553,ge,ee.x,ee.y,ue.mipmaps[0].width,ue.mipmaps[0].height,rt,ue.mipmaps[0].data):K.texSubImage2D(3553,ge,ee.x,ee.y,rt,Ye,ue.image),ge===0&&ve.generateMipmaps&&K.generateMipmap(3553),$.unbindTexture()},this.copyTextureToTexture3D=function(ee,ue,ve,ge,ye=0){if(p.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ve=ee.max.x-ee.min.x+1,rt=ee.max.y-ee.min.y+1,Ye=ee.max.z-ee.min.z+1,ze=x.convert(ge.format),pt=x.convert(ge.type);let At;if(ge.isData3DTexture)Ae.setTexture3D(ge,0),At=32879;else if(ge.isDataArrayTexture)Ae.setTexture2DArray(ge,0),At=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}K.pixelStorei(37440,ge.flipY),K.pixelStorei(37441,ge.premultiplyAlpha),K.pixelStorei(3317,ge.unpackAlignment);const ft=K.getParameter(3314),Ot=K.getParameter(32878),Tr=K.getParameter(3316),Wo=K.getParameter(3315),Oo=K.getParameter(32877),di=ve.isCompressedTexture?ve.mipmaps[0]:ve.image;K.pixelStorei(3314,di.width),K.pixelStorei(32878,di.height),K.pixelStorei(3316,ee.min.x),K.pixelStorei(3315,ee.min.y),K.pixelStorei(32877,ee.min.z),ve.isDataTexture||ve.isData3DTexture?K.texSubImage3D(At,ye,ue.x,ue.y,ue.z,Ve,rt,Ye,ze,pt,di.data):ve.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),K.compressedTexSubImage3D(At,ye,ue.x,ue.y,ue.z,Ve,rt,Ye,ze,di.data)):K.texSubImage3D(At,ye,ue.x,ue.y,ue.z,Ve,rt,Ye,ze,pt,di),K.pixelStorei(3314,ft),K.pixelStorei(32878,Ot),K.pixelStorei(3316,Tr),K.pixelStorei(3315,Wo),K.pixelStorei(32877,Oo),ye===0&&ge.generateMipmaps&&K.generateMipmap(At),$.unbindTexture()},this.initTexture=function(ee){ee.isCubeTexture?Ae.setTextureCube(ee,0):ee.isData3DTexture?Ae.setTexture3D(ee,0):ee.isDataArrayTexture||ee.isCompressedArrayTexture?Ae.setTexture2DArray(ee,0):Ae.setTexture2D(ee,0),$.unbindTexture()},this.resetState=function(){g=0,v=0,y=null,$.reset(),N.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class ane extends LC{}ane.prototype.isWebGL1Renderer=!0;let nw=class extends kt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}};class Ane{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=tE,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=To()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=To()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=To()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const $r=new z;class K_{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)$r.fromBufferAttribute(this,t),$r.applyMatrix4(e),this.setXYZ(t,$r.x,$r.y,$r.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)$r.fromBufferAttribute(this,t),$r.applyNormalMatrix(e),this.setXYZ(t,$r.x,$r.y,$r.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)$r.fromBufferAttribute(this,t),$r.transformDirection(e),this.setXYZ(t,$r.x,$r.y,$r.z);return this}setX(e,t){return this.normalized&&(t=tn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=tn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=tn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=tn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=hA(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=hA(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=hA(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=hA(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array),i=tn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=tn(t,this.array),r=tn(r,this.array),i=tn(i,this.array),s=tn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new st(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new K_(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const gT=new z,mT=new Vt,vT=new Vt,lne=new z,yT=new Oe;class Mh extends Tn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Oe,this.bindMatrixInverse=new Oe}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Vt,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;mT.fromBufferAttribute(i.attributes.skinIndex,e),vT.fromBufferAttribute(i.attributes.skinWeight,e),gT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=vT.getComponent(s);if(o!==0){const a=mT.getComponent(s);yT.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(lne.copy(gT).applyMatrix4(yT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class ym extends kt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class tZ extends qn{constructor(e=null,t=1,r=1,i,s,o,a,A,l=mr,c=mr,u,f){super(null,o,a,A,l,c,i,s,u,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const BT=new Oe,cne=new Oe;class ac{constructor(e=[],t=[]){this.uuid=To(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Oe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Oe;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:cne;BT.multiplyMatrices(a,t[s]),BT.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new ac(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=WO(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new tZ(t,e,e,Ci,vl);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new ym),this.bones.push(o),this.boneInverses.push(new Oe().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class rw extends st{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const wT=new Oe,CT=new Oe,vv=[],une=new Oe,Ip=new Tn;class PC extends Tn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new rw(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1;for(let i=0;i<r;i++)this.setMatrixAt(i,une)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Ip.geometry=this.geometry,Ip.material=this.material,Ip.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,wT),CT.multiplyMatrices(r,wT),Ip.matrixWorld=CT,Ip.raycast(e,vv);for(let o=0,a=vv.length;o<a;o++){const A=vv[o];A.instanceId=s,A.object=this,t.push(A)}vv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new rw(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class NA extends Os{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ne(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const bT=new z,xT=new z,IT=new Oe,iI=new i0,yv=new Cu;class Th extends kt{constructor(e=new zt,t=new NA){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)bT.fromBufferAttribute(t,i-1),xT.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=bT.distanceTo(xT);e.setAttribute("lineDistance",new vn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),yv.copy(r.boundingSphere),yv.applyMatrix4(i),yv.radius+=s,e.ray.intersectsSphere(yv)===!1)return;IT.copy(i).invert(),iI.copy(e.ray).applyMatrix4(IT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),A=a*a,l=new z,c=new z,u=new z,f=new z,d=this.isLineSegments?2:1,h=r.index,m=r.attributes.position;if(h!==null){const g=Math.max(0,o.start),v=Math.min(h.count,o.start+o.count);for(let y=g,w=v-1;y<w;y+=d){const C=h.getX(y),b=h.getX(y+1);if(l.fromBufferAttribute(m,C),c.fromBufferAttribute(m,b),iI.distanceSqToSegment(l,c,f,u)>A)continue;f.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(f);I<e.near||I>e.far||t.push({distance:I,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),v=Math.min(m.count,o.start+o.count);for(let y=g,w=v-1;y<w;y+=d){if(l.fromBufferAttribute(m,y),c.fromBufferAttribute(m,y+1),iI.distanceSqToSegment(l,c,f,u)>A)continue;f.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(f);b<e.near||b>e.far||t.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const FT=new z,ET=new z;class a0 extends Th{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)FT.fromBufferAttribute(t,i),ET.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+FT.distanceTo(ET);e.setAttribute("lineDistance",new vn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class fne extends Th{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class nZ extends Os{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ne(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const UT=new Oe,sE=new i0,Bv=new Cu,wv=new z;class dne extends kt{constructor(e=new zt,t=new nZ){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Bv.copy(r.boundingSphere),Bv.applyMatrix4(i),Bv.radius+=s,e.ray.intersectsSphere(Bv)===!1)return;UT.copy(i).invert(),sE.copy(e.ray).applyMatrix4(UT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),A=a*a,l=r.index,u=r.attributes.position;if(l!==null){const f=Math.max(0,o.start),d=Math.min(l.count,o.start+o.count);for(let h=f,p=d;h<p;h++){const m=l.getX(h);wv.fromBufferAttribute(u,m),_T(wv,m,A,i,e,t,this)}}else{const f=Math.max(0,o.start),d=Math.min(u.count,o.start+o.count);for(let h=f,p=d;h<p;h++)wv.fromBufferAttribute(u,h),_T(wv,h,A,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function _T(n,e,t,r,i,s,o){const a=sE.distanceSqToPoint(n);if(a<t){const A=new z;sE.closestPointToPoint(n,A),A.applyMatrix4(r);const l=i.ray.origin.distanceTo(A);if(l<i.near||l>i.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:A,index:e,face:null,object:o})}}class hne{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,A=s-1,l;for(;a<=A;)if(i=Math.floor(a+(A-a)/2),l=r[i]-o,l<0)a=i+1;else if(l>0)A=i-1;else{A=i;break}if(i=A,r[i]===o)return i/(s-1);const c=r[i],f=r[i+1]-c,d=(o-c)/f;return(i+d)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),A=t||(o.isVector2?new Ge:new z);return A.copy(a).sub(o).normalize(),A}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new z,i=[],s=[],o=[],a=new z,A=new Oe;for(let d=0;d<=e;d++){const h=d/e;i[d]=this.getTangentAt(h,new z)}s[0]=new z,o[0]=new z;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),f=Math.abs(i[0].z);c<=l&&(l=c,r.set(1,0,0)),u<=l&&(l=u,r.set(0,1,0)),f<=l&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const h=Math.acos(or(i[d-1].dot(i[d]),-1,1));s[d].applyMatrix4(A.makeRotationAxis(a,h))}o[d].crossVectors(i[d],s[d])}if(t===!0){let d=Math.acos(or(s[0].dot(s[e]),-1,1));d/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let h=1;h<=e;h++)s[h].applyMatrix4(A.makeRotationAxis(i[h],d*h)),o[h].crossVectors(i[h],s[h])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class WC extends zt{constructor(e=1,t=1,r=1,i=8,s=1,o=!1,a=0,A=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:A};const l=this;i=Math.floor(i),s=Math.floor(s);const c=[],u=[],f=[],d=[];let h=0;const p=[],m=r/2;let g=0;v(),o===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new vn(u,3)),this.setAttribute("normal",new vn(f,3)),this.setAttribute("uv",new vn(d,2));function v(){const w=new z,C=new z;let b=0;const F=(t-e)/r;for(let I=0;I<=s;I++){const S=[],T=I/s,H=T*(t-e)+e;for(let X=0;X<=i;X++){const Q=X/i,B=Q*A+a,E=Math.sin(B),R=Math.cos(B);C.x=H*E,C.y=-T*r+m,C.z=H*R,u.push(C.x,C.y,C.z),w.set(E,F,R).normalize(),f.push(w.x,w.y,w.z),d.push(Q,1-T),S.push(h++)}p.push(S)}for(let I=0;I<i;I++)for(let S=0;S<s;S++){const T=p[S][I],H=p[S+1][I],X=p[S+1][I+1],Q=p[S][I+1];c.push(T,H,Q),c.push(H,X,Q),b+=6}l.addGroup(g,b,0),g+=b}function y(w){const C=h,b=new Ge,F=new z;let I=0;const S=w===!0?e:t,T=w===!0?1:-1;for(let X=1;X<=i;X++)u.push(0,m*T,0),f.push(0,T,0),d.push(.5,.5),h++;const H=h;for(let X=0;X<=i;X++){const B=X/i*A+a,E=Math.cos(B),R=Math.sin(B);F.x=S*R,F.y=m*T,F.z=S*E,u.push(F.x,F.y,F.z),f.push(0,T,0),b.x=E*.5+.5,b.y=R*.5*T+.5,d.push(b.x,b.y),h++}for(let X=0;X<i;X++){const Q=C+X,B=H+X;w===!0?c.push(B,B+1,Q):c.push(B+1,B,Q),I+=3}l.addGroup(g,I,w===!0?1:2),g+=I}}static fromJSON(e){return new WC(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class j_ extends zt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const A=Math.min(o+a,Math.PI);let l=0;const c=[],u=new z,f=new z,d=[],h=[],p=[],m=[];for(let g=0;g<=r;g++){const v=[],y=g/r;let w=0;g==0&&o==0?w=.5/t:g==r&&A==Math.PI&&(w=-.5/t);for(let C=0;C<=t;C++){const b=C/t;u.x=-e*Math.cos(i+b*s)*Math.sin(o+y*a),u.y=e*Math.cos(o+y*a),u.z=e*Math.sin(i+b*s)*Math.sin(o+y*a),h.push(u.x,u.y,u.z),f.copy(u).normalize(),p.push(f.x,f.y,f.z),m.push(b+w,1-y),v.push(l++)}c.push(v)}for(let g=0;g<r;g++)for(let v=0;v<t;v++){const y=c[g][v+1],w=c[g][v],C=c[g+1][v],b=c[g+1][v+1];(g!==0||o>0)&&d.push(y,w,b),(g!==r-1||A<Math.PI)&&d.push(w,C,b)}this.setIndex(d),this.setAttribute("position",new vn(h,3)),this.setAttribute("normal",new vn(p,3)),this.setAttribute("uv",new vn(m,2))}static fromJSON(e){return new j_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class cu extends Os{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ne(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sh,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bu extends cu{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ge(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return or(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ne(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ne(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ne(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class sI extends Os{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ne(16777215),this.specular=new Ne(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sh,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=NC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pne extends Os{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sh,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=NC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function KA(n,e,t){return rZ(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Cv(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function rZ(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function gne(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function ST(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let A=0;A!==e;++A)i[o++]=n[a+A]}return i}function iZ(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}class A0{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let A=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===A)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class mne extends A0{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:cd,endingEnd:cd}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],A=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case ud:s=e,a=2*t-r;break;case ew:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(A===void 0)switch(this.getSettings_().endingEnd){case ud:o=e,A=2*r-t;break;case ew:o=1,A=r+i[1]-i[0];break;default:o=e-1,A=t}const l=(r-t)*.5,c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(A-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,A=e*a,l=A-a,c=this._offsetPrev,u=this._offsetNext,f=this._weightPrev,d=this._weightNext,h=(r-t)/(i-t),p=h*h,m=p*h,g=-f*m+2*f*p-f*h,v=(1+f)*m+(-1.5-2*f)*p+(-.5+f)*h+1,y=(-1-d)*m+(1.5+d)*p+.5*h,w=d*m-d*p;for(let C=0;C!==a;++C)s[C]=g*o[c+C]+v*o[l+C]+y*o[A+C]+w*o[u+C];return s}}class sZ extends A0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,A=e*a,l=A-a,c=(r-t)/(i-t),u=1-c;for(let f=0;f!==a;++f)s[f]=o[l+f]*u+o[A+f]*c;return s}}class vne extends A0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ra{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Cv(t,this.TimeBufferType),this.values=Cv(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Cv(e.times,Array),values:Cv(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new vne(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new sZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new mne(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case sh:t=this.InterpolantFactoryMethodDiscrete;break;case lu:t=this.InterpolantFactoryMethodLinear;break;case Qx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return sh;case this.InterpolantFactoryMethodLinear:return lu;case this.InterpolantFactoryMethodSmooth:return Qx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=KA(r,s,o),this.values=KA(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const A=r[a];if(typeof A=="number"&&isNaN(A)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,A),e=!1;break}if(o!==null&&o>A){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,A,o),e=!1;break}o=A}if(i!==void 0&&rZ(i))for(let a=0,A=i.length;a!==A;++a){const l=i[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=KA(this.times),t=KA(this.values),r=this.getValueSize(),i=this.getInterpolation()===Qx,s=e.length-1;let o=1;for(let a=1;a<s;++a){let A=!1;const l=e[a],c=e[a+1];if(l!==c&&(a!==1||l!==e[0]))if(i)A=!0;else{const u=a*r,f=u-r,d=u+r;for(let h=0;h!==r;++h){const p=t[u+h];if(p!==t[f+h]||p!==t[d+h]){A=!0;break}}}if(A){if(a!==o){e[o]=e[a];const u=a*r,f=o*r;for(let d=0;d!==r;++d)t[f+d]=t[u+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,A=o*r,l=0;l!==r;++l)t[A+l]=t[a+l];++o}return o!==e.length?(this.times=KA(e,0,o),this.values=KA(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=KA(this.times,0),t=KA(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ra.prototype.TimeBufferType=Float32Array;Ra.prototype.ValueBufferType=Float32Array;Ra.prototype.DefaultInterpolation=lu;class Nh extends Ra{}Nh.prototype.ValueTypeName="bool";Nh.prototype.ValueBufferType=Array;Nh.prototype.DefaultInterpolation=sh;Nh.prototype.InterpolantFactoryMethodLinear=void 0;Nh.prototype.InterpolantFactoryMethodSmooth=void 0;class oZ extends Ra{}oZ.prototype.ValueTypeName="color";class ah extends Ra{}ah.prototype.ValueTypeName="number";class yne extends A0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,A=(r-t)/(i-t);let l=e*a;for(let c=l+a;l!==c;l+=4)et.slerpFlat(s,0,o,l-a,o,l,A);return s}}class Fa extends Ra{InterpolantFactoryMethodLinear(e){return new yne(this.times,this.values,this.getValueSize(),e)}}Fa.prototype.ValueTypeName="quaternion";Fa.prototype.DefaultInterpolation=lu;Fa.prototype.InterpolantFactoryMethodSmooth=void 0;class kh extends Ra{}kh.prototype.ValueTypeName="string";kh.prototype.ValueBufferType=Array;kh.prototype.DefaultInterpolation=sh;kh.prototype.InterpolantFactoryMethodLinear=void 0;kh.prototype.InterpolantFactoryMethodSmooth=void 0;class zl extends Ra{}zl.prototype.ValueTypeName="vector";class uu{constructor(e,t=-1,r,i=G_){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=To(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(wne(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Ra.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let A=[],l=[];A.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);const c=gne(A);A=ST(A,1,c),l=ST(l,1,c),!i&&A[0]===0&&(A.push(s),l.push(l[0])),o.push(new ah(".morphTargetInfluences["+t[a].name+"]",A,l).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,A=e.length;a<A;a++){const l=e[a],c=l.name.match(s);if(c&&c.length>1){const u=c[1];let f=i[u];f||(i[u]=f=[]),f.push(l)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(u,f,d,h,p){if(d.length!==0){const m=[],g=[];iZ(d,m,g,h),m.length!==0&&p.push(new u(f,m,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let A=e.length||-1;const l=e.hierarchy||[];for(let u=0;u<l.length;u++){const f=l[u].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let h;for(h=0;h<f.length;h++)if(f[h].morphTargets)for(let p=0;p<f[h].morphTargets.length;p++)d[f[h].morphTargets[p]]=-1;for(const p in d){const m=[],g=[];for(let v=0;v!==f[h].morphTargets.length;++v){const y=f[h];m.push(y.time),g.push(y.morphTarget===p?1:0)}i.push(new ah(".morphTargetInfluence["+p+"]",m,g))}A=d.length*o}else{const d=".bones["+t[u].name+"]";r(zl,d+".position",f,"pos",i),r(Fa,d+".quaternion",f,"rot",i),r(zl,d+".scale",f,"scl",i)}}return i.length===0?null:new this(s,A,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Bne(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ah;case"vector":case"vector2":case"vector3":case"vector4":return zl;case"color":return oZ;case"quaternion":return Fa;case"bool":case"boolean":return Nh;case"string":return kh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function wne(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Bne(n.type);if(n.times===void 0){const t=[],r=[];iZ(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ah={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class aZ{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,A;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return A?A(c):c},this.setURLModifier=function(c){return A=c,this},this.addHandler=function(c,u){return l.push(c,u),this},this.removeHandler=function(c){const u=l.indexOf(c);return u!==-1&&l.splice(u,2),this},this.getHandler=function(c){for(let u=0,f=l.length;u<f;u+=2){const d=l[u],h=l[u+1];if(d.global&&(d.lastIndex=0),d.test(c))return h}return null}}}const Cne=new aZ;class Dh{constructor(e){this.manager=e!==void 0?e:Cne,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Za={};class bne extends Error{constructor(e,t){super(e),this.response=t}}class $_ extends Dh{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ah.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Za[e]!==void 0){Za[e].push({onLoad:t,onProgress:r,onError:i});return}Za[e]=[],Za[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,A=this.responseType;fetch(o).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;const c=Za[e],u=l.body.getReader(),f=l.headers.get("Content-Length"),d=f?parseInt(f):0,h=d!==0;let p=0;const m=new ReadableStream({start(g){v();function v(){u.read().then(({done:y,value:w})=>{if(y)g.close();else{p+=w.byteLength;const C=new ProgressEvent("progress",{lengthComputable:h,loaded:p,total:d});for(let b=0,F=c.length;b<F;b++){const I=c[b];I.onProgress&&I.onProgress(C)}g.enqueue(w),v()}})}}});return new Response(m)}else throw new bne(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(A){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return l.json();default:if(a===void 0)return l.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),f=u&&u[1]?u[1].toLowerCase():void 0,d=new TextDecoder(f);return l.arrayBuffer().then(h=>d.decode(h))}}}).then(l=>{Ah.add(e,l);const c=Za[e];delete Za[e];for(let u=0,f=c.length;u<f;u++){const d=c[u];d.onLoad&&d.onLoad(l)}}).catch(l=>{const c=Za[e];if(c===void 0)throw this.manager.itemError(e),l;delete Za[e];for(let u=0,f=c.length;u<f;u++){const d=c[u];d.onError&&d.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class AZ extends Dh{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ah.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=vm("img");function A(){c(),Ah.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(u){c(),i&&i(u),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",A,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",A,!1),a.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class xu extends Dh{constructor(e){super(e)}load(e,t,r,i){const s=new qn,o=new AZ(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class OC extends kt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ne(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const oI=new Oe,QT=new z,RT=new z;class q_{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ge(512,512),this.map=null,this.mapPass=null,this.matrix=new Oe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new X_,this._frameExtents=new Ge(1,1),this._viewportCount=1,this._viewports=[new Vt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;QT.setFromMatrixPosition(e.matrixWorld),t.position.copy(QT),RT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(RT),t.updateMatrixWorld(),oI.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oI),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(oI)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class xne extends q_{constructor(){super(new Ir(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=mm*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class lZ extends OC{constructor(e,t,r=0,i=Math.PI/3,s=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(kt.DefaultUp),this.updateMatrix(),this.target=new kt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new xne}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const MT=new Oe,Fp=new z,aI=new z;class Ine extends q_{constructor(){super(new Ir(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ge(4,2),this._viewportCount=6,this._viewports=[new Vt(2,1,1,1),new Vt(0,1,1,1),new Vt(3,1,1,1),new Vt(1,1,1,1),new Vt(3,0,1,1),new Vt(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Fp.setFromMatrixPosition(e.matrixWorld),r.position.copy(Fp),aI.copy(r.position),aI.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(aI),r.updateMatrixWorld(),i.makeTranslation(-Fp.x,-Fp.y,-Fp.z),MT.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MT)}}class oE extends OC{constructor(e,t,r=0,i=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Ine}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Fne extends q_{constructor(){super(new o0(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class eS extends OC{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(kt.DefaultUp),this.updateMatrix(),this.target=new kt,this.shadow=new Fne}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class cZ extends OC{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class va{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Ene extends Dh{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ah.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(A){return A.blob()}).then(function(A){return createImageBitmap(A,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(A){Ah.add(e,A),t&&t(A),s.manager.itemEnd(e)}).catch(function(A){i&&i(A),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class Une{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=TT(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=TT();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function TT(){return(typeof performance>"u"?Date:performance).now()}class _ne{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const A=t*this._origIndex;this._mixBufferRegion(r,i,A,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let A=t,l=t+t;A!==l;++A)if(r[A]!==r[A+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){et.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;et.multiplyQuaternionsFlat(e,o,e,t,e,r),et.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const A=t+a;e[A]=e[A]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const tS="\\[\\]\\.:\\/",Sne=new RegExp("["+tS+"]","g"),nS="[^"+tS+"]",Qne="[^"+tS.replace("\\.","")+"]",Rne=/((?:WC+[\/:])*)/.source.replace("WC",nS),Mne=/(WCOD+)?/.source.replace("WCOD",Qne),Tne=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",nS),Nne=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",nS),kne=new RegExp("^"+Rne+Mne+Tne+Nne+"$"),Dne=["material","materials","bones","map"];class Vne{constructor(e,t,r){const i=r||mt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class mt{constructor(e,t,r){this.path=t,this.parsedPath=r||mt.parseTrackName(t),this.node=mt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new mt.Composite(e,t,r):new mt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Sne,"")}static parseTrackName(e){const t=kne.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Dne.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const A=r(a.children);if(A)return A}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=mt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let l=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===l){l=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}const o=e[i];if(o===void 0){const l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let A=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}A=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(A=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(A=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[A],this.setValue=this.SetterByBindingTypeAndVersioning[A][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}mt.Composite=Vne;mt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};mt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};mt.prototype.GetterByBindingType=[mt.prototype._getValue_direct,mt.prototype._getValue_array,mt.prototype._getValue_arrayElement,mt.prototype._getValue_toArray];mt.prototype.SetterByBindingTypeAndVersioning=[[mt.prototype._setValue_direct,mt.prototype._setValue_direct_setNeedsUpdate,mt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mt.prototype._setValue_array,mt.prototype._setValue_array_setNeedsUpdate,mt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mt.prototype._setValue_arrayElement,mt.prototype._setValue_arrayElement_setNeedsUpdate,mt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mt.prototype._setValue_fromArray,mt.prototype._setValue_fromArray_setNeedsUpdate,mt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Lne{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),A={endingStart:cd,endingEnd:cd};for(let l=0;l!==o;++l){const c=s[l].createInterpolant(null);a[l]=c,c.settings=A}this._interpolantSettings=A,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Oj,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const A=a.parameterPositions,l=a.sampleValues;return A[0]=s,A[1]=s+r,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const A=(e-s)*r;A<0||r===0?t=0:(this._startTime=null,t=r*A)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const A=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case Gj:for(let c=0,u=A.length;c!==u;++c)A[c].evaluate(o),l[c].accumulateAdditive(a);break;case G_:default:for(let c=0,u=A.length;c!==u;++c)A[c].evaluate(o),l[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===Zj;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===Wj){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const A=this.repetitions-s;if(A<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(A===1){const l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=ud,i.endingEnd=ud):(e?i.endingStart=this.zeroSlopeAtStart?ud:cd:i.endingStart=ew,t?i.endingEnd=this.zeroSlopeAtEnd?ud:cd:i.endingEnd=ew)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,A=o.sampleValues;return a[0]=s,A[0]=t,a[1]=s+e,A[1]=r,this}}const Pne=new Float32Array(1);class Wne extends oc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,A=r.uuid,l=this._bindingsByRootAndName;let c=l[A];c===void 0&&(c={},l[A]=c);for(let u=0;u!==s;++u){const f=i[u],d=f.name;let h=c[d];if(h!==void 0)++h.referenceCount,o[u]=h;else{if(h=o[u],h!==void 0){h._cacheIndex===null&&(++h.referenceCount,this._addInactiveBinding(h,A,d));continue}const p=t&&t._propertyBindings[u].binding.parsedPath;h=new _ne(mt.create(r,d,p),f.ValueTypeName,f.getValueSize()),++h.referenceCount,this._addInactiveBinding(h,A,d),o[u]=h}a[u].resultBuffer=h.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],A=a.knownActions,l=A[A.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,A[c]=l,A.pop(),e._byClipCacheIndex=null;const u=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete u[f],A.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],A=t[t.length-1],l=e._cacheIndex;A._cacheIndex=l,t[l]=A,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new sZ(new Float32Array(2),new Float32Array(2),1,Pne),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?uu.findByName(i,e):e;const a=o!==null?o.uuid:e,A=this._actionsByClip[a];let l=null;if(r===void 0&&(o!==null?r=o.blendMode:r=G_),A!==void 0){const u=A.actionByRoot[s];if(u!==void 0&&u.blendMode===r)return u;l=A.knownActions[0],o===null&&(o=l._clip)}if(o===null)return null;const c=new Lne(this,o,t,r);return this._bindAction(c,l),this._addInactiveAction(c,a,s),c}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?uu.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==r;++l)t[l]._update(i,e,s,o);const a=this._bindings,A=this._nActiveBindings;for(let l=0;l!==A;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,A=o.length;a!==A;++a){const l=o[a];this._deactivateAction(l);const c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,A=a[t];A!==void 0&&(this._deactivateAction(A),this._removeInactiveAction(A))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class NT{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class uZ{constructor(e,t,r=0,i=1/0){this.ray=new i0(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new z_,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return aE(e,this,r,t),r.sort(kT),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)aE(e[i],this,r,t);return r.sort(kT),r}}function kT(n,e){return n.distance-e.distance}function aE(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)aE(i[s],e,t,!0)}}class DT{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(or(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const VT=new z,bv=new z;class BA{constructor(e=new z,t=new z){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){VT.subVectors(e,this.start),bv.subVectors(this.end,this.start);const r=bv.dot(bv);let s=bv.dot(VT)/r;return t&&(s=or(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class One extends a0{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new zt;i.setAttribute("position",new vn(t,3)),i.setAttribute("color",new vn(r,3));const s=new NA({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new Ne,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Rs}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Rs);class rS{constructor(){this.pluginCallbacks=[],this.register(function(e){return new jne(e)}),this.register(function(e){return new $ne(e)}),this.register(function(e){return new qne(e)}),this.register(function(e){return new nre(e)}),this.register(function(e){return new rre(e)}),this.register(function(e){return new ere(e)}),this.register(function(e){return new tre(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){const s=new Kne,o=[];for(let a=0,A=this.pluginCallbacks.length;a<A;a++)o.push(this.pluginCallbacks[a](s));s.setPlugins(o),s.write(e,t,i).catch(r)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,i,s,t)})}}const jt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},ss={};ss[mr]=jt.NEAREST;ss[$B]=jt.NEAREST_MIPMAP_NEAREST;ss[qB]=jt.NEAREST_MIPMAP_LINEAR;ss[ri]=jt.LINEAR;ss[Z_]=jt.LINEAR_MIPMAP_NEAREST;ss[wu]=jt.LINEAR_MIPMAP_LINEAR;ss[ai]=jt.CLAMP_TO_EDGE;ss[cs]=jt.REPEAT;ss[pm]=jt.MIRRORED_REPEAT;const LT={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},PT=12,Zne=1179937895,Gne=2,WT=8,Jne=1313821514,Hne=5130562;function ag(n,e){return n.length===e.length&&n.every(function(t,r){return t===e[r]})}function zne(n){return new TextEncoder().encode(n).buffer}function Xne(n){return ag(n.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Yne(n,e,t){const r={min:new Array(n.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(n.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+t;i++)for(let s=0;s<n.itemSize;s++){let o;n.itemSize>4?o=n.array[i*n.itemSize+s]:s===0?o=n.getX(i):s===1?o=n.getY(i):s===2?o=n.getZ(i):s===3&&(o=n.getW(i)),r.min[s]=Math.min(r.min[s],o),r.max[s]=Math.max(r.max[s],o)}return r}function fZ(n){return Math.ceil(n/4)*4}function AI(n,e=0){const t=fZ(n.byteLength);if(t!==n.byteLength){const r=new Uint8Array(t);if(r.set(new Uint8Array(n)),e!==0)for(let i=n.byteLength;i<t;i++)r[i]=e;return r.buffer}return n}function OT(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function ZT(n,e){if(n.toBlob!==void 0)return new Promise(r=>n.toBlob(r,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),n.convertToBlob({type:e,quality:t})}class Kne{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,r){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const i=this,s=i.buffers,o=i.json;r=i.options;const a=i.extensionsUsed,A=new Blob(s,{type:"application/octet-stream"}),l=Object.keys(a);if(l.length>0&&(o.extensionsUsed=l),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=A.size),r.binary===!0){const c=new FileReader;c.readAsArrayBuffer(A),c.onloadend=function(){const u=AI(c.result),f=new DataView(new ArrayBuffer(WT));f.setUint32(0,u.byteLength,!0),f.setUint32(4,Hne,!0);const d=AI(zne(JSON.stringify(o)),32),h=new DataView(new ArrayBuffer(WT));h.setUint32(0,d.byteLength,!0),h.setUint32(4,Jne,!0);const p=new ArrayBuffer(PT),m=new DataView(p);m.setUint32(0,Zne,!0),m.setUint32(4,Gne,!0);const g=PT+h.byteLength+d.byteLength+f.byteLength+u.byteLength;m.setUint32(8,g,!0);const v=new Blob([p,h,d,f,u],{type:"application/octet-stream"}),y=new FileReader;y.readAsArrayBuffer(v),y.onloadend=function(){t(y.result)}}}else if(o.buffers&&o.buffers.length>0){const c=new FileReader;c.readAsDataURL(A),c.onloadend=function(){const u=c.result;o.buffers[0].uri=u,t(o)}}else t(o)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const r=this.options,i=this.extensionsUsed;try{const s=JSON.parse(JSON.stringify(e.userData));if(r.includeCustomExtensions&&s.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const o in s.gltfExtensions)t.extensions[o]=s.gltfExtensions[o],i[o]=!0;delete s.gltfExtensions}Object.keys(s).length>0&&(t.extras=s)}catch(s){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+s.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const i=new Map;i.set(!0,this.uid++),i.set(!1,this.uid++),this.uids.set(e,i)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const r=new z;for(let i=0,s=e.count;i<s;i++)if(Math.abs(r.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const r=e.clone(),i=new z;for(let s=0,o=r.count;s<o;s++)i.fromBufferAttribute(r,s),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),r.setXYZ(s,i.x,i.y,i.z);return t.attributesNormalized.set(e,r),r}applyTextureTransform(e,t){let r=!1;const i={};(t.offset.x!==0||t.offset.y!==0)&&(i.offset=t.offset.toArray(),r=!0),t.rotation!==0&&(i.rotation=t.rotation,r=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(i.scale=t.repeat.toArray(),r=!0),r&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function r(d){return d.encoding===dt?function(p){return p<.04045?p*.0773993808:Math.pow(p*.9478672986+.0521327014,2.4)}:function(p){return p}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const i=e==null?void 0:e.image,s=t==null?void 0:t.image,o=Math.max((i==null?void 0:i.width)||0,(s==null?void 0:s.width)||0),a=Math.max((i==null?void 0:i.height)||0,(s==null?void 0:s.height)||0),A=OT();A.width=o,A.height=a;const l=A.getContext("2d");l.fillStyle="#00ffff",l.fillRect(0,0,o,a);const c=l.getImageData(0,0,o,a);if(i){l.drawImage(i,0,0,o,a);const d=r(e),h=l.getImageData(0,0,o,a).data;for(let p=2;p<h.length;p+=4)c.data[p]=d(h[p]/256)*256}if(s){l.drawImage(s,0,0,o,a);const d=r(t),h=l.getImageData(0,0,o,a).data;for(let p=1;p<h.length;p+=4)c.data[p]=d(h[p]/256)*256}l.putImageData(c,0,0);const f=(e||t).clone();return f.source=new H_(A),f.encoding=Ys,f}processBuffer(e){const t=this.json,r=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),r.push(e),0}processBufferView(e,t,r,i,s){const o=this.json;o.bufferViews||(o.bufferViews=[]);let a;t===jt.UNSIGNED_BYTE?a=1:t===jt.UNSIGNED_SHORT?a=2:a=4;const A=fZ(i*e.itemSize*a),l=new DataView(new ArrayBuffer(A));let c=0;for(let d=r;d<r+i;d++)for(let h=0;h<e.itemSize;h++){let p;e.itemSize>4?p=e.array[d*e.itemSize+h]:h===0?p=e.getX(d):h===1?p=e.getY(d):h===2?p=e.getZ(d):h===3&&(p=e.getW(d)),t===jt.FLOAT?l.setFloat32(c,p,!0):t===jt.UNSIGNED_INT?l.setUint32(c,p,!0):t===jt.UNSIGNED_SHORT?l.setUint16(c,p,!0):t===jt.UNSIGNED_BYTE&&l.setUint8(c,p),c+=a}const u={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:A};return s!==void 0&&(u.target=s),s===jt.ARRAY_BUFFER&&(u.byteStride=e.itemSize*a),this.byteOffset+=A,o.bufferViews.push(u),{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,r=t.json;return r.bufferViews||(r.bufferViews=[]),new Promise(function(i){const s=new FileReader;s.readAsArrayBuffer(e),s.onloadend=function(){const o=AI(s.result),a={buffer:t.processBuffer(o),byteOffset:t.byteOffset,byteLength:o.byteLength};t.byteOffset+=o.byteLength,i(r.bufferViews.push(a)-1)}})}processAccessor(e,t,r,i){const s=this.json,o={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};let a;if(e.array.constructor===Float32Array)a=jt.FLOAT;else if(e.array.constructor===Uint32Array)a=jt.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)a=jt.UNSIGNED_SHORT;else if(e.array.constructor===Uint8Array)a=jt.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(r===void 0&&(r=0),i===void 0&&(i=e.count),i===0)return null;const A=Yne(e,r,i);let l;t!==void 0&&(l=e===t.index?jt.ELEMENT_ARRAY_BUFFER:jt.ARRAY_BUFFER);const c=this.processBufferView(e,a,r,i,l),u={bufferView:c.id,byteOffset:c.byteOffset,componentType:a,count:i,max:A.max,min:A.min,type:o[e.itemSize]};return e.normalized===!0&&(u.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(u)-1}processImage(e,t,r,i="image/png"){const s=this,o=s.cache,a=s.json,A=s.options,l=s.pending;o.images.has(e)||o.images.set(e,{});const c=o.images.get(e),u=i+":flipY/"+r.toString();if(c[u]!==void 0)return c[u];a.images||(a.images=[]);const f={mimeType:i},d=OT();d.width=Math.min(e.width,A.maxTextureSize),d.height=Math.min(e.height,A.maxTextureSize);const h=d.getContext("2d");if(r===!0&&(h.translate(0,d.height),h.scale(1,-1)),e.data!==void 0){t!==Ci&&console.error("GLTFExporter: Only RGBAFormat is supported."),(e.width>A.maxTextureSize||e.height>A.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const m=new Uint8ClampedArray(e.height*e.width*4);for(let g=0;g<m.length;g+=4)m[g+0]=e.data[g+0],m[g+1]=e.data[g+1],m[g+2]=e.data[g+2],m[g+3]=e.data[g+3];h.putImageData(new ImageData(m,e.width,e.height),0,0)}else h.drawImage(e,0,0,d.width,d.height);A.binary===!0?l.push(ZT(d,i).then(m=>s.processBufferViewImage(m)).then(m=>{f.bufferView=m})):d.toDataURL!==void 0?f.uri=d.toDataURL(i):l.push(ZT(d,i).then(m=>new FileReader().readAsDataURL(m)).then(m=>{f.uri=m}));const p=a.images.push(f)-1;return c[u]=p,p}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const r={magFilter:ss[e.magFilter],minFilter:ss[e.minFilter],wrapS:ss[e.wrapS],wrapT:ss[e.wrapT]};return t.samplers.push(r)-1}processTexture(e){const t=this.cache,r=this.json;if(t.textures.has(e))return t.textures.get(e);r.textures||(r.textures=[]);let i=e.userData.mimeType;i==="image/webp"&&(i="image/png");const s={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,i)};e.name&&(s.name=e.name),this._invokeAll(function(a){a.writeTexture&&a.writeTexture(e,s)});const o=r.textures.push(s)-1;return t.textures.set(e,o),o}processMaterial(e){const t=this.cache,r=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;r.materials||(r.materials=[]);const i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const s=e.color.toArray().concat([e.opacity]);if(ag(s,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=s),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const a=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),A={index:this.processTexture(a)};this.applyTextureTransform(A,a),i.pbrMetallicRoughness.metallicRoughnessTexture=A}if(e.map){const a={index:this.processTexture(e.map)};this.applyTextureTransform(a,e.map),i.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){const a=e.emissive.clone().multiplyScalar(e.emissiveIntensity),A=Math.max(a.r,a.g,a.b);if(A>1&&(a.multiplyScalar(1/A),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),A>0&&(i.emissiveFactor=a.toArray()),e.emissiveMap){const l={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(l,e.emissiveMap),i.emissiveTexture=l}}if(e.normalMap){const a={index:this.processTexture(e.normalMap)};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),i.normalTexture=a}if(e.aoMap){const a={index:this.processTexture(e.aoMap),texCoord:1};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),i.occlusionTexture=a}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===Ii&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(a){a.writeMaterial&&a.writeMaterial(e,i)});const o=r.materials.push(i)-1;return t.materials.set(e,o),o}processMesh(e){const t=this.cache,r=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let y=0,w=e.material.length;y<w;y++)i.push(e.material[y].uuid);else i.push(e.material.uuid);const s=i.join(":");if(t.meshes.has(s))return t.meshes.get(s);const o=e.geometry;let a;e.isLineSegments?a=jt.LINES:e.isLineLoop?a=jt.LINE_LOOP:e.isLine?a=jt.LINE_STRIP:e.isPoints?a=jt.POINTS:a=e.material.wireframe?jt.LINES:jt.TRIANGLES;const A={},l={},c=[],u=[],f={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},d=o.getAttribute("normal");d!==void 0&&!this.isNormalizedNormalAttribute(d)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(d)));let h=null;for(let y in o.attributes){if(y.slice(0,5)==="morph")continue;const w=o.attributes[y];if(y=f[y]||y.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(y)||(y="_"+y),t.attributes.has(this.getUID(w))){l[y]=t.attributes.get(this.getUID(w));continue}h=null;const b=w.array;y==="JOINTS_0"&&!(b instanceof Uint16Array)&&!(b instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),h=new st(new Uint16Array(b),w.itemSize,w.normalized));const F=this.processAccessor(h||w,o);F!==null&&(l[y]=F,t.attributes.set(this.getUID(w),F))}if(d!==void 0&&o.setAttribute("normal",d),Object.keys(l).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const y=[],w=[],C={};if(e.morphTargetDictionary!==void 0)for(const b in e.morphTargetDictionary)C[e.morphTargetDictionary[b]]=b;for(let b=0;b<e.morphTargetInfluences.length;++b){const F={};let I=!1;for(const S in o.morphAttributes){if(S!=="position"&&S!=="normal"){I||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),I=!0);continue}const T=o.morphAttributes[S][b],H=S.toUpperCase(),X=o.attributes[S];if(t.attributes.has(this.getUID(T,!0))){F[H]=t.attributes.get(this.getUID(T,!0));continue}const Q=T.clone();if(!o.morphTargetsRelative)for(let B=0,E=T.count;B<E;B++)Q.setXYZ(B,T.getX(B)-X.getX(B),T.getY(B)-X.getY(B),T.getZ(B)-X.getZ(B));F[H]=this.processAccessor(Q,o),t.attributes.set(this.getUID(X,!0),F[H])}u.push(F),y.push(e.morphTargetInfluences[b]),e.morphTargetDictionary!==void 0&&w.push(C[b])}A.weights=y,w.length>0&&(A.extras={},A.extras.targetNames=w)}const p=Array.isArray(e.material);if(p&&o.groups.length===0)return null;const m=p?e.material:[e.material],g=p?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let y=0,w=g.length;y<w;y++){const C={mode:a,attributes:l};if(this.serializeUserData(o,C),u.length>0&&(C.targets=u),o.index!==null){let F=this.getUID(o.index);(g[y].start!==void 0||g[y].count!==void 0)&&(F+=":"+g[y].start+":"+g[y].count),t.attributes.has(F)?C.indices=t.attributes.get(F):(C.indices=this.processAccessor(o.index,o,g[y].start,g[y].count),t.attributes.set(F,C.indices)),C.indices===null&&delete C.indices}const b=this.processMaterial(m[g[y].materialIndex]);b!==null&&(C.material=b),c.push(C)}A.primitives=c,r.meshes||(r.meshes=[]),this._invokeAll(function(y){y.writeMesh&&y.writeMesh(e,A)});const v=r.meshes.push(A)-1;return t.meshes.set(s,v),v}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const r=e.isOrthographicCamera,i={type:r?"orthographic":"perspective"};return r?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:Dt.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){const r=this.json,i=this.nodeMap;r.animations||(r.animations=[]),e=rS.Utils.mergeMorphTargetTracks(e.clone(),t);const s=e.tracks,o=[],a=[];for(let A=0;A<s.length;++A){const l=s[A],c=mt.parseTrackName(l.name);let u=mt.findNode(t,c.nodeName);const f=LT[c.propertyName];if(c.objectName==="bones"&&(u.isSkinnedMesh===!0?u=u.skeleton.getBoneByName(c.objectIndex):u=void 0),!u||!f)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',l.name),null;const d=1;let h=l.values.length/l.times.length;f===LT.morphTargetInfluences&&(h/=u.morphTargetInfluences.length);let p;l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(p="CUBICSPLINE",h/=3):l.getInterpolation()===sh?p="STEP":p="LINEAR",a.push({input:this.processAccessor(new st(l.times,d)),output:this.processAccessor(new st(l.values,h)),interpolation:p}),o.push({sampler:a.length-1,target:{node:i.get(u),path:f}})}return r.animations.push({name:e.name||"clip_"+r.animations.length,samplers:a,channels:o}),r.animations.length-1}processSkin(e){const t=this.json,r=this.nodeMap,i=t.nodes[r.get(e)],s=e.skeleton;if(s===void 0)return null;const o=e.skeleton.bones[0];if(o===void 0)return null;const a=[],A=new Float32Array(s.bones.length*16),l=new Oe;for(let u=0;u<s.bones.length;++u)a.push(r.get(s.bones[u])),l.copy(s.boneInverses[u]),l.multiply(e.bindMatrix).toArray(A,u*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new st(A,16)),joints:a,skeleton:r.get(o)}),i.skin=t.skins.length-1}processNode(e){const t=this.json,r=this.options,i=this.nodeMap;t.nodes||(t.nodes=[]);const s={};if(r.trs){const a=e.quaternion.toArray(),A=e.position.toArray(),l=e.scale.toArray();ag(a,[0,0,0,1])||(s.rotation=a),ag(A,[0,0,0])||(s.translation=A),ag(l,[1,1,1])||(s.scale=l)}else e.matrixAutoUpdate&&e.updateMatrix(),Xne(e.matrix)===!1&&(s.matrix=e.matrix.elements);if(e.name!==""&&(s.name=String(e.name)),this.serializeUserData(e,s),e.isMesh||e.isLine||e.isPoints){const a=this.processMesh(e);a!==null&&(s.mesh=a)}else e.isCamera&&(s.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const a=[];for(let A=0,l=e.children.length;A<l;A++){const c=e.children[A];if(c.visible||r.onlyVisible===!1){const u=this.processNode(c);u!==null&&a.push(u)}}a.length>0&&(s.children=a)}this._invokeAll(function(a){a.writeNode&&a.writeNode(e,s)});const o=t.nodes.push(s)-1;return i.set(e,o),o}processScene(e){const t=this.json,r=this.options;t.scenes||(t.scenes=[],t.scene=0);const i={};e.name!==""&&(i.name=e.name),t.scenes.push(i);const s=[];for(let o=0,a=e.children.length;o<a;o++){const A=e.children[o];if(A.visible||r.onlyVisible===!1){const l=this.processNode(A);l!==null&&s.push(l)}}s.length>0&&(i.nodes=s),this.serializeUserData(e,i)}processObjects(e){const t=new nw;t.name="AuxScene";for(let r=0;r<e.length;r++)t.children.push(e[r]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});const r=[];for(let i=0;i<e.length;i++)e[i]instanceof nw?this.processScene(e[i]):r.push(e[i]);r.length>0&&this.processObjects(r);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let t=0,r=this.plugins.length;t<r;t++)e(this.plugins[t])}}class jne{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const r=this.writer,i=r.json,s=r.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,o.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),s[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},s[this.name]=!0);const a=i.extensions[this.name].lights;a.push(o),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}let $ne=class{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}};class qne{constructor(e){this.writer=e,this.name="KHR_materials_pbrSpecularGlossiness"}writeMaterial(e,t){if(!e.isGLTFSpecularGlossinessMaterial)return;const r=this.writer,i=r.extensionsUsed,s={};t.pbrMetallicRoughness.baseColorFactor&&(s.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);const o=[1,1,1];if(e.specular.toArray(o,0),s.specularFactor=o,s.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(s.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){const a={index:r.processTexture(e.specularMap)};r.applyTextureTransform(a,e.specularMap),s.specularGlossinessTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}let ere=class{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.clearcoatFactor=e.clearcoat,e.clearcoatMap){const o={index:r.processTexture(e.clearcoatMap)};r.applyTextureTransform(o,e.clearcoatMap),s.clearcoatTexture=o}if(s.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const o={index:r.processTexture(e.clearcoatRoughnessMap)};r.applyTextureTransform(o,e.clearcoatRoughnessMap),s.clearcoatRoughnessTexture=o}if(e.clearcoatNormalMap){const o={index:r.processTexture(e.clearcoatNormalMap)};r.applyTextureTransform(o,e.clearcoatNormalMap),s.clearcoatNormalTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}},tre=class{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.iridescenceFactor=e.iridescence,e.iridescenceMap){const o={index:r.processTexture(e.iridescenceMap)};r.applyTextureTransform(o,e.iridescenceMap),s.iridescenceTexture=o}if(s.iridescenceIor=e.iridescenceIOR,s.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],s.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const o={index:r.processTexture(e.iridescenceThicknessMap)};r.applyTextureTransform(o,e.iridescenceThicknessMap),s.iridescenceThicknessTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}},nre=class{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.transmissionFactor=e.transmission,e.transmissionMap){const o={index:r.processTexture(e.transmissionMap)};r.applyTextureTransform(o,e.transmissionMap),s.transmissionTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}},rre=class{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.thicknessFactor=e.thickness,e.thicknessMap){const o={index:r.processTexture(e.thicknessMap)};r.applyTextureTransform(o,e.thicknessMap),s.thicknessTexture=o}s.attenuationDistance=e.attenuationDistance,s.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}};rS.Utils={insertKeyframe:function(n,e){const r=n.getValueSize(),i=new n.TimeBufferType(n.times.length+1),s=new n.ValueBufferType(n.values.length+r),o=n.createInterpolant(new n.ValueBufferType(r));let a;if(n.times.length===0){i[0]=e;for(let A=0;A<r;A++)s[A]=0;a=0}else if(e<n.times[0]){if(Math.abs(n.times[0]-e)<.001)return 0;i[0]=e,i.set(n.times,1),s.set(o.evaluate(e),0),s.set(n.values,r),a=0}else if(e>n.times[n.times.length-1]){if(Math.abs(n.times[n.times.length-1]-e)<.001)return n.times.length-1;i[i.length-1]=e,i.set(n.times,0),s.set(n.values,0),s.set(o.evaluate(e),n.values.length),a=i.length-1}else for(let A=0;A<n.times.length;A++){if(Math.abs(n.times[A]-e)<.001)return A;if(n.times[A]<e&&n.times[A+1]>e){i.set(n.times.slice(0,A+1),0),i[A+1]=e,i.set(n.times.slice(A+1),A+2),s.set(n.values.slice(0,(A+1)*r),0),s.set(o.evaluate(e),(A+1)*r),s.set(n.values.slice((A+1)*r),(A+2)*r),a=A+1;break}}return n.times=i,n.values=s,a},mergeMorphTargetTracks:function(n,e){const t=[],r={},i=n.tracks;for(let s=0;s<i.length;++s){let o=i[s];const a=mt.parseTrackName(o.name),A=mt.findNode(e,a.nodeName);if(a.propertyName!=="morphTargetInfluences"||a.propertyIndex===void 0){t.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),o=o.clone(),o.setInterpolation(lu)}const l=A.morphTargetInfluences.length,c=A.morphTargetDictionary[a.propertyIndex];if(c===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let u;if(r[A.uuid]===void 0){u=o.clone();const d=new u.ValueBufferType(l*u.times.length);for(let h=0;h<u.times.length;h++)d[h*l+c]=u.values[h];u.name=(a.nodeName||"")+".morphTargetInfluences",u.values=d,r[A.uuid]=u,t.push(u);continue}const f=o.createInterpolant(new o.ValueBufferType(1));u=r[A.uuid];for(let d=0;d<u.times.length;d++)u.values[d*l+c]=f.evaluate(u.times[d]);for(let d=0;d<o.times.length;d++){const h=this.insertKeyframe(u,o.times[d]);u.values[h*l+c]=o.values[d]}}return n.tracks=t,n}};var AE={},ZC={};ZC.byteLength=ore;ZC.toByteArray=Are;ZC.fromByteArray=ure;var oa=[],Fs=[],ire=typeof Uint8Array<"u"?Uint8Array:Array,lI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ef=0,sre=lI.length;ef<sre;++ef)oa[ef]=lI[ef],Fs[lI.charCodeAt(ef)]=ef;Fs["-".charCodeAt(0)]=62;Fs["_".charCodeAt(0)]=63;function dZ(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function ore(n){var e=dZ(n),t=e[0],r=e[1];return(t+r)*3/4-r}function are(n,e,t){return(e+t)*3/4-t}function Are(n){var e,t=dZ(n),r=t[0],i=t[1],s=new ire(are(n,r,i)),o=0,a=i>0?r-4:r,A;for(A=0;A<a;A+=4)e=Fs[n.charCodeAt(A)]<<18|Fs[n.charCodeAt(A+1)]<<12|Fs[n.charCodeAt(A+2)]<<6|Fs[n.charCodeAt(A+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Fs[n.charCodeAt(A)]<<2|Fs[n.charCodeAt(A+1)]>>4,s[o++]=e&255),i===1&&(e=Fs[n.charCodeAt(A)]<<10|Fs[n.charCodeAt(A+1)]<<4|Fs[n.charCodeAt(A+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function lre(n){return oa[n>>18&63]+oa[n>>12&63]+oa[n>>6&63]+oa[n&63]}function cre(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(lre(r));return i.join("")}function ure(n){for(var e,t=n.length,r=t%3,i=[],s=16383,o=0,a=t-r;o<a;o+=s)i.push(cre(n,o,o+s>a?a:o+s));return r===1?(e=n[t-1],i.push(oa[e>>2]+oa[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(oa[e>>10]+oa[e>>4&63]+oa[e<<2&63]+"=")),i.join("")}var iS={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */iS.read=function(n,e,t,r,i){var s,o,a=i*8-r-1,A=(1<<a)-1,l=A>>1,c=-7,u=t?i-1:0,f=t?-1:1,d=n[e+u];for(u+=f,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=s*256+n[e+u],u+=f,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=o*256+n[e+u],u+=f,c-=8);if(s===0)s=1-l;else{if(s===A)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-l}return(d?-1:1)*o*Math.pow(2,s-r)};iS.write=function(n,e,t,r,i,s){var o,a,A,l=s*8-i-1,c=(1<<l)-1,u=c>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,h=r?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(A=Math.pow(2,-o))<1&&(o--,A*=2),o+u>=1?e+=f/A:e+=f*Math.pow(2,1-u),e*A>=2&&(o++,A/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*A-1)*Math.pow(2,i),o=o+u):(a=e*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;n[t+d]=a&255,d+=h,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;n[t+d]=o&255,d+=h,o/=256,l-=8);n[t+d-h]|=p*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=ZC,t=iS,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=v,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const V=new Uint8Array(1),_={foo:function(){return 42}};return Object.setPrototypeOf(_,Uint8Array.prototype),Object.setPrototypeOf(V,_),V.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(V){if(V>i)throw new RangeError('The value "'+V+'" is invalid for option "size"');const _=new Uint8Array(V);return Object.setPrototypeOf(_,a.prototype),_}function a(V,_,x){if(typeof V=="number"){if(typeof _=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(V)}return A(V,_,x)}a.poolSize=8192;function A(V,_,x){if(typeof V=="string")return f(V,_);if(ArrayBuffer.isView(V))return h(V);if(V==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V);if(W(V,ArrayBuffer)||V&&W(V.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(W(V,SharedArrayBuffer)||V&&W(V.buffer,SharedArrayBuffer)))return p(V,_,x);if(typeof V=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const N=V.valueOf&&V.valueOf();if(N!=null&&N!==V)return a.from(N,_,x);const j=m(V);if(j)return j;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof V[Symbol.toPrimitive]=="function")return a.from(V[Symbol.toPrimitive]("string"),_,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}a.from=function(V,_,x){return A(V,_,x)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(V){if(typeof V!="number")throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function c(V,_,x){return l(V),V<=0?o(V):_!==void 0?typeof x=="string"?o(V).fill(_,x):o(V).fill(_):o(V)}a.alloc=function(V,_,x){return c(V,_,x)};function u(V){return l(V),o(V<0?0:g(V)|0)}a.allocUnsafe=function(V){return u(V)},a.allocUnsafeSlow=function(V){return u(V)};function f(V,_){if((typeof _!="string"||_==="")&&(_="utf8"),!a.isEncoding(_))throw new TypeError("Unknown encoding: "+_);const x=y(V,_)|0;let N=o(x);const j=N.write(V,_);return j!==x&&(N=N.slice(0,j)),N}function d(V){const _=V.length<0?0:g(V.length)|0,x=o(_);for(let N=0;N<_;N+=1)x[N]=V[N]&255;return x}function h(V){if(W(V,Uint8Array)){const _=new Uint8Array(V);return p(_.buffer,_.byteOffset,_.byteLength)}return d(V)}function p(V,_,x){if(_<0||V.byteLength<_)throw new RangeError('"offset" is outside of buffer bounds');if(V.byteLength<_+(x||0))throw new RangeError('"length" is outside of buffer bounds');let N;return _===void 0&&x===void 0?N=new Uint8Array(V):x===void 0?N=new Uint8Array(V,_):N=new Uint8Array(V,_,x),Object.setPrototypeOf(N,a.prototype),N}function m(V){if(a.isBuffer(V)){const _=g(V.length)|0,x=o(_);return x.length===0||V.copy(x,0,0,_),x}if(V.length!==void 0)return typeof V.length!="number"||O(V.length)?o(0):d(V);if(V.type==="Buffer"&&Array.isArray(V.data))return d(V.data)}function g(V){if(V>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return V|0}function v(V){return+V!=V&&(V=0),a.alloc(+V)}a.isBuffer=function(_){return _!=null&&_._isBuffer===!0&&_!==a.prototype},a.compare=function(_,x){if(W(_,Uint8Array)&&(_=a.from(_,_.offset,_.byteLength)),W(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),!a.isBuffer(_)||!a.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(_===x)return 0;let N=_.length,j=x.length;for(let q=0,ne=Math.min(N,j);q<ne;++q)if(_[q]!==x[q]){N=_[q],j=x[q];break}return N<j?-1:j<N?1:0},a.isEncoding=function(_){switch(String(_).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(_,x){if(!Array.isArray(_))throw new TypeError('"list" argument must be an Array of Buffers');if(_.length===0)return a.alloc(0);let N;if(x===void 0)for(x=0,N=0;N<_.length;++N)x+=_[N].length;const j=a.allocUnsafe(x);let q=0;for(N=0;N<_.length;++N){let ne=_[N];if(W(ne,Uint8Array))q+ne.length>j.length?(a.isBuffer(ne)||(ne=a.from(ne)),ne.copy(j,q)):Uint8Array.prototype.set.call(j,ne,q);else if(a.isBuffer(ne))ne.copy(j,q);else throw new TypeError('"list" argument must be an Array of Buffers');q+=ne.length}return j};function y(V,_){if(a.isBuffer(V))return V.length;if(ArrayBuffer.isView(V)||W(V,ArrayBuffer))return V.byteLength;if(typeof V!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);const x=V.length,N=arguments.length>2&&arguments[2]===!0;if(!N&&x===0)return 0;let j=!1;for(;;)switch(_){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return _e(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return Ue(V).length;default:if(j)return N?-1:_e(V).length;_=(""+_).toLowerCase(),j=!0}}a.byteLength=y;function w(V,_,x){let N=!1;if((_===void 0||_<0)&&(_=0),_>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,_>>>=0,x<=_))return"";for(V||(V="utf8");;)switch(V){case"hex":return L(this,_,x);case"utf8":case"utf-8":return B(this,_,x);case"ascii":return k(this,_,x);case"latin1":case"binary":return M(this,_,x);case"base64":return Q(this,_,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,_,x);default:if(N)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),N=!0}}a.prototype._isBuffer=!0;function C(V,_,x){const N=V[_];V[_]=V[x],V[x]=N}a.prototype.swap16=function(){const _=this.length;if(_%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<_;x+=2)C(this,x,x+1);return this},a.prototype.swap32=function(){const _=this.length;if(_%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<_;x+=4)C(this,x,x+3),C(this,x+1,x+2);return this},a.prototype.swap64=function(){const _=this.length;if(_%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<_;x+=8)C(this,x,x+7),C(this,x+1,x+6),C(this,x+2,x+5),C(this,x+3,x+4);return this},a.prototype.toString=function(){const _=this.length;return _===0?"":arguments.length===0?B(this,0,_):w.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(_){if(!a.isBuffer(_))throw new TypeError("Argument must be a Buffer");return this===_?!0:a.compare(this,_)===0},a.prototype.inspect=function(){let _="";const x=n.INSPECT_MAX_BYTES;return _=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(_+=" ... "),"<Buffer "+_+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(_,x,N,j,q){if(W(_,Uint8Array)&&(_=a.from(_,_.offset,_.byteLength)),!a.isBuffer(_))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof _);if(x===void 0&&(x=0),N===void 0&&(N=_?_.length:0),j===void 0&&(j=0),q===void 0&&(q=this.length),x<0||N>_.length||j<0||q>this.length)throw new RangeError("out of range index");if(j>=q&&x>=N)return 0;if(j>=q)return-1;if(x>=N)return 1;if(x>>>=0,N>>>=0,j>>>=0,q>>>=0,this===_)return 0;let ne=q-j,Ce=N-x;const be=Math.min(ne,Ce),Ee=this.slice(j,q),We=_.slice(x,N);for(let Te=0;Te<be;++Te)if(Ee[Te]!==We[Te]){ne=Ee[Te],Ce=We[Te];break}return ne<Ce?-1:Ce<ne?1:0};function b(V,_,x,N,j){if(V.length===0)return-1;if(typeof x=="string"?(N=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,O(x)&&(x=j?0:V.length-1),x<0&&(x=V.length+x),x>=V.length){if(j)return-1;x=V.length-1}else if(x<0)if(j)x=0;else return-1;if(typeof _=="string"&&(_=a.from(_,N)),a.isBuffer(_))return _.length===0?-1:F(V,_,x,N,j);if(typeof _=="number")return _=_&255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(V,_,x):Uint8Array.prototype.lastIndexOf.call(V,_,x):F(V,[_],x,N,j);throw new TypeError("val must be string, number or Buffer")}function F(V,_,x,N,j){let q=1,ne=V.length,Ce=_.length;if(N!==void 0&&(N=String(N).toLowerCase(),N==="ucs2"||N==="ucs-2"||N==="utf16le"||N==="utf-16le")){if(V.length<2||_.length<2)return-1;q=2,ne/=2,Ce/=2,x/=2}function be(We,Te){return q===1?We[Te]:We.readUInt16BE(Te*q)}let Ee;if(j){let We=-1;for(Ee=x;Ee<ne;Ee++)if(be(V,Ee)===be(_,We===-1?0:Ee-We)){if(We===-1&&(We=Ee),Ee-We+1===Ce)return We*q}else We!==-1&&(Ee-=Ee-We),We=-1}else for(x+Ce>ne&&(x=ne-Ce),Ee=x;Ee>=0;Ee--){let We=!0;for(let Te=0;Te<Ce;Te++)if(be(V,Ee+Te)!==be(_,Te)){We=!1;break}if(We)return Ee}return-1}a.prototype.includes=function(_,x,N){return this.indexOf(_,x,N)!==-1},a.prototype.indexOf=function(_,x,N){return b(this,_,x,N,!0)},a.prototype.lastIndexOf=function(_,x,N){return b(this,_,x,N,!1)};function I(V,_,x,N){x=Number(x)||0;const j=V.length-x;N?(N=Number(N),N>j&&(N=j)):N=j;const q=_.length;N>q/2&&(N=q/2);let ne;for(ne=0;ne<N;++ne){const Ce=parseInt(_.substr(ne*2,2),16);if(O(Ce))return ne;V[x+ne]=Ce}return ne}function S(V,_,x,N){return Me(_e(_,V.length-x),V,x,N)}function T(V,_,x,N){return Me(Se(_),V,x,N)}function H(V,_,x,N){return Me(Ue(_),V,x,N)}function X(V,_,x,N){return Me(Fe(_,V.length-x),V,x,N)}a.prototype.write=function(_,x,N,j){if(x===void 0)j="utf8",N=this.length,x=0;else if(N===void 0&&typeof x=="string")j=x,N=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(N)?(N=N>>>0,j===void 0&&(j="utf8")):(j=N,N=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const q=this.length-x;if((N===void 0||N>q)&&(N=q),_.length>0&&(N<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");let ne=!1;for(;;)switch(j){case"hex":return I(this,_,x,N);case"utf8":case"utf-8":return S(this,_,x,N);case"ascii":case"latin1":case"binary":return T(this,_,x,N);case"base64":return H(this,_,x,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,_,x,N);default:if(ne)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),ne=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Q(V,_,x){return _===0&&x===V.length?e.fromByteArray(V):e.fromByteArray(V.slice(_,x))}function B(V,_,x){x=Math.min(V.length,x);const N=[];let j=_;for(;j<x;){const q=V[j];let ne=null,Ce=q>239?4:q>223?3:q>191?2:1;if(j+Ce<=x){let be,Ee,We,Te;switch(Ce){case 1:q<128&&(ne=q);break;case 2:be=V[j+1],(be&192)===128&&(Te=(q&31)<<6|be&63,Te>127&&(ne=Te));break;case 3:be=V[j+1],Ee=V[j+2],(be&192)===128&&(Ee&192)===128&&(Te=(q&15)<<12|(be&63)<<6|Ee&63,Te>2047&&(Te<55296||Te>57343)&&(ne=Te));break;case 4:be=V[j+1],Ee=V[j+2],We=V[j+3],(be&192)===128&&(Ee&192)===128&&(We&192)===128&&(Te=(q&15)<<18|(be&63)<<12|(Ee&63)<<6|We&63,Te>65535&&Te<1114112&&(ne=Te))}}ne===null?(ne=65533,Ce=1):ne>65535&&(ne-=65536,N.push(ne>>>10&1023|55296),ne=56320|ne&1023),N.push(ne),j+=Ce}return R(N)}const E=4096;function R(V){const _=V.length;if(_<=E)return String.fromCharCode.apply(String,V);let x="",N=0;for(;N<_;)x+=String.fromCharCode.apply(String,V.slice(N,N+=E));return x}function k(V,_,x){let N="";x=Math.min(V.length,x);for(let j=_;j<x;++j)N+=String.fromCharCode(V[j]&127);return N}function M(V,_,x){let N="";x=Math.min(V.length,x);for(let j=_;j<x;++j)N+=String.fromCharCode(V[j]);return N}function L(V,_,x){const N=V.length;(!_||_<0)&&(_=0),(!x||x<0||x>N)&&(x=N);let j="";for(let q=_;q<x;++q)j+=se[V[q]];return j}function Z(V,_,x){const N=V.slice(_,x);let j="";for(let q=0;q<N.length-1;q+=2)j+=String.fromCharCode(N[q]+N[q+1]*256);return j}a.prototype.slice=function(_,x){const N=this.length;_=~~_,x=x===void 0?N:~~x,_<0?(_+=N,_<0&&(_=0)):_>N&&(_=N),x<0?(x+=N,x<0&&(x=0)):x>N&&(x=N),x<_&&(x=_);const j=this.subarray(_,x);return Object.setPrototypeOf(j,a.prototype),j};function P(V,_,x){if(V%1!==0||V<0)throw new RangeError("offset is not uint");if(V+_>x)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(_,x,N){_=_>>>0,x=x>>>0,N||P(_,x,this.length);let j=this[_],q=1,ne=0;for(;++ne<x&&(q*=256);)j+=this[_+ne]*q;return j},a.prototype.readUintBE=a.prototype.readUIntBE=function(_,x,N){_=_>>>0,x=x>>>0,N||P(_,x,this.length);let j=this[_+--x],q=1;for(;x>0&&(q*=256);)j+=this[_+--x]*q;return j},a.prototype.readUint8=a.prototype.readUInt8=function(_,x){return _=_>>>0,x||P(_,1,this.length),this[_]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(_,x){return _=_>>>0,x||P(_,2,this.length),this[_]|this[_+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(_,x){return _=_>>>0,x||P(_,2,this.length),this[_]<<8|this[_+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(_,x){return _=_>>>0,x||P(_,4,this.length),(this[_]|this[_+1]<<8|this[_+2]<<16)+this[_+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(_,x){return _=_>>>0,x||P(_,4,this.length),this[_]*16777216+(this[_+1]<<16|this[_+2]<<8|this[_+3])},a.prototype.readBigUInt64LE=de(function(_){_=_>>>0,Ae(_,"offset");const x=this[_],N=this[_+7];(x===void 0||N===void 0)&&re(_,this.length-8);const j=x+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24,q=this[++_]+this[++_]*2**8+this[++_]*2**16+N*2**24;return BigInt(j)+(BigInt(q)<<BigInt(32))}),a.prototype.readBigUInt64BE=de(function(_){_=_>>>0,Ae(_,"offset");const x=this[_],N=this[_+7];(x===void 0||N===void 0)&&re(_,this.length-8);const j=x*2**24+this[++_]*2**16+this[++_]*2**8+this[++_],q=this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+N;return(BigInt(j)<<BigInt(32))+BigInt(q)}),a.prototype.readIntLE=function(_,x,N){_=_>>>0,x=x>>>0,N||P(_,x,this.length);let j=this[_],q=1,ne=0;for(;++ne<x&&(q*=256);)j+=this[_+ne]*q;return q*=128,j>=q&&(j-=Math.pow(2,8*x)),j},a.prototype.readIntBE=function(_,x,N){_=_>>>0,x=x>>>0,N||P(_,x,this.length);let j=x,q=1,ne=this[_+--j];for(;j>0&&(q*=256);)ne+=this[_+--j]*q;return q*=128,ne>=q&&(ne-=Math.pow(2,8*x)),ne},a.prototype.readInt8=function(_,x){return _=_>>>0,x||P(_,1,this.length),this[_]&128?(255-this[_]+1)*-1:this[_]},a.prototype.readInt16LE=function(_,x){_=_>>>0,x||P(_,2,this.length);const N=this[_]|this[_+1]<<8;return N&32768?N|4294901760:N},a.prototype.readInt16BE=function(_,x){_=_>>>0,x||P(_,2,this.length);const N=this[_+1]|this[_]<<8;return N&32768?N|4294901760:N},a.prototype.readInt32LE=function(_,x){return _=_>>>0,x||P(_,4,this.length),this[_]|this[_+1]<<8|this[_+2]<<16|this[_+3]<<24},a.prototype.readInt32BE=function(_,x){return _=_>>>0,x||P(_,4,this.length),this[_]<<24|this[_+1]<<16|this[_+2]<<8|this[_+3]},a.prototype.readBigInt64LE=de(function(_){_=_>>>0,Ae(_,"offset");const x=this[_],N=this[_+7];(x===void 0||N===void 0)&&re(_,this.length-8);const j=this[_+4]+this[_+5]*2**8+this[_+6]*2**16+(N<<24);return(BigInt(j)<<BigInt(32))+BigInt(x+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24)}),a.prototype.readBigInt64BE=de(function(_){_=_>>>0,Ae(_,"offset");const x=this[_],N=this[_+7];(x===void 0||N===void 0)&&re(_,this.length-8);const j=(x<<24)+this[++_]*2**16+this[++_]*2**8+this[++_];return(BigInt(j)<<BigInt(32))+BigInt(this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+N)}),a.prototype.readFloatLE=function(_,x){return _=_>>>0,x||P(_,4,this.length),t.read(this,_,!0,23,4)},a.prototype.readFloatBE=function(_,x){return _=_>>>0,x||P(_,4,this.length),t.read(this,_,!1,23,4)},a.prototype.readDoubleLE=function(_,x){return _=_>>>0,x||P(_,8,this.length),t.read(this,_,!0,52,8)},a.prototype.readDoubleBE=function(_,x){return _=_>>>0,x||P(_,8,this.length),t.read(this,_,!1,52,8)};function U(V,_,x,N,j,q){if(!a.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(_>j||_<q)throw new RangeError('"value" argument is out of bounds');if(x+N>V.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(_,x,N,j){if(_=+_,x=x>>>0,N=N>>>0,!j){const Ce=Math.pow(2,8*N)-1;U(this,_,x,N,Ce,0)}let q=1,ne=0;for(this[x]=_&255;++ne<N&&(q*=256);)this[x+ne]=_/q&255;return x+N},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(_,x,N,j){if(_=+_,x=x>>>0,N=N>>>0,!j){const Ce=Math.pow(2,8*N)-1;U(this,_,x,N,Ce,0)}let q=N-1,ne=1;for(this[x+q]=_&255;--q>=0&&(ne*=256);)this[x+q]=_/ne&255;return x+N},a.prototype.writeUint8=a.prototype.writeUInt8=function(_,x,N){return _=+_,x=x>>>0,N||U(this,_,x,1,255,0),this[x]=_&255,x+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(_,x,N){return _=+_,x=x>>>0,N||U(this,_,x,2,65535,0),this[x]=_&255,this[x+1]=_>>>8,x+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(_,x,N){return _=+_,x=x>>>0,N||U(this,_,x,2,65535,0),this[x]=_>>>8,this[x+1]=_&255,x+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(_,x,N){return _=+_,x=x>>>0,N||U(this,_,x,4,4294967295,0),this[x+3]=_>>>24,this[x+2]=_>>>16,this[x+1]=_>>>8,this[x]=_&255,x+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(_,x,N){return _=+_,x=x>>>0,N||U(this,_,x,4,4294967295,0),this[x]=_>>>24,this[x+1]=_>>>16,this[x+2]=_>>>8,this[x+3]=_&255,x+4};function G(V,_,x,N,j){te(_,N,j,V,x,7);let q=Number(_&BigInt(4294967295));V[x++]=q,q=q>>8,V[x++]=q,q=q>>8,V[x++]=q,q=q>>8,V[x++]=q;let ne=Number(_>>BigInt(32)&BigInt(4294967295));return V[x++]=ne,ne=ne>>8,V[x++]=ne,ne=ne>>8,V[x++]=ne,ne=ne>>8,V[x++]=ne,x}function oe(V,_,x,N,j){te(_,N,j,V,x,7);let q=Number(_&BigInt(4294967295));V[x+7]=q,q=q>>8,V[x+6]=q,q=q>>8,V[x+5]=q,q=q>>8,V[x+4]=q;let ne=Number(_>>BigInt(32)&BigInt(4294967295));return V[x+3]=ne,ne=ne>>8,V[x+2]=ne,ne=ne>>8,V[x+1]=ne,ne=ne>>8,V[x]=ne,x+8}a.prototype.writeBigUInt64LE=de(function(_,x=0){return G(this,_,x,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=de(function(_,x=0){return oe(this,_,x,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(_,x,N,j){if(_=+_,x=x>>>0,!j){const be=Math.pow(2,8*N-1);U(this,_,x,N,be-1,-be)}let q=0,ne=1,Ce=0;for(this[x]=_&255;++q<N&&(ne*=256);)_<0&&Ce===0&&this[x+q-1]!==0&&(Ce=1),this[x+q]=(_/ne>>0)-Ce&255;return x+N},a.prototype.writeIntBE=function(_,x,N,j){if(_=+_,x=x>>>0,!j){const be=Math.pow(2,8*N-1);U(this,_,x,N,be-1,-be)}let q=N-1,ne=1,Ce=0;for(this[x+q]=_&255;--q>=0&&(ne*=256);)_<0&&Ce===0&&this[x+q+1]!==0&&(Ce=1),this[x+q]=(_/ne>>0)-Ce&255;return x+N},a.prototype.writeInt8=function(_,x,N){return _=+_,x=x>>>0,N||U(this,_,x,1,127,-128),_<0&&(_=255+_+1),this[x]=_&255,x+1},a.prototype.writeInt16LE=function(_,x,N){return _=+_,x=x>>>0,N||U(this,_,x,2,32767,-32768),this[x]=_&255,this[x+1]=_>>>8,x+2},a.prototype.writeInt16BE=function(_,x,N){return _=+_,x=x>>>0,N||U(this,_,x,2,32767,-32768),this[x]=_>>>8,this[x+1]=_&255,x+2},a.prototype.writeInt32LE=function(_,x,N){return _=+_,x=x>>>0,N||U(this,_,x,4,2147483647,-2147483648),this[x]=_&255,this[x+1]=_>>>8,this[x+2]=_>>>16,this[x+3]=_>>>24,x+4},a.prototype.writeInt32BE=function(_,x,N){return _=+_,x=x>>>0,N||U(this,_,x,4,2147483647,-2147483648),_<0&&(_=4294967295+_+1),this[x]=_>>>24,this[x+1]=_>>>16,this[x+2]=_>>>8,this[x+3]=_&255,x+4},a.prototype.writeBigInt64LE=de(function(_,x=0){return G(this,_,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=de(function(_,x=0){return oe(this,_,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function D(V,_,x,N,j,q){if(x+N>V.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function K(V,_,x,N,j){return _=+_,x=x>>>0,j||D(V,_,x,4),t.write(V,_,x,N,23,4),x+4}a.prototype.writeFloatLE=function(_,x,N){return K(this,_,x,!0,N)},a.prototype.writeFloatBE=function(_,x,N){return K(this,_,x,!1,N)};function ce(V,_,x,N,j){return _=+_,x=x>>>0,j||D(V,_,x,8),t.write(V,_,x,N,52,8),x+8}a.prototype.writeDoubleLE=function(_,x,N){return ce(this,_,x,!0,N)},a.prototype.writeDoubleBE=function(_,x,N){return ce(this,_,x,!1,N)},a.prototype.copy=function(_,x,N,j){if(!a.isBuffer(_))throw new TypeError("argument should be a Buffer");if(N||(N=0),!j&&j!==0&&(j=this.length),x>=_.length&&(x=_.length),x||(x=0),j>0&&j<N&&(j=N),j===N||_.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(N<0||N>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),_.length-x<j-N&&(j=_.length-x+N);const q=j-N;return this===_&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,N,j):Uint8Array.prototype.set.call(_,this.subarray(N,j),x),q},a.prototype.fill=function(_,x,N,j){if(typeof _=="string"){if(typeof x=="string"?(j=x,x=0,N=this.length):typeof N=="string"&&(j=N,N=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!a.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(_.length===1){const ne=_.charCodeAt(0);(j==="utf8"&&ne<128||j==="latin1")&&(_=ne)}}else typeof _=="number"?_=_&255:typeof _=="boolean"&&(_=Number(_));if(x<0||this.length<x||this.length<N)throw new RangeError("Out of range index");if(N<=x)return this;x=x>>>0,N=N===void 0?this.length:N>>>0,_||(_=0);let q;if(typeof _=="number")for(q=x;q<N;++q)this[q]=_;else{const ne=a.isBuffer(_)?_:a.from(_,j),Ce=ne.length;if(Ce===0)throw new TypeError('The value "'+_+'" is invalid for argument "value"');for(q=0;q<N-x;++q)this[q+x]=ne[q%Ce]}return this};const le={};function he(V,_,x){le[V]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:_.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${V}]`,this.stack,delete this.name}get code(){return V}set code(j){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:j,writable:!0})}toString(){return`${this.name} [${V}]: ${this.message}`}}}he("ERR_BUFFER_OUT_OF_BOUNDS",function(V){return V?`${V} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),he("ERR_INVALID_ARG_TYPE",function(V,_){return`The "${V}" argument must be of type number. Received type ${typeof _}`},TypeError),he("ERR_OUT_OF_RANGE",function(V,_,x){let N=`The value of "${V}" is out of range.`,j=x;return Number.isInteger(x)&&Math.abs(x)>2**32?j=$(String(x)):typeof x=="bigint"&&(j=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(j=$(j)),j+="n"),N+=` It must be ${_}. Received ${j}`,N},RangeError);function $(V){let _="",x=V.length;const N=V[0]==="-"?1:0;for(;x>=N+4;x-=3)_=`_${V.slice(x-3,x)}${_}`;return`${V.slice(0,x)}${_}`}function ae(V,_,x){Ae(_,"offset"),(V[_]===void 0||V[_+x]===void 0)&&re(_,V.length-(x+1))}function te(V,_,x,N,j,q){if(V>x||V<_){const ne=typeof _=="bigint"?"n":"";let Ce;throw q>3?_===0||_===BigInt(0)?Ce=`>= 0${ne} and < 2${ne} ** ${(q+1)*8}${ne}`:Ce=`>= -(2${ne} ** ${(q+1)*8-1}${ne}) and < 2 ** ${(q+1)*8-1}${ne}`:Ce=`>= ${_}${ne} and <= ${x}${ne}`,new le.ERR_OUT_OF_RANGE("value",Ce,V)}ae(N,j,q)}function Ae(V,_){if(typeof V!="number")throw new le.ERR_INVALID_ARG_TYPE(_,"number",V)}function re(V,_,x){throw Math.floor(V)!==V?(Ae(V,x),new le.ERR_OUT_OF_RANGE(x||"offset","an integer",V)):_<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE(x||"offset",`>= ${x?1:0} and <= ${_}`,V)}const me=/[^+/0-9A-Za-z-_]/g;function Pe(V){if(V=V.split("=")[0],V=V.trim().replace(me,""),V.length<2)return"";for(;V.length%4!==0;)V=V+"=";return V}function _e(V,_){_=_||1/0;let x;const N=V.length;let j=null;const q=[];for(let ne=0;ne<N;++ne){if(x=V.charCodeAt(ne),x>55295&&x<57344){if(!j){if(x>56319){(_-=3)>-1&&q.push(239,191,189);continue}else if(ne+1===N){(_-=3)>-1&&q.push(239,191,189);continue}j=x;continue}if(x<56320){(_-=3)>-1&&q.push(239,191,189),j=x;continue}x=(j-55296<<10|x-56320)+65536}else j&&(_-=3)>-1&&q.push(239,191,189);if(j=null,x<128){if((_-=1)<0)break;q.push(x)}else if(x<2048){if((_-=2)<0)break;q.push(x>>6|192,x&63|128)}else if(x<65536){if((_-=3)<0)break;q.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((_-=4)<0)break;q.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return q}function Se(V){const _=[];for(let x=0;x<V.length;++x)_.push(V.charCodeAt(x)&255);return _}function Fe(V,_){let x,N,j;const q=[];for(let ne=0;ne<V.length&&!((_-=2)<0);++ne)x=V.charCodeAt(ne),N=x>>8,j=x%256,q.push(j),q.push(N);return q}function Ue(V){return e.toByteArray(Pe(V))}function Me(V,_,x,N){let j;for(j=0;j<N&&!(j+x>=_.length||j>=V.length);++j)_[j+x]=V[j];return j}function W(V,_){return V instanceof _||V!=null&&V.constructor!=null&&V.constructor.name!=null&&V.constructor.name===_.name}function O(V){return V!==V}const se=function(){const V="0123456789abcdef",_=new Array(256);for(let x=0;x<16;++x){const N=x*16;for(let j=0;j<16;++j)_[N+j]=V[x]+V[j]}return _}();function de(V){return typeof BigInt>"u"?Be:V}function Be(){throw new Error("BigInt not supported")}})(AE);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lE=function(n,e){return lE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},lE(n,e)};function Vo(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");lE(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function bs(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})}function Zi(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return A([l,c])}}function A(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var fu=function(){function n(e,t,r,i){this.left=e,this.top=t,this.width=r,this.height=i}return n.prototype.add=function(e,t,r,i){return new n(this.left+e,this.top+t,this.width+r,this.height+i)},n.fromClientRect=function(e,t){return new n(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},n.fromDOMRectList=function(e,t){var r=Array.from(t).find(function(i){return i.width!==0});return r?new n(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),sS=function(n,e){return fu.fromClientRect(n,e.getBoundingClientRect())},GC=function(n){for(var e=[],t=0,r=n.length;t<r;){var i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},Ln=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],i=-1,s="";++i<t;){var o=n[i];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(i+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},GT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fre=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xv=0;xv<GT.length;xv++)fre[GT.charCodeAt(xv)]=xv;var JT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ag=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Iv=0;Iv<JT.length;Iv++)Ag[JT.charCodeAt(Iv)]=Iv;var dre=function(n){var e=n.length*.75,t=n.length,r,i=0,s,o,a,A;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(l)?l:new Uint8Array(l);for(r=0;r<t;r+=4)s=Ag[n.charCodeAt(r)],o=Ag[n.charCodeAt(r+1)],a=Ag[n.charCodeAt(r+2)],A=Ag[n.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|a>>2,c[i++]=(a&3)<<6|A&63;return l},hre=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},pre=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},Kc=5,oS=6+5,cI=2,gre=oS-Kc,hZ=65536>>Kc,mre=1<<Kc,uI=mre-1,vre=1024>>Kc,yre=hZ+vre,Bre=yre,wre=32,Cre=Bre+wre,bre=65536>>oS,xre=1<<gre,Ire=xre-1,HT=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},Fre=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},Ere=function(n,e){var t=dre(n),r=Array.isArray(t)?pre(t):new Uint32Array(t),i=Array.isArray(t)?hre(t):new Uint16Array(t),s=24,o=HT(i,s/2,r[4]/2),a=r[5]===2?HT(i,(s+r[4])/2):Fre(r,Math.ceil((s+r[4])/4));return new Ure(r[0],r[1],r[2],r[3],o,a)},Ure=function(){function n(e,t,r,i,s,o){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=i,this.index=s,this.data=o}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Kc],t=(t<<cI)+(e&uI),this.data[t];if(e<=65535)return t=this.index[hZ+(e-55296>>Kc)],t=(t<<cI)+(e&uI),this.data[t];if(e<this.highStart)return t=Cre-bre+(e>>oS),t=this.index[t],t+=e>>Kc&Ire,t=this.index[t],t=(t<<cI)+(e&uI),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),zT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_re=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Fv=0;Fv<zT.length;Fv++)_re[zT.charCodeAt(Fv)]=Fv;var Sre="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",XT=50,Qre=1,pZ=2,gZ=3,Rre=4,Mre=5,YT=7,mZ=8,KT=9,yl=10,cE=11,jT=12,uE=13,Tre=14,lg=15,fE=16,Ev=17,Ep=18,Nre=19,$T=20,dE=21,Up=22,fI=23,tf=24,Gi=25,cg=26,ug=27,nf=28,kre=29,Tc=30,Dre=31,Uv=32,_v=33,hE=34,pE=35,gE=36,Bm=37,mE=38,Yy=39,Ky=40,dI=41,vZ=42,Vre=43,Lre=[9001,65288],yZ="!",It="×",Sv="÷",vE=Ere(Sre),Ga=[Tc,gE],yE=[Qre,pZ,gZ,Mre],BZ=[yl,mZ],qT=[ug,cg],Pre=yE.concat(BZ),eN=[mE,Yy,Ky,hE,pE],Wre=[lg,uE],Ore=function(n,e){e===void 0&&(e="strict");var t=[],r=[],i=[];return n.forEach(function(s,o){var a=vE.get(s);if(a>XT?(i.push(!0),a-=XT):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(o),t.push(fE);if(a===Rre||a===cE){if(o===0)return r.push(o),t.push(Tc);var A=t[o-1];return Pre.indexOf(A)===-1?(r.push(r[o-1]),t.push(A)):(r.push(o),t.push(Tc))}if(r.push(o),a===Dre)return t.push(e==="strict"?dE:Bm);if(a===vZ||a===kre)return t.push(Tc);if(a===Vre)return s>=131072&&s<=196605||s>=196608&&s<=262141?t.push(Bm):t.push(Tc);t.push(a)}),[r,t,i]},hI=function(n,e,t,r){var i=r[t];if(Array.isArray(n)?n.indexOf(i)!==-1:n===i)for(var s=t;s<=r.length;){s++;var o=r[s];if(o===e)return!0;if(o!==yl)break}if(i===yl)for(var s=t;s>0;){s--;var a=r[s];if(Array.isArray(n)?n.indexOf(a)!==-1:n===a)for(var A=t;A<=r.length;){A++;var o=r[A];if(o===e)return!0;if(o!==yl)break}if(a!==yl)break}return!1},tN=function(n,e){for(var t=n;t>=0;){var r=e[t];if(r===yl)t--;else return r}return 0},Zre=function(n,e,t,r,i){if(t[r]===0)return It;var s=r-1;if(Array.isArray(i)&&i[s]===!0)return It;var o=s-1,a=s+1,A=e[s],l=o>=0?e[o]:0,c=e[a];if(A===pZ&&c===gZ)return It;if(yE.indexOf(A)!==-1)return yZ;if(yE.indexOf(c)!==-1||BZ.indexOf(c)!==-1)return It;if(tN(s,e)===mZ)return Sv;if(vE.get(n[s])===cE||(A===Uv||A===_v)&&vE.get(n[a])===cE||A===YT||c===YT||A===KT||[yl,uE,lg].indexOf(A)===-1&&c===KT||[Ev,Ep,Nre,tf,nf].indexOf(c)!==-1||tN(s,e)===Up||hI(fI,Up,s,e)||hI([Ev,Ep],dE,s,e)||hI(jT,jT,s,e))return It;if(A===yl)return Sv;if(A===fI||c===fI)return It;if(c===fE||A===fE)return Sv;if([uE,lg,dE].indexOf(c)!==-1||A===Tre||l===gE&&Wre.indexOf(A)!==-1||A===nf&&c===gE||c===$T||Ga.indexOf(c)!==-1&&A===Gi||Ga.indexOf(A)!==-1&&c===Gi||A===ug&&[Bm,Uv,_v].indexOf(c)!==-1||[Bm,Uv,_v].indexOf(A)!==-1&&c===cg||Ga.indexOf(A)!==-1&&qT.indexOf(c)!==-1||qT.indexOf(A)!==-1&&Ga.indexOf(c)!==-1||[ug,cg].indexOf(A)!==-1&&(c===Gi||[Up,lg].indexOf(c)!==-1&&e[a+1]===Gi)||[Up,lg].indexOf(A)!==-1&&c===Gi||A===Gi&&[Gi,nf,tf].indexOf(c)!==-1)return It;if([Gi,nf,tf,Ev,Ep].indexOf(c)!==-1)for(var u=s;u>=0;){var f=e[u];if(f===Gi)return It;if([nf,tf].indexOf(f)!==-1)u--;else break}if([ug,cg].indexOf(c)!==-1)for(var u=[Ev,Ep].indexOf(A)!==-1?o:s;u>=0;){var f=e[u];if(f===Gi)return It;if([nf,tf].indexOf(f)!==-1)u--;else break}if(mE===A&&[mE,Yy,hE,pE].indexOf(c)!==-1||[Yy,hE].indexOf(A)!==-1&&[Yy,Ky].indexOf(c)!==-1||[Ky,pE].indexOf(A)!==-1&&c===Ky||eN.indexOf(A)!==-1&&[$T,cg].indexOf(c)!==-1||eN.indexOf(c)!==-1&&A===ug||Ga.indexOf(A)!==-1&&Ga.indexOf(c)!==-1||A===tf&&Ga.indexOf(c)!==-1||Ga.concat(Gi).indexOf(A)!==-1&&c===Up&&Lre.indexOf(n[a])===-1||Ga.concat(Gi).indexOf(c)!==-1&&A===Ep)return It;if(A===dI&&c===dI){for(var d=t[s],h=1;d>0&&(d--,e[d]===dI);)h++;if(h%2!==0)return It}return A===Uv&&c===_v?It:Sv},Gre=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=Ore(n,e.lineBreak),r=t[0],i=t[1],s=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(a){return[Gi,Tc,vZ].indexOf(a)!==-1?Bm:a}));var o=e.wordBreak==="keep-all"?s.map(function(a,A){return a&&n[A]>=19968&&n[A]<=40959}):void 0;return[r,i,o]},Jre=function(){function n(e,t,r,i){this.codePoints=e,this.required=t===yZ,this.start=r,this.end=i}return n.prototype.slice=function(){return Ln.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),Hre=function(n,e){var t=GC(n),r=Gre(t,e),i=r[0],s=r[1],o=r[2],a=t.length,A=0,l=0;return{next:function(){if(l>=a)return{done:!0,value:null};for(var c=It;l<a&&(c=Zre(t,s,i,++l,o))===It;);if(c!==It||l===a){var u=new Jre(t,c,A,l);return A=l,{value:u,done:!1}}return{done:!0,value:null}}}},zre=1<<0,Xre=1<<1,l0=1<<2,nN=1<<3,iw=10,rN=47,Dg=92,Yre=9,Kre=32,Qv=34,_p=61,jre=35,$re=36,qre=37,Rv=39,Mv=40,Sp=41,eie=95,yi=45,tie=33,nie=60,rie=62,iie=64,sie=91,oie=93,aie=61,Aie=123,Tv=63,lie=125,iN=124,cie=126,uie=128,sN=65533,pI=42,Pc=43,fie=44,die=58,hie=59,wm=46,pie=0,gie=8,mie=11,vie=14,yie=31,Bie=127,Jo=-1,wZ=48,CZ=97,bZ=101,wie=102,Cie=117,bie=122,xZ=65,IZ=69,FZ=70,xie=85,Iie=90,Wr=function(n){return n>=wZ&&n<=57},Fie=function(n){return n>=55296&&n<=57343},rf=function(n){return Wr(n)||n>=xZ&&n<=FZ||n>=CZ&&n<=wie},Eie=function(n){return n>=CZ&&n<=bie},Uie=function(n){return n>=xZ&&n<=Iie},_ie=function(n){return Eie(n)||Uie(n)},Sie=function(n){return n>=uie},Nv=function(n){return n===iw||n===Yre||n===Kre},sw=function(n){return _ie(n)||Sie(n)||n===eie},oN=function(n){return sw(n)||Wr(n)||n===yi},Qie=function(n){return n>=pie&&n<=gie||n===mie||n>=vie&&n<=yie||n===Bie},Al=function(n,e){return n!==Dg?!1:e!==iw},kv=function(n,e,t){return n===yi?sw(e)||Al(e,t):sw(n)?!0:!!(n===Dg&&Al(n,e))},gI=function(n,e,t){return n===Pc||n===yi?Wr(e)?!0:e===wm&&Wr(t):Wr(n===wm?e:n)},Rie=function(n){var e=0,t=1;(n[e]===Pc||n[e]===yi)&&(n[e]===yi&&(t=-1),e++);for(var r=[];Wr(n[e]);)r.push(n[e++]);var i=r.length?parseInt(Ln.apply(void 0,r),10):0;n[e]===wm&&e++;for(var s=[];Wr(n[e]);)s.push(n[e++]);var o=s.length,a=o?parseInt(Ln.apply(void 0,s),10):0;(n[e]===IZ||n[e]===bZ)&&e++;var A=1;(n[e]===Pc||n[e]===yi)&&(n[e]===yi&&(A=-1),e++);for(var l=[];Wr(n[e]);)l.push(n[e++]);var c=l.length?parseInt(Ln.apply(void 0,l),10):0;return t*(i+a*Math.pow(10,-o))*Math.pow(10,A*c)},Mie={type:2},Tie={type:3},Nie={type:4},kie={type:13},Die={type:8},Vie={type:21},Lie={type:9},Pie={type:10},Wie={type:11},Oie={type:12},Zie={type:14},Dv={type:23},Gie={type:1},Jie={type:25},Hie={type:24},zie={type:26},Xie={type:27},Yie={type:28},Kie={type:29},jie={type:31},BE={type:32},EZ=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(GC(e))},n.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==BE;)e.push(t),t=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Qv:return this.consumeStringToken(Qv);case jre:var t=this.peekCodePoint(0),r=this.peekCodePoint(1),i=this.peekCodePoint(2);if(oN(t)||Al(r,i)){var s=kv(t,r,i)?Xre:zre,o=this.consumeName();return{type:5,value:o,flags:s}}break;case $re:if(this.peekCodePoint(0)===_p)return this.consumeCodePoint(),kie;break;case Rv:return this.consumeStringToken(Rv);case Mv:return Mie;case Sp:return Tie;case pI:if(this.peekCodePoint(0)===_p)return this.consumeCodePoint(),Zie;break;case Pc:if(gI(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case fie:return Nie;case yi:var a=e,A=this.peekCodePoint(0),l=this.peekCodePoint(1);if(gI(a,A,l))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(kv(a,A,l))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===yi&&l===rie)return this.consumeCodePoint(),this.consumeCodePoint(),Hie;break;case wm:if(gI(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case rN:if(this.peekCodePoint(0)===pI)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===pI&&(c=this.consumeCodePoint(),c===rN))return this.consumeToken();if(c===Jo)return this.consumeToken()}break;case die:return zie;case hie:return Xie;case nie:if(this.peekCodePoint(0)===tie&&this.peekCodePoint(1)===yi&&this.peekCodePoint(2)===yi)return this.consumeCodePoint(),this.consumeCodePoint(),Jie;break;case iie:var u=this.peekCodePoint(0),f=this.peekCodePoint(1),d=this.peekCodePoint(2);if(kv(u,f,d)){var o=this.consumeName();return{type:7,value:o}}break;case sie:return Yie;case Dg:if(Al(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case oie:return Kie;case aie:if(this.peekCodePoint(0)===_p)return this.consumeCodePoint(),Die;break;case Aie:return Wie;case lie:return Oie;case Cie:case xie:var h=this.peekCodePoint(0),p=this.peekCodePoint(1);return h===Pc&&(rf(p)||p===Tv)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case iN:if(this.peekCodePoint(0)===_p)return this.consumeCodePoint(),Lie;if(this.peekCodePoint(0)===iN)return this.consumeCodePoint(),Vie;break;case cie:if(this.peekCodePoint(0)===_p)return this.consumeCodePoint(),Pie;break;case Jo:return BE}return Nv(e)?(this.consumeWhiteSpace(),jie):Wr(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):sw(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ln(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();rf(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var r=!1;t===Tv&&e.length<6;)e.push(t),t=this.consumeCodePoint(),r=!0;if(r){var i=parseInt(Ln.apply(void 0,e.map(function(A){return A===Tv?wZ:A})),16),s=parseInt(Ln.apply(void 0,e.map(function(A){return A===Tv?FZ:A})),16);return{type:30,start:i,end:s}}var o=parseInt(Ln.apply(void 0,e),16);if(this.peekCodePoint(0)===yi&&rf(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];rf(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();var s=parseInt(Ln.apply(void 0,a),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Mv?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Mv?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Jo)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===Rv||t===Qv){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Jo||this.peekCodePoint(0)===Sp)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Dv)}for(;;){var i=this.consumeCodePoint();if(i===Jo||i===Sp)return{type:22,value:Ln.apply(void 0,e)};if(Nv(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Jo||this.peekCodePoint(0)===Sp?(this.consumeCodePoint(),{type:22,value:Ln.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Dv);if(i===Qv||i===Rv||i===Mv||Qie(i))return this.consumeBadUrlRemnants(),Dv;if(i===Dg)if(Al(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Dv;else e.push(i)}},n.prototype.consumeWhiteSpace=function(){for(;Nv(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Sp||e===Jo)return;Al(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var t=5e4,r="";e>0;){var i=Math.min(t,e);r+=Ln.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),r},n.prototype.consumeStringToken=function(e){var t="",r=0;do{var i=this._value[r];if(i===Jo||i===void 0||i===e)return t+=this.consumeStringSlice(r),{type:0,value:t};if(i===iw)return this._value.splice(0,r),Gie;if(i===Dg){var s=this._value[r+1];s!==Jo&&s!==void 0&&(s===iw?(t+=this.consumeStringSlice(r),r=-1,this._value.shift()):Al(i,s)&&(t+=this.consumeStringSlice(r),t+=Ln(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},n.prototype.consumeNumber=function(){var e=[],t=l0,r=this.peekCodePoint(0);for((r===Pc||r===yi)&&e.push(this.consumeCodePoint());Wr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(r===wm&&Wr(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=nN;Wr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===IZ||r===bZ)&&((i===Pc||i===yi)&&Wr(s)||Wr(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=nN;Wr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Rie(e),t]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],r=e[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(kv(i,s,o)){var a=this.consumeName();return{type:15,number:t,flags:r,unit:a}}return i===qre?(this.consumeCodePoint(),{type:16,number:t,flags:r}):{type:17,number:t,flags:r}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(rf(e)){for(var t=Ln(e);rf(this.peekCodePoint(0))&&t.length<6;)t+=Ln(this.consumeCodePoint());Nv(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return r===0||Fie(r)||r>1114111?sN:r}return e===Jo?sN:e},n.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(oN(t))e+=Ln(t);else if(Al(t,this.peekCodePoint(0)))e+=Ln(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},n}(),UZ=function(){function n(e){this._tokens=e}return n.create=function(e){var t=new EZ;return t.write(e),new n(t.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||$ie(r,e))return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue()),r=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?BE:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),c0=function(n){return n.type===15},JC=function(n){return n.type===17},Dn=function(n){return n.type===20},wE=function(n,e){return Dn(n)&&n.value===e},HC=function(n){return n.type!==31&&n.type!==4},Ma=function(n){var e=[],t=[];return n.forEach(function(r){if(r.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}r.type!==31&&t.push(r)}),t.length&&e.push(t),e},$ie=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},Xl=function(n){return n.type===17||n.type===15},Yn=function(n){return n.type===16||Xl(n)},_Z=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},Ur={type:17,number:0,flags:l0},aS={type:16,number:50,flags:l0},Bl={type:16,number:100,flags:l0},fg=function(n,e,t){var r=n[0],i=n[1];return[on(r,e),on(typeof i<"u"?i:r,t)]},on=function(n,e){if(n.type===16)return n.number/100*e;if(c0(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},SZ="deg",QZ="grad",RZ="rad",MZ="turn",zC={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case SZ:return Math.PI*e.number/180;case QZ:return Math.PI/200*e.number;case RZ:return e.number;case MZ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},TZ=function(n){return n.type===15&&(n.unit===SZ||n.unit===QZ||n.unit===RZ||n.unit===MZ)},NZ=function(n){var e=n.filter(Dn).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ur,Ur];case"to top":case"bottom":return ks(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ur,Bl];case"to right":case"left":return ks(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Bl,Bl];case"to bottom":case"top":return ks(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Bl,Ur];case"to left":case"right":return ks(270)}return 0},ks=function(n){return Math.PI*n/180},Nl={name:"color",parse:function(n,e){if(e.type===18){var t=qie[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(n,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3);return wl(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3),o=e.value.substring(3,4);return wl(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6);return wl(parseInt(r,16),parseInt(i,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6),o=e.value.substring(6,8);return wl(parseInt(r,16),parseInt(i,16),parseInt(s,16),parseInt(o,16)/255)}}if(e.type===20){var a=Cm[e.value.toUpperCase()];if(typeof a<"u")return a}return Cm.TRANSPARENT}},Qd=function(n){return(255&n)===0},fr=function(n){var e=255&n,t=255&n>>8,r=255&n>>16,i=255&n>>24;return e<255?"rgba("+i+","+r+","+t+","+e/255+")":"rgb("+i+","+r+","+t+")"},wl=function(n,e,t,r){return(n<<24|e<<16|t<<8|Math.round(r*255)<<0)>>>0},aN=function(n,e){if(n.type===17)return n.number;if(n.type===16){var t=e===3?1:255;return e===3?n.number/100*t:Math.round(n.number/100*t)}return 0},AN=function(n,e){var t=e.filter(HC);if(t.length===3){var r=t.map(aN),i=r[0],s=r[1],o=r[2];return wl(i,s,o,1)}if(t.length===4){var a=t.map(aN),i=a[0],s=a[1],o=a[2],A=a[3];return wl(i,s,o,A)}return 0};function mI(n,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-n)*t*6+n:t<1/2?e:t<2/3?(e-n)*6*(2/3-t)+n:n}var lN=function(n,e){var t=e.filter(HC),r=t[0],i=t[1],s=t[2],o=t[3],a=(r.type===17?ks(r.number):zC.parse(n,r))/(Math.PI*2),A=Yn(i)?i.number/100:0,l=Yn(s)?s.number/100:0,c=typeof o<"u"&&Yn(o)?on(o,1):1;if(A===0)return wl(l*255,l*255,l*255,1);var u=l<=.5?l*(A+1):l+A-l*A,f=l*2-u,d=mI(f,u,a+1/3),h=mI(f,u,a),p=mI(f,u,a-1/3);return wl(d*255,h*255,p*255,c)},qie={hsl:lN,hsla:lN,rgb:AN,rgba:AN},cN=function(n,e){return Nl.parse(n,UZ.create(e).parseComponentValue())},Cm={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},ese={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(Dn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},tse={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},XC=function(n,e){var t=Nl.parse(n,e[0]),r=e[1];return r&&Yn(r)?{color:t,stop:r}:{color:t,stop:null}},uN=function(n,e){var t=n[0],r=n[n.length-1];t.stop===null&&(t.stop=Ur),r.stop===null&&(r.stop=Bl);for(var i=[],s=0,o=0;o<n.length;o++){var a=n[o].stop;if(a!==null){var A=on(a,e);A>s?i.push(A):i.push(s),s=A}else i.push(null)}for(var l=null,o=0;o<i.length;o++){var c=i[o];if(c===null)l===null&&(l=o);else if(l!==null){for(var u=o-l,f=i[l-1],d=(c-f)/(u+1),h=1;h<=u;h++)i[l+h-1]=d*h;l=null}}return n.map(function(p,m){var g=p.color;return{color:g,stop:Math.max(Math.min(1,i[m]/e),0)}})},nse=function(n,e,t){var r=e/2,i=t/2,s=on(n[0],e)-r,o=i-on(n[1],t);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},rse=function(n,e,t){var r=typeof n=="number"?n:nse(n,e,t),i=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),s=e/2,o=t/2,a=i/2,A=Math.sin(r-Math.PI/2)*a,l=Math.cos(r-Math.PI/2)*a;return[i,s-l,s+l,o-A,o+A]},wo=function(n,e){return Math.sqrt(n*n+e*e)},fN=function(n,e,t,r,i){var s=[[0,0],[0,e],[n,0],[n,e]];return s.reduce(function(o,a){var A=a[0],l=a[1],c=wo(t-A,r-l);return(i?c<o.optimumDistance:c>o.optimumDistance)?{optimumCorner:a,optimumDistance:c}:o},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},ise=function(n,e,t,r,i){var s=0,o=0;switch(n.size){case 0:n.shape===0?s=o=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-i)):n.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),o=Math.min(Math.abs(t),Math.abs(t-i)));break;case 2:if(n.shape===0)s=o=Math.min(wo(e,t),wo(e,t-i),wo(e-r,t),wo(e-r,t-i));else if(n.shape===1){var a=Math.min(Math.abs(t),Math.abs(t-i))/Math.min(Math.abs(e),Math.abs(e-r)),A=fN(r,i,e,t,!0),l=A[0],c=A[1];s=wo(l-e,(c-t)/a),o=a*s}break;case 1:n.shape===0?s=o=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-i)):n.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),o=Math.max(Math.abs(t),Math.abs(t-i)));break;case 3:if(n.shape===0)s=o=Math.max(wo(e,t),wo(e,t-i),wo(e-r,t),wo(e-r,t-i));else if(n.shape===1){var a=Math.max(Math.abs(t),Math.abs(t-i))/Math.max(Math.abs(e),Math.abs(e-r)),u=fN(r,i,e,t,!1),l=u[0],c=u[1];s=wo(l-e,(c-t)/a),o=a*s}break}return Array.isArray(n.size)&&(s=on(n.size[0],r),o=n.size.length===2?on(n.size[1],i):s),[s,o]},sse=function(n,e){var t=ks(180),r=[];return Ma(e).forEach(function(i,s){if(s===0){var o=i[0];if(o.type===20&&o.value==="to"){t=NZ(i);return}else if(TZ(o)){t=zC.parse(n,o);return}}var a=XC(n,i);r.push(a)}),{angle:t,stops:r,type:1}},Vv=function(n,e){var t=ks(180),r=[];return Ma(e).forEach(function(i,s){if(s===0){var o=i[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){t=NZ(i);return}else if(TZ(o)){t=(zC.parse(n,o)+ks(270))%ks(360);return}}var a=XC(n,i);r.push(a)}),{angle:t,stops:r,type:1}},ose=function(n,e){var t=ks(180),r=[],i=1,s=0,o=3,a=[];return Ma(e).forEach(function(A,l){var c=A[0];if(l===0){if(Dn(c)&&c.value==="linear"){i=1;return}else if(Dn(c)&&c.value==="radial"){i=2;return}}if(c.type===18){if(c.name==="from"){var u=Nl.parse(n,c.values[0]);r.push({stop:Ur,color:u})}else if(c.name==="to"){var u=Nl.parse(n,c.values[0]);r.push({stop:Bl,color:u})}else if(c.name==="color-stop"){var f=c.values.filter(HC);if(f.length===2){var u=Nl.parse(n,f[1]),d=f[0];JC(d)&&r.push({stop:{type:16,number:d.number*100,flags:d.flags},color:u})}}}}),i===1?{angle:(t+ks(180))%ks(360),stops:r,type:i}:{size:o,shape:s,stops:r,position:a,type:i}},kZ="closest-side",DZ="farthest-side",VZ="closest-corner",LZ="farthest-corner",PZ="circle",WZ="ellipse",OZ="cover",ZZ="contain",ase=function(n,e){var t=0,r=3,i=[],s=[];return Ma(e).forEach(function(o,a){var A=!0;if(a===0){var l=!1;A=o.reduce(function(u,f){if(l)if(Dn(f))switch(f.value){case"center":return s.push(aS),u;case"top":case"left":return s.push(Ur),u;case"right":case"bottom":return s.push(Bl),u}else(Yn(f)||Xl(f))&&s.push(f);else if(Dn(f))switch(f.value){case PZ:return t=0,!1;case WZ:return t=1,!1;case"at":return l=!0,!1;case kZ:return r=0,!1;case OZ:case DZ:return r=1,!1;case ZZ:case VZ:return r=2,!1;case LZ:return r=3,!1}else if(Xl(f)||Yn(f))return Array.isArray(r)||(r=[]),r.push(f),!1;return u},A)}if(A){var c=XC(n,o);i.push(c)}}),{size:r,shape:t,stops:i,position:s,type:2}},Lv=function(n,e){var t=0,r=3,i=[],s=[];return Ma(e).forEach(function(o,a){var A=!0;if(a===0?A=o.reduce(function(c,u){if(Dn(u))switch(u.value){case"center":return s.push(aS),!1;case"top":case"left":return s.push(Ur),!1;case"right":case"bottom":return s.push(Bl),!1}else if(Yn(u)||Xl(u))return s.push(u),!1;return c},A):a===1&&(A=o.reduce(function(c,u){if(Dn(u))switch(u.value){case PZ:return t=0,!1;case WZ:return t=1,!1;case ZZ:case kZ:return r=0,!1;case DZ:return r=1,!1;case VZ:return r=2,!1;case OZ:case LZ:return r=3,!1}else if(Xl(u)||Yn(u))return Array.isArray(r)||(r=[]),r.push(u),!1;return c},A)),A){var l=XC(n,o);i.push(l)}}),{size:r,shape:t,stops:i,position:s,type:2}},Ase=function(n){return n.type===1},lse=function(n){return n.type===2},AS={name:"image",parse:function(n,e){if(e.type===22){var t={url:e.value,type:0};return n.cache.addImage(e.value),t}if(e.type===18){var r=GZ[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(n,e.values)}throw new Error("Unsupported image type "+e.type)}};function cse(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!GZ[n.name])}var GZ={"linear-gradient":sse,"-moz-linear-gradient":Vv,"-ms-linear-gradient":Vv,"-o-linear-gradient":Vv,"-webkit-linear-gradient":Vv,"radial-gradient":ase,"-moz-radial-gradient":Lv,"-ms-radial-gradient":Lv,"-o-radial-gradient":Lv,"-webkit-radial-gradient":Lv,"-webkit-gradient":ose},use={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(r){return HC(r)&&cse(r)}).map(function(r){return AS.parse(n,r)})}},fse={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(Dn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},dse={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return Ma(e).map(function(t){return t.filter(Yn)}).map(_Z)}},hse={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return Ma(e).map(function(t){return t.filter(Dn).map(function(r){return r.value}).join(" ")}).map(pse)}},pse=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Rd;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(Rd||(Rd={}));var gse={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return Ma(e).map(function(t){return t.filter(mse)})}},mse=function(n){return Dn(n)||Yn(n)},YC=function(n){return{name:"border-"+n+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},vse=YC("top"),yse=YC("right"),Bse=YC("bottom"),wse=YC("left"),KC=function(n){return{name:"border-radius-"+n,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return _Z(t.filter(Yn))}}},Cse=KC("top-left"),bse=KC("top-right"),xse=KC("bottom-right"),Ise=KC("bottom-left"),jC=function(n){return{name:"border-"+n+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Fse=jC("top"),Ese=jC("right"),Use=jC("bottom"),_se=jC("left"),$C=function(n){return{name:"border-"+n+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return c0(t)?t.number:0}}},Sse=$C("top"),Qse=$C("right"),Rse=$C("bottom"),Mse=$C("left"),Tse={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Nse={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},kse={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(Dn).reduce(function(t,r){return t|Dse(r.value)},0)}},Dse=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Vse={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Lse={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},ow;(function(n){n.NORMAL="normal",n.STRICT="strict"})(ow||(ow={}));var Pse={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return ow.STRICT;case"normal":default:return ow.NORMAL}}},Wse={name:"line-height",initialValue:"normal",prefix:!1,type:4},dN=function(n,e){return Dn(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:Yn(n)?on(n,e):e},Ose={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:AS.parse(n,e)}},Zse={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Gse={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},qC=function(n){return{name:"margin-"+n,initialValue:"0",prefix:!1,type:4}},Jse=qC("top"),Hse=qC("right"),zse=qC("bottom"),Xse=qC("left"),Yse={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(Dn).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Kse={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},eb=function(n){return{name:"padding-"+n,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},jse=eb("top"),$se=eb("right"),qse=eb("bottom"),eoe=eb("left"),toe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},noe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},roe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&wE(e[0],"none")?[]:Ma(e).map(function(t){for(var r={color:Cm.TRANSPARENT,offsetX:Ur,offsetY:Ur,blur:Ur},i=0,s=0;s<t.length;s++){var o=t[s];Xl(o)?(i===0?r.offsetX=o:i===1?r.offsetY=o:r.blur=o,i++):r.color=Nl.parse(n,o)}return r})}},ioe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},soe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=Aoe[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},ooe=function(n){var e=n.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},aoe=function(n){var e=n.filter(function(A){return A.type===17}).map(function(A){return A.number}),t=e[0],r=e[1];e[2],e[3];var i=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],a=e[13];return e[14],e[15],e.length===16?[t,r,i,s,o,a]:null},Aoe={matrix:ooe,matrix3d:aoe},hN={type:16,number:50,flags:l0},loe=[hN,hN],coe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var t=e.filter(Yn);return t.length!==2?loe:[t[0],t[1]]}},uoe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Vg;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(Vg||(Vg={}));var foe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return Vg.BREAK_ALL;case"keep-all":return Vg.KEEP_ALL;case"normal":default:return Vg.NORMAL}}},doe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if(JC(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},JZ={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},hoe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return JC(e)?e.number:1}},poe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},goe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(Dn).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},moe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var t=[],r=[];return e.forEach(function(i){switch(i.type){case 20:case 0:t.push(i.value);break;case 17:t.push(i.number.toString());break;case 4:r.push(t.join(" ")),t.length=0;break}}),t.length&&r.push(t.join(" ")),r.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},voe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},yoe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if(JC(e))return e.number;if(Dn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Boe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(Dn).map(function(t){return t.value})}},woe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ar=function(n,e){return(n&e)!==0},Coe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(c0).map(function(t){return JZ.parse(n,t)})}},boe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&wE(e[0],"none")?[]:Ma(e).map(function(t){for(var r={color:255,offsetX:Ur,offsetY:Ur,blur:Ur,spread:Ur,inset:!1},i=0,s=0;s<t.length;s++){var o=t[s];wE(o,"inset")?r.inset=!0:Xl(o)?(i===0?r.offsetX=o:i===1?r.offsetY=o:i===2?r.blur=o:r.spread=o,i++):r.color=Nl.parse(n,o)}return r})}},xoe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var t=[0,1,2],r=[];return e.filter(Dn).forEach(function(i){switch(i.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),t.forEach(function(i){r.indexOf(i)===-1&&r.push(i)}),r}},Ioe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Foe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return c0(e)?e.number:0}},Eoe=function(){function n(e,t){var r,i;this.animationDuration=Xe(e,Coe,t.animationDuration),this.backgroundClip=Xe(e,ese,t.backgroundClip),this.backgroundColor=Xe(e,tse,t.backgroundColor),this.backgroundImage=Xe(e,use,t.backgroundImage),this.backgroundOrigin=Xe(e,fse,t.backgroundOrigin),this.backgroundPosition=Xe(e,dse,t.backgroundPosition),this.backgroundRepeat=Xe(e,hse,t.backgroundRepeat),this.backgroundSize=Xe(e,gse,t.backgroundSize),this.borderTopColor=Xe(e,vse,t.borderTopColor),this.borderRightColor=Xe(e,yse,t.borderRightColor),this.borderBottomColor=Xe(e,Bse,t.borderBottomColor),this.borderLeftColor=Xe(e,wse,t.borderLeftColor),this.borderTopLeftRadius=Xe(e,Cse,t.borderTopLeftRadius),this.borderTopRightRadius=Xe(e,bse,t.borderTopRightRadius),this.borderBottomRightRadius=Xe(e,xse,t.borderBottomRightRadius),this.borderBottomLeftRadius=Xe(e,Ise,t.borderBottomLeftRadius),this.borderTopStyle=Xe(e,Fse,t.borderTopStyle),this.borderRightStyle=Xe(e,Ese,t.borderRightStyle),this.borderBottomStyle=Xe(e,Use,t.borderBottomStyle),this.borderLeftStyle=Xe(e,_se,t.borderLeftStyle),this.borderTopWidth=Xe(e,Sse,t.borderTopWidth),this.borderRightWidth=Xe(e,Qse,t.borderRightWidth),this.borderBottomWidth=Xe(e,Rse,t.borderBottomWidth),this.borderLeftWidth=Xe(e,Mse,t.borderLeftWidth),this.boxShadow=Xe(e,boe,t.boxShadow),this.color=Xe(e,Tse,t.color),this.direction=Xe(e,Nse,t.direction),this.display=Xe(e,kse,t.display),this.float=Xe(e,Vse,t.cssFloat),this.fontFamily=Xe(e,moe,t.fontFamily),this.fontSize=Xe(e,voe,t.fontSize),this.fontStyle=Xe(e,woe,t.fontStyle),this.fontVariant=Xe(e,Boe,t.fontVariant),this.fontWeight=Xe(e,yoe,t.fontWeight),this.letterSpacing=Xe(e,Lse,t.letterSpacing),this.lineBreak=Xe(e,Pse,t.lineBreak),this.lineHeight=Xe(e,Wse,t.lineHeight),this.listStyleImage=Xe(e,Ose,t.listStyleImage),this.listStylePosition=Xe(e,Zse,t.listStylePosition),this.listStyleType=Xe(e,Gse,t.listStyleType),this.marginTop=Xe(e,Jse,t.marginTop),this.marginRight=Xe(e,Hse,t.marginRight),this.marginBottom=Xe(e,zse,t.marginBottom),this.marginLeft=Xe(e,Xse,t.marginLeft),this.opacity=Xe(e,hoe,t.opacity);var s=Xe(e,Yse,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Xe(e,Kse,t.overflowWrap),this.paddingTop=Xe(e,jse,t.paddingTop),this.paddingRight=Xe(e,$se,t.paddingRight),this.paddingBottom=Xe(e,qse,t.paddingBottom),this.paddingLeft=Xe(e,eoe,t.paddingLeft),this.paintOrder=Xe(e,xoe,t.paintOrder),this.position=Xe(e,noe,t.position),this.textAlign=Xe(e,toe,t.textAlign),this.textDecorationColor=Xe(e,poe,(r=t.textDecorationColor)!==null&&r!==void 0?r:t.color),this.textDecorationLine=Xe(e,goe,(i=t.textDecorationLine)!==null&&i!==void 0?i:t.textDecoration),this.textShadow=Xe(e,roe,t.textShadow),this.textTransform=Xe(e,ioe,t.textTransform),this.transform=Xe(e,soe,t.transform),this.transformOrigin=Xe(e,coe,t.transformOrigin),this.visibility=Xe(e,uoe,t.visibility),this.webkitTextStrokeColor=Xe(e,Ioe,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Xe(e,Foe,t.webkitTextStrokeWidth),this.wordBreak=Xe(e,foe,t.wordBreak),this.zIndex=Xe(e,doe,t.zIndex)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return Qd(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return ar(this.display,4)||ar(this.display,33554432)||ar(this.display,268435456)||ar(this.display,536870912)||ar(this.display,67108864)||ar(this.display,134217728)},n}(),Xe=function(n,e,t){var r=new EZ,i=t!==null&&typeof t<"u"?t.toString():e.initialValue;r.write(i);var s=new UZ(r.read());switch(e.type){case 2:var o=s.parseComponentValue();return e.parse(n,Dn(o)?o.value:e.initialValue);case 0:return e.parse(n,s.parseComponentValue());case 1:return e.parse(n,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return zC.parse(n,s.parseComponentValue());case"color":return Nl.parse(n,s.parseComponentValue());case"image":return AS.parse(n,s.parseComponentValue());case"length":var a=s.parseComponentValue();return Xl(a)?a:Ur;case"length-percentage":var A=s.parseComponentValue();return Yn(A)?A:Ur;case"time":return JZ.parse(n,s.parseComponentValue())}break}},Uoe="data-html2canvas-debug",_oe=function(n){var e=n.getAttribute(Uoe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},pN=function(n,e){var t=_oe(n);return t===1||e===t},Ta=function(){function n(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,pN(t,3))debugger;this.styles=new Eoe(e,window.getComputedStyle(t,null)),_ae(t)&&(this.styles.animationDuration.some(function(r){return r>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=sS(this.context,t),pN(t,4)&&(this.flags|=16)}return n}(),Soe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",gN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Pv=0;Pv<gN.length;Pv++)dg[gN.charCodeAt(Pv)]=Pv;var Qoe=function(n){var e=n.length*.75,t=n.length,r,i=0,s,o,a,A;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(l)?l:new Uint8Array(l);for(r=0;r<t;r+=4)s=dg[n.charCodeAt(r)],o=dg[n.charCodeAt(r+1)],a=dg[n.charCodeAt(r+2)],A=dg[n.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|a>>2,c[i++]=(a&3)<<6|A&63;return l},Roe=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},Moe=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},jc=5,lS=6+5,vI=2,Toe=lS-jc,HZ=65536>>jc,Noe=1<<jc,yI=Noe-1,koe=1024>>jc,Doe=HZ+koe,Voe=Doe,Loe=32,Poe=Voe+Loe,Woe=65536>>lS,Ooe=1<<Toe,Zoe=Ooe-1,mN=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},Goe=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},Joe=function(n,e){var t=Qoe(n),r=Array.isArray(t)?Moe(t):new Uint32Array(t),i=Array.isArray(t)?Roe(t):new Uint16Array(t),s=24,o=mN(i,s/2,r[4]/2),a=r[5]===2?mN(i,(s+r[4])/2):Goe(r,Math.ceil((s+r[4])/4));return new Hoe(r[0],r[1],r[2],r[3],o,a)},Hoe=function(){function n(e,t,r,i,s,o){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=i,this.index=s,this.data=o}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>jc],t=(t<<vI)+(e&yI),this.data[t];if(e<=65535)return t=this.index[HZ+(e-55296>>jc)],t=(t<<vI)+(e&yI),this.data[t];if(e<this.highStart)return t=Poe-Woe+(e>>lS),t=this.index[t],t+=e>>jc&Zoe,t=this.index[t],t=(t<<vI)+(e&yI),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),vN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zoe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wv=0;Wv<vN.length;Wv++)zoe[vN.charCodeAt(Wv)]=Wv;var Xoe=1,BI=2,wI=3,yN=4,BN=5,Yoe=7,wN=8,CI=9,bI=10,CN=11,bN=12,xN=13,IN=14,xI=15,Koe=function(n){for(var e=[],t=0,r=n.length;t<r;){var i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},joe=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],i=-1,s="";++i<t;){var o=n[i];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(i+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},$oe=Joe(Soe),Es="×",II="÷",qoe=function(n){return $oe.get(n)},eae=function(n,e,t){var r=t-2,i=e[r],s=e[t-1],o=e[t];if(s===BI&&o===wI)return Es;if(s===BI||s===wI||s===yN||o===BI||o===wI||o===yN)return II;if(s===wN&&[wN,CI,CN,bN].indexOf(o)!==-1||(s===CN||s===CI)&&(o===CI||o===bI)||(s===bN||s===bI)&&o===bI||o===xN||o===BN||o===Yoe||s===Xoe)return Es;if(s===xN&&o===IN){for(;i===BN;)i=e[--r];if(i===IN)return Es}if(s===xI&&o===xI){for(var a=0;i===xI;)a++,i=e[--r];if(a%2===0)return Es}return II},tae=function(n){var e=Koe(n),t=e.length,r=0,i=0,s=e.map(qoe);return{next:function(){if(r>=t)return{done:!0,value:null};for(var o=Es;r<t&&(o=eae(e,s,++r))===Es;);if(o!==Es||r===t){var a=joe.apply(null,e.slice(i,r));return i=r,{value:a,done:!1}}return{done:!0,value:null}}}},nae=function(n){for(var e=tae(n),t=[],r;!(r=e.next()).done;)r.value&&t.push(r.value.slice());return t},rae=function(n){var e=123;if(n.createRange){var t=n.createRange();if(t.getBoundingClientRect){var r=n.createElement("boundtest");r.style.height=e+"px",r.style.display="block",n.body.appendChild(r),t.selectNode(r);var i=t.getBoundingClientRect(),s=Math.round(i.height);if(n.body.removeChild(r),s===e)return!0}}return!1},iae=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var t=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,i=GC(r.data).map(function(A){return Ln(A)}),s=0,o={},a=i.every(function(A,l){t.setStart(r,s),t.setEnd(r,s+A.length);var c=t.getBoundingClientRect();s+=A.length;var u=c.x>o.x||c.y>o.y;return o=c,l===0?!0:u});return n.body.removeChild(e),a},sae=function(){return typeof new Image().crossOrigin<"u"},oae=function(){return typeof new XMLHttpRequest().responseType=="string"},aae=function(n){var e=new Image,t=n.createElement("canvas"),r=t.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},FN=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},Aae=function(n){var e=n.createElement("canvas"),t=100;e.width=t,e.height=t;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,t,t);var i=new Image,s=e.toDataURL();i.src=s;var o=CE(t,t,0,0,i);return r.fillStyle="red",r.fillRect(0,0,t,t),EN(o).then(function(a){r.drawImage(a,0,0);var A=r.getImageData(0,0,t,t).data;r.fillStyle="red",r.fillRect(0,0,t,t);var l=n.createElement("div");return l.style.backgroundImage="url("+s+")",l.style.height=t+"px",FN(A)?EN(CE(t,t,0,0,l)):Promise.reject(!1)}).then(function(a){return r.drawImage(a,0,0),FN(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})},CE=function(n,e,t,r,i){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",n.toString()),o.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(a),a.appendChild(i),o},EN=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},Xi={get SUPPORT_RANGE_BOUNDS(){var n=rae(document);return Object.defineProperty(Xi,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=Xi.SUPPORT_RANGE_BOUNDS&&iae(document);return Object.defineProperty(Xi,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=aae(document);return Object.defineProperty(Xi,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?Aae(document):Promise.resolve(!1);return Object.defineProperty(Xi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=sae();return Object.defineProperty(Xi,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=oae();return Object.defineProperty(Xi,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Xi,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Xi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},Lg=function(){function n(e,t){this.text=e,this.bounds=t}return n}(),lae=function(n,e,t,r){var i=fae(e,t),s=[],o=0;return i.forEach(function(a){if(t.textDecorationLine.length||a.trim().length>0)if(Xi.SUPPORT_RANGE_BOUNDS){var A=UN(r,o,a.length).getClientRects();if(A.length>1){var l=cS(a),c=0;l.forEach(function(f){s.push(new Lg(f,fu.fromDOMRectList(n,UN(r,c+o,f.length).getClientRects()))),c+=f.length})}else s.push(new Lg(a,fu.fromDOMRectList(n,A)))}else{var u=r.splitText(a.length);s.push(new Lg(a,cae(n,r))),r=u}else Xi.SUPPORT_RANGE_BOUNDS||(r=r.splitText(a.length));o+=a.length}),s},cae=function(n,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(r,e);var s=sS(n,r);return r.firstChild&&i.replaceChild(r.firstChild,r),s}}return fu.EMPTY},UN=function(n,e,t){var r=n.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(n,e),i.setEnd(n,e+t),i},cS=function(n){if(Xi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(t){return t.segment})}return nae(n)},uae=function(n,e){if(Xi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(n)).map(function(r){return r.segment})}return hae(n,e)},fae=function(n,e){return e.letterSpacing!==0?cS(n):uae(n,e)},dae=[32,160,4961,65792,65793,4153,4241],hae=function(n,e){for(var t=Hre(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],i,s=function(){if(i.value){var o=i.value.slice(),a=GC(o),A="";a.forEach(function(l){dae.indexOf(l)===-1?A+=Ln(l):(A.length&&r.push(A),r.push(Ln(l)),A="")}),A.length&&r.push(A)}};!(i=t.next()).done;)s();return r},pae=function(){function n(e,t,r){this.text=gae(t.data,r.textTransform),this.textBounds=lae(e,this.text,r,t)}return n}(),gae=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(mae,vae);case 2:return n.toUpperCase();default:return n}},mae=/(^|\s|:|-|\(|\))([a-z])/g,vae=function(n,e,t){return n.length>0?e+t.toUpperCase():n},zZ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.src=r.currentSrc||r.src,i.intrinsicWidth=r.naturalWidth,i.intrinsicHeight=r.naturalHeight,i.context.cache.addImage(i.src),i}return e}(Ta),XZ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.canvas=r,i.intrinsicWidth=r.width,i.intrinsicHeight=r.height,i}return e}(Ta),YZ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this,s=new XMLSerializer,o=sS(t,r);return r.setAttribute("width",o.width+"px"),r.setAttribute("height",o.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),i.intrinsicWidth=r.width.baseVal.value,i.intrinsicHeight=r.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e}(Ta),KZ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.value=r.value,i}return e}(Ta),bE=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.start=r.start,i.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,i}return e}(Ta),yae=[{type:15,flags:0,unit:"px",number:3}],Bae=[{type:16,flags:0,number:50}],wae=function(n){return n.width>n.height?new fu(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new fu(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},Cae=function(n){var e=n.type===bae?new Array(n.value.length+1).join("•"):n.value;return e.length===0?n.placeholder||"":e},aw="checkbox",Aw="radio",bae="password",_N=707406591,uS=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;switch(i.type=r.type.toLowerCase(),i.checked=r.checked,i.value=Cae(r),(i.type===aw||i.type===Aw)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=wae(i.bounds)),i.type){case aw:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=yae;break;case Aw:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Bae;break}return i}return e}(Ta),jZ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this,s=r.options[r.selectedIndex||0];return i.value=s&&s.text||"",i}return e}(Ta),$Z=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.value=r.value,i}return e}(Ta),qZ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;i.src=r.src,i.width=parseInt(r.width,10)||0,i.height=parseInt(r.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){i.tree=Iae(t,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?cN(t,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Cm.TRANSPARENT,o=r.contentWindow.document.body?cN(t,getComputedStyle(r.contentWindow.document.body).backgroundColor):Cm.TRANSPARENT;i.backgroundColor=Qd(s)?Qd(o)?i.styles.backgroundColor:o:s}}catch{}return i}return e}(Ta),xae=["OL","UL","MENU"],jy=function(n,e,t,r){for(var i=e.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,Uae(i)&&i.data.trim().length>0)t.textNodes.push(new pae(n,i,t.styles));else if(tG(i))if(Vae(i)&&i.assignedNodes)i.assignedNodes().forEach(function(a){return jy(n,a,t,r)});else{var o=eG(n,i);o.styles.isVisible()&&(Fae(i,o,r)?o.flags|=4:Eae(o.styles)&&(o.flags|=2),xae.indexOf(i.tagName)!==-1&&(o.flags|=8),t.elements.push(o),i.slot,i.shadowRoot?jy(n,i.shadowRoot,o,r):!rG(i)&&!nG(i)&&!iG(i)&&jy(n,i,o,r))}},eG=function(n,e){return kae(e)?new zZ(n,e):Nae(e)?new XZ(n,e):nG(e)?new YZ(n,e):Qae(e)?new KZ(n,e):Rae(e)?new bE(n,e):Mae(e)?new uS(n,e):iG(e)?new jZ(n,e):rG(e)?new $Z(n,e):Dae(e)?new qZ(n,e):new Ta(n,e)},Iae=function(n,e){var t=eG(n,e);return t.flags|=4,jy(n,e,t,t),t},Fae=function(n,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Tae(n)&&t.styles.isTransparent()},Eae=function(n){return n.isPositioned()||n.isFloating()},Uae=function(n){return n.nodeType===Node.TEXT_NODE},tG=function(n){return n.nodeType===Node.ELEMENT_NODE},_ae=function(n){return tG(n)&&typeof n.style<"u"&&!Sae(n)},Sae=function(n){return typeof n.className=="object"},Qae=function(n){return n.tagName==="LI"},Rae=function(n){return n.tagName==="OL"},Mae=function(n){return n.tagName==="INPUT"},nG=function(n){return n.tagName==="svg"},Tae=function(n){return n.tagName==="BODY"},Nae=function(n){return n.tagName==="CANVAS"},kae=function(n){return n.tagName==="IMG"},Dae=function(n){return n.tagName==="IFRAME"},rG=function(n){return n.tagName==="TEXTAREA"},iG=function(n){return n.tagName==="SELECT"},Vae=function(n){return n.tagName==="SLOT"},SN={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},QN={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Lae={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Pae={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},sf=function(n,e,t,r,i,s){return n<e||n>t?fS(n,i,s.length>0):r.integers.reduce(function(o,a,A){for(;n>=a;)n-=a,o+=r.values[A];return o},"")+s},sG=function(n,e,t,r){var i="";do t||n--,i=r(n)+i,n/=e;while(n*e>=e);return i},Vn=function(n,e,t,r,i){var s=t-e+1;return(n<0?"-":"")+(sG(Math.abs(n),s,r,function(o){return Ln(Math.floor(o%s)+e)})+i)},gc=function(n,e,t){t===void 0&&(t=". ");var r=e.length;return sG(Math.abs(n),r,!1,function(i){return e[Math.floor(i%r)]})+t},xf=1<<0,il=1<<1,sl=1<<2,hg=1<<3,Ja=function(n,e,t,r,i,s){if(n<-9999||n>9999)return fS(n,4,i.length>0);var o=Math.abs(n),a=i;if(o===0)return e[0]+a;for(var A=0;o>0&&A<=4;A++){var l=o%10;l===0&&ar(s,xf)&&a!==""?a=e[l]+a:l>1||l===1&&A===0||l===1&&A===1&&ar(s,il)||l===1&&A===1&&ar(s,sl)&&n>100||l===1&&A>1&&ar(s,hg)?a=e[l]+(A>0?t[A-1]:"")+a:l===1&&A>0&&(a=t[A-1]+a),o=Math.floor(o/10)}return(n<0?r:"")+a},RN="十百千萬",MN="拾佰仟萬",TN="マイナス",FI="마이너스",fS=function(n,e,t){var r=t?". ":"",i=t?"、":"",s=t?", ":"",o=t?" ":"";switch(e){case 0:return"•"+o;case 1:return"◦"+o;case 2:return"◾"+o;case 5:var a=Vn(n,48,57,!0,r);return a.length<4?"0"+a:a;case 4:return gc(n,"〇一二三四五六七八九",i);case 6:return sf(n,1,3999,SN,3,r).toLowerCase();case 7:return sf(n,1,3999,SN,3,r);case 8:return Vn(n,945,969,!1,r);case 9:return Vn(n,97,122,!1,r);case 10:return Vn(n,65,90,!1,r);case 11:return Vn(n,1632,1641,!0,r);case 12:case 49:return sf(n,1,9999,QN,3,r);case 35:return sf(n,1,9999,QN,3,r).toLowerCase();case 13:return Vn(n,2534,2543,!0,r);case 14:case 30:return Vn(n,6112,6121,!0,r);case 15:return gc(n,"子丑寅卯辰巳午未申酉戌亥",i);case 16:return gc(n,"甲乙丙丁戊己庚辛壬癸",i);case 17:case 48:return Ja(n,"零一二三四五六七八九",RN,"負",i,il|sl|hg);case 47:return Ja(n,"零壹貳參肆伍陸柒捌玖",MN,"負",i,xf|il|sl|hg);case 42:return Ja(n,"零一二三四五六七八九",RN,"负",i,il|sl|hg);case 41:return Ja(n,"零壹贰叁肆伍陆柒捌玖",MN,"负",i,xf|il|sl|hg);case 26:return Ja(n,"〇一二三四五六七八九","十百千万",TN,i,0);case 25:return Ja(n,"零壱弐参四伍六七八九","拾百千万",TN,i,xf|il|sl);case 31:return Ja(n,"영일이삼사오육칠팔구","십백천만",FI,s,xf|il|sl);case 33:return Ja(n,"零一二三四五六七八九","十百千萬",FI,s,0);case 32:return Ja(n,"零壹貳參四五六七八九","拾百千",FI,s,xf|il|sl);case 18:return Vn(n,2406,2415,!0,r);case 20:return sf(n,1,19999,Pae,3,r);case 21:return Vn(n,2790,2799,!0,r);case 22:return Vn(n,2662,2671,!0,r);case 22:return sf(n,1,10999,Lae,3,r);case 23:return gc(n,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return gc(n,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Vn(n,3302,3311,!0,r);case 28:return gc(n,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",i);case 29:return gc(n,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",i);case 34:return Vn(n,3792,3801,!0,r);case 37:return Vn(n,6160,6169,!0,r);case 38:return Vn(n,4160,4169,!0,r);case 39:return Vn(n,2918,2927,!0,r);case 40:return Vn(n,1776,1785,!0,r);case 43:return Vn(n,3046,3055,!0,r);case 44:return Vn(n,3174,3183,!0,r);case 45:return Vn(n,3664,3673,!0,r);case 46:return Vn(n,3872,3881,!0,r);case 3:default:return Vn(n,48,57,!0,r)}},NN;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(NN||(NN={}));var Wae=function(){function n(){}return n.getOrigin=function(e){var t=n._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),Ze=function(){function n(e,t){this.type=0,this.x=e,this.y=t}return n.prototype.add=function(e,t){return new n(this.x+e,this.y+t)},n}(),of=function(n,e,t){return new Ze(n.x+(e.x-n.x)*t,n.y+(e.y-n.y)*t)},Ov=function(){function n(e,t,r,i){this.type=1,this.start=e,this.startControl=t,this.endControl=r,this.end=i}return n.prototype.subdivide=function(e,t){var r=of(this.start,this.startControl,e),i=of(this.startControl,this.endControl,e),s=of(this.endControl,this.end,e),o=of(r,i,e),a=of(i,s,e),A=of(o,a,e);return t?new n(this.start,r,o,A):new n(A,a,s,this.end)},n.prototype.add=function(e,t){return new n(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),Ms=function(n){return n.type===1},Oae=function(){function n(e){var t=e.styles,r=e.bounds,i=fg(t.borderTopLeftRadius,r.width,r.height),s=i[0],o=i[1],a=fg(t.borderTopRightRadius,r.width,r.height),A=a[0],l=a[1],c=fg(t.borderBottomRightRadius,r.width,r.height),u=c[0],f=c[1],d=fg(t.borderBottomLeftRadius,r.width,r.height),h=d[0],p=d[1],m=[];m.push((s+A)/r.width),m.push((h+u)/r.width),m.push((o+p)/r.height),m.push((l+f)/r.height);var g=Math.max.apply(Math,m);g>1&&(s/=g,o/=g,A/=g,l/=g,u/=g,f/=g,h/=g,p/=g);var v=r.width-A,y=r.height-f,w=r.width-u,C=r.height-p,b=t.borderTopWidth,F=t.borderRightWidth,I=t.borderBottomWidth,S=t.borderLeftWidth,T=on(t.paddingTop,e.bounds.width),H=on(t.paddingRight,e.bounds.width),X=on(t.paddingBottom,e.bounds.width),Q=on(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?pn(r.left+S/3,r.top+b/3,s-S/3,o-b/3,Gt.TOP_LEFT):new Ze(r.left+S/3,r.top+b/3),this.topRightBorderDoubleOuterBox=s>0||o>0?pn(r.left+v,r.top+b/3,A-F/3,l-b/3,Gt.TOP_RIGHT):new Ze(r.left+r.width-F/3,r.top+b/3),this.bottomRightBorderDoubleOuterBox=u>0||f>0?pn(r.left+w,r.top+y,u-F/3,f-I/3,Gt.BOTTOM_RIGHT):new Ze(r.left+r.width-F/3,r.top+r.height-I/3),this.bottomLeftBorderDoubleOuterBox=h>0||p>0?pn(r.left+S/3,r.top+C,h-S/3,p-I/3,Gt.BOTTOM_LEFT):new Ze(r.left+S/3,r.top+r.height-I/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?pn(r.left+S*2/3,r.top+b*2/3,s-S*2/3,o-b*2/3,Gt.TOP_LEFT):new Ze(r.left+S*2/3,r.top+b*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?pn(r.left+v,r.top+b*2/3,A-F*2/3,l-b*2/3,Gt.TOP_RIGHT):new Ze(r.left+r.width-F*2/3,r.top+b*2/3),this.bottomRightBorderDoubleInnerBox=u>0||f>0?pn(r.left+w,r.top+y,u-F*2/3,f-I*2/3,Gt.BOTTOM_RIGHT):new Ze(r.left+r.width-F*2/3,r.top+r.height-I*2/3),this.bottomLeftBorderDoubleInnerBox=h>0||p>0?pn(r.left+S*2/3,r.top+C,h-S*2/3,p-I*2/3,Gt.BOTTOM_LEFT):new Ze(r.left+S*2/3,r.top+r.height-I*2/3),this.topLeftBorderStroke=s>0||o>0?pn(r.left+S/2,r.top+b/2,s-S/2,o-b/2,Gt.TOP_LEFT):new Ze(r.left+S/2,r.top+b/2),this.topRightBorderStroke=s>0||o>0?pn(r.left+v,r.top+b/2,A-F/2,l-b/2,Gt.TOP_RIGHT):new Ze(r.left+r.width-F/2,r.top+b/2),this.bottomRightBorderStroke=u>0||f>0?pn(r.left+w,r.top+y,u-F/2,f-I/2,Gt.BOTTOM_RIGHT):new Ze(r.left+r.width-F/2,r.top+r.height-I/2),this.bottomLeftBorderStroke=h>0||p>0?pn(r.left+S/2,r.top+C,h-S/2,p-I/2,Gt.BOTTOM_LEFT):new Ze(r.left+S/2,r.top+r.height-I/2),this.topLeftBorderBox=s>0||o>0?pn(r.left,r.top,s,o,Gt.TOP_LEFT):new Ze(r.left,r.top),this.topRightBorderBox=A>0||l>0?pn(r.left+v,r.top,A,l,Gt.TOP_RIGHT):new Ze(r.left+r.width,r.top),this.bottomRightBorderBox=u>0||f>0?pn(r.left+w,r.top+y,u,f,Gt.BOTTOM_RIGHT):new Ze(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=h>0||p>0?pn(r.left,r.top+C,h,p,Gt.BOTTOM_LEFT):new Ze(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||o>0?pn(r.left+S,r.top+b,Math.max(0,s-S),Math.max(0,o-b),Gt.TOP_LEFT):new Ze(r.left+S,r.top+b),this.topRightPaddingBox=A>0||l>0?pn(r.left+Math.min(v,r.width-F),r.top+b,v>r.width+F?0:Math.max(0,A-F),Math.max(0,l-b),Gt.TOP_RIGHT):new Ze(r.left+r.width-F,r.top+b),this.bottomRightPaddingBox=u>0||f>0?pn(r.left+Math.min(w,r.width-S),r.top+Math.min(y,r.height-I),Math.max(0,u-F),Math.max(0,f-I),Gt.BOTTOM_RIGHT):new Ze(r.left+r.width-F,r.top+r.height-I),this.bottomLeftPaddingBox=h>0||p>0?pn(r.left+S,r.top+Math.min(C,r.height-I),Math.max(0,h-S),Math.max(0,p-I),Gt.BOTTOM_LEFT):new Ze(r.left+S,r.top+r.height-I),this.topLeftContentBox=s>0||o>0?pn(r.left+S+Q,r.top+b+T,Math.max(0,s-(S+Q)),Math.max(0,o-(b+T)),Gt.TOP_LEFT):new Ze(r.left+S+Q,r.top+b+T),this.topRightContentBox=A>0||l>0?pn(r.left+Math.min(v,r.width+S+Q),r.top+b+T,v>r.width+S+Q?0:A-S+Q,l-(b+T),Gt.TOP_RIGHT):new Ze(r.left+r.width-(F+H),r.top+b+T),this.bottomRightContentBox=u>0||f>0?pn(r.left+Math.min(w,r.width-(S+Q)),r.top+Math.min(y,r.height+b+T),Math.max(0,u-(F+H)),f-(I+X),Gt.BOTTOM_RIGHT):new Ze(r.left+r.width-(F+H),r.top+r.height-(I+X)),this.bottomLeftContentBox=h>0||p>0?pn(r.left+S+Q,r.top+C,Math.max(0,h-(S+Q)),p-(I+X),Gt.BOTTOM_LEFT):new Ze(r.left+S+Q,r.top+r.height-(I+X))}return n}(),Gt;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Gt||(Gt={}));var pn=function(n,e,t,r,i){var s=4*((Math.sqrt(2)-1)/3),o=t*s,a=r*s,A=n+t,l=e+r;switch(i){case Gt.TOP_LEFT:return new Ov(new Ze(n,l),new Ze(n,l-a),new Ze(A-o,e),new Ze(A,e));case Gt.TOP_RIGHT:return new Ov(new Ze(n,e),new Ze(n+o,e),new Ze(A,l-a),new Ze(A,l));case Gt.BOTTOM_RIGHT:return new Ov(new Ze(A,e),new Ze(A,e+a),new Ze(n+o,l),new Ze(n,l));case Gt.BOTTOM_LEFT:default:return new Ov(new Ze(A,l),new Ze(A-o,l),new Ze(n,e+a),new Ze(n,e))}},lw=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},Zae=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},cw=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},Gae=function(){function n(e,t,r){this.offsetX=e,this.offsetY=t,this.matrix=r,this.type=0,this.target=6}return n}(),Zv=function(){function n(e,t){this.path=e,this.target=t,this.type=1}return n}(),Jae=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),Hae=function(n){return n.type===0},oG=function(n){return n.type===1},zae=function(n){return n.type===2},kN=function(n,e){return n.length===e.length?n.some(function(t,r){return t===e[r]}):!1},Xae=function(n,e,t,r,i){return n.map(function(s,o){switch(o){case 0:return s.add(e,t);case 1:return s.add(e+r,t);case 2:return s.add(e+r,t+i);case 3:return s.add(e,t+i)}return s})},aG=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),AG=function(){function n(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Oae(this.container),this.container.styles.opacity<1&&this.effects.push(new Jae(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new Gae(r,i,s))}if(this.container.styles.overflowX!==0){var o=lw(this.curves),a=cw(this.curves);kN(o,a)?this.effects.push(new Zv(o,6)):(this.effects.push(new Zv(o,2)),this.effects.push(new Zv(a,4)))}}return n.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,i=this.effects.slice(0);r;){var s=r.effects.filter(function(A){return!oG(A)});if(t||r.container.styles.position!==0||!r.parent){if(i.unshift.apply(i,s),t=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var o=lw(r.curves),a=cw(r.curves);kN(o,a)||i.unshift(new Zv(a,6))}}else i.unshift.apply(i,s);r=r.parent}return i.filter(function(A){return ar(A.target,e)})},n}(),xE=function(n,e,t,r){n.container.elements.forEach(function(i){var s=ar(i.flags,4),o=ar(i.flags,2),a=new AG(i,n);ar(i.styles.display,2048)&&r.push(a);var A=ar(i.flags,8)?[]:r;if(s||o){var l=s||i.styles.isPositioned()?t:e,c=new aG(a);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var f=0;l.negativeZIndex.some(function(h,p){return u>h.element.container.styles.zIndex.order?(f=p,!1):f>0}),l.negativeZIndex.splice(f,0,c)}else if(u>0){var d=0;l.positiveZIndex.some(function(h,p){return u>=h.element.container.styles.zIndex.order?(d=p+1,!1):d>0}),l.positiveZIndex.splice(d,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);xE(a,c,s?c:t,A)}else i.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),xE(a,e,t,A);ar(i.flags,8)&&lG(i,A)})},lG=function(n,e){for(var t=n instanceof bE?n.start:1,r=n instanceof bE?n.reversed:!1,i=0;i<e.length;i++){var s=e[i];s.container instanceof KZ&&typeof s.container.value=="number"&&s.container.value!==0&&(t=s.container.value),s.listValue=fS(t,s.container.styles.listStyleType,!0),t+=r?-1:1}},Yae=function(n){var e=new AG(n,null),t=new aG(e),r=[];return xE(e,t,t,r),lG(e.container,r),t},DN=function(n,e){switch(e){case 0:return Ds(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return Ds(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return Ds(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return Ds(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},Kae=function(n,e){switch(e){case 0:return Ds(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return Ds(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return Ds(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return Ds(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},jae=function(n,e){switch(e){case 0:return Ds(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return Ds(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return Ds(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return Ds(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},$ae=function(n,e){switch(e){case 0:return Gv(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return Gv(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return Gv(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return Gv(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},Gv=function(n,e){var t=[];return Ms(n)?t.push(n.subdivide(.5,!1)):t.push(n),Ms(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Ds=function(n,e,t,r){var i=[];return Ms(n)?i.push(n.subdivide(.5,!1)):i.push(n),Ms(t)?i.push(t.subdivide(.5,!0)):i.push(t),Ms(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),Ms(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},cG=function(n){var e=n.bounds,t=n.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},uw=function(n){var e=n.styles,t=n.bounds,r=on(e.paddingLeft,t.width),i=on(e.paddingRight,t.width),s=on(e.paddingTop,t.width),o=on(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+i),-(e.borderTopWidth+e.borderBottomWidth+s+o))},qae=function(n,e){return n===0?e.bounds:n===2?uw(e):cG(e)},eAe=function(n,e){return n===0?e.bounds:n===2?uw(e):cG(e)},EI=function(n,e,t){var r=qae(If(n.styles.backgroundOrigin,e),n),i=eAe(If(n.styles.backgroundClip,e),n),s=tAe(If(n.styles.backgroundSize,e),t,r),o=s[0],a=s[1],A=fg(If(n.styles.backgroundPosition,e),r.width-o,r.height-a),l=nAe(If(n.styles.backgroundRepeat,e),A,s,r,i),c=Math.round(r.left+A[0]),u=Math.round(r.top+A[1]);return[l,c,u,o,a]},af=function(n){return Dn(n)&&n.value===Rd.AUTO},Jv=function(n){return typeof n=="number"},tAe=function(n,e,t){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1];if(!o)return[0,0];if(Yn(o)&&a&&Yn(a))return[on(o,t.width),on(a,t.height)];var A=Jv(s);if(Dn(o)&&(o.value===Rd.CONTAIN||o.value===Rd.COVER)){if(Jv(s)){var l=t.width/t.height;return l<s!=(o.value===Rd.COVER)?[t.width,t.width/s]:[t.height*s,t.height]}return[t.width,t.height]}var c=Jv(r),u=Jv(i),f=c||u;if(af(o)&&(!a||af(a))){if(c&&u)return[r,i];if(!A&&!f)return[t.width,t.height];if(f&&A){var d=c?r:i*s,h=u?i:r/s;return[d,h]}var p=c?r:t.width,m=u?i:t.height;return[p,m]}if(A){var g=0,v=0;return Yn(o)?g=on(o,t.width):Yn(a)&&(v=on(a,t.height)),af(o)?g=v*s:(!a||af(a))&&(v=g/s),[g,v]}var y=null,w=null;if(Yn(o)?y=on(o,t.width):a&&Yn(a)&&(w=on(a,t.height)),y!==null&&(!a||af(a))&&(w=c&&u?y/r*i:t.height),w!==null&&af(o)&&(y=c&&u?w/i*r:t.width),y!==null&&w!==null)return[y,w];throw new Error("Unable to calculate background-size for element")},If=function(n,e){var t=n[e];return typeof t>"u"?n[0]:t},nAe=function(n,e,t,r,i){var s=e[0],o=e[1],a=t[0],A=t[1];switch(n){case 2:return[new Ze(Math.round(r.left),Math.round(r.top+o)),new Ze(Math.round(r.left+r.width),Math.round(r.top+o)),new Ze(Math.round(r.left+r.width),Math.round(A+r.top+o)),new Ze(Math.round(r.left),Math.round(A+r.top+o))];case 3:return[new Ze(Math.round(r.left+s),Math.round(r.top)),new Ze(Math.round(r.left+s+a),Math.round(r.top)),new Ze(Math.round(r.left+s+a),Math.round(r.height+r.top)),new Ze(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new Ze(Math.round(r.left+s),Math.round(r.top+o)),new Ze(Math.round(r.left+s+a),Math.round(r.top+o)),new Ze(Math.round(r.left+s+a),Math.round(r.top+o+A)),new Ze(Math.round(r.left+s),Math.round(r.top+o+A))];default:return[new Ze(Math.round(i.left),Math.round(i.top)),new Ze(Math.round(i.left+i.width),Math.round(i.top)),new Ze(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Ze(Math.round(i.left),Math.round(i.height+i.top))]}},rAe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",VN="Hidden Text",iAe=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,t){var r=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",o.appendChild(r),i.src=rAe,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(VN)),r.appendChild(s),r.appendChild(i);var a=i.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(VN)),r.style.lineHeight="normal",i.style.verticalAlign="super";var A=i.offsetTop-r.offsetTop+2;return o.removeChild(r),{baseline:a,middle:A}},n.prototype.getMetrics=function(e,t){var r=e+" "+t;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,t)),this._data[r]},n}(),uG=function(){function n(e,t){this.context=e,this.options=t}return n}(),sAe=1e4;(function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i._activeEffects=[],i.canvas=r.canvas?r.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),r.canvas||(i.canvas.width=Math.floor(r.width*r.scale),i.canvas.height=Math.floor(r.height*r.scale),i.canvas.style.width=r.width+"px",i.canvas.style.height=r.height+"px"),i.fontMetrics=new iAe(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-r.x,-r.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),i}return e.prototype.applyEffects=function(t){for(var r=this;this._activeEffects.length;)this.popEffect();t.forEach(function(i){return r.applyEffect(i)})},e.prototype.applyEffect=function(t){this.ctx.save(),zae(t)&&(this.ctx.globalAlpha=t.opacity),Hae(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),oG(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return bs(this,void 0,void 0,function(){var r;return Zi(this,function(i){switch(i.label){case 0:return r=t.element.container.styles,r.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return bs(this,void 0,void 0,function(){return Zi(this,function(r){switch(r.label){case 0:if(ar(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,r,i){var s=this;if(r===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i);else{var o=cS(t.text);o.reduce(function(a,A){return s.ctx.fillText(A,a,t.bounds.top+i),a+s.ctx.measureText(A).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var r=t.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),i=cAe(t.fontFamily).join(", "),s=c0(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,r,t.fontWeight,s,i].join(" "),i,s]},e.prototype.renderTextNode=function(t,r){return bs(this,void 0,void 0,function(){var i,s,o,a,A,l,c,u,f=this;return Zi(this,function(d){return i=this.createFontStyle(r),s=i[0],o=i[1],a=i[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(o,a),l=A.baseline,c=A.middle,u=r.paintOrder,t.textBounds.forEach(function(h){u.forEach(function(p){switch(p){case 0:f.ctx.fillStyle=fr(r.color),f.renderTextWithLetterSpacing(h,r.letterSpacing,l);var m=r.textShadow;m.length&&h.text.trim().length&&(m.slice(0).reverse().forEach(function(g){f.ctx.shadowColor=fr(g.color),f.ctx.shadowOffsetX=g.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=g.offsetY.number*f.options.scale,f.ctx.shadowBlur=g.blur.number,f.renderTextWithLetterSpacing(h,r.letterSpacing,l)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),r.textDecorationLine.length&&(f.ctx.fillStyle=fr(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(g){switch(g){case 1:f.ctx.fillRect(h.bounds.left,Math.round(h.bounds.top+l),h.bounds.width,1);break;case 2:f.ctx.fillRect(h.bounds.left,Math.round(h.bounds.top),h.bounds.width,1);break;case 3:f.ctx.fillRect(h.bounds.left,Math.ceil(h.bounds.top+c),h.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&h.text.trim().length&&(f.ctx.strokeStyle=fr(r.webkitTextStrokeColor),f.ctx.lineWidth=r.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(h.text,h.bounds.left,h.bounds.top+l)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,r,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var s=uw(t),o=cw(r);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return bs(this,void 0,void 0,function(){var r,i,s,o,a,A,v,v,l,c,u,f,w,d,h,C,p,m,g,v,y,w,C;return Zi(this,function(b){switch(b.label){case 0:this.applyEffects(t.getEffects(4)),r=t.container,i=t.curves,s=r.styles,o=0,a=r.textNodes,b.label=1;case 1:return o<a.length?(A=a[o],[4,this.renderTextNode(A,s)]):[3,4];case 2:b.sent(),b.label=3;case 3:return o++,[3,1];case 4:if(!(r instanceof zZ))return[3,8];b.label=5;case 5:return b.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return v=b.sent(),this.renderReplacedElement(r,i,v),[3,8];case 7:return b.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof XZ&&this.renderReplacedElement(r,i,r.canvas),!(r instanceof YZ))return[3,12];b.label=9;case 9:return b.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return v=b.sent(),this.renderReplacedElement(r,i,v),[3,12];case 11:return b.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof qZ&&r.tree?(l=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,l.render(r.tree)]):[3,14];case 13:c=b.sent(),r.width&&r.height&&this.ctx.drawImage(c,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),b.label=14;case 14:if(r instanceof uS&&(u=Math.min(r.bounds.width,r.bounds.height),r.type===aw?r.checked&&(this.ctx.save(),this.path([new Ze(r.bounds.left+u*.39363,r.bounds.top+u*.79),new Ze(r.bounds.left+u*.16,r.bounds.top+u*.5549),new Ze(r.bounds.left+u*.27347,r.bounds.top+u*.44071),new Ze(r.bounds.left+u*.39694,r.bounds.top+u*.5649),new Ze(r.bounds.left+u*.72983,r.bounds.top+u*.23),new Ze(r.bounds.left+u*.84,r.bounds.top+u*.34085),new Ze(r.bounds.left+u*.39363,r.bounds.top+u*.79)]),this.ctx.fillStyle=fr(_N),this.ctx.fill(),this.ctx.restore()):r.type===Aw&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+u/2,r.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=fr(_N),this.ctx.fill(),this.ctx.restore())),oAe(r)&&r.value.length){switch(f=this.createFontStyle(s),w=f[0],d=f[1],h=this.fontMetrics.getMetrics(w,d).baseline,this.ctx.font=w,this.ctx.fillStyle=fr(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=AAe(r.styles.textAlign),C=uw(r),p=0,r.styles.textAlign){case 1:p+=C.width/2;break;case 2:p+=C.width;break}m=C.add(p,0,0,-C.height/2+1),this.ctx.save(),this.path([new Ze(C.left,C.top),new Ze(C.left+C.width,C.top),new Ze(C.left+C.width,C.top+C.height),new Ze(C.left,C.top+C.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Lg(r.value,m),s.letterSpacing,h),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ar(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(g=r.styles.listStyleImage,g.type!==0)return[3,18];v=void 0,y=g.url,b.label=15;case 15:return b.trys.push([15,17,,18]),[4,this.context.cache.match(y)];case 16:return v=b.sent(),this.ctx.drawImage(v,r.bounds.left-(v.width+10),r.bounds.top),[3,18];case 17:return b.sent(),this.context.logger.error("Error loading list-style-image "+y),[3,18];case 18:return[3,20];case 19:t.listValue&&r.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=fr(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",C=new fu(r.bounds.left,r.bounds.top+on(r.styles.paddingTop,r.bounds.width),r.bounds.width,dN(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Lg(t.listValue,C),s.letterSpacing,dN(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),b.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return bs(this,void 0,void 0,function(){var r,i,g,s,o,g,a,A,g,l,c,g,u,f,g,d,h,g,p,m,g;return Zi(this,function(v){switch(v.label){case 0:if(ar(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:v.sent(),r=0,i=t.negativeZIndex,v.label=2;case 2:return r<i.length?(g=i[r],[4,this.renderStack(g)]):[3,5];case 3:v.sent(),v.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:v.sent(),s=0,o=t.nonInlineLevel,v.label=7;case 7:return s<o.length?(g=o[s],[4,this.renderNode(g)]):[3,10];case 8:v.sent(),v.label=9;case 9:return s++,[3,7];case 10:a=0,A=t.nonPositionedFloats,v.label=11;case 11:return a<A.length?(g=A[a],[4,this.renderStack(g)]):[3,14];case 12:v.sent(),v.label=13;case 13:return a++,[3,11];case 14:l=0,c=t.nonPositionedInlineLevel,v.label=15;case 15:return l<c.length?(g=c[l],[4,this.renderStack(g)]):[3,18];case 16:v.sent(),v.label=17;case 17:return l++,[3,15];case 18:u=0,f=t.inlineLevel,v.label=19;case 19:return u<f.length?(g=f[u],[4,this.renderNode(g)]):[3,22];case 20:v.sent(),v.label=21;case 21:return u++,[3,19];case 22:d=0,h=t.zeroOrAutoZIndexOrTransformedOrOpacity,v.label=23;case 23:return d<h.length?(g=h[d],[4,this.renderStack(g)]):[3,26];case 24:v.sent(),v.label=25;case 25:return d++,[3,23];case 26:p=0,m=t.positiveZIndex,v.label=27;case 27:return p<m.length?(g=m[p],[4,this.renderStack(g)]):[3,30];case 28:v.sent(),v.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var r=this;t.forEach(function(i,s){var o=Ms(i)?i.start:i;s===0?r.ctx.moveTo(o.x,o.y):r.ctx.lineTo(o.x,o.y),Ms(i)&&r.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(t,r,i,s){this.path(t),this.ctx.fillStyle=r,this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},e.prototype.resizeImage=function(t,r,i){var s;if(t.width===r&&t.height===i)return t;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,a=o.createElement("canvas");a.width=Math.max(1,r),a.height=Math.max(1,i);var A=a.getContext("2d");return A.drawImage(t,0,0,t.width,t.height,0,0,r,i),a},e.prototype.renderBackgroundImage=function(t){return bs(this,void 0,void 0,function(){var r,i,s,o,a,A;return Zi(this,function(l){switch(l.label){case 0:r=t.styles.backgroundImage.length-1,i=function(c){var u,f,d,T,R,k,Q,B,I,h,T,R,k,Q,B,p,m,g,v,y,w,C,b,F,I,S,T,H,X,Q,B,E,R,k,M,L,Z,P,U,G,oe,D;return Zi(this,function(K){switch(K.label){case 0:if(c.type!==0)return[3,5];u=void 0,f=c.url,K.label=1;case 1:return K.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return u=K.sent(),[3,4];case 3:return K.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return u&&(d=EI(t,r,[u.width,u.height,u.width/u.height]),T=d[0],R=d[1],k=d[2],Q=d[3],B=d[4],I=s.ctx.createPattern(s.resizeImage(u,Q,B),"repeat"),s.renderRepeat(T,I,R,k)),[3,6];case 5:Ase(c)?(h=EI(t,r,[null,null,null]),T=h[0],R=h[1],k=h[2],Q=h[3],B=h[4],p=rse(c.angle,Q,B),m=p[0],g=p[1],v=p[2],y=p[3],w=p[4],C=document.createElement("canvas"),C.width=Q,C.height=B,b=C.getContext("2d"),F=b.createLinearGradient(g,y,v,w),uN(c.stops,m).forEach(function(ce){return F.addColorStop(ce.stop,fr(ce.color))}),b.fillStyle=F,b.fillRect(0,0,Q,B),Q>0&&B>0&&(I=s.ctx.createPattern(C,"repeat"),s.renderRepeat(T,I,R,k))):lse(c)&&(S=EI(t,r,[null,null,null]),T=S[0],H=S[1],X=S[2],Q=S[3],B=S[4],E=c.position.length===0?[aS]:c.position,R=on(E[0],Q),k=on(E[E.length-1],B),M=ise(c,R,k,Q,B),L=M[0],Z=M[1],L>0&&Z>0&&(P=s.ctx.createRadialGradient(H+R,X+k,0,H+R,X+k,L),uN(c.stops,L*2).forEach(function(ce){return P.addColorStop(ce.stop,fr(ce.color))}),s.path(T),s.ctx.fillStyle=P,L!==Z?(U=t.bounds.left+.5*t.bounds.width,G=t.bounds.top+.5*t.bounds.height,oe=Z/L,D=1/oe,s.ctx.save(),s.ctx.translate(U,G),s.ctx.transform(1,0,0,oe,0,0),s.ctx.translate(-U,-G),s.ctx.fillRect(H,D*(X-G)+G,Q,B*D),s.ctx.restore()):s.ctx.fill())),K.label=6;case 6:return r--,[2]}})},s=this,o=0,a=t.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return o<a.length?(A=a[o],[5,i(A)]):[3,4];case 2:l.sent(),l.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,r,i){return bs(this,void 0,void 0,function(){return Zi(this,function(s){return this.path(DN(i,r)),this.ctx.fillStyle=fr(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,r,i,s){return bs(this,void 0,void 0,function(){var o,a;return Zi(this,function(A){switch(A.label){case 0:return r<3?[4,this.renderSolidBorder(t,i,s)]:[3,2];case 1:return A.sent(),[2];case 2:return o=Kae(s,i),this.path(o),this.ctx.fillStyle=fr(t),this.ctx.fill(),a=jae(s,i),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return bs(this,void 0,void 0,function(){var r,i,s,o,a,A,l,c,u=this;return Zi(this,function(f){switch(f.label){case 0:return this.applyEffects(t.getEffects(2)),r=t.container.styles,i=!Qd(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],o=aAe(If(r.backgroundClip,0),t.curves),i||r.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Qd(r.backgroundColor)||(this.ctx.fillStyle=fr(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(d){u.ctx.save();var h=lw(t.curves),p=d.inset?0:sAe,m=Xae(h,-p+(d.inset?1:-1)*d.spread.number,(d.inset?1:-1)*d.spread.number,d.spread.number*(d.inset?-2:2),d.spread.number*(d.inset?-2:2));d.inset?(u.path(h),u.ctx.clip(),u.mask(m)):(u.mask(h),u.ctx.clip(),u.path(m)),u.ctx.shadowOffsetX=d.offsetX.number+p,u.ctx.shadowOffsetY=d.offsetY.number,u.ctx.shadowColor=fr(d.color),u.ctx.shadowBlur=d.blur.number,u.ctx.fillStyle=d.inset?fr(d.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),f.label=2;case 2:a=0,A=0,l=s,f.label=3;case 3:return A<l.length?(c=l[A],c.style!==0&&!Qd(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,3)];case 6:return f.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,a,t.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,a,t.curves)];case 10:f.sent(),f.label=11;case 11:a++,f.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,r,i,s,o){return bs(this,void 0,void 0,function(){var a,A,l,c,u,f,d,h,p,m,g,v,y,w,C,b,C,b;return Zi(this,function(F){return this.ctx.save(),a=$ae(s,i),A=DN(s,i),o===2&&(this.path(A),this.ctx.clip()),Ms(A[0])?(l=A[0].start.x,c=A[0].start.y):(l=A[0].x,c=A[0].y),Ms(A[1])?(u=A[1].end.x,f=A[1].end.y):(u=A[1].x,f=A[1].y),i===0||i===2?d=Math.abs(l-u):d=Math.abs(c-f),this.ctx.beginPath(),o===3?this.formatPath(a):this.formatPath(A.slice(0,2)),h=r<3?r*3:r*2,p=r<3?r*2:r,o===3&&(h=r,p=r),m=!0,d<=h*2?m=!1:d<=h*2+p?(g=d/(2*h+p),h*=g,p*=g):(v=Math.floor((d+p)/(h+p)),y=(d-v*h)/(v-1),w=(d-(v+1)*h)/v,p=w<=0||Math.abs(p-y)<Math.abs(p-w)?y:w),m&&(o===3?this.ctx.setLineDash([0,h+p]):this.ctx.setLineDash([h,p])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=fr(t),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Ms(A[0])&&(C=A[3],b=A[0],this.ctx.beginPath(),this.formatPath([new Ze(C.end.x,C.end.y),new Ze(b.start.x,b.start.y)]),this.ctx.stroke()),Ms(A[1])&&(C=A[1],b=A[2],this.ctx.beginPath(),this.formatPath([new Ze(C.end.x,C.end.y),new Ze(b.start.x,b.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return bs(this,void 0,void 0,function(){var r;return Zi(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=fr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=Yae(t),[4,this.renderStack(r)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(uG);var oAe=function(n){return n instanceof $Z||n instanceof jZ?!0:n instanceof uS&&n.type!==Aw&&n.type!==aw},aAe=function(n,e){switch(n){case 0:return lw(e);case 2:return Zae(e);case 1:default:return cw(e)}},AAe=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},lAe=["-apple-system","system-ui"],cAe=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return lAe.indexOf(e)===-1}):n};(function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.canvas=r.canvas?r.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=r,i.canvas.width=Math.floor(r.width*r.scale),i.canvas.height=Math.floor(r.height*r.scale),i.canvas.style.width=r.width+"px",i.canvas.style.height=r.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-r.x,-r.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),i}return e.prototype.render=function(t){return bs(this,void 0,void 0,function(){var r,i;return Zi(this,function(s){switch(s.label){case 0:return r=CE(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,uAe(r)];case 1:return i=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=fr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(uG);var uAe=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})};typeof window<"u"&&Wae.setContext(window);/*!
 * @pixiv/three-vrm v1.0.9
 * VRM file loader for three.js.
 *
 * Copyright (c) 2019-2023 pixiv Inc.
 * @pixiv/three-vrm is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-core v1.0.9
 * The implementation of core features of VRM, for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-core is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */class LN extends kt{constructor(e){super(),this.weight=0,this.isBinary=!1,this.overrideBlink="none",this.overrideLookAt="none",this.overrideMouth="none",this._binds=[],this.name=`VRMExpression_${e}`,this.expressionName=e,this.type="VRMExpression",this.visible=!1}get overrideBlinkAmount(){return this.overrideBlink==="block"?0<this.weight?1:0:this.overrideBlink==="blend"?this.weight:0}get overrideLookAtAmount(){return this.overrideLookAt==="block"?0<this.weight?1:0:this.overrideLookAt==="blend"?this.weight:0}get overrideMouthAmount(){return this.overrideMouth==="block"?0<this.weight?1:0:this.overrideMouth==="blend"?this.weight:0}addBind(e){this._binds.push(e)}applyWeight(e){var t;let r=this.isBinary?this.weight<=.5?0:1:this.weight;r*=(t=e==null?void 0:e.multiplier)!==null&&t!==void 0?t:1,this._binds.forEach(i=>i.applyWeight(r))}clearAppliedWeight(){this._binds.forEach(e=>e.clearAppliedWeight())}}function Pt(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})}function fG(n,e,t){var r,i;const s=n.parser.json,o=(r=s.nodes)===null||r===void 0?void 0:r[e];if(o==null)return console.warn(`extractPrimitivesInternal: Attempt to use nodes[${e}] of glTF but the node doesn't exist`),null;const a=o.mesh;if(a==null)return null;const A=(i=s.meshes)===null||i===void 0?void 0:i[a];if(A==null)return console.warn(`extractPrimitivesInternal: Attempt to use meshes[${a}] of glTF but the mesh doesn't exist`),null;const l=A.primitives.length,c=[];return t.traverse(u=>{c.length<l&&u.isMesh&&c.push(u)}),c}function PN(n,e){return Pt(this,void 0,void 0,function*(){const t=yield n.parser.getDependency("node",e);return fG(n,e,t)})}function WN(n){return Pt(this,void 0,void 0,function*(){const e=yield n.parser.getDependencies("node"),t=new Map;return e.forEach((r,i)=>{const s=fG(n,i,r);s!=null&&t.set(i,s)}),t})}function ON(n,e){var t,r;const i=parseInt(Rs,10);let s=null;if(i>=133)s=(r=(t=n.associations.get(e))===null||t===void 0?void 0:t.materials)!==null&&r!==void 0?r:null;else{const a=n.associations.get(e);(a==null?void 0:a.type)==="materials"&&(s=a.index)}return s}const ii={Aa:"aa",Ih:"ih",Ou:"ou",Ee:"ee",Oh:"oh",Blink:"blink",Happy:"happy",Angry:"angry",Sad:"sad",Relaxed:"relaxed",LookUp:"lookUp",Surprised:"surprised",LookDown:"lookDown",LookLeft:"lookLeft",LookRight:"lookRight",BlinkLeft:"blinkLeft",BlinkRight:"blinkRight",Neutral:"neutral"};function dG(n){return Math.max(Math.min(n,1),0)}class fw{constructor(){this.blinkExpressionNames=["blink","blinkLeft","blinkRight"],this.lookAtExpressionNames=["lookLeft","lookRight","lookUp","lookDown"],this.mouthExpressionNames=["aa","ee","ih","oh","ou"],this._expressions=[],this._expressionMap={}}get expressions(){return this._expressions.concat()}get expressionMap(){return Object.assign({},this._expressionMap)}get presetExpressionMap(){const e={},t=new Set(Object.values(ii));return Object.entries(this._expressionMap).forEach(([r,i])=>{t.has(r)&&(e[r]=i)}),e}get customExpressionMap(){const e={},t=new Set(Object.values(ii));return Object.entries(this._expressionMap).forEach(([r,i])=>{t.has(r)||(e[r]=i)}),e}copy(e){return this._expressions.concat().forEach(r=>{this.unregisterExpression(r)}),e._expressions.forEach(r=>{this.registerExpression(r)}),this.blinkExpressionNames=e.blinkExpressionNames.concat(),this.lookAtExpressionNames=e.lookAtExpressionNames.concat(),this.mouthExpressionNames=e.mouthExpressionNames.concat(),this}clone(){return new fw().copy(this)}getExpression(e){var t;return(t=this._expressionMap[e])!==null&&t!==void 0?t:null}registerExpression(e){this._expressions.push(e),this._expressionMap[e.expressionName]=e}unregisterExpression(e){const t=this._expressions.indexOf(e);t===-1&&console.warn("VRMExpressionManager: The specified expressions is not registered"),this._expressions.splice(t,1),delete this._expressionMap[e.expressionName]}getValue(e){var t;const r=this.getExpression(e);return(t=r==null?void 0:r.weight)!==null&&t!==void 0?t:null}setValue(e,t){const r=this.getExpression(e);r&&(r.weight=dG(t))}getExpressionTrackName(e){const t=this.getExpression(e);return t?`${t.name}.weight`:null}update(){const e=this._calculateWeightMultipliers();this._expressions.forEach(t=>{t.clearAppliedWeight()}),this._expressions.forEach(t=>{let r=1;const i=t.expressionName;this.blinkExpressionNames.indexOf(i)!==-1&&(r*=e.blink),this.lookAtExpressionNames.indexOf(i)!==-1&&(r*=e.lookAt),this.mouthExpressionNames.indexOf(i)!==-1&&(r*=e.mouth),t.applyWeight({multiplier:r})})}_calculateWeightMultipliers(){let e=1,t=1,r=1;return this._expressions.forEach(i=>{e-=i.overrideBlinkAmount,t-=i.overrideLookAtAmount,r-=i.overrideMouthAmount}),e=Math.max(0,e),t=Math.max(0,t),r=Math.max(0,r),{blink:e,lookAt:t,mouth:r}}}const Qp={Color:"color",EmissionColor:"emissionColor",ShadeColor:"shadeColor",MatcapColor:"matcapColor",RimColor:"rimColor",OutlineColor:"outlineColor"},fAe={_Color:Qp.Color,_EmissionColor:Qp.EmissionColor,_ShadeColor:Qp.ShadeColor,_RimColor:Qp.RimColor,_OutlineColor:Qp.OutlineColor},dAe=new Ne;class bm{constructor({material:e,type:t,targetValue:r}){var i,s,o;this.material=e,this.type=t,this.targetValue=r;const a=(i=Object.entries(bm._propertyNameMapMap).find(([l])=>e[l]===!0))===null||i===void 0?void 0:i[1],A=(s=a==null?void 0:a[t])!==null&&s!==void 0?s:null;if(A==null)console.warn(`Tried to add a material color bind to the material ${(o=e.name)!==null&&o!==void 0?o:"(no name)"}, the type ${t} but the material or the type is not supported.`),this._state=null;else{const c=e[A].clone(),u=new Ne(r.r-c.r,r.g-c.g,r.b-c.b);this._state={propertyName:A,initialValue:c,deltaValue:u}}}applyWeight(e){if(this._state==null)return;const{propertyName:t,deltaValue:r}=this._state,i=this.material[t];i!==void 0&&(i.add(dAe.copy(r).multiplyScalar(e)),typeof this.material.shouldApplyUniforms=="boolean"&&(this.material.shouldApplyUniforms=!0))}clearAppliedWeight(){if(this._state==null)return;const{propertyName:e,initialValue:t}=this._state,r=this.material[e];r!==void 0&&(r.copy(t),typeof this.material.shouldApplyUniforms=="boolean"&&(this.material.shouldApplyUniforms=!0))}}bm._propertyNameMapMap={isMeshStandardMaterial:{color:"color",emissionColor:"emissive"},isMeshBasicMaterial:{color:"color"},isMToonMaterial:{color:"color",emissionColor:"emissive",outlineColor:"outlineColorFactor",matcapColor:"matcapFactor",rimColor:"parametricRimColorFactor",shadeColor:"shadeColorFactor"}};class ZN{constructor({primitives:e,index:t,weight:r}){this.primitives=e,this.index=t,this.weight=r}applyWeight(e){this.primitives.forEach(t=>{var r;((r=t.morphTargetInfluences)===null||r===void 0?void 0:r[this.index])!=null&&(t.morphTargetInfluences[this.index]+=this.weight*e)})}clearAppliedWeight(){this.primitives.forEach(e=>{var t;((t=e.morphTargetInfluences)===null||t===void 0?void 0:t[this.index])!=null&&(e.morphTargetInfluences[this.index]=0)})}}const GN=new Ge;class xm{constructor({material:e,scale:t,offset:r}){var i,s;this.material=e,this.scale=t,this.offset=r;const o=(i=Object.entries(xm._propertyNamesMap).find(([a])=>e[a]===!0))===null||i===void 0?void 0:i[1];o==null?(console.warn(`Tried to add a texture transform bind to the material ${(s=e.name)!==null&&s!==void 0?s:"(no name)"} but the material is not supported.`),this._properties=[]):(this._properties=[],o.forEach(a=>{var A;const l=(A=e[a])===null||A===void 0?void 0:A.clone();if(!l)return null;e[a]=l;const c=l.offset.clone(),u=l.repeat.clone(),f=r.clone().sub(c),d=t.clone().sub(u);this._properties.push({name:a,initialOffset:c,deltaOffset:f,initialScale:u,deltaScale:d})}))}applyWeight(e){this._properties.forEach(t=>{const r=this.material[t.name];r!==void 0&&(r.offset.add(GN.copy(t.deltaOffset).multiplyScalar(e)),r.repeat.add(GN.copy(t.deltaScale).multiplyScalar(e)),r.needsUpdate=!0)})}clearAppliedWeight(){this._properties.forEach(e=>{const t=this.material[e.name];t!==void 0&&(t.offset.copy(e.initialOffset),t.repeat.copy(e.initialScale),t.needsUpdate=!0)})}}xm._propertyNamesMap={isMeshStandardMaterial:["map","emissiveMap","bumpMap","normalMap","displacementMap","roughnessMap","metalnessMap","alphaMap"],isMeshBasicMaterial:["map","specularMap","alphaMap"],isMToonMaterial:["map","normalMap","emissiveMap","shadeMultiplyTexture","rimMultiplyTexture","outlineWidthMultiplyTexture","uvAnimationMaskTexture"]};const hAe=new Set(["1.0","1.0-beta"]);class tb{constructor(e){this.parser=e}get name(){return"VRMExpressionLoaderPlugin"}afterRoot(e){return Pt(this,void 0,void 0,function*(){e.userData.vrmExpressionManager=yield this._import(e)})}_import(e){return Pt(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t)return t;const r=yield this._v0Import(e);return r||null})}_v1Import(e){var t,r;return Pt(this,void 0,void 0,function*(){const i=this.parser.json;if(!(((t=i.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const o=(r=i.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(!o)return null;const a=o.specVersion;if(!hAe.has(a))return console.warn(`VRMExpressionLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const A=o.expressions;if(!A)return null;const l=new Set(Object.values(ii)),c=new Map;A.preset!=null&&Object.entries(A.preset).forEach(([f,d])=>{if(d!=null){if(!l.has(f)){console.warn(`VRMExpressionLoaderPlugin: Unknown preset name "${f}" detected. Ignoring the expression`);return}c.set(f,d)}}),A.custom!=null&&Object.entries(A.custom).forEach(([f,d])=>{if(l.has(f)){console.warn(`VRMExpressionLoaderPlugin: Custom expression cannot have preset name "${f}". Ignoring the expression`);return}c.set(f,d)});const u=new fw;return yield Promise.all(Array.from(c.entries()).map(([f,d])=>Pt(this,void 0,void 0,function*(){var h,p,m,g,v,y,w;const C=new LN(f);if(e.scene.add(C),C.isBinary=(h=d.isBinary)!==null&&h!==void 0?h:!1,C.overrideBlink=(p=d.overrideBlink)!==null&&p!==void 0?p:"none",C.overrideLookAt=(m=d.overrideLookAt)!==null&&m!==void 0?m:"none",C.overrideMouth=(g=d.overrideMouth)!==null&&g!==void 0?g:"none",(v=d.morphTargetBinds)===null||v===void 0||v.forEach(b=>Pt(this,void 0,void 0,function*(){var F;if(b.node===void 0||b.index===void 0)return;const I=yield PN(e,b.node),S=b.index;if(!I.every(T=>Array.isArray(T.morphTargetInfluences)&&S<T.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${d.name} attempts to index morph #${S} but not found.`);return}C.addBind(new ZN({primitives:I,index:S,weight:(F=b.weight)!==null&&F!==void 0?F:1}))})),d.materialColorBinds||d.textureTransformBinds){const b=[];e.scene.traverse(F=>{const I=F.material;I&&b.push(I)}),(y=d.materialColorBinds)===null||y===void 0||y.forEach(F=>Pt(this,void 0,void 0,function*(){b.filter(S=>{const T=ON(this.parser,S);return F.material===T}).forEach(S=>{C.addBind(new bm({material:S,type:F.type,targetValue:new Ne().fromArray(F.targetValue)}))})})),(w=d.textureTransformBinds)===null||w===void 0||w.forEach(F=>Pt(this,void 0,void 0,function*(){b.filter(S=>{const T=ON(this.parser,S);return F.material===T}).forEach(S=>{var T,H;C.addBind(new xm({material:S,offset:new Ge().fromArray((T=F.offset)!==null&&T!==void 0?T:[0,0]),scale:new Ge().fromArray((H=F.scale)!==null&&H!==void 0?H:[1,1])}))})}))}u.registerExpression(C)}))),u})}_v0Import(e){var t;return Pt(this,void 0,void 0,function*(){const r=this.parser.json,i=(t=r.extensions)===null||t===void 0?void 0:t.VRM;if(!i)return null;const s=i.blendShapeMaster;if(!s)return null;const o=new fw,a=s.blendShapeGroups;if(!a)return o;const A=new Set;return yield Promise.all(a.map(l=>Pt(this,void 0,void 0,function*(){var c;const u=l.presetName,f=u!=null&&tb.v0v1PresetNameMap[u]||null,d=f??l.name;if(d==null){console.warn("VRMExpressionLoaderPlugin: One of custom expressions has no name. Ignoring the expression");return}if(A.has(d)){console.warn(`VRMExpressionLoaderPlugin: An expression preset ${u} has duplicated entries. Ignoring the expression`);return}A.add(d);const h=new LN(d);e.scene.add(h),h.isBinary=(c=l.isBinary)!==null&&c!==void 0?c:!1,l.binds&&l.binds.forEach(m=>Pt(this,void 0,void 0,function*(){var g;if(m.mesh===void 0||m.index===void 0)return;const v=[];(g=r.nodes)===null||g===void 0||g.forEach((w,C)=>{w.mesh===m.mesh&&v.push(C)});const y=m.index;yield Promise.all(v.map(w=>Pt(this,void 0,void 0,function*(){var C;const b=yield PN(e,w);if(!b.every(F=>Array.isArray(F.morphTargetInfluences)&&y<F.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${l.name} attempts to index ${y}th morph but not found.`);return}h.addBind(new ZN({primitives:b,index:y,weight:.01*((C=m.weight)!==null&&C!==void 0?C:100)}))})))}));const p=l.materialValues;p&&p.length!==0&&p.forEach(m=>{if(m.materialName===void 0||m.propertyName===void 0||m.targetValue===void 0)return;const g=[];e.scene.traverse(y=>{if(y.material){const w=y.material;Array.isArray(w)?g.push(...w.filter(C=>(C.name===m.materialName||C.name===m.materialName+" (Outline)")&&g.indexOf(C)===-1)):w.name===m.materialName&&g.indexOf(w)===-1&&g.push(w)}});const v=m.propertyName;g.forEach(y=>{if(v==="_MainTex_ST"){const C=new Ge(m.targetValue[0],m.targetValue[1]),b=new Ge(m.targetValue[2],m.targetValue[3]);h.addBind(new xm({material:y,scale:C,offset:b}));return}const w=fAe[v];if(w){h.addBind(new bm({material:y,type:w,targetValue:new Ne(...m.targetValue.slice(0,3))}));return}console.warn(v+" is not supported")})}),o.registerExpression(h)}))),o})}}tb.v0v1PresetNameMap={a:"aa",e:"ee",i:"ih",o:"oh",u:"ou",blink:"blink",joy:"happy",angry:"angry",sorrow:"sad",fun:"relaxed",lookup:"lookUp",lookdown:"lookDown",lookleft:"lookLeft",lookright:"lookRight",blink_l:"blinkLeft",blink_r:"blinkRight",neutral:"neutral"};class aa{constructor(e,t){this._firstPersonOnlyLayer=aa.DEFAULT_FIRSTPERSON_ONLY_LAYER,this._thirdPersonOnlyLayer=aa.DEFAULT_THIRDPERSON_ONLY_LAYER,this._initializedLayers=!1,this.humanoid=e,this.meshAnnotations=t}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMFirstPerson: humanoid must be same in order to copy");return this.meshAnnotations=e.meshAnnotations.map(t=>({meshes:t.meshes.concat(),type:t.type})),this}clone(){return new aa(this.humanoid,this.meshAnnotations).copy(this)}get firstPersonOnlyLayer(){return this._firstPersonOnlyLayer}get thirdPersonOnlyLayer(){return this._thirdPersonOnlyLayer}setup({firstPersonOnlyLayer:e=aa.DEFAULT_FIRSTPERSON_ONLY_LAYER,thirdPersonOnlyLayer:t=aa.DEFAULT_THIRDPERSON_ONLY_LAYER}={}){this._initializedLayers||(this._firstPersonOnlyLayer=e,this._thirdPersonOnlyLayer=t,this.meshAnnotations.forEach(r=>{r.meshes.forEach(i=>{r.type==="firstPersonOnly"?(i.layers.set(this._firstPersonOnlyLayer),i.traverse(s=>s.layers.set(this._firstPersonOnlyLayer))):r.type==="thirdPersonOnly"?(i.layers.set(this._thirdPersonOnlyLayer),i.traverse(s=>s.layers.set(this._thirdPersonOnlyLayer))):r.type==="auto"&&this._createHeadlessModel(i)})}),this._initializedLayers=!0)}_excludeTriangles(e,t,r,i){let s=0;if(t!=null&&t.length>0)for(let o=0;o<e.length;o+=3){const a=e[o],A=e[o+1],l=e[o+2],c=t[a],u=r[a];if(c[0]>0&&i.includes(u[0])||c[1]>0&&i.includes(u[1])||c[2]>0&&i.includes(u[2])||c[3]>0&&i.includes(u[3]))continue;const f=t[A],d=r[A];if(f[0]>0&&i.includes(d[0])||f[1]>0&&i.includes(d[1])||f[2]>0&&i.includes(d[2])||f[3]>0&&i.includes(d[3]))continue;const h=t[l],p=r[l];h[0]>0&&i.includes(p[0])||h[1]>0&&i.includes(p[1])||h[2]>0&&i.includes(p[2])||h[3]>0&&i.includes(p[3])||(e[s++]=a,e[s++]=A,e[s++]=l)}return s}_createErasedMesh(e,t){const r=new Mh(e.geometry.clone(),e.material);r.name=`${e.name}(erase)`,r.frustumCulled=e.frustumCulled,r.layers.set(this._firstPersonOnlyLayer);const i=r.geometry,s=i.getAttribute("skinIndex"),o=s instanceof NT?[]:s.array,a=[];for(let p=0;p<o.length;p+=4)a.push([o[p],o[p+1],o[p+2],o[p+3]]);const A=i.getAttribute("skinWeight"),l=A instanceof NT?[]:A.array,c=[];for(let p=0;p<l.length;p+=4)c.push([l[p],l[p+1],l[p+2],l[p+3]]);const u=i.getIndex();if(!u)throw new Error("The geometry doesn't have an index buffer");const f=Array.from(u.array),d=this._excludeTriangles(f,c,a,t),h=[];for(let p=0;p<d;p++)h[p]=f[p];return i.setIndex(h),e.onBeforeRender&&(r.onBeforeRender=e.onBeforeRender),r.bind(new ac(e.skeleton.bones,e.skeleton.boneInverses),new Oe),r}_createHeadlessModelForSkinnedMesh(e,t){const r=[];if(t.skeleton.bones.forEach((s,o)=>{this._isEraseTarget(s)&&r.push(o)}),!r.length){t.layers.enable(this._thirdPersonOnlyLayer),t.layers.enable(this._firstPersonOnlyLayer);return}t.layers.set(this._thirdPersonOnlyLayer);const i=this._createErasedMesh(t,r);e.add(i)}_createHeadlessModel(e){if(e.type==="Group")if(e.layers.set(this._thirdPersonOnlyLayer),this._isEraseTarget(e))e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer));else{const t=new Er;t.name=`_headless_${e.name}`,t.layers.set(this._firstPersonOnlyLayer),e.parent.add(t),e.children.filter(r=>r.type==="SkinnedMesh").forEach(r=>{const i=r;this._createHeadlessModelForSkinnedMesh(t,i)})}else if(e.type==="SkinnedMesh"){const t=e;this._createHeadlessModelForSkinnedMesh(e.parent,t)}else this._isEraseTarget(e)&&(e.layers.set(this._thirdPersonOnlyLayer),e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer)))}_isEraseTarget(e){return e===this.humanoid.getRawBoneNode("head")?!0:e.parent?this._isEraseTarget(e.parent):!1}}aa.DEFAULT_FIRSTPERSON_ONLY_LAYER=9;aa.DEFAULT_THIRDPERSON_ONLY_LAYER=10;const pAe=new Set(["1.0","1.0-beta"]);class gAe{constructor(e){this.parser=e}get name(){return"VRMFirstPersonLoaderPlugin"}afterRoot(e){return Pt(this,void 0,void 0,function*(){const t=e.userData.vrmHumanoid;if(t!==null){if(t===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");e.userData.vrmFirstPerson=yield this._import(e,t)}})}_import(e,t){return Pt(this,void 0,void 0,function*(){if(t==null)return null;const r=yield this._v1Import(e,t);if(r)return r;const i=yield this._v0Import(e,t);return i||null})}_v1Import(e,t){var r,i;return Pt(this,void 0,void 0,function*(){const s=this.parser.json;if(!(((r=s.extensionsUsed)===null||r===void 0?void 0:r.indexOf("VRMC_vrm"))!==-1))return null;const a=(i=s.extensions)===null||i===void 0?void 0:i.VRMC_vrm;if(!a)return null;const A=a.specVersion;if(!pAe.has(A))return console.warn(`VRMFirstPersonLoaderPlugin: Unknown VRMC_vrm specVersion "${A}"`),null;const l=a.firstPerson;if(!l)return null;const c=[],u=yield WN(e);return Array.from(u.entries()).forEach(([f,d])=>{var h;const p=l.meshAnnotations?l.meshAnnotations.find(m=>m.node===f):void 0;c.push({meshes:d,type:(h=p==null?void 0:p.type)!==null&&h!==void 0?h:"both"})}),new aa(t,c)})}_v0Import(e,t){var r;return Pt(this,void 0,void 0,function*(){const i=this.parser.json,s=(r=i.extensions)===null||r===void 0?void 0:r.VRM;if(!s)return null;const o=s.firstPerson;if(!o)return null;const a=[],A=yield WN(e);return Array.from(A.entries()).forEach(([l,c])=>{const u=i.nodes[l],f=o.meshAnnotations?o.meshAnnotations.find(d=>d.mesh===u.mesh):void 0;a.push({meshes:c,type:this._convertV0FlagToV1Type(f==null?void 0:f.firstPersonFlag)})}),new aa(t,a)})}_convertV0FlagToV1Type(e){return e==="FirstPersonOnly"?"firstPersonOnly":e==="ThirdPersonOnly"?"thirdPersonOnly":e==="Auto"?"auto":"both"}}const JN=new z,HN=new z,mAe=new et;class zN extends Er{constructor(e){super(),this.vrmHumanoid=e,this._boneAxesMap=new Map,Object.values(e.humanBones).forEach(t=>{const r=new One(1);r.matrixAutoUpdate=!1,r.material.depthTest=!1,r.material.depthWrite=!1,this.add(r),this._boneAxesMap.set(t,r)})}dispose(){Array.from(this._boneAxesMap.values()).forEach(e=>{e.geometry.dispose(),e.material.dispose()})}updateMatrixWorld(e){Array.from(this._boneAxesMap.entries()).forEach(([t,r])=>{t.node.updateWorldMatrix(!0,!1),t.node.matrixWorld.decompose(JN,mAe,HN);const i=JN.set(.1,.1,.1).divide(HN);r.matrix.copy(t.node.matrixWorld).scale(i)}),super.updateMatrixWorld(e)}}const UI=["hips","spine","chest","upperChest","neck","head","leftEye","rightEye","jaw","leftUpperLeg","leftLowerLeg","leftFoot","leftToes","rightUpperLeg","rightLowerLeg","rightFoot","rightToes","leftShoulder","leftUpperArm","leftLowerArm","leftHand","rightShoulder","rightUpperArm","rightLowerArm","rightHand","leftThumbMetacarpal","leftThumbProximal","leftThumbDistal","leftIndexProximal","leftIndexIntermediate","leftIndexDistal","leftMiddleProximal","leftMiddleIntermediate","leftMiddleDistal","leftRingProximal","leftRingIntermediate","leftRingDistal","leftLittleProximal","leftLittleIntermediate","leftLittleDistal","rightThumbMetacarpal","rightThumbProximal","rightThumbDistal","rightIndexProximal","rightIndexIntermediate","rightIndexDistal","rightMiddleProximal","rightMiddleIntermediate","rightMiddleDistal","rightRingProximal","rightRingIntermediate","rightRingDistal","rightLittleProximal","rightLittleIntermediate","rightLittleDistal"],Im={Hips:"hips",Spine:"spine",Chest:"chest",UpperChest:"upperChest",Neck:"neck",Head:"head",LeftEye:"leftEye",RightEye:"rightEye",Jaw:"jaw",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",LeftToes:"leftToes",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",RightToes:"rightToes",LeftShoulder:"leftShoulder",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightShoulder:"rightShoulder",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand",LeftThumbMetacarpal:"leftThumbMetacarpal",LeftThumbProximal:"leftThumbProximal",LeftThumbDistal:"leftThumbDistal",LeftIndexProximal:"leftIndexProximal",LeftIndexIntermediate:"leftIndexIntermediate",LeftIndexDistal:"leftIndexDistal",LeftMiddleProximal:"leftMiddleProximal",LeftMiddleIntermediate:"leftMiddleIntermediate",LeftMiddleDistal:"leftMiddleDistal",LeftRingProximal:"leftRingProximal",LeftRingIntermediate:"leftRingIntermediate",LeftRingDistal:"leftRingDistal",LeftLittleProximal:"leftLittleProximal",LeftLittleIntermediate:"leftLittleIntermediate",LeftLittleDistal:"leftLittleDistal",RightThumbMetacarpal:"rightThumbMetacarpal",RightThumbProximal:"rightThumbProximal",RightThumbDistal:"rightThumbDistal",RightIndexProximal:"rightIndexProximal",RightIndexIntermediate:"rightIndexIntermediate",RightIndexDistal:"rightIndexDistal",RightMiddleProximal:"rightMiddleProximal",RightMiddleIntermediate:"rightMiddleIntermediate",RightMiddleDistal:"rightMiddleDistal",RightRingProximal:"rightRingProximal",RightRingIntermediate:"rightRingIntermediate",RightRingDistal:"rightRingDistal",RightLittleProximal:"rightLittleProximal",RightLittleIntermediate:"rightLittleIntermediate",RightLittleDistal:"rightLittleDistal"},hG={hips:null,spine:"hips",chest:"spine",upperChest:"chest",neck:"upperChest",head:"neck",leftEye:"head",rightEye:"head",jaw:"head",leftUpperLeg:"hips",leftLowerLeg:"leftUpperLeg",leftFoot:"leftLowerLeg",leftToes:"leftFoot",rightUpperLeg:"hips",rightLowerLeg:"rightUpperLeg",rightFoot:"rightLowerLeg",rightToes:"rightFoot",leftShoulder:"upperChest",leftUpperArm:"leftShoulder",leftLowerArm:"leftUpperArm",leftHand:"leftLowerArm",rightShoulder:"upperChest",rightUpperArm:"rightShoulder",rightLowerArm:"rightUpperArm",rightHand:"rightLowerArm",leftThumbMetacarpal:"leftHand",leftThumbProximal:"leftThumbMetacarpal",leftThumbDistal:"leftThumbProximal",leftIndexProximal:"leftHand",leftIndexIntermediate:"leftIndexProximal",leftIndexDistal:"leftIndexIntermediate",leftMiddleProximal:"leftHand",leftMiddleIntermediate:"leftMiddleProximal",leftMiddleDistal:"leftMiddleIntermediate",leftRingProximal:"leftHand",leftRingIntermediate:"leftRingProximal",leftRingDistal:"leftRingIntermediate",leftLittleProximal:"leftHand",leftLittleIntermediate:"leftLittleProximal",leftLittleDistal:"leftLittleIntermediate",rightThumbMetacarpal:"rightHand",rightThumbProximal:"rightThumbMetacarpal",rightThumbDistal:"rightThumbProximal",rightIndexProximal:"rightHand",rightIndexIntermediate:"rightIndexProximal",rightIndexDistal:"rightIndexIntermediate",rightMiddleProximal:"rightHand",rightMiddleIntermediate:"rightMiddleProximal",rightMiddleDistal:"rightMiddleIntermediate",rightRingProximal:"rightHand",rightRingIntermediate:"rightRingProximal",rightRingDistal:"rightRingIntermediate",rightLittleProximal:"rightHand",rightLittleIntermediate:"rightLittleProximal",rightLittleDistal:"rightLittleIntermediate"};function pG(n){return n.invert?n.invert():n.inverse(),n}const mc=new z,vc=new et;class IE{constructor(e){this.humanBones=e,this.restPose=this.getAbsolutePose()}getAbsolutePose(){const e={};return Object.keys(this.humanBones).forEach(t=>{const r=t,i=this.getBoneNode(r);i&&(mc.copy(i.position),vc.copy(i.quaternion),e[r]={position:mc.toArray(),rotation:vc.toArray()})}),e}getPose(){const e={};return Object.keys(this.humanBones).forEach(t=>{const r=t,i=this.getBoneNode(r);if(!i)return;mc.set(0,0,0),vc.identity();const s=this.restPose[r];s!=null&&s.position&&mc.fromArray(s.position).negate(),s!=null&&s.rotation&&pG(vc.fromArray(s.rotation)),mc.add(i.position),vc.premultiply(i.quaternion),e[r]={position:mc.toArray(),rotation:vc.toArray()}}),e}setPose(e){Object.entries(e).forEach(([t,r])=>{const i=t,s=this.getBoneNode(i);if(!s)return;const o=this.restPose[i];o&&(r!=null&&r.position&&(s.position.fromArray(r.position),o.position&&s.position.add(mc.fromArray(o.position))),r!=null&&r.rotation&&(s.quaternion.fromArray(r.rotation),o.rotation&&s.quaternion.multiply(vc.fromArray(o.rotation))))})}resetPose(){Object.entries(this.restPose).forEach(([e,t])=>{const r=this.getBoneNode(e);r&&(t!=null&&t.position&&r.position.fromArray(t.position),t!=null&&t.rotation&&r.quaternion.fromArray(t.rotation))})}getBone(e){var t;return(t=this.humanBones[e])!==null&&t!==void 0?t:void 0}getBoneNode(e){var t,r;return(r=(t=this.humanBones[e])===null||t===void 0?void 0:t.node)!==null&&r!==void 0?r:null}}const vAe=new z,yAe=new et,BAe=new z;class dw extends IE{constructor(e){const{rigBones:t,root:r,parentWorldRotations:i,boneRotations:s}=dw._setupTransforms(e);super(t),this.original=e,this.root=r,this._parentWorldRotations=i,this._boneRotations=s}static _setupTransforms(e){const t=new kt;t.name="VRMHumanoidRig";const r={},i={},s={};UI.forEach(A=>{const l=e.getBoneNode(A);if(l){const c=new z,u=new et;l.updateWorldMatrix(!0,!1),l.matrixWorld.decompose(c,u,vAe),r[A]=c,i[A]=u,s[A]=l.quaternion.clone()}});const o={},a={};return UI.forEach(A=>{var l;const c=e.getBoneNode(A);if(c){const u=r[A];let f=A,d,h;for(;d==null&&(f=hG[f],f!=null);)d=r[f],h=i[f];const p=new kt;p.name="Normalized_"+c.name,(f?(l=a[f])===null||l===void 0?void 0:l.node:t).add(p),p.position.copy(u),d&&p.position.sub(d),a[A]={node:p},o[A]=h??new et}}),{rigBones:a,root:t,parentWorldRotations:o,boneRotations:s}}update(){UI.forEach(e=>{const t=this.original.getBoneNode(e);if(t!=null){const r=this.getBoneNode(e),i=this._parentWorldRotations[e],s=yAe.copy(i).invert(),o=this._boneRotations[e];if(t.quaternion.copy(r.quaternion).multiply(i).premultiply(s).multiply(o),e==="hips"){const a=r.getWorldPosition(BAe);t.parent.updateWorldMatrix(!0,!1);const A=t.parent.matrixWorld,l=a.applyMatrix4(A.invert());t.position.copy(l)}}})}}class hw{constructor(e,t){var r;this.autoUpdateHumanBones=(r=t==null?void 0:t.autoUpdateHumanBones)!==null&&r!==void 0?r:!0,this._rawHumanBones=new IE(e),this._normalizedHumanBones=new dw(this._rawHumanBones)}get restPose(){return console.warn("VRMHumanoid: restPose is deprecated. Use either rawRestPose or normalizedRestPose instead."),this.rawRestPose}get rawRestPose(){return this._rawHumanBones.restPose}get normalizedRestPose(){return this._normalizedHumanBones.restPose}get humanBones(){return this._rawHumanBones.humanBones}get rawHumanBones(){return this._rawHumanBones.humanBones}get normalizedHumanBones(){return this._normalizedHumanBones.humanBones}get normalizedHumanBonesRoot(){return this._normalizedHumanBones.root}copy(e){return this.autoUpdateHumanBones=e.autoUpdateHumanBones,this._rawHumanBones=new IE(e.humanBones),this._normalizedHumanBones=new dw(this._rawHumanBones),this}clone(){return new hw(this.humanBones,{autoUpdateHumanBones:this.autoUpdateHumanBones}).copy(this)}getAbsolutePose(){return console.warn("VRMHumanoid: getAbsolutePose() is deprecated. Use either getRawAbsolutePose() or getNormalizedAbsolutePose() instead."),this.getRawAbsolutePose()}getRawAbsolutePose(){return this._rawHumanBones.getAbsolutePose()}getNormalizedAbsolutePose(){return this._normalizedHumanBones.getAbsolutePose()}getPose(){return console.warn("VRMHumanoid: getPose() is deprecated. Use either getRawPose() or getNormalizedPose() instead."),this.getRawPose()}getRawPose(){return this._rawHumanBones.getPose()}getNormalizedPose(){return this._normalizedHumanBones.getPose()}setPose(e){return console.warn("VRMHumanoid: setPose() is deprecated. Use either setRawPose() or setNormalizedPose() instead."),this.setRawPose(e)}setRawPose(e){return this._rawHumanBones.setPose(e)}setNormalizedPose(e){return this._normalizedHumanBones.setPose(e)}resetPose(){return console.warn("VRMHumanoid: resetPose() is deprecated. Use either resetRawPose() or resetNormalizedPose() instead."),this.resetRawPose()}resetRawPose(){return this._rawHumanBones.resetPose()}resetNormalizedPose(){return this._normalizedHumanBones.resetPose()}getBone(e){return console.warn("VRMHumanoid: getBone() is deprecated. Use either getRawBone() or getNormalizedBone() instead."),this.getRawBone(e)}getRawBone(e){return this._rawHumanBones.getBone(e)}getNormalizedBone(e){return this._normalizedHumanBones.getBone(e)}getBoneNode(e){return console.warn("VRMHumanoid: getBoneNode() is deprecated. Use either getRawBoneNode() or getNormalizedBoneNode() instead."),this.getRawBoneNode(e)}getRawBoneNode(e){return this._rawHumanBones.getBoneNode(e)}getNormalizedBoneNode(e){return this._normalizedHumanBones.getBoneNode(e)}update(){this.autoUpdateHumanBones&&this._normalizedHumanBones.update()}}const wAe={Hips:"hips",Spine:"spine",Head:"head",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand"},CAe=new Set(["1.0","1.0-beta"]),XN={leftThumbProximal:"leftThumbMetacarpal",leftThumbIntermediate:"leftThumbProximal",rightThumbProximal:"rightThumbMetacarpal",rightThumbIntermediate:"rightThumbProximal"};class bAe{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot,this.autoUpdateHumanBones=t==null?void 0:t.autoUpdateHumanBones}get name(){return"VRMHumanoidLoaderPlugin"}afterRoot(e){return Pt(this,void 0,void 0,function*(){e.userData.vrmHumanoid=yield this._import(e)})}_import(e){return Pt(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t)return t;const r=yield this._v0Import(e);return r||null})}_v1Import(e){var t,r;return Pt(this,void 0,void 0,function*(){const i=this.parser.json;if(!(((t=i.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const o=(r=i.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(!o)return null;const a=o.specVersion;if(!CAe.has(a))return console.warn(`VRMHumanoidLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const A=o.humanoid;if(!A)return null;const l=A.humanBones.leftThumbIntermediate!=null||A.humanBones.rightThumbIntermediate!=null,c={};A.humanBones!=null&&(yield Promise.all(Object.entries(A.humanBones).map(([f,d])=>Pt(this,void 0,void 0,function*(){let h=f;const p=d.node;if(l){const g=XN[h];g!=null&&(h=g)}const m=yield this.parser.getDependency("node",p);if(m==null){console.warn(`A glTF node bound to the humanoid bone ${h} (index = ${p}) does not exist`);return}c[h]={node:m}}))));const u=new hw(this._ensureRequiredBonesExist(c),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(e.scene.add(u.normalizedHumanBonesRoot),this.helperRoot){const f=new zN(u);this.helperRoot.add(f),f.renderOrder=this.helperRoot.renderOrder}return u})}_v0Import(e){var t;return Pt(this,void 0,void 0,function*(){const i=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!i)return null;const s=i.humanoid;if(!s)return null;const o={};s.humanBones!=null&&(yield Promise.all(s.humanBones.map(A=>Pt(this,void 0,void 0,function*(){const l=A.bone,c=A.node;if(l==null||c==null)return;const u=yield this.parser.getDependency("node",c);if(u==null){console.warn(`A glTF node bound to the humanoid bone ${l} (index = ${c}) does not exist`);return}const f=XN[l],d=f??l;if(o[d]!=null){console.warn(`Multiple bone entries for ${d} detected (index = ${c}), ignoring duplicated entries.`);return}o[d]={node:u}}))));const a=new hw(this._ensureRequiredBonesExist(o),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(e.scene.add(a.normalizedHumanBonesRoot),this.helperRoot){const A=new zN(a);this.helperRoot.add(A),A.renderOrder=this.helperRoot.renderOrder}return a})}_ensureRequiredBonesExist(e){const t=Object.values(wAe).filter(r=>e[r]==null);if(t.length>0)throw new Error(`VRMHumanoidLoaderPlugin: These humanoid bones are required but not exist: ${t.join(", ")}`);return e}}class YN extends zt{constructor(){super(),this._currentTheta=0,this._currentRadius=0,this.theta=0,this.radius=0,this._currentTheta=0,this._currentRadius=0,this._attrPos=new st(new Float32Array(65*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new st(new Uint16Array(3*63),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentTheta!==this.theta&&(this._currentTheta=this.theta,e=!0),this._currentRadius!==this.radius&&(this._currentRadius=this.radius,e=!0),e&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,0,0,0);for(let e=0;e<64;e++){const t=e/63*this._currentTheta;this._attrPos.setXYZ(e+1,this._currentRadius*Math.sin(t),0,this._currentRadius*Math.cos(t))}this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<63;e++)this._attrIndex.setXYZ(e*3,0,e+1,e+2);this._attrIndex.needsUpdate=!0}}class xAe extends zt{constructor(){super(),this.radius=0,this._currentRadius=0,this.tail=new z,this._currentTail=new z,this._attrPos=new st(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new st(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this.radius&&(this._currentRadius=this.radius,e=!0),this._currentTail.equals(this.tail)||(this._currentTail.copy(this.tail),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}}const Hv=new et,KN=new et,Rp=new z,jN=new z,$N=Math.sqrt(2)/2,IAe=new et(0,0,-$N,$N),FAe=new z(0,1,0);class EAe extends Er{constructor(e){super(),this.matrixAutoUpdate=!1,this.vrmLookAt=e;{const t=new YN;t.radius=.5;const r=new is({color:65280,transparent:!0,opacity:.5,side:Ii,depthTest:!1,depthWrite:!1});this._meshPitch=new Tn(t,r),this.add(this._meshPitch)}{const t=new YN;t.radius=.5;const r=new is({color:16711680,transparent:!0,opacity:.5,side:Ii,depthTest:!1,depthWrite:!1});this._meshYaw=new Tn(t,r),this.add(this._meshYaw)}{const t=new xAe;t.radius=.1;const r=new NA({color:16777215,depthTest:!1,depthWrite:!1});this._lineTarget=new a0(t,r),this._lineTarget.frustumCulled=!1,this.add(this._lineTarget)}}dispose(){this._meshYaw.geometry.dispose(),this._meshYaw.material.dispose(),this._meshPitch.geometry.dispose(),this._meshPitch.material.dispose(),this._lineTarget.geometry.dispose(),this._lineTarget.material.dispose()}updateMatrixWorld(e){const t=Dt.DEG2RAD*this.vrmLookAt.yaw;this._meshYaw.geometry.theta=t,this._meshYaw.geometry.update();const r=Dt.DEG2RAD*this.vrmLookAt.pitch;this._meshPitch.geometry.theta=r,this._meshPitch.geometry.update(),this.vrmLookAt.getLookAtWorldPosition(Rp),this.vrmLookAt.getLookAtWorldQuaternion(Hv),Hv.multiply(this.vrmLookAt.getFaceFrontQuaternion(KN)),this._meshYaw.position.copy(Rp),this._meshYaw.quaternion.copy(Hv),this._meshPitch.position.copy(Rp),this._meshPitch.quaternion.copy(Hv),this._meshPitch.quaternion.multiply(KN.setFromAxisAngle(FAe,t)),this._meshPitch.quaternion.multiply(IAe);const{target:i,autoUpdate:s}=this.vrmLookAt;i!=null&&s&&(i.getWorldPosition(jN).sub(Rp),this._lineTarget.geometry.tail.copy(jN),this._lineTarget.geometry.update(),this._lineTarget.position.copy(Rp)),super.updateMatrixWorld(e)}}const UAe=new z,_Ae=new z;function FE(n,e){return n.matrixWorld.decompose(UAe,e,_Ae),e}function $y(n){return[Math.atan2(-n.z,n.x),Math.atan2(n.y,Math.sqrt(n.x*n.x+n.z*n.z))]}function qN(n){const e=Math.round(n/2/Math.PI);return n-2*Math.PI*e}const ek=new z(0,0,1),SAe=new z,QAe=new z,RAe=new z,MAe=new et,_I=new et,tk=new et,TAe=new et,SI=new Jr;class nb{constructor(e,t){this.offsetFromHeadBone=new z,this.autoUpdate=!0,this.faceFront=new z(0,0,1),this.humanoid=e,this.applier=t,this._yaw=0,this._pitch=0,this._needsUpdate=!0,this._restHeadWorldQuaternion=this.getLookAtWorldQuaternion(new et)}get yaw(){return this._yaw}set yaw(e){this._yaw=e,this._needsUpdate=!0}get pitch(){return this._pitch}set pitch(e){this._pitch=e,this._needsUpdate=!0}get euler(){return console.warn("VRMLookAt: euler is deprecated. use getEuler() instead."),this.getEuler(new Jr)}getEuler(e){return e.set(Dt.DEG2RAD*this._pitch,Dt.DEG2RAD*this._yaw,0,"YXZ")}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMLookAt: humanoid must be same in order to copy");return this.offsetFromHeadBone.copy(e.offsetFromHeadBone),this.applier=e.applier,this.autoUpdate=e.autoUpdate,this.target=e.target,this.faceFront.copy(e.faceFront),this}clone(){return new nb(this.humanoid,this.applier).copy(this)}reset(){this._yaw=0,this._pitch=0,this._needsUpdate=!0}getLookAtWorldPosition(e){const t=this.humanoid.getRawBoneNode("head");return e.copy(this.offsetFromHeadBone).applyMatrix4(t.matrixWorld)}getLookAtWorldQuaternion(e){const t=this.humanoid.getRawBoneNode("head");return FE(t,e)}getFaceFrontQuaternion(e){if(this.faceFront.distanceToSquared(ek)<.01)return e.copy(this._restHeadWorldQuaternion).invert();const[t,r]=$y(this.faceFront);return SI.set(0,.5*Math.PI+t,r,"YZX"),e.setFromEuler(SI).premultiply(TAe.copy(this._restHeadWorldQuaternion).invert())}getLookAtWorldDirection(e){return this.getLookAtWorldQuaternion(_I),this.getFaceFrontQuaternion(tk),e.copy(ek).applyQuaternion(_I).applyQuaternion(tk).applyEuler(this.getEuler(SI))}lookAt(e){const t=MAe.copy(this._restHeadWorldQuaternion).multiply(pG(this.getLookAtWorldQuaternion(_I))),r=this.getLookAtWorldPosition(QAe),i=RAe.copy(e).sub(r).applyQuaternion(t).normalize(),[s,o]=$y(this.faceFront),[a,A]=$y(i),l=qN(a-s),c=qN(o-A);this._yaw=Dt.RAD2DEG*l,this._pitch=Dt.RAD2DEG*c,this._needsUpdate=!0}update(e){this.target!=null&&this.autoUpdate&&this.lookAt(this.target.getWorldPosition(SAe)),this._needsUpdate&&(this._needsUpdate=!1,this.applier.applyYawPitch(this._yaw,this._pitch))}}nb.EULER_ORDER="YXZ";const NAe=new z(0,0,1),Ho=new et,Af=new et,ws=new Jr(0,0,0,"YXZ");class qy{constructor(e,t,r,i,s){this.humanoid=e,this.rangeMapHorizontalInner=t,this.rangeMapHorizontalOuter=r,this.rangeMapVerticalDown=i,this.rangeMapVerticalUp=s,this.faceFront=new z(0,0,1),this._restQuatLeftEye=new et,this._restQuatRightEye=new et,this._restLeftEyeParentWorldQuat=new et,this._restRightEyeParentWorldQuat=new et;const o=this.humanoid.getRawBoneNode("leftEye"),a=this.humanoid.getRawBoneNode("rightEye");o&&(this._restQuatLeftEye.copy(o.quaternion),FE(o.parent,this._restLeftEyeParentWorldQuat)),a&&(this._restQuatRightEye.copy(a.quaternion),FE(a.parent,this._restRightEyeParentWorldQuat))}applyYawPitch(e,t){const r=this.humanoid.getRawBoneNode("leftEye"),i=this.humanoid.getRawBoneNode("rightEye"),s=this.humanoid.getNormalizedBoneNode("leftEye"),o=this.humanoid.getNormalizedBoneNode("rightEye");r&&(t<0?ws.x=-Dt.DEG2RAD*this.rangeMapVerticalDown.map(-t):ws.x=Dt.DEG2RAD*this.rangeMapVerticalUp.map(t),e<0?ws.y=-Dt.DEG2RAD*this.rangeMapHorizontalInner.map(-e):ws.y=Dt.DEG2RAD*this.rangeMapHorizontalOuter.map(e),Ho.setFromEuler(ws),this._getWorldFaceFrontQuat(Af),s.quaternion.copy(Af).multiply(Ho).multiply(Af.invert()),Ho.copy(this._restLeftEyeParentWorldQuat),r.quaternion.copy(s.quaternion).multiply(Ho).premultiply(Ho.invert()).multiply(this._restQuatLeftEye)),i&&(t<0?ws.x=-Dt.DEG2RAD*this.rangeMapVerticalDown.map(-t):ws.x=Dt.DEG2RAD*this.rangeMapVerticalUp.map(t),e<0?ws.y=-Dt.DEG2RAD*this.rangeMapHorizontalOuter.map(-e):ws.y=Dt.DEG2RAD*this.rangeMapHorizontalInner.map(e),Ho.setFromEuler(ws),this._getWorldFaceFrontQuat(Af),o.quaternion.copy(Af).multiply(Ho).multiply(Af.invert()),Ho.copy(this._restRightEyeParentWorldQuat),i.quaternion.copy(o.quaternion).multiply(Ho).premultiply(Ho.invert()).multiply(this._restQuatRightEye))}lookAt(e){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const t=Dt.RAD2DEG*e.y,r=Dt.RAD2DEG*e.x;this.applyYawPitch(t,r)}_getWorldFaceFrontQuat(e){if(this.faceFront.distanceToSquared(NAe)<.01)return e.identity();const[t,r]=$y(this.faceFront);return ws.set(0,.5*Math.PI+t,r,"YZX"),e.setFromEuler(ws)}}qy.type="bone";class EE{constructor(e,t,r,i,s){this.expressions=e,this.rangeMapHorizontalInner=t,this.rangeMapHorizontalOuter=r,this.rangeMapVerticalDown=i,this.rangeMapVerticalUp=s}applyYawPitch(e,t){t<0?(this.expressions.setValue("lookDown",0),this.expressions.setValue("lookUp",this.rangeMapVerticalUp.map(-t))):(this.expressions.setValue("lookUp",0),this.expressions.setValue("lookDown",this.rangeMapVerticalDown.map(t))),e<0?(this.expressions.setValue("lookLeft",0),this.expressions.setValue("lookRight",this.rangeMapHorizontalOuter.map(-e))):(this.expressions.setValue("lookRight",0),this.expressions.setValue("lookLeft",this.rangeMapHorizontalOuter.map(e)))}lookAt(e){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const t=Dt.RAD2DEG*e.y,r=Dt.RAD2DEG*e.x;this.applyYawPitch(t,r)}}EE.type="expression";class nk{constructor(e,t){this.inputMaxValue=e,this.outputScale=t}map(e){return this.outputScale*dG(e/this.inputMaxValue)}}const kAe=new Set(["1.0","1.0-beta"]);class DAe{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}get name(){return"VRMLookAtLoaderPlugin"}afterRoot(e){return Pt(this,void 0,void 0,function*(){const t=e.userData.vrmHumanoid;if(t===null)return;if(t===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");const r=e.userData.vrmExpressionManager;if(r!==null){if(r===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmExpressionManager is undefined. VRMExpressionLoaderPlugin have to be used first");e.userData.vrmLookAt=yield this._import(e,t,r)}})}_import(e,t,r){return Pt(this,void 0,void 0,function*(){if(t==null||r==null)return null;const i=yield this._v1Import(e,t,r);if(i)return i;const s=yield this._v0Import(e,t,r);return s||null})}_v1Import(e,t,r){var i,s,o;return Pt(this,void 0,void 0,function*(){const a=this.parser.json;if(!(((i=a.extensionsUsed)===null||i===void 0?void 0:i.indexOf("VRMC_vrm"))!==-1))return null;const l=(s=a.extensions)===null||s===void 0?void 0:s.VRMC_vrm;if(!l)return null;const c=l.specVersion;if(!kAe.has(c))return console.warn(`VRMLookAtLoaderPlugin: Unknown VRMC_vrm specVersion "${c}"`),null;const u=l.lookAt;if(!u)return null;const f=u.type==="expression"?1:10,d=this._v1ImportRangeMap(u.rangeMapHorizontalInner,f),h=this._v1ImportRangeMap(u.rangeMapHorizontalOuter,f),p=this._v1ImportRangeMap(u.rangeMapVerticalDown,f),m=this._v1ImportRangeMap(u.rangeMapVerticalUp,f);let g;u.type==="expression"?g=new EE(r,d,h,p,m):g=new qy(t,d,h,p,m);const v=this._importLookAt(t,g);return v.offsetFromHeadBone.fromArray((o=u.offsetFromHeadBone)!==null&&o!==void 0?o:[0,.06,0]),v})}_v1ImportRangeMap(e,t){var r,i;return new nk((r=e==null?void 0:e.inputMaxValue)!==null&&r!==void 0?r:90,(i=e==null?void 0:e.outputScale)!==null&&i!==void 0?i:t)}_v0Import(e,t,r){var i,s,o,a;return Pt(this,void 0,void 0,function*(){const l=(i=this.parser.json.extensions)===null||i===void 0?void 0:i.VRM;if(!l)return null;const c=l.firstPerson;if(!c)return null;const u=c.lookAtTypeName==="BlendShape"?1:10,f=this._v0ImportDegreeMap(c.lookAtHorizontalInner,u),d=this._v0ImportDegreeMap(c.lookAtHorizontalOuter,u),h=this._v0ImportDegreeMap(c.lookAtVerticalDown,u),p=this._v0ImportDegreeMap(c.lookAtVerticalUp,u);let m;c.lookAtTypeName==="BlendShape"?m=new EE(r,f,d,h,p):m=new qy(t,f,d,h,p);const g=this._importLookAt(t,m);return c.firstPersonBoneOffset?g.offsetFromHeadBone.set((s=c.firstPersonBoneOffset.x)!==null&&s!==void 0?s:0,(o=c.firstPersonBoneOffset.y)!==null&&o!==void 0?o:.06,-((a=c.firstPersonBoneOffset.z)!==null&&a!==void 0?a:0)):g.offsetFromHeadBone.set(0,.06,0),g.faceFront.set(0,0,-1),m instanceof qy&&m.faceFront.set(0,0,-1),g})}_v0ImportDegreeMap(e,t){var r,i;const s=e==null?void 0:e.curve;return JSON.stringify(s)!=="[0,0,0,1,1,1,1,0]"&&console.warn("Curves of LookAtDegreeMap defined in VRM 0.0 are not supported"),new nk((r=e==null?void 0:e.xRange)!==null&&r!==void 0?r:90,(i=e==null?void 0:e.yRange)!==null&&i!==void 0?i:t)}_importLookAt(e,t){const r=new nb(e,t);if(this.helperRoot){const i=new EAe(r);this.helperRoot.add(i),i.renderOrder=this.helperRoot.renderOrder}return r}}function VAe(n,e){return typeof n!="string"||n===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(n)&&(e=e.replace(/(^https?:\/\/[^/]+).*/i,"$1")),/^(https?:)?\/\//i.test(n)||/^data:.*,.*$/i.test(n)||/^blob:.*$/i.test(n)?n:e+n)}const LAe=new Set(["1.0","1.0-beta"]);class PAe{constructor(e,t){var r,i,s;this.parser=e,this.needThumbnailImage=(r=t==null?void 0:t.needThumbnailImage)!==null&&r!==void 0?r:!0,this.acceptLicenseUrls=(i=t==null?void 0:t.acceptLicenseUrls)!==null&&i!==void 0?i:["https://vrm.dev/licenses/1.0/"],this.acceptV0Meta=(s=t==null?void 0:t.acceptV0Meta)!==null&&s!==void 0?s:!0}get name(){return"VRMMetaLoaderPlugin"}afterRoot(e){return Pt(this,void 0,void 0,function*(){e.userData.vrmMeta=yield this._import(e)})}_import(e){return Pt(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const r=yield this._v0Import(e);return r??null})}_v1Import(e){var t,r,i;return Pt(this,void 0,void 0,function*(){const s=this.parser.json;if(!(((t=s.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const a=(r=s.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(a==null)return null;const A=a.specVersion;if(!LAe.has(A))return console.warn(`VRMMetaLoaderPlugin: Unknown VRMC_vrm specVersion "${A}"`),null;const l=a.meta;if(!l)return null;const c=l.licenseUrl;if(!new Set(this.acceptLicenseUrls).has(c))throw new Error(`VRMMetaLoaderPlugin: The license url "${c}" is not accepted`);let f;return this.needThumbnailImage&&l.thumbnailImage!=null&&(f=(i=yield this._extractGLTFImage(l.thumbnailImage))!==null&&i!==void 0?i:void 0),{metaVersion:"1",name:l.name,version:l.version,authors:l.authors,copyrightInformation:l.copyrightInformation,contactInformation:l.contactInformation,references:l.references,thirdPartyLicenses:l.thirdPartyLicenses,thumbnailImage:f,licenseUrl:l.licenseUrl,avatarPermission:l.avatarPermission,allowExcessivelyViolentUsage:l.allowExcessivelyViolentUsage,allowExcessivelySexualUsage:l.allowExcessivelySexualUsage,commercialUsage:l.commercialUsage,allowPoliticalOrReligiousUsage:l.allowPoliticalOrReligiousUsage,allowAntisocialOrHateUsage:l.allowAntisocialOrHateUsage,creditNotation:l.creditNotation,allowRedistribution:l.allowRedistribution,modification:l.modification,otherLicenseUrl:l.otherLicenseUrl}})}_v0Import(e){var t;return Pt(this,void 0,void 0,function*(){const i=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!i)return null;const s=i.meta;if(!s)return null;if(!this.acceptV0Meta)throw new Error("VRMMetaLoaderPlugin: Attempted to load VRM0.0 meta but acceptV0Meta is false");let o;return this.needThumbnailImage&&s.texture!=null&&s.texture!==-1&&(o=yield this.parser.getDependency("texture",s.texture)),{metaVersion:"0",allowedUserName:s.allowedUserName,author:s.author,commercialUssageName:s.commercialUssageName,contactInformation:s.contactInformation,licenseName:s.licenseName,otherLicenseUrl:s.otherLicenseUrl,otherPermissionUrl:s.otherPermissionUrl,reference:s.reference,sexualUssageName:s.sexualUssageName,texture:o??void 0,title:s.title,version:s.version,violentUssageName:s.violentUssageName}})}_extractGLTFImage(e){var t;return Pt(this,void 0,void 0,function*(){const i=(t=this.parser.json.images)===null||t===void 0?void 0:t[e];if(i==null)return console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${e}] of glTF as a thumbnail but the image doesn't exist`),null;let s=i.uri;if(i.bufferView!=null){const a=yield this.parser.getDependency("bufferView",i.bufferView),A=new Blob([a],{type:i.mimeType});s=URL.createObjectURL(A)}return s==null?(console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${e}] of glTF as a thumbnail but the image couldn't load properly`),null):yield new AZ().loadAsync(VAe(s,this.parser.options.path)).catch(a=>(console.error(a),console.warn("VRMMetaLoaderPlugin: Failed to load a thumbnail image"),null))})}}class WAe{constructor(e){this.scene=e.scene,this.meta=e.meta,this.humanoid=e.humanoid,this.expressionManager=e.expressionManager,this.firstPerson=e.firstPerson,this.lookAt=e.lookAt}update(e){this.humanoid.update(),this.lookAt&&this.lookAt.update(e),this.expressionManager&&this.expressionManager.update()}}class OAe extends WAe{constructor(e){super(e),this.materials=e.materials,this.springBoneManager=e.springBoneManager,this.nodeConstraintManager=e.nodeConstraintManager}update(e){super.update(e),this.nodeConstraintManager&&this.nodeConstraintManager.update(),this.springBoneManager&&this.springBoneManager.update(e),this.materials&&this.materials.forEach(t=>{t.update&&t.update(e)})}}function zv(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})}/*!
 * @pixiv/three-vrm-materials-mtoon v1.0.9
 * MToon (toon material) module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-materials-mtoon is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */function Wc(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})}var ZAe=`// #define PHONG

varying vec3 vViewPosition;

#ifndef FLAT_SHADED
  varying vec3 vNormal;
#endif

#include <common>

// #include <uv_pars_vertex>
#ifdef MTOON_USE_UV
  varying vec2 vUv;
  uniform mat3 uvTransform;
#endif

#include <uv2_pars_vertex>
// #include <displacementmap_pars_vertex>
// #include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

#ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
  uniform sampler2D outlineWidthMultiplyTexture;
  uniform mat3 outlineWidthMultiplyTextureUvTransform;
#endif

uniform float outlineWidthFactor;

void main() {

  // #include <uv_vertex>
  #ifdef MTOON_USE_UV
    vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
  #endif

  #include <uv2_vertex>
  #include <color_vertex>

  #include <beginnormal_vertex>
  #include <morphnormal_vertex>
  #include <skinbase_vertex>
  #include <skinnormal_vertex>

  // we need this to compute the outline properly
  objectNormal = normalize( objectNormal );

  #include <defaultnormal_vertex>

  #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED
    vNormal = normalize( transformedNormal );
  #endif

  #include <begin_vertex>

  #include <morphtarget_vertex>
  #include <skinning_vertex>
  // #include <displacementmap_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>
  #include <clipping_planes_vertex>

  vViewPosition = - mvPosition.xyz;

  float outlineTex = 1.0;

  #ifdef OUTLINE
    #ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
      vec2 outlineWidthMultiplyTextureUv = ( outlineWidthMultiplyTextureUvTransform * vec3( vUv, 1 ) ).xy;
      outlineTex = texture2D( outlineWidthMultiplyTexture, outlineWidthMultiplyTextureUv ).g;
    #endif

    #ifdef OUTLINE_WIDTH_WORLD
      float worldNormalLength = length( transformedNormal );
      vec3 outlineOffset = outlineWidthFactor * outlineTex * worldNormalLength * objectNormal;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( outlineOffset + transformed, 1.0 );
    #endif

    #ifdef OUTLINE_WIDTH_SCREEN
      vec3 clipNormal = ( projectionMatrix * modelViewMatrix * vec4( objectNormal, 0.0 ) ).xyz;
      vec2 projectedNormal = normalize( clipNormal.xy );
      projectedNormal.x *= projectionMatrix[ 0 ].x / projectionMatrix[ 1 ].y;
      gl_Position.xy += 2.0 * outlineWidthFactor * outlineTex * projectedNormal.xy;
    #endif

    gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic
  #endif

  #include <worldpos_vertex>
  // #include <envmap_vertex>
  #include <shadowmap_vertex>
  #include <fog_vertex>

}`,GAe=`// #define PHONG

uniform vec3 litFactor;

uniform float opacity;

uniform vec3 shadeColorFactor;
#ifdef USE_SHADEMULTIPLYTEXTURE
  uniform sampler2D shadeMultiplyTexture;
  uniform mat3 shadeMultiplyTextureUvTransform;
#endif

uniform float shadingShiftFactor;
uniform float shadingToonyFactor;

#ifdef USE_SHADINGSHIFTTEXTURE
  uniform sampler2D shadingShiftTexture;
  uniform mat3 shadingShiftTextureUvTransform;
  uniform float shadingShiftTextureScale;
#endif

uniform float giEqualizationFactor;

uniform vec3 parametricRimColorFactor;
#ifdef USE_RIMMULTIPLYTEXTURE
  uniform sampler2D rimMultiplyTexture;
  uniform mat3 rimMultiplyTextureUvTransform;
#endif
uniform float rimLightingMixFactor;
uniform float parametricRimFresnelPowerFactor;
uniform float parametricRimLiftFactor;

#ifdef USE_MATCAPTEXTURE
  uniform vec3 matcapFactor;
  uniform sampler2D matcapTexture;
  uniform mat3 matcapTextureUvTransform;
#endif

uniform vec3 emissive;
uniform float emissiveIntensity;

uniform vec3 outlineColorFactor;
uniform float outlineLightingMixFactor;

#ifdef USE_UVANIMATIONMASKTEXTURE
  uniform sampler2D uvAnimationMaskTexture;
  uniform mat3 uvAnimationMaskTextureUvTransform;
#endif

uniform float uvAnimationScrollXOffset;
uniform float uvAnimationScrollYOffset;
uniform float uvAnimationRotationPhase;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>

// #include <uv_pars_fragment>
#if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
  varying vec2 vUv;
#endif

#include <uv2_pars_fragment>
#include <map_pars_fragment>

#ifdef USE_MAP
  uniform mat3 mapUvTransform;
#endif

// #include <alphamap_pars_fragment>

#if THREE_VRM_THREE_REVISION >= 132
  #include <alphatest_pars_fragment>
#endif

#include <aomap_pars_fragment>
// #include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>

#ifdef USE_EMISSIVEMAP
  uniform mat3 emissiveMapUvTransform;
#endif

// #include <envmap_common_pars_fragment>
// #include <envmap_pars_fragment>
// #include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>

// #include <bsdfs>
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
  return RECIPROCAL_PI * diffuseColor;
}

#include <lights_pars_begin>

#if THREE_VRM_THREE_REVISION >= 132
  #include <normal_pars_fragment>
#endif

// #include <lights_phong_pars_fragment>
varying vec3 vViewPosition;

#if THREE_VRM_THREE_REVISION < 132
  #ifndef FLAT_SHADED
    varying vec3 vNormal;
  #endif
#endif

struct MToonMaterial {
  vec3 diffuseColor;
  vec3 shadeColor;
  float shadingShift;
};

float linearstep( float a, float b, float t ) {
  return clamp( ( t - a ) / ( b - a ), 0.0, 1.0 );
}

/**
 * Convert NdotL into toon shading factor using shadingShift and shadingToony
 */
float getShading(
  const in float dotNL,
  const in float shadow,
  const in float shadingShift
) {
  float shading = dotNL;
  shading = shading + shadingShift;
  shading = linearstep( -1.0 + shadingToonyFactor, 1.0 - shadingToonyFactor, shading );
  shading *= shadow;
  return shading;
}

/**
 * Mix diffuseColor and shadeColor using shading factor and light color
 */
vec3 getDiffuse(
  const in MToonMaterial material,
  const in float shading,
  in vec3 lightColor
) {
  #ifdef DEBUG_LITSHADERATE
    return vec3( BRDF_Lambert( shading * lightColor ) );
  #endif

  #if THREE_VRM_THREE_REVISION < 132
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      lightColor *= PI;
    #endif
  #endif

  vec3 col = lightColor * BRDF_Lambert( mix( material.shadeColor, material.diffuseColor, shading ) );

  // The "comment out if you want to PBR absolutely" line
  #ifdef V0_COMPAT_SHADE
    col = min( col, material.diffuseColor );
  #endif

  return col;
}

void RE_Direct_MToon( const in IncidentLight directLight, const in GeometricContext geometry, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
  float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
  vec3 irradiance = directLight.color;

  #if THREE_VRM_THREE_REVISION < 132
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      irradiance *= PI;
    #endif
  #endif

  // directSpecular will be used for rim lighting, not an actual specular
  reflectedLight.directSpecular += irradiance;

  irradiance *= dotNL;

  float shading = getShading( dotNL, shadow, material.shadingShift );

  // toon shaded diffuse
  reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
}

void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in GeometricContext geometry, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
  // indirect diffuse will use diffuseColor, no shadeColor involved
  reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

  // directSpecular will be used for rim lighting, not an actual specular
  reflectedLight.directSpecular += irradiance;
}

#define RE_Direct RE_Direct_MToon
#define RE_IndirectDiffuse RE_IndirectDiffuse_MToon
#define Material_LightProbeLOD( material ) (0)

#include <shadowmap_pars_fragment>
// #include <bumpmap_pars_fragment>

// #include <normalmap_pars_fragment>
#ifdef USE_NORMALMAP

  uniform sampler2D normalMap;
  uniform mat3 normalMapUvTransform;
  uniform vec2 normalScale;

#endif

#ifdef OBJECTSPACE_NORMALMAP

  uniform mat3 normalMatrix;

#endif

#if ! defined ( USE_TANGENT ) && defined ( TANGENTSPACE_NORMALMAP )

  // Per-Pixel Tangent Space Normal Mapping
  // http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html

  // three-vrm specific change: it requires \`uv\` as an input in order to support uv scrolls

  // Temporary compat against shader change @ Three.js r126
  // See: #21205, #21307, #21299
  #if THREE_VRM_THREE_REVISION >= 126

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = normalize( surf_norm );

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?
      if ( length( T ) == 0.0 || length( B ) == 0.0 ) {
        return surf_norm;
      }

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );

      return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );

    }

  #else

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {

      // Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      float scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude

      vec3 S = ( q0 * st1.t - q1 * st0.t ) * scale;
      vec3 T = ( - q0 * st1.s + q1 * st0.s ) * scale;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?

      if ( length( S ) == 0.0 || length( T ) == 0.0 ) {
        return surf_norm;
      }

      S = normalize( S );
      T = normalize( T );
      vec3 N = normalize( surf_norm );

      #ifdef DOUBLE_SIDED

        // Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331

        bool frontFacing = dot( cross( S, T ), N ) > 0.0;

        mapN.xy *= ( float( frontFacing ) * 2.0 - 1.0 );

      #else

        mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );

      #endif

      mat3 tsn = mat3( S, T, N );
      return normalize( tsn * mapN );

    }

  #endif

#endif

// #include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

// == post correction ==========================================================
void postCorrection() {
  #include <tonemapping_fragment>
  #include <encodings_fragment>
  #include <fog_fragment>
  #include <premultiplied_alpha_fragment>
  #include <dithering_fragment>
}

// == main procedure ===========================================================
void main() {
  #include <clipping_planes_fragment>

  vec2 uv = vec2(0.5, 0.5);

  #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
    uv = vUv;

    float uvAnimMask = 1.0;
    #ifdef USE_UVANIMATIONMASKTEXTURE
      vec2 uvAnimationMaskTextureUv = ( uvAnimationMaskTextureUvTransform * vec3( uv, 1 ) ).xy;
      uvAnimMask = texture2D( uvAnimationMaskTexture, uvAnimationMaskTextureUv ).b;
    #endif

    uv = uv + vec2( uvAnimationScrollXOffset, uvAnimationScrollYOffset ) * uvAnimMask;
    float uvRotCos = cos( uvAnimationRotationPhase * uvAnimMask );
    float uvRotSin = sin( uvAnimationRotationPhase * uvAnimMask );
    uv = mat2( uvRotCos, -uvRotSin, uvRotSin, uvRotCos ) * ( uv - 0.5 ) + 0.5;
  #endif

  #ifdef DEBUG_UV
    gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
      gl_FragColor = vec4( uv, 0.0, 1.0 );
    #endif
    return;
  #endif

  vec4 diffuseColor = vec4( litFactor, opacity );
  ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
  vec3 totalEmissiveRadiance = emissive * emissiveIntensity;

  #include <logdepthbuf_fragment>

  // #include <map_fragment>
  #ifdef USE_MAP
    vec2 mapUv = ( mapUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      vec4 sampledDiffuseColor = texture2D( map, mapUv );
      #ifdef DECODE_VIDEO_TEXTURE
        sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
      #endif
      diffuseColor *= sampledDiffuseColor;
    #else
      // COMPAT: pre-r137
      vec4 texelColor = texture2D( map, mapUv );
      texelColor = mapTexelToLinear( texelColor );
      diffuseColor *= texelColor;
    #endif
  #endif

  // #include <color_fragment>
  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    diffuseColor.rgb *= vColor;
  #endif

  // #include <alphamap_fragment>

  #include <alphatest_fragment>

  // #include <specularmap_fragment>
  #include <normal_fragment_begin>

  #ifdef OUTLINE
    normal *= -1.0;
  #endif

  // #include <normal_fragment_maps>

  #ifdef OBJECTSPACE_NORMALMAP

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;
    normal = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals

    #ifdef FLIP_SIDED

      normal = - normal;

    #endif

    #ifdef DOUBLE_SIDED

      // Temporary compat against shader change @ Three.js r126
      // See: #21205, #21307, #21299
      #if THREE_VRM_THREE_REVISION >= 126

        normal = normal * faceDirection;

      #else

        normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );

      #endif

    #endif

    normal = normalize( normalMatrix * normal );

  #elif defined( TANGENTSPACE_NORMALMAP )

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;
    vec3 mapN = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;

    #ifdef USE_TANGENT

      normal = normalize( vTBN * mapN );

    #else

      // Temporary compat against shader change @ Three.js r126
      // See: #21205, #21307, #21299
      #if THREE_VRM_THREE_REVISION >= 126

        normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN, faceDirection );

      #else

        normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN );

      #endif

    #endif

  #endif

  // #include <emissivemap_fragment>
  #ifdef USE_EMISSIVEMAP
    vec2 emissiveMapUv = ( emissiveMapUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      totalEmissiveRadiance *= texture2D( emissiveMap, emissiveMapUv ).rgb;
    #else
      // COMPAT: pre-r137
      totalEmissiveRadiance *= emissiveMapTexelToLinear( texture2D( emissiveMap, emissiveMapUv ) ).rgb;
    #endif
  #endif

  #ifdef DEBUG_NORMAL
    gl_FragColor = vec4( 0.5 + 0.5 * normal, 1.0 );
    return;
  #endif

  // -- MToon: lighting --------------------------------------------------------
  // accumulation
  // #include <lights_phong_fragment>
  MToonMaterial material;

  material.diffuseColor = diffuseColor.rgb;

  material.shadeColor = shadeColorFactor;
  #ifdef USE_SHADEMULTIPLYTEXTURE
    vec2 shadeMultiplyTextureUv = ( shadeMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      material.shadeColor *= texture2D( shadeMultiplyTexture, shadeMultiplyTextureUv ).rgb;
    #else
      // COMPAT: pre-r137
      material.shadeColor *= shadeMultiplyTextureTexelToLinear( texture2D( shadeMultiplyTexture, shadeMultiplyTextureUv) ).rgb;
    #endif
  #endif

  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    material.shadeColor.rgb *= vColor;
  #endif

  material.shadingShift = shadingShiftFactor;
  #ifdef USE_SHADINGSHIFTTEXTURE
    vec2 shadingShiftTextureUv = ( shadingShiftTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadingShift += texture2D( shadingShiftTexture, shadingShiftTextureUv ).r * shadingShiftTextureScale;
  #endif

  // #include <lights_fragment_begin>

  // MToon Specific changes:
  // Since we want to take shadows into account of shading instead of irradiance,
  // we had to modify the codes that multiplies the results of shadowmap into color of direct lights.

  GeometricContext geometry;

  geometry.position = - vViewPosition;
  geometry.normal = normal;
  geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

  #ifdef CLEARCOAT

    geometry.clearcoatNormal = clearcoatNormal;

  #endif

  IncidentLight directLight;

  // since these variables will be used in unrolled loop, we have to define in prior
  float shadow;

  #if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

    PointLight pointLight;
    #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
    PointLightShadow pointLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

      pointLight = pointLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getPointLightInfo( pointLight, geometry, directLight );
      #else
        getPointDirectLightIrradiance( pointLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
      pointLightShadow = pointLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

    SpotLight spotLight;
    #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
    SpotLightShadow spotLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

      spotLight = spotLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getSpotLightInfo( spotLight, geometry, directLight );
      #else
        getSpotDirectLightIrradiance( spotLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
      spotLightShadow = spotLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )

    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
    DirectionalLightShadow directionalLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

      directionalLight = directionalLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getDirectionalLightInfo( directionalLight, geometry, directLight );
      #else
        getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
      directionalLightShadow = directionalLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  // #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

  //   RectAreaLight rectAreaLight;

  //   #pragma unroll_loop_start
  //   for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

  //     rectAreaLight = rectAreaLights[ i ];
  //     RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );

  //   }
  //   #pragma unroll_loop_end

  // #endif

  #if defined( RE_IndirectDiffuse )

    vec3 iblIrradiance = vec3( 0.0 );

    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

    #if THREE_VRM_THREE_REVISION >= 133
      irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
    #else
      irradiance += getLightProbeIrradiance( lightProbe, geometry );
    #endif

    #if ( NUM_HEMI_LIGHTS > 0 )

      #pragma unroll_loop_start
      for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

        #if THREE_VRM_THREE_REVISION >= 133
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
        #else
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
        #endif

      }
      #pragma unroll_loop_end

    #endif

  #endif

  // #if defined( RE_IndirectSpecular )

  //   vec3 radiance = vec3( 0.0 );
  //   vec3 clearcoatRadiance = vec3( 0.0 );

  // #endif

  #include <lights_fragment_maps>
  #include <lights_fragment_end>

  // modulation
  #include <aomap_fragment>

  vec3 col = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;

  #ifdef DEBUG_LITSHADERATE
    gl_FragColor = vec4( col, diffuseColor.a );
    postCorrection();
    return;
  #endif

  // -- MToon: rim lighting -----------------------------------------
  vec3 viewDir = normalize( vViewPosition );

  #ifndef PHYSICALLY_CORRECT_LIGHTS
    reflectedLight.directSpecular /= PI;
  #endif
  vec3 rimMix = mix( vec3( 1.0 ), reflectedLight.directSpecular, 1.0 );

  vec3 rim = parametricRimColorFactor * pow( saturate( 1.0 - dot( viewDir, normal ) + parametricRimLiftFactor ), parametricRimFresnelPowerFactor );

  #ifdef USE_MATCAPTEXTURE
    {
      vec3 x = normalize( vec3( viewDir.z, 0.0, -viewDir.x ) );
      vec3 y = cross( viewDir, x ); // guaranteed to be normalized
      vec2 sphereUv = 0.5 + 0.5 * vec2( dot( x, normal ), -dot( y, normal ) );
      sphereUv = ( matcapTextureUvTransform * vec3( sphereUv, 1 ) ).xy;
      #if THREE_VRM_THREE_REVISION >= 137
        vec3 matcap = texture2D( matcapTexture, sphereUv ).rgb;
      #else
        // COMPAT: pre-r137
        vec3 matcap = matcapTextureTexelToLinear( texture2D( matcapTexture, sphereUv ) ).rgb;
      #endif
      rim += matcapFactor * matcap;
    }
  #endif

  #ifdef USE_RIMMULTIPLYTEXTURE
    vec2 rimMultiplyTextureUv = ( rimMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      rim *= texture2D( rimMultiplyTexture, rimMultiplyTextureUv ).rgb;
    #else
      // COMPAT: pre-r137
      rim *= rimMultiplyTextureTexelToLinear( texture2D( rimMultiplyTexture, rimMultiplyTextureUv ) ).rgb;
    #endif
  #endif

  col += rimMix * rim;

  // -- MToon: Emission --------------------------------------------------------
  col += totalEmissiveRadiance;

  // #include <envmap_fragment>

  // -- Almost done! -----------------------------------------------------------
  #if defined( OUTLINE )
    col = outlineColorFactor.rgb * mix( vec3( 1.0 ), col, outlineLightingMixFactor );
  #endif

  gl_FragColor = vec4( col, diffuseColor.a );
  postCorrection();
}
`;const JAe={None:"none",Normal:"normal",LitShadeRate:"litShadeRate",UV:"uv"},QI={None:"none",WorldCoordinates:"worldCoordinates",ScreenCoordinates:"screenCoordinates"},HAe=3002,zAe=3004,XAe=3005,YAe=3006,KAe=3007,jAe=n=>{if(parseInt(Rs,10)>=136)switch(n){case Ys:return["Linear","( value )"];case dt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}else switch(n){case Ys:return["Linear","( value )"];case dt:return["sRGB","( value )"];case HAe:return["RGBE","( value )"];case zAe:return["RGBM","( value, 7.0 )"];case XAe:return["RGBM","( value, 16.0 )"];case YAe:return["RGBD","( value, 256.0 )"];case KAe:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+n)}},RI=(n,e)=>{const t=jAe(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"};function MI(n,e){let t;return n&&n.isTexture?t=n.encoding:t=Ys,parseInt(Rs,10)>=133&&e&&n&&n.isTexture&&n.format===Ci&&n.type===Jl&&n.encoding===dt&&(t=Ys),t}class eB extends Ti{constructor(e={}){super({vertexShader:ZAe,fragmentShader:GAe}),this.uvAnimationScrollXSpeedFactor=0,this.uvAnimationScrollYSpeedFactor=0,this.uvAnimationRotationSpeedFactor=0,this.fog=!0,this.normalMapType=Sh,this._ignoreVertexColor=!0,this._v0CompatShade=!1,this._debugMode=JAe.None,this._outlineWidthMode=QI.None,this._isOutline=!1,e.transparentWithZWrite&&(e.depthWrite=!0),delete e.transparentWithZWrite,e.fog=!0,e.lights=!0,e.clipping=!0,parseInt(Rs,10)<129&&(e.skinning=e.skinning||!1),parseInt(Rs,10)<131&&(e.morphTargets=e.morphTargets||!1,e.morphNormals=e.morphNormals||!1),this.uniforms=zO.merge([ke.common,ke.normalmap,ke.emissivemap,ke.fog,ke.lights,{litFactor:{value:new Ne(1,1,1)},mapUvTransform:{value:new Mn},colorAlpha:{value:1},normalMapUvTransform:{value:new Mn},shadeColorFactor:{value:new Ne(.97,.81,.86)},shadeMultiplyTexture:{value:null},shadeMultiplyTextureUvTransform:{value:new Mn},shadingShiftFactor:{value:0},shadingShiftTexture:{value:null},shadingShiftTextureUvTransform:{value:new Mn},shadingShiftTextureScale:{value:null},shadingToonyFactor:{value:.9},giEqualizationFactor:{value:.9},matcapFactor:{value:new Ne(0,0,0)},matcapTexture:{value:null},matcapTextureUvTransform:{value:new Mn},parametricRimColorFactor:{value:new Ne(0,0,0)},rimMultiplyTexture:{value:null},rimMultiplyTextureUvTransform:{value:new Mn},rimLightingMixFactor:{value:0},parametricRimFresnelPowerFactor:{value:1},parametricRimLiftFactor:{value:0},emissive:{value:new Ne(0,0,0)},emissiveIntensity:{value:1},emissiveMapUvTransform:{value:new Mn},outlineWidthMultiplyTexture:{value:null},outlineWidthMultiplyTextureUvTransform:{value:new Mn},outlineWidthFactor:{value:.5},outlineColorFactor:{value:new Ne(0,0,0)},outlineLightingMixFactor:{value:1},uvAnimationMaskTexture:{value:null},uvAnimationMaskTextureUvTransform:{value:new Mn},uvAnimationScrollXOffset:{value:0},uvAnimationScrollYOffset:{value:0},uvAnimationRotationPhase:{value:0}},e.uniforms]),this.setValues(e),this._uploadUniformsWorkaround(),this.customProgramCacheKey=()=>[...Object.entries(this._generateDefines()).map(([t,r])=>`${t}:${r}`),this.matcapTexture?`matcapTextureEncoding:${this.matcapTexture.encoding}`:"",this.shadeMultiplyTexture?`shadeMultiplyTextureEncoding:${this.shadeMultiplyTexture.encoding}`:"",this.rimMultiplyTexture?`rimMultiplyTextureEncoding:${this.rimMultiplyTexture.encoding}`:""].join(","),this.onBeforeCompile=(t,r)=>{const i=r.capabilities.isWebGL2,s=parseInt(Rs,10),o=Object.entries(Object.assign(Object.assign({},this._generateDefines()),this.defines)).filter(([A,l])=>!!l).map(([A,l])=>`#define ${A} ${l}`).join(`
`)+`
`;let a="";parseInt(Rs,10)<137&&(a=(this.matcapTexture!==null?RI("matcapTextureTexelToLinear",MI(this.matcapTexture,i))+`
`:"")+(this.shadeMultiplyTexture!==null?RI("shadeMultiplyTextureTexelToLinear",MI(this.shadeMultiplyTexture,i))+`
`:"")+(this.rimMultiplyTexture!==null?RI("rimMultiplyTextureTexelToLinear",MI(this.rimMultiplyTexture,i))+`
`:"")),t.vertexShader=o+t.vertexShader,t.fragmentShader=o+a+t.fragmentShader,s<132&&(t.fragmentShader=t.fragmentShader.replace("#include <normal_pars_fragment>",""),t.fragmentShader=t.fragmentShader.replace("#include <alphatest_pars_fragment>",""))}}get color(){return this.uniforms.litFactor.value}set color(e){this.uniforms.litFactor.value=e}get map(){return this.uniforms.map.value}set map(e){this.uniforms.map.value=e}get normalMap(){return this.uniforms.normalMap.value}set normalMap(e){this.uniforms.normalMap.value=e}get normalScale(){return this.uniforms.normalScale.value}set normalScale(e){this.uniforms.normalScale.value=e}get emissive(){return this.uniforms.emissive.value}set emissive(e){this.uniforms.emissive.value=e}get emissiveIntensity(){return this.uniforms.emissiveIntensity.value}set emissiveIntensity(e){this.uniforms.emissiveIntensity.value=e}get emissiveMap(){return this.uniforms.emissiveMap.value}set emissiveMap(e){this.uniforms.emissiveMap.value=e}get shadeColorFactor(){return this.uniforms.shadeColorFactor.value}set shadeColorFactor(e){this.uniforms.shadeColorFactor.value=e}get shadeMultiplyTexture(){return this.uniforms.shadeMultiplyTexture.value}set shadeMultiplyTexture(e){this.uniforms.shadeMultiplyTexture.value=e}get shadingShiftFactor(){return this.uniforms.shadingShiftFactor.value}set shadingShiftFactor(e){this.uniforms.shadingShiftFactor.value=e}get shadingShiftTexture(){return this.uniforms.shadingShiftTexture.value}set shadingShiftTexture(e){this.uniforms.shadingShiftTexture.value=e}get shadingShiftTextureScale(){return this.uniforms.shadingShiftTextureScale.value}set shadingShiftTextureScale(e){this.uniforms.shadingShiftTextureScale.value=e}get shadingToonyFactor(){return this.uniforms.shadingToonyFactor.value}set shadingToonyFactor(e){this.uniforms.shadingToonyFactor.value=e}get giEqualizationFactor(){return this.uniforms.giEqualizationFactor.value}set giEqualizationFactor(e){this.uniforms.giEqualizationFactor.value=e}get matcapFactor(){return this.uniforms.matcapFactor.value}set matcapFactor(e){this.uniforms.matcapFactor.value=e}get matcapTexture(){return this.uniforms.matcapTexture.value}set matcapTexture(e){this.uniforms.matcapTexture.value=e}get parametricRimColorFactor(){return this.uniforms.parametricRimColorFactor.value}set parametricRimColorFactor(e){this.uniforms.parametricRimColorFactor.value=e}get rimMultiplyTexture(){return this.uniforms.rimMultiplyTexture.value}set rimMultiplyTexture(e){this.uniforms.rimMultiplyTexture.value=e}get rimLightingMixFactor(){return this.uniforms.rimLightingMixFactor.value}set rimLightingMixFactor(e){this.uniforms.rimLightingMixFactor.value=e}get parametricRimFresnelPowerFactor(){return this.uniforms.parametricRimFresnelPowerFactor.value}set parametricRimFresnelPowerFactor(e){this.uniforms.parametricRimFresnelPowerFactor.value=e}get parametricRimLiftFactor(){return this.uniforms.parametricRimLiftFactor.value}set parametricRimLiftFactor(e){this.uniforms.parametricRimLiftFactor.value=e}get outlineWidthMultiplyTexture(){return this.uniforms.outlineWidthMultiplyTexture.value}set outlineWidthMultiplyTexture(e){this.uniforms.outlineWidthMultiplyTexture.value=e}get outlineWidthFactor(){return this.uniforms.outlineWidthFactor.value}set outlineWidthFactor(e){this.uniforms.outlineWidthFactor.value=e}get outlineColorFactor(){return this.uniforms.outlineColorFactor.value}set outlineColorFactor(e){this.uniforms.outlineColorFactor.value=e}get outlineLightingMixFactor(){return this.uniforms.outlineLightingMixFactor.value}set outlineLightingMixFactor(e){this.uniforms.outlineLightingMixFactor.value=e}get uvAnimationMaskTexture(){return this.uniforms.uvAnimationMaskTexture.value}set uvAnimationMaskTexture(e){this.uniforms.uvAnimationMaskTexture.value=e}get uvAnimationScrollXOffset(){return this.uniforms.uvAnimationScrollXOffset.value}set uvAnimationScrollXOffset(e){this.uniforms.uvAnimationScrollXOffset.value=e}get uvAnimationScrollYOffset(){return this.uniforms.uvAnimationScrollYOffset.value}set uvAnimationScrollYOffset(e){this.uniforms.uvAnimationScrollYOffset.value=e}get uvAnimationRotationPhase(){return this.uniforms.uvAnimationRotationPhase.value}set uvAnimationRotationPhase(e){this.uniforms.uvAnimationRotationPhase.value=e}get ignoreVertexColor(){return this._ignoreVertexColor}set ignoreVertexColor(e){this._ignoreVertexColor=e,this.needsUpdate=!0}get v0CompatShade(){return this._v0CompatShade}set v0CompatShade(e){this._v0CompatShade=e,this.needsUpdate=!0}get debugMode(){return this._debugMode}set debugMode(e){this._debugMode=e,this.needsUpdate=!0}get outlineWidthMode(){return this._outlineWidthMode}set outlineWidthMode(e){this._outlineWidthMode=e,this.needsUpdate=!0}get isOutline(){return this._isOutline}set isOutline(e){this._isOutline=e,this.needsUpdate=!0}get isMToonMaterial(){return!0}update(e){this._uploadUniformsWorkaround(),this._updateUVAnimation(e)}copy(e){return super.copy(e),this.map=e.map,this.normalMap=e.normalMap,this.emissiveMap=e.emissiveMap,this.shadeMultiplyTexture=e.shadeMultiplyTexture,this.shadingShiftTexture=e.shadingShiftTexture,this.matcapTexture=e.matcapTexture,this.rimMultiplyTexture=e.rimMultiplyTexture,this.outlineWidthMultiplyTexture=e.outlineWidthMultiplyTexture,this.uvAnimationMaskTexture=e.uvAnimationMaskTexture,this.normalMapType=e.normalMapType,this.uvAnimationScrollXSpeedFactor=e.uvAnimationScrollXSpeedFactor,this.uvAnimationScrollYSpeedFactor=e.uvAnimationScrollYSpeedFactor,this.uvAnimationRotationSpeedFactor=e.uvAnimationRotationSpeedFactor,this.ignoreVertexColor=e.ignoreVertexColor,this.v0CompatShade=e.v0CompatShade,this.debugMode=e.debugMode,this.outlineWidthMode=e.outlineWidthMode,this.isOutline=e.isOutline,this.needsUpdate=!0,this}_updateUVAnimation(e){this.uniforms.uvAnimationScrollXOffset.value+=e*this.uvAnimationScrollXSpeedFactor,this.uniforms.uvAnimationScrollYOffset.value+=e*this.uvAnimationScrollYSpeedFactor,this.uniforms.uvAnimationRotationPhase.value+=e*this.uvAnimationRotationSpeedFactor,this.uniformsNeedUpdate=!0}_uploadUniformsWorkaround(){this.uniforms.opacity.value=this.opacity,this._updateTextureMatrix(this.uniforms.map,this.uniforms.mapUvTransform),this._updateTextureMatrix(this.uniforms.normalMap,this.uniforms.normalMapUvTransform),this._updateTextureMatrix(this.uniforms.emissiveMap,this.uniforms.emissiveMapUvTransform),this._updateTextureMatrix(this.uniforms.shadeMultiplyTexture,this.uniforms.shadeMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.shadingShiftTexture,this.uniforms.shadingShiftTextureUvTransform),this._updateTextureMatrix(this.uniforms.matcapTexture,this.uniforms.matcapTextureUvTransform),this._updateTextureMatrix(this.uniforms.rimMultiplyTexture,this.uniforms.rimMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.outlineWidthMultiplyTexture,this.uniforms.outlineWidthMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.uvAnimationMaskTexture,this.uniforms.uvAnimationMaskTextureUvTransform),parseInt(Rs,10)>=132&&(this.uniforms.alphaTest.value=this.alphaTest),this.uniformsNeedUpdate=!0}_generateDefines(){const e=parseInt(Rs,10),t=this.outlineWidthMultiplyTexture!==null,r=this.map!==null||this.emissiveMap!==null||this.shadeMultiplyTexture!==null||this.shadingShiftTexture!==null||this.rimMultiplyTexture!==null||this.uvAnimationMaskTexture!==null;return{THREE_VRM_THREE_REVISION:e,OUTLINE:this._isOutline,MTOON_USE_UV:t||r,MTOON_UVS_VERTEX_ONLY:t&&!r,V0_COMPAT_SHADE:this._v0CompatShade,USE_SHADEMULTIPLYTEXTURE:this.shadeMultiplyTexture!==null,USE_SHADINGSHIFTTEXTURE:this.shadingShiftTexture!==null,USE_MATCAPTEXTURE:this.matcapTexture!==null,USE_RIMMULTIPLYTEXTURE:this.rimMultiplyTexture!==null,USE_OUTLINEWIDTHMULTIPLYTEXTURE:this._isOutline&&this.outlineWidthMultiplyTexture!==null,USE_UVANIMATIONMASKTEXTURE:this.uvAnimationMaskTexture!==null,IGNORE_VERTEX_COLOR:this._ignoreVertexColor===!0,DEBUG_NORMAL:this._debugMode==="normal",DEBUG_LITSHADERATE:this._debugMode==="litShadeRate",DEBUG_UV:this._debugMode==="uv",OUTLINE_WIDTH_WORLD:this._isOutline&&this._outlineWidthMode===QI.WorldCoordinates,OUTLINE_WIDTH_SCREEN:this._isOutline&&this._outlineWidthMode===QI.ScreenCoordinates}}_updateTextureMatrix(e,t){e.value&&(e.value.matrixAutoUpdate&&e.value.updateMatrix(),t.value.copy(e.value.matrix))}}class $Ae{constructor(e,t){this._parser=e,this._materialParams=t,this._pendings=[]}get pending(){return Promise.all(this._pendings)}assignPrimitive(e,t){t!=null&&(this._materialParams[e]=t)}assignColor(e,t,r){t!=null&&(this._materialParams[e]=new Ne().fromArray(t),r&&this._materialParams[e].convertSRGBToLinear())}assignTexture(e,t,r){return Wc(this,void 0,void 0,function*(){const i=(()=>Wc(this,void 0,void 0,function*(){t!=null&&(yield this._parser.assignTexture(this._materialParams,e,t),r&&(this._materialParams[e].encoding=dt))}))();return this._pendings.push(i),i})}assignTextureByIndex(e,t,r){return Wc(this,void 0,void 0,function*(){return this.assignTexture(e,t!=null?{index:t}:void 0,r)})}}const qAe=new Set(["1.0","1.0-beta"]);class Md{constructor(e,t={}){var r,i,s;this.parser=e,this.renderOrderOffset=(r=t.renderOrderOffset)!==null&&r!==void 0?r:0,this.v0CompatShade=(i=t.v0CompatShade)!==null&&i!==void 0?i:!1,this.debugMode=(s=t.debugMode)!==null&&s!==void 0?s:"none",this._mToonMaterialSet=new Set}get name(){return Md.EXTENSION_NAME}beforeRoot(){return Wc(this,void 0,void 0,function*(){this._removeUnlitExtensionIfMToonExists()})}afterRoot(e){return Wc(this,void 0,void 0,function*(){e.userData.vrmMToonMaterials=Array.from(this._mToonMaterialSet)})}getMaterialType(e){return this._getMToonExtension(e)?eB:null}extendMaterialParams(e,t){const r=this._getMToonExtension(e);return r?this._extendMaterialParams(r,t):null}loadMesh(e){var t;return Wc(this,void 0,void 0,function*(){const r=this.parser,s=(t=r.json.meshes)===null||t===void 0?void 0:t[e];if(s==null)throw new Error(`MToonMaterialLoaderPlugin: Attempt to use meshes[${e}] of glTF but the mesh doesn't exist`);const o=s.primitives,a=yield r.loadMesh(e);if(o.length===1){const A=a,l=o[0].material;l!=null&&this._setupPrimitive(A,l)}else{const A=a;for(let l=0;l<o.length;l++){const c=A.children[l],u=o[l].material;u!=null&&this._setupPrimitive(c,u)}}return a})}_removeUnlitExtensionIfMToonExists(){const r=this.parser.json.materials;r==null||r.map((i,s)=>{var o;this._getMToonExtension(s)&&(!((o=i.extensions)===null||o===void 0)&&o.KHR_materials_unlit)&&delete i.extensions.KHR_materials_unlit})}_getMToonExtension(e){var t,r;const o=(t=this.parser.json.materials)===null||t===void 0?void 0:t[e];if(o==null){console.warn(`MToonMaterialLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const a=(r=o.extensions)===null||r===void 0?void 0:r[Md.EXTENSION_NAME];if(a==null)return;const A=a.specVersion;if(!qAe.has(A)){console.warn(`MToonMaterialLoaderPlugin: Unknown ${Md.EXTENSION_NAME} specVersion "${A}"`);return}return a}_extendMaterialParams(e,t){var r;return Wc(this,void 0,void 0,function*(){delete t.metalness,delete t.roughness;const i=new $Ae(this.parser,t);i.assignPrimitive("transparentWithZWrite",e.transparentWithZWrite),i.assignColor("shadeColorFactor",e.shadeColorFactor),i.assignTexture("shadeMultiplyTexture",e.shadeMultiplyTexture,!0),i.assignPrimitive("shadingShiftFactor",e.shadingShiftFactor),i.assignTexture("shadingShiftTexture",e.shadingShiftTexture,!0),i.assignPrimitive("shadingShiftTextureScale",(r=e.shadingShiftTexture)===null||r===void 0?void 0:r.scale),i.assignPrimitive("shadingToonyFactor",e.shadingToonyFactor),i.assignPrimitive("giEqualizationFactor",e.giEqualizationFactor),i.assignColor("matcapFactor",e.matcapFactor),i.assignTexture("matcapTexture",e.matcapTexture,!0),i.assignColor("parametricRimColorFactor",e.parametricRimColorFactor),i.assignTexture("rimMultiplyTexture",e.rimMultiplyTexture,!0),i.assignPrimitive("rimLightingMixFactor",e.rimLightingMixFactor),i.assignPrimitive("parametricRimFresnelPowerFactor",e.parametricRimFresnelPowerFactor),i.assignPrimitive("parametricRimLiftFactor",e.parametricRimLiftFactor),i.assignPrimitive("outlineWidthMode",e.outlineWidthMode),i.assignPrimitive("outlineWidthFactor",e.outlineWidthFactor),i.assignTexture("outlineWidthMultiplyTexture",e.outlineWidthMultiplyTexture,!1),i.assignColor("outlineColorFactor",e.outlineColorFactor),i.assignPrimitive("outlineLightingMixFactor",e.outlineLightingMixFactor),i.assignTexture("uvAnimationMaskTexture",e.uvAnimationMaskTexture,!1),i.assignPrimitive("uvAnimationScrollXSpeedFactor",e.uvAnimationScrollXSpeedFactor),i.assignPrimitive("uvAnimationScrollYSpeedFactor",e.uvAnimationScrollYSpeedFactor),i.assignPrimitive("uvAnimationRotationSpeedFactor",e.uvAnimationRotationSpeedFactor),i.assignPrimitive("v0CompatShade",this.v0CompatShade),i.assignPrimitive("debugMode",this.debugMode),yield i.pending})}_setupPrimitive(e,t){const r=this._getMToonExtension(t);if(r){const i=this._parseRenderOrder(r);e.renderOrder=i+this.renderOrderOffset,this._generateOutline(e),this._addToMaterialSet(e);return}}_generateOutline(e){const t=e.material;if(!(t instanceof eB)||t.outlineWidthMode==="none"||t.outlineWidthFactor<=0)return;e.material=[t];const r=t.clone();r.name+=" (Outline)",r.isOutline=!0,r.side=ci,e.material.push(r);const i=e.geometry,s=i.index?i.index.count:i.attributes.position.count/3;i.addGroup(0,s,0),i.addGroup(0,s,1)}_addToMaterialSet(e){const t=e.material,r=new Set;Array.isArray(t)?t.forEach(i=>r.add(i)):r.add(t);for(const i of r)i instanceof eB&&this._mToonMaterialSet.add(i)}_parseRenderOrder(e){var t;return(e.transparentWithZWrite?0:19)+((t=e.renderQueueOffsetNumber)!==null&&t!==void 0?t:0)}}Md.EXTENSION_NAME="VRMC_materials_mtoon";/*!
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier v1.0.9
 * Support VRMC_hdr_emissiveMultiplier for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */function ele(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})}class Fm{constructor(e){this.parser=e}get name(){return Fm.EXTENSION_NAME}extendMaterialParams(e,t){return ele(this,void 0,void 0,function*(){const r=this._getHDREmissiveMultiplierExtension(e);if(r==null)return;console.warn("VRMMaterialsHDREmissiveMultiplierLoaderPlugin: `VRMC_materials_hdr_emissiveMultiplier` is archived. Use `KHR_materials_emissive_strength` instead.");const i=r.emissiveMultiplier;t.emissiveIntensity=i})}_getHDREmissiveMultiplierExtension(e){var t,r;const o=(t=this.parser.json.materials)===null||t===void 0?void 0:t[e];if(o==null){console.warn(`VRMMaterialsHDREmissiveMultiplierLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const a=(r=o.extensions)===null||r===void 0?void 0:r[Fm.EXTENSION_NAME];if(a!=null)return a}}Fm.EXTENSION_NAME="VRMC_materials_hdr_emissiveMultiplier";/*!
 * @pixiv/three-vrm-materials-v0compat v1.0.9
 * VRM0.0 materials compatibility layer plugin for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-materials-v0compat is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */function tle(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})}function lf(n){return Math.pow(n,2.2)}class nle{constructor(e){var t;this.parser=e,this._renderQueueMapTransparent=new Map,this._renderQueueMapTransparentZWrite=new Map;const r=this.parser.json;r.extensionsUsed=(t=r.extensionsUsed)!==null&&t!==void 0?t:[],r.extensionsUsed.indexOf("KHR_texture_transform")===-1&&r.extensionsUsed.push("KHR_texture_transform")}get name(){return"VRMMaterialsV0CompatPlugin"}beforeRoot(){var e;return tle(this,void 0,void 0,function*(){const t=this.parser.json,r=(e=t.extensions)===null||e===void 0?void 0:e.VRM,i=r==null?void 0:r.materialProperties;i&&(this._populateRenderQueueMap(i),i.forEach((s,o)=>{var a,A;const l=(a=t.materials)===null||a===void 0?void 0:a[o];if(l==null){console.warn(`VRMMaterialsV0CompatPlugin: Attempt to use materials[${o}] of glTF but the material doesn't exist`);return}if(s.shader==="VRM/MToon"){const c=this._parseV0MToonProperties(s,l);t.materials[o]=c}else if(!((A=s.shader)===null||A===void 0)&&A.startsWith("VRM/Unlit")){const c=this._parseV0UnlitProperties(s,l);t.materials[o]=c}else s.shader==="VRM_USE_GLTFSHADER"||console.warn(`VRMMaterialsV0CompatPlugin: Unknown shader: ${s.shader}`)}))})}_parseV0MToonProperties(e,t){var r,i,s,o,a,A,l,c,u,f,d,h,p,m,g,v,y,w,C,b,F,I,S,T,H,X,Q,B,E,R,k,M,L,Z,P,U,G,oe,D,K,ce,le,he,$;const ae=(i=(r=e.keywordMap)===null||r===void 0?void 0:r._ALPHABLEND_ON)!==null&&i!==void 0?i:!1,Ae=((s=e.floatProperties)===null||s===void 0?void 0:s._ZWrite)===1&&ae,re=this._v0ParseRenderQueue(e),me=(a=(o=e.keywordMap)===null||o===void 0?void 0:o._ALPHATEST_ON)!==null&&a!==void 0?a:!1,Pe=ae?"BLEND":me?"MASK":"OPAQUE",_e=me?(A=e.floatProperties)===null||A===void 0?void 0:A._Cutoff:void 0,Fe=((c=(l=e.floatProperties)===null||l===void 0?void 0:l._CullMode)!==null&&c!==void 0?c:2)===0,Ue=this._portTextureTransform(e),Me=(f=(u=e.vectorProperties)===null||u===void 0?void 0:u._Color)===null||f===void 0?void 0:f.map((ye,Ve)=>Ve===3?ye:lf(ye)),W=(d=e.textureProperties)===null||d===void 0?void 0:d._MainTex,O=W!=null?{index:W,extensions:Object.assign({},Ue)}:void 0,se=(h=e.floatProperties)===null||h===void 0?void 0:h._BumpScale,de=(p=e.textureProperties)===null||p===void 0?void 0:p._BumpMap,Be=de!=null?{index:de,scale:se,extensions:Object.assign({},Ue)}:void 0,V=(g=(m=e.vectorProperties)===null||m===void 0?void 0:m._EmissionColor)===null||g===void 0?void 0:g.map(lf),_=(v=e.textureProperties)===null||v===void 0?void 0:v._EmissionMap,x=_!=null?{index:_,extensions:Object.assign({},Ue)}:void 0,N=(w=(y=e.vectorProperties)===null||y===void 0?void 0:y._ShadeColor)===null||w===void 0?void 0:w.map(lf),j=(C=e.textureProperties)===null||C===void 0?void 0:C._ShadeTexture,q=j!=null?{index:j,extensions:Object.assign({},Ue)}:void 0;let ne=(F=(b=e.floatProperties)===null||b===void 0?void 0:b._ShadeShift)!==null&&F!==void 0?F:0,Ce=(S=(I=e.floatProperties)===null||I===void 0?void 0:I._ShadeToony)!==null&&S!==void 0?S:.9;Ce=Dt.lerp(Ce,1,.5+.5*ne),ne=-ne-(1-Ce);const be=(T=e.floatProperties)===null||T===void 0?void 0:T._IndirectLightIntensity,Ee=be?1-be:void 0,We=(H=e.textureProperties)===null||H===void 0?void 0:H._SphereAdd,Te=We!=null?[1,1,1]:void 0,ie=We!=null?{index:We}:void 0,we=(X=e.floatProperties)===null||X===void 0?void 0:X._RimLightingMix,xe=(Q=e.textureProperties)===null||Q===void 0?void 0:Q._RimTexture,Qe=xe!=null?{index:xe,extensions:Object.assign({},Ue)}:void 0,He=(E=(B=e.vectorProperties)===null||B===void 0?void 0:B._RimColor)===null||E===void 0?void 0:E.map(lf),qe=(R=e.floatProperties)===null||R===void 0?void 0:R._RimFresnelPower,ot=(k=e.floatProperties)===null||k===void 0?void 0:k._RimLift,rn=["none","worldCoordinates","screenCoordinates"][(L=(M=e.floatProperties)===null||M===void 0?void 0:M._OutlineWidthMode)!==null&&L!==void 0?L:0];let wt=(P=(Z=e.floatProperties)===null||Z===void 0?void 0:Z._OutlineWidth)!==null&&P!==void 0?P:0;wt=.01*wt;const nt=(U=e.textureProperties)===null||U===void 0?void 0:U._OutlineWidthTexture,er=nt!=null?{index:nt,extensions:Object.assign({},Ue)}:void 0,ht=(oe=(G=e.vectorProperties)===null||G===void 0?void 0:G._OutlineColor)===null||oe===void 0?void 0:oe.map(lf),Ao=((D=e.floatProperties)===null||D===void 0?void 0:D._OutlineColorMode)===1?(K=e.floatProperties)===null||K===void 0?void 0:K._OutlineLightingMix:0,Zt=(ce=e.textureProperties)===null||ce===void 0?void 0:ce._UvAnimMaskTexture,Yt=Zt!=null?{index:Zt,extensions:Object.assign({},Ue)}:void 0,ee=(le=e.floatProperties)===null||le===void 0?void 0:le._UvAnimScrollX;let ue=(he=e.floatProperties)===null||he===void 0?void 0:he._UvAnimScrollY;ue!=null&&(ue=-ue);const ve=($=e.floatProperties)===null||$===void 0?void 0:$._UvAnimRotation,ge={specVersion:"1.0",transparentWithZWrite:Ae,renderQueueOffsetNumber:re,shadeColorFactor:N,shadeMultiplyTexture:q,shadingShiftFactor:ne,shadingToonyFactor:Ce,giEqualizationFactor:Ee,matcapFactor:Te,matcapTexture:ie,rimLightingMixFactor:we,rimMultiplyTexture:Qe,parametricRimColorFactor:He,parametricRimFresnelPowerFactor:qe,parametricRimLiftFactor:ot,outlineWidthMode:rn,outlineWidthFactor:wt,outlineWidthMultiplyTexture:er,outlineColorFactor:ht,outlineLightingMixFactor:Ao,uvAnimationMaskTexture:Yt,uvAnimationScrollXSpeedFactor:ee,uvAnimationScrollYSpeedFactor:ue,uvAnimationRotationSpeedFactor:ve};return Object.assign(Object.assign({},t),{pbrMetallicRoughness:{baseColorFactor:Me,baseColorTexture:O},normalTexture:Be,emissiveTexture:x,emissiveFactor:V,alphaMode:Pe,alphaCutoff:_e,doubleSided:Fe,extensions:{VRMC_materials_mtoon:ge}})}_parseV0UnlitProperties(e,t){var r,i,s,o;const a=e.shader==="VRM/UnlitTransparentZWrite",A=e.shader==="VRM/UnlitTransparent"||a,l=this._v0ParseRenderQueue(e),c=e.shader==="VRM/UnlitCutout",u=A?"BLEND":c?"MASK":"OPAQUE",f=c?(r=e.floatProperties)===null||r===void 0?void 0:r._Cutoff:void 0,d=this._portTextureTransform(e),h=(s=(i=e.vectorProperties)===null||i===void 0?void 0:i._Color)===null||s===void 0?void 0:s.map(lf),p=(o=e.textureProperties)===null||o===void 0?void 0:o._MainTex,m=p!=null?{index:p,extensions:Object.assign({},d)}:void 0,g={specVersion:"1.0",transparentWithZWrite:a,renderQueueOffsetNumber:l,shadeColorFactor:h,shadeMultiplyTexture:m};return Object.assign(Object.assign({},t),{pbrMetallicRoughness:{baseColorFactor:h,baseColorTexture:m},alphaMode:u,alphaCutoff:f,extensions:{VRMC_materials_mtoon:g}})}_portTextureTransform(e){var t,r,i,s,o;const a=(t=e.vectorProperties)===null||t===void 0?void 0:t._MainTex;if(a==null)return{};const A=[(r=a==null?void 0:a[0])!==null&&r!==void 0?r:0,(i=a==null?void 0:a[1])!==null&&i!==void 0?i:0],l=[(s=a==null?void 0:a[2])!==null&&s!==void 0?s:1,(o=a==null?void 0:a[3])!==null&&o!==void 0?o:1];return A[1]=l[1]*(1-A[1])%1,{KHR_texture_transform:{offset:A,scale:l}}}_v0ParseRenderQueue(e){var t,r,i;const s=(r=(t=e.keywordMap)===null||t===void 0?void 0:t._ALPHABLEND_ON)!==null&&r!==void 0?r:!1,o=((i=e.floatProperties)===null||i===void 0?void 0:i._ZWrite)===1;let a=0;if(s){const A=e.renderQueue;A!=null&&(o?a=this._renderQueueMapTransparentZWrite.get(A):a=this._renderQueueMapTransparent.get(A))}return a}_populateRenderQueueMap(e){const t=new Set,r=new Set;e.forEach(i=>{var s,o,a;const A=(o=(s=i.keywordMap)===null||s===void 0?void 0:s._ALPHABLEND_ON)!==null&&o!==void 0?o:!1,l=((a=i.floatProperties)===null||a===void 0?void 0:a._ZWrite)===1;if(A){const c=i.renderQueue;c!=null&&(l?r.add(c):t.add(c))}}),t.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${t.size} render queues for Transparent materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),r.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${r.size} render queues for TransparentZWrite materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),Array.from(t).sort().forEach((i,s)=>{const o=Math.min(Math.max(s-t.size+1,-9),0);this._renderQueueMapTransparent.set(i,o)}),Array.from(r).sort().forEach((i,s)=>{const o=Math.min(Math.max(s,0),9);this._renderQueueMapTransparentZWrite.set(i,o)})}}/*!
 * @pixiv/three-vrm-node-constraint v1.0.9
 * Node constraint module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-node-constraint is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */const jA=new z;class TI extends Er{constructor(e){super(),this._attrPosition=new st(new Float32Array([0,0,0,0,0,0]),3),this._attrPosition.setUsage(Kj);const t=new zt;t.setAttribute("position",this._attrPosition);const r=new NA({color:16711935,depthTest:!1,depthWrite:!1});this._line=new Th(t,r),this.add(this._line),this.constraint=e}updateMatrixWorld(e){jA.setFromMatrixPosition(this.constraint.destination.matrixWorld),this._attrPosition.setXYZ(0,jA.x,jA.y,jA.z),this.constraint.source&&jA.setFromMatrixPosition(this.constraint.source.matrixWorld),this._attrPosition.setXYZ(1,jA.x,jA.y,jA.z),this._attrPosition.needsUpdate=!0,super.updateMatrixWorld(e)}}function rk(n,e){return e.set(n.elements[12],n.elements[13],n.elements[14])}const rle=new z,ile=new z;function sle(n,e){return n.decompose(rle,e,ile),e}function pw(n){return n.invert?n.invert():n.inverse(),n}class dS{constructor(e,t){this.destination=e,this.source=t,this.weight=1}}const ole=new z,ale=new z,Ale=new z,lle=new et,cle=new et,ule=new et;class fle extends dS{constructor(e,t){super(e,t),this._aimAxis="PositiveX",this._v3AimAxis=new z(1,0,0),this._dstRestQuat=new et}get aimAxis(){return this._aimAxis}set aimAxis(e){this._aimAxis=e,this._v3AimAxis.set(e==="PositiveX"?1:e==="NegativeX"?-1:0,e==="PositiveY"?1:e==="NegativeY"?-1:0,e==="PositiveZ"?1:e==="NegativeZ"?-1:0)}get dependencies(){const e=new Set([this.source]);return this.destination.parent&&e.add(this.destination.parent),e}setInitState(){this._dstRestQuat.copy(this.destination.quaternion)}update(){this.destination.updateWorldMatrix(!0,!1),this.source.updateWorldMatrix(!0,!1);const e=lle.identity(),t=cle.identity();this.destination.parent&&(sle(this.destination.parent.matrixWorld,e),pw(t.copy(e)));const r=ole.copy(this._v3AimAxis).applyQuaternion(this._dstRestQuat).applyQuaternion(e),i=rk(this.source.matrixWorld,ale).sub(rk(this.destination.matrixWorld,Ale)).normalize(),s=ule.setFromUnitVectors(r,i).premultiply(t).multiply(e).multiply(this._dstRestQuat);this.destination.quaternion.copy(this._dstRestQuat).slerp(s,this.weight)}}function ik(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})}function dle(n,e){const t=[n];let r=n.parent;for(;r!==null;)t.unshift(r),r=r.parent;t.forEach(i=>{e(i)})}class hle{constructor(){this._constraints=new Set,this._objectConstraintsMap=new Map}get constraints(){return this._constraints}addConstraint(e){this._constraints.add(e);let t=this._objectConstraintsMap.get(e.destination);t==null&&(t=new Set,this._objectConstraintsMap.set(e.destination,t)),t.add(e)}deleteConstraint(e){this._constraints.delete(e),this._objectConstraintsMap.get(e.destination).delete(e)}setInitState(){const e=new Set,t=new Set;for(const r of this._constraints)this._processConstraint(r,e,t,i=>i.setInitState())}update(){const e=new Set,t=new Set;for(const r of this._constraints)this._processConstraint(r,e,t,i=>i.update())}_processConstraint(e,t,r,i){if(r.has(e))return;if(t.has(e))throw new Error("VRMNodeConstraintManager: Circular dependency detected while updating constraints");t.add(e);const s=e.dependencies;for(const o of s)dle(o,a=>{const A=this._objectConstraintsMap.get(a);if(A)for(const l of A)this._processConstraint(l,t,r,i)});i(e),r.add(e)}}const ple=new et,gle=new et;class mle extends dS{constructor(e,t){super(e,t),this._dstRestQuat=new et,this._invSrcRestQuat=new et}get dependencies(){return new Set([this.source])}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),pw(this._invSrcRestQuat.copy(this.source.quaternion))}update(){const e=ple.copy(this._invSrcRestQuat).multiply(this.source.quaternion),t=gle.copy(this._dstRestQuat).multiply(e);this.destination.quaternion.copy(this._dstRestQuat).slerp(t,this.weight)}}const vle=new z,yle=new et,Ble=new et;class wle extends dS{constructor(e,t){super(e,t),this._rollAxis="X",this._v3RollAxis=new z(1,0,0),this._dstRestQuat=new et,this._invDstRestQuat=new et,this._invSrcRestQuatMulDstRestQuat=new et}get rollAxis(){return this._rollAxis}set rollAxis(e){this._rollAxis=e,this._v3RollAxis.set(e==="X"?1:0,e==="Y"?1:0,e==="Z"?1:0)}get dependencies(){return new Set([this.source])}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),pw(this._invDstRestQuat.copy(this._dstRestQuat)),pw(this._invSrcRestQuatMulDstRestQuat.copy(this.source.quaternion)).multiply(this._dstRestQuat)}update(){const e=yle.copy(this._invDstRestQuat).multiply(this.source.quaternion).multiply(this._invSrcRestQuatMulDstRestQuat),t=vle.copy(this._v3RollAxis).applyQuaternion(e),i=Ble.setFromUnitVectors(t,this._v3RollAxis).premultiply(this._dstRestQuat).multiply(e);this.destination.quaternion.copy(this._dstRestQuat).slerp(i,this.weight)}}const Cle=new Set(["1.0","1.0-beta"]);class Oc{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}get name(){return Oc.EXTENSION_NAME}afterRoot(e){return ik(this,void 0,void 0,function*(){e.userData.vrmNodeConstraintManager=yield this._import(e)})}_import(e){var t;return ik(this,void 0,void 0,function*(){const r=this.parser.json;if(!(((t=r.extensionsUsed)===null||t===void 0?void 0:t.indexOf(Oc.EXTENSION_NAME))!==-1))return null;const s=new hle,o=yield this.parser.getDependencies("node");return o.forEach((a,A)=>{var l;const c=r.nodes[A],u=(l=c==null?void 0:c.extensions)===null||l===void 0?void 0:l[Oc.EXTENSION_NAME];if(u==null)return;const f=u.specVersion;if(!Cle.has(f)){console.warn(`VRMNodeConstraintLoaderPlugin: Unknown ${Oc.EXTENSION_NAME} specVersion "${f}"`);return}const d=u.constraint;if(d.roll!=null){const h=this._importRollConstraint(a,o,d.roll);s.addConstraint(h)}else if(d.aim!=null){const h=this._importAimConstraint(a,o,d.aim);s.addConstraint(h)}else if(d.rotation!=null){const h=this._importRotationConstraint(a,o,d.rotation);s.addConstraint(h)}}),e.scene.updateMatrixWorld(),s.setInitState(),s})}_importRollConstraint(e,t,r){const{source:i,rollAxis:s,weight:o}=r,a=t[i],A=new wle(e,a);if(s!=null&&(A.rollAxis=s),o!=null&&(A.weight=o),this.helperRoot){const l=new TI(A);this.helperRoot.add(l)}return A}_importAimConstraint(e,t,r){const{source:i,aimAxis:s,weight:o}=r,a=t[i],A=new fle(e,a);if(s!=null&&(A.aimAxis=s),o!=null&&(A.weight=o),this.helperRoot){const l=new TI(A);this.helperRoot.add(l)}return A}_importRotationConstraint(e,t,r){const{source:i,weight:s}=r,o=t[i],a=new mle(e,o);if(s!=null&&(a.weight=s),this.helperRoot){const A=new TI(a);this.helperRoot.add(A)}return a}}Oc.EXTENSION_NAME="VRMC_node_constraint";/*!
 * @pixiv/three-vrm-springbone v1.0.9
 * Spring bone module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-springbone is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */class gG{}const NI=new z,yc=new z;class mG extends gG{constructor(e){var t,r,i;super(),this.offset=(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:new z(0,0,0),this.tail=(r=e==null?void 0:e.tail)!==null&&r!==void 0?r:new z(0,0,0),this.radius=(i=e==null?void 0:e.radius)!==null&&i!==void 0?i:0}get type(){return"capsule"}calculateCollision(e,t,r,i){NI.copy(this.offset).applyMatrix4(e),yc.copy(this.tail).applyMatrix4(e),yc.sub(NI);const s=yc.lengthSq();i.copy(t).sub(NI);const o=yc.dot(i);o<=0||(s<=o||yc.multiplyScalar(o/s),i.sub(yc));const a=r+this.radius,A=i.length()-a;return i.normalize(),A}}class vG extends gG{constructor(e){var t,r;super(),this.offset=(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:new z(0,0,0),this.radius=(r=e==null?void 0:e.radius)!==null&&r!==void 0?r:0}get type(){return"sphere"}calculateCollision(e,t,r,i){i.copy(this.offset).applyMatrix4(e),i.negate().add(t);const s=r+this.radius,o=i.length()-s;return i.normalize(),o}}const zo=new z;class ble extends zt{constructor(e){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new z,this._currentTail=new z,this._shape=e,this._attrPos=new st(new Float32Array(396),3),this.setAttribute("position",this._attrPos),this._attrIndex=new st(new Uint16Array(264),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;const t=this._shape.radius/this.worldScale;this._currentRadius!==t&&(this._currentRadius=t,e=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),e=!0);const r=zo.copy(this._shape.tail).divideScalar(this.worldScale);this._currentTail.distanceToSquared(r)>1e-10&&(this._currentTail.copy(r),e=!0),e&&this._buildPosition()}_buildPosition(){zo.copy(this._currentTail).sub(this._currentOffset);const e=zo.length()/this._currentRadius;for(let i=0;i<=16;i++){const s=i/16*Math.PI;this._attrPos.setXYZ(i,-Math.sin(s),-Math.cos(s),0),this._attrPos.setXYZ(17+i,e+Math.sin(s),Math.cos(s),0),this._attrPos.setXYZ(34+i,-Math.sin(s),0,-Math.cos(s)),this._attrPos.setXYZ(51+i,e+Math.sin(s),0,Math.cos(s))}for(let i=0;i<32;i++){const s=i/16*Math.PI;this._attrPos.setXYZ(68+i,0,Math.sin(s),Math.cos(s)),this._attrPos.setXYZ(100+i,e,Math.sin(s),Math.cos(s))}const t=Math.atan2(zo.y,Math.sqrt(zo.x*zo.x+zo.z*zo.z)),r=-Math.atan2(zo.z,zo.x);this.rotateZ(t),this.rotateY(r),this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<34;e++){const t=(e+1)%34;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(68+e*2,34+e,34+t)}for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(136+e*2,68+e,68+t),this._attrIndex.setXY(200+e*2,100+e,100+t)}this._attrIndex.needsUpdate=!0}}class xle extends zt{constructor(e){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new z,this._shape=e,this._attrPos=new st(new Float32Array(32*3*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new st(new Uint16Array(64*3),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;const t=this._shape.radius/this.worldScale;this._currentRadius!==t&&(this._currentRadius=t,e=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.needsUpdate=!0}}const Ile=new z;class sk extends Er{constructor(e){if(super(),this.matrixAutoUpdate=!1,this.collider=e,this.collider.shape instanceof vG)this._geometry=new xle(this.collider.shape);else if(this.collider.shape instanceof mG)this._geometry=new ble(this.collider.shape);else throw new Error("VRMSpringBoneColliderHelper: Unknown collider shape type detected");const t=new NA({color:16711935,depthTest:!1,depthWrite:!1});this._line=new a0(this._geometry,t),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(e){this.collider.updateWorldMatrix(!0,!1),this.matrix.copy(this.collider.matrixWorld);const t=this.matrix.elements;this._geometry.worldScale=Ile.set(t[0],t[1],t[2]).length(),this._geometry.update(),super.updateMatrixWorld(e)}}class Fle extends zt{constructor(e){super(),this.worldScale=1,this._currentRadius=0,this._currentTail=new z,this._springBone=e,this._attrPos=new st(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new st(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;const t=this._springBone.settings.hitRadius/this.worldScale;this._currentRadius!==t&&(this._currentRadius=t,e=!0),this._currentTail.equals(this._springBone.initialLocalChildPosition)||(this._currentTail.copy(this._springBone.initialLocalChildPosition),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}}const Ele=new z;class Ule extends Er{constructor(e){super(),this.matrixAutoUpdate=!1,this.springBone=e,this._geometry=new Fle(this.springBone);const t=new NA({color:16776960,depthTest:!1,depthWrite:!1});this._line=new a0(this._geometry,t),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(e){this.springBone.bone.updateWorldMatrix(!0,!1),this.matrix.copy(this.springBone.bone.matrixWorld);const t=this.matrix.elements;this._geometry.worldScale=Ele.set(t[0],t[1],t[2]).length(),this._geometry.update(),super.updateMatrixWorld(e)}}class ok extends kt{constructor(e){super(),this.shape=e}}const _le=new Oe;function yG(n){return n.invert?n.invert():n.getInverse(_le.copy(n)),n}class Sle{constructor(e){this._inverseCache=new Oe,this._shouldUpdateInverse=!0,this.matrix=e;const t={set:(r,i,s)=>(this._shouldUpdateInverse=!0,r[i]=s,!0)};this._originalElements=e.elements,e.elements=new Proxy(e.elements,t)}get inverse(){return this._shouldUpdateInverse&&(this._inverseCache.copy(this.matrix),yG(this._inverseCache),this._shouldUpdateInverse=!1),this._inverseCache}revert(){this.matrix.elements=this._originalElements}}const Qle=new Oe,Ha=new z,Mp=new z,Rle=new z,cf=new z,ak=new z,Tp=new z,Ak=new et,uf=new Oe,Mle=new Oe;class Tle{constructor(e,t,r={},i=[]){var s,o,a,A,l,c;this._currentTail=new z,this._prevTail=new z,this._boneAxis=new z,this._worldSpaceBoneLength=0,this._center=null,this._initialLocalMatrix=new Oe,this._initialLocalRotation=new et,this._initialLocalChildPosition=new z,this.bone=e,this.bone.matrixAutoUpdate=!1,this.child=t,this.settings={hitRadius:(s=r.hitRadius)!==null&&s!==void 0?s:0,stiffness:(o=r.stiffness)!==null&&o!==void 0?o:1,gravityPower:(a=r.gravityPower)!==null&&a!==void 0?a:0,gravityDir:(l=(A=r.gravityDir)===null||A===void 0?void 0:A.clone())!==null&&l!==void 0?l:new z(0,-1,0),dragForce:(c=r.dragForce)!==null&&c!==void 0?c:.4},this.colliderGroups=i}get center(){return this._center}set center(e){var t;!((t=this._center)===null||t===void 0)&&t.userData.inverseCacheProxy&&(this._center.userData.inverseCacheProxy.revert(),delete this._center.userData.inverseCacheProxy),this._center=e,this._center&&(this._center.userData.inverseCacheProxy||(this._center.userData.inverseCacheProxy=new Sle(this._center.matrixWorld)))}get initialLocalChildPosition(){return this._initialLocalChildPosition}get _parentMatrixWorld(){return this.bone.parent?this.bone.parent.matrixWorld:Qle}setInitState(){this._initialLocalMatrix.copy(this.bone.matrix),this._initialLocalRotation.copy(this.bone.quaternion),this.child?this._initialLocalChildPosition.copy(this.child.position):this._initialLocalChildPosition.copy(this.bone.position).normalize().multiplyScalar(.07);const e=this._getMatrixWorldToCenter(uf);this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(e),this._prevTail.copy(this._currentTail),this._boneAxis.copy(this._initialLocalChildPosition).normalize()}reset(){this.bone.quaternion.copy(this._initialLocalRotation),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix);const e=this._getMatrixWorldToCenter(uf);this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(e),this._prevTail.copy(this._currentTail)}update(e){if(e<=0)return;this._calcWorldSpaceBoneLength(),cf.setFromMatrixPosition(this.bone.matrixWorld);let t=this._getMatrixWorldToCenter(uf);ak.copy(cf).applyMatrix4(t);const r=Ak.setFromRotationMatrix(t),i=Mle.copy(t).multiply(this._parentMatrixWorld),s=Mp.copy(this._boneAxis).applyMatrix4(this._initialLocalMatrix).applyMatrix4(i).sub(ak).normalize(),o=Rle.copy(this.settings.gravityDir).applyQuaternion(r).normalize(),a=this._getMatrixCenterToWorld(uf);Tp.copy(this._currentTail).add(Ha.copy(this._currentTail).sub(this._prevTail).multiplyScalar(1-this.settings.dragForce)).add(Ha.copy(s).multiplyScalar(this.settings.stiffness*e)).add(Ha.copy(o).multiplyScalar(this.settings.gravityPower*e)).applyMatrix4(a),Tp.sub(cf).normalize().multiplyScalar(this._worldSpaceBoneLength).add(cf),this._collision(Tp),t=this._getMatrixWorldToCenter(uf),this._prevTail.copy(this._currentTail),this._currentTail.copy(Ha.copy(Tp).applyMatrix4(t));const A=yG(uf.copy(this._parentMatrixWorld).multiply(this._initialLocalMatrix)),l=Ak.setFromUnitVectors(this._boneAxis,Ha.copy(Tp).applyMatrix4(A).normalize());this.bone.quaternion.copy(this._initialLocalRotation).multiply(l),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix)}_collision(e){this.colliderGroups.forEach(t=>{t.colliders.forEach(r=>{const i=r.shape.calculateCollision(r.matrixWorld,e,this.settings.hitRadius,Ha);i<0&&(e.add(Ha.multiplyScalar(-i)),e.sub(cf).normalize().multiplyScalar(this._worldSpaceBoneLength).add(cf))})})}_calcWorldSpaceBoneLength(){Ha.setFromMatrixPosition(this.bone.matrixWorld),this.child?Mp.setFromMatrixPosition(this.child.matrixWorld):(Mp.copy(this._initialLocalChildPosition),Mp.applyMatrix4(this.bone.matrixWorld)),this._worldSpaceBoneLength=Ha.sub(Mp).length()}_getMatrixCenterToWorld(e){return this._center?e.copy(this._center.matrixWorld):e.identity(),e}_getMatrixWorldToCenter(e){return this._center?e.copy(this._center.userData.inverseCacheProxy.inverse):e.identity(),e}}function Xv(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})}function Nle(n,e){const t=[];let r=n;for(;r!==null;)t.unshift(r),r=r.parent;t.forEach(i=>{e(i)})}function BG(n,e){n.children.forEach(t=>{e(t)||BG(t,e)})}class lk{constructor(){this._joints=new Set,this._objectSpringBonesMap=new Map}get joints(){return this._joints}get springBones(){return console.warn("VRMSpringBoneManager: springBones is deprecated. use joints instead."),this._joints}get colliderGroups(){const e=new Set;return this._joints.forEach(t=>{t.colliderGroups.forEach(r=>{e.add(r)})}),Array.from(e)}get colliders(){const e=new Set;return this.colliderGroups.forEach(t=>{t.colliders.forEach(r=>{e.add(r)})}),Array.from(e)}addJoint(e){this._joints.add(e);let t=this._objectSpringBonesMap.get(e.bone);t==null&&(t=new Set,this._objectSpringBonesMap.set(e.bone,t)),t.add(e)}addSpringBone(e){console.warn("VRMSpringBoneManager: addSpringBone() is deprecated. use addJoint() instead."),this.addJoint(e)}deleteJoint(e){this._joints.delete(e),this._objectSpringBonesMap.get(e.bone).delete(e)}deleteSpringBone(e){console.warn("VRMSpringBoneManager: deleteSpringBone() is deprecated. use deleteJoint() instead."),this.deleteJoint(e)}setInitState(){const e=new Set,t=new Set,r=new Set;for(const i of this._joints)this._processSpringBone(i,e,t,r,s=>s.setInitState())}reset(){const e=new Set,t=new Set,r=new Set;for(const i of this._joints)this._processSpringBone(i,e,t,r,s=>s.reset())}update(e){const t=new Set,r=new Set,i=new Set;for(const s of this._joints)this._processSpringBone(s,t,r,i,o=>o.update(e)),BG(s.bone,o=>{var a,A;return((A=(a=this._objectSpringBonesMap.get(o))===null||a===void 0?void 0:a.size)!==null&&A!==void 0?A:0)>0?!0:(o.updateWorldMatrix(!1,!1),!1)})}_processSpringBone(e,t,r,i,s){if(r.has(e))return;if(t.has(e))throw new Error("VRMSpringBoneManager: Circular dependency detected while updating springbones");t.add(e);const o=this._getDependencies(e);for(const a of o)Nle(a,A=>{const l=this._objectSpringBonesMap.get(A);if(l)for(const c of l)this._processSpringBone(c,t,r,i,s);else i.has(A)||(A.updateWorldMatrix(!1,!1),i.add(A))});e.bone.updateMatrix(),e.bone.updateWorldMatrix(!1,!1),s(e),i.add(e.bone),r.add(e)}_getDependencies(e){const t=new Set,r=e.bone.parent;return r&&t.add(r),e.colliderGroups.forEach(i=>{i.colliders.forEach(s=>{t.add(s)})}),t}}const kle=new Set(["1.0","1.0-beta"]);class Zc{constructor(e,t){this.parser=e,this.jointHelperRoot=t==null?void 0:t.jointHelperRoot,this.colliderHelperRoot=t==null?void 0:t.colliderHelperRoot}get name(){return Zc.EXTENSION_NAME}afterRoot(e){return Xv(this,void 0,void 0,function*(){e.userData.vrmSpringBoneManager=yield this._import(e)})}_import(e){return Xv(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const r=yield this._v0Import(e);return r??null})}_v1Import(e){var t,r,i,s,o;return Xv(this,void 0,void 0,function*(){const a=e.parser.json;if(!(((t=a.extensionsUsed)===null||t===void 0?void 0:t.indexOf(Zc.EXTENSION_NAME))!==-1))return null;const l=new lk,c=yield e.parser.getDependencies("node"),u=(r=a.extensions)===null||r===void 0?void 0:r[Zc.EXTENSION_NAME];if(!u)return null;const f=u.specVersion;if(!kle.has(f))return console.warn(`VRMSpringBoneLoaderPlugin: Unknown ${Zc.EXTENSION_NAME} specVersion "${f}"`),null;const d=(i=u.colliders)===null||i===void 0?void 0:i.map((p,m)=>{var g,v,y,w,C;const b=c[p.node],F=p.shape;if(F.sphere)return this._importSphereCollider(b,{offset:new z().fromArray((g=F.sphere.offset)!==null&&g!==void 0?g:[0,0,0]),radius:(v=F.sphere.radius)!==null&&v!==void 0?v:0});if(F.capsule)return this._importCapsuleCollider(b,{offset:new z().fromArray((y=F.capsule.offset)!==null&&y!==void 0?y:[0,0,0]),radius:(w=F.capsule.radius)!==null&&w!==void 0?w:0,tail:new z().fromArray((C=F.capsule.tail)!==null&&C!==void 0?C:[0,0,0])});throw new Error(`VRMSpringBoneLoaderPlugin: The collider #${m} has no valid shape`)}),h=(s=u.colliderGroups)===null||s===void 0?void 0:s.map((p,m)=>{var g;return{colliders:((g=p.colliders)!==null&&g!==void 0?g:[]).map(y=>{const w=d==null?void 0:d[y];if(w==null)throw new Error(`VRMSpringBoneLoaderPlugin: The colliderGroup #${m} attempted to use a collider #${y} but not found`);return w}),name:p.name}});return(o=u.springs)===null||o===void 0||o.forEach((p,m)=>{var g;const v=p.joints,y=(g=p.colliderGroups)===null||g===void 0?void 0:g.map(b=>{const F=h==null?void 0:h[b];if(F==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${m} attempted to use a colliderGroup ${b} but not found`);return F}),w=p.center!=null?c[p.center]:void 0;let C;v.forEach(b=>{if(C){const F=C.node,I=c[F],S=b.node,T=c[S],H={hitRadius:C.hitRadius,dragForce:C.dragForce,gravityPower:C.gravityPower,stiffness:C.stiffness,gravityDir:C.gravityDir!=null?new z().fromArray(C.gravityDir):void 0},X=this._importJoint(I,T,H,y);w&&(X.center=w),l.addJoint(X)}C=b})}),l.setInitState(),l})}_v0Import(e){var t,r,i;return Xv(this,void 0,void 0,function*(){const s=e.parser.json;if(!(((t=s.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRM"))!==-1))return null;const a=(r=s.extensions)===null||r===void 0?void 0:r.VRM,A=a==null?void 0:a.secondaryAnimation;if(!A)return null;const l=A==null?void 0:A.boneGroups;if(!l)return null;const c=new lk,u=yield e.parser.getDependencies("node"),f=(i=A.colliderGroups)===null||i===void 0?void 0:i.map(d=>{var h;const p=u[d.node];return{colliders:((h=d.colliders)!==null&&h!==void 0?h:[]).map((g,v)=>{var y,w,C;const b=new z(0,0,0);return g.offset&&b.set((y=g.offset.x)!==null&&y!==void 0?y:0,(w=g.offset.y)!==null&&w!==void 0?w:0,g.offset.z?-g.offset.z:0),this._importSphereCollider(p,{offset:b,radius:(C=g.radius)!==null&&C!==void 0?C:0})})}});return l==null||l.forEach((d,h)=>{const p=d.bones;p&&p.forEach(m=>{var g,v,y,w;const C=u[m],b=new z;d.gravityDir?b.set((g=d.gravityDir.x)!==null&&g!==void 0?g:0,(v=d.gravityDir.y)!==null&&v!==void 0?v:0,(y=d.gravityDir.z)!==null&&y!==void 0?y:0):b.set(0,-1,0);const F=d.center!=null?u[d.center]:void 0,I={hitRadius:d.hitRadius,dragForce:d.dragForce,gravityPower:d.gravityPower,stiffness:d.stiffiness,gravityDir:b},S=(w=d.colliderGroups)===null||w===void 0?void 0:w.map(T=>{const H=f==null?void 0:f[T];if(H==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${h} attempted to use a colliderGroup ${T} but not found`);return H});C.traverse(T=>{var H;const X=(H=T.children[0])!==null&&H!==void 0?H:null,Q=this._importJoint(T,X,I,S);F&&(Q.center=F),c.addJoint(Q)})})}),e.scene.updateMatrixWorld(),c.setInitState(),c})}_importJoint(e,t,r,i){const s=new Tle(e,t,r,i);if(this.jointHelperRoot){const o=new Ule(s);this.jointHelperRoot.add(o),o.renderOrder=this.jointHelperRoot.renderOrder}return s}_importSphereCollider(e,t){const{offset:r,radius:i}=t,s=new vG({offset:r,radius:i}),o=new ok(s);if(e.add(o),this.colliderHelperRoot){const a=new sk(o);this.colliderHelperRoot.add(a),a.renderOrder=this.colliderHelperRoot.renderOrder}return o}_importCapsuleCollider(e,t){const{offset:r,radius:i,tail:s}=t,o=new mG({offset:r,radius:i,tail:s}),a=new ok(o);if(e.add(a),this.colliderHelperRoot){const A=new sk(a);this.colliderHelperRoot.add(A),A.renderOrder=this.colliderHelperRoot.renderOrder}return a}}Zc.EXTENSION_NAME="VRMC_springBone";class wG{constructor(e,t){var r,i,s,o,a,A,l,c,u,f;this.parser=e;const d=t==null?void 0:t.helperRoot,h=t==null?void 0:t.autoUpdateHumanBones;this.expressionPlugin=(r=t==null?void 0:t.expressionPlugin)!==null&&r!==void 0?r:new tb(e),this.firstPersonPlugin=(i=t==null?void 0:t.firstPersonPlugin)!==null&&i!==void 0?i:new gAe(e),this.humanoidPlugin=(s=t==null?void 0:t.humanoidPlugin)!==null&&s!==void 0?s:new bAe(e,{helperRoot:d,autoUpdateHumanBones:h}),this.lookAtPlugin=(o=t==null?void 0:t.lookAtPlugin)!==null&&o!==void 0?o:new DAe(e,{helperRoot:d}),this.metaPlugin=(a=t==null?void 0:t.metaPlugin)!==null&&a!==void 0?a:new PAe(e),this.mtoonMaterialPlugin=(A=t==null?void 0:t.mtoonMaterialPlugin)!==null&&A!==void 0?A:new Md(e),this.materialsHDREmissiveMultiplierPlugin=(l=t==null?void 0:t.materialsHDREmissiveMultiplierPlugin)!==null&&l!==void 0?l:new Fm(e),this.materialsV0CompatPlugin=(c=t==null?void 0:t.materialsV0CompatPlugin)!==null&&c!==void 0?c:new nle(e),this.springBonePlugin=(u=t==null?void 0:t.springBonePlugin)!==null&&u!==void 0?u:new Zc(e,{colliderHelperRoot:d,jointHelperRoot:d}),this.nodeConstraintPlugin=(f=t==null?void 0:t.nodeConstraintPlugin)!==null&&f!==void 0?f:new Oc(e,{helperRoot:d})}get name(){return"VRMLoaderPlugin"}beforeRoot(){return zv(this,void 0,void 0,function*(){yield this.materialsV0CompatPlugin.beforeRoot(),yield this.mtoonMaterialPlugin.beforeRoot()})}loadMesh(e){return zv(this,void 0,void 0,function*(){return yield this.mtoonMaterialPlugin.loadMesh(e)})}getMaterialType(e){const t=this.mtoonMaterialPlugin.getMaterialType(e);return t??null}extendMaterialParams(e,t){return zv(this,void 0,void 0,function*(){yield this.materialsHDREmissiveMultiplierPlugin.extendMaterialParams(e,t),yield this.mtoonMaterialPlugin.extendMaterialParams(e,t)})}afterRoot(e){return zv(this,void 0,void 0,function*(){yield this.metaPlugin.afterRoot(e),yield this.humanoidPlugin.afterRoot(e),yield this.expressionPlugin.afterRoot(e),yield this.lookAtPlugin.afterRoot(e),yield this.firstPersonPlugin.afterRoot(e),yield this.springBonePlugin.afterRoot(e),yield this.nodeConstraintPlugin.afterRoot(e),yield this.mtoonMaterialPlugin.afterRoot(e);const t=e.userData.vrmMeta,r=e.userData.vrmHumanoid;if(t&&r){const i=new OAe({scene:e.scene,expressionManager:e.userData.vrmExpressionManager,firstPerson:e.userData.vrmFirstPerson,humanoid:r,lookAt:e.userData.vrmLookAt,meta:t,materials:e.userData.vrmMToonMaterials,springBoneManager:e.userData.vrmSpringBoneManager,nodeConstraintManager:e.userData.vrmNodeConstraintManager});e.userData.vrm=i}})}}function ck(n){if(Object.values(n).forEach(e=>{e!=null&&e.isTexture&&e.dispose()}),n.isShaderMaterial){const e=n.uniforms;e&&Object.values(e).forEach(t=>{const r=t.value;r!=null&&r.isTexture&&r.dispose()})}n.dispose()}function Dle(n){const e=n.geometry;e&&e.dispose();const t=n.skeleton;t&&t.dispose();const r=n.material;r&&(Array.isArray(r)?r.forEach(i=>ck(i)):r&&ck(r))}function Vle(n){n.traverse(Dle)}function Lle(n){const e=new Map;n.traverse(t=>{if(t.type!=="SkinnedMesh")return;const r=t,s=r.geometry.getAttribute("skinIndex");let o=e.get(s);if(!o){const a=[],A=[],l={},c=s.array;for(let u=0;u<c.length;u++){const f=c[u];l[f]===void 0&&(l[f]=a.length,a.push(r.skeleton.bones[f]),A.push(r.skeleton.boneInverses[f])),c[u]=l[f]}s.copyArray(c),s.needsUpdate=!0,o=new ac(a,A),e.set(s,o)}r.bind(o,new Oe)})}function Ple(n){const e=new Map;n.traverse(t=>{var r,i,s,o;if(!t.isMesh)return;const a=t,A=a.geometry,l=A.index;if(l==null)return;const c=e.get(A);if(c!=null){a.geometry=c;return}const u=new zt;u.name=A.name,u.morphTargetsRelative=A.morphTargetsRelative,A.groups.forEach(p=>{u.addGroup(p.start,p.count,p.materialIndex)}),u.boundingBox=(i=(r=A.boundingBox)===null||r===void 0?void 0:r.clone())!==null&&i!==void 0?i:null,u.boundingSphere=(o=(s=A.boundingSphere)===null||s===void 0?void 0:s.clone())!==null&&o!==void 0?o:null,u.setDrawRange(A.drawRange.start,A.drawRange.count),u.userData=A.userData,e.set(A,u);const f=[],d=[];{const p=l.array,m=new p.constructor(p.length);let g=0;for(let v=0;v<p.length;v++){const y=p[v];let w=f[y];w==null&&(f[y]=g,d[g]=y,w=g,g++),m[v]=w}u.setIndex(new st(m,1,!1))}Object.keys(A.attributes).forEach(p=>{const m=A.attributes[p];if(m.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const g=m.array,{itemSize:v,normalized:y}=m,w=new g.constructor(d.length*v);d.forEach((C,b)=>{for(let F=0;F<v;F++)w[b*v+F]=g[C*v+F]}),u.setAttribute(p,new st(w,v,y))});let h=!0;Object.keys(A.morphAttributes).forEach(p=>{u.morphAttributes[p]=[];const m=A.morphAttributes[p];for(let g=0;g<m.length;g++){const v=m[g];if(v.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const y=v.array,{itemSize:w,normalized:C}=v,b=new y.constructor(d.length*w);d.forEach((F,I)=>{for(let S=0;S<w;S++)b[I*w+S]=y[F*w+S]}),h=h&&b.every(F=>F===0),u.morphAttributes[p][g]=new st(b,w,C)}}),h&&(u.morphAttributes={}),a.geometry=u}),Array.from(e.keys()).forEach(t=>{t.dispose()})}function Wle(n){var e;((e=n.meta)===null||e===void 0?void 0:e.metaVersion)==="0"&&(n.scene.rotation.y=Math.PI)}class Vh{constructor(){}}Vh.deepDispose=Vle;Vh.removeUnnecessaryJoints=Lle;Vh.removeUnnecessaryVertices=Ple;Vh.rotateVRM0=Wle;var Hn;(function(n){n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.LINEAR=9729]="LINEAR",n[n.REPEAT=10497]="REPEAT"})(Hn||(Hn={}));const gw="blend_",uk="vrmColliderSphere";class Ole{parse(e,t,r,i){const s=e.humanoid,o=e.meta,a=e.materials,A={},l={},c={},u=e.lookAt,f={generator:"UniGLTF-2.0.0",version:"2.0"};if(t)if(s)if(o)if(a){if(!u)throw new Error("lookAt is undefined or null")}else throw new Error("materials is undefined or null");else throw new Error("meta is undefined or null");else throw new Error("humanoid is undefined or null");else throw new Error("avatar is undefined or null");const d=a.filter(($,ae,te)=>te.findIndex(Ae=>Ae.name===$.name.replace(" (Outline)",""))===ae).map($=>$),h=d.map($=>$.name),p=r?{name:"icon",imageBitmap:r.image}:null,m=d.filter($=>$.map).map($=>{if(!$.map)throw new Error($.name+" map is null");return{name:$.name,imageBitmap:$.map.image}}),g=d.filter($=>$.userData.shadeTexture).map($=>{if(!$.userData.shadeTexture)throw new Error($.userData.shadeTexture+" map is null");return{name:$.name+"_shade",imageBitmap:$.userData.shadeTexture.image}}),v=m.concat(g),y=zle(v,p),w=Xle(y),C=Yle(y),b=Hle(d,v),F=t.children.filter($=>$.children.length>0&&$.children[0].type===si.Bone)[0],I=CG(F).filter($=>$.name!==uk),S=I.map($=>$.name),T=I.map($=>({children:$.children.filter(ae=>ae.name!==uk).map(ae=>S.indexOf(ae.name)),name:$.name,rotation:[$.quaternion.x,$.quaternion.y,$.quaternion.z,$.quaternion.w],scale:[$.scale.x,$.scale.y,$.scale.z],translation:[$.position.x,$.position.y,$.position.z]})),H=[],X=t.children.filter($=>$.type===si.Group||$.type===si.SkinnedMesh),Q=[];X.forEach($=>{const ae=$.type===si.Group?$.children[0]:$,te=ae.geometry.attributes;Q.push(new za(te.position,Hn.FLOAT,Jt.POSITION,bo.VEC3,ae.name,void 0)),Q.push(new za(te.normal,Hn.FLOAT,Jt.NORMAL,bo.VEC3,ae.name,void 0)),Q.push(new za(te.uv,Hn.FLOAT,Jt.UV,bo.VEC2,ae.name,void 0)),Q.push(new za(te.skinWeight,Hn.FLOAT,Jt.SKIN_WEIGHT,bo.VEC4,ae.name,void 0)),Q.push(new za(te.skinIndex,Hn.UNSIGNED_SHORT,Jt.SKIN_INDEX,bo.VEC4,ae.name,void 0)),($.type===si.Group?$.children.map(re=>re):[$]).forEach(re=>{if(!re.geometry.index)throw new Error(re.name+" geometry.index is null");Q.push(new za(re.geometry.index,Hn.UNSIGNED_INT,Jt.INDEX,bo.SCALAR,ae.name,re.name))}),ae.morphTargetDictionary||(ae.morphTargetDictionary={},ae.morphTargetInfluences=[],ae.geometry.morphAttributes={},ae.updateMorphTargets()),ae.geometry.userData.targetNames=[];for(const re in e.expressionManager.expressionMap){const me=e.expressionManager.expressionMap[re],Pe=me._binds.map(Se=>({node:I.length,index:Se.index,weight:Se.weight}));let _e=!1;for(const Se in ii)if(re.toLowerCase()===ii[Se].toLowerCase()){A[ii[Se]]={morphTargetBinds:Pe,isBinary:me.isBinary,overrideBlink:me.overrideBlink,overrideLookAt:me.overrideLookAt,overrideMouth:me.overrideMouth},_e=!0;break}!_e&&re.toLowerCase()==="surprise"&&(A.surprised={morphTargetBinds:Pe,isBinary:me.isBinary,overrideBlink:me.overrideBlink,overrideLookAt:me.overrideLookAt,overrideMouth:me.overrideMouth},_e=!0),_e===!1&&(l[re]={morphTargetBinds:Pe,isBinary:me.isBinary,overrideBlink:me.overrideBlink,overrideLookAt:me.overrideLookAt,overrideMouth:me.overrideMouth})}for(const re in ae.morphTargetDictionary){ae.geometry.userData.targetNames.push(re);const me=ae.morphTargetDictionary[re],Pe=ae.geometry.morphAttributes;Q.push(new za(Pe.position[me],Hn.FLOAT,Jt.BLEND_POSITION,bo.VEC3,ae.name,gw+re)),Q.push(new za(Pe.normal[me],Hn.FLOAT,Jt.BLEND_NORMAL,bo.VEC3,ae.name,gw+re))}}),Object.keys(A).length>0&&(c.preset=A),Object.keys(l).length>0&&(c.custom=l),X.forEach($=>{const ae=$.type===si.Group?$.children[0]:$,te=new Float32Array(ae.skeleton.boneInverses.map(Ae=>Ae.elements).flat());Q.push(new za(new st(te,16),Hn.FLOAT,Jt.BIND_MATRIX,bo.MAT4,ae.name,ae.name))}),H.push(...Q.map($=>({bufferView:-1,byteOffset:0,componentType:$.valueType,count:$.attribute.count,max:$.max,min:$.min,normalized:!1,type:$.accessorsType})));const B=Gle(X,Q,h);X.forEach(($,ae)=>{T.push({mesh:ae,name:$.name,rotation:[$.quaternion.x,$.quaternion.y,$.quaternion.z,$.quaternion.w],scale:[$.scale.x,$.scale.y,$.scale.z],skin:ae,translation:[$.position.x,$.position.y,$.position.z]})});const E=Jle(X,Q,S),R={offsetFromHeadBone:[0,0,0],rangeMapHorizontalInner:{inputMaxValue:u.applier.rangeMapHorizontalInner.inputMaxValue,outputScale:u.applier.rangeMapHorizontalInner.outputScale},rangeMapHorizontalOuter:{inputMaxValue:u.applier.rangeMapHorizontalOuter.inputMaxValue,outputScale:u.applier.rangeMapHorizontalOuter.outputScale},rangeMapVerticalDown:{inputMaxValue:u.applier.rangeMapVerticalDown.inputMaxValue,outputScale:u.applier.rangeMapVerticalDown.outputScale},rangeMapVerticalUp:{inputMaxValue:u.applier.rangeMapVerticalUp.inputMaxValue,outputScale:u.applier.rangeMapVerticalUp.outputScale},type:"bone"},k={humanBones:{}};for(const $ in s.humanBones)k.humanBones[$]={node:S.indexOf(s.humanBones[$].node.name)};const M=o,L=[];L.push(...v.map($=>({buffer:fk($.imageBitmap),type:Jt.IMAGE}))),L.push(...Q.map($=>({buffer:$.buffer,type:$.type}))),p&&L.push({buffer:fk(p.imageBitmap),type:Jt.IMAGE});let Z=0,P=0,U=0;const G=L.map(($,ae)=>{const te={buffer:0,byteLength:$.buffer.byteLength,byteOffset:Z,target:$.type===Jt.IMAGE||$.type===Jt.BIND_MATRIX?void 0:$.type===Jt.INDEX?Hn.ELEMENT_ARRAY_BUFFER:Hn.ARRAY_BUFFER};return Z+=$.buffer.byteLength,$.type===Jt.IMAGE?y[P++].bufferView=ae:H[U++].bufferView=ae,te}),oe=Kle(t,T),D={accessors:H,asset:f,buffers:[{byteLength:Z}],bufferViews:G,extensions:{VRMC_vrm:{expressions:c,humanoid:k,lookAt:R,meta:M,specVersion:"1.0"}},extensionsUsed:["KHR_materials_unlit","KHR_texture_transform","VRMC_materials_mtoon","VRMC_vrm"],images:y,materials:b,meshes:B,nodes:T,samplers:w,avatar:0,scenes:oe,skins:E,textures:C},K=new dk(_E(JSON.stringify(D,void 0,2)),"JSON"),ce=new dk(pg(L.map($=>$.buffer)),"BIN\0"),le=pg([K.buffer,ce.buffer]),he=pg([_E("glTF"),UE(2,4),UE(le.byteLength+12,4)]);i(pg([he,le]))}}function CG(n){return n.children.length<=0?[n]:[n].concat(n.children.map(e=>CG(e)).flat())}function fk(n){const e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0);const t=e.toDataURL("image/png"),r=atob(t.split(",")[1]),i=new ArrayBuffer(r.length),s=new DataView(i);for(let o=0;o<r.length;o++)s.setUint8(o,r.charCodeAt(o));return i}function UE(n,e){const t=new ArrayBuffer(e);return new DataView(t).setUint32(0,n,!0),t}function _E(n){return new TextEncoder().encode(n).buffer}function pg(n){let e=0;for(let i=0;i<n.length;i++)e+=n[i].byteLength;const t=new Uint8Array(e);let r=0;for(let i=0;i<n.length;++i)t.set(new Uint8Array(n[i]),r),r+=n[i].byteLength;return t.buffer}function Zle(n,e){const t=e===Hn.UNSIGNED_SHORT?2:4,r=n.array;let i=0;const s=new ArrayBuffer(n.count*n.itemSize*t),o=new DataView(s);for(let a=0;a<n.count;a++)for(let A=0;A<n.itemSize;A++){let l;n.itemSize>4?l=r[a*n.itemSize+A]:A===0?l=n.getX(a):A===1?l=n.getY(a):A===2?l=n.getZ(a):l=n.getW(a),e===Hn.UNSIGNED_SHORT?o.setUint16(i,l,!0):e===Hn.UNSIGNED_INT?o.setUint32(i,l,!0):o.setFloat32(i,l,!0),i+=t}return s}let dk=class{constructor(e,t){this.data=e,this.type=t;const r=this.data;this.buffer=pg([UE(r.byteLength,4),_E(this.type),r])}paddingBinary(e,t){const r=Math.ceil(e.byteLength/4)*4;if(e.byteLength===r)return e;const i=new Uint8Array(r);i.set(new Uint8Array(e),0);for(let s=e.byteLength;s<r;s++)i.set(new Uint8Array(t),s);return i.buffer}},za=class{constructor(e,t,r,i,s,o){this.attribute=e,this.type=r,this.valueType=t,this.accessorsType=i,this.meshName=s,this.name=o,this.buffer=Zle(this.attribute,this.valueType),this.max=r===Jt.POSITION||r===Jt.BLEND_POSITION?[Math.max.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===0)),Math.max.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===1)),Math.max.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===2))]:void 0,this.min=r===Jt.POSITION||r===Jt.BLEND_POSITION?[Math.min.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===0)),Math.min.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===1)),Math.min.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===2))]:void 0}};var dd;(function(n){n.MeshBasicMaterial="MeshBasicMaterial",n.MeshStandardMaterial="MeshStandardMaterial",n.MToonMaterial="MToonMaterial"})(dd||(dd={}));var bo;(function(n){n.SCALAR="SCALAR",n.VEC2="VEC2",n.VEC3="VEC3",n.VEC4="VEC4",n.MAT4="MAT4"})(bo||(bo={}));var Jt;(function(n){n.POSITION="POSITION",n.NORMAL="NORMAL",n.UV="UV",n.INDEX="INDEX",n.SKIN_WEIGHT="SKIN_WEIGHT",n.SKIN_INDEX="SKIN_INDEX",n.BLEND_POSITION="BLEND_POSITION",n.BLEND_NORMAL="BLEND_NORMAL",n.BIND_MATRIX="BIND_MATRIX",n.IMAGE="IMAGE"})(Jt||(Jt={}));var si;(function(n){n.Group="Group",n.SkinnedMesh="SkinnedMesh",n.Object3D="Object3D",n.Bone="Bone"})(si||(si={}));const Gle=(n,e,t)=>n.map(r=>{const i=r.type===si.Group?r.children[0]:r,s=r.type===si.Group?r.children.map(o=>o):[r];return{name:r.name,primitives:s.map(o=>{const a=e.map(l=>l.meshName===i.name?l.type:null),A=Array.isArray(o.material)?o.material[0].name:o.material.name;return{attributes:{JOINTS_0:a.indexOf(Jt.SKIN_INDEX),NORMAL:a.indexOf(Jt.NORMAL),POSITION:a.indexOf(Jt.POSITION),TEXCOORD_0:a.indexOf(Jt.UV),WEIGHTS_0:a.indexOf(Jt.SKIN_WEIGHT)},extras:{targetNames:o.geometry.userData.targetNames},indices:e.map(l=>l.type===Jt.INDEX&&l.meshName===i.name?l.name:null).indexOf(o.name),material:t.indexOf(A),mode:4,targets:i.geometry.userData.targetNames?i.geometry.userData.targetNames.map(l=>({NORMAL:e.map(c=>c.type===Jt.BLEND_NORMAL&&c.meshName===i.name?c.name:null).indexOf(gw+l),POSITION:e.map(c=>c.type===Jt.BLEND_POSITION&&c.meshName===i.name?c.name:null).indexOf(gw+l)})):void 0}})}}),Jle=(n,e,t)=>n.map(r=>{const i=r.type===si.Group?r.children[0]:r;return{inverseBindMatrices:e.map(s=>s.type===Jt.BIND_MATRIX?s.meshName:null).indexOf(i.name),joints:i.skeleton.bones.map(s=>t.indexOf(s.name)),skeleton:t.indexOf(i.skeleton.bones[0].name)}}),Hle=(n,e)=>n.map(t=>{let r,i=null;if(t=t.userData.vrmMaterial?t.userData.vrmMaterial:t,t.type==="ShaderMaterial")i=t.userData.gltfExtensions.VRMC_materials_mtoon,i.shadeMultiplyTexture={index:e.map(c=>c.name).indexOf(t.uniforms.shadeMultiplyTexture.name)},r=t.color?[1,1,1,1]:void 0;else{const l=t;r=l.color?[l.color.r,l.color.g,l.color.b,1]:void 0}let s=-1;t.map?s=e.map(l=>l.name).indexOf(t.name):t.uniforms&&t.uniforms.map&&(s=e.map(l=>l.name).indexOf(t.uniforms.map.name));const o=s>=0?{extensions:{KHR_texture_transform:{offset:[0,0],scale:[1,1]}},index:s,texCoord:0}:void 0,a=(()=>{switch(t.type){case dd.MeshStandardMaterial:return t.metalness;case dd.MeshBasicMaterial:return 0;default:return 0}})(),A=(()=>{switch(t.type){case dd.MeshStandardMaterial:return t.roughness;case dd.MeshBasicMaterial:return .9;default:return .9}})();return{alphaCutoff:t.alphaTest>0?t.alphaTest:void 0,alphaMode:t.transparent?"BLEND":t.alphaTest>0?"MASK":"OPAQUE",doubleSided:t.side===2,extensions:t.type==="ShaderMaterial"?{KHR_materials_unlit:{},VRMC_materials_mtoon:i}:void 0,name:t.name,pbrMetallicRoughness:{baseColorFactor:r,baseColorTexture:o,metallicFactor:a,roughnessFactor:A}}}),zle=(n,e)=>(e?n.concat(e):n).filter(t=>t&&t.imageBitmap).map(t=>({bufferView:-1,mimeType:"image/png",name:t.name})),Xle=n=>n.map(()=>({magFilter:Hn.LINEAR,minFilter:Hn.LINEAR,wrapS:Hn.REPEAT,wrapT:Hn.REPEAT})),Yle=n=>n.map((e,t)=>({sampler:0,source:t})),Kle=(n,e)=>{const t=e.map(r=>r.name);return[{nodes:n.children.filter(r=>r.type===si.Object3D||r.type===si.SkinnedMesh||r.type===si.Group||r.type===si.Bone).map(r=>t.indexOf(r.name))}]},bG=0,jle=1,xG=2,hk=2,kI=1.25,pk=1,tB=6*4+4+4,SE=65535,$le=Math.pow(2,-24);class Yv{constructor(){}}function Aa(n,e,t){return t.min.x=e[n],t.min.y=e[n+1],t.min.z=e[n+2],t.max.x=e[n+3],t.max.y=e[n+4],t.max.z=e[n+5],t}function gk(n){let e=-1,t=-1/0;for(let r=0;r<3;r++){const i=n[r+3]-n[r];i>t&&(t=i,e=r)}return e}function mk(n,e){e.set(n)}function vk(n,e,t){let r,i;for(let s=0;s<3;s++){const o=s+3;r=n[s],i=e[s],t[s]=r<i?r:i,r=n[o],i=e[o],t[o]=r>i?r:i}}function Kv(n,e,t){for(let r=0;r<3;r++){const i=e[n+2*r],s=e[n+2*r+1],o=i-s,a=i+s;o<t[r]&&(t[r]=o),a>t[r+3]&&(t[r+3]=a)}}function Np(n){const e=n[3]-n[0],t=n[4]-n[1],r=n[5]-n[2];return 2*(e*t+t*r+r*e)}function qle(n,e){if(!n.index){const t=n.attributes.position.count,r=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let i;t>65535?i=new Uint32Array(new r(4*t)):i=new Uint16Array(new r(2*t)),n.setIndex(new st(i,1));for(let s=0;s<t;s++)i[s]=s}}function ece(n){if(!n.groups||!n.groups.length)return[{offset:0,count:n.index.count/3}];const e=[],t=new Set;for(const i of n.groups)t.add(i.start),t.add(i.start+i.count);const r=Array.from(t.values()).sort((i,s)=>i-s);for(let i=0;i<r.length-1;i++){const s=r[i],o=r[i+1];e.push({offset:s/3,count:(o-s)/3})}return e}function DI(n,e,t,r,i=null){let s=1/0,o=1/0,a=1/0,A=-1/0,l=-1/0,c=-1/0,u=1/0,f=1/0,d=1/0,h=-1/0,p=-1/0,m=-1/0;const g=i!==null;for(let v=e*6,y=(e+t)*6;v<y;v+=6){const w=n[v+0],C=n[v+1],b=w-C,F=w+C;b<s&&(s=b),F>A&&(A=F),g&&w<u&&(u=w),g&&w>h&&(h=w);const I=n[v+2],S=n[v+3],T=I-S,H=I+S;T<o&&(o=T),H>l&&(l=H),g&&I<f&&(f=I),g&&I>p&&(p=I);const X=n[v+4],Q=n[v+5],B=X-Q,E=X+Q;B<a&&(a=B),E>c&&(c=E),g&&X<d&&(d=X),g&&X>m&&(m=X)}r[0]=s,r[1]=o,r[2]=a,r[3]=A,r[4]=l,r[5]=c,g&&(i[0]=u,i[1]=f,i[2]=d,i[3]=h,i[4]=p,i[5]=m)}function tce(n,e,t,r){let i=1/0,s=1/0,o=1/0,a=-1/0,A=-1/0,l=-1/0;for(let c=e*6,u=(e+t)*6;c<u;c+=6){const f=n[c+0];f<i&&(i=f),f>a&&(a=f);const d=n[c+2];d<s&&(s=d),d>A&&(A=d);const h=n[c+4];h<o&&(o=h),h>l&&(l=h)}r[0]=i,r[1]=s,r[2]=o,r[3]=a,r[4]=A,r[5]=l}function nce(n,e,t,r,i){let s=t,o=t+r-1;const a=i.pos,A=i.axis*2;for(;;){for(;s<=o&&e[s*6+A]<a;)s++;for(;s<=o&&e[o*6+A]>=a;)o--;if(s<o){for(let l=0;l<3;l++){let c=n[s*3+l];n[s*3+l]=n[o*3+l],n[o*3+l]=c;let u=e[s*6+l*2+0];e[s*6+l*2+0]=e[o*6+l*2+0],e[o*6+l*2+0]=u;let f=e[s*6+l*2+1];e[s*6+l*2+1]=e[o*6+l*2+1],e[o*6+l*2+1]=f}s++,o--}else return s}}const $a=32,rce=(n,e)=>n.candidate-e.candidate,$A=new Array($a).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),jv=new Float32Array(6);function ice(n,e,t,r,i,s){let o=-1,a=0;if(s===bG)o=gk(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===jle)o=gk(n),o!==-1&&(a=sce(t,r,i,o));else if(s===xG){const A=Np(n);let l=kI*i;const c=r*6,u=(r+i)*6;for(let f=0;f<3;f++){const d=e[f],m=(e[f+3]-d)/$a;if(i<$a/4){const g=[...$A];g.length=i;let v=0;for(let w=c;w<u;w+=6,v++){const C=g[v];C.candidate=t[w+2*f],C.count=0;const{bounds:b,leftCacheBounds:F,rightCacheBounds:I}=C;for(let S=0;S<3;S++)I[S]=1/0,I[S+3]=-1/0,F[S]=1/0,F[S+3]=-1/0,b[S]=1/0,b[S+3]=-1/0;Kv(w,t,b)}g.sort(rce);let y=i;for(let w=0;w<y;w++){const C=g[w];for(;w+1<y&&g[w+1].candidate===C.candidate;)g.splice(w+1,1),y--}for(let w=c;w<u;w+=6){const C=t[w+2*f];for(let b=0;b<y;b++){const F=g[b];C>=F.candidate?Kv(w,t,F.rightCacheBounds):(Kv(w,t,F.leftCacheBounds),F.count++)}}for(let w=0;w<y;w++){const C=g[w],b=C.count,F=i-C.count,I=C.leftCacheBounds,S=C.rightCacheBounds;let T=0;b!==0&&(T=Np(I)/A);let H=0;F!==0&&(H=Np(S)/A);const X=pk+kI*(T*b+H*F);X<l&&(o=f,l=X,a=C.candidate)}}else{for(let y=0;y<$a;y++){const w=$A[y];w.count=0,w.candidate=d+m+y*m;const C=w.bounds;for(let b=0;b<3;b++)C[b]=1/0,C[b+3]=-1/0}for(let y=c;y<u;y+=6){let b=~~((t[y+2*f]-d)/m);b>=$a&&(b=$a-1);const F=$A[b];F.count++,Kv(y,t,F.bounds)}const g=$A[$a-1];mk(g.bounds,g.rightCacheBounds);for(let y=$a-2;y>=0;y--){const w=$A[y],C=$A[y+1];vk(w.bounds,C.rightCacheBounds,w.rightCacheBounds)}let v=0;for(let y=0;y<$a-1;y++){const w=$A[y],C=w.count,b=w.bounds,I=$A[y+1].rightCacheBounds;C!==0&&(v===0?mk(b,jv):vk(b,jv,jv)),v+=C;let S=0,T=0;v!==0&&(S=Np(jv)/A);const H=i-v;H!==0&&(T=Np(I)/A);const X=pk+kI*(S*v+T*H);X<l&&(o=f,l=X,a=w.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function sce(n,e,t,r){let i=0;for(let s=e,o=e+t;s<o;s++)i+=n[s*6+r*2];return i/t}function oce(n,e){const t=n.attributes.position,r=n.index.array,i=r.length/3,s=new Float32Array(i*6),o=t.normalized,a=t.array,A=t.offset||0;let l=3;t.isInterleavedBufferAttribute&&(l=t.data.stride);const c=["getX","getY","getZ"];for(let u=0;u<i;u++){const f=u*3,d=u*6;let h,p,m;o?(h=r[f+0],p=r[f+1],m=r[f+2]):(h=r[f+0]*l+A,p=r[f+1]*l+A,m=r[f+2]*l+A);for(let g=0;g<3;g++){let v,y,w;o?(v=t[c[g]](h),y=t[c[g]](p),w=t[c[g]](m)):(v=a[h+g],y=a[p+g],w=a[m+g]);let C=v;y<C&&(C=y),w<C&&(C=w);let b=v;y>b&&(b=y),w>b&&(b=w);const F=(b-C)/2,I=g*2;s[d+I+0]=C+F,s[d+I+1]=F+(Math.abs(C)+F)*$le,C<e[g]&&(e[g]=C),b>e[g+3]&&(e[g+3]=b)}}return s}function ace(n,e){function t(g){f&&f(g/d)}function r(g,v,y,w=null,C=0){if(!h&&C>=A&&(h=!0,l&&(console.warn(`MeshBVH: Max depth of ${A} reached when generating BVH. Consider increasing maxDepth.`),console.warn(n))),y<=c||C>=A)return t(v+y),g.offset=v,g.count=y,g;const b=ice(g.boundingData,w,o,v,y,u);if(b.axis===-1)return t(v+y),g.offset=v,g.count=y,g;const F=nce(a,o,v,y,b);if(F===v||F===v+y)t(v+y),g.offset=v,g.count=y;else{g.splitAxis=b.axis;const I=new Yv,S=v,T=F-v;g.left=I,I.boundingData=new Float32Array(6),DI(o,S,T,I.boundingData,s),r(I,S,T,s,C+1);const H=new Yv,X=F,Q=y-T;g.right=H,H.boundingData=new Float32Array(6),DI(o,X,Q,H.boundingData,s),r(H,X,Q,s,C+1)}return g}qle(n,e);const i=new Float32Array(6),s=new Float32Array(6),o=oce(n,i),a=n.index.array,A=e.maxDepth,l=e.verbose,c=e.maxLeafTris,u=e.strategy,f=e.onProgress,d=n.index.count/3;let h=!1;const p=[],m=ece(n);if(m.length===1){const g=m[0],v=new Yv;v.boundingData=i,tce(o,g.offset,g.count,s),r(v,g.offset,g.count,s),p.push(v)}else for(let g of m){const v=new Yv;v.boundingData=new Float32Array(6),DI(o,g.offset,g.count,v.boundingData,s),r(v,g.offset,g.count,s),p.push(v)}return p}function Ace(n,e){const t=ace(n,e);let r,i,s;const o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let c=0;c<t.length;c++){const u=t[c];let f=A(u);const d=new a(tB*f);r=new Float32Array(d),i=new Uint32Array(d),s=new Uint16Array(d),l(0,u),o.push(d)}return o;function A(c){return c.count?1:1+A(c.left)+A(c.right)}function l(c,u){const f=c/4,d=c/2,h=!!u.count,p=u.boundingData;for(let m=0;m<6;m++)r[f+m]=p[m];if(h){const m=u.offset,g=u.count;return i[f+6]=m,s[d+14]=g,s[d+15]=SE,c+tB}else{const m=u.left,g=u.right,v=u.splitAxis;let y;if(y=l(c+tB,m),y/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[f+6]=y/4,y=l(y,g),i[f+7]=v,y}}}class EA{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let r=1/0,i=-1/0;for(let s=0,o=e.length;s<o;s++){const A=e[s][t];r=A<r?A:r,i=A>i?A:i}this.min=r,this.max=i}setFromPoints(e,t){let r=1/0,i=-1/0;for(let s=0,o=t.length;s<o;s++){const a=t[s],A=e.dot(a);r=A<r?A:r,i=A>i?A:i}this.min=r,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}}EA.prototype.setFromBox=function(){const n=new z;return function(t,r){const i=r.min,s=r.max;let o=1/0,a=-1/0;for(let A=0;A<=1;A++)for(let l=0;l<=1;l++)for(let c=0;c<=1;c++){n.x=i.x*A+s.x*(1-A),n.y=i.y*l+s.y*(1-l),n.z=i.z*c+s.z*(1-c);const u=t.dot(n);o=Math.min(u,o),a=Math.max(u,a)}this.min=o,this.max=a}}();const lce=function(){const n=new z,e=new z,t=new z;return function(i,s,o){const a=i.start,A=n,l=s.start,c=e;t.subVectors(a,l),n.subVectors(i.end,i.start),e.subVectors(s.end,s.start);const u=t.dot(c),f=c.dot(A),d=c.dot(c),h=t.dot(A),m=A.dot(A)*d-f*f;let g,v;m!==0?g=(u*f-h*d)/m:g=0,v=(u+g*f)/d,o.x=g,o.y=v}}(),hS=function(){const n=new Ge,e=new z,t=new z;return function(i,s,o,a){lce(i,s,n);let A=n.x,l=n.y;if(A>=0&&A<=1&&l>=0&&l<=1){i.at(A,o),s.at(l,a);return}else if(A>=0&&A<=1){l<0?s.at(0,a):s.at(1,a),i.closestPointToPoint(a,!0,o);return}else if(l>=0&&l<=1){A<0?i.at(0,o):i.at(1,o),s.closestPointToPoint(o,!0,a);return}else{let c;A<0?c=i.start:c=i.end;let u;l<0?u=s.start:u=s.end;const f=e,d=t;if(i.closestPointToPoint(u,!0,e),s.closestPointToPoint(c,!0,t),f.distanceToSquared(u)<=d.distanceToSquared(c)){o.copy(f),a.copy(u);return}else{o.copy(c),a.copy(d);return}}}}(),cce=function(){const n=new z,e=new z,t=new AA,r=new BA;return function(s,o){const{radius:a,center:A}=s,{a:l,b:c,c:u}=o;if(r.start=l,r.end=c,r.closestPointToPoint(A,!0,n).distanceTo(A)<=a||(r.start=l,r.end=u,r.closestPointToPoint(A,!0,n).distanceTo(A)<=a)||(r.start=c,r.end=u,r.closestPointToPoint(A,!0,n).distanceTo(A)<=a))return!0;const p=o.getPlane(t);if(Math.abs(p.distanceToPoint(A))<=a){const g=p.projectPoint(A,e);if(o.containsPoint(g))return!0}return!1}}(),uce=1e-15;function ff(n){return Math.abs(n)<uce}class UA extends qi{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new z),this.satBounds=new Array(4).fill().map(()=>new EA),this.points=[this.a,this.b,this.c],this.sphere=new Cu,this.plane=new AA,this.needsUpdate=!0}intersectsSphere(e){return cce(e,this)}update(){const e=this.a,t=this.b,r=this.c,i=this.points,s=this.satAxes,o=this.satBounds,a=s[0],A=o[0];this.getNormal(a),A.setFromPoints(a,i);const l=s[1],c=o[1];l.subVectors(e,t),c.setFromPoints(l,i);const u=s[2],f=o[2];u.subVectors(t,r),f.setFromPoints(u,i);const d=s[3],h=o[3];d.subVectors(r,e),h.setFromPoints(d,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}UA.prototype.closestPointToSegment=function(){const n=new z,e=new z,t=new BA;return function(i,s=null,o=null){const{start:a,end:A}=i,l=this.points;let c,u=1/0;for(let f=0;f<3;f++){const d=(f+1)%3;t.start.copy(l[f]),t.end.copy(l[d]),hS(t,i,n,e),c=n.distanceToSquared(e),c<u&&(u=c,s&&s.copy(n),o&&o.copy(e))}return this.closestPointToPoint(a,n),c=a.distanceToSquared(n),c<u&&(u=c,s&&s.copy(n),o&&o.copy(a)),this.closestPointToPoint(A,n),c=A.distanceToSquared(n),c<u&&(u=c,s&&s.copy(n),o&&o.copy(A)),Math.sqrt(u)}}();UA.prototype.intersectsTriangle=function(){const n=new UA,e=new Array(3),t=new Array(3),r=new EA,i=new EA,s=new z,o=new z,a=new z,A=new z,l=new BA,c=new BA,u=new BA;return function(d,h=null,p=!1){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(n.copy(d),n.update(),d=n);const m=this.plane,g=d.plane;if(Math.abs(m.normal.dot(g.normal))>1-1e-10){const v=this.satBounds,y=this.satAxes;t[0]=d.a,t[1]=d.b,t[2]=d.c;for(let b=0;b<4;b++){const F=v[b],I=y[b];if(r.setFromPoints(I,t),F.isSeparated(r))return!1}const w=d.satBounds,C=d.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let b=0;b<4;b++){const F=w[b],I=C[b];if(r.setFromPoints(I,e),F.isSeparated(r))return!1}for(let b=0;b<4;b++){const F=y[b];for(let I=0;I<4;I++){const S=C[I];if(s.crossVectors(F,S),r.setFromPoints(s,e),i.setFromPoints(s,t),r.isSeparated(i))return!1}}return h&&(p||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),h.start.set(0,0,0),h.end.set(0,0,0)),!0}else{const v=this.points;let y=!1,w=0;for(let B=0;B<3;B++){const E=v[B],R=v[(B+1)%3];l.start.copy(E),l.end.copy(R),l.delta(o);const k=y?c.start:c.end,M=ff(g.distanceToPoint(E));if(ff(g.normal.dot(o))&&M){c.copy(l),w=2;break}if((g.intersectLine(l,k)||M)&&!ff(k.distanceTo(R))){if(w++,y)break;y=!0}}if(w===1&&d.containsPoint(c.end))return h&&(h.start.copy(c.end),h.end.copy(c.end)),!0;if(w!==2)return!1;const C=d.points;let b=!1,F=0;for(let B=0;B<3;B++){const E=C[B],R=C[(B+1)%3];l.start.copy(E),l.end.copy(R),l.delta(a);const k=b?u.start:u.end,M=ff(m.distanceToPoint(E));if(ff(m.normal.dot(a))&&M){u.copy(l),F=2;break}if((m.intersectLine(l,k)||M)&&!ff(k.distanceTo(R))){if(F++,b)break;b=!0}}if(F===1&&this.containsPoint(u.end))return h&&(h.start.copy(u.end),h.end.copy(u.end)),!0;if(F!==2)return!1;if(c.delta(o),u.delta(a),o.dot(a)<0){let B=u.start;u.start=u.end,u.end=B}const I=c.start.dot(o),S=c.end.dot(o),T=u.start.dot(o),H=u.end.dot(o),X=S<T,Q=I<H;return I!==H&&T!==S&&X===Q?!1:(h&&(A.subVectors(c.start,u.start),A.dot(o)>0?h.start.copy(c.start):h.start.copy(u.start),A.subVectors(c.end,u.end),A.dot(o)<0?h.end.copy(c.end):h.end.copy(u.end)),!0)}}}();UA.prototype.distanceToPoint=function(){const n=new z;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();UA.prototype.distanceToTriangle=function(){const n=new z,e=new z,t=["a","b","c"],r=new BA,i=new BA;return function(o,a=null,A=null){const l=a||A?r:null;if(this.intersectsTriangle(o,l))return(a||A)&&(a&&l.getCenter(a),A&&l.getCenter(A)),0;let c=1/0;for(let u=0;u<3;u++){let f;const d=t[u],h=o[d];this.closestPointToPoint(h,n),f=h.distanceToSquared(n),f<c&&(c=f,a&&a.copy(n),A&&A.copy(h));const p=this[d];o.closestPointToPoint(p,n),f=p.distanceToSquared(n),f<c&&(c=f,a&&a.copy(p),A&&A.copy(n))}for(let u=0;u<3;u++){const f=t[u],d=t[(u+1)%3];r.set(this[f],this[d]);for(let h=0;h<3;h++){const p=t[h],m=t[(h+1)%3];i.set(o[p],o[m]),hS(r,i,n,e);const g=n.distanceToSquared(e);g<c&&(c=g,a&&a.copy(n),A&&A.copy(e))}}return Math.sqrt(c)}}();class Ea{constructor(e,t,r){this.isOrientedBox=!0,this.min=new z,this.max=new z,this.matrix=new Oe,this.invMatrix=new Oe,this.points=new Array(8).fill().map(()=>new z),this.satAxes=new Array(3).fill().map(()=>new z),this.satBounds=new Array(3).fill().map(()=>new EA),this.alignedSatBounds=new Array(3).fill().map(()=>new EA),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),r&&this.matrix.copy(r)}set(e,t,r){this.min.copy(e),this.max.copy(t),this.matrix.copy(r),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}Ea.prototype.update=function(){return function(){const e=this.matrix,t=this.min,r=this.max,i=this.points;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){const f=1*l|2*c|4*u,d=i[f];d.x=l?r.x:t.x,d.y=c?r.y:t.y,d.z=u?r.z:t.z,d.applyMatrix4(e)}const s=this.satBounds,o=this.satAxes,a=i[0];for(let l=0;l<3;l++){const c=o[l],u=s[l],f=1<<l,d=i[f];c.subVectors(a,d),u.setFromPoints(c,i)}const A=this.alignedSatBounds;A[0].setFromPointsField(i,"x"),A[1].setFromPointsField(i,"y"),A[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Ea.prototype.intersectsBox=function(){const n=new EA;return function(t){this.needsUpdate&&this.update();const r=t.min,i=t.max,s=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(n.min=r.x,n.max=i.x,a[0].isSeparated(n)||(n.min=r.y,n.max=i.y,a[1].isSeparated(n))||(n.min=r.z,n.max=i.z,a[2].isSeparated(n)))return!1;for(let A=0;A<3;A++){const l=o[A],c=s[A];if(n.setFromBox(l,t),c.isSeparated(n))return!1}return!0}}();Ea.prototype.intersectsTriangle=function(){const n=new UA,e=new Array(3),t=new EA,r=new EA,i=new z;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(n.copy(o),n.update(),o=n);const a=this.satBounds,A=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let f=0;f<3;f++){const d=a[f],h=A[f];if(t.setFromPoints(h,e),d.isSeparated(t))return!1}const l=o.satBounds,c=o.satAxes,u=this.points;for(let f=0;f<3;f++){const d=l[f],h=c[f];if(t.setFromPoints(h,u),d.isSeparated(t))return!1}for(let f=0;f<3;f++){const d=A[f];for(let h=0;h<4;h++){const p=c[h];if(i.crossVectors(d,p),t.setFromPoints(i,e),r.setFromPoints(i,u),t.isSeparated(r))return!1}}return!0}}();Ea.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();Ea.prototype.distanceToPoint=function(){const n=new z;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();Ea.prototype.distanceToBox=function(){const n=["x","y","z"],e=new Array(12).fill().map(()=>new BA),t=new Array(12).fill().map(()=>new BA),r=new z,i=new z;return function(o,a=0,A=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(A||l)&&(o.getCenter(i),this.closestPointToPoint(i,r),o.closestPointToPoint(r,i),A&&A.copy(r),l&&l.copy(i)),0;const c=a*a,u=o.min,f=o.max,d=this.points;let h=1/0;for(let m=0;m<8;m++){const g=d[m];i.copy(g).clamp(u,f);const v=g.distanceToSquared(i);if(v<h&&(h=v,A&&A.copy(g),l&&l.copy(i),v<c))return Math.sqrt(v)}let p=0;for(let m=0;m<3;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){const y=(m+1)%3,w=(m+2)%3,C=g<<y|v<<w,b=1<<m|g<<y|v<<w,F=d[C],I=d[b];e[p].set(F,I);const T=n[m],H=n[y],X=n[w],Q=t[p],B=Q.start,E=Q.end;B[T]=u[T],B[H]=g?u[H]:f[H],B[X]=v?u[X]:f[H],E[T]=f[T],E[H]=g?u[H]:f[H],E[X]=v?u[X]:f[H],p++}for(let m=0;m<=1;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){i.x=m?f.x:u.x,i.y=g?f.y:u.y,i.z=v?f.z:u.z,this.closestPointToPoint(i,r);const y=i.distanceToSquared(r);if(y<h&&(h=y,A&&A.copy(r),l&&l.copy(i),y<c))return Math.sqrt(y)}for(let m=0;m<12;m++){const g=e[m];for(let v=0;v<12;v++){const y=t[v];hS(g,y,r,i);const w=r.distanceToSquared(i);if(w<h&&(h=w,A&&A.copy(r),l&&l.copy(i),w<c))return Math.sqrt(w)}}return Math.sqrt(h)}}();const $v=new z,qv=new z,ey=new z,yk=new Ge,Bk=new Ge,wk=new Ge,Ck=new z;function fce(n,e,t,r,i,s){let o;return s===ci?o=n.intersectTriangle(r,t,e,!0,i):o=n.intersectTriangle(e,t,r,s!==Ii,i),o===null?null:{distance:n.origin.distanceTo(i),point:i.clone()}}function dce(n,e,t,r,i,s,o){$v.fromBufferAttribute(e,r),qv.fromBufferAttribute(e,i),ey.fromBufferAttribute(e,s);const a=fce(n,$v,qv,ey,Ck,o);if(a){t&&(yk.fromBufferAttribute(t,r),Bk.fromBufferAttribute(t,i),wk.fromBufferAttribute(t,s),a.uv=qi.getUV(Ck,$v,qv,ey,yk,Bk,wk,new Ge));const A={a:r,b:i,c:s,normal:new z,materialIndex:0};qi.getNormal($v,qv,ey,A.normal),a.face=A,a.faceIndex=r}return a}function IG(n,e,t,r,i){const s=r*3,o=n.index.getX(s),a=n.index.getX(s+1),A=n.index.getX(s+2),l=dce(t,n.attributes.position,n.attributes.uv,o,a,A,e);return l?(l.faceIndex=r,i&&i.push(l),l):null}function hce(n,e,t,r,i,s){for(let o=r,a=r+i;o<a;o++)IG(n,e,t,o,s)}function pce(n,e,t,r,i){let s=1/0,o=null;for(let a=r,A=r+i;a<A;a++){const l=IG(n,e,t,a);l&&l.distance<s&&(o=l,s=l.distance)}return o}function bk(n,e,t){return n===null||(n.point.applyMatrix4(e.matrixWorld),n.distance=n.point.distanceTo(t.ray.origin),n.object=e,n.distance<t.near||n.distance>t.far)?null:n}function ia(n,e,t,r){const i=n.a,s=n.b,o=n.c;let a=e,A=e+1,l=e+2;t&&(a=t.getX(e),A=t.getX(e+1),l=t.getX(e+2)),i.x=r.getX(a),i.y=r.getY(a),i.z=r.getZ(a),s.x=r.getX(A),s.y=r.getY(A),s.z=r.getZ(A),o.x=r.getX(l),o.y=r.getY(l),o.z=r.getZ(l)}function xk(n,e,t,r,i,s,o){const a=t.index,A=t.attributes.position;for(let l=n,c=e+n;l<c;l++)if(ia(o,l*3,a,A),o.needsUpdate=!0,r(o,l,i,s))return!0;return!1}class FG{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}function hl(n,e){return e[n+15]===65535}function Td(n,e){return e[n+6]}function Em(n,e){return e[n+14]}function Um(n){return n+8}function _m(n,e){return e[n+6]}function gce(n,e){return e[n+7]}const hd=new no,mw=new z,mce=["x","y","z"];function QE(n,e,t,r,i){let s=n*2,o=Lh,a=kl,A=Dl;if(hl(s,a)){const c=Td(n,A),u=Em(s,a);hce(e,t,r,c,u,i)}else{const c=Um(n);vw(c,o,r,mw)&&QE(c,e,t,r,i);const u=_m(n,A);vw(u,o,r,mw)&&QE(u,e,t,r,i)}}function RE(n,e,t,r){let i=n*2,s=Lh,o=kl,a=Dl;if(hl(i,o)){const l=Td(n,a),c=Em(i,o);return pce(e,t,r,l,c)}else{const l=gce(n,a),c=mce[l],f=r.direction[c]>=0;let d,h;f?(d=Um(n),h=_m(n,a)):(d=_m(n,a),h=Um(n));const m=vw(d,s,r,mw)?RE(d,e,t,r):null;if(m){const y=m.point[c];if(f?y<=s[h+l]:y>=s[h+l+3])return m}const v=vw(h,s,r,mw)?RE(h,e,t,r):null;return m&&v?m.distance<=v.distance?m:v:m||v||null}}const vce=function(){let n,e;const t=[],r=new FG(()=>new no);return function(...o){n=r.getPrimitive(),e=r.getPrimitive(),t.push(n,e);const a=i(...o);r.releasePrimitive(n),r.releasePrimitive(e),t.pop(),t.pop();const A=t.length;return A>0&&(e=t[A-1],n=t[A-2]),a};function i(s,o,a,A,l=null,c=0,u=0){function f(y){let w=y*2,C=kl,b=Dl;for(;!hl(w,C);)y=Um(y),w=y*2;return Td(y,b)}function d(y){let w=y*2,C=kl,b=Dl;for(;!hl(w,C);)y=_m(y,b),w=y*2;return Td(y,b)+Em(w,C)}let h=s*2,p=Lh,m=kl,g=Dl;if(hl(h,m)){const y=Td(s,g),w=Em(h,m);return Aa(s,p,n),A(y,w,!1,u,c+s,n)}else{const y=Um(s),w=_m(s,g);let C=y,b=w,F,I,S,T;if(l&&(S=n,T=e,Aa(C,p,S),Aa(b,p,T),F=l(S),I=l(T),I<F)){C=w,b=y;const k=F;F=I,I=k,S=T}S||(S=n,Aa(C,p,S));const H=hl(C*2,m),X=a(S,H,F,u+1,c+C);let Q;if(X===hk){const k=f(C),L=d(C)-k;Q=A(k,L,!0,u+1,c+C,S)}else Q=X&&i(C,o,a,A,l,c,u+1);if(Q)return!0;T=e,Aa(b,p,T);const B=hl(b*2,m),E=a(T,B,I,u+1,c+b);let R;if(E===hk){const k=f(b),L=d(b)-k;R=A(k,L,!0,u+1,c+b,T)}else R=E&&i(b,o,a,A,l,c,u+1);return!!R}}}(),yce=function(){const n=new UA,e=new UA,t=new Oe,r=new Ea,i=new Ea;return function s(o,a,A,l,c=null){let u=o*2,f=Lh,d=kl,h=Dl;if(c===null&&(A.boundingBox||A.computeBoundingBox(),r.set(A.boundingBox.min,A.boundingBox.max,l),c=r),hl(u,d)){const m=a,g=m.index,v=m.attributes.position,y=A.index,w=A.attributes.position,C=Td(o,h),b=Em(u,d);if(t.copy(l).invert(),A.boundsTree)return Aa(o,f,i),i.matrix.copy(t),i.needsUpdate=!0,A.boundsTree.shapecast({intersectsBounds:I=>i.intersectsBox(I),intersectsTriangle:I=>{I.a.applyMatrix4(l),I.b.applyMatrix4(l),I.c.applyMatrix4(l),I.needsUpdate=!0;for(let S=C*3,T=(b+C)*3;S<T;S+=3)if(ia(e,S,g,v),e.needsUpdate=!0,I.intersectsTriangle(e))return!0;return!1}});for(let F=C*3,I=b+C*3;F<I;F+=3){ia(n,F,g,v),n.a.applyMatrix4(t),n.b.applyMatrix4(t),n.c.applyMatrix4(t),n.needsUpdate=!0;for(let S=0,T=y.count;S<T;S+=3)if(ia(e,S,y,w),e.needsUpdate=!0,n.intersectsTriangle(e))return!0}}else{const m=o+8,g=h[o+6];return Aa(m,f,hd),!!(c.intersectsBox(hd)&&s(m,a,A,l,c)||(Aa(g,f,hd),c.intersectsBox(hd)&&s(g,a,A,l,c)))}}}();function vw(n,e,t,r){return Aa(n,e,hd),t.intersectBox(hd,r)}const ME=[];let nB,Lh,kl,Dl;function gg(n){nB&&ME.push(nB),nB=n,Lh=new Float32Array(n),kl=new Uint16Array(n),Dl=new Uint32Array(n)}function ty(){nB=null,Lh=null,kl=null,Dl=null,ME.length&&gg(ME.pop())}const VI=Symbol("skip tree generation"),LI=new no,PI=new no,df=new Oe,Bc=new Ea,kp=new Ea,Dp=new z,ny=new z,Bce=new z,wce=new z,Cce=new z,Ik=new no,Xo=new FG(()=>new UA);class Pg{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Pg.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};const r=e.geometry,i=e._roots,s=r.getIndex();let o;return t.cloneBuffers?o={roots:i.map(a=>a.slice()),index:s.array.slice()}:o={roots:i,index:s.array},o}static deserialize(e,t,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Pg.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r={setIndex:!0,...r};const{index:i,roots:s}=e,o=new Pg(t,{...r,[VI]:!0});if(o._roots=s,r.setIndex){const a=t.getIndex();if(a===null){const A=new st(e.index,1,!1);t.setIndex(A)}else a.array!==i&&(a.array.set(i),a.needsUpdate=!0)}return o}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:bG,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[VI]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[VI]||(this._roots=Ace(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new no))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=this.geometry,r=t.index.array,i=t.attributes.position;let s,o,a,A,l=0;const c=this._roots;for(let f=0,d=c.length;f<d;f++)s=c[f],o=new Uint32Array(s),a=new Uint16Array(s),A=new Float32Array(s),u(0,l),l+=s.byteLength;function u(f,d,h=!1){const p=f*2;if(a[p+15]===SE){const g=o[f+6],v=a[p+14];let y=1/0,w=1/0,C=1/0,b=-1/0,F=-1/0,I=-1/0;for(let S=3*g,T=3*(g+v);S<T;S++){const H=r[S],X=i.getX(H),Q=i.getY(H),B=i.getZ(H);X<y&&(y=X),X>b&&(b=X),Q<w&&(w=Q),Q>F&&(F=Q),B<C&&(C=B),B>I&&(I=B)}return A[f+0]!==y||A[f+1]!==w||A[f+2]!==C||A[f+3]!==b||A[f+4]!==F||A[f+5]!==I?(A[f+0]=y,A[f+1]=w,A[f+2]=C,A[f+3]=b,A[f+4]=F,A[f+5]=I,!0):!1}else{const g=f+8,v=o[f+6],y=g+d,w=v+d;let C=h,b=!1,F=!1;e?C||(b=e.has(y),F=e.has(w),C=!b&&!F):(b=!0,F=!0);const I=C||b,S=C||F;let T=!1;I&&(T=u(g,d,C));let H=!1;S&&(H=u(v,d,C));const X=T||H;if(X)for(let Q=0;Q<3;Q++){const B=g+Q,E=v+Q,R=A[B],k=A[B+3],M=A[E],L=A[E+3];A[f+Q]=R<M?R:M,A[f+Q+3]=k>L?k:L}return X}}}traverse(e,t=0){const r=this._roots[t],i=new Uint32Array(r),s=new Uint16Array(r);o(0);function o(a,A=0){const l=a*2,c=s[l+15]===SE;if(c){const u=i[a+6],f=s[l+14];e(A,c,new Float32Array(r,a*4,6),u,f)}else{const u=a+tB/4,f=i[a+6],d=i[a+7];e(A,c,new Float32Array(r,a*4,6),d)||(o(u,A+1),o(f,A+1))}}}raycast(e,t=Ia){const r=this._roots,i=this.geometry,s=[],o=t.isMaterial,a=Array.isArray(t),A=i.groups,l=o?t.side:t;for(let c=0,u=r.length;c<u;c++){const f=a?t[A[c].materialIndex].side:l,d=s.length;if(gg(r[c]),QE(0,i,f,e,s),ty(),a){const h=A[c].materialIndex;for(let p=d,m=s.length;p<m;p++)s[p].face.materialIndex=h}}return s}raycastFirst(e,t=Ia){const r=this._roots,i=this.geometry,s=t.isMaterial,o=Array.isArray(t);let a=null;const A=i.groups,l=s?t.side:t;for(let c=0,u=r.length;c<u;c++){const f=o?t[A[c].materialIndex].side:l;gg(r[c]);const d=RE(0,i,f,e);ty(),d!=null&&(a==null||d.distance<a.distance)&&(a=d,o&&(d.face.materialIndex=A[c].materialIndex))}return a}intersectsGeometry(e,t){const r=this.geometry;let i=!1;for(const s of this._roots)if(gg(s),i=yce(0,r,e,t),ty(),i)break;return i}shapecast(e,t,r){const i=this.geometry;if(e instanceof Function){if(t){const f=t;t=(d,h,p,m)=>{const g=h*3;return f(d,g,g+1,g+2,p,m)}}e={boundsTraverseOrder:r,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const s=Xo.getPrimitive();let{boundsTraverseOrder:o,intersectsBounds:a,intersectsRange:A,intersectsTriangle:l}=e;if(A&&l){const f=A;A=(d,h,p,m,g)=>f(d,h,p,m,g)?!0:xk(d,h,i,l,p,m,s)}else A||(l?A=(f,d,h,p)=>xk(f,d,i,l,h,p,s):A=(f,d,h)=>h);let c=!1,u=0;for(const f of this._roots){if(gg(f),c=vce(0,i,a,A,o,u),ty(),c)break;u+=f.byteLength}return Xo.releasePrimitive(s),c}bvhcast(e,t,r){let{intersectsRanges:i,intersectsTriangles:s}=r;const o=this.geometry.index,a=this.geometry.attributes.position,A=e.geometry.index,l=e.geometry.attributes.position;df.copy(t).invert();const c=Xo.getPrimitive(),u=Xo.getPrimitive();if(s){let d=function(h,p,m,g,v,y,w,C){for(let b=m,F=m+g;b<F;b++){ia(u,b*3,A,l),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let I=h,S=h+p;I<S;I++)if(ia(c,I*3,o,a),c.needsUpdate=!0,s(c,u,I,b,v,y,w,C))return!0}return!1};if(i){const h=i;i=function(p,m,g,v,y,w,C,b){return h(p,m,g,v,y,w,C,b)?!0:d(p,m,g,v,y,w,C,b)}}else i=d}e.getBoundingBox(PI),PI.applyMatrix4(t);const f=this.shapecast({intersectsBounds:d=>PI.intersectsBox(d),intersectsRange:(d,h,p,m,g,v)=>(LI.copy(v),LI.applyMatrix4(df),e.shapecast({intersectsBounds:y=>LI.intersectsBox(y),intersectsRange:(y,w,C,b,F)=>i(d,h,y,w,m,g,b,F)}))});return Xo.releasePrimitive(c),Xo.releasePrimitive(u),f}intersectsBox(e,t){return Bc.set(e.min,e.max,t),Bc.needsUpdate=!0,this.shapecast({intersectsBounds:r=>Bc.intersectsBox(r),intersectsTriangle:r=>Bc.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,r={},i={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),Bc.set(e.boundingBox.min,e.boundingBox.max,t),Bc.needsUpdate=!0;const a=this.geometry,A=a.attributes.position,l=a.index,c=e.attributes.position,u=e.index,f=Xo.getPrimitive(),d=Xo.getPrimitive();let h=ny,p=Bce,m=null,g=null;i&&(m=wce,g=Cce);let v=1/0,y=null,w=null;return df.copy(t).invert(),kp.matrix.copy(df),this.shapecast({boundsTraverseOrder:C=>Bc.distanceToBox(C),intersectsBounds:(C,b,F)=>F<v&&F<o?(b&&(kp.min.copy(C.min),kp.max.copy(C.max),kp.needsUpdate=!0),!0):!1,intersectsRange:(C,b)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:F=>kp.distanceToBox(F),intersectsBounds:(F,I,S)=>S<v&&S<o,intersectsRange:(F,I)=>{for(let S=F*3,T=(F+I)*3;S<T;S+=3){ia(d,S,u,c),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let H=C*3,X=(C+b)*3;H<X;H+=3){ia(f,H,l,A),f.needsUpdate=!0;const Q=f.distanceToTriangle(d,h,m);if(Q<v&&(p.copy(h),g&&g.copy(m),v=Q,y=H/3,w=S/3),Q<s)return!0}}}});{const F=u?u.count:c.count;for(let I=0,S=F;I<S;I+=3){ia(d,I,u,c),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let T=C*3,H=(C+b)*3;T<H;T+=3){ia(f,T,l,A),f.needsUpdate=!0;const X=f.distanceToTriangle(d,h,m);if(X<v&&(p.copy(h),g&&g.copy(m),v=X,y=T/3,w=I/3),X<s)return!0}}}}}),Xo.releasePrimitive(f),Xo.releasePrimitive(d),v===1/0?null:(r.point?r.point.copy(p):r.point=p.clone(),r.distance=v,r.faceIndex=y,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(df),p.applyMatrix4(df),i.distance=p.sub(i.point).length(),i.faceIndex=w),r)}closestPointToPoint(e,t={},r=0,i=1/0){const s=r*r,o=i*i;let a=1/0,A=null;if(this.shapecast({boundsTraverseOrder:c=>(Dp.copy(e).clamp(c.min,c.max),Dp.distanceToSquared(e)),intersectsBounds:(c,u,f)=>f<a&&f<o,intersectsTriangle:(c,u)=>{c.closestPointToPoint(e,Dp);const f=e.distanceToSquared(Dp);return f<a&&(ny.copy(Dp),a=f,A=u),f<s}}),a===1/0)return null;const l=Math.sqrt(a);return t.point?t.point.copy(ny):t.point=ny.clone(),t.distance=l,t.faceIndex=A,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(r=>{Aa(0,new Float32Array(r),Ik),e.union(Ik)}),e}}const WI=new i0,Fk=new Oe,bce=Tn.prototype.raycast;function xce(n,e){if(this.geometry.boundsTree){if(this.material===void 0)return;Fk.copy(this.matrixWorld).invert(),WI.copy(n.ray).applyMatrix4(Fk);const t=this.geometry.boundsTree;if(n.firstHitOnly===!0){const r=bk(t.raycastFirst(WI,this.material),this,n);r&&e.push(r)}else{const r=t.raycast(WI,this.material);for(let i=0,s=r.length;i<s;i++){const o=bk(r[i],this,n);o&&e.push(o)}}}else bce.call(this,n,e)}function Ice(n){return this.boundsTree=new Pg(this,n),this.boundsTree}function Fce(){this.boundsTree=null}let OI=new z,Vp=new z;const Ek=[],ry=new uZ,Ece=.03,Uce=.03,_ce=new is({side:Ia}),Sce=new is({side:ci});let mg;zt.prototype.computeBoundsTree=Ice;zt.prototype.disposeBoundsTree=Fce;Tn.prototype.raycast=xce;const Qce=n=>{const e=n.attributes.position,t=n.index,r=new qi,i=new z,s=new z,o=new z,a=[];for(let A=0;A<t.array.length/3;A++){const l=A*3;i.fromBufferAttribute(e,t.getX(l+0)),s.fromBufferAttribute(e,t.getX(l+1)),o.fromBufferAttribute(e,t.getX(l+2)),r.set(i,s,o),a.push(r.getNormal(new z))}n.userData.faceNormals=a},Rce=n=>{const e=n.geometry.clone(),t=n.material.clone();if(!n.userData.isVRM0){const i=e.attributes.position;for(let s=0;s<i.array.length;s+=3)i.array[s]=-i.array[s],i.array[s+2]=-i.array[s+2];i.needsUpdate=!0}const r=new Tn(e,t);return Qce(r.geometry),r.geometry.computeBoundsTree({strategy:xG}),r},Mce=async n=>{const e=[];mg=n[0].parent,mg.lines!=null&&(mg.lines.forEach(i=>{i.visible=!1}),mg.lines.length=0),n.forEach(i=>{if(i.userData.cullLayer!=null){i.userData.origIndexBuffer==null&&(i.userData.origIndexBuffer=i.geometry.index.clone()),e[i.userData.cullLayer]==null&&(e[i.userData.cullLayer]={origMeshes:[],cloneMeshes:[],posMeshes:[],negMeshes:[],scaleMeshes:[],positionMeshes:[]}),i.userData.cullingClone==null&&(i.userData.cullingClone=Rce(i),i.userData.cullingCloneP=i.userData.cullingClone.clone(),i.userData.cullingCloneN=i.userData.cullingClone.clone());const s=i.userData.cullingClone,o=i.userData.cullingCloneP,a=i.userData.cullingCloneN;o.material=_ce,a.userData.cancelMesh=o,a.material=Sce,o.userData.maxCullDistance=a.userData.maxCullDistance=i.userData.maxCullDistance,e[i.userData.cullLayer].origMeshes.push(i),e[i.userData.cullLayer].cloneMeshes.push(s),e[i.userData.cullLayer].posMeshes.push(o),e[i.userData.cullLayer].negMeshes.push(a),i.geometry.setIndex(i.userData.origIndexBuffer)}});for(let i=e.length-1;i>=0;i--)e[i]==null&&e.splice(i,1);let t=[];const r=[];for(let i=e.length-1;i>=0;i--){if(t.length!=0||e.length>=1)for(let s=0;s<e[i].origMeshes.length;s++){const o=e[i].origMeshes[s],a=e[i].cloneMeshes[s],A=o.userData.origIndexBuffer.array,l=a.geometry.attributes.position.array,c=a.geometry.attributes.normal.array,u=a.geometry.userData.faceNormals;r.push({geom:o.geometry,index:Nce(A,l,c,u,t,o.userData.cullDistance)})}t=[...t,...e[i].posMeshes,...e[i].negMeshes]}r.forEach(i=>{i.geom.setIndex(i.index)})},Tce=n=>{let e=Ece,t=Uce;return n&&(isNaN(n)?Array.isArray(n)&&(isNaN(n[0])||(e=n[0]),isNaN(n[1])||(t=n[1])):e=n),[e,t]},Nce=(n,e,t,r,i,s,o=!1)=>{const a=[],A=Tce(s);let l=A[0],c=A[1];ry.far=l+c;for(let f=0;f<n.length/3;f++){r&&Vp.set(r[f].x,r[f].y,r[f].z).normalize();const d=f*3;let h=[];for(let p=0;p<3;p++){Ek.length=0;const m=n[d+p]*3;r==null&&Vp.set(t[m],t[m+1],t[m+2]).normalize(),OI.set(e[m],e[m+1],e[m+2]).add(Vp.clone().multiplyScalar(l)),ry.set(OI,Vp.clone().multiplyScalar(-1));const g=ry.intersectObjects(i,!1,Ek);for(let v=g.length-1;v>=0;v--)l-g[v].distance>=g[v].object.userData.maxCullDistance&&g.splice(v,1);if(g.length===0){for(let v=0;v<3;v++)a.push(n[d+v]);break}else{const v=g.map(y=>y.object);for(let y=0;y<v.length;y++){const w=v[y];if(w!=null&&w.userData.cancelMesh){const C=v.indexOf(w.userData.cancelMesh);v[y]=null,C!=-1&&C<y&&(v[C]=null)}}if(v.filter(y=>y).length===0){for(let y=0;y<3;y++)a.push(n[d+y]);break}if(p===0)h=g.map(y=>y.object);else if(h=g.map(y=>{if(h.indexOf(y.object)!==-1)return y.object}),h=h.filter(y=>y),p===2&&h.filter(y=>y).length===0)for(let y=0;y<3;y++)a.push(n[d+y]);o&&kce(OI,Vp.clone().multiplyScalar(-1),ry.far,16711680,mg)}}}const u=new Uint32Array(a);return new st(u,1,!1)};function kce(n,e,t,r,i){i.lines==null&&(i.lines=[]);let s=new z;s.addVectors(n,e.clone().multiplyScalar(t));const o=[];o.push(n),o.push(s);const a=new zt().setFromPoints(o),A=[];A.push(new Ne(0)),A.push(new Ne(16777215));let l=new NA({color:r});var c=new Th(a,l);c.renderOrder=100,i.add(c),i.lines.push(c)}function EG(n){let e,t,r,i=0;for(let a=0;a<n.length;++a){const A=n[a];if(A.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=A.array.constructor),e!==A.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=A.itemSize),t!==A.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=A.normalized),r!==A.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=A.array.length}const s=new e(i);let o=0;for(let a=0;a<n.length;++a)s.set(n[a].array,o),o+=n[a].array.length;return new st(s,t,r)}let ZI,Xa,iy,sy,oy,Hi,hf;function Dce(){Hi!=null&&Hi.clear(!0,!0)}function Vce(n,e,t,r,i,s){if(n==null){const A=new Uint8Array([t.r*255,t.g*255,t.b*255]);n=new tZ(A,r,i,LO),n.needsUpdate=!0}if(ZI==null){ZI=document.createElement("div"),iy=new nw,Xa=new o0(-r/2,r/2,i/2,-i/2,-1e4,1e4),Xa.position.z=100,iy.add(Xa),sy=new is({side:Ii,transparent:!0,opacity:1,color:new Ne(1,1,1)});const A=new Qh(1,1);oy=new Tn(A,sy),oy.scale.set(r,i,1),iy.add(oy),Hi=new LC,Hi.setPixelRatio(1),Hi.setSize(r,i),Hi.autoClear=!1,ZI.appendChild(Hi.domElement)}else Xa.left=-r/2,Xa.right=r/2,Xa.top=i/2,Xa.bottom=-i/2,Xa.updateProjectionMatrix(),oy.scale.set(r,i,1),Hi.setSize(r,i);hf=new Hl(r,i),hf.texture.encoding=dt,sy.map=n,sy.color=e.clone(),Hi.setClearColor(t.clone(),s?0:1),Hi.setRenderTarget(hf),Hi.clear(),Hi.render(iy,Xa);let o=new Uint8ClampedArray(hf.width*hf.height*4);return Hi.readRenderTargetPixels(hf,0,0,r,i,o),new ImageData(o,r,i)}function UG({width:n,height:e,transparent:t}){const r=document.createElement("canvas");r.width=n,r.height=e;const i=r.getContext("2d");return i.fillStyle="white",t&&(i.globalAlpha=0),i.fillRect(0,0,r.width,r.height),i.globalAlpha=1,i}function TE(n,e){return n=n.length==null?n:n[0],n[e]&&n[e].image}function Lce(n,e){return n=n.length==null?n:n[0],n[e]&&n[e].clone()}function Cl(n,e,t,r,i){const s=(n-e)/(t-e);return r+s*(i-r)}const Pce=async({transparentColor:n,meshes:e,atlasSize:t=4096,mtoon:r=!0,transparentMaterial:i=!1,transparentTexture:s=!1})=>typeof window>"u"?await Wce({meshes:e,atlasSize:t,mtoon:r,transparentMaterial:i,transparentTexture:s}):await Oce({backColor:n,meshes:e,atlasSize:t,mtoon:r,transparentMaterial:i,transparentTexture:s}),Wce=async({meshes:n,atlasSize:e,mtoon:t,transparentMaterial:r,transparentTexture:i})=>{const s=e,o=["diffuse"],a=[];n.forEach(F=>{const I=F.material;let S=a.find(T=>T.material===I);if(!S)a.push({material:I,mesh:F});else{const{dest:T}=pS({meshes:[S.mesh,F]});S.mesh.geometry=T}});const A=Object.fromEntries(o.map(F=>[F,UG({width:s,height:s,transparent:i})])),l=Math.floor(Math.sqrt(n.length)+1),c=s/l,u=new Map(a.map((F,I)=>{const S=new Ge(I%l,Math.floor(I/l)).multiplyScalar(1/l),T=new Ge(S.x+1/l,S.y+1/l);return[F.mesh,{min:S,max:T}]})),f={diffuse:["map"],normal:["normalMap"],orm:["ormMap","aoMap","roughnessMap","metalnessMap"]},d=[],h=[];a.forEach(F=>{const{min:I,max:S}=u.get(F.mesh);h.push(S),d.push(I)});const p=new Ge(Math.max(...h.map(F=>F.x)),Math.max(...h.map(F=>F.y))),m=new Ge(Math.min(...d.map(F=>F.x)),Math.min(...d.map(F=>F.y))),g=1/(p.x-m.x),v=1/(p.y-m.y),y=c*g,w=c*v,C=new Map(a.map(F=>{let{min:I,max:S}=u.get(F.mesh);return I.x=I.x*g,I.y=I.y*v,S.x=S.x*g,S.y=S.y*v,[F.mesh,{min:I,max:S}]}));a.forEach(F=>{const{material:I,mesh:S}=F,{min:T,max:H}=C.get(S);o.forEach(E=>{const R=A[E];R.globalCompositeOperation="source-over";let k=TE(I,f[E].find(M=>TE(I,M)));if(k!==""&&k!==void 0)try{const M=new Uint8ClampedArray(k.data),L=new ImageData(M,y,w),Z=document.createElement("canvas");Z.width=y,Z.height=w;const P=Z.getContext("2d");P.putImageData(L,0,0),P.save(),R.drawImage(Z,T.x*s,T.y*s,y,w)}catch(M){console.error("error",M)}else R.fillStyle=E==="diffuse"?`#${I.color.clone().getHexString()}`:E==="normal"?"#8080ff":E==="orm"?`#${new Ne(I.aoMapIntensity,I.roughness,I.metalness).getHexString()}`:"#7F7F7F",R.fillRect(T.x*s,T.y*s,y,w)});const X=S.geometry,Q=X.attributes.uv;if(Q)for(let E=0;E<Q.array.length;E+=2)Q.array[E]=Cl(Q.array[E],0,1,T.x,H.x),Q.array[E+1]=Cl(Q.array[E+1],0,1,T.y,H.y);const B=X.attributes.uv2;if(B)for(let E=0;E<B.array.length;E+=2)B.array[E]=Cl(B.array[E],0,1,T.x,H.x),B.array[E+1]=Cl(B.array[E+1],0,1,T.y,H.y);else X.attributes.uv2=X.attributes.uv});const b=Object.fromEntries(await Promise.all(o.map(async F=>{const I=new qn(A[F].canvas);return I.flipY=!1,[F,I]})));return{bakeObjects:a,textures:b,uvs:C}},Oce=async({backColor:n,meshes:e,atlasSize:t,mtoon:r,transparentMaterial:i,transparentTexture:s})=>{Dce();const o=t,a=r?["diffuse"]:["diffuse","orm"],A=[];let l=null;e.forEach(H=>{H=H.clone();const X=H.material.length==null?H.material:H.material[0];r&&l==null&&X.type=="ShaderMaterial"&&(l=X.clone());let Q=A.find(B=>{B.material});if(!Q)A.push({material:X,mesh:H});else{const{dest:B}=pS({meshes:[Q.mesh,H]});Q.mesh.geometry=B}});const c=Object.fromEntries(a.map(H=>[H,UG({width:o,height:o,transparent:s})])),u=Math.floor(Math.sqrt(e.length)+1),f=o/u,d=new Map(A.map((H,X)=>{const Q=new Ge(X%u,Math.floor(X/u)).multiplyScalar(1/u),B=new Ge(Q.x+1/u,Q.y+1/u);return[H.mesh,{min:Q,max:B}]})),h={diffuse:["map"],normal:["normalMap"],orm:["ormMap","aoMap","roughnessMap","metalnessMap"]},p=[],m=[];A.forEach(H=>{const{min:X,max:Q}=d.get(H.mesh);m.push(Q),p.push(X)});const g=new Ge(Math.max(...m.map(H=>H.x)),Math.max(...m.map(H=>H.y))),v=new Ge(Math.min(...p.map(H=>H.x)),Math.min(...p.map(H=>H.y))),y=1/(g.x-v.x),w=1/(g.y-v.y),C=f*y,b=f*w,F=new Map(A.map(H=>{let{min:X,max:Q}=d.get(H.mesh);return X.x=X.x*y,X.y=X.y*w,Q.x=Q.x*y,Q.y=Q.y*w,[H.mesh,{min:X,max:Q}]}));A.forEach(H=>{const{material:X,mesh:Q}=H,{min:B,max:E}=F.get(Q);a.forEach(L=>{var D;const Z=c[L];Z.globalCompositeOperation="source-over";let P,U=new Ne(1,1,1);switch(L){case"diffuse":P=X.color||n,Q.material.type==="MeshStandardMaterial"?Array.isArray(Q.material)?U=Q.material[0]?Q.material[0].color:U:U=Q.material.color:(D=X.uniforms)!=null&&D.litFactor&&(U=X.uniforms.litFactor.value);break;case"normal":P=new Ne(8421631);break;case"orm":P=new Ne(X.aoMapIntensity,X.roughness,X.metalness);break;default:P=new Ne(1,1,1);break}let G=Lce(X,h[L].find(K=>TE(X,K)));const oe=Vce(G,U,P,o,o,s);createImageBitmap(oe).then(K=>Z.drawImage(K,B.x*o,B.y*o,C,b))});const R=Q.geometry.clone();Q.geometry=R;const k=R.attributes.uv.clone();if(R.attributes.uv=k,k)for(let L=0;L<R.attributes.uv.array.length;L+=2)k.array[L]=Cl(k.array[L],0,1,B.x,E.x),k.array[L+1]=Cl(k.array[L+1],0,1,B.y,E.y);const M=R.attributes.uv2;if(M)for(let L=0;L<M.array.length;L+=2)M.array[L]=Cl(M.array[L],0,1,B.x,E.x),M.array[L+1]=Cl(M.array[L+1],0,1,B.y,E.y);else R.attributes.uv2=R.attributes.uv});const I=Object.fromEntries(await Promise.all(a.map(async H=>{const X=new qn(c[H].canvas);return X.flipY=!1,[H,X]})));let S;const T=i?"transparent":"opaque";return r?(S=new cu({map:I.diffuse,transparent:i}),l==null&&(l=new eB),l.uniforms.map=I.diffuse,l.uniforms.shadeMultiplyTexture=I.diffuse,l.transparent=i,s&&!i&&(S.alphaTest=.5,l.alphaTest=.5),S.userData.vrmMaterial=l,S.userData.shadeTexture=I.uniformColor,S.name="mToon_"+T,S.map.name=S.name):(S=new cu({map:I.diffuse,roughnessMap:I.orm,metalnessMap:I.orm,normalMap:I.normal,transparent:i}),s&&!i&&(S.alphaTest=.5),S.name="standard_"+T,S.roughnessMap!=null&&(S.roughnessMap.name=S.name+"_orm"),S.normalMap!=null&&(S.normalMap.name=S.name+"_normal")),{bakeObjects:A,material:S}};function _G(n){const e=new Map;for(const r of n.skeleton.bones){const i=r.clone(!1);e.set(r,i)}n.skeleton.bones[0].traverse(r=>{if(r.type!=="Bone")return;const i=e.get(r);for(const s of r.children){const o=e.get(s);o&&i.add(o)}});const t=new ac(n.skeleton.bones.map(r=>e.get(r)));return t.boneInverses=n.skeleton.boneInverses,t.pose(),t}function SG(n,e){const t=new Map;new z(-1,1,-1),new Oe,new z;let r=0;n.forEach(A=>{if(A.skeleton){var l=_G(A);const c=l.bones;l.bones.forEach((u,f)=>{var d;if(c.indexOf(u)!==-1){const h=t.get(u.name);if(h==null){const p={index:r,boneInverses:l.boneInverses[f],bone:u.clone(!1),parentName:((d=u.parent)==null?void 0:d.type)=="Bone"?u.parent.name:null};r++,t.set(u.name,p)}else u.userData.VRMcolliders!=null&&(h.bone.userData.VRMcolliders==null?h.bone.userData.VRMcolliders=u.userData.VRMcolliders:h.bone.userData.VRMcolliders=[...h.bone.userData.VRMcolliders,...u.userData.VRMcolliders])}})}});const i=[],s=[];[...t.values()].forEach(A=>{var l;if(i.push(A.bone),s.push(A.boneInverses),A.parentName!=null){const c=(l=t.get(A.parentName))==null?void 0:l.bone;c&&c.add(A.bone)}});const a=new ac(i,s);return a.bones.forEach(A=>{var c;const l=(c=A.userData)==null?void 0:c.vrm0RestPosition;l&&A.position.set(-l.x,l.y,-l.z),A.position.set(A.position.x*e,A.position.y*e,A.position.z*e)}),a}function Zce(n,e){if(!e.skeleton)return;const t=new Map;if(e.skeleton){e.skeleton.bones.forEach((o,a)=>{const A=n.bones.filter(c=>c.name===o.name),l=A.length>0?n.bones.indexOf(A[0]):-1;t.set(a,l)});const r=[],i=e.geometry.attributes.skinIndex.array;for(let o=0;o<i.length;o++)r[o]=t.get(i[o]);const s=new Uint16Array(r);return new st(s,4,!1)}}function QG(n){const e=[...n];return e.sort(),e.filter((t,r)=>e.indexOf(t)===r)}function Gce(n){const t=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array].filter(r=>n.constructor===r);return t.length&&t[0]||null}function yw(n,e){const t=[];for(let s=0;s<e.length;s++){const o=s*n.itemSize;for(let a=0;a<n.itemSize;a++)t[o+a]=n.array[e[s]*n.itemSize+a]}const r=Gce(n.array),i=new r(t);return new st(i,n.itemSize,n.normalized)}function Jce(n,e,t){for(let r=0;r<n.attributes.skinIndex.array.length;r+=4){const i=[n.attributes.skinIndex.array[r],n.attributes.skinIndex.array[r+1],n.attributes.skinIndex.array[r+2],n.attributes.skinIndex.array[r+3]];for(let s=0;s<4;s++){const o=i[s],a=Hce(o,e,t);i[s]=a}n.attributes.skinIndex.array[r]=i[0],n.attributes.skinIndex.array[r+1]=i[1],n.attributes.skinIndex.array[r+2]=i[2],n.attributes.skinIndex.array[r+3]=i[3]}n.attributes.skinIndex.needsUpdate=!0}function Hce(n,e,t){const r=e.bones[n],i=t.bones.find(s=>s.name===r.name);return i?t.bones.indexOf(i):-1}async function zce(n,e){const{scale:t,isVrm0:r}=e,i=[],s=[];lh(n,"SkinnedMesh").forEach(l=>{const c=l.clone();i.push(c),Array.isArray(l.material)?s.push(...l.material):s.push(l.material)});const a=SG(i,t),A=new kt;return A.name="AvatarRoot",i.forEach(l=>{var b;const c=new zt,u={};for(const F in l.geometry.attributes){const I=l.geometry.attributes[F];u[F]=I.clone()}if((b=l.userData)!=null&&b.isVRM0)for(let F=0;F<u.position.array.length;F+=3)u.position.array[F]*=-1,u.position.array[F+2]*=-1;const f={attributes:u,morphTargetDictionary:{...l.morphTargetDictionary},morphTargetInfluences:l.morphTargetInfluences||[],index:null,animations:{}},d=new Map([l].map(F=>[F,F.geometry.morphAttributes])),h=new Map([l].map(F=>[F,F.morphTargetDictionary||{}]));if(f.morphAttributes=RG({meshes:[l],sourceMorphAttributes:d,sourceMorphTargetDictionaries:h,destMorphTargetDictionary:f.morphTargetDictionary,scale:t},r),r)for(let F=0;F<f.attributes.position.array.length;F+=3)f.attributes.position.array[F]*=-1,f.attributes.position.array[F+2]*=-1;c.attributes=f.attributes,c.morphAttributes=f.morphAttributes,c.morphTargetsRelative=!0;const p=l.geometry.index.array,m=QG(l.geometry.index.array),g=[];for(let F=0;F<p.length;F++)g[F]=m.indexOf(p[F]);Jce(c,l.skeleton,a);const v=new Uint32Array(g),y=new st(v,1,!1);c.setIndex(y);for(const F in c.attributes)c.setAttribute(F,yw(c.getAttribute(F),m));for(const F in c.morphAttributes){const I=c.morphAttributes[F];for(let S=0;S<I.length;S++)I[S]=yw(I[S],m)}const w=c.attributes.position.array;for(let F=0;F<w.length;F+=3)w[F]*=t,w[F+1]*=t,w[F+2]*=t;const C=new Mh(c,l.material);C.name=l.name,C.morphTargetInfluences=f.morphTargetInfluences,C.morphTargetDictionary=f.morphTargetDictionary,C.bind(a),A.add(C),A.add(a.bones[0])}),A.userData.atlasMaterial=s,A}function Xce(n){const e=n.parent.name,t=new z,r=new z;n.getWorldPosition(t),n.getWorldScale(r),n=n.clone();const i=new Oe,s=new et;return n.getWorldQuaternion(s),i.makeRotationFromQuaternion(s),n.userData.boneName=e,n.userData.globalPosition=t,n.userData.globalScale=r,n.userData.globalRotationMatrix=i,n}function Yce(n,e){const t=new Mh(e.geometry,e.material),r=n.clone(),i=r.bones.findIndex(d=>d.name===e.userData.boneName),s=e.userData.globalPosition,o=e.userData.globalScale||new z(1,1,1),a=e.userData.globalRotationMatrix;t.add(r.bones[0]);const A=[],l=[],c=t.geometry.attributes.position.array,u=new z,f=e.userData.isVRM0?-1:1;for(let d=0;d<c.length;d+=3)u.set(c[d],c[d+1],c[d+2]),u.applyMatrix4(a),c[d]=f*o.x*u.x+s.x,c[d+1]=o.y*u.y+s.y,c[d+2]=f*o.z*u.z+s.z,A.push(i,0,0,0),l.push(1,0,0,0);return t.geometry.setAttribute("skinIndex",new DC(A,4)),t.geometry.setAttribute("skinWeight",new vn(l,4)),t.bind(r),t}async function Kce(n,e){let{transparentColor:t=new Ne(1,1,1),mToonAtlasSize:r=4096,mToonAtlasSizeTransp:i=4096,stdAtlasSize:s=4096,stdAtlasSizeTransp:o=4096,exportMtoonAtlas:a=!1,exportStdAtlas:A=!0,isVrm0:l=!1,scale:c=1}=e;const u=lh(n,["Mesh"]);for(let b=0;b<u.length;b++)u[b]=Xce(u[b]);const f=lh(n,["SkinnedMesh"]),d=[...u,...f];a==!1&&A==!1&&(a=!0);let{stdMesh:h,stdTranspMesh:p,mToonMesh:m,mToonTranspMesh:g,requiresTransparency:v}=Tue(d);a==!1&&(h=[...h,...m],p=[...p,...g],g=[],m=[]),A==!1&&(m=[...m,...h],g=[...g,...p],h=[],p=[]);const y=new kt;y.name="AvatarRoot",y.userData.atlasMaterial=[];const w=SG(d,c),C={standard:{meshArray:h,size:s,isMtoon:!1,transparentMaterial:!1},standardTransparent:{meshArray:p,size:o,isMtoon:!1,transparentMaterial:!0},mToon:{meshArray:m,size:r,isMtoon:!0,transparentMaterial:!1},mToonTransparent:{meshArray:g,size:i,isMtoon:!0,transparentMaterial:!0}};for(const b in C){const F=C[b],I=F.meshArray;if(I.length>0){const{bakeObjects:S,material:T}=await Pce({transparentColor:t,atlasSize:F.size,meshes:I,mtoon:F.isMtoon,transparentMaterial:F.transparentMaterial,transparentTexture:v}),H=S.map(k=>k.mesh),X=[];H.forEach(k=>{k.type=="Mesh"&&(k=Yce(w,k)),X.push(k);const M=k.geometry,L=M.index.array,Z=QG(k.geometry.index.array),P=[];for(let oe=0;oe<L.length;oe++)P[oe]=Z.indexOf(L[oe]);const U=new Uint32Array(P),G=new st(U,1,!1);M.setIndex(G);for(const oe in M.attributes)M.setAttribute(oe,yw(M.getAttribute(oe),Z));for(const oe in M.morphAttributes){const D=M.morphAttributes[oe];for(let K=0;K<D.length;K++)D[K]=yw(D[K],Z)}M.attributes.uv2||(M.attributes.uv2=M.attributes.uv),k.skeleton!=null&&k.geometry.setAttribute("skinIndex",Zce(w,k));for(let oe=0;oe<8;oe++)delete M.attributes[`morphTarget${oe}`],delete M.attributes[`morphNormal${oe}`]});const{dest:Q}=pS({meshes:X,scale:c},l),B=new zt;if(l)for(let k=0;k<Q.attributes.position.array.length;k+=3)Q.attributes.position.array[k]*=-1,Q.attributes.position.array[k+2]*=-1;B.attributes=Q.attributes,B.morphAttributes=Q.morphAttributes,B.morphTargetsRelative=!0,B.setIndex(Q.index);const E=B.attributes.position.array;for(let k=0;k<E.length;k+=3)E[k]*=c,E[k+1]*=c,E[k+2]*=c;const R=new Mh(B,T);R.name="CombinedMesh_"+b,R.morphTargetInfluences=Q.morphTargetInfluences,R.morphTargetDictionary=Q.morphTargetDictionary,R.bind(w),y.add(R),y.userData.atlasMaterial.push(T)}}return y.add(w.bones[0]),y}function jce({meshes:n,sourceMorphTargetDictionaries:e,destMorphTargetDictionary:t}){const r=[];return Object.entries(t).map(([i,s])=>{const o=n.find(A=>e.get(A).hasOwnProperty(i)),a=o.morphTargetDictionary[i];r[s]=o.morphTargetInfluences[a]}),r}function $ce({sourceAttributes:n}){const e=new Set,t=Array.from(n.values());t.forEach(i=>{Object.keys(i).forEach(s=>e.add(s))});const r={};return Array.from(e.keys()).map(i=>{r[i]=EG(t.map(s=>s[i]).flat().filter(s=>s!==void 0))}),r}function qce({sourceMorphTargetDictionaries:n}){const e=new Set;Array.from(n.values()).forEach(i=>{Object.keys(i).forEach(s=>e.add(s))});const r={};return Array.from(e.keys()).map((i,s)=>{r[i]=s}),r}function RG({meshes:n,sourceMorphTargetDictionaries:e,sourceMorphAttributes:t,destMorphTargetDictionary:r,scale:i},s=!1){const o=new Set;Array.from(t.values()).forEach(u=>{Object.keys(u).forEach(f=>o.add(f))});const A=Array.from(o),l={};A.forEach(u=>{l[u]=[],Object.entries(r).forEach(([f,d])=>{l[u][d]=[],n.forEach(h=>{let p;const m=e.get(h);if(m.hasOwnProperty(f)&&h.geometry.morphAttributes[u]){const g=m[f];p=h.geometry.morphAttributes[u][g]}else{const g=h.geometry.attributes[u],v=new g.array.constructor(new Array(g.array.length).fill(0));p=new st(v,g.itemSize,g.normalized)}l[u][d].push(p)})})});const c={};return A.forEach(u=>{c[u]=[];for(let f=0;f<Object.entries(r).length;f++){c[u][f]=EG(l[u][f]);const d=c[u][f].array;if(s)for(let h=0;h<d.length;h+=3)d[h]*=-1,d[h+2]*=-1;for(let h=0;h<d.length;h+=3)d[h]*=i,d[h+1]*=i,d[h+2]*=i}}),c}function eue({meshes:n}){var e=0,t=[];return n.forEach(r=>{const i=r.geometry.index;for(var s=0;s<i.count;++s)t.push(i.getX(s)+e);e+=r.geometry.attributes.position.count}),t}function pS({meshes:n,scale:e},t=!1){let r=0;n.forEach(a=>{var A;if(r+=a.geometry.attributes.uv.count,(A=a.userData)!=null&&A.isVRM0)for(let l=0;l<a.geometry.attributes.position.array.length;l+=3)a.geometry.attributes.position.array[l]*=-1,a.geometry.attributes.position.array[l+2]*=-1});const i={meshes:n,attributes:new Map(n.map(a=>[a,a.geometry.attributes])),morphAttributes:new Map(n.map(a=>[a,a.geometry.morphAttributes])),morphTargetDictionaries:new Map(n.map(a=>[a,a.morphTargetDictionary||{}])),morphTargetInfluences:new Map(n.map(a=>[a,a.morphTargetInfluences||[]]))},s={attributes:null,morphTargetDictionary:null,morphAttributes:null,morphTargetInfluences:null,index:null,animations:{}};s.attributes=$ce({sourceAttributes:i.attributes});const o=qce({sourceMorphTargetDictionaries:i.morphTargetDictionaries});return s.morphTargetDictionary=o,s.morphAttributes=RG({meshes:n,sourceMorphAttributes:i.morphAttributes,sourceMorphTargetDictionaries:i.morphTargetDictionaries,destMorphTargetDictionary:o,scale:e},t),s.morphTargetInfluences=jce({meshes:n,sourceMorphTargetDictionaries:i.morphTargetDictionaries,destMorphTargetDictionary:o}),s.index=eue({meshes:n}),s.animations={},{source:i,dest:s}}class rb extends Dh{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new sue(t)}),this.register(function(t){return new fue(t)}),this.register(function(t){return new due(t)}),this.register(function(t){return new aue(t)}),this.register(function(t){return new Aue(t)}),this.register(function(t){return new lue(t)}),this.register(function(t){return new cue(t)}),this.register(function(t){return new iue(t)}),this.register(function(t){return new uue(t)}),this.register(function(t){return new oue(t)}),this.register(function(t){return new nue(t)}),this.register(function(t){return new hue(t)}),this.register(function(t){return new pue(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=va.extractUrlBase(e),this.manager.itemStart(e);const a=function(l){i?i(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},A=new $_(this.manager);A.setPath(this.path),A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(e,function(l){try{s.parse(l,o,function(c){t(c),s.manager.itemEnd(e)},a)}catch(c){a(c)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(va.decodeText(new Uint8Array(e,0,4))===MG){try{o[yt.KHR_BINARY_GLTF]=new gue(e)}catch(c){i&&i(c);return}s=JSON.parse(o[yt.KHR_BINARY_GLTF].content)}else s=JSON.parse(va.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const A=new _ue(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});A.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const c=this.pluginCallbacks[l](A);a[c.name]=c,o[c.name]=!0}if(s.extensionsUsed)for(let l=0;l<s.extensionsUsed.length;++l){const c=s.extensionsUsed[l],u=s.extensionsRequired||[];switch(c){case yt.KHR_MATERIALS_UNLIT:o[c]=new rue;break;case yt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[c]=new yue;break;case yt.KHR_DRACO_MESH_COMPRESSION:o[c]=new mue(s,this.dracoLoader);break;case yt.KHR_TEXTURE_TRANSFORM:o[c]=new vue;break;case yt.KHR_MESH_QUANTIZATION:o[c]=new Bue;break;default:u.indexOf(c)>=0&&a[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}A.setExtensions(o),A.setPlugins(a),A.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function tue(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const yt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class nue{constructor(e){this.parser=e,this.name=yt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,A=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let l;const c=new Ne(16777215);A.color!==void 0&&c.fromArray(A.color);const u=A.range!==void 0?A.range:0;switch(A.type){case"directional":l=new eS(c),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new oE(c),l.distance=u;break;case"spot":l=new lZ(c),l.distance=u,A.spot=A.spot||{},A.spot.innerConeAngle=A.spot.innerConeAngle!==void 0?A.spot.innerConeAngle:0,A.spot.outerConeAngle=A.spot.outerConeAngle!==void 0?A.spot.outerConeAngle:Math.PI/4,l.angle=A.spot.outerConeAngle,l.penumbra=1-A.spot.innerConeAngle/A.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+A.type)}return l.position.set(0,0,0),l.decay=2,A.intensity!==void 0&&(l.intensity=A.intensity),l.name=t.createUniqueName(A.name||"light_"+e),i=Promise.resolve(l),t.cache.add(r,i),i}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(A){return r._getNodeRef(t.cache,a,A)})}}class rue{constructor(){this.name=yt.KHR_MATERIALS_UNLIT}getMaterialType(){return is}extendParams(e,t,r){const i=[];e.color=new Ne(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,dt))}return Promise.all(i)}}class iue{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class sue{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:bu}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ge(a,a)}return Promise.all(s)}}class oue{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:bu}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class aue{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:bu}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ne(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,dt)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Aue{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:bu}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class lue{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:bu}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ne(a[0],a[1],a[2]),Promise.all(s)}}class cue{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:bu}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class uue{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:bu}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ne(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,dt)),Promise.all(s)}}class fue{constructor(e){this.parser=e,this.name=yt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class due{constructor(e){this.parser=e,this.name=yt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let A=r.textureLoader;if(a.uri){const l=r.options.manager.getHandler(a.uri);l!==null&&(A=l)}return this.detectSupport().then(function(l){if(l)return r.loadTextureImage(e,o.source,A);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class hue{constructor(e){this.name=yt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const A=i.byteOffset||0,l=i.byteLength||0,c=i.count,u=i.byteStride,f=new Uint8Array(a,A,l);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,u,f,i.mode,i.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(c*u);return o.decodeGltfBuffer(new Uint8Array(d),c,u,f,i.mode,i.filter),d})})}else return null}}class pue{constructor(e){this.name=yt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const l of i.primitives)if(l.mode!==Us.TRIANGLES&&l.mode!==Us.TRIANGLE_STRIP&&l.mode!==Us.TRIANGLE_FAN&&l.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],A={};for(const l in o)a.push(this.parser.getDependency("accessor",o[l]).then(c=>(A[l]=c,A[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{const c=l.pop(),u=c.isGroup?c.children:[c],f=l[0].count,d=[];for(const h of u){const p=new Oe,m=new z,g=new et,v=new z(1,1,1),y=new PC(h.geometry,h.material,f);for(let w=0;w<f;w++)A.TRANSLATION&&m.fromBufferAttribute(A.TRANSLATION,w),A.ROTATION&&g.fromBufferAttribute(A.ROTATION,w),A.SCALE&&v.fromBufferAttribute(A.SCALE,w),y.setMatrixAt(w,p.compose(m,g,v));for(const w in A)w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&h.geometry.setAttribute(w,A[w]);kt.prototype.copy.call(y,h),y.frustumCulled=!1,this.parser.assignFinalMaterial(y),d.push(y)}return c.isGroup?(c.clear(),c.add(...d),c):d[0]}))}}const MG="glTF",Lp=12,Uk={JSON:1313821514,BIN:5130562};class gue{constructor(e){this.name=yt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Lp);if(this.header={magic:va.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==MG)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Lp,i=new DataView(e,Lp);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===Uk.JSON){const A=new Uint8Array(e,Lp+s,o);this.content=va.decodeText(A)}else if(a===Uk.BIN){const A=Lp+s;this.body=e.slice(A,A+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class mue{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=yt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},A={},l={};for(const c in o){const u=kE[c]||c.toLowerCase();a[u]=o[c]}for(const c in e.attributes){const u=kE[c]||c.toLowerCase();if(o[c]!==void 0){const f=r.accessors[e.attributes[c]],d=Sm[f.componentType];l[u]=d.name,A[u]=f.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(u){i.decodeDracoFile(c,function(f){for(const d in f.attributes){const h=f.attributes[d],p=A[d];p!==void 0&&(h.normalized=p)}u(f)},a,l)})})}}class vue{constructor(){this.name=yt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class NE extends cu{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),r=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new Ne().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(A){for(const l in a)A.uniforms[l]=a[l];A.fragmentShader=A.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(A){a.specular.value=A}},specularMap:{get:function(){return a.specularMap.value},set:function(A){a.specularMap.value=A,A?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(A){a.glossiness.value=A}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(A){a.glossinessMap.value=A,A?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class yue{constructor(){this.name=yt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return NE}extendParams(e,t,r){const i=t.extensions[this.name];e.color=new Ne(1,1,1),e.opacity=1;const s=[];if(Array.isArray(i.diffuseFactor)){const o=i.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(i.diffuseTexture!==void 0&&s.push(r.assignTexture(e,"map",i.diffuseTexture,dt)),e.emissive=new Ne(0,0,0),e.glossiness=i.glossinessFactor!==void 0?i.glossinessFactor:1,e.specular=new Ne(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),i.specularGlossinessTexture!==void 0){const o=i.specularGlossinessTexture;s.push(r.assignTexture(e,"glossinessMap",o)),s.push(r.assignTexture(e,"specularMap",o,dt))}return Promise.all(s)}createMaterial(e){const t=new NE(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=Sh,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t}}class Bue{constructor(){this.name=yt.KHR_MESH_QUANTIZATION}}class TG extends A0{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,A=a*2,l=a*3,c=i-t,u=(r-t)/c,f=u*u,d=f*u,h=e*l,p=h-l,m=-2*d+3*f,g=d-f,v=1-m,y=g-f+u;for(let w=0;w!==a;w++){const C=o[p+w+a],b=o[p+w+A]*c,F=o[h+w+a],I=o[h+w]*c;s[w]=v*C+y*b+m*F+g*I}return s}}const wue=new et;class Cue extends TG{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return wue.fromArray(s).normalize().toArray(s),s}}const Us={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Sm={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},_k={9728:mr,9729:ri,9984:$B,9985:Z_,9986:qB,9987:wu},Sk={33071:ai,33648:pm,10497:cs},Qk={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},kE={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},qA={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},bue={CUBICSPLINE:void 0,LINEAR:lu,STEP:sh},GI={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function xue(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new cu({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ia})),n.DefaultMaterial}function Pp(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Uc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Iue(n,e,t){let r=!1,i=!1,s=!1;for(let l=0,c=e.length;l<c;l++){const u=e[l];if(u.POSITION!==void 0&&(r=!0),u.NORMAL!==void 0&&(i=!0),u.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],A=[];for(let l=0,c=e.length;l<c;l++){const u=e[l];if(r){const f=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):n.attributes.position;o.push(f)}if(i){const f=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):n.attributes.normal;a.push(f)}if(s){const f=u.COLOR_0!==void 0?t.getDependency("accessor",u.COLOR_0):n.attributes.color;A.push(f)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(A)]).then(function(l){const c=l[0],u=l[1],f=l[2];return r&&(n.morphAttributes.position=c),i&&(n.morphAttributes.normal=u),s&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}function Fue(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Eue(n){const e=n.extensions&&n.extensions[yt.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+Rk(e.attributes):t=n.indices+":"+Rk(n.attributes)+":"+n.mode,t}function Rk(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function DE(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Uue(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class _ue{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new tue,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new xu(this.options.manager):this.textureLoader=new Ene(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new $_(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};Pp(s,a,i),Uc(a,i),Promise.all(r._invokeAll(function(A){return A.afterRoot&&A.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,A=o.length;a<A;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const A=this.associations.get(o);A!=null&&this.associations.set(a,A);for(const[l,c]of o.children.entries())s(c,a.children[l])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[yt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(va.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0)return Promise.resolve(null);const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],A=Qk[i.type],l=Sm[i.componentType],c=l.BYTES_PER_ELEMENT,u=c*A,f=i.byteOffset||0,d=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,h=i.normalized===!0;let p,m;if(d&&d!==u){const g=Math.floor(f/d),v="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let y=t.cache.get(v);y||(p=new l(a,g*d,i.count*d/c),y=new Ane(p,d/c),t.cache.add(v,y)),m=new K_(y,A,f%d/c,h)}else a===null?p=new l(i.count*A):p=new l(a,f,i.count*A),m=new st(p,A,h);if(i.sparse!==void 0){const g=Qk.SCALAR,v=Sm[i.sparse.indices.componentType],y=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,C=new v(o[1],y,i.sparse.count*g),b=new l(o[2],w,i.sparse.count*A);a!==null&&(m=new st(m.array.slice(),m.itemSize,m.normalized));for(let F=0,I=C.length;F<I;F++){const S=C[F];if(m.setX(S,b[F*A]),A>=2&&m.setY(S,b[F*A+1]),A>=3&&m.setZ(S,b[F*A+2]),A>=4&&m.setW(S,b[F*A+3]),A>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const A=r.manager.getHandler(o.uri);A!==null&&(a=A)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],A=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[A])return this.textureCache[A];const l=this.loadImageSource(t,r).then(function(c){c.flipY=!1,c.name=o.name||a.name||"";const f=(s.samplers||{})[o.sampler]||{};return c.magFilter=_k[f.magFilter]||ri,c.minFilter=_k[f.minFilter]||wu,c.wrapS=Sk[f.wrapS]||cs,c.wrapT=Sk[f.wrapT]||cs,i.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[A]=l,l}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const o=i.images[e],a=self.URL||self.webkitURL;let A=o.uri||"",l=!1;if(o.bufferView!==void 0)A=r.getDependency("bufferView",o.bufferView).then(function(u){l=!0;const f=new Blob([u],{type:o.mimeType});return A=a.createObjectURL(f),A});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(A).then(function(u){return new Promise(function(f,d){let h=f;t.isImageBitmapLoader===!0&&(h=function(p){const m=new qn(p);m.needsUpdate=!0,f(m)}),t.load(va.resolveURL(u,s.path),h,void 0,d)})}).then(function(u){return l===!0&&a.revokeObjectURL(A),u.userData.mimeType=o.mimeType||Uue(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",A),u});return this.sourceCache[e]=c,c}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(r.texCoord!==void 0&&r.texCoord!=0&&!(t==="aoMap"&&r.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),s.extensions[yt.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[yt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const A=s.associations.get(o);o=s.extensions[yt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,A)}}return i!==void 0&&(o.encoding=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let A=this.cache.get(a);A||(A=new nZ,Os.prototype.copy.call(A,r),A.color.copy(r.color),A.map=r.map,A.sizeAttenuation=!1,this.cache.add(a,A)),r=A}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let A=this.cache.get(a);A||(A=new NA,Os.prototype.copy.call(A,r),A.color.copy(r.color),this.cache.add(a,A)),r=A}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let A=this.cache.get(a);A||(A=r.clone(),s&&(A.vertexColors=!0),o&&(A.flatShading=!0),i&&(A.normalScale&&(A.normalScale.y*=-1),A.clearcoatNormalScale&&(A.clearcoatNormalScale.y*=-1)),this.cache.add(a,A),this.associations.set(A,this.associations.get(r))),r=A}r.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return cu}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},A=s.extensions||{},l=[];if(A[yt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const u=i[yt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=u.getMaterialType(),l.push(u.extendParams(a,s,t))}else if(A[yt.KHR_MATERIALS_UNLIT]){const u=i[yt.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),l.push(u.extendParams(a,s,t))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new Ne(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const f=u.baseColorFactor;a.color.fromArray(f),a.opacity=f[3]}u.baseColorTexture!==void 0&&l.push(t.assignTexture(a,"map",u.baseColorTexture,dt)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(l.push(t.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Ii);const c=s.alphaMode||GI.OPAQUE;if(c===GI.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===GI.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==is&&(l.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ge(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}return s.occlusionTexture!==void 0&&o!==is&&(l.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==is&&(a.emissive=new Ne().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==is&&l.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,dt)),Promise.all(l).then(function(){let u;return o===NE?u=i[yt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):u=new o(a),s.name&&(u.name=s.name),Uc(u,s),t.associations.set(u,{materials:e}),s.extensions&&Pp(i,u,s),u})}createUniqueName(e){const t=mt.sanitizeNodeName(e||"");let r=t;for(let i=1;this.nodeNamesUsed[r];++i)r=t+"_"+i;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[yt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(A){return Mk(A,a,t)})}const o=[];for(let a=0,A=e.length;a<A;a++){const l=e[a],c=Eue(l),u=i[c];if(u)o.push(u.promise);else{let f;l.extensions&&l.extensions[yt.KHR_DRACO_MESH_COMPRESSION]?f=s(l):f=Mk(new zt,l,t),i[c]={primitive:l,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let A=0,l=o.length;A<l;A++){const c=o[A].material===void 0?xue(this.cache):this.getDependency("material",o[A].material);a.push(c)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(A){const l=A.slice(0,A.length-1),c=A[A.length-1],u=[];for(let d=0,h=c.length;d<h;d++){const p=c[d],m=o[d];let g;const v=l[d];if(m.mode===Us.TRIANGLES||m.mode===Us.TRIANGLE_STRIP||m.mode===Us.TRIANGLE_FAN||m.mode===void 0)g=s.isSkinnedMesh===!0?new Mh(p,v):new Tn(p,v),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),m.mode===Us.TRIANGLE_STRIP?g.geometry=Tk(g.geometry,Jj):m.mode===Us.TRIANGLE_FAN&&(g.geometry=Tk(g.geometry,PO));else if(m.mode===Us.LINES)g=new a0(p,v);else if(m.mode===Us.LINE_STRIP)g=new Th(p,v);else if(m.mode===Us.LINE_LOOP)g=new fne(p,v);else if(m.mode===Us.POINTS)g=new dne(p,v);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(g.geometry.morphAttributes).length>0&&Fue(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Uc(g,s),m.extensions&&Pp(i,g,m),t.assignFinalMaterial(g),u.push(g)}for(let d=0,h=u.length;d<h;d++)t.associations.set(u[d],{meshes:e,primitives:d});if(u.length===1)return u[0];const f=new Er;t.associations.set(f,{meshes:e});for(let d=0,h=u.length;d<h;d++)f.add(u[d]);return f})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new Ir(Dt.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new o0(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Uc(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(i){return r.inverseBindMatrices=i,r})}loadAnimation(e){const r=this.json.animations[e],i=[],s=[],o=[],a=[],A=[];for(let l=0,c=r.channels.length;l<c;l++){const u=r.channels[l],f=r.samplers[u.sampler],d=u.target,h=d.node,p=r.parameters!==void 0?r.parameters[f.input]:f.input,m=r.parameters!==void 0?r.parameters[f.output]:f.output;i.push(this.getDependency("node",h)),s.push(this.getDependency("accessor",p)),o.push(this.getDependency("accessor",m)),a.push(f),A.push(d)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(A)]).then(function(l){const c=l[0],u=l[1],f=l[2],d=l[3],h=l[4],p=[];for(let g=0,v=c.length;g<v;g++){const y=c[g],w=u[g],C=f[g],b=d[g],F=h[g];if(y===void 0)continue;y.updateMatrix();let I;switch(qA[F.path]){case qA.weights:I=ah;break;case qA.rotation:I=Fa;break;case qA.position:case qA.scale:default:I=zl;break}const S=y.name?y.name:y.uuid,T=b.interpolation!==void 0?bue[b.interpolation]:lu,H=[];qA[F.path]===qA.weights?y.traverse(function(Q){Q.morphTargetInfluences&&H.push(Q.name?Q.name:Q.uuid)}):H.push(S);let X=C.array;if(C.normalized){const Q=DE(X.constructor),B=new Float32Array(X.length);for(let E=0,R=X.length;E<R;E++)B[E]=X[E]*Q;X=B}for(let Q=0,B=H.length;Q<B;Q++){const E=new I(H[Q]+"."+qA[F.path],w.array,X,T);b.interpolation==="CUBICSPLINE"&&(E.createInterpolant=function(k){const M=this instanceof Fa?Cue:TG;return new M(this.times,this.values,this.getValueSize()/3,k)},E.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),p.push(E)}}const m=r.name?r.name:"animation_"+e;return new uu(m,void 0,p)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let A=0,l=i.weights.length;A<l;A++)a.morphTargetInfluences[A]=i.weights[A]}),o})}loadNode(e){const t=this.json,r=this.extensions,i=this,s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"";return function(){const a=[],A=i._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return A&&a.push(A),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(l){return i._getNodeRef(i.cameraCache,s.camera,l)})),i._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),Promise.all(a)}().then(function(a){let A;if(s.isBone===!0?A=new ym:a.length>1?A=new Er:a.length===1?A=a[0]:A=new kt,A!==a[0])for(let l=0,c=a.length;l<c;l++)A.add(a[l]);if(s.name&&(A.userData.name=s.name,A.name=o),Uc(A,s),s.extensions&&Pp(r,A,s),s.matrix!==void 0){const l=new Oe;l.fromArray(s.matrix),A.applyMatrix4(l)}else s.translation!==void 0&&A.position.fromArray(s.translation),s.rotation!==void 0&&A.quaternion.fromArray(s.rotation),s.scale!==void 0&&A.scale.fromArray(s.scale);return i.associations.has(A)||i.associations.set(A,{}),i.associations.get(A).nodes=e,A})}loadScene(e){const t=this.json,r=this.extensions,i=this.json.scenes[e],s=this,o=new Er;i.name&&(o.name=s.createUniqueName(i.name)),Uc(o,i),i.extensions&&Pp(r,o,i);const a=i.nodes||[],A=[];for(let l=0,c=a.length;l<c;l++)A.push(NG(a[l],o,t,s));return Promise.all(A).then(function(){const l=c=>{const u=new Map;for(const[f,d]of s.associations)(f instanceof Os||f instanceof qn)&&u.set(f,d);return c.traverse(f=>{const d=s.associations.get(f);d!=null&&u.set(f,d)}),u};return s.associations=l(o),o})}}function NG(n,e,t,r){const i=t.nodes[n];return r.getDependency("node",n).then(function(s){if(i.skin===void 0)return s;let o;return r.getDependency("skin",i.skin).then(function(a){o=a;const A=[];for(let l=0,c=o.joints.length;l<c;l++)A.push(r.getDependency("node",o.joints[l]));return Promise.all(A)}).then(function(a){return s.traverse(function(A){if(!A.isMesh)return;const l=[],c=[];for(let u=0,f=a.length;u<f;u++){const d=a[u];if(d){l.push(d);const h=new Oe;o.inverseBindMatrices!==void 0&&h.fromArray(o.inverseBindMatrices.array,u*16),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[u])}A.bind(new ac(l,c),A.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(i.children){const a=i.children;for(let A=0,l=a.length;A<l;A++){const c=a[A];o.push(NG(c,s,t,r))}}return Promise.all(o)})}function Sue(n,e,t){const r=e.attributes,i=new no;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],A=a.min,l=a.max;if(A!==void 0&&l!==void 0){if(i.set(new z(A[0],A[1],A[2]),new z(l[0],l[1],l[2])),a.normalized){const c=DE(Sm[a.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new z,A=new z;for(let l=0,c=s.length;l<c;l++){const u=s[l];if(u.POSITION!==void 0){const f=t.json.accessors[u.POSITION],d=f.min,h=f.max;if(d!==void 0&&h!==void 0){if(A.setX(Math.max(Math.abs(d[0]),Math.abs(h[0]))),A.setY(Math.max(Math.abs(d[1]),Math.abs(h[1]))),A.setZ(Math.max(Math.abs(d[2]),Math.abs(h[2]))),f.normalized){const p=DE(Sm[f.componentType]);A.multiplyScalar(p)}a.max(A)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new Cu;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function Mk(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(A){n.setAttribute(a,A)})}for(const o in r){const a=kE[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Uc(n,e),Sue(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?Iue(n,e.targets,t):n})}function Tk(n,e){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let A=0;A<a.count;A++)o.push(A);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(e===PO)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s}function $t(n){return n==null?[]:Array.isArray(n)?n:[n]}async function Que(n,e){console.log(n),console.log(e);const r=await new xu().load(e);r.encoding=dt,r.flipY=!1,n.traverse(i=>{if(i instanceof Tn){const s=Array.isArray(i.material)?i.material:[i.material];for(let o=0;o<s.length;o++)s[o]instanceof Ti?s[o].name.includes("(Outline)")||(console.log(s[o].name),s[o].uniforms.map.value=r,s[o].uniforms.shadeMultiplyTexture.value=r):(s[o].map=r,s[o].emissiveMap=r),s[o].needsUpdate=!0}})}function Bw(n){return n.replace(/^.*[\\/]/,"").split(".").slice(0,-1).join(".")}function Rue(n){const e=Object.keys(n);return n[e[Math.floor(Math.random()*e.length)]]}function Mue(n){return n[Math.floor(Math.random()*n.length)]}const Nd=n=>{const e=[];for(const t in n){const r=n[t].vrm;if(r){const i=r.data.cullingLayer;i>=0&&r.data.cullingMeshes.map(s=>{s.userData.cullLayer=i,s.userData.cullDistance=r.data.cullingDistance,s.userData.maxCullDistance=r.data.maxCullingDistance,e.push(s)})}}Mce(e)};function Tue(n){const e=[],t=[],r=[],i=[];let s=!1;return n.forEach(o=>{const A=$t(o.material)[0];A.type=="ShaderMaterial"?A.transparent==!0?(i.push(o),s=!0):(r.push(o),A.uniforms.alphaTest.value!=0&&(s=!0)):A.transparent==!0?(t.push(o),s=!0):(e.push(o),A.alphaTest!=0&&(s=!0))}),{stdMesh:e,stdTranspMesh:t,mToonMesh:r,mToonTranspMesh:i,requiresTransparency:s}}function Nue(n){const e=[],t=[],r=[],i=[],s=[],o=[];return n.forEach(a=>{$t(a.material).forEach(l=>{l.type=="ShaderMaterial"?l.transparent==!0?o.push(l):l.uniforms.alphaTest.value!=0?s.push(l):i.push(l):l.transparent==!0?r.push(l):l.alphaTest!=0?t.push(l):e.push(l)})}),{stdMats:e,stdCutoutpMats:t,stdTranspMats:r,mToonMats:i,mToonCutoutMats:s,mToonTranspMats:o}}function kG(n,e){n.data==null?n.data=e:n.data={...n.data,...e}}function kue(n,e){if(n.data!=null)return n.data[e]}function Lr(n){switch(n){case 1:return 128;case 2:return 256;case 3:return 512;case 4:return 1024;case 5:return 2048;case 6:return 4096;case 7:return 8192;case 8:return 16384;default:return 4096}}function Qm(n){const e=n.scene,t=kue(n,"animationControl");t&&t.dispose(),e.traverse(r=>{var i,s;if(r.geometry&&(((i=r.userData)==null?void 0:i.clippedIndexGeometry)!=null&&(r.userData.clippedIndexGeometry=null),((s=r.userData)==null?void 0:s.origIndexBuffer)!=null&&(r.userData.origIndexBuffer=null),r.geometry.dispose()),r.material)if(r.material.length)for(let o=0;o<r.material.length;++o)r.material[o].dispose();else r.material.dispose()}),e.parent&&e.parent.remove(e),Vh.deepDispose(e)}const Due=n=>{const e=n.geometry,t=e.attributes.position.array,r=e.attributes.normal.array,i=e.attributes.skinIndex.array,s=e.attributes.skinWeight.array,o=[],a=new z,A=new z,l=[];for(let c=0;c<n.skeleton.bones.length;c++)n.skeleton.bones[c].name.includes("Shoulder")?l[c]=3:n.skeleton.bones[c].name.includes("Arm")||n.skeleton.bones[c].name.includes("Hand")||n.skeleton.bones[c].name.includes("Index")||n.skeleton.bones[c].name.includes("Little")||n.skeleton.bones[c].name.includes("Middle")||n.skeleton.bones[c].name.includes("Ring")||n.skeleton.bones[c].name.includes("Thumb")?l[c]=1:n.skeleton.bones[c].name.includes("Foot")||n.skeleton.bones[c].name.includes("Toes")?l[c]=3:l[c]=0;for(let c=0;c<i.length/4;c++){const u=c*4;let f=i[u];for(let p=0;p<4;p++)s[f]<s[u+p]&&(f=i[u+p]);const d=c*3;switch(A.set(t[d],t[d+1],t[d+2]),l[f]){case 0:a.set(n.skeleton.bones[f].getWorldPosition(new z).x,A.y,n.skeleton.bones[f].getWorldPosition(new z).z);break;case 1:a.set(A.x,n.skeleton.bones[f].getWorldPosition(new z).y,n.skeleton.bones[f].getWorldPosition(new z).z);break;case 2:a.set(n.skeleton.bones[f].getWorldPosition(new z).x,n.skeleton.bones[f].getWorldPosition(new z).y,n.skeleton.bones[f].getWorldPosition(new z).z);break}const h=new z;l[f]!==3?h.subVectors(A,a).normalize():h.set(r[d],r[d+1],r[d+2]),o.push(h)}e.userData.boneDirections=o},DG=n=>{var t,r,i,s,o,a,A,l,c,u,f;const e=n.humanoid.humanBones;e.upperChest==null&&e.neck.node.parent!=e.chest&&(e.neck.node.parent!=e.chest.node?e.upperChest={node:e.neck.node.parent}:(e.upperChest={node:e.neck.node.parent},e.chest={node:e.neck.node.parent.parent})),e.leftShoulder==null&&(e.leftUpperArm.node.parent!=((t=e.chest)==null?void 0:t.node)&&e.leftUpperArm.node.parent!=((r=e.upperChest)==null?void 0:r.node)&&e.leftUpperArm.node.parent!=((i=e.spine)==null?void 0:i.node)&&e.leftUpperArm.node.parent!=((s=e.neck)==null?void 0:s.node)&&e.leftUpperArm.node.parent!=((o=e.head)==null?void 0:o.node),e.leftShoulder={node:e.leftUpperArm.node.parent}),e.rightShoulder==null&&(e.rightUpperArm.node.parent!=((a=e.chest)==null?void 0:a.node)&&e.rightUpperArm.node.parent!=((A=e.upperChest)==null?void 0:A.node)&&e.rightUpperArm.node.parent!=((l=e.spine)==null?void 0:l.node)&&e.rightUpperArm.node.parent!=((c=e.neck)==null?void 0:c.node)&&e.rightUpperArm.node.parent!=((u=e.head)==null?void 0:u.node),e.rightShoulder={node:e.rightUpperArm.node.parent});for(let d in Im)d=d.charAt(0).toLowerCase()+d.slice(1),(f=e[d])!=null&&f.node||(e[d]={node:new ym}),e[d].node.name=d;for(const d in e){const h=hG[d];h&&e[h].node.add(e[d].node)}};function VG({candidates:n,predicate:e}){if(!n.length)return null;const t=n.shift();return e(t)?t:(n=n.concat(t.children),VG({candidates:n,predicate:e}))}function LG(n,e){return VG({candidates:[n],predicate:t=>t.name===e})}function PG({candidates:n,predicate:e,results:t=[]}){if(!n.length)return t;const r=n.shift();return e(r)&&t.push(r),n=n.concat(r.children),PG({candidates:n,predicate:e,results:t})}function lh(n,e){return PG({candidates:[n],predicate:t=>$t(e).includes(t.type)})}function Vue(n,e,t){const r=lh(n,"SkinnedMesh");return{humanBones:Pue(r[0]),materials:n.userData.atlasMaterial,meta:Lue(e,t)}}function Lue(n,e){return e=e||{},{...{authors:["CharacterCreator"],metaVersion:"1",version:"v1",name:n,licenseUrl:"https://vrm.dev/licenses/1.0/",commercialUssageName:"personalNonProfit",contactInformation:"https://webaverse.com/",allowExcessivelyViolentUsage:!1,allowExcessivelySexualUsage:!1,allowPoliticalOrReligiousUsage:!1,allowAntisocialOrHateUsage:!1,creditNotation:"required",allowRedistribution:!1,modification:"prohibited"},...e}}function Pue(n){const e={};return n.skeleton.bones.map(t=>{for(const r in Im)if(Im[r]===t.name){e[t.name]={node:t};break}}),e}function WG(n){return Oue(Wue(n),n)}function Wue(n){return[...new Set([...$t(n.requiredTraits),...$t(n.randomTraits)])]}function Oue(n,e){const t=[];return n.map(r=>{const i=e.traits.find(s=>s.trait===r);if(i){const s=OG(i,e);(s==null?void 0:s.length)>0&&t.push(s[Math.floor(Math.random()*s.length)])}}),t}const Zue=(n,e)=>{var r;const t=e.filter(i=>i.id===n.class);if(t.length>0){const i=t[0],s=[];for(const o in n){const a=i.traits.filter(A=>A.trait===o);if(a.length>0){const A=a[0];((r=n[o].traitInfo)==null?void 0:r.id)!=null?s.push({item:n[o].traitInfo,textureTrait:n[o].textureInfo,colorTrait:n[o].colorInfo,trait:A}):s.push({item:null,trait:A})}}return s}return null};function Gue(n,e,t){var s;const r=t.traits.find(o=>o.trait===e);if(r==null)return null;let i=(s=r.collection)==null?void 0:s.findIndex(o=>o.id===n);if(i=i??-1,i!=-1){const o=r.collection[i],a=r.name+"_"+i,A=(t.assetsLocation||"")+t.thumbnailsDirectory;return rB(a,r,o,A+o.thumbnail)}else return console.log(e+" : "+n),null}function OG(n,e){const t=[],r=(e.assetsLocation||"")+e.thumbnailsDirectory;return n.collection.map((i,s)=>{var A,l;const o=(A=e==null?void 0:e.textureCollections)==null?void 0:A.find(c=>c.trait===i.textureCollection),a=(l=e==null?void 0:e.colorCollections)==null?void 0:l.find(c=>c.trait===i.colorCollection);if(o==null&&a==null){const c=n.name+"_"+s;t.push(rB(c,n,i,r+i.thumbnail))}(o==null?void 0:o.collection.length)>0&&o.collection.map((c,u)=>{const f=n.name+"_"+s+"_txt"+u,d=Nk(i,c,u);t.push(rB(f,n,i,r+d,null,c))}),(a==null?void 0:a.collection.length)>0&&a.collection.map((c,u)=>{const f=n.name+"_"+s+"_col"+u,d=Nk(i,c,u);t.push(rB(f,n,i,r+d,Jue(c.value[0]),null,c))})}),t}function rB(n,e,t,r,i=null,s=null,o=null){return{key:n,trait:e,item:t,icon:r,iconHSL:i,textureTrait:s,colorTrait:o}}function Jue(n){const e=new Ne(n),t={h:0,s:0,l:0};let r,i,s,o,a,A,l,c,u,f,d;return r=e.r,i=e.g,s=e.b,u=Math.max(r,i,s),f=u-Math.min(r,i,s),d=h=>(u-h)/6/f+1/2,f==0?l=c=0:(c=f/u,o=d(r),a=d(i),A=d(s),r===u?l=A-a:i===u?l=1/3+o-A:s===u&&(l=2/3+a-o),l<0?l+=1:l>1&&(l-=1)),t.h=l,t.s=c,t.l=u,t}function Nk(n,e,t){return n.thumbnailOverrides&&n.thumbnailOverrides[t]?n.thumbnailOverrides[t]:e.thumbnail||n.thumbnail}function iA(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ZG(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var As={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ch={duration:.5,overwrite:!1,delay:0},gS,zr,Kn,Vs=1e8,nn=1/Vs,VE=Math.PI*2,Hue=VE/4,zue=0,GG=Math.sqrt,Xue=Math.cos,Yue=Math.sin,Br=function(e){return typeof e=="string"},Nn=function(e){return typeof e=="function"},_A=function(e){return typeof e=="number"},mS=function(e){return typeof e>"u"},Ua=function(e){return typeof e=="object"},_i=function(e){return e!==!1},JG=function(){return typeof window<"u"},ay=function(e){return Nn(e)||Br(e)},HG=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Xr=Array.isArray,LE=/(?:-?\.?\d|\.)+/gi,zG=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,pd=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,JI=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,XG=/[+-]=-?[.\d]+/,YG=/[^,'"\[\]\s]+/gi,Kue=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,bn,_s,PE,vS,us={},ww={},KG,jG=function(e){return(ww=du(e,us))&&fs},yS=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Cw=function(e,t){return!t&&console.warn(e)},$G=function(e,t){return e&&(us[e]=t)&&ww&&(ww[e]=t)||us},Rm=function(){return 0},jue={suppressEvents:!0,isStart:!0,kill:!1},iB={suppressEvents:!0,kill:!1},$ue={suppressEvents:!0},BS={},Vl=[],WE={},qG,$i={},HI={},kk=30,sB=[],wS="",CS=function(e){var t=e[0],r,i;if(Ua(t)||Nn(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=sB.length;i--&&!sB[i].targetTest(t););r=sB[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new wJ(e[i],r)))||e.splice(i,1);return e},$c=function(e){return e._gsap||CS(Ls(e))[0]._gsap},eJ=function(e,t,r){return(r=e[t])&&Nn(r)?e[t]():mS(r)&&e.getAttribute&&e.getAttribute(t)||r},Si=function(e,t){return(e=e.split(",")).forEach(t)||e},On=function(e){return Math.round(e*1e5)/1e5||0},Fr=function(e){return Math.round(e*1e7)/1e7||0},kd=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},que=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},bw=function(){var e=Vl.length,t=Vl.slice(0),r,i;for(WE={},Vl.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},tJ=function(e,t,r,i){Vl.length&&!zr&&bw(),e.render(t,r,i||zr&&t<0&&(e._initted||e._startAt)),Vl.length&&!zr&&bw()},nJ=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(YG).length<2?t:Br(e)?e.trim():e},rJ=function(e){return e},Ks=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},efe=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},du=function(e,t){for(var r in t)e[r]=t[r];return e},Dk=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=Ua(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},xw=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},Wg=function(e){var t=e.parent||bn,r=e.keyframes?efe(Xr(e.keyframes)):Ks;if(_i(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},tfe=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},iJ=function(e,t,r,i,s){r===void 0&&(r="_first"),i===void 0&&(i="_last");var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},ib=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},Yl=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},qc=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},nfe=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},OE=function(e,t,r,i){return e._startAt&&(zr?e._startAt.revert(iB):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},rfe=function n(e){return!e||e._ts&&n(e.parent)},Vk=function(e){return e._repeat?uh(e._tTime,e=e.duration()+e._rDelay)*e:0},uh=function(e,t){var r=Math.floor(e/=t);return e&&r===e?r-1:r},Iw=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},sb=function(e){return e._end=Fr(e._start+(e._tDur/Math.abs(e._ts||e._rts||nn)||0))},ob=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Fr(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),sb(e),r._dirty||qc(r,e)),e},sJ=function(e,t){var r;if((t._time||t._initted&&!t._dur)&&(r=Iw(e.rawTime(),t),(!t._dur||u0(0,t.totalDuration(),r)-t._tTime>nn)&&t.render(r,!0)),qc(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-nn}},la=function(e,t,r,i){return t.parent&&Yl(t),t._start=Fr((_A(r)?r:r||e!==bn?Is(e,r,t):e._time)+t._delay),t._end=Fr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),iJ(e,t,"_first","_last",e._sort?"_start":0),ZE(t)||(e._recent=t),i||sJ(e,t),e._ts<0&&ob(e,e._tTime),e},oJ=function(e,t){return(us.ScrollTrigger||yS("scrollTrigger",t))&&us.ScrollTrigger.create(t,e)},aJ=function(e,t,r,i,s){if(xS(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!zr&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&qG!==es.frame)return Vl.push(e),e._lazy=[s,i],1},ife=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},ZE=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},sfe=function(e,t,r,i){var s=e.ratio,o=t<0||!t&&(!e._start&&ife(e)&&!(!e._initted&&ZE(e))||(e._ts<0||e._dp._ts<0)&&!ZE(e))?0:1,a=e._rDelay,A=0,l,c,u;if(a&&e._repeat&&(A=u0(0,e._tDur,t),c=uh(A,a),e._yoyo&&c&1&&(o=1-o),c!==uh(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||zr||i||e._zTime===nn||!t&&e._zTime){if(!e._initted&&aJ(e,t,i,r,A))return;for(u=e._zTime,e._zTime=t||(r?nn:0),r||(r=t&&!u),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=A,l=e._pt;l;)l.r(o,l.d),l=l._next;t<0&&OE(e,t,r,!0),e._onUpdate&&!r&&Ps(e,"onUpdate"),A&&e._repeat&&!r&&e.parent&&Ps(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Yl(e,1),!r&&!zr&&(Ps(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},ofe=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},fh=function(e,t,r,i){var s=e._repeat,o=Fr(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Fr(o*(s+1)+e._rDelay*s):o,a>0&&!i&&ob(e,e._tTime=e._tDur*a),e.parent&&sb(e),r||qc(e.parent,e),e},Lk=function(e){return e instanceof bi?qc(e):fh(e,e._dur)},afe={_start:0,endTime:Rm,totalDuration:Rm},Is=function n(e,t,r){var i=e.labels,s=e._recent||afe,o=e.duration()>=Vs?s.endTime(!1):e._dur,a,A,l;return Br(t)&&(isNaN(t)||t in i)?(A=t.charAt(0),l=t.substr(-1)==="%",a=t.indexOf("="),A==="<"||A===">"?(a>=0&&(t=t.replace(/=/,"")),(A==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(l?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(A=parseFloat(t.charAt(a-1)+t.substr(a+1)),l&&r&&(A=A/100*(Xr(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+A:o+A)):t==null?o:+t},Og=function(e,t,r){var i=_A(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,A;if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,A=r;A&&!("immediateRender"in a);)a=A.vars.defaults||{},A=_i(A.vars.inherit)&&A.parent;o.immediateRender=_i(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new sr(t[0],o,t[s+1])},Ac=function(e,t){return e||e===0?t(e):t},u0=function(e,t,r){return r<e?e:r>t?t:r},Gr=function(e,t){return!Br(e)||!(t=Kue.exec(e))?"":t[1]},Afe=function(e,t,r){return Ac(r,function(i){return u0(e,t,i)})},GE=[].slice,AJ=function(e,t){return e&&Ua(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Ua(e[0]))&&!e.nodeType&&e!==_s},lfe=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return Br(i)&&!t||AJ(i,1)?(s=r).push.apply(s,Ls(i)):r.push(i)})||r},Ls=function(e,t,r){return Kn&&!t&&Kn.selector?Kn.selector(e):Br(e)&&!r&&(PE||!dh())?GE.call((t||vS).querySelectorAll(e),0):Xr(e)?lfe(e,r):AJ(e)?GE.call(e,0):e?[e]:[]},JE=function(e){return e=Ls(e)[0]||Cw("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return Ls(t,r.querySelectorAll?r:r===e?Cw("Invalid scope")||vS.createElement("div"):e)}},lJ=function(e){return e.sort(function(){return .5-Math.random()})},cJ=function(e){if(Nn(e))return e;var t=Ua(e)?e:{each:e},r=eu(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,A=isNaN(i)||a,l=t.axis,c=i,u=i;return Br(i)?c=u={center:.5,edges:.5,end:1}[i]||0:!a&&A&&(c=i[0],u=i[1]),function(f,d,h){var p=(h||t).length,m=o[p],g,v,y,w,C,b,F,I,S;if(!m){if(S=t.grid==="auto"?0:(t.grid||[1,Vs])[1],!S){for(F=-Vs;F<(F=h[S++].getBoundingClientRect().left)&&S<p;);S--}for(m=o[p]=[],g=A?Math.min(S,p)*c-.5:i%S,v=S===Vs?0:A?p*u/S-.5:i/S|0,F=0,I=Vs,b=0;b<p;b++)y=b%S-g,w=v-(b/S|0),m[b]=C=l?Math.abs(l==="y"?w:y):GG(y*y+w*w),C>F&&(F=C),C<I&&(I=C);i==="random"&&lJ(m),m.max=F-I,m.min=I,m.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(S>p?p-1:l?l==="y"?p/S:S:Math.max(S,p/S))||0)*(i==="edges"?-1:1),m.b=p<0?s-p:s,m.u=Gr(t.amount||t.each)||0,r=r&&p<0?vJ(r):r}return p=(m[f]-m.min)/m.max||0,Fr(m.b+(r?r(p):p)*m.v)+m.u}},HE=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=Fr(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(_A(r)?0:Gr(r))}},uJ=function(e,t){var r=Xr(e),i,s;return!r&&Ua(e)&&(i=r=e.radius||Vs,e.values?(e=Ls(e.values),(s=!_A(e[0]))&&(i*=i)):e=HE(e.increment)),Ac(t,r?Nn(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),A=parseFloat(s?o.y:0),l=Vs,c=0,u=e.length,f,d;u--;)s?(f=e[u].x-a,d=e[u].y-A,f=f*f+d*d):f=Math.abs(e[u]-a),f<l&&(l=f,c=u);return c=!i||l<=i?e[c]:o,s||c===o||_A(o)?c:c+Gr(o)}:HE(e))},fJ=function(e,t,r,i){return Ac(Xr(e)?!t:r===!0?!!(r=0):!i,function(){return Xr(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},cfe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},ufe=function(e,t){return function(r){return e(parseFloat(r))+(t||Gr(r))}},ffe=function(e,t,r){return hJ(e,t,0,1,r)},dJ=function(e,t,r){return Ac(r,function(i){return e[~~t(i)]})},dfe=function n(e,t,r){var i=t-e;return Xr(e)?dJ(e,n(0,e.length),t):Ac(r,function(s){return(i+(s-e)%i)%i+e})},hfe=function n(e,t,r){var i=t-e,s=i*2;return Xr(e)?dJ(e,n(0,e.length-1),t):Ac(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},Mm=function(e){for(var t=0,r="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?YG:LE),r+=e.substr(t,i-t)+fJ(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},hJ=function(e,t,r,i,s){var o=t-e,a=i-r;return Ac(s,function(A){return r+((A-e)/o*a||0)})},pfe=function n(e,t,r,i){var s=isNaN(e+t)?0:function(d){return(1-d)*e+d*t};if(!s){var o=Br(e),a={},A,l,c,u,f;if(r===!0&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(Xr(e)&&!Xr(t)){for(c=[],u=e.length,f=u-2,l=1;l<u;l++)c.push(n(e[l-1],e[l]));u--,s=function(h){h*=u;var p=Math.min(f,~~h);return c[p](h-p)},r=t}else i||(e=du(Xr(e)?[]:{},e));if(!c){for(A in t)bS.call(a,e,A,"get",t[A]);s=function(h){return ES(h,a)||(o?e.p:e)}}}return Ac(r,s)},Pk=function(e,t,r){var i=e.labels,s=Vs,o,a,A;for(o in i)a=i[o]-t,a<0==!!r&&a&&s>(a=Math.abs(a))&&(A=o,s=a);return A},Ps=function(e,t,r){var i=e.vars,s=i[t],o=Kn,a=e._ctx,A,l,c;if(s)return A=i[t+"Params"],l=i.callbackScope||e,r&&Vl.length&&bw(),a&&(Kn=a),c=A?s.apply(l,A):s.call(l),Kn=o,c},vg=function(e){return Yl(e),e.scrollTrigger&&e.scrollTrigger.kill(!!zr),e.progress()<1&&Ps(e,"onInterrupt"),e},gd,gfe=function(e){e=!e.name&&e.default||e;var t=e.name,r=Nn(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:Rm,render:ES,add:bS,kill:Rfe,modifier:Qfe,rawVars:0},o={targetTest:0,get:0,getSetter:FS,aliases:{},register:0};if(dh(),e!==i){if($i[t])return;Ks(i,Ks(xw(e,s),o)),du(i.prototype,du(s,xw(e,o))),$i[i.prop=t]=i,e.targetTest&&(sB.push(i),BS[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}$G(t,i),e.register&&e.register(fs,i,Qi)},en=255,yg={aqua:[0,en,en],lime:[0,en,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,en],navy:[0,0,128],white:[en,en,en],olive:[128,128,0],yellow:[en,en,0],orange:[en,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[en,0,0],pink:[en,192,203],cyan:[0,en,en],transparent:[en,en,en,0]},zI=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*en+.5|0},pJ=function(e,t,r){var i=e?_A(e)?[e>>16,e>>8&en,e&en]:0:yg.black,s,o,a,A,l,c,u,f,d,h;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),yg[e])i=yg[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&en,i&en,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&en,e&en]}else if(e.substr(0,3)==="hsl"){if(i=h=e.match(LE),!t)A=+i[0]%360/360,l=+i[1]/100,c=+i[2]/100,o=c<=.5?c*(l+1):c+l-c*l,s=c*2-o,i.length>3&&(i[3]*=1),i[0]=zI(A+1/3,s,o),i[1]=zI(A,s,o),i[2]=zI(A-1/3,s,o);else if(~e.indexOf("="))return i=e.match(zG),r&&i.length<4&&(i[3]=1),i}else i=e.match(LE)||yg.transparent;i=i.map(Number)}return t&&!h&&(s=i[0]/en,o=i[1]/en,a=i[2]/en,u=Math.max(s,o,a),f=Math.min(s,o,a),c=(u+f)/2,u===f?A=l=0:(d=u-f,l=c>.5?d/(2-u-f):d/(u+f),A=u===s?(o-a)/d+(o<a?6:0):u===o?(a-s)/d+2:(s-o)/d+4,A*=60),i[0]=~~(A+.5),i[1]=~~(l*100+.5),i[2]=~~(c*100+.5)),r&&i.length<4&&(i[3]=1),i},gJ=function(e){var t=[],r=[],i=-1;return e.split(Ll).forEach(function(s){var o=s.match(pd)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},Wk=function(e,t,r){var i="",s=(e+i).match(Ll),o=t?"hsla(":"rgba(",a=0,A,l,c,u;if(!s)return e;if(s=s.map(function(f){return(f=pJ(f,t,1))&&o+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),r&&(c=gJ(e),A=r.c,A.join(i)!==c.c.join(i)))for(l=e.replace(Ll,"1").split(pd),u=l.length-1;a<u;a++)i+=l[a]+(~A.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:r).shift());if(!l)for(l=e.split(Ll),u=l.length-1;a<u;a++)i+=l[a]+s[a];return i+l[u]},Ll=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in yg)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),mfe=/hsl[a]?\(/,mJ=function(e){var t=e.join(" "),r;if(Ll.lastIndex=0,Ll.test(t))return r=mfe.test(t),e[1]=Wk(e[1],r),e[0]=Wk(e[0],r,gJ(e[1])),!0},Tm,es=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,o=s,a=[],A,l,c,u,f,d,h=function p(m){var g=n()-i,v=m===!0,y,w,C,b;if(g>e&&(r+=g-t),i+=g,C=i-r,y=C-o,(y>0||v)&&(b=++u.frame,f=C-u.time*1e3,u.time=C=C/1e3,o+=y+(y>=s?4:s-y),w=1),v||(A=l(p)),w)for(d=0;d<a.length;d++)a[d](C,f,b,m)};return u={time:0,frame:0,tick:function(){h(!0)},deltaRatio:function(m){return f/(1e3/(m||60))},wake:function(){KG&&(!PE&&JG()&&(_s=PE=window,vS=_s.document||{},us.gsap=fs,(_s.gsapVersions||(_s.gsapVersions=[])).push(fs.version),jG(ww||_s.GreenSockGlobals||!_s.gsap&&_s||{}),c=_s.requestAnimationFrame),A&&u.sleep(),l=c||function(m){return setTimeout(m,o-u.time*1e3+1|0)},Tm=1,h(2))},sleep:function(){(c?_s.cancelAnimationFrame:clearTimeout)(A),Tm=0,l=Rm},lagSmoothing:function(m,g){e=m||1/0,t=Math.min(g||33,e)},fps:function(m){s=1e3/(m||240),o=u.time*1e3+s},add:function(m,g,v){var y=g?function(w,C,b,F){m(w,C,b,F),u.remove(y)}:m;return u.remove(m),a[v?"unshift":"push"](y),dh(),y},remove:function(m,g){~(g=a.indexOf(m))&&a.splice(g,1)&&d>=g&&d--},_listeners:a},u}(),dh=function(){return!Tm&&es.wake()},Mt={},vfe=/^[\d.\-M][\d.\-,\s]/,yfe=/["']/g,Bfe=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,A,l;s<o;s++)A=r[s],a=s!==o-1?A.lastIndexOf(","):A.length,l=A.substr(0,a),t[i]=isNaN(l)?l.replace(yfe,"").trim():+l,i=A.substr(a+1).trim();return t},wfe=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},Cfe=function(e){var t=(e+"").split("("),r=Mt[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[Bfe(t[1])]:wfe(e).split(",").map(nJ)):Mt._CE&&vfe.test(e)?Mt._CE("",e):r},vJ=function(e){return function(t){return 1-e(1-t)}},yJ=function n(e,t){for(var r=e._first,i;r;)r instanceof bi?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},eu=function(e,t){return e&&(Nn(e)?e:Mt[e]||Cfe(e))||t},Iu=function(e,t,r,i){r===void 0&&(r=function(A){return 1-t(1-A)}),i===void 0&&(i=function(A){return A<.5?t(A*2)/2:1-t((1-A)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},o;return Si(e,function(a){Mt[a]=us[a]=s,Mt[o=a.toLowerCase()]=r;for(var A in s)Mt[o+(A==="easeIn"?".in":A==="easeOut"?".out":".inOut")]=Mt[a+"."+A]=s[A]}),s},BJ=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},XI=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/VE*(Math.asin(1/i)||0),a=function(c){return c===1?1:i*Math.pow(2,-10*c)*Yue((c-o)*s)+1},A=e==="out"?a:e==="in"?function(l){return 1-a(1-l)}:BJ(a);return s=VE/s,A.config=function(l,c){return n(e,l,c)},A},YI=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:BJ(r);return i.config=function(s){return n(e,s)},i};Si("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Iu(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});Mt.Linear.easeNone=Mt.none=Mt.Linear.easeIn;Iu("Elastic",XI("in"),XI("out"),XI());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(a){return a<t?n*a*a:a<r?n*Math.pow(a-1.5/e,2)+.75:a<i?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Iu("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Iu("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});Iu("Circ",function(n){return-(GG(1-n*n)-1)});Iu("Sine",function(n){return n===1?1:-Xue(n*Hue)+1});Iu("Back",YI("in"),YI("out"),YI());Mt.SteppedEase=Mt.steps=us.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,o=1-nn;return function(a){return((i*u0(0,o,a)|0)+s)*r}}};ch.ease=Mt["quad.out"];Si("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return wS+=n+","+n+"Params,"});var wJ=function(e,t){this.id=zue++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:eJ,this.set=t?t.getSetter:FS},hh=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,fh(this,+t.duration,1,1),this.data=t.data,Kn&&(this._ctx=Kn,Kn.data.push(this)),Tm||es.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,fh(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(dh(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(ob(this,r),!s._dp||s.parent||sJ(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&la(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===nn||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),tJ(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+Vk(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+Vk(this),i):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?uh(this._tTime,s)+1:1},e.timeScale=function(r){if(!arguments.length)return this._rts===-nn?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?Iw(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-nn?0:this._rts,this.totalTime(u0(-this._delay,this._tDur,i),!0),sb(this),nfe(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(dh(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==nn&&(this._tTime-=nn)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&la(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(_i(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Iw(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=$ue);var i=zr;return zr=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),zr=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(i._ts||1),i=i._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,Lk(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,Lk(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(Is(this,r),_i(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,_i(i))},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-nn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-nn,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-nn)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=Nn(r)?r:rJ,a=function(){var l=i.then;i.then=null,Nn(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=l),s(o),i.then=l};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){vg(this)},n}();Ks(hh.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-nn,_prom:0,_ps:!1,_rts:1});var bi=function(n){ZG(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=_i(r.sortChildren),bn&&la(r.parent||bn,iA(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&oJ(iA(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return Og(0,arguments,this),this},t.from=function(i,s,o){return Og(1,arguments,this),this},t.fromTo=function(i,s,o,a){return Og(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,Wg(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new sr(i,s,Is(this,o),1),this},t.call=function(i,s,o){return la(this,sr.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,A,l,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=l,o.onCompleteParams=c,o.parent=this,new sr(i,o,Is(this,A)),this},t.staggerFrom=function(i,s,o,a,A,l,c){return o.runBackwards=1,Wg(o).immediateRender=_i(o.immediateRender),this.staggerTo(i,s,o,a,A,l,c)},t.staggerFromTo=function(i,s,o,a,A,l,c,u){return a.startAt=o,Wg(a).immediateRender=_i(a.immediateRender),this.staggerTo(i,s,a,A,l,c,u)},t.render=function(i,s,o){var a=this._time,A=this._dirty?this.totalDuration():this._tDur,l=this._dur,c=i<=0?0:Fr(i),u=this._zTime<0!=i<0&&(this._initted||!l),f,d,h,p,m,g,v,y,w,C,b,F;if(this!==bn&&c>A&&i>=0&&(c=A),c!==this._tTime||o||u){if(a!==this._time&&l&&(c+=this._time-a,i+=this._time-a),f=c,w=this._start,y=this._ts,g=!y,u&&(l||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(b=this._yoyo,m=l+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(m*100+i,s,o);if(f=Fr(c%m),c===A?(p=this._repeat,f=l):(p=~~(c/m),p&&p===c/m&&(f=l,p--),f>l&&(f=l)),C=uh(this._tTime,m),!a&&this._tTime&&C!==p&&(C=p),b&&p&1&&(f=l-f,F=1),p!==C&&!this._lock){var I=b&&C&1,S=I===(b&&p&1);if(p<C&&(I=!I),a=I?0:l,this._lock=1,this.render(a||(F?0:Fr(p*m)),s,!l)._lock=0,this._tTime=c,!s&&this.parent&&Ps(this,"onRepeat"),this.vars.repeatRefresh&&!F&&(this.invalidate()._lock=1),a&&a!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,A=this._tDur,S&&(this._lock=2,a=I?l:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!F&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;yJ(this,F)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(v=ofe(this,Fr(a),Fr(f)),v&&(c-=f-(f=v._start))),this._tTime=c,this._time=f,this._act=!y,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&f&&!s&&(Ps(this,"onStart"),this._tTime!==c))return this;if(f>=a&&i>=0)for(d=this._first;d;){if(h=d._next,(d._act||f>=d._start)&&d._ts&&v!==d){if(d.parent!==this)return this.render(i,s,o);if(d.render(d._ts>0?(f-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(f-d._start)*d._ts,s,o),f!==this._time||!this._ts&&!g){v=0,h&&(c+=this._zTime=-nn);break}}d=h}else{d=this._last;for(var T=i<0?i:f;d;){if(h=d._prev,(d._act||T<=d._end)&&d._ts&&v!==d){if(d.parent!==this)return this.render(i,s,o);if(d.render(d._ts>0?(T-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(T-d._start)*d._ts,s,o||zr&&(d._initted||d._startAt)),f!==this._time||!this._ts&&!g){v=0,h&&(c+=this._zTime=T?-nn:nn);break}}d=h}}if(v&&!s&&(this.pause(),v.render(f>=a?0:-nn)._zTime=f>=a?1:-1,this._ts))return this._start=w,sb(this),this.render(i,s,o);this._onUpdate&&!s&&Ps(this,"onUpdate",!0),(c===A&&this._tTime>=this.totalDuration()||!c&&a)&&(w===this._start||Math.abs(y)!==Math.abs(this._ts))&&(this._lock||((i||!l)&&(c===A&&this._ts>0||!c&&this._ts<0)&&Yl(this,1),!s&&!(i<0&&!a)&&(c||a||!A)&&(Ps(this,c===A&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<A&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(_A(s)||(s=Is(this,s,i)),!(i instanceof hh)){if(Xr(i))return i.forEach(function(a){return o.add(a,s)}),this;if(Br(i))return this.addLabel(i,s);if(Nn(i))i=sr.delayedCall(0,i);else return this}return this!==i?la(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Vs);for(var A=[],l=this._first;l;)l._start>=a&&(l instanceof sr?s&&A.push(l):(o&&A.push(l),i&&A.push.apply(A,l.getChildren(!0,s,o)))),l=l._next;return A},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return Br(i)?this.removeLabel(i):Nn(i)?this.killTweensOf(i):(ib(this,i),i===this._recent&&(this._recent=this._last),qc(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Fr(es.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=Is(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=sr.delayedCall(0,s||Rm,o);return a.data="isPause",this._hasPause=1,la(this,a,Is(this,i))},t.removePause=function(i){var s=this._first;for(i=Is(this,i);s;)s._start===i&&s.data==="isPause"&&Yl(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),A=a.length;A--;)bl!==a[A]&&a[A].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=Ls(i),A=this._first,l=_A(s),c;A;)A instanceof sr?que(A._targets,a)&&(l?(!bl||A._initted&&A._ts)&&A.globalTime(0)<=s&&A.globalTime(A.totalDuration())>s:!s||A.isActive())&&o.push(A):(c=A.getTweensOf(a,s)).length&&o.push.apply(o,c),A=A._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=Is(o,i),A=s,l=A.startAt,c=A.onStart,u=A.onStartParams,f=A.immediateRender,d,h=sr.to(o,Ks({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale())||nn,onStart:function(){if(o.pause(),!d){var m=s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale());h._dur!==m&&fh(h,m,0,1).render(h._time,!0,!0),d=1}c&&c.apply(h,u||[])}},s));return f?h.render(0):h},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,Ks({startAt:{time:Is(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),Pk(this,Is(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),Pk(this,Is(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+nn)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,A=this.labels,l;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(l in A)A[l]>=o&&(A[l]+=i);return qc(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),qc(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,A=Vs,l,c,u;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(u=o.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>A&&o._sort&&a._ts&&!o._lock?(o._lock=1,la(o,a,c-a._delay,1)._lock=0):A=c,c<0&&a._ts&&(s-=c,(!u&&!o._dp||u&&u.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),A=0),a._end>s&&a._ts&&(s=a._end),a=l;fh(o,o===bn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(bn._ts&&(tJ(bn,Iw(i,bn)),qG=es.frame),es.frame>=kk){kk+=As.autoSleep||120;var s=bn._first;if((!s||!s._ts)&&As.autoSleep&&es._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||es.sleep()}}},e}(hh);Ks(bi.prototype,{_lock:0,_hasPause:0,_forcing:0});var bfe=function(e,t,r,i,s,o,a){var A=new Qi(this._pt,e,t,0,1,EJ,null,s),l=0,c=0,u,f,d,h,p,m,g,v;for(A.b=r,A.e=i,r+="",i+="",(g=~i.indexOf("random("))&&(i=Mm(i)),o&&(v=[r,i],o(v,e,t),r=v[0],i=v[1]),f=r.match(JI)||[];u=JI.exec(i);)h=u[0],p=i.substring(l,u.index),d?d=(d+1)%5:p.substr(-5)==="rgba("&&(d=1),h!==f[c++]&&(m=parseFloat(f[c-1])||0,A._pt={_next:A._pt,p:p||c===1?p:",",s:m,c:h.charAt(1)==="="?kd(m,h)-m:parseFloat(h)-m,m:d&&d<4?Math.round:0},l=JI.lastIndex);return A.c=l<i.length?i.substring(l,i.length):"",A.fp=a,(XG.test(i)||g)&&(A.e=0),this._pt=A,A},bS=function(e,t,r,i,s,o,a,A,l,c){Nn(i)&&(i=i(s||0,e,o));var u=e[t],f=r!=="get"?r:Nn(u)?l?e[t.indexOf("set")||!Nn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():u,d=Nn(u)?l?Ufe:IJ:IS,h;if(Br(i)&&(~i.indexOf("random(")&&(i=Mm(i)),i.charAt(1)==="="&&(h=kd(f,i)+(Gr(f)||0),(h||h===0)&&(i=h))),!c||f!==i||zE)return!isNaN(f*i)&&i!==""?(h=new Qi(this._pt,e,t,+f||0,i-(f||0),typeof u=="boolean"?Sfe:FJ,0,d),l&&(h.fp=l),a&&h.modifier(a,this,e),this._pt=h):(!u&&!(t in e)&&yS(t,i),bfe.call(this,e,t,f,i,d,A||As.stringFilter,l))},xfe=function(e,t,r,i,s){if(Nn(e)&&(e=Zg(e,s,t,r,i)),!Ua(e)||e.style&&e.nodeType||Xr(e)||HG(e))return Br(e)?Zg(e,s,t,r,i):e;var o={},a;for(a in e)o[a]=Zg(e[a],s,t,r,i);return o},CJ=function(e,t,r,i,s,o){var a,A,l,c;if($i[e]&&(a=new $i[e]).init(s,a.rawVars?t[e]:xfe(t[e],i,s,o,r),r,i,o)!==!1&&(r._pt=A=new Qi(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==gd))for(l=r._ptLookup[r._targets.indexOf(s)],c=a._props.length;c--;)l[a._props[c]]=A;return a},bl,zE,xS=function n(e,t,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,A=i.lazy,l=i.onUpdate,c=i.onUpdateParams,u=i.callbackScope,f=i.runBackwards,d=i.yoyoEase,h=i.keyframes,p=i.autoRevert,m=e._dur,g=e._startAt,v=e._targets,y=e.parent,w=y&&y.data==="nested"?y.vars.targets:v,C=e._overwrite==="auto"&&!gS,b=e.timeline,F,I,S,T,H,X,Q,B,E,R,k,M,L;if(b&&(!h||!s)&&(s="none"),e._ease=eu(s,ch.ease),e._yEase=d?vJ(eu(d===!0?s:d,ch.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!b&&!!i.runBackwards,!b||h&&!i.stagger){if(B=v[0]?$c(v[0]).harness:0,M=B&&i[B.prop],F=xw(i,BS),g&&(g._zTime<0&&g.progress(1),t<0&&f&&a&&!p?g.render(-1,!0):g.revert(f&&m?iB:jue),g._lazy=0),o){if(Yl(e._startAt=sr.set(v,Ks({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:!g&&_i(A),startAt:null,delay:0,onUpdate:l,onUpdateParams:c,callbackScope:u,stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(zr||!a&&!p)&&e._startAt.revert(iB),a&&m&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(f&&m&&!g){if(t&&(a=!1),S=Ks({overwrite:!1,data:"isFromStart",lazy:a&&!g&&_i(A),immediateRender:a,stagger:0,parent:y},F),M&&(S[B.prop]=M),Yl(e._startAt=sr.set(v,S)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(zr?e._startAt.revert(iB):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,nn,nn);else if(!t)return}for(e._pt=e._ptCache=0,A=m&&_i(A)||A&&!m,I=0;I<v.length;I++){if(H=v[I],Q=H._gsap||CS(v)[I]._gsap,e._ptLookup[I]=R={},WE[Q.id]&&Vl.length&&bw(),k=w===v?I:w.indexOf(H),B&&(E=new B).init(H,M||F,e,k,w)!==!1&&(e._pt=T=new Qi(e._pt,H,E.name,0,1,E.render,E,0,E.priority),E._props.forEach(function(Z){R[Z]=T}),E.priority&&(X=1)),!B||M)for(S in F)$i[S]&&(E=CJ(S,F,e,k,H,w))?E.priority&&(X=1):R[S]=T=bS.call(e,H,S,"get",F[S],k,w,0,i.stringFilter);e._op&&e._op[I]&&e.kill(H,e._op[I]),C&&e._pt&&(bl=e,bn.killTweensOf(H,R,e.globalTime(t)),L=!e.parent,bl=0),e._pt&&A&&(WE[Q.id]=1)}X&&UJ(e),e._onInit&&e._onInit(e)}e._onUpdate=l,e._initted=(!e._op||e._pt)&&!L,h&&t<=0&&b.render(Vs,!0,!0)},Ife=function(e,t,r,i,s,o,a){var A=(e._pt&&e._ptCache||(e._ptCache={}))[t],l,c,u,f;if(!A)for(A=e._ptCache[t]=[],u=e._ptLookup,f=e._targets.length;f--;){if(l=u[f][t],l&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return zE=1,e.vars[t]="+=0",xS(e,a),zE=0,1;A.push(l)}for(f=A.length;f--;)c=A[f],l=c._pt||c,l.s=(i||i===0)&&!s?i:l.s+(i||0)+o*l.c,l.c=r-l.s,c.e&&(c.e=On(r)+Gr(c.e)),c.b&&(c.b=l.s+Gr(c.b))},Ffe=function(e,t){var r=e[0]?$c(e[0]).harness:0,i=r&&r.aliases,s,o,a,A;if(!i)return t;s=du({},t);for(o in i)if(o in s)for(A=i[o].split(","),a=A.length;a--;)s[A[a]]=s[o];return s},Efe=function(e,t,r,i){var s=t.ease||i||"power1.inOut",o,a;if(Xr(t))a=r[e]||(r[e]=[]),t.forEach(function(A,l){return a.push({t:l/(t.length-1)*100,v:A,e:s})});else for(o in t)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Zg=function(e,t,r,i,s){return Nn(e)?e.call(t,r,i,s):Br(e)&&~e.indexOf("random(")?Mm(e):e},bJ=wS+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",xJ={};Si(bJ+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return xJ[n]=1});var sr=function(n){ZG(e,n);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=n.call(this,o?i:Wg(i))||this;var A=a.vars,l=A.duration,c=A.delay,u=A.immediateRender,f=A.stagger,d=A.overwrite,h=A.keyframes,p=A.defaults,m=A.scrollTrigger,g=A.yoyoEase,v=i.parent||bn,y=(Xr(r)||HG(r)?_A(r[0]):"length"in i)?[r]:Ls(r),w,C,b,F,I,S,T,H;if(a._targets=y.length?CS(y):Cw("GSAP target "+r+" not found. https://greensock.com",!As.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=d,h||f||ay(l)||ay(c)){if(i=a.vars,w=a.timeline=new bi({data:"nested",defaults:p||{},targets:v&&v.data==="nested"?v.vars.targets:y}),w.kill(),w.parent=w._dp=iA(a),w._start=0,f||ay(l)||ay(c)){if(F=y.length,T=f&&cJ(f),Ua(f))for(I in f)~bJ.indexOf(I)&&(H||(H={}),H[I]=f[I]);for(C=0;C<F;C++)b=xw(i,xJ),b.stagger=0,g&&(b.yoyoEase=g),H&&du(b,H),S=y[C],b.duration=+Zg(l,iA(a),C,S,y),b.delay=(+Zg(c,iA(a),C,S,y)||0)-a._delay,!f&&F===1&&b.delay&&(a._delay=c=b.delay,a._start+=c,b.delay=0),w.to(S,b,T?T(C,S,y):0),w._ease=Mt.none;w.duration()?l=c=0:a.timeline=0}else if(h){Wg(Ks(w.vars.defaults,{ease:"none"})),w._ease=eu(h.ease||i.ease||"none");var X=0,Q,B,E;if(Xr(h))h.forEach(function(R){return w.to(y,R,">")}),w.duration();else{b={};for(I in h)I==="ease"||I==="easeEach"||Efe(I,h[I],b,h.easeEach);for(I in b)for(Q=b[I].sort(function(R,k){return R.t-k.t}),X=0,C=0;C<Q.length;C++)B=Q[C],E={ease:B.e,duration:(B.t-(C?Q[C-1].t:0))/100*l},E[I]=B.v,w.to(y,E,X),X+=E.duration;w.duration()<l&&w.to({},{duration:l-w.duration()})}}l||a.duration(l=w.duration())}else a.timeline=0;return d===!0&&!gS&&(bl=iA(a),bn.killTweensOf(y),bl=0),la(v,iA(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(u||!l&&!h&&a._start===Fr(v._time)&&_i(u)&&rfe(iA(a))&&v.data!=="nested")&&(a._tTime=-nn,a.render(Math.max(0,-c)||0)),m&&oJ(iA(a),m),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,A=this._tDur,l=this._dur,c=i<0,u=i>A-nn&&!c?A:i<nn?0:i,f,d,h,p,m,g,v,y,w;if(!l)sfe(this,i,s,o);else if(u!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(f=u,y=this.timeline,this._repeat){if(p=l+this._rDelay,this._repeat<-1&&c)return this.totalTime(p*100+i,s,o);if(f=Fr(u%p),u===A?(h=this._repeat,f=l):(h=~~(u/p),h&&h===u/p&&(f=l,h--),f>l&&(f=l)),g=this._yoyo&&h&1,g&&(w=this._yEase,f=l-f),m=uh(this._tTime,p),f===a&&!o&&this._initted)return this._tTime=u,this;h!==m&&(y&&this._yEase&&yJ(y,g),this.vars.repeatRefresh&&!g&&!this._lock&&(this._lock=o=1,this.render(Fr(p*h),!0).invalidate()._lock=0))}if(!this._initted){if(aJ(this,c?i:f,o,s,u))return this._tTime=0,this;if(a!==this._time)return this;if(l!==this._dur)return this.render(i,s,o)}if(this._tTime=u,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=v=(w||this._ease)(f/l),this._from&&(this.ratio=v=1-v),f&&!a&&!s&&(Ps(this,"onStart"),this._tTime!==u))return this;for(d=this._pt;d;)d.r(v,d.d),d=d._next;y&&y.render(i<0?i:!f&&g?-nn:y._dur*y._ease(f/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(c&&OE(this,i,s,o),Ps(this,"onUpdate")),this._repeat&&h!==m&&this.vars.onRepeat&&!s&&this.parent&&Ps(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(c&&!this._onUpdate&&OE(this,i,!0,!0),(i||!l)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&Yl(this,1),!s&&!(c&&!a)&&(u||a||g)&&(Ps(this,u===A?"onComplete":"onReverseComplete",!0),this._prom&&!(u<A&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a){Tm||es.wake(),this._ts||this.play();var A=Math.min(this._dur,(this._dp._time-this._start)*this._ts),l;return this._initted||xS(this,A),l=this._ease(A/this._dur),Ife(this,i,s,o,a,l,A)?this.resetTo(i,s,o,a):(ob(this,0),this.parent||iJ(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?vg(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,bl&&bl.vars.overwrite!==!0)._first||vg(this),this.parent&&o!==this.timeline.totalDuration()&&fh(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,A=i?Ls(i):a,l=this._ptLookup,c=this._pt,u,f,d,h,p,m,g;if((!s||s==="all")&&tfe(a,A))return s==="all"&&(this._pt=0),vg(this);for(u=this._op=this._op||[],s!=="all"&&(Br(s)&&(p={},Si(s,function(v){return p[v]=1}),s=p),s=Ffe(a,s)),g=a.length;g--;)if(~A.indexOf(a[g])){f=l[g],s==="all"?(u[g]=s,h=f,d={}):(d=u[g]=u[g]||{},h=s);for(p in h)m=f&&f[p],m&&((!("kill"in m.d)||m.d.kill(p)===!0)&&ib(this,m,"_pt"),delete f[p]),d!=="all"&&(d[p]=1)}return this._initted&&!this._pt&&c&&vg(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Og(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return Og(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return bn.killTweensOf(i,s,o)},e}(hh);Ks(sr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Si("staggerTo,staggerFrom,staggerFromTo",function(n){sr[n]=function(){var e=new bi,t=GE.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var IS=function(e,t,r){return e[t]=r},IJ=function(e,t,r){return e[t](r)},Ufe=function(e,t,r,i){return e[t](i.fp,r)},_fe=function(e,t,r){return e.setAttribute(t,r)},FS=function(e,t){return Nn(e[t])?IJ:mS(e[t])&&e.setAttribute?_fe:IS},FJ=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Sfe=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},EJ=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},ES=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},Qfe=function(e,t,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},Rfe=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?ib(this,t,"_pt"):t.dep||(r=1),t=i;return!r},Mfe=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},UJ=function(e){for(var t=e._pt,r,i,s,o;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},Qi=function(){function n(t,r,i,s,o,a,A,l,c){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||FJ,this.d=A||this,this.set=l||IS,this.pr=c||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=Mfe,this.m=r,this.mt=s,this.tween=i},n}();Si(wS+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return BS[n]=1});us.TweenMax=us.TweenLite=sr;us.TimelineLite=us.TimelineMax=bi;bn=new bi({sortChildren:!1,defaults:ch,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});As.stringFilter=mJ;var ph=[],oB={},Tfe=[],Ok=0,KI=function(e){return(oB[e]||Tfe).map(function(t){return t()})},XE=function(){var e=Date.now(),t=[];e-Ok>2&&(KI("matchMediaInit"),ph.forEach(function(r){var i=r.queries,s=r.conditions,o,a,A,l;for(a in i)o=_s.matchMedia(i[a]).matches,o&&(A=1),o!==s[a]&&(s[a]=o,l=1);l&&(r.revert(),A&&t.push(r))}),KI("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r)}),Ok=e,KI("matchMedia"))},_J=function(){function n(t,r){this.selector=r&&JE(r),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){Nn(r)&&(s=i,i=r,r=Nn);var o=this,a=function(){var l=Kn,c=o.selector,u;return l&&l!==o&&l.data.push(o),s&&(o.selector=JE(s)),Kn=o,u=i.apply(o,arguments),Nn(u)&&o._r.push(u),Kn=l,o.selector=c,o.isReverted=!1,u};return o.last=a,r===Nn?a(o):r?o[r]=a:a},e.ignore=function(r){var i=Kn;Kn=null,r(this),Kn=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof sr&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r){var o=this.getTweens();this.data.forEach(function(A){A.data==="isFlip"&&(A.revert(),A.getChildren(!0,!0,!1).forEach(function(l){return o.splice(o.indexOf(l),1)}))}),o.map(function(A){return{g:A.globalTime(0),t:A}}).sort(function(A,l){return l.g-A.g||-1}).forEach(function(A){return A.t.revert(r)}),this.data.forEach(function(A){return!(A instanceof hh)&&A.revert&&A.revert(r)}),this._r.forEach(function(A){return A(r,s)}),this.isReverted=!0}else this.data.forEach(function(A){return A.kill&&A.kill()});if(this.clear(),i){var a=ph.indexOf(this);~a&&ph.splice(a,1)}},e.revert=function(r){this.kill(r||{})},n}(),Nfe=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(r,i,s){Ua(r)||(r={matches:r});var o=new _J(0,s||this.scope),a=o.conditions={},A,l,c;this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(l in r)l==="all"?c=1:(A=_s.matchMedia(r[l]),A&&(ph.indexOf(o)<0&&ph.push(o),(a[l]=A.matches)&&(c=1),A.addListener?A.addListener(XE):A.addEventListener("change",XE)));return c&&i(o),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),Fw={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return gfe(i)})},timeline:function(e){return new bi(e)},getTweensOf:function(e,t){return bn.getTweensOf(e,t)},getProperty:function(e,t,r,i){Br(e)&&(e=Ls(e)[0]);var s=$c(e||{}).get,o=r?rJ:nJ;return r==="native"&&(r=""),e&&(t?o(($i[t]&&$i[t].get||s)(e,t,r,i)):function(a,A,l){return o(($i[a]&&$i[a].get||s)(e,a,A,l))})},quickSetter:function(e,t,r){if(e=Ls(e),e.length>1){var i=e.map(function(c){return fs.quickSetter(c,t,r)}),s=i.length;return function(c){for(var u=s;u--;)i[u](c)}}e=e[0]||{};var o=$i[t],a=$c(e),A=a.harness&&(a.harness.aliases||{})[t]||t,l=o?function(c){var u=new o;gd._pt=0,u.init(e,r?c+r:c,gd,0,[e]),u.render(1,u),gd._pt&&ES(1,gd)}:a.set(e,A);return o?l:function(c){return l(e,A,r?c+r:c,a,1)}},quickTo:function(e,t,r){var i,s=fs.to(e,du((i={},i[t]="+=0.1",i.paused=!0,i),r||{})),o=function(A,l,c){return s.resetTo(t,A,l,c)};return o.tween=s,o},isTweening:function(e){return bn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=eu(e.ease,ch.ease)),Dk(ch,e||{})},config:function(e){return Dk(As,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!$i[a]&&!us[a]&&Cw(t+" effect requires "+a+" plugin.")}),HI[t]=function(a,A,l){return r(Ls(a),Ks(A||{},s),l)},o&&(bi.prototype[t]=function(a,A,l){return this.add(HI[t](a,Ua(A)?A:(l=A)&&{},this),l)})},registerEase:function(e,t){Mt[e]=eu(t)},parseEase:function(e,t){return arguments.length?eu(e,t):Mt},getById:function(e){return bn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new bi(e),i,s;for(r.smoothChildTiming=_i(e.smoothChildTiming),bn.remove(r),r._dp=0,r._time=r._tTime=bn._time,i=bn._first;i;)s=i._next,(t||!(!i._dur&&i instanceof sr&&i.vars.onComplete===i._targets[0]))&&la(r,i,i._start-i._delay),i=s;return la(bn,r,0),r},context:function(e,t){return e?new _J(e,t):Kn},matchMedia:function(e){return new Nfe(e)},matchMediaRefresh:function(){return ph.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||XE()},addEventListener:function(e,t){var r=oB[e]||(oB[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=oB[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:dfe,wrapYoyo:hfe,distribute:cJ,random:fJ,snap:uJ,normalize:ffe,getUnit:Gr,clamp:Afe,splitColor:pJ,toArray:Ls,selector:JE,mapRange:hJ,pipe:cfe,unitize:ufe,interpolate:pfe,shuffle:lJ},install:jG,effects:HI,ticker:es,updateRoot:bi.updateRoot,plugins:$i,globalTimeline:bn,core:{PropTween:Qi,globals:$G,Tween:sr,Timeline:bi,Animation:hh,getCache:$c,_removeLinkedListItem:ib,reverting:function(){return zr},context:function(e){return e&&Kn&&(Kn.data.push(e),e._ctx=Kn),Kn},suppressOverwrites:function(e){return gS=e}}};Si("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Fw[n]=sr[n]});es.add(bi.updateRoot);gd=Fw.to({},{duration:0});var kfe=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},Dfe=function(e,t){var r=e._targets,i,s,o;for(i in t)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=kfe(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))},jI=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var A,l;if(Br(s)&&(A={},Si(s,function(c){return A[c]=1}),s=A),t){A={};for(l in s)A[l]=t(s[l]);s=A}Dfe(a,s)}}}},fs=Fw.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,A;this.tween=r;for(o in t)A=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(A||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=A,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)zr?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},jI("roundProps",HE),jI("modifiers"),jI("snap",uJ))||Fw;sr.version=bi.version=fs.version="3.11.4";KG=1;JG()&&dh();Mt.Power0;Mt.Power1;Mt.Power2;Mt.Power3;Mt.Power4;Mt.Linear;Mt.Quad;Mt.Cubic;Mt.Quart;Mt.Quint;Mt.Strong;Mt.Elastic;Mt.Back;Mt.SteppedEase;Mt.Bounce;Mt.Sine;Mt.Expo;Mt.Circ;/*!
 * CSSPlugin 3.11.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Zk,xl,Dd,US,Gc,Gk,_S,Vfe=function(){return typeof window<"u"},SA={},_c=180/Math.PI,Vd=Math.PI/180,pf=Math.atan2,Jk=1e8,SS=/([A-Z])/g,Lfe=/(left|right|width|margin|padding|x)/i,Pfe=/[\s,\(]\S/,pA={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},YE=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Wfe=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Ofe=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Zfe=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},SJ=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},QJ=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Gfe=function(e,t,r){return e.style[t]=r},Jfe=function(e,t,r){return e.style.setProperty(t,r)},Hfe=function(e,t,r){return e._gsap[t]=r},zfe=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},Xfe=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},Yfe=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},xn="transform",No=xn+"Origin",Kfe=function(e,t){var r=this,i=this.target,s=i.style;if(e in SA){if(this.tfm=this.tfm||{},e!=="transform"&&(e=pA[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return r.tfm[o]=lA(i,o)}):this.tfm[e]=i._gsap.x?i._gsap[e]:lA(i,e)),this.props.indexOf(xn)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(No,t,"")),e=xn}(s||t)&&this.props.push(e,t,s[e])},RJ=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},jfe=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].replace(SS,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=_S(),s&&!s.isStart&&!r[xn]&&(RJ(r),i.uncache=1)}},MJ=function(e,t){var r={target:e,props:[],revert:jfe,save:Kfe};return t&&t.split(",").forEach(function(i){return r.save(i)}),r},TJ,KE=function(e,t){var r=xl.createElementNS?xl.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):xl.createElement(e);return r.style?r:xl.createElement(e)},ya=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(SS,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,gh(t)||t,1)||""},Hk="O,Moz,ms,Ms,Webkit".split(","),gh=function(e,t,r){var i=t||Gc,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Hk[o]+e in s););return o<0?null:(o===3?"ms":o>=0?Hk[o]:"")+e},jE=function(){Vfe()&&window.document&&(Zk=window,xl=Zk.document,Dd=xl.documentElement,Gc=KE("div")||{style:{}},KE("div"),xn=gh(xn),No=xn+"Origin",Gc.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",TJ=!!gh("perspective"),_S=fs.core.reverting,US=1)},$I=function n(e){var t=KE("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if(Dd.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),Dd.removeChild(t),this.style.cssText=s,o},zk=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},NJ=function(e){var t;try{t=e.getBBox()}catch{t=$I.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===$I||(t=$I.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+zk(e,["x","cx","x1"])||0,y:+zk(e,["y","cy","y1"])||0,width:0,height:0}:t},kJ=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&NJ(e))},Nm=function(e,t){if(t){var r=e.style;t in SA&&t!==No&&(t=xn),r.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(t.replace(SS,"-$1").toLowerCase())):r.removeAttribute(t)}},Il=function(e,t,r,i,s,o){var a=new Qi(e._pt,t,r,0,1,o?QJ:SJ);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},Xk={deg:1,rad:1,turn:1},$fe={grid:1,flex:1},Kl=function n(e,t,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=Gc.style,A=Lfe.test(t),l=e.tagName.toLowerCase()==="svg",c=(l?"client":"offset")+(A?"Width":"Height"),u=100,f=i==="px",d=i==="%",h,p,m,g;return i===o||!s||Xk[i]||Xk[o]?s:(o!=="px"&&!f&&(s=n(e,t,r,"px")),g=e.getCTM&&kJ(e),(d||o==="%")&&(SA[t]||~t.indexOf("adius"))?(h=g?e.getBBox()[A?"width":"height"]:e[c],On(d?s/h*u:s/100*h)):(a[A?"width":"height"]=u+(f?o:i),p=~t.indexOf("adius")||i==="em"&&e.appendChild&&!l?e:e.parentNode,g&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===xl||!p.appendChild)&&(p=xl.body),m=p._gsap,m&&d&&m.width&&A&&m.time===es.time&&!m.uncache?On(s/m.width*u):((d||o==="%")&&!$fe[ya(p,"display")]&&(a.position=ya(e,"position")),p===e&&(a.position="static"),p.appendChild(Gc),h=Gc[c],p.removeChild(Gc),a.position="absolute",A&&d&&(m=$c(p),m.time=es.time,m.width=p[c]),On(f?h*s/u:h&&s?u/h*s:0))))},lA=function(e,t,r,i){var s;return US||jE(),t in pA&&t!=="transform"&&(t=pA[t],~t.indexOf(",")&&(t=t.split(",")[0])),SA[t]&&t!=="transform"?(s=Dm(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:Uw(ya(e,No))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=Ew[t]&&Ew[t](e,t,r)||ya(e,t)||eJ(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?Kl(e,t,s,r)+r:s},qfe=function(e,t,r,i){if(!r||r==="none"){var s=gh(t,e,1),o=s&&ya(e,s,1);o&&o!==r?(t=s,r=o):t==="borderColor"&&(r=ya(e,"borderTopColor"))}var a=new Qi(this._pt,e.style,t,0,1,EJ),A=0,l=0,c,u,f,d,h,p,m,g,v,y,w,C;if(a.b=r,a.e=i,r+="",i+="",i==="auto"&&(e.style[t]=i,i=ya(e,t)||i,e.style[t]=r),c=[r,i],mJ(c),r=c[0],i=c[1],f=r.match(pd)||[],C=i.match(pd)||[],C.length){for(;u=pd.exec(i);)m=u[0],v=i.substring(A,u.index),h?h=(h+1)%5:(v.substr(-5)==="rgba("||v.substr(-5)==="hsla(")&&(h=1),m!==(p=f[l++]||"")&&(d=parseFloat(p)||0,w=p.substr((d+"").length),m.charAt(1)==="="&&(m=kd(d,m)+w),g=parseFloat(m),y=m.substr((g+"").length),A=pd.lastIndex-y.length,y||(y=y||As.units[t]||w,A===i.length&&(i+=y,a.e+=y)),w!==y&&(d=Kl(e,t,p,y)||0),a._pt={_next:a._pt,p:v||l===1?v:",",s:d,c:g-d,m:h&&h<4||t==="zIndex"?Math.round:0});a.c=A<i.length?i.substring(A,i.length):""}else a.r=t==="display"&&i==="none"?QJ:SJ;return XG.test(i)&&(a.e=0),this._pt=a,a},Yk={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},ede=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=Yk[r]||r,t[1]=Yk[i]||i,t.join(" ")},tde=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,o=r._gsap,a,A,l;if(s==="all"||s===!0)i.cssText="",A=1;else for(s=s.split(","),l=s.length;--l>-1;)a=s[l],SA[a]&&(A=1,a=a==="transformOrigin"?No:xn),Nm(r,a);A&&(Nm(r,xn),o&&(o.svg&&r.removeAttribute("transform"),Dm(r,1),o.uncache=1,RJ(i)))}},Ew={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new Qi(e._pt,t,r,0,0,tde);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},km=[1,0,0,1,0,0],DJ={},VJ=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Kk=function(e){var t=ya(e,xn);return VJ(t)?km:t.substr(7).match(zG).map(On)},QS=function(e,t){var r=e._gsap||$c(e),i=e.style,s=Kk(e),o,a,A,l;return r.svg&&e.getAttribute("transform")?(A=e.transform.baseVal.consolidate().matrix,s=[A.a,A.b,A.c,A.d,A.e,A.f],s.join(",")==="1,0,0,1,0,0"?km:s):(s===km&&!e.offsetParent&&e!==Dd&&!r.svg&&(A=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(l=1,a=e.nextElementSibling,Dd.appendChild(e)),s=Kk(e),A?i.display=A:Nm(e,"display"),l&&(a?o.insertBefore(e,a):o?o.appendChild(e):Dd.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},$E=function(e,t,r,i,s,o){var a=e._gsap,A=s||QS(e,!0),l=a.xOrigin||0,c=a.yOrigin||0,u=a.xOffset||0,f=a.yOffset||0,d=A[0],h=A[1],p=A[2],m=A[3],g=A[4],v=A[5],y=t.split(" "),w=parseFloat(y[0])||0,C=parseFloat(y[1])||0,b,F,I,S;r?A!==km&&(F=d*m-h*p)&&(I=w*(m/F)+C*(-p/F)+(p*v-m*g)/F,S=w*(-h/F)+C*(d/F)-(d*v-h*g)/F,w=I,C=S):(b=NJ(e),w=b.x+(~y[0].indexOf("%")?w/100*b.width:w),C=b.y+(~(y[1]||y[0]).indexOf("%")?C/100*b.height:C)),i||i!==!1&&a.smooth?(g=w-l,v=C-c,a.xOffset=u+(g*d+v*p)-g,a.yOffset=f+(g*h+v*m)-v):a.xOffset=a.yOffset=0,a.xOrigin=w,a.yOrigin=C,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[No]="0px 0px",o&&(Il(o,a,"xOrigin",l,w),Il(o,a,"yOrigin",c,C),Il(o,a,"xOffset",u,a.xOffset),Il(o,a,"yOffset",f,a.yOffset)),e.setAttribute("data-svg-origin",w+" "+C)},Dm=function(e,t){var r=e._gsap||new wJ(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",A=getComputedStyle(e),l=ya(e,No)||"0",c,u,f,d,h,p,m,g,v,y,w,C,b,F,I,S,T,H,X,Q,B,E,R,k,M,L,Z,P,U,G,oe,D;return c=u=f=p=m=g=v=y=w=0,d=h=1,r.svg=!!(e.getCTM&&kJ(e)),A.translate&&((A.translate!=="none"||A.scale!=="none"||A.rotate!=="none")&&(i[xn]=(A.translate!=="none"?"translate3d("+(A.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(A.rotate!=="none"?"rotate("+A.rotate+") ":"")+(A.scale!=="none"?"scale("+A.scale.split(" ").join(",")+") ":"")+(A[xn]!=="none"?A[xn]:"")),i.scale=i.rotate=i.translate="none"),F=QS(e,r.svg),r.svg&&(r.uncache?(M=e.getBBox(),l=r.xOrigin-M.x+"px "+(r.yOrigin-M.y)+"px",k=""):k=!t&&e.getAttribute("data-svg-origin"),$E(e,k||l,!!k||r.originIsAbsolute,r.smooth!==!1,F)),C=r.xOrigin||0,b=r.yOrigin||0,F!==km&&(H=F[0],X=F[1],Q=F[2],B=F[3],c=E=F[4],u=R=F[5],F.length===6?(d=Math.sqrt(H*H+X*X),h=Math.sqrt(B*B+Q*Q),p=H||X?pf(X,H)*_c:0,v=Q||B?pf(Q,B)*_c+p:0,v&&(h*=Math.abs(Math.cos(v*Vd))),r.svg&&(c-=C-(C*H+b*Q),u-=b-(C*X+b*B))):(D=F[6],G=F[7],Z=F[8],P=F[9],U=F[10],oe=F[11],c=F[12],u=F[13],f=F[14],I=pf(D,U),m=I*_c,I&&(S=Math.cos(-I),T=Math.sin(-I),k=E*S+Z*T,M=R*S+P*T,L=D*S+U*T,Z=E*-T+Z*S,P=R*-T+P*S,U=D*-T+U*S,oe=G*-T+oe*S,E=k,R=M,D=L),I=pf(-Q,U),g=I*_c,I&&(S=Math.cos(-I),T=Math.sin(-I),k=H*S-Z*T,M=X*S-P*T,L=Q*S-U*T,oe=B*T+oe*S,H=k,X=M,Q=L),I=pf(X,H),p=I*_c,I&&(S=Math.cos(I),T=Math.sin(I),k=H*S+X*T,M=E*S+R*T,X=X*S-H*T,R=R*S-E*T,H=k,E=M),m&&Math.abs(m)+Math.abs(p)>359.9&&(m=p=0,g=180-g),d=On(Math.sqrt(H*H+X*X+Q*Q)),h=On(Math.sqrt(R*R+D*D)),I=pf(E,R),v=Math.abs(I)>2e-4?I*_c:0,w=oe?1/(oe<0?-oe:oe):0),r.svg&&(k=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!VJ(ya(e,xn)),k&&e.setAttribute("transform",k))),Math.abs(v)>90&&Math.abs(v)<270&&(s?(d*=-1,v+=p<=0?180:-180,p+=p<=0?180:-180):(h*=-1,v+=v<=0?180:-180)),t=t||r.uncache,r.x=c-((r.xPercent=c&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=u-((r.yPercent=u&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-u)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=f+o,r.scaleX=On(d),r.scaleY=On(h),r.rotation=On(p)+a,r.rotationX=On(m)+a,r.rotationY=On(g)+a,r.skewX=v+a,r.skewY=y+a,r.transformPerspective=w+o,(r.zOrigin=parseFloat(l.split(" ")[2])||0)&&(i[No]=Uw(l)),r.xOffset=r.yOffset=0,r.force3D=As.force3D,r.renderTransform=r.svg?rde:TJ?LJ:nde,r.uncache=0,r},Uw=function(e){return(e=e.split(" "))[0]+" "+e[1]},qI=function(e,t,r){var i=Gr(t);return On(parseFloat(t)+parseFloat(Kl(e,"x",r+"px",i)))+i},nde=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,LJ(e,t)},wc="0deg",Wp="0px",Cc=") ",LJ=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,A=r.z,l=r.rotation,c=r.rotationY,u=r.rotationX,f=r.skewX,d=r.skewY,h=r.scaleX,p=r.scaleY,m=r.transformPerspective,g=r.force3D,v=r.target,y=r.zOrigin,w="",C=g==="auto"&&e&&e!==1||g===!0;if(y&&(u!==wc||c!==wc)){var b=parseFloat(c)*Vd,F=Math.sin(b),I=Math.cos(b),S;b=parseFloat(u)*Vd,S=Math.cos(b),o=qI(v,o,F*S*-y),a=qI(v,a,-Math.sin(b)*-y),A=qI(v,A,I*S*-y+y)}m!==Wp&&(w+="perspective("+m+Cc),(i||s)&&(w+="translate("+i+"%, "+s+"%) "),(C||o!==Wp||a!==Wp||A!==Wp)&&(w+=A!==Wp||C?"translate3d("+o+", "+a+", "+A+") ":"translate("+o+", "+a+Cc),l!==wc&&(w+="rotate("+l+Cc),c!==wc&&(w+="rotateY("+c+Cc),u!==wc&&(w+="rotateX("+u+Cc),(f!==wc||d!==wc)&&(w+="skew("+f+", "+d+Cc),(h!==1||p!==1)&&(w+="scale("+h+", "+p+Cc),v.style[xn]=w||"translate(0, 0)"},rde=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,A=r.rotation,l=r.skewX,c=r.skewY,u=r.scaleX,f=r.scaleY,d=r.target,h=r.xOrigin,p=r.yOrigin,m=r.xOffset,g=r.yOffset,v=r.forceCSS,y=parseFloat(o),w=parseFloat(a),C,b,F,I,S;A=parseFloat(A),l=parseFloat(l),c=parseFloat(c),c&&(c=parseFloat(c),l+=c,A+=c),A||l?(A*=Vd,l*=Vd,C=Math.cos(A)*u,b=Math.sin(A)*u,F=Math.sin(A-l)*-f,I=Math.cos(A-l)*f,l&&(c*=Vd,S=Math.tan(l-c),S=Math.sqrt(1+S*S),F*=S,I*=S,c&&(S=Math.tan(c),S=Math.sqrt(1+S*S),C*=S,b*=S)),C=On(C),b=On(b),F=On(F),I=On(I)):(C=u,I=f,b=F=0),(y&&!~(o+"").indexOf("px")||w&&!~(a+"").indexOf("px"))&&(y=Kl(d,"x",o,"px"),w=Kl(d,"y",a,"px")),(h||p||m||g)&&(y=On(y+h-(h*C+p*F)+m),w=On(w+p-(h*b+p*I)+g)),(i||s)&&(S=d.getBBox(),y=On(y+i/100*S.width),w=On(w+s/100*S.height)),S="matrix("+C+","+b+","+F+","+I+","+y+","+w+")",d.setAttribute("transform",S),v&&(d.style[xn]=S)},ide=function(e,t,r,i,s){var o=360,a=Br(s),A=parseFloat(s)*(a&&~s.indexOf("rad")?_c:1),l=A-i,c=i+l+"deg",u,f;return a&&(u=s.split("_")[1],u==="short"&&(l%=o,l!==l%(o/2)&&(l+=l<0?o:-o)),u==="cw"&&l<0?l=(l+o*Jk)%o-~~(l/o)*o:u==="ccw"&&l>0&&(l=(l-o*Jk)%o-~~(l/o)*o)),e._pt=f=new Qi(e._pt,t,r,i,l,Wfe),f.e=c,f.u="deg",e._props.push(r),f},jk=function(e,t){for(var r in t)e[r]=t[r];return e},sde=function(e,t,r){var i=jk({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,A,l,c,u,f,d,h;i.svg?(l=r.getAttribute("transform"),r.setAttribute("transform",""),o[xn]=t,a=Dm(r,1),Nm(r,xn),r.setAttribute("transform",l)):(l=getComputedStyle(r)[xn],o[xn]=t,a=Dm(r,1),o[xn]=l);for(A in SA)l=i[A],c=a[A],l!==c&&s.indexOf(A)<0&&(d=Gr(l),h=Gr(c),u=d!==h?Kl(r,A,l,h):parseFloat(l),f=parseFloat(c),e._pt=new Qi(e._pt,a,A,u,f-u,YE),e._pt.u=h||0,e._props.push(A));jk(a,i)};Si("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});Ew[e>1?"border"+n:n]=function(a,A,l,c,u){var f,d;if(arguments.length<4)return f=o.map(function(h){return lA(a,h,l)}),d=f.join(" "),d.split(f[0]).length===5?f[0]:d;f=(c+"").split(" "),d={},o.forEach(function(h,p){return d[h]=f[p]=f[p]||f[(p-1)/2|0]}),a.init(A,d,u)}});var PJ={name:"css",register:jE,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var o=this._props,a=e.style,A=r.vars.startAt,l,c,u,f,d,h,p,m,g,v,y,w,C,b,F,I;US||jE(),this.styles=this.styles||MJ(e),I=this.styles.props,this.tween=r;for(p in t)if(p!=="autoRound"&&(c=t[p],!($i[p]&&CJ(p,t,r,i,e,s)))){if(d=typeof c,h=Ew[p],d==="function"&&(c=c.call(r,i,e,s),d=typeof c),d==="string"&&~c.indexOf("random(")&&(c=Mm(c)),h)h(this,e,p,c,r)&&(F=1);else if(p.substr(0,2)==="--")l=(getComputedStyle(e).getPropertyValue(p)+"").trim(),c+="",Ll.lastIndex=0,Ll.test(l)||(m=Gr(l),g=Gr(c)),g?m!==g&&(l=Kl(e,p,l,g)+g):m&&(c+=m),this.add(a,"setProperty",l,c,i,s,0,0,p),o.push(p),I.push(p,0,a[p]);else if(d!=="undefined"){if(A&&p in A?(l=typeof A[p]=="function"?A[p].call(r,i,e,s):A[p],Br(l)&&~l.indexOf("random(")&&(l=Mm(l)),Gr(l+"")||(l+=As.units[p]||Gr(lA(e,p))||""),(l+"").charAt(1)==="="&&(l=lA(e,p))):l=lA(e,p),f=parseFloat(l),v=d==="string"&&c.charAt(1)==="="&&c.substr(0,2),v&&(c=c.substr(2)),u=parseFloat(c),p in pA&&(p==="autoAlpha"&&(f===1&&lA(e,"visibility")==="hidden"&&u&&(f=0),I.push("visibility",0,a.visibility),Il(this,a,"visibility",f?"inherit":"hidden",u?"inherit":"hidden",!u)),p!=="scale"&&p!=="transform"&&(p=pA[p],~p.indexOf(",")&&(p=p.split(",")[0]))),y=p in SA,y){if(this.styles.save(p),w||(C=e._gsap,C.renderTransform&&!t.parseTransform||Dm(e,t.parseTransform),b=t.smoothOrigin!==!1&&C.smooth,w=this._pt=new Qi(this._pt,a,xn,0,1,C.renderTransform,C,0,-1),w.dep=1),p==="scale")this._pt=new Qi(this._pt,C,"scaleY",C.scaleY,(v?kd(C.scaleY,v+u):u)-C.scaleY||0,YE),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){I.push(No,0,a[No]),c=ede(c),C.svg?$E(e,c,0,b,0,this):(g=parseFloat(c.split(" ")[2])||0,g!==C.zOrigin&&Il(this,C,"zOrigin",C.zOrigin,g),Il(this,a,p,Uw(l),Uw(c)));continue}else if(p==="svgOrigin"){$E(e,c,1,b,0,this);continue}else if(p in DJ){ide(this,C,p,f,v?kd(f,v+c):c);continue}else if(p==="smoothOrigin"){Il(this,C,"smooth",C.smooth,c);continue}else if(p==="force3D"){C[p]=c;continue}else if(p==="transform"){sde(this,c,e);continue}}else p in a||(p=gh(p)||p);if(y||(u||u===0)&&(f||f===0)&&!Pfe.test(c)&&p in a)m=(l+"").substr((f+"").length),u||(u=0),g=Gr(c)||(p in As.units?As.units[p]:m),m!==g&&(f=Kl(e,p,l,g)),this._pt=new Qi(this._pt,y?C:a,p,f,(v?kd(f,v+u):u)-f,!y&&(g==="px"||p==="zIndex")&&t.autoRound!==!1?Zfe:YE),this._pt.u=g||0,m!==g&&g!=="%"&&(this._pt.b=l,this._pt.r=Ofe);else if(p in a)qfe.call(this,e,p,l,v?v+c:c);else if(p in e)this.add(e,p,l||e[p],v?v+c:c,i,s);else if(p!=="parseTransform"){yS(p,c);continue}y||(p in a?I.push(p,0,a[p]):I.push(p,1,l||e[p])),o.push(p)}}F&&UJ(this)},render:function(e,t){if(t.tween._time||!_S())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:lA,aliases:pA,getSetter:function(e,t,r){var i=pA[t];return i&&i.indexOf(",")<0&&(t=i),t in SA&&t!==No&&(e._gsap.x||lA(e,"x"))?r&&Gk===r?t==="scale"?zfe:Hfe:(Gk=r||{})&&(t==="scale"?Xfe:Yfe):e.style&&!mS(e.style[t])?Gfe:~t.indexOf("-")?Jfe:FS(e,t)},core:{_removeProperty:Nm,_getMatrix:QS}};fs.utils.checkPrefix=gh;fs.core.getStyleSaver=MJ;(function(n,e,t,r){var i=Si(n+","+e+","+t,function(s){SA[s]=1});Si(e,function(s){As.units[s]="deg",DJ[s]=1}),pA[i[13]]=n+","+e,Si(r,function(s){var o=s.split(":");pA[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Si("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){As.units[n]="px"});fs.registerPlugin(PJ);var qE=fs.registerPlugin(PJ)||fs;qE.core.Tween;function Ph(){localStorage&&Object.keys(localStorage).map(n=>{this.setItem(n,localStorage[n],!1)}),Object.defineProperty(this,"length",{get:function(){return Object.keys(this).length},enumerable:!1})}Ph.prototype.key=function(n){return Object.keys(this)[n]};Ph.prototype.getItem=function(n){try{return JSON.parse(this[n])}catch{}return this[n]};Ph.prototype.setItem=function(n,e,t=!0){const r=typeof e=="string"?e:JSON.stringify(e);return t&&localStorage.setItem(n,r),this[n]=r};Ph.prototype.removeItem=function(n){delete this[n]};Ph.prototype.clear=function(){Object.keys(this).forEach(n=>delete this[n])};let ode=new Ph;const ade=n=>({get(e,t){return n.getItem(String(t))},set(e,t,r){return n.setItem(String(t),r),!0}}),Ade=(n=ode)=>new Proxy({},ade(n)),ct=Ade(),ki=pe.createContext(),lde=n=>{const[e,t]=pe.useState(null),r=()=>{const _=new nw,x=new cZ(16777215,.5);_.add(x);const N=new eS(16777215,.5);N.position.set(0,1,1),_.add(N);const j=new Er;return j.renderOrder=1e4,_.add(j),t(j),_},[i,s]=pe.useState(r),[o,a]=pe.useState(null),[A,l]=pe.useState([]),[c,u]=pe.useState(null),[f,d]=Y.useState(null),[h,p]=pe.useState(new kt),[m,g]=pe.useState(null),[v,y]=pe.useState(null),[w,C]=pe.useState([]),[b,F]=pe.useState(!1),[I,S]=pe.useState(!1),[T,H]=pe.useState(""),[X,Q]=pe.useState(new Ne(1,1,1)),[B,E]=pe.useState(null),[R,k]=pe.useState(null),[M,L]=pe.useState(null),[Z,P]=pe.useState(null),[U,G]=pe.useState({x:0,y:0}),[oe,D]=pe.useState(),[K,ce]=pe.useState(null),[le,he]=pe.useState(null),[$,ae]=pe.useState(null),[te,Ae]=pe.useState(!1),[re,me]=pe.useState(!1),Pe=_=>{E(_)},_e=_=>{_==null&&(_=!re),me(_),i.traverse(x=>{x.isMesh&&x.setDebugMode&&x.setDebugMode(_)})},Se=_=>{const x=Zue(_,K);x!=null&&(Be(),C(x))},Fe=_=>{const x=ct[`${oe.id}12223_${_}`];console.log(x),x?Se(x):console.log("no local storage for "+_+" was found")},Ue=()=>K[le],Me=_=>{const x=W();ct[`${oe.id}12223_${_}`]=x},W=()=>{const _={};return oe.traits.forEach(x=>{var j,q,ne;const N=x.trait;_[N]={traitInfo:(j=B[N])==null?void 0:j.traitInfo,textureInfo:(q=B[N])==null?void 0:q.textureInfo,colorInfo:(ne=B[N])==null?void 0:ne.colorInfo}}),_.class=oe.id,_},O=_=>{const x=se(le)||[];_.map(N=>{let j=!0;for(let q=0;q<x.length;q++)if(x[q].trait.trait===N.trait.trait){x[q]=N,j=!1;break}j===!0&&x.push(N)}),ct[le]=x},se=_=>ct[_],de=()=>{C(WG(oe))},Be=()=>{if(B)for(const _ in B)B[_].vrm&&Qm(B[_].vrm);Pe({})},V=_=>{M&&(qE.to(M.target,{x:_.targetX??0,y:_.targetY??0,z:_.targetZ??0,duration:1}),qE.fromTo(M,{maxDistance:M.getDistance(),minDistance:M.getDistance(),minPolarAngle:M.getPolarAngle(),maxPolarAngle:M.getPolarAngle(),minAzimuthAngle:M.getAzimuthalAngle(),maxAzimuthAngle:M.getAzimuthalAngle()},{maxDistance:_.distance,minDistance:_.distance,minPolarAngle:Math.PI/2-.11,maxPolarAngle:Math.PI/2-.11,minAzimuthAngle:-.78,maxAzimuthAngle:-.78,duration:1}).then(()=>{M.minPolarAngle=0,M.maxPolarAngle=3.1415,M.minDistance=.5,M.maxDistance=5,M.minAzimuthAngle=1/0,M.maxAzimuthAngle=1/0}))};return J.jsx(ki.Provider,{value:{vrmHelperRoot:e,currentVRM:f,setCurrentVRM:d,awaitDisplay:I,setAwaitDisplay:S,templateInfo:oe,setTemplateInfo:D,blinkManager:R,setBlinkManager:k,manifest:K,setManifest:ce,manifestSelectionIndex:le,setManifestSelectionIndex:he,getSelectedCharacterBaseData:Ue,sceneModel:$,setSceneModel:ae,lipSync:Z,setLipSync:P,scene:i,setScene:s,currentTraitName:o,setCurrentTraitName:a,displayTraitOption:c,setDisplayTraitOption:u,currentOptions:A,getSaveAvatar:W,saveAvatarToLocalStorage:Me,loadAvatarFromLocalStorage:Fe,debugMode:re,toggleDebugMNode:_e,setCurrentOptions:l,setSelectedOptions:C,getRandomCharacter:de,saveUserSelection:O,loadUserSelection:se,selectedOptions:w,setRemoveOption:F,removeOption:b,model:h,setModel:p,animationManager:m,setAnimationManager:g,camera:v,setCamera:y,colorStatus:T,setColorStatus:H,skinColor:X,setSkinColor:Q,avatar:B,setAvatar:Pe,resetAvatar:Be,moveCamera:V,controls:M,setControls:L,initializeScene:r,mousePosition:U,setMousePosition:G,isChangingWholeAvatar:te,setIsChangingWholeAvatar:Ae},children:n.children})},WJ={NORMAL:"NORMAL",AR:"AR",AR_FRONT:"AR_FRONT",VR:"VR"},St={LANDING:"LANDING",CREATE:"CREATE",LOAD:"LOAD",APPEARANCE:"APPEARANCE",BIO:"BIO",SAVE:"SAVE",MINT:"MINT",CHAT:"CHAT",OPTIMIZER:"OPTIMIZER"},ro=Y.createContext(),cde=n=>{const[e,t]=Y.useState(WJ.NORMAL),[r,i]=Y.useState(St.LANDING),[s,o]=Y.useState(!1),[a,A]=Y.useState(!1);return J.jsx(ro.Provider,{value:{viewMode:r,setViewMode:i,isLoading:s,setIsLoading:o,mouseIsOverUI:a,setMouseIsOverUI:A,currentCameraMode:e,setCurrentCameraMode:t},children:n.children})},ude="modulepreload",fde=function(n){return"/"+n},$k={},dde=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=fde(s),s in $k)return;$k[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const u=i[c];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":ude,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((c,u)=>{l.addEventListener("load",c),l.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};function _w(){return _w=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_w.apply(this,arguments)}function hde(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function pde(n){pe.useEffect(n,[])}function gde(n,e){e===void 0&&(e={});var t=e,r=t.volume,i=r===void 0?1:r,s=t.playbackRate,o=s===void 0?1:s,a=t.soundEnabled,A=a===void 0?!0:a,l=t.interrupt,c=l===void 0?!1:l,u=t.onload,f=hde(t,["id","volume","playbackRate","soundEnabled","interrupt","onload"]),d=Y.useRef(null),h=Y.useRef(!1),p=Y.useState(null),m=p[0],g=p[1],v=Y.useState(null),y=v[0],w=v[1],C=function(){typeof u=="function"&&u.call(this),h.current&&g(this.duration()*1e3),w(this)};pde(function(){return dde(()=>import("./howler-d73b3a41.js").then(T=>T.h),[]).then(function(T){if(!h.current){var H;d.current=(H=T.Howl)!==null&&H!==void 0?H:T.default.Howl,h.current=!0,new d.current(_w({src:Array.isArray(n)?n:[n],volume:i,rate:o,onload:C},f))}}),function(){h.current=!1}}),Y.useEffect(function(){d.current&&y&&w(new d.current(_w({src:Array.isArray(n)?n:[n],volume:i,onload:C},f)))},[JSON.stringify(n)]),Y.useEffect(function(){y&&(y.volume(i),y.rate(o))},[i,o]);var b=Y.useCallback(function(T){typeof T>"u"&&(T={}),!(!y||!A&&!T.forceSoundEnabled)&&(c&&y.stop(),T.playbackRate&&y.rate(T.playbackRate),y.play(T.id))},[y,A,c]),F=Y.useCallback(function(T){y&&y.stop(T)},[y]),I=Y.useCallback(function(T){y&&y.pause(T)},[y]),S=[b,{sound:y,stop:F,pause:I,duration:m}];return S}const mde=[{name:"background/cc_bgm.wav",offset:0,duration:123458.58333333334},{name:"background/cc_bgm_balanced.wav",offset:123458.58333333334,duration:123458.60416666666},{name:"effect/character-load.wav",offset:246917.1875,duration:3030},{name:"effect/class-select.wav",offset:249947.1875,duration:2780},{name:"effect/switchingItem.wav",offset:252727.1875,duration:623.75},{name:"ui/back-next-button.wav",offset:253350.9375,duration:155.02083333333334},{name:"ui/class-mouse-over.wav",offset:253505.95833333334,duration:217.52083333333334},{name:"ui/class_click.wav",offset:253723.4791666667,duration:3123.75},{name:"ui/class_pass.wav",offset:256847.2291666667,duration:155},{name:"ui/option_click.wav",offset:257002.2291666667,duration:155.02083333333334},{name:"ui/randomize-button.wav",offset:257157.25000000003,duration:342.5208333333333},{name:"ui/section_click.wav",offset:257499.77083333337,duration:155}],vde="/assets/sounds-3322d50e.mp3",io=pe.createContext(),yde=n=>{const e=i=>mde.find(s=>i.test(s.name)),[t]=gde(vde,{sprite:{switchItem:[e(/switchingItem/).offset,e(/switchingItem/).duration],classSelect:[e(/class-select/).offset,e(/class-select/).duration],characterLoad:[e(/character-load/).offset,e(/character-load/).duration],randomizeButton:[e(/randomize-button/).offset,e(/randomize-button/).duration],classMouseOver:[e(/class-mouse-over/).offset,e(/class-mouse-over/).duration],backNextButton:[e(/back-next-button/).offset,e(/back-next-button/).duration]}}),r=(i,s=0)=>{s===0?t({id:i}):setTimeout(()=>{t({id:i})},s)};return J.jsx(io.Provider,{value:{playSound:r},children:n.children})};function Zs(n){return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zs(n)}function so(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Bde(n,e){if(Zs(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Zs(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function OJ(n){var e=Bde(n,"string");return Zs(e)==="symbol"?e:String(e)}function qk(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,OJ(r.key),r)}}function oo(n,e,t){return e&&qk(n.prototype,e),t&&qk(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Pl(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function eU(n,e){return eU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},eU(n,e)}function ab(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&eU(n,e)}function f0(n,e){if(e&&(Zs(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pl(n)}function _a(n){return _a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_a(n)}function Na(n,e,t){return e=OJ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZJ(n){if(Array.isArray(n))return n}function wde(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function eD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function GJ(n,e){if(n){if(typeof n=="string")return eD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return eD(n,e)}}function JJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cde(n){return ZJ(n)||wde(n)||GJ(n)||JJ()}function tD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function nD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tD(Object(t),!0).forEach(function(r){Na(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var bde={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},xde=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};so(this,n),this.init(e,t)}return oo(n,[{key:"init",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=t||bde,this.options=r,this.debug=r.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,r,i,s){return s&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(i).concat(this.prefix," ").concat(t[0])),this.logger[r](t))}},{key:"create",value:function(t){return new n(this.logger,nD(nD({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new n(this.logger,t)}}]),n}(),fa=new xde,jl=function(){function n(){so(this,n),this.observers={}}return oo(n,[{key:"on",value:function(t,r){var i=this;return t.split(" ").forEach(function(s){i.observers[s]=i.observers[s]||[],i.observers[s].push(r)}),this}},{key:"off",value:function(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(function(i){return i!==r})}}},{key:"emit",value:function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];if(this.observers[t]){var o=[].concat(this.observers[t]);o.forEach(function(A){A.apply(void 0,i)})}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach(function(A){A.apply(A,[t].concat(i))})}}}]),n}();function Op(){var n,e,t=new Promise(function(r,i){n=r,e=i});return t.resolve=n,t.reject=e,t}function rD(n){return n==null?"":""+n}function Ide(n,e,t){n.forEach(function(r){e[r]&&(t[r]=e[r])})}function RS(n,e,t){function r(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}function i(){return!n||typeof n=="string"}for(var s=typeof e!="string"?[].concat(e):e.split(".");s.length>1;){if(i())return{};var o=r(s.shift());!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={}}return i()?{}:{obj:n,k:r(s.shift())}}function iD(n,e,t){var r=RS(n,e,Object),i=r.obj,s=r.k;i[s]=t}function Fde(n,e,t,r){var i=RS(n,e,Object),s=i.obj,o=i.k;s[o]=s[o]||[],r&&(s[o]=s[o].concat(t)),r||s[o].push(t)}function Sw(n,e){var t=RS(n,e),r=t.obj,i=t.k;if(r)return r[i]}function sD(n,e,t){var r=Sw(n,t);return r!==void 0?r:Sw(e,t)}function HJ(n,e,t){for(var r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?typeof n[r]=="string"||n[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?t&&(n[r]=e[r]):HJ(n[r],e[r],t):n[r]=e[r]);return n}function gf(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Ede={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Ude(n){return typeof n=="string"?n.replace(/[&<>"'\/]/g,function(e){return Ede[e]}):n}var Ab=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,_de=[" ",",","?","!",";"];function Sde(n,e,t){e=e||"",t=t||"";var r=_de.filter(function(a){return e.indexOf(a)<0&&t.indexOf(a)<0});if(r.length===0)return!0;var i=new RegExp("(".concat(r.map(function(a){return a==="?"?"\\?":a}).join("|"),")")),s=!i.test(n);if(!s){var o=n.indexOf(t);o>0&&!i.test(n.substring(0,o))&&(s=!0)}return s}function oD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ay(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(t),!0).forEach(function(r){Na(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Qde(n){var e=Rde();return function(){var r=_a(n),i;if(e){var s=_a(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return f0(this,i)}}function Rde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zJ(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(n){if(n[e])return n[e];for(var r=e.split(t),i=n,s=0;s<r.length;++s){if(!i||typeof i[r[s]]=="string"&&s+1<r.length)return;if(i[r[s]]===void 0){for(var o=2,a=r.slice(s,s+o).join(t),A=i[a];A===void 0&&r.length>s+o;)o++,a=r.slice(s,s+o).join(t),A=i[a];if(A===void 0)return;if(A===null)return null;if(e.endsWith(a)){if(typeof A=="string")return A;if(a&&typeof A[a]=="string")return A[a]}var l=r.slice(s+o).join(t);return l?zJ(A,l,t):void 0}i=i[r[s]]}return i}}var Mde=function(n){ab(t,n);var e=Qde(t);function t(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return so(this,t),i=e.call(this),Ab&&jl.call(Pl(i)),i.data=r||{},i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return oo(t,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var s=this.options.ns.indexOf(i);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},A=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,l=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure,c=[i,s];o&&typeof o!="string"&&(c=c.concat(o)),o&&typeof o=="string"&&(c=c.concat(A?o.split(A):o)),i.indexOf(".")>-1&&(c=i.split("."));var u=Sw(this.data,c);return u||!l||typeof o!="string"?u:zJ(this.data&&this.data[i]&&this.data[i][s],o,A)}},{key:"addResource",value:function(i,s,o,a){var A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},l=this.options.keySeparator;l===void 0&&(l=".");var c=[i,s];o&&(c=c.concat(l?o.split(l):o)),i.indexOf(".")>-1&&(c=i.split("."),a=s,s=c[1]),this.addNamespaces(s),iD(this.data,c,a),A.silent||this.emit("added",i,s,o,a)}},{key:"addResources",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var A in o)(typeof o[A]=="string"||Object.prototype.toString.apply(o[A])==="[object Array]")&&this.addResource(i,s,A,o[A],{silent:!0});a.silent||this.emit("added",i,s,o)}},{key:"addResourceBundle",value:function(i,s,o,a,A){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},c=[i,s];i.indexOf(".")>-1&&(c=i.split("."),a=o,o=s,s=c[1]),this.addNamespaces(s);var u=Sw(this.data,c)||{};a?HJ(u,o,A):u=Ay(Ay({},u),o),iD(this.data,c,u),l.silent||this.emit("added",i,s,o)}},{key:"removeResourceBundle",value:function(i,s){this.hasResourceBundle(i,s)&&delete this.data[i][s],this.removeNamespaces(s),this.emit("removed",i,s)}},{key:"hasResourceBundle",value:function(i,s){return this.getResource(i,s)!==void 0}},{key:"getResourceBundle",value:function(i,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Ay(Ay({},{}),this.getResource(i,s)):this.getResource(i,s)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var s=this.getDataByLanguage(i),o=s&&Object.keys(s)||[];return!!o.find(function(a){return s[a]&&Object.keys(s[a]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),t}(jl),XJ={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,r,i,s){var o=this;return e.forEach(function(a){o.processors[a]&&(t=o.processors[a].process(t,r,i,s))}),t}};function aD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function qr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aD(Object(t),!0).forEach(function(r){Na(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):aD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Tde(n){var e=Nde();return function(){var r=_a(n),i;if(e){var s=_a(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return f0(this,i)}}function Nde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var AD={},lD=function(n){ab(t,n);var e=Tde(t);function t(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return so(this,t),i=e.call(this),Ab&&jl.call(Pl(i)),Ide(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r,Pl(i)),i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=fa.create("translator"),i}return oo(t,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var o=this.resolve(i,s);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(i,s){var o=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,A=s.ns||this.options.defaultNS||[],l=o&&i.indexOf(o)>-1,c=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!Sde(i,o,a);if(l&&!c){var u=i.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:i,namespaces:A};var f=i.split(o);(o!==a||o===a&&this.options.ns.indexOf(f[0])>-1)&&(A=f.shift()),i=f.join(a)}return typeof A=="string"&&(A=[A]),{key:i,namespaces:A}}},{key:"translate",value:function(i,s,o){var a=this;if(Zs(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),s||(s={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var A=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=this.extractFromKey(i[i.length-1],s),u=c.key,f=c.namespaces,d=f[f.length-1],h=s.lng||this.language,p=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h&&h.toLowerCase()==="cimode"){if(p){var m=s.nsSeparator||this.options.nsSeparator;return A?{res:"".concat(d).concat(m).concat(u),usedKey:u,exactUsedKey:u,usedLng:h,usedNS:d}:"".concat(d).concat(m).concat(u)}return A?{res:u,usedKey:u,exactUsedKey:u,usedLng:h,usedNS:d}:u}var g=this.resolve(i,s),v=g&&g.res,y=g&&g.usedKey||u,w=g&&g.exactUsedKey||u,C=Object.prototype.toString.apply(v),b=["[object Number]","[object Function]","[object RegExp]"],F=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,I=!this.i18nFormat||this.i18nFormat.handleAsObject,S=typeof v!="string"&&typeof v!="boolean"&&typeof v!="number";if(I&&v&&S&&b.indexOf(C)<0&&!(typeof F=="string"&&C==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var T=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,v,qr(qr({},s),{},{ns:f})):"key '".concat(u," (").concat(this.language,")' returned an object instead of string.");return A?(g.res=T,g):T}if(l){var H=C==="[object Array]",X=H?[]:{},Q=H?w:y;for(var B in v)if(Object.prototype.hasOwnProperty.call(v,B)){var E="".concat(Q).concat(l).concat(B);X[B]=this.translate(E,qr(qr({},s),{joinArrays:!1,ns:f})),X[B]===E&&(X[B]=v[B])}v=X}}else if(I&&typeof F=="string"&&C==="[object Array]")v=v.join(F),v&&(v=this.extendTranslation(v,i,s,o));else{var R=!1,k=!1,M=s.count!==void 0&&typeof s.count!="string",L=t.hasDefaultValue(s),Z=M?this.pluralResolver.getSuffix(h,s.count,s):"",P=s["defaultValue".concat(Z)]||s.defaultValue;!this.isValidLookup(v)&&L&&(R=!0,v=P),this.isValidLookup(v)||(k=!0,v=u);var U=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,G=U&&k?void 0:v,oe=L&&P!==v&&this.options.updateMissing;if(k||R||oe){if(this.logger.log(oe?"updateKey":"missingKey",h,d,u,oe?P:v),l){var D=this.resolve(u,qr(qr({},s),{},{keySeparator:!1}));D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var K=[],ce=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ce&&ce[0])for(var le=0;le<ce.length;le++)K.push(ce[le]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(s.lng||this.language):K.push(s.lng||this.language);var he=function(ae,te,Ae){var re=L&&Ae!==v?Ae:G;a.options.missingKeyHandler?a.options.missingKeyHandler(ae,d,te,re,oe,s):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(ae,d,te,re,oe,s),a.emit("missingKey",ae,d,te,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&M?K.forEach(function($){a.pluralResolver.getSuffixes($,s).forEach(function(ae){he([$],u+ae,s["defaultValue".concat(ae)]||P)})}):he(K,u,P))}v=this.extendTranslation(v,i,s,g,o),k&&v===u&&this.options.appendNamespaceToMissingKey&&(v="".concat(d,":").concat(u)),(k||R)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(d,":").concat(u):u,R?v:void 0):v=this.options.parseMissingKeyHandler(v))}return A?(g.res=v,g):v}},{key:"extendTranslation",value:function(i,s,o,a,A){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,qr(qr({},this.options.interpolation.defaultVariables),o),a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(qr(qr({},o),{interpolation:qr(qr({},this.options.interpolation),o.interpolation)}));var c=typeof i=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),u;if(c){var f=i.match(this.interpolator.nestingRegexp);u=f&&f.length}var d=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(d=qr(qr({},this.options.interpolation.defaultVariables),d)),i=this.interpolator.interpolate(i,d,o.lng||this.language,o),c){var h=i.match(this.interpolator.nestingRegexp),p=h&&h.length;u<p&&(o.nest=!1)}o.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var v=arguments.length,y=new Array(v),w=0;w<v;w++)y[w]=arguments[w];return A&&A[0]===y[0]&&!o.context?(l.logger.warn("It seems you are nesting recursively key: ".concat(y[0]," in key: ").concat(s[0])),null):l.translate.apply(l,y.concat([s]))},o)),o.interpolation&&this.interpolator.reset()}var m=o.postProcess||this.options.postProcess,g=typeof m=="string"?[m]:m;return i!=null&&g&&g.length&&o.applyPostProcessor!==!1&&(i=XJ.handle(g,i,s,this.options&&this.options.postProcessPassResolved?qr({i18nResolved:a},o):o,this)),i}},{key:"resolve",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,A,l,c,u;return typeof i=="string"&&(i=[i]),i.forEach(function(f){if(!s.isValidLookup(a)){var d=s.extractFromKey(f,o),h=d.key;A=h;var p=d.namespaces;s.options.fallbackNS&&(p=p.concat(s.options.fallbackNS));var m=o.count!==void 0&&typeof o.count!="string",g=m&&!o.ordinal&&o.count===0&&s.pluralResolver.shouldUseIntlApi(),v=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",y=o.lngs?o.lngs:s.languageUtils.toResolveHierarchy(o.lng||s.language,o.fallbackLng);p.forEach(function(w){s.isValidLookup(a)||(u=w,!AD["".concat(y[0],"-").concat(w)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(u)&&(AD["".concat(y[0],"-").concat(w)]=!0,s.logger.warn('key "'.concat(A,'" for languages "').concat(y.join(", "),`" won't get resolved as namespace "`).concat(u,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(function(C){if(!s.isValidLookup(a)){c=C;var b=[h];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(b,h,C,w,o);else{var F;m&&(F=s.pluralResolver.getSuffix(C,o.count,o));var I="".concat(s.options.pluralSeparator,"zero");if(m&&(b.push(h+F),g&&b.push(h+I)),v){var S="".concat(h).concat(s.options.contextSeparator).concat(o.context);b.push(S),m&&(b.push(S+F),g&&b.push(S+I))}}for(var T;T=b.pop();)s.isValidLookup(a)||(l=T,a=s.getResource(C,w,T,o))}}))})}}),{res:a,usedKey:A,exactUsedKey:l,usedLng:c,usedNS:u}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,s,o,a):this.resourceStore.getResource(i,s,o,a)}}],[{key:"hasDefaultValue",value:function(i){var s="defaultValue";for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&s===o.substring(0,s.length)&&i[o]!==void 0)return!0;return!1}}]),t}(jl);function e1(n){return n.charAt(0).toUpperCase()+n.slice(1)}var cD=function(){function n(e){so(this,n),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=fa.create("languageUtils")}return oo(n,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var r=t.split("-");return this.formatLanguageCode(r[0])}},{key:"formatLanguageCode",value:function(t){if(typeof t=="string"&&t.indexOf("-")>-1){var r=["hans","hant","latn","cyrl","cans","mong","arab"],i=t.split("-");return this.options.lowerCaseLng?i=i.map(function(s){return s.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=e1(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=e1(i[1].toLowerCase())),r.indexOf(i[2].toLowerCase())>-1&&(i[2]=e1(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var r=this;if(!t)return null;var i;return t.forEach(function(s){if(!i){var o=r.formatLanguageCode(s);(!r.options.supportedLngs||r.isSupportedCode(o))&&(i=o)}}),!i&&this.options.supportedLngs&&t.forEach(function(s){if(!i){var o=r.getLanguagePartFromCode(s);if(r.isSupportedCode(o))return i=o;i=r.options.supportedLngs.find(function(a){if(a.indexOf(o)===0)return a})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!r)return t.default||[];var i=t[r];return i||(i=t[this.getScriptPartFromCode(r)]),i||(i=t[this.formatLanguageCode(r)]),i||(i=t[this.getLanguagePartFromCode(r)]),i||(i=t.default),i||[]}},{key:"toResolveHierarchy",value:function(t,r){var i=this,s=this.getFallbackCodes(r||this.options.fallbackLng||[],t),o=[],a=function(l){l&&(i.isSupportedCode(l)?o.push(l):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(l)))};return typeof t=="string"&&t.indexOf("-")>-1?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(t))):typeof t=="string"&&a(this.formatLanguageCode(t)),s.forEach(function(A){o.indexOf(A)<0&&a(i.formatLanguageCode(A))}),o}}]),n}(),kde=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Dde={1:function(e){return Number(e>1)},2:function(e){return Number(e!=1)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(e==1?0:e>=2&&e<=4?1:2)},7:function(e){return Number(e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(e==1?0:e==2?1:e!=8&&e!=11?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(e==1?0:e==2?1:e<7?2:e<11?3:4)},11:function(e){return Number(e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(e!==0)},14:function(e){return Number(e==1?0:e==2?1:e==3?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:e!==0?1:2)},17:function(e){return Number(e==1||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(e==0?0:e==1?1:2)},19:function(e){return Number(e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(e==1?0:e==0||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3)}},Vde=["v1","v2","v3"],uD={zero:0,one:1,two:2,few:3,many:4,other:5};function Lde(){var n={};return kde.forEach(function(e){e.lngs.forEach(function(t){n[t]={numbers:e.nr,plurals:Dde[e.fc]}})}),n}var Pde=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};so(this,n),this.languageUtils=e,this.options=t,this.logger=fa.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Lde()}return oo(n,[{key:"addRule",value:function(t,r){this.rules[t]=r}},{key:"getRule",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(t,r);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,i).map(function(s){return"".concat(r).concat(s)})}},{key:"getSuffixes",value:function(t){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(t,i);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(o,a){return uD[o]-uD[a]}).map(function(o){return"".concat(r.options.prepend).concat(o)}):s.numbers.map(function(o){return r.getSuffix(t,o,i)}):[]}},{key:"getSuffix",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(t,i);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(r)):this.getSuffixRetroCompatible(s,r):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,r){var i=this,s=t.noAbs?t.plurals(r):t.plurals(Math.abs(r)),o=t.numbers[s];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var a=function(){return i.options.prepend&&o.toString()?i.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?a():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!Vde.includes(this.options.compatibilityJSON)}}]),n}();function fD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function vo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fD(Object(t),!0).forEach(function(r){Na(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Wde=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};so(this,n),this.logger=fa.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return oo(n,[{key:"init",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var r=t.interpolation;this.escape=r.escape!==void 0?r.escape:Ude,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?gf(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?gf(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?gf(r.nestingPrefix):r.nestingPrefixEscaped||gf("$t("),this.nestingSuffix=r.nestingSuffix?gf(r.nestingSuffix):r.nestingSuffixEscaped||gf(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var r="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(r,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(t,r,i,s){var o=this,a,A,l,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(m){return m.replace(/\$/g,"$$$$")}var f=function(g){if(g.indexOf(o.formatSeparator)<0){var v=sD(r,c,g);return o.alwaysFormat?o.format(v,void 0,i,vo(vo(vo({},s),r),{},{interpolationkey:g})):v}var y=g.split(o.formatSeparator),w=y.shift().trim(),C=y.join(o.formatSeparator).trim();return o.format(sD(r,c,w),C,i,vo(vo(vo({},s),r),{},{interpolationkey:w}))};this.resetRegExp();var d=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,h=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,p=[{regex:this.regexpUnescape,safeValue:function(g){return u(g)}},{regex:this.regexp,safeValue:function(g){return o.escapeValue?u(o.escape(g)):u(g)}}];return p.forEach(function(m){for(l=0;a=m.regex.exec(t);){var g=a[1].trim();if(A=f(g),A===void 0)if(typeof d=="function"){var v=d(t,a,s);A=typeof v=="string"?v:""}else if(s&&Object.prototype.hasOwnProperty.call(s,g))A="";else if(h){A=a[0];continue}else o.logger.warn("missed to pass in variable ".concat(g," for interpolating ").concat(t)),A="";else typeof A!="string"&&!o.useRawValueToEscape&&(A=rD(A));var y=m.safeValue(A);if(t=t.replace(a[0],y),h?(m.regex.lastIndex+=A.length,m.regex.lastIndex-=a[0].length):m.regex.lastIndex=0,l++,l>=o.maxReplaces)break}}),t}},{key:"nest",value:function(t,r){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,a,A;function l(d,h){var p=this.nestingOptionsSeparator;if(d.indexOf(p)<0)return d;var m=d.split(new RegExp("".concat(p,"[ ]*{"))),g="{".concat(m[1]);d=m[0],g=this.interpolate(g,A);var v=g.match(/'/g),y=g.match(/"/g);(v&&v.length%2===0&&!y||y.length%2!==0)&&(g=g.replace(/'/g,'"'));try{A=JSON.parse(g),h&&(A=vo(vo({},h),A))}catch(w){return this.logger.warn("failed parsing options string in nesting for key ".concat(d),w),"".concat(d).concat(p).concat(g)}return delete A.defaultValue,d}for(;o=this.nestingRegexp.exec(t);){var c=[];A=vo({},s),A=A.replace&&typeof A.replace!="string"?A.replace:A,A.applyPostProcessor=!1,delete A.defaultValue;var u=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var f=o[1].split(this.formatSeparator).map(function(d){return d.trim()});o[1]=f.shift(),c=f,u=!0}if(a=r(l.call(this,o[1].trim(),A),A),a&&o[0]===t&&typeof a!="string")return a;typeof a!="string"&&(a=rD(a)),a||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(t)),a=""),u&&(a=c.reduce(function(d,h){return i.format(d,h,s.lng,vo(vo({},s),{},{interpolationkey:o[1].trim()}))},a.trim())),t=t.replace(o[0],a),this.regexp.lastIndex=0}return t}}]),n}();function dD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ya(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dD(Object(t),!0).forEach(function(r){Na(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ode(n){var e=n.toLowerCase().trim(),t={};if(n.indexOf("(")>-1){var r=n.split("(");e=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);if(e==="currency"&&i.indexOf(":")<0)t.currency||(t.currency=i.trim());else if(e==="relativetime"&&i.indexOf(":")<0)t.range||(t.range=i.trim());else{var s=i.split(";");s.forEach(function(o){if(o){var a=o.split(":"),A=Cde(a),l=A[0],c=A.slice(1),u=c.join(":").trim().replace(/^'+|'+$/g,"");t[l.trim()]||(t[l.trim()]=u),u==="false"&&(t[l.trim()]=!1),u==="true"&&(t[l.trim()]=!0),isNaN(u)||(t[l.trim()]=parseInt(u,10))}})}}return{formatName:e,formatOptions:t}}function mf(n){var e={};return function(r,i,s){var o=i+JSON.stringify(s),a=e[o];return a||(a=n(i,s),e[o]=a),a(r)}}var Zde=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};so(this,n),this.logger=fa.create("formatter"),this.options=e,this.formats={number:mf(function(t,r){var i=new Intl.NumberFormat(t,Ya({},r));return function(s){return i.format(s)}}),currency:mf(function(t,r){var i=new Intl.NumberFormat(t,Ya(Ya({},r),{},{style:"currency"}));return function(s){return i.format(s)}}),datetime:mf(function(t,r){var i=new Intl.DateTimeFormat(t,Ya({},r));return function(s){return i.format(s)}}),relativetime:mf(function(t,r){var i=new Intl.RelativeTimeFormat(t,Ya({},r));return function(s){return i.format(s,r.range||"day")}}),list:mf(function(t,r){var i=new Intl.ListFormat(t,Ya({},r));return function(s){return i.format(s)}})},this.init(e)}return oo(n,[{key:"init",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=r.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(t,r){this.formats[t.toLowerCase().trim()]=r}},{key:"addCached",value:function(t,r){this.formats[t.toLowerCase().trim()]=mf(r)}},{key:"format",value:function(t,r,i){var s=this,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=r.split(this.formatSeparator),A=a.reduce(function(l,c){var u=Ode(c),f=u.formatName,d=u.formatOptions;if(s.formats[f]){var h=l;try{var p=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},m=p.locale||p.lng||o.locale||o.lng||i;h=s.formats[f](l,m,Ya(Ya(Ya({},d),o),p))}catch(g){s.logger.warn(g)}return h}else s.logger.warn("there was no format function for ".concat(f));return l},t);return A}}]),n}();function hD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function pD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hD(Object(t),!0).forEach(function(r){Na(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):hD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Gde(n){var e=Jde();return function(){var r=_a(n),i;if(e){var s=_a(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return f0(this,i)}}function Jde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hde(n,e){n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)}var zde=function(n){ab(t,n);var e=Gde(t);function t(r,i,s){var o,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return so(this,t),o=e.call(this),Ab&&jl.call(Pl(o)),o.backend=r,o.store=i,o.services=s,o.languageUtils=s.languageUtils,o.options=a,o.logger=fa.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=a.maxParallelReads||10,o.readingCalls=0,o.maxRetries=a.maxRetries>=0?a.maxRetries:5,o.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(s,a.backend,a),o}return oo(t,[{key:"queueLoad",value:function(i,s,o,a){var A=this,l={},c={},u={},f={};return i.forEach(function(d){var h=!0;s.forEach(function(p){var m="".concat(d,"|").concat(p);!o.reload&&A.store.hasResourceBundle(d,p)?A.state[m]=2:A.state[m]<0||(A.state[m]===1?c[m]===void 0&&(c[m]=!0):(A.state[m]=1,h=!1,c[m]===void 0&&(c[m]=!0),l[m]===void 0&&(l[m]=!0),f[p]===void 0&&(f[p]=!0)))}),h||(u[d]=!0)}),(Object.keys(l).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(l),pending:Object.keys(c),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(f)}}},{key:"loaded",value:function(i,s,o){var a=i.split("|"),A=a[0],l=a[1];s&&this.emit("failedLoading",A,l,s),o&&this.store.addResourceBundle(A,l,o),this.state[i]=s?-1:2;var c={};this.queue.forEach(function(u){Fde(u.loaded,[A],l),Hde(u,i),s&&u.errors.push(s),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(function(f){c[f]||(c[f]={});var d=u.loaded[f];d.length&&d.forEach(function(h){c[f][h]===void 0&&(c[f][h]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(function(u){return!u.done})}},{key:"read",value:function(i,s,o){var a=this,A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,c=arguments.length>5?arguments[5]:void 0;if(!i.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:s,fcName:o,tried:A,wait:l,callback:c});return}this.readingCalls++;var u=function(p,m){if(a.readingCalls--,a.waitingReads.length>0){var g=a.waitingReads.shift();a.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(p&&m&&A<a.maxRetries){setTimeout(function(){a.read.call(a,i,s,o,A+1,l*2,c)},l);return}c(p,m)},f=this.backend[o].bind(this.backend);if(f.length===2){try{var d=f(i,s);d&&typeof d.then=="function"?d.then(function(h){return u(null,h)}).catch(u):u(null,d)}catch(h){u(h)}return}return f(i,s,u)}},{key:"prepareLoading",value:function(i,s){var o=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},A=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),A&&A();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof s=="string"&&(s=[s]);var l=this.queueLoad(i,s,a,A);if(!l.toLoad.length)return l.pending.length||A(),null;l.toLoad.forEach(function(c){o.loadOne(c)})}},{key:"load",value:function(i,s,o){this.prepareLoading(i,s,{},o)}},{key:"reload",value:function(i,s,o){this.prepareLoading(i,s,{reload:!0},o)}},{key:"loadOne",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=i.split("|"),A=a[0],l=a[1];this.read(A,l,"read",void 0,void 0,function(c,u){c&&s.logger.warn("".concat(o,"loading namespace ").concat(l," for language ").concat(A," failed"),c),!c&&u&&s.logger.log("".concat(o,"loaded namespace ").concat(l," for language ").concat(A),u),s.loaded(i,c,u)})}},{key:"saveMissing",value:function(i,s,o,a,A){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){var u=pD(pD({},l),{},{isUpdate:A}),f=this.backend.create.bind(this.backend);if(f.length<6)try{var d;f.length===5?d=f(i,s,o,a,u):d=f(i,s,o,a),d&&typeof d.then=="function"?d.then(function(h){return c(null,h)}).catch(c):c(null,d)}catch(h){c(h)}else f(i,s,o,a,c,u)}!i||!i[0]||this.store.addResource(i[0],s,o,a)}}}]),t}(jl);function gD(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if(Zs(e[1])==="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),Zs(e[2])==="object"||Zs(e[3])==="object"){var r=e[3]||e[2];Object.keys(r).forEach(function(i){t[i]=r[i]})}return t},interpolation:{escapeValue:!0,format:function(e,t,r,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function mD(n){return typeof n.ns=="string"&&(n.ns=[n.ns]),typeof n.fallbackLng=="string"&&(n.fallbackLng=[n.fallbackLng]),typeof n.fallbackNS=="string"&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n}function vD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Yo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vD(Object(t),!0).forEach(function(r){Na(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Xde(n){var e=Yde();return function(){var r=_a(n),i;if(e){var s=_a(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return f0(this,i)}}function Yde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ly(){}function Kde(n){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(n));e.forEach(function(t){typeof n[t]=="function"&&(n[t]=n[t].bind(n))})}var Qw=function(n){ab(t,n);var e=Xde(t);function t(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(so(this,t),r=e.call(this),Ab&&jl.call(Pl(r)),r.options=mD(i),r.services={},r.logger=fa,r.modules={external:[]},Kde(Pl(r)),s&&!r.isInitialized&&!i.isClone){if(!r.options.initImmediate)return r.init(i,s),f0(r,Pl(r));setTimeout(function(){r.init(i,s)},0)}return r}return oo(t,[{key:"init",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(o=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var a=gD();this.options=Yo(Yo(Yo({},a),this.options),mD(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Yo(Yo({},a.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function A(g){return g?typeof g=="function"?new g:g:null}if(!this.options.isClone){this.modules.logger?fa.init(A(this.modules.logger),this.options):fa.init(null,this.options);var l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=Zde);var c=new cD(this.options);this.store=new Mde(this.options.resources,this.options);var u=this.services;u.logger=fa,u.resourceStore=this.store,u.languageUtils=c,u.pluralResolver=new Pde(c,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(u.formatter=A(l),u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new Wde(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new zde(A(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",function(g){for(var v=arguments.length,y=new Array(v>1?v-1:0),w=1;w<v;w++)y[w-1]=arguments[w];i.emit.apply(i,[g].concat(y))}),this.modules.languageDetector&&(u.languageDetector=A(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=A(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new lD(this.services,this.options),this.translator.on("*",function(g){for(var v=arguments.length,y=new Array(v>1?v-1:0),w=1;w<v;w++)y[w-1]=arguments[w];i.emit.apply(i,[g].concat(y))}),this.modules.external.forEach(function(g){g.init&&g.init(i)})}if(this.format=this.options.interpolation.format,o||(o=ly),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var d=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];d.forEach(function(g){i[g]=function(){var v;return(v=i.store)[g].apply(v,arguments)}});var h=["addResource","addResources","addResourceBundle","removeResourceBundle"];h.forEach(function(g){i[g]=function(){var v;return(v=i.store)[g].apply(v,arguments),i}});var p=Op(),m=function(){var v=function(w,C){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),p.resolve(C),o(w,C)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return v(null,i.t.bind(i));i.changeLanguage(i.options.lng,v)};return this.options.resources||!this.options.initImmediate?m():setTimeout(m,0),p}},{key:"loadResources",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ly,a=o,A=typeof i=="string"?i:this.language;if(typeof i=="function"&&(a=i),!this.options.resources||this.options.partialBundledLanguages){if(A&&A.toLowerCase()==="cimode")return a();var l=[],c=function(d){if(d){var h=s.services.languageUtils.toResolveHierarchy(d);h.forEach(function(p){l.indexOf(p)<0&&l.push(p)})}};if(A)c(A);else{var u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.forEach(function(f){return c(f)})}this.options.preload&&this.options.preload.forEach(function(f){return c(f)}),this.services.backendConnector.load(l,this.options.ns,function(f){!f&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),a(f)})}else a(null)}},{key:"reloadResources",value:function(i,s,o){var a=Op();return i||(i=this.languages),s||(s=this.options.ns),o||(o=ly),this.services.backendConnector.reload(i,s,function(A){a.resolve(),o(A)}),a}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&XJ.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var s=0;s<this.languages.length;s++){var o=this.languages[s];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(i,s){var o=this;this.isLanguageChangingTo=i;var a=Op();this.emit("languageChanging",i);var A=function(f){o.language=f,o.languages=o.services.languageUtils.toResolveHierarchy(f),o.resolvedLanguage=void 0,o.setResolvedLanguage(f)},l=function(f,d){d?(A(d),o.translator.changeLanguage(d),o.isLanguageChangingTo=void 0,o.emit("languageChanged",d),o.logger.log("languageChanged",d)):o.isLanguageChangingTo=void 0,a.resolve(function(){return o.t.apply(o,arguments)}),s&&s(f,function(){return o.t.apply(o,arguments)})},c=function(f){!i&&!f&&o.services.languageDetector&&(f=[]);var d=typeof f=="string"?f:o.services.languageUtils.getBestMatchFromCodes(f);d&&(o.language||A(d),o.translator.language||o.translator.changeLanguage(d),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage&&o.services.languageDetector.cacheUserLanguage(d)),o.loadResources(d,function(h){l(h,d)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(i),a}},{key:"getFixedT",value:function(i,s,o){var a=this,A=function l(c,u){var f;if(Zs(u)!=="object"){for(var d=arguments.length,h=new Array(d>2?d-2:0),p=2;p<d;p++)h[p-2]=arguments[p];f=a.options.overloadTranslationOptionHandler([c,u].concat(h))}else f=Yo({},u);f.lng=f.lng||l.lng,f.lngs=f.lngs||l.lngs,f.ns=f.ns||l.ns,f.keyPrefix=f.keyPrefix||o||l.keyPrefix;var m=a.options.keySeparator||".",g;return f.keyPrefix&&Array.isArray(c)?g=c.map(function(v){return"".concat(f.keyPrefix).concat(m).concat(v)}):g=f.keyPrefix?"".concat(f.keyPrefix).concat(m).concat(c):c,a.t(g,f)};return typeof i=="string"?A.lng=i:A.lngs=i,A.ns=s,A.keyPrefix=o,A}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var a=this.resolvedLanguage||this.languages[0],A=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var c=function(d,h){var p=s.services.backendConnector.state["".concat(d,"|").concat(h)];return p===-1||p===2};if(o.precheck){var u=o.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(a,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(a,i)&&(!A||c(l,i)))}},{key:"loadNamespaces",value:function(i,s){var o=this,a=Op();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(A){o.options.ns.indexOf(A)<0&&o.options.ns.push(A)}),this.loadResources(function(A){a.resolve(),s&&s(A)}),a):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(i,s){var o=Op();typeof i=="string"&&(i=[i]);var a=this.options.preload||[],A=i.filter(function(l){return a.indexOf(l)<0});return A.length?(this.options.preload=a.concat(A),this.loadResources(function(l){o.resolve(),s&&s(l)}),o):(s&&s(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new cD(gD());return s.indexOf(o.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ly,a=Yo(Yo(Yo({},this.options),s),{isClone:!0}),A=new t(a);(s.debug!==void 0||s.prefix!==void 0)&&(A.logger=A.logger.clone(s));var l=["store","services","language"];return l.forEach(function(c){A[c]=i[c]}),A.services=Yo({},this.services),A.services.utils={hasLoadedNamespace:A.hasLoadedNamespace.bind(A)},A.translator=new lD(A.services,A.options),A.translator.on("*",function(c){for(var u=arguments.length,f=new Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];A.emit.apply(A,[c].concat(f))}),A.init(a,o),A.translator.options=A.options,A.translator.backendConnector.services.utils={hasLoadedNamespace:A.hasLoadedNamespace.bind(A)},A}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),t}(jl);Na(Qw,"createInstance",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Qw(n,e)});var jr=Qw.createInstance();jr.createInstance=Qw.createInstance;jr.createInstance;jr.dir;jr.init;jr.loadResources;jr.reloadResources;jr.use;jr.changeLanguage;jr.getFixedT;jr.t;jr.exists;jr.setDefaultNamespace;jr.hasLoadedNamespace;jr.loadNamespaces;jr.loadLanguages;function jde(){if(console&&console.warn){for(var n,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[0]=="string"&&(t[0]="react-i18next:: ".concat(t[0])),(n=console).warn.apply(n,t)}}var yD={};function tU(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];typeof e[0]=="string"&&yD[e[0]]||(typeof e[0]=="string"&&(yD[e[0]]=new Date),jde.apply(void 0,e))}function BD(n,e,t){n.loadNamespaces(e,function(){if(n.isInitialized)t();else{var r=function i(){setTimeout(function(){n.off("initialized",i)},0),t()};n.on("initialized",r)}})}function $de(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;var o=function(A,l){var c=e.services.backendConnector.state["".concat(A,"|").concat(l)];return c===-1||c===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(r,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,n)&&(!i||o(s,n)))}function qde(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return tU("i18n.languages were undefined or empty",e.languages),!0;var r=e.options.ignoreJSONStructure!==void 0;return r?e.hasLoadedNamespace(n,{precheck:function(s,o){if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!o(s.isLanguageChangingTo,n))return!1}}):$de(n,e,t)}var ehe=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,the={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},nhe=function(e){return the[e]},rhe=function(e){return e.replace(ehe,nhe)};function wD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function CD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wD(Object(t),!0).forEach(function(r){Na(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var nU={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:rhe};function ihe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};nU=CD(CD({},nU),n)}function she(){return nU}var YJ;function ohe(n){YJ=n}function ahe(){return YJ}var Ahe={type:"3rdParty",init:function(e){ihe(e.options.react),ohe(e)}},lhe=pe.createContext(),che=function(){function n(){so(this,n),this.usedNamespaces={}}return oo(n,[{key:"addUsedNamespaces",value:function(t){var r=this;t.forEach(function(i){r.usedNamespaces[i]||(r.usedNamespaces[i]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),n}();function uhe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],A=!0,l=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;A=!1}else for(;!(A=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);A=!0);}catch(c){l=!0,i=c}finally{try{if(!A&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}function fhe(n,e){return ZJ(n)||uhe(n,e)||GJ(n,e)||JJ()}function bD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function t1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bD(Object(t),!0).forEach(function(r){Na(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var dhe=function(e,t){var r=pe.useRef();return pe.useEffect(function(){r.current=t?r.current:e},[e,t]),r.current};function KJ(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.i18n,r=pe.useContext(lhe)||{},i=r.i18n,s=r.defaultNS,o=t||i||ahe();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new che),!o){tU("You will need to pass in an i18next instance by using initReactI18next");var a=function(S,T){return typeof T=="string"?T:T&&Zs(T)==="object"&&typeof T.defaultValue=="string"?T.defaultValue:Array.isArray(S)?S[S.length-1]:S},A=[a,{},!1];return A.t=a,A.i18n={},A.ready=!1,A}o.options.react&&o.options.react.wait!==void 0&&tU("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var l=t1(t1(t1({},she()),o.options.react),e),c=l.useSuspense,u=l.keyPrefix,f=n||s||o.options&&o.options.defaultNS;f=typeof f=="string"?[f]:f||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(f);var d=(o.isInitialized||o.initializedStoreOnce)&&f.every(function(I){return qde(I,o,l)});function h(){return o.getFixedT(null,l.nsMode==="fallback"?f:f[0],u)}var p=pe.useState(h),m=fhe(p,2),g=m[0],v=m[1],y=f.join(),w=dhe(y),C=pe.useRef(!0);pe.useEffect(function(){var I=l.bindI18n,S=l.bindI18nStore;C.current=!0,!d&&!c&&BD(o,f,function(){C.current&&v(h)}),d&&w&&w!==y&&C.current&&v(h);function T(){C.current&&v(h)}return I&&o&&o.on(I,T),S&&o&&o.store.on(S,T),function(){C.current=!1,I&&o&&I.split(" ").forEach(function(H){return o.off(H,T)}),S&&o&&S.split(" ").forEach(function(H){return o.store.off(H,T)})}},[o,y]);var b=pe.useRef(!0);pe.useEffect(function(){C.current&&!b.current&&v(h),b.current=!1},[o,u]);var F=[g,o,d];if(F.t=g,F.i18n=o,F.ready=d,d||!d&&!c)return F;throw new Promise(function(I){BD(o,f,function(){I()})})}var jJ=[],hhe=jJ.forEach,phe=jJ.slice;function ghe(n){return hhe.call(phe.call(arguments,1),function(e){if(e)for(var t in e)n[t]===void 0&&(n[t]=e[t])}),n}var xD=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,mhe=function(e,t,r){var i=r||{};i.path=i.path||"/";var s=encodeURIComponent(t),o="".concat(e,"=").concat(s);if(i.maxAge>0){var a=i.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(i.domain){if(!xD.test(i.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(i.domain)}if(i.path){if(!xD.test(i.path))throw new TypeError("option path is invalid");o+="; Path=".concat(i.path)}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(i.expires.toUTCString())}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite){var A=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(A){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},ID={create:function(e,t,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+r*60*1e3)),i&&(s.domain=i),document.cookie=mhe(e,encodeURIComponent(t),s)},read:function(e){for(var t="".concat(e,"="),r=document.cookie.split(";"),i=0;i<r.length;i++){for(var s=r[i];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null},remove:function(e){this.create(e,"",-1)}},vhe={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&typeof document<"u"){var r=ID.read(e.lookupCookie);r&&(t=r)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&typeof document<"u"&&ID.create(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},yhe={name:"querystring",lookup:function(e){var t;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=r.substring(1),s=i.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var A=s[o].substring(0,a);A===e.lookupQuerystring&&(t=s[o].substring(a+1))}}}return t}},Zp=null,FD=function(){if(Zp!==null)return Zp;try{Zp=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Zp=!1}return Zp},Bhe={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&FD()){var r=window.localStorage.getItem(e.lookupLocalStorage);r&&(t=r)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&FD()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},Gp=null,ED=function(){if(Gp!==null)return Gp;try{Gp=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Gp=!1}return Gp},whe={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&ED()){var r=window.sessionStorage.getItem(e.lookupSessionStorage);r&&(t=r)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&ED()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},Che={name:"navigator",lookup:function(e){var t=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)t.push(navigator.languages[r]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},bhe={name:"htmlTag",lookup:function(e){var t,r=e.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},xhe={name:"path",lookup:function(e){var t;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof r[e.lookupFromPathIndex]!="string")return;t=r[e.lookupFromPathIndex].replace("/","")}else t=r[0].replace("/","")}return t}},Ihe={name:"subdomain",lookup:function(e){var t=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[t]}};function Fhe(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var $J=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};so(this,n),this.type="languageDetector",this.detectors={},this.init(e,t)}return oo(n,[{key:"init",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=ghe(r,this.options||{},Fhe()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(vhe),this.addDetector(yhe),this.addDetector(Bhe),this.addDetector(whe),this.addDetector(Che),this.addDetector(bhe),this.addDetector(xhe),this.addDetector(Ihe)}},{key:"addDetector",value:function(t){this.detectors[t.name]=t}},{key:"detect",value:function(t){var r=this;t||(t=this.options.order);var i=[];return t.forEach(function(s){if(r.detectors[s]){var o=r.detectors[s].lookup(r.options);o&&typeof o=="string"&&(o=[o]),o&&(i=i.concat(o))}}),this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}},{key:"cacheUserLanguage",value:function(t,r){var i=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||r.forEach(function(s){i.detectors[s]&&i.detectors[s].cacheUserLanguage(t,i.options)}))}}]),n}();$J.type="languageDetector";const Ehe={translation:{pageTitles:{chooseClass:"Choose Character Class",chooseAppearance:"Choose Appearance",createBio:"Create Bio",saveCharacter:"Save Your Character",chat:"Chat With Your Character"},classes:{beastPainter:{name:"Beast Painter",description:"Paints beasts"},engineer:{name:"Engineer",description:"Builds things"},dropHunter:{name:"Drop Hunter",description:"Hunts drops"},theDegen:{name:"The Degen",description:"Degens"},neuralHacker:{name:"Neural Hacker",description:"Hacks neural networks"},liskWitch:{name:"Lisk Witch",description:"Witches lisk"},bruiser:{name:"Bruiser",description:"Bruises things"}},callToAction:{next:"Next",back:"Back",randomize:"Randomize",chat:"Chat",send:"Send"},editor:{title:"Appearance",head:"Head",body:"Body",eyes:"Eyes",outer:"Outer",chest:"Chest",legs:"Legs",feet:"Feet",accessories:"Accessories"},labels:{name:"Name",voice:"Voice",favoriteColor:"Favorite Color",preferredGreeting:"Preferred Greeting",bio:"Bio",question:"Question",yourName:"Your Name",conversation:"Conversation"},text:{unoptimized:"Unoptimized",apiUnderMaintnance:"Voice generation API is temporarily disabled for maintenance!"}}},Uhe={translation:{pageTitles:{chooseClass:"Выбрать Класс Персонажа",chooseAppearance:"Выбрать Внешность",createBio:"Создать Биографию",saveCharacter:"Сохранить Персонажа",chat:"Общаться Со Своим Персонажем"},classes:{beastPainter:{name:"Анималист",description:"Рисует зверей"},engineer:{name:"Инженер",description:"Строит вещи"},dropHunter:{name:"Охотник за дропами",description:"Охотится на дропы"},theDegen:{name:"Деген",description:"Дегены"},neuralHacker:{name:"Нейронный Хакер",description:"Взламывает нейр. сети"},liskWitch:{name:"Лиск Ведьма",description:"Лиск Ведьмы"},bruiser:{name:"Громила",description:"Громит вещи"}},callToAction:{next:"Далее",back:"Назад",randomize:"Рандомизировать",chat:"Чат",send:"Отправить"},editor:{title:"Внешность",head:"Голова",body:"Тело",eyes:"Глаза",outer:"Внешний",chest:"Грудь",legs:"Ноги",feet:"Стопы",accessories:"Аксессуары"},labels:{name:"Имя",voice:"Голос",favoriteColor:"Любимый Цвет",preferredGreeting:"Предпочитаемое Приветствие",bio:"Биография",question:"Вопрос",yourName:"Ваше Имя",conversation:"Разговор"},text:{unoptimized:"Неоптимизи­рованный",apiUnderMaintnance:"API генерации голоса временно отключен на техническое обслуживание."}}},_he={translation:{pageTitles:{chooseClass:"选择角色类型",chooseAppearance:"选择外观",createBio:"创建简介",saveCharacter:"保存角色",chat:"与你的角色聊天"},classes:{beastPainter:{name:"野兽画家",description:"画野兽"},engineer:{name:"工程师",description:"建造物品"},dropHunter:{name:"投放猎手",description:"猎取投放品"},theDegen:{name:"豪赌家",description:"资深赌徒"},neuralHacker:{name:"神经黑客",description:"侵入神经网络"},liskWitch:{name:"Lisk 巫师",description:"施法于 Lisk"},bruiser:{name:"碾压者",description:"碾碎一切"}},callToAction:{next:"下一步",back:"返回",randomize:"随机",chat:"聊天",send:"发送"},editor:{title:"外观",head:"头部",body:"身体",eyes:"眼睛",outer:"外套",chest:"上身",legs:"腿部",feet:"脚部",accessories:"配件"},labels:{name:"名字",voice:"语音",favoriteColor:"颜色偏好",preferredGreeting:"首选问候语",bio:"简介",question:"问题",yourName:"你的名字",conversation:"对话"},text:{unoptimized:"未优化",apiUnderMaintnance:"语音生成API暂时关闭进行维护!"}}},She={en:Ehe,ru:Uhe,zh:_he};jr.use($J).use(Ahe).init({debug:!0,fallbackLng:"en",interpolation:{escapeValue:!1},resources:She});const ao=pe.createContext(),Qhe=n=>{const{t:e}=KJ();return J.jsx(ao.Provider,{value:{t:e},children:n.children})},Rhe=2;class Mhe{constructor(e=.5,t=.5,r=1,i=5){this.vrmBlinkers=[],this.mode="ready",this.clock=new Une,this.closeTime=e,this.openTime=t,this.continuity=r,this.randomness=i,this._eyeOpen=1,this._blinkCounter=0,this.isTakingScreenShot=!1,this.update()}addBlinker(e){this.vrmBlinkers.push(e)}enableScreenshot(){this.isTakingScreenShot=!0,this._eyeOpen=Rhe,this._updateBlinkers()}disableScreenshot(){this.isTakingScreenShot=!1}update(){setInterval(()=>{if(this.isTakingScreenShot)return;const e=this.clock.getDelta();switch(this.mode){case"closing":this._eyeOpen>0?this._eyeOpen-=e/this.closeTime:(this._eyeOpen=0,this.mode="open"),this._updateBlinkers();break;case"open":this._eyeOpen<1?this._eyeOpen+=e/this.openTime:(this._eyeOpen=1,this.mode="ready"),this._updateBlinkers();break;case"ready":this._blinkCounter+=e,this._blinkCounter>=this.continuity&&(Math.floor(Math.random()*this.randomness)===0&&(this.mode="closing"),this._blinkCounter=0);break}},1e3/30)}_updateBlinkers(){this.vrmBlinkers.forEach(e=>{e.expressionManager.setValue(ii.Blink,1-this._eyeOpen),e.expressionManager.update()})}}const n1=new z;class The{constructor(e,t){this.neckBones=[],this.spineBones=[],this.leftEyeBones=[],this.rightEyesBones=[],this.curMousePos=new Ge,this.hotzoneSection=i(),this.enabled=!1,this.userActivated=!1,this.lookInterest=1,this.hasInterest=!0,this.interestSpeed=.3,this.onCanvas=!0,this.camera=null,this.maxLookPercent={neck:{maxy:15,miny:10,maxx:30,minx:10},spine:{maxy:0,miny:0,maxx:30,minx:10},left:{maxy:15,miny:20,maxx:35,minx:35},right:{maxy:15,miny:20,maxx:35,minx:35}},window.addEventListener("mousemove",s=>{this.curMousePos={x:s.clientX,y:s.clientY}});const r=document.getElementById(t);r&&(r.addEventListener("mouseleave",()=>{this.onCanvas=!1}),r.addEventListener("mouseenter",()=>{this.onCanvas=!0})),window.addEventListener("resize",()=>{this.hotzoneSection=i()});function i(){const s=window.innerWidth*e/100,o=(window.innerWidth-s)/2;return{xStart:o,xEnd:window.innerWidth-o,yStart:50,yEnd:window.innerHeight-80}}}setActive(e){console.log("is activating"),this.userActivated=e}setCamera(e){this.camera=e}addVRM(e){const t=e.humanoid.humanBones;this.neckBones.push(t.neck.node),this.spineBones.push(t.spine.node),t.leftEye&&this.leftEyeBones.push(t.leftEye.node),t.rightEye&&this.rightEyesBones.push(t.rightEye.node)}_getMouseDegrees(e,t,r){let i=0,s=0,o,a,A,l,c={x:window.innerWidth,y:window.innerHeight};return e<=c.x/2&&(o=c.x/2-e,a=o/(c.x/2)*100,i=r.maxx*a/100*-1),e>=c.x/2&&(o=e-c.x/2,a=o/(c.x/2)*100,i=r.minx*a/100),t<=c.y/2&&(A=c.y/2-t,l=A/(c.y/2)*100,s=r.maxy*.5*l/100*-1),t>=c.y/2&&(A=t-c.y/2,l=A/(c.y/2)*100,s=r.miny*l/100),{x:i,y:s}}lerp(e,t,r){return(1-r)*e+r*t}_moveJoint(e,t){if(Object.keys(e).length!==0){const r=(this.camera.position.y-1.8)*window.innerHeight/2;let i=this._getMouseDegrees(this.curMousePos.x,this.curMousePos.y-r,t);const s=.8;e.rotation.y=this.lerp(Dt.degToRad(i.x),e.rotation.y,s),e.rotation.x=this.lerp(Dt.degToRad(i.y),e.rotation.x,s)}}update(){n1.set(0,0,1),n1.applyQuaternion(this.camera.quaternion);const e=n1.z>0;this.curMousePos.x>this.hotzoneSection.xStart&&this.curMousePos.x<this.hotzoneSection.xEnd&&this.curMousePos.y>this.hotzoneSection.yStart&&this.curMousePos.y<this.hotzoneSection.yEnd&&e&&this.enabled&&this.userActivated&&(this.neckBones.forEach(t=>{this._moveJoint(t,this.maxLookPercent.neck)}),this.spineBones.forEach(t=>{this._moveJoint(t,this.maxLookPercent.spine)}),this.leftEyeBones.forEach(t=>{this._moveJoint(t,this.maxLookPercent.left)}),this.rightEyesBones.forEach(t=>{this._moveJoint(t,this.maxLookPercent.right)}))}}const Nhe=`       
  uniform vec3 cameraDir;
  uniform vec3 eye;
  
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  varying vec2 vUv;

  void main() {
    vUv = uv;
    vec3 pos = position;
    vSurfaceNormal = normalize(normal);
    vWorldPosition = (modelMatrix * vec4( pos, 1.0 )).xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 ); 
  }
`,khe=` 
  uniform float switchItemDuration;
  uniform float switchItemTime;
  uniform vec3 cameraDir;
  uniform vec3 eye;

  uniform sampler2D auraTexture;

  varying vec3 vSurfaceNormal;
  varying vec3 vWorldPosition;
  varying vec2 vUv;
  void main() {
    float aura = texture2D(
      auraTexture, 
      vec2(
        vUv.x * 2.0,
        vUv.y * 1.0 * (switchItemDuration - switchItemTime)
      )
    ).r;
    
    float dissolveThreshold = 0.1;
    float auraStep = switchItemTime <= dissolveThreshold ? 0. : clamp(switchItemTime, dissolveThreshold, 1.0);
    aura = smoothstep(0.0, auraStep, aura);
    

    vec3 eyeDirection = normalize(eye - vWorldPosition);
    
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 0.7;
    float rim = mix(0.0, 1.0, pow(1. - EdotN, rimStrength));
    float glowIntensity = 2.0;

    vec3 rimColor = mix(vec3(0.00960, 0.833, 0.960), vec3(0., 0., 0.960), rim);
    gl_FragColor.rgb = rimColor * (1. - rim) * glowIntensity;
    gl_FragColor.a = clamp((1. - rim) * glowIntensity, 0.0, 1.0);
    gl_FragColor.a *= (switchItemDuration - switchItemTime);
    gl_FragColor *= aura;
  }
`,Dhe=`       
  uniform vec4 cameraBillboardQuaternion;

  attribute vec2 scales;
  attribute float opacity;
  attribute vec3 positions;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;

  vec3 rotateVecQuat(vec3 position, vec4 q) {
      vec3 v = position.xyz;
      return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
  }
  
  void main() {  
    vUv = uv;
    vOpacity = opacity;
    
    vec3 pos = position;
    pos = rotateVecQuat(pos, cameraBillboardQuaternion);
    pos.xz *= scales.x;
    pos.y *= scales.y;
    pos += positions;
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,Vhe=` 
  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;

  void main() {
    float angle = 0.;
    vec2 trig = vec2(cos(angle), sin(angle));
    
    vec2 pos = (vUv - 0.5) * mat2(trig.x, trig.y, -trig.y, trig.x);
    float size = 0.1;
    
    float dist = length(max(abs(pos) - size, 0.));
    float glow = 1. / (dist * 25. + .5);

    gl_FragColor = vec4(glow);
    gl_FragColor.rgb *= vec3(0.00960, 0.833, 0.960);
    float avatarGroundPosition = 0.;
    if (glow < 0.1 || vWorldPosition.y < avatarGroundPosition) {
      discard;
    }
    gl_FragColor.a *= vOpacity;
  }
`,Lhe=`       
  attribute vec2 scales;
  attribute float opacity;
  attribute vec3 positions;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;
  

  void main() {  
    vUv = uv;
    vOpacity = opacity;
    vSurfaceNormal = normalize(normal);
    
    vec3 pos = position;
    pos.xz *= scales.x;
    pos.y *= scales.y;
    pos += positions;
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,Phe=` 
  uniform float radius;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  void main() {

    vec3 eyeDirection = normalize(vec3(0., 10., 0.) - vWorldPosition);
      
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 10.0;
    float rim = distance(vWorldPosition.xz, vec2(0.)) / radius;
    rim = pow(rim, rimStrength);
    
  
    gl_FragColor.rgb = vec3(rim) * vec3(0.00960, 0.833, 0.960) * 2.0;
    gl_FragColor.a = rim;
    gl_FragColor.a = smoothstep(0.3, 0.8, gl_FragColor.a);
    gl_FragColor.a *= vOpacity;
  }
`,Whe=`       
  uniform vec4 cameraBillboardQuaternion;

  varying vec2 vUv;
  varying vec3 vWorldPosition;
  
  vec3 rotateVecQuat(vec3 position, vec4 q) {
      vec3 v = position.xyz;
      return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
  }
  void main() {  
    vUv = uv;
    
    vec3 pos = position;
    pos = rotateVecQuat(pos, cameraBillboardQuaternion);
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,Ohe=` 
  varying vec2 vUv;
  varying vec3 vWorldPosition;

  void main() {
    float col = smoothstep(0.5, 0.2, length(vUv - 0.5));
    gl_FragColor.rgb = mix(vec3(0., 0., 0.960), vec3(0.00960, 0.833, 0.960), col);
    gl_FragColor.a = col;
    gl_FragColor.a *= clamp(vWorldPosition.y * 10., 0.0, 1.0);
  }
`,Zhe=`       
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  varying vec2 vUv;

  void main() {
    vUv = uv;
    vec3 pos = position;
    vSurfaceNormal = normalize(normal);
    vWorldPosition = (modelMatrix * vec4( pos, 1.0 )).xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 ); 
  }
`,Ghe=` 
  uniform vec3 cameraDir;
  uniform vec3 eye;

  uniform float opacity;

  varying vec3 vSurfaceNormal;
  varying vec3 vWorldPosition;
  varying vec2 vUv;
  void main() {
    vec3 eyeDirection = normalize(eye - vWorldPosition);
    
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 0.7;
    float rim = mix(0.0, 1.0, pow(1. - EdotN, rimStrength));
    float glowIntensity = 2.0;

    vec3 rimColor = mix(vec3(1.0), vec3(0.400, 0.723, 0.910), rim);
    gl_FragColor = vec4(rimColor, pow(1. - rim, 2.0));
    gl_FragColor *= pow(1. - vUv.y, 3.0);
    gl_FragColor *= opacity;
  }
`,MS=(n,e,t)=>{const r=new zt;["position","normal","uv"].forEach(o=>{r.setAttribute(o,n.attributes[o])}),r.setIndex(n.index);const i=new Float32Array(t*3),s=new rw(i,3);r.setAttribute("positions",s);for(const o of e){const{name:a,itemSize:A}=o,l=new Float32Array(t*A);r.setAttribute(a,new rw(l,A))}return r},Jhe=n=>{const r=new WC(.45,.45,5,50,50,!0),i=new Ti({uniforms:{auraTexture:{value:null}},vertexShader:Nhe,fragmentShader:khe,transparent:!0,blending:Au});i.uniforms.cameraDir=n.cameraDir,i.uniforms.eye=n.eye,i.uniforms.switchItemTime=n.switchItemTime,i.uniforms.switchItemDuration=n.switchItemDuration;const s=new Tn(r,i);return s.frustumCulled=!1,s.position.y=5*.46,s},Hhe=()=>{const e=[];e.push({name:"opacity",itemSize:1}),e.push({name:"scales",itemSize:2});const t=.3,r=new Qh(t,t),i=MS(r,e,20),s=new Ti({uniforms:{cameraBillboardQuaternion:{value:new et}},vertexShader:Dhe,fragmentShader:Vhe,depthWrite:!1,blending:Au}),o=new PC(i,s,20);return o.info={particleCount:20,velocity:[20]},o},zhe=n=>{const t=[];t.push({name:"opacity",itemSize:1}),t.push({name:"scales",itemSize:2});const r=.43,i=new j_(r,32,32),s=MS(i,t,10),o=new Ti({uniforms:{radius:{value:r}},vertexShader:Lhe,fragmentShader:Phe,depthWrite:!1,blending:Au});o.uniforms.cameraDir=n.cameraDir,o.uniforms.eye=n.eye,o.uniforms.fadeInAvatarTime=n.fadeInAvatarTime;const a=new PC(s,o,10);return a.info={particleCount:10,velocity:[10],currentIndex:0},a},Xhe=n=>{const t=new Qh(1,1),r=new Ti({uniforms:{cameraBillboardQuaternion:{value:new et}},vertexShader:Whe,fragmentShader:Ohe,depthWrite:!1,blending:Au});return new Tn(t,r)},Yhe=n=>{const t=[],s=new WC(.645,.43,2.5,50,50,!0),o=MS(s,t,2),a=new Ti({uniforms:{opacity:{value:0}},vertexShader:Zhe,fragmentShader:Ghe,transparent:!0,blending:Au});a.uniforms.cameraDir=n.cameraDir,a.uniforms.eye=n.eye;const A=new PC(o,a,2);return A.fadeIn=!1,A.frustumCulled=!1,A.position.y=2.5*.46,A},UD=100,Khe=0,Rw=1.5,jhe=.1,aB=0,_D=1,SD=.05,rU=0,$he=1,qhe=.015,vi={normal:0,switchItem:1,fadeOutAvatar:2,loadingAvatar:3,fadeInAvatar:4},epe=new xu,qJ=epe.load("/textures/beam2.png");qJ.wrapS=cs;class tpe{constructor(e,t,r){this.scene=e,this.camera=t,this.globalUniforms=r,this.eye=new z,this.cameraDir=new z,this.beamMesh=null,this.initBeam(),this.pixelMesh=null,this.initPixel(),this.ringMesh=null,this.initRing(),this.teleportMesh=null,this.initTeleport(),this.spotLight=null,this.initSpotLight()}emitBeam(){this.beamMesh.visible=!0}emitPixel(){this.stopUpdatePixelMesh=!1;const e=this.pixelMesh.geometry.getAttribute("scales"),t=this.pixelMesh.geometry.getAttribute("positions"),r=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount,s=.25;for(let o=0;o<i;o++){o%2===0?e.setXY(o,.2,.2):e.setXY(o,.1,3+Math.random());const a=o/i*Math.PI*2;t.setXYZ(o,Math.cos(a)*s,(Math.random()-.5)*2,Math.sin(a)*s),r.setX(o,1+Math.random()),this.pixelMesh.info.velocity[o]=.02+Math.random()*.03}e.needsUpdate=!0,t.needsUpdate=!0,r.needsUpdate=!0}emitRespawnPixel(){this.stopUpdatePixelMesh=!1;const e=this.pixelMesh.geometry.getAttribute("scales"),t=this.pixelMesh.geometry.getAttribute("positions"),r=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount,s=.25;for(let o=0;o<i;o++)if(r.getX(o)<.01){o%2===0?e.setXY(o,.2,.2):e.setXY(o,.1,3+Math.random());const a=o/i*Math.PI*2;t.setXYZ(o,Math.cos(a)*s,Math.random()*-1,Math.sin(a)*s),r.setX(o,1+Math.random()),this.pixelMesh.info.velocity[o]=.05+Math.random()*.05;break}e.needsUpdate=!0,t.needsUpdate=!0,r.needsUpdate=!0}emitRing(e){this.ringMesh.visible=!0;const t=this.ringMesh.geometry.getAttribute("scales"),r=this.ringMesh.geometry.getAttribute("positions"),i=this.ringMesh.geometry.getAttribute("opacity"),s=this.ringMesh.info.particleCount,o=this.ringMesh.info.currentIndex,a=o-1<0?s-1:o-1,A=.1;(r.getY(a)>A+e||i.getX(a)<=0)&&(r.setXYZ(o,0,A,0),t.setXY(o,1,.06),i.setX(o,1),this.ringMesh.info.velocity[o]=.1,this.ringMesh.info.currentIndex++,this.ringMesh.info.currentIndex>=s&&(this.ringMesh.info.currentIndex=0)),t.needsUpdate=!0,r.needsUpdate=!0,i.needsUpdate=!0}emitTeleport(){this.teleportMesh.visible=!0}emitSpotLight(){this.spotLight.visible=!0,this.spotLight.fadeIn=!0}removeSpotLight(){this.spotLight.fadeIn=!1}update(){this.beamMesh.visible&&this.beamMesh.update(),!this.stopUpdatePixelMesh&&this.pixelMesh.update(),this.ringMesh.visible&&this.ringMesh.update(),this.teleportMesh.visible&&this.teleportMesh.update(),this.spotLight.visible&&this.spotLight.update()}initBeam(){this.beamMesh=Jhe(this.globalUniforms),this.beamMesh.material.uniforms.auraTexture.value=qJ,this.beamMesh.update=()=>this.updateBeam(),this.scene.add(this.beamMesh)}initPixel(){this.pixelMesh=Hhe(),this.pixelMesh.update=()=>this.updatePixel(),this.scene.add(this.pixelMesh)}initRing(){this.ringMesh=zhe(this.globalUniforms),this.ringMesh.update=()=>this.updateRing(),this.scene.add(this.ringMesh)}initTeleport(){this.teleportMesh=Xhe(this.globalUniforms),this.teleportMesh.update=()=>this.updateTeleport(),this.teleportMesh.visible=!1,this.scene.add(this.teleportMesh)}initSpotLight(){this.spotLight=Yhe(this.globalUniforms),this.spotLight.update=()=>this.updateSpotLight(),this.spotLight.visible=!1,this.scene.add(this.spotLight)}updateBeam(){this.beamMesh&&this.globalUniforms.transitionEffectType.value!==vi.switchItem&&(this.beamMesh.visible=!1)}updatePixel(){if(this.pixelMesh){let e=0;const t=this.pixelMesh.geometry.getAttribute("positions"),r=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount;for(let s=0;s<i;s++)r.getX(s)>.01?(t.setY(s,t.getY(s)+this.pixelMesh.info.velocity[s]),r.setX(s,r.getX(s)/1.3)):(r.setX(s,0),e++);e>=i&&(this.stopUpdatePixelMesh=!0),t.needsUpdate=!0,r.needsUpdate=!0,this.pixelMesh.material.uniforms.cameraBillboardQuaternion.value.copy(this.camera.quaternion)}}updateRing(){if(this.ringMesh){const e=this.ringMesh.geometry.getAttribute("positions"),t=this.ringMesh.geometry.getAttribute("opacity"),r=this.ringMesh.info.particleCount;for(let i=0;i<r;i++)t.getX(i)>.01?(e.setY(i,e.getY(i)+this.ringMesh.info.velocity[i]),t.setX(i,t.getX(i)/1.27)):t.setX(i,0);e.needsUpdate=!0,t.needsUpdate=!0,this.globalUniforms.transitionEffectType.value!==vi.fadeInAvatar&&(this.ringMesh.visible=!1)}}updateTeleport(){if(this.teleportMesh){if(this.globalUniforms.transitionEffectType.value===vi.fadeOutAvatar){const e=this.globalUniforms.fadeOutAvatarTime.value,t=.2;if(e<t){const r=e*(1/t),i=.6,s=5;this.teleportMesh.scale.set(i,r*s,i),this.teleportMesh.position.y=r*s*.35}else this.teleportMesh.scale.x>0?(this.teleportMesh.scale.x=this.teleportMesh.scale.x-.2,this.teleportMesh.scale.z=this.teleportMesh.scale.z-.2):this.teleportMesh.visible=!1}else this.teleportMesh.visible=!1;this.teleportMesh.material.uniforms.cameraBillboardQuaternion.value.copy(this.camera.quaternion)}}updateSpotLight(){this.spotLight&&(this.spotLight.fadeIn?this.spotLight.material.uniforms.opacity.value<1&&(this.spotLight.material.uniforms.opacity.value=1):this.spotLight.material.uniforms.opacity.value>0?this.spotLight.material.uniforms.opacity.value-=.025:(this.spotLight.material.uniforms.opacity.value=0,this.spotLight.visible=!1))}}const eH=new xu,iU=eH.load("/textures/pixel9.png");iU.wrapS=iU.wrapT=cs;const sU=eH.load("/textures/noise3.jpg");sU.wrapS=sU.wrapT=cs;const _t={switchItemDuration:{value:Rw},switchItemTime:{value:Rw},eye:{value:new z},cameraDir:{value:new z},fadeOutAvatarTime:{value:aB},fadeInAvatarTime:{value:rU},transitionEffectType:{value:vi.normal}},QD={pixelTexture:{value:iU},noiseTexture:{value:sU}};class npe extends EventTarget{constructor(){super();tt(this,"setTransitionEffect",t=>{this.transitionEffectType=t});tt(this,"getTransitionEffect",t=>this.transitionEffectType===t);this.cameraDir=new z,this.frameRate=1e3/30,this.initParticle=!1,this.transitionEffectType=null,this.transitionTime=UD,this.update()}setCustomShader(t){t.vertexShader&&(t.vertexShader=t.vertexShader.replace("varying vec3 vViewPosition;",`
      varying vec3 vViewPosition;
      varying vec3 vWorldPosition;
      varying vec3 vSurfaceNormal;
      `),t.vertexShader=t.vertexShader.replace("void main() {",`
      void main() {
        vSurfaceNormal = normalize(normal);
      `),t.vertexShader=t.vertexShader.replace("#include <worldpos_vertex>",`
      #include <worldpos_vertex>
      vWorldPosition = (modelMatrix * vec4( transformed, 1.0 )).xyz;
      `),t.fragmentShader=t.fragmentShader.replace("uniform vec3 litFactor;",`
      uniform vec3 litFactor;
      uniform vec3 cameraDir;
      uniform vec3 eye;
      uniform float switchItemTime;
      uniform float switchItemDuration;
      uniform sampler2D pixelTexture;
      uniform sampler2D noiseTexture;
      uniform float transitionEffectType;

      uniform float fadeInAvatarTime;
      
      varying vec3 vWorldPosition;
      varying vec3 vSurfaceNormal;

      vec4 textureRemap(vec4 In, vec2 InMinMax, vec2 OutMinMax) {
        return OutMinMax.x + (In - InMinMax.x) * (OutMinMax.y - OutMinMax.x) / (InMinMax.y - InMinMax.x);
      }

      float getRim(vec3 normal, float rimStrength, float glowIntensity) {
        vec3 eyeDirection = normalize(eye - vWorldPosition);
        float EdotN = max(0.0, dot(eyeDirection, normal));
        float bodyRim = pow(1. - EdotN, rimStrength);
        return bodyRim * glowIntensity;
      }

      vec3 getPixelColor(float pixelStrength) {
        float pixelUvScale = 2.0;
        vec2 pixelUv = vec2(
          vWorldPosition.x * pixelUvScale * -cameraDir.z + vWorldPosition.z * pixelUvScale * cameraDir.x,
          vWorldPosition.y * pixelUvScale
        );
        float pixel = texture2D(
          pixelTexture, 
          pixelUv
        ).r;
        return mix(vec3(0.0396, 0.768, 0.990), vec3(0.0142, 0.478, 0.710), pixel * pixelStrength);
      }

      float getDissolveLimit(float noiseUvScale, float noiseStrength, float bottomPosition, float avatarHeight, float time) {
        vec2 noiseUv = vec2(
          vWorldPosition.x * noiseUvScale * -cameraDir.z + vWorldPosition.z * noiseUvScale * cameraDir.x,
          vWorldPosition.y * noiseUvScale
        );
        vec4 noise = texture2D(
          noiseTexture, 
          noiseUv
        );
        
        float noiseCutout = textureRemap(noise, vec2(0.0, 1.0), vec2(-noiseStrength, noiseStrength)).r;
        float cutoutHeight = time * avatarHeight + bottomPosition;
        return cutoutHeight + noiseCutout;
      }

      `),t.fragmentShader=t.fragmentShader.replace("gl_FragColor = vec4( col, diffuseColor.a );",`
      gl_FragColor = vec4(col, diffuseColor.a);
      `),t.fragmentShader=t.fragmentShader.replace("gl_FragColor = vec4( col, diffuseColor.a );",`
      //################################################## normal ###############################################################
      if (transitionEffectType < 0.5) { 

      }
      //################################################## switch item ###############################################################
      else if (transitionEffectType < 1.5) { 
        // vec3 pixelColor = getPixelColor(2.0);

        // float timeProgress = switchItemTime / switchItemDuration;
        // float rim = getRim(
        //   vSurfaceNormal, 
        //   mix(0.1, mix(0.1, 5.0, timeProgress), timeProgress), 
        //   mix(50., 10., timeProgress)
        // );
        
        // col = mix(pixelColor * rim, col, timeProgress);
      }
      //################################################## fade out avatar ###############################################################
      else if (transitionEffectType < 2.5) { 
        discard;
      }
      //################################################## loading avatar ###############################################################
      else if (transitionEffectType < 3.5) { 
        discard;
      }
      //################################################## fade in avatar ###############################################################
      else if (transitionEffectType < 4.5) { 
        if (fadeInAvatarTime < 0.5) { // phase 1
          float timer = fadeInAvatarTime * 2.;
          
          float border = 0.02;
          float limit = getDissolveLimit(
            1.2,
            0.1,
            -0.3 - border,
            2.0 + border,
            timer
          );
          
          float upperBound = limit + border;
  
          if (vWorldPosition.y > limit && vWorldPosition.y < upperBound) {

            vec3 pixelColor = getPixelColor(1.5);
        
            float rim = getRim(
              vSurfaceNormal, 
              0.1,
              10.
            );
      
            col = pixelColor * rim;
          }
          else if (vWorldPosition.y >= upperBound) {
            discard;
          }
          else {

            vec3 pixelColor = getPixelColor(1.5);
            
            float rim = getRim(
              vSurfaceNormal, 
              0.1,
              3.0
            );
            col = pixelColor * rim;
          }
        }
        else { // phase 2
          float timer = fadeInAvatarTime * 2. - 1.;
          
          float bottomPosition = -0.3;
          float avatarHeight = 2.0;
          
          float rim = getRim(
            vSurfaceNormal, 
            mix(0.1, 2.0 * timer, timer),
            mix(3.0, 20. * (1. - timer), timer)
          );
          
          float fadeStrength = 10.;
          rim *= pow((vWorldPosition.y - bottomPosition) / (avatarHeight - bottomPosition), timer * fadeStrength);
          
          vec3 pixelColor = getPixelColor(1.5);
          col = mix(pixelColor * rim, col, timer);

        }
      }

      gl_FragColor = vec4( col, diffuseColor.a );
      `),t.uniforms.pixelTexture=QD.pixelTexture,t.uniforms.noiseTexture=QD.noiseTexture,t.uniforms.cameraDir=_t.cameraDir,t.uniforms.eye=_t.eye,t.uniforms.switchItemTime=_t.switchItemTime,t.uniforms.switchItemDuration=_t.switchItemDuration,t.uniforms.transitionEffectType=_t.transitionEffectType,t.uniforms.fadeInAvatarTime=_t.fadeInAvatarTime)}playFadeOutEffect(){_t.transitionEffectType.value=vi.fadeOutAvatar,this.particleEffect.emitSpotLight(),this.particleEffect.emitPixel(),this.particleEffect.emitTeleport(),this.transitionTime=this.frameRate*((_D-aB)/SD),this.initialFadeOutTimer()}playFadeInEffect(){_t.transitionEffectType.value=vi.fadeInAvatar,this.initialFadeInTimer()}playSwitchItemEffect(){_t.switchItemTime.value=Khe,_t.transitionEffectType.value=vi.switchItem,this.transitionTime=UD}setParticle(t,r){this.particleEffect=new tpe(t,r,_t)}initialFadeOutTimer(){_t.fadeOutAvatarTime.value=aB}initialFadeInTimer(){_t.fadeInAvatarTime.value=rU}update(){setInterval(()=>{this.scene&&this.camera&&!this.initParticle&&(this.setParticle(this.scene,this.camera),this.initParticle=!0),this.initParticle&&this.particleEffect.update(),_t.transitionEffectType.value===vi.switchItem?_t.switchItemTime.value<Rw?_t.switchItemTime.value+=jhe:(_t.switchItemTime.value=Rw,_t.transitionEffectType.value=vi.normal,this.setTransitionEffect("normal"),this.dispatchEvent(new Event("fadeintraitend"))):_t.transitionEffectType.value===vi.fadeOutAvatar?(_t.fadeOutAvatarTime.value+=SD,_t.fadeOutAvatarTime.value>_D&&(_t.fadeOutAvatarTime.value=aB,_t.transitionEffectType.value=vi.loadingAvatar)):_t.transitionEffectType.value===vi.loadingAvatar||_t.transitionEffectType.value===vi.fadeInAvatar&&(_t.fadeInAvatarTime.value>.1&&_t.fadeInAvatarTime.value<.5&&(this.particleEffect.emitRing(.5*(1-_t.fadeInAvatarTime.value)),this.particleEffect.emitRespawnPixel()),_t.fadeInAvatarTime.value>=.5&&this.particleEffect.removeSpotLight(),_t.fadeInAvatarTime.value+=qhe,_t.fadeInAvatarTime.value>$he&&(_t.fadeInAvatarTime.value=rU,_t.transitionEffectType.value=vi.normal,this.setTransitionEffect("normal"),this.dispatchEvent(new Event("fadeinavatarend")))),this.camera&&(this.cameraDir.set(0,0,-1),this.cameraDir.applyQuaternion(this.camera.quaternion),this.cameraDir.normalize(),_t.cameraDir.value.copy(this.cameraDir),_t.eye.value.copy(this.camera.position))},this.frameRate)}}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var RD={},oU=function(n){return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},tH=function(n){return new Worker(n)};try{URL.revokeObjectURL(oU(""))}catch{oU=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},tH=function(e){return new Worker(e,{type:"module"})}}var rpe=function(n,e,t,r,i){var s=tH(RD[e]||(RD[e]=oU(n)));return s.onerror=function(o){return i(o.error,null)},s.onmessage=function(o){return i(null,o.data)},s.postMessage(t,r),s},Ft=Uint8Array,vr=Uint16Array,QA=Uint32Array,Wh=new Ft([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Oh=new Ft([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Vm=new Ft([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nH=function(n,e){for(var t=new vr(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new QA(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},rH=nH(Wh,2),TS=rH[0],Mw=rH[1];TS[28]=258,Mw[258]=28;var iH=nH(Oh,0),sH=iH[0],aU=iH[1],Lm=new vr(32768);for(var fn=0;fn<32768;++fn){var el=(fn&43690)>>>1|(fn&21845)<<1;el=(el&52428)>>>2|(el&13107)<<2,el=(el&61680)>>>4|(el&3855)<<4,Lm[fn]=((el&65280)>>>8|(el&255)<<8)>>>1}var Gs=function(n,e,t){for(var r=n.length,i=0,s=new vr(e);i<r;++i)++s[n[i]-1];var o=new vr(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new vr(1<<e);var A=15-e;for(i=0;i<r;++i)if(n[i])for(var l=i<<4|n[i],c=e-n[i],u=o[n[i]-1]++<<c,f=u|(1<<c)-1;u<=f;++u)a[Lm[u]>>>A]=l}else for(a=new vr(r),i=0;i<r;++i)n[i]&&(a[i]=Lm[o[n[i]-1]++]>>>15-n[i]);return a},RA=new Ft(288);for(var fn=0;fn<144;++fn)RA[fn]=8;for(var fn=144;fn<256;++fn)RA[fn]=9;for(var fn=256;fn<280;++fn)RA[fn]=7;for(var fn=280;fn<288;++fn)RA[fn]=8;var mh=new Ft(32);for(var fn=0;fn<32;++fn)mh[fn]=5;var oH=Gs(RA,9,0),aH=Gs(RA,9,1),AH=Gs(mh,5,0),lH=Gs(mh,5,1),AB=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},xs=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},lB=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},d0=function(n){return(n/8|0)+(n&7&&1)},Js=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof vr?vr:n instanceof QA?QA:Ft)(t-e);return r.set(n.subarray(e,t)),r},h0=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Ft(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Ft(r*3));var o=function(K){var ce=e.length;if(K>ce){var le=new Ft(Math.max(ce*2,K));le.set(e),e=le}},a=t.f||0,A=t.p||0,l=t.b||0,c=t.l,u=t.d,f=t.m,d=t.n,h=r*8;do{if(!c){t.f=a=xs(n,A,1);var p=xs(n,A+1,3);if(A+=3,p)if(p==1)c=aH,u=lH,f=9,d=5;else if(p==2){var y=xs(n,A,31)+257,w=xs(n,A+10,15)+4,C=y+xs(n,A+5,31)+1;A+=14;for(var b=new Ft(C),F=new Ft(19),I=0;I<w;++I)F[Vm[I]]=xs(n,A+I*3,7);A+=w*3;for(var S=AB(F),T=(1<<S)-1,H=Gs(F,S,1),I=0;I<C;){var X=H[xs(n,A,T)];A+=X&15;var m=X>>>4;if(m<16)b[I++]=m;else{var Q=0,B=0;for(m==16?(B=3+xs(n,A,3),A+=2,Q=b[I-1]):m==17?(B=3+xs(n,A,7),A+=3):m==18&&(B=11+xs(n,A,127),A+=7);B--;)b[I++]=Q}}var E=b.subarray(0,y),R=b.subarray(y);f=AB(E),d=AB(R),c=Gs(E,f,1),u=Gs(R,d,1)}else throw"invalid block type";else{var m=d0(A)+4,g=n[m-4]|n[m-3]<<8,v=m+g;if(v>r){if(s)throw"unexpected EOF";break}i&&o(l+g),e.set(n.subarray(m,v),l),t.b=l+=g,t.p=A=v*8;continue}if(A>h){if(s)throw"unexpected EOF";break}}i&&o(l+131072);for(var k=(1<<f)-1,M=(1<<d)-1,L=A;;L=A){var Q=c[lB(n,A)&k],Z=Q>>>4;if(A+=Q&15,A>h){if(s)throw"unexpected EOF";break}if(!Q)throw"invalid length/literal";if(Z<256)e[l++]=Z;else if(Z==256){L=A,c=null;break}else{var P=Z-254;if(Z>264){var I=Z-257,U=Wh[I];P=xs(n,A,(1<<U)-1)+TS[I],A+=U}var G=u[lB(n,A)&M],oe=G>>>4;if(!G)throw"invalid distance";A+=G&15;var R=sH[oe];if(oe>3){var U=Oh[oe];R+=lB(n,A)&(1<<U)-1,A+=U}if(A>h){if(s)throw"unexpected EOF";break}i&&o(l+131072);for(var D=l+P;l<D;l+=4)e[l]=e[l-R],e[l+1]=e[l+1-R],e[l+2]=e[l+2-R],e[l+3]=e[l+3-R];l=D}}t.l=c,t.p=L,t.b=l,c&&(a=1,t.m=f,t.d=u,t.n=d)}while(!a);return l==e.length?e:Js(e,0,l)},$o=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>>8},Ff=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>>8,n[r+2]|=t>>>16},cB=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return[gA,0];if(i==1){var o=new Ft(t[0].s+1);return o[t[0].s]=1,[o,1]}t.sort(function(C,b){return C.f-b.f}),t.push({s:-1,f:25001});var a=t[0],A=t[1],l=0,c=1,u=2;for(t[0]={s:-1,f:a.f+A.f,l:a,r:A};c!=i-1;)a=t[t[l].f<t[u].f?l++:u++],A=t[l!=c&&t[l].f<t[u].f?l++:u++],t[c++]={s:-1,f:a.f+A.f,l:a,r:A};for(var f=s[0].s,r=1;r<i;++r)s[r].s>f&&(f=s[r].s);var d=new vr(f+1),h=Tw(t[c-1],d,0);if(h>e){var r=0,p=0,m=h-e,g=1<<m;for(s.sort(function(b,F){return d[F.s]-d[b.s]||b.f-F.f});r<i;++r){var v=s[r].s;if(d[v]>e)p+=g-(1<<h-d[v]),d[v]=e;else break}for(p>>>=m;p>0;){var y=s[r].s;d[y]<e?p-=1<<e-d[y]++-1:++r}for(;r>=0&&p;--r){var w=s[r].s;d[w]==e&&(--d[w],++p)}h=e}return[new Ft(d),h]},Tw=function(n,e,t){return n.s==-1?Math.max(Tw(n.l,e,t+1),Tw(n.r,e,t+1)):e[n.s]=t},AU=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new vr(++e),r=0,i=n[0],s=1,o=function(A){t[r++]=A},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return[t.subarray(0,r),e]},Ef=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Gg=function(n,e,t){var r=t.length,i=d0(e+2);n[i]=r&255,n[i+1]=r>>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},lU=function(n,e,t,r,i,s,o,a,A,l,c){$o(e,c++,t),++i[256];for(var u=cB(i,15),f=u[0],d=u[1],h=cB(s,15),p=h[0],m=h[1],g=AU(f),v=g[0],y=g[1],w=AU(p),C=w[0],b=w[1],F=new vr(19),I=0;I<v.length;++I)F[v[I]&31]++;for(var I=0;I<C.length;++I)F[C[I]&31]++;for(var S=cB(F,7),T=S[0],H=S[1],X=19;X>4&&!T[Vm[X-1]];--X);var Q=l+5<<3,B=Ef(i,RA)+Ef(s,mh)+o,E=Ef(i,f)+Ef(s,p)+o+14+3*X+Ef(F,T)+(2*F[16]+3*F[17]+7*F[18]);if(Q<=B&&Q<=E)return Gg(e,c,n.subarray(A,A+l));var R,k,M,L;if($o(e,c,1+(E<B)),c+=2,E<B){R=Gs(f,d,0),k=f,M=Gs(p,m,0),L=p;var Z=Gs(T,H,0);$o(e,c,y-257),$o(e,c+5,b-1),$o(e,c+10,X-4),c+=14;for(var I=0;I<X;++I)$o(e,c+3*I,T[Vm[I]]);c+=3*X;for(var P=[v,C],U=0;U<2;++U)for(var G=P[U],I=0;I<G.length;++I){var oe=G[I]&31;$o(e,c,Z[oe]),c+=T[oe],oe>15&&($o(e,c,G[I]>>>5&127),c+=G[I]>>>12)}}else R=oH,k=RA,M=AH,L=mh;for(var I=0;I<a;++I)if(r[I]>255){var oe=r[I]>>>18&31;Ff(e,c,R[oe+257]),c+=k[oe+257],oe>7&&($o(e,c,r[I]>>>23&31),c+=Wh[oe]);var D=r[I]&31;Ff(e,c,M[D]),c+=L[D],D>3&&(Ff(e,c,r[I]>>>5&8191),c+=Oh[D])}else Ff(e,c,R[r[I]]),c+=k[r[I]];return Ff(e,c,R[256]),c+k[256]},cH=new QA([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),gA=new Ft(0),uH=function(n,e,t,r,i,s){var o=n.length,a=new Ft(r+o+5*(1+Math.ceil(o/7e3))+i),A=a.subarray(r,a.length-i),l=0;if(!e||o<8)for(var c=0;c<=o;c+=65535){var u=c+65535;u<o?l=Gg(A,l,n.subarray(c,u)):(A[c]=s,l=Gg(A,l,n.subarray(c,o)))}else{for(var f=cH[e-1],d=f>>>13,h=f&8191,p=(1<<t)-1,m=new vr(32768),g=new vr(p+1),v=Math.ceil(t/3),y=2*v,w=function(re){return(n[re]^n[re+1]<<v^n[re+2]<<y)&p},C=new QA(25e3),b=new vr(288),F=new vr(32),I=0,S=0,c=0,T=0,H=0,X=0;c<o;++c){var Q=w(c),B=c&32767,E=g[Q];if(m[B]=E,g[Q]=B,H<=c){var R=o-c;if((I>7e3||T>24576)&&R>423){l=lU(n,A,0,C,b,F,S,T,X,c-X,l),T=I=S=0,X=c;for(var k=0;k<286;++k)b[k]=0;for(var k=0;k<30;++k)F[k]=0}var M=2,L=0,Z=h,P=B-E&32767;if(R>2&&Q==w(c-P))for(var U=Math.min(d,R)-1,G=Math.min(32767,c),oe=Math.min(258,R);P<=G&&--Z&&B!=E;){if(n[c+M]==n[c+M-P]){for(var D=0;D<oe&&n[c+D]==n[c+D-P];++D);if(D>M){if(M=D,L=P,D>U)break;for(var K=Math.min(P,D-2),ce=0,k=0;k<K;++k){var le=c-P+k+32768&32767,he=m[le],$=le-he+32768&32767;$>ce&&(ce=$,E=le)}}}B=E,E=m[B],P+=B-E+32768&32767}if(L){C[T++]=268435456|Mw[M]<<18|aU[L];var ae=Mw[M]&31,te=aU[L]&31;S+=Wh[ae]+Oh[te],++b[257+ae],++F[te],H=c+M,++I}else C[T++]=n[c],++b[n[c]]}}l=lU(n,A,s,C,b,F,S,T,X,c-X,l),!s&&l&7&&(l=Gg(A,l+1,gA))}return Js(a,0,r+d0(l)+i)},fH=function(){for(var n=new QA(256),e=0;e<256;++e){for(var t=e,r=9;--r;)t=(t&1&&3988292384)^t>>>1;n[e]=t}return n}(),Zh=function(){var n=-1;return{p:function(e){for(var t=n,r=0;r<e.length;++r)t=fH[t&255^e[r]]^t>>>8;n=t},d:function(){return~n}}},NS=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|n>>>8<<16|(e&255)<<8|e>>>8}}},Fu=function(n,e,t,r,i){return uH(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,r,!i)},p0=function(n,e){var t={};for(var r in n)t[r]=n[r];for(var r in e)t[r]=e[r];return t},MD=function(n,e,t){for(var r=n(),i=n.toString(),s=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/ /g,"").split(","),o=0;o<r.length;++o){var a=r[o],A=s[o];if(typeof a=="function"){e+=";"+A+"=";var l=a.toString();if(a.prototype)if(l.indexOf("[native code]")!=-1){var c=l.indexOf(" ",8)+1;e+=l.slice(c,l.indexOf("(",c))}else{e+=l;for(var u in a.prototype)e+=";"+A+".prototype."+u+"="+a.prototype[u].toString()}else e+=l}else t[A]=a}return[e,t]},cy=[],ipe=function(n){var e=[];for(var t in n)(n[t]instanceof Ft||n[t]instanceof vr||n[t]instanceof QA)&&e.push((n[t]=new n[t].constructor(n[t])).buffer);return e},dH=function(n,e,t,r){var i;if(!cy[t]){for(var s="",o={},a=n.length-1,A=0;A<a;++A)i=MD(n[A],s,o),s=i[0],o=i[1];cy[t]=MD(n[a],s,o)}var l=p0({},cy[t][1]);return rpe(cy[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,l,ipe(l),r)},Gh=function(){return[Ft,vr,QA,Wh,Oh,Vm,TS,sH,aH,lH,Lm,Gs,AB,xs,lB,d0,Js,h0,Xh,lc,kS]},Jh=function(){return[Ft,vr,QA,Wh,Oh,Vm,Mw,aU,oH,RA,AH,mh,Lm,cH,gA,Gs,$o,Ff,cB,Tw,AU,Ef,Gg,lU,d0,Js,uH,Fu,g0,lc]},hH=function(){return[DS,LS,Ht,Zh,fH]},pH=function(){return[VS,vH]},gH=function(){return[PS,Ht,NS]},mH=function(){return[yH]},lc=function(n){return postMessage(n,[n.buffer])},kS=function(n){return n&&n.size&&new Ft(n.size)},Hh=function(n,e,t,r,i,s){var o=dH(t,r,i,function(a,A){o.terminate(),s(a,A)});return o.postMessage([n,e],e.consume?[n.buffer]:[]),function(){o.terminate()}},js=function(n){return n.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return n.push(e.data[0],e.data[1])}},zh=function(n,e,t,r,i){var s,o=dH(n,r,i,function(a,A){a?(o.terminate(),e.ondata.call(e,a)):(A[1]&&o.terminate(),e.ondata.call(e,a,A[0],A[1]))});o.postMessage(t),e.push=function(a,A){if(s)throw"stream finished";if(!e.ondata)throw"no stream handler";o.postMessage([a,s=A],[a.buffer])},e.terminate=function(){o.terminate()}},Ai=function(n,e){return n[e]|n[e+1]<<8},Gn=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},r1=function(n,e){return Gn(n,e)+Gn(n,e+4)*4294967296},Ht=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},DS=function(n,e){var t=e.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=e.level<2?4:e.level==9?2:0,n[9]=3,e.mtime!=0&&Ht(n,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){n[3]=8;for(var r=0;r<=t.length;++r)n[r+10]=t.charCodeAt(r)}},VS=function(n){if(n[0]!=31||n[1]!=139||n[2]!=8)throw"invalid gzip data";var e=n[3],t=10;e&4&&(t+=n[10]|(n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},vH=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},LS=function(n){return 10+(n.filename&&n.filename.length+1||0)},PS=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=r<<6|(r?32-2*r:1)},yH=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function WS(n,e){return!e&&typeof n=="function"&&(e=n,n={}),this.ondata=e,n}var Sa=function(){function n(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return n.prototype.p=function(e,t){this.ondata(Fu(e,this.o,0,0,!t),t)},n.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},n}(),BH=function(){function n(e,t){zh([Jh,function(){return[js,Sa]}],this,WS.call(this,e,t),function(r){var i=new Sa(r.data);onmessage=js(i)},6)}return n}();function wH(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Hh(n,e,[Jh],function(r){return lc(g0(r.data[0],r.data[1]))},0,t)}function g0(n,e){return Fu(n,e||{},0,0)}var Ri=function(){function n(e){this.s={},this.p=new Ft(0),this.ondata=e}return n.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,r=new Ft(t+e.length);r.set(this.p),r.set(e,t),this.p=r},n.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,r=h0(this.p,this.o,this.s);this.ondata(Js(r,t,this.s.b),this.d),this.o=Js(r,this.s.b-32768),this.s.b=this.o.length,this.p=Js(this.p,this.s.p/8|0),this.s.p&=7},n.prototype.push=function(e,t){this.e(e),this.c(t)},n}(),OS=function(){function n(e){this.ondata=e,zh([Gh,function(){return[js,Ri]}],this,0,function(){var t=new Ri;onmessage=js(t)},7)}return n}();function ZS(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Hh(n,e,[Gh],function(r){return lc(Xh(r.data[0],kS(r.data[1])))},1,t)}function Xh(n,e){return h0(n,e)}var Nw=function(){function n(e,t){this.c=Zh(),this.l=0,this.v=1,Sa.call(this,e,t)}return n.prototype.push=function(e,t){Sa.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var r=Fu(e,this.o,this.v&&LS(this.o),t&&8,!t);this.v&&(DS(r,this.o),this.v=0),t&&(Ht(r,r.length-8,this.c.d()),Ht(r,r.length-4,this.l)),this.ondata(r,t)},n}(),TD=function(){function n(e,t){zh([Jh,hH,function(){return[js,Sa,Nw]}],this,WS.call(this,e,t),function(r){var i=new Nw(r.data);onmessage=js(i)},8)}return n}();function ND(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Hh(n,e,[Jh,hH,function(){return[kw]}],function(r){return lc(kw(r.data[0],r.data[1]))},2,t)}function kw(n,e){e||(e={});var t=Zh(),r=n.length;t.p(n);var i=Fu(n,e,LS(e),8),s=i.length;return DS(i,e),Ht(i,s-8,t.d()),Ht(i,s-4,r),i}var Dw=function(){function n(e){this.v=1,Ri.call(this,e)}return n.prototype.push=function(e,t){if(Ri.prototype.e.call(this,e),this.v){var r=this.p.length>3?VS(this.p):4;if(r>=this.p.length&&!t)return;this.p=this.p.subarray(r),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Ri.prototype.c.call(this,t)},n}(),CH=function(){function n(e){this.ondata=e,zh([Gh,pH,function(){return[js,Ri,Dw]}],this,0,function(){var t=new Dw;onmessage=js(t)},9)}return n}();function bH(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Hh(n,e,[Gh,pH,function(){return[Vw]}],function(r){return lc(Vw(r.data[0]))},3,t)}function Vw(n,e){return h0(n.subarray(VS(n),-8),e||new Ft(vH(n)))}var cU=function(){function n(e,t){this.c=NS(),this.v=1,Sa.call(this,e,t)}return n.prototype.push=function(e,t){Sa.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e);var r=Fu(e,this.o,this.v&&2,t&&4,!t);this.v&&(PS(r,this.o),this.v=0),t&&Ht(r,r.length-4,this.c.d()),this.ondata(r,t)},n}(),spe=function(){function n(e,t){zh([Jh,gH,function(){return[js,Sa,cU]}],this,WS.call(this,e,t),function(r){var i=new cU(r.data);onmessage=js(i)},10)}return n}();function ope(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Hh(n,e,[Jh,gH,function(){return[uU]}],function(r){return lc(uU(r.data[0],r.data[1]))},4,t)}function uU(n,e){e||(e={});var t=NS();t.p(n);var r=Fu(n,e,2,4);return PS(r,e),Ht(r,r.length-4,t.d()),r}var Lw=function(){function n(e){this.v=1,Ri.call(this,e)}return n.prototype.push=function(e,t){if(Ri.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Ri.prototype.c.call(this,t)},n}(),xH=function(){function n(e){this.ondata=e,zh([Gh,mH,function(){return[js,Ri,Lw]}],this,0,function(){var t=new Lw;onmessage=js(t)},11)}return n}();function IH(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Hh(n,e,[Gh,mH,function(){return[Pm]}],function(r){return lc(Pm(r.data[0],kS(r.data[1])))},5,t)}function Pm(n,e){return h0((yH(n),n.subarray(2,-4)),e)}var FH=function(){function n(e){this.G=Dw,this.I=Ri,this.Z=Lw,this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var r=new Ft(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var i=this,s=function(){i.ondata.apply(i,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(s):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(s):new this.Z(s),this.s.push(this.p,t),this.p=null}}},n}(),ape=function(){function n(e){this.G=CH,this.I=OS,this.Z=xH,this.ondata=e}return n.prototype.push=function(e,t){FH.prototype.push.call(this,e,t)},n}();function Ape(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return n[0]==31&&n[1]==139&&n[2]==8?bH(n,e,t):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?ZS(n,e,t):IH(n,e,t)}function lpe(n,e){return n[0]==31&&n[1]==139&&n[2]==8?Vw(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?Xh(n,e):Pm(n,e)}var GS=function(n,e,t,r){for(var i in n){var s=n[i],o=e+i;s instanceof Ft?t[o]=[s,r]:Array.isArray(s)?t[o]=[s[0],p0(r,s[1])]:GS(s,o+"/",t,r)}},kD=typeof TextEncoder<"u"&&new TextEncoder,fU=typeof TextDecoder<"u"&&new TextDecoder,EH=0;try{fU.decode(gA,{stream:!0}),EH=1}catch{}var UH=function(n){for(var e="",t=0;;){var r=n[t++],i=(r>127)+(r>223)+(r>239);if(t+i>n.length)return[e,Js(n,t-1)];i?i==3?(r=((r&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):i&1?e+=String.fromCharCode((r&31)<<6|n[t++]&63):e+=String.fromCharCode((r&15)<<12|(n[t++]&63)<<6|n[t++]&63):e+=String.fromCharCode(r)}},cpe=function(){function n(e){this.ondata=e,EH?this.t=new TextDecoder:this.p=gA}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var r=new Ft(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var i=UH(r),s=i[0],o=i[1];if(t){if(o.length)throw"invalid utf-8 data";this.p=null}else this.p=o;this.ondata(s,t)},n}(),upe=function(){function n(e){this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata($l(e),this.d=t||!1)},n}();function $l(n,e){if(e){for(var t=new Ft(n.length),r=0;r<n.length;++r)t[r]=n.charCodeAt(r);return t}if(kD)return kD.encode(n);for(var i=n.length,s=new Ft(n.length+(n.length>>1)),o=0,a=function(c){s[o++]=c},r=0;r<i;++r){if(o+5>s.length){var A=new Ft(o+8+(i-r<<1));A.set(s),s=A}var l=n.charCodeAt(r);l<128||e?a(l):l<2048?(a(192|l>>6),a(128|l&63)):l>55295&&l<57344?(l=65536+(l&1023<<10)|n.charCodeAt(++r)&1023,a(240|l>>18),a(128|l>>12&63),a(128|l>>6&63),a(128|l&63)):(a(224|l>>12),a(128|l>>6&63),a(128|l&63))}return Js(s,0,o)}function JS(n,e){if(e){for(var t="",r=0;r<n.length;r+=16384)t+=String.fromCharCode.apply(null,n.subarray(r,r+16384));return t}else{if(fU)return fU.decode(n);var i=UH(n),s=i[0],o=i[1];if(o.length)throw"invalid utf-8 data";return s}}var _H=function(n){return n==1?3:n<6?2:n==9?1:0},SH=function(n,e){return e+30+Ai(n,e+26)+Ai(n,e+28)},QH=function(n,e,t){var r=Ai(n,e+28),i=JS(n.subarray(e+46,e+46+r),!(Ai(n,e+8)&2048)),s=e+46+r,o=Gn(n,e+20),a=t&&o==4294967295?RH(n,s):[o,Gn(n,e+24),Gn(n,e+42)],A=a[0],l=a[1],c=a[2];return[Ai(n,e+10),A,l,i,s+Ai(n,e+30)+Ai(n,e+32),c]},RH=function(n,e){for(;Ai(n,e)!=1;e+=4+Ai(n,e+2));return[r1(n,e+12),r1(n,e+4),r1(n,e+20)]},Wl=function(n){var e=0;if(n)for(var t in n){var r=n[t].length;if(r>65535)throw"extra field too long";e+=r+4}return e},vh=function(n,e,t,r,i,s,o,a){var A=r.length,l=t.extra,c=a&&a.length,u=Wl(l);Ht(n,e,o!=null?33639248:67324752),e+=4,o!=null&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(s==null&&8),n[e++]=i&&8,n[e++]=t.compression&255,n[e++]=t.compression>>8;var f=new Date(t.mtime==null?Date.now():t.mtime),d=f.getFullYear()-1980;if(d<0||d>119)throw"date not in range 1980-2099";if(Ht(n,e,d<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>>1),e+=4,s!=null&&(Ht(n,e,t.crc),Ht(n,e+4,s),Ht(n,e+8,t.size)),Ht(n,e+12,A),Ht(n,e+14,u),e+=16,o!=null&&(Ht(n,e,c),Ht(n,e+6,t.attrs),Ht(n,e+10,o),e+=14),n.set(r,e),e+=A,u)for(var h in l){var p=l[h],m=p.length;Ht(n,e,+h),Ht(n,e+2,m),n.set(p,e+4),e+=4+m}return c&&(n.set(a,e),e+=c),e},HS=function(n,e,t,r,i){Ht(n,e,101010256),Ht(n,e+8,t),Ht(n,e+10,t),Ht(n,e+12,r),Ht(n,e+16,i)},Wm=function(){function n(e){this.filename=e,this.c=Zh(),this.size=0,this.compression=0}return n.prototype.process=function(e,t){this.ondata(null,e,t)},n.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},n}(),fpe=function(){function n(e,t){var r=this;t||(t={}),Wm.call(this,e),this.d=new Sa(t,function(i,s){r.ondata(null,i,s)}),this.compression=8,this.flag=_H(t.level)}return n.prototype.process=function(e,t){try{this.d.push(e,t)}catch(r){this.ondata(r,null,t)}},n.prototype.push=function(e,t){Wm.prototype.push.call(this,e,t)},n}(),dpe=function(){function n(e,t){var r=this;t||(t={}),Wm.call(this,e),this.d=new BH(t,function(i,s,o){r.ondata(i,s,o)}),this.compression=8,this.flag=_H(t.level),this.terminate=this.d.terminate}return n.prototype.process=function(e,t){this.d.push(e,t)},n.prototype.push=function(e,t){Wm.prototype.push.call(this,e,t)},n}(),hpe=function(){function n(e){this.ondata=e,this.u=[],this.d=1}return n.prototype.add=function(e){var t=this;if(this.d&2)throw"stream finished";var r=$l(e.filename),i=r.length,s=e.comment,o=s&&$l(s),a=i!=e.filename.length||o&&s.length!=o.length,A=i+Wl(e.extra)+30;if(i>65535)throw"filename too long";var l=new Ft(A);vh(l,0,e,r,a);var c=[l],u=function(){for(var m=0,g=c;m<g.length;m++){var v=g[m];t.ondata(null,v,!1)}c=[]},f=this.d;this.d=0;var d=this.u.length,h=p0(e,{f:r,u:a,o,t:function(){e.terminate&&e.terminate()},r:function(){if(u(),f){var m=t.u[d+1];m?m.r():t.d=1}f=1}}),p=0;e.ondata=function(m,g,v){if(m)t.ondata(m,g,v),t.terminate();else if(p+=g.length,c.push(g),v){var y=new Ft(16);Ht(y,0,134695760),Ht(y,4,e.crc),Ht(y,8,p),Ht(y,12,e.size),c.push(y),h.c=p,h.b=A+p+16,h.crc=e.crc,h.size=e.size,f&&h.r(),f=1}else f&&u()},this.u.push(h)},n.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},n.prototype.e=function(){for(var e=0,t=0,r=0,i=0,s=this.u;i<s.length;i++){var o=s[i];r+=46+o.f.length+Wl(o.extra)+(o.o?o.o.length:0)}for(var a=new Ft(r+22),A=0,l=this.u;A<l.length;A++){var o=l[A];vh(a,e,o,o.f,o.u,o.c,t,o.o),e+=46+o.f.length+Wl(o.extra)+(o.o?o.o.length:0),t+=o.b}HS(a,e,this.u.length,r,t),this.ondata(null,a,!0),this.d=2},n.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var r=t[e];r.t()}this.d=2},n}();function ppe(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";var r={};GS(n,"",r,e);var i=Object.keys(r),s=i.length,o=0,a=0,A=s,l=new Array(s),c=[],u=function(){for(var p=0;p<c.length;++p)c[p]()},f=function(){var p=new Ft(a+22),m=o,g=a-o;a=0;for(var v=0;v<A;++v){var y=l[v];try{var w=y.c.length;vh(p,a,y,y.f,y.u,w);var C=30+y.f.length+Wl(y.extra),b=a+C;p.set(y.c,b),vh(p,o,y,y.f,y.u,w,a,y.m),o+=16+C+(y.m?y.m.length:0),a=b+w}catch(F){return t(F,null)}}HS(p,o,l.length,g,m),t(null,p)};s||f();for(var d=function(p){var m=i[p],g=r[m],v=g[0],y=g[1],w=Zh(),C=v.length;w.p(v);var b=$l(m),F=b.length,I=y.comment,S=I&&$l(I),T=S&&S.length,H=Wl(y.extra),X=y.level==0?0:8,Q=function(B,E){if(B)u(),t(B,null);else{var R=E.length;l[p]=p0(y,{size:C,crc:w.d(),c:E,f:b,m:S,u:F!=m.length||S&&I.length!=T,compression:X}),o+=30+F+H+R,a+=76+2*(F+H)+(T||0)+R,--s||f()}};if(F>65535&&Q("filename too long",null),!X)Q(null,v);else if(C<16e4)try{Q(null,g0(v,y))}catch(B){Q(B,null)}else c.push(wH(v,y,Q))},h=0;h<A;++h)d(h);return u}function gpe(n,e){e||(e={});var t={},r=[];GS(n,"",t,e);var i=0,s=0;for(var o in t){var a=t[o],A=a[0],l=a[1],c=l.level==0?0:8,u=$l(o),f=u.length,d=l.comment,h=d&&$l(d),p=h&&h.length,m=Wl(l.extra);if(f>65535)throw"filename too long";var g=c?g0(A,l):A,v=g.length,y=Zh();y.p(A),r.push(p0(l,{size:A.length,crc:y.d(),c:g,f:u,m:h,u:f!=o.length||h&&d.length!=p,o:i,compression:c})),i+=30+f+m+v,s+=76+2*(f+m)+(p||0)+v}for(var w=new Ft(s+22),C=i,b=s-i,F=0;F<r.length;++F){var u=r[F];vh(w,u.o,u,u.f,u.u,u.c.length);var I=30+u.f.length+Wl(u.extra);w.set(u.c,u.o+I),vh(w,i,u,u.f,u.u,u.c.length,u.o,u.m),i+=16+I+(u.m?u.m.length:0)}return HS(w,i,r.length,b,C),w}var MH=function(){function n(){}return n.prototype.push=function(e,t){this.ondata(null,e,t)},n.compression=0,n}(),mpe=function(){function n(){var e=this;this.i=new Ri(function(t,r){e.ondata(null,t,r)})}return n.prototype.push=function(e,t){try{this.i.push(e,t)}catch(r){this.ondata(r,e,t)}},n.compression=8,n}(),vpe=function(){function n(e,t){var r=this;t<32e4?this.i=new Ri(function(i,s){r.ondata(null,i,s)}):(this.i=new OS(function(i,s,o){r.ondata(i,s,o)}),this.terminate=this.i.terminate)}return n.prototype.push=function(e,t){this.i.terminate&&(e=Js(e,0)),this.i.push(e,t)},n.compression=8,n}(),ype=function(){function n(e){this.onfile=e,this.k=[],this.o={0:MH},this.p=gA}return n.prototype.push=function(e,t){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var i=Math.min(this.c,e.length),s=e.subarray(0,i);if(this.c-=i,this.d?this.d.push(s,!this.c):this.k[0].push(s),e=e.subarray(i),e.length)return this.push(e,t)}else{var o=0,a=0,A=void 0,l=void 0;this.p.length?e.length?(l=new Ft(this.p.length+e.length),l.set(this.p),l.set(e,this.p.length)):l=this.p:l=e;for(var c=l.length,u=this.c,f=u&&this.d,d=function(){var g,v=Gn(l,a);if(v==67324752){o=1,A=a,h.d=null,h.c=0;var y=Ai(l,a+6),w=Ai(l,a+8),C=y&2048,b=y&8,F=Ai(l,a+26),I=Ai(l,a+28);if(c>a+30+F+I){var S=[];h.k.unshift(S),o=2;var T=Gn(l,a+18),H=Gn(l,a+22),X=JS(l.subarray(a+30,a+=30+F),!C);T==4294967295?(g=b?[-2]:RH(l,a),T=g[0],H=g[1]):b&&(T=-1),a+=I,h.c=T;var Q,B={name:X,compression:w,start:function(){if(!B.ondata)throw"no callback";if(!T)B.ondata(null,gA,!0);else{var E=r.o[w];if(!E)throw"unknown compression type "+w;Q=T<0?new E(X):new E(X,T,H),Q.ondata=function(L,Z,P){B.ondata(L,Z,P)};for(var R=0,k=S;R<k.length;R++){var M=k[R];Q.push(M,!1)}r.k[0]==S&&r.c?r.d=Q:Q.push(gA,!0)}},terminate:function(){Q&&Q.terminate&&Q.terminate()}};T>=0&&(B.size=T,B.originalSize=H),h.onfile(B)}return"break"}else if(u){if(v==134695760)return A=a+=12+(u==-2&&8),o=3,h.c=0,"break";if(v==33639248)return A=a-=4,o=3,h.c=0,"break"}},h=this;a<c-4;++a){var p=d();if(p==="break")break}if(this.p=gA,u<0){var m=o?l.subarray(0,A-12-(u==-2&&8)-(Gn(l,A-16)==134695760&&4)):l.subarray(0,a);f?f.push(m,!!o):this.k[+(o==2)].push(m)}if(o&2)return this.push(l.subarray(a),t);this.p=l.subarray(a)}if(t){if(this.c)throw"invalid zip file";this.p=null}},n.prototype.register=function(e){this.o[e.compression]=e},n}();function Bpe(n,e){if(typeof e!="function")throw"no callback";for(var t=[],r=function(){for(var f=0;f<t.length;++f)t[f]()},i={},s=n.length-22;Gn(n,s)!=101010256;--s)if(!s||n.length-s>65558){e("invalid zip file",null);return}var o=Ai(n,s+8);o||e(null,{});var a=o,A=Gn(n,s+16),l=A==4294967295;if(l){if(s=Gn(n,s-12),Gn(n,s)!=101075792){e("invalid zip file",null);return}a=o=Gn(n,s+32),A=Gn(n,s+48)}for(var c=function(f){var d=QH(n,A,l),h=d[0],p=d[1],m=d[2],g=d[3],v=d[4],y=d[5],w=SH(n,y);A=v;var C=function(F,I){F?(r(),e(F,null)):(i[g]=I,--o||e(null,i))};if(!h)C(null,Js(n,w,w+p));else if(h==8){var b=n.subarray(w,w+p);if(p<32e4)try{C(null,Xh(b,new Ft(m)))}catch(F){C(F,null)}else t.push(ZS(b,{size:m},C))}else C("unknown compression type "+h,null)},u=0;u<a;++u)c();return r}function wpe(n){for(var e={},t=n.length-22;Gn(n,t)!=101010256;--t)if(!t||n.length-t>65558)throw"invalid zip file";var r=Ai(n,t+8);if(!r)return{};var i=Gn(n,t+16),s=i==4294967295;if(s){if(t=Gn(n,t-12),Gn(n,t)!=101075792)throw"invalid zip file";r=Gn(n,t+32),i=Gn(n,t+48)}for(var o=0;o<r;++o){var a=QH(n,i,s),A=a[0],l=a[1],c=a[2],u=a[3],f=a[4],d=a[5],h=SH(n,d);if(i=f,!A)e[u]=Js(n,h,h+l);else if(A==8)e[u]=Xh(n.subarray(h,h+l),new Ft(c));else throw"unknown compression type "+A}return e}const Cpe=Object.freeze(Object.defineProperty({__proto__:null,AsyncCompress:TD,AsyncDecompress:ape,AsyncDeflate:BH,AsyncGunzip:CH,AsyncGzip:TD,AsyncInflate:OS,AsyncUnzipInflate:vpe,AsyncUnzlib:xH,AsyncZipDeflate:dpe,AsyncZlib:spe,Compress:Nw,DecodeUTF8:cpe,Decompress:FH,Deflate:Sa,EncodeUTF8:upe,Gunzip:Dw,Gzip:Nw,Inflate:Ri,Unzip:ype,UnzipInflate:mpe,UnzipPassThrough:MH,Unzlib:Lw,Zip:hpe,ZipDeflate:fpe,ZipPassThrough:Wm,Zlib:cU,compress:ND,compressSync:kw,decompress:Ape,decompressSync:lpe,deflate:wH,deflateSync:g0,gunzip:bH,gunzipSync:Vw,gzip:ND,gzipSync:kw,inflate:ZS,inflateSync:Xh,strFromU8:JS,strToU8:$l,unzip:Bpe,unzipSync:wpe,unzlib:IH,unzlibSync:Pm,zip:ppe,zipSync:gpe,zlib:ope,zlibSync:uU},Symbol.toStringTag,{value:"Module"}));function TH(n,e,t){const r=t.length-n-1;if(e>=t[r])return r-1;if(e<=t[n])return n;let i=n,s=r,o=Math.floor((i+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:i=o,o=Math.floor((i+s)/2);return o}function bpe(n,e,t,r){const i=[],s=[],o=[];i[0]=1;for(let a=1;a<=t;++a){s[a]=e-r[n+1-a],o[a]=r[n+a]-e;let A=0;for(let l=0;l<a;++l){const c=o[l+1],u=s[a-l],f=i[l]/(c+u);i[l]=A+c*f,A=u*f}i[a]=A}return i}function xpe(n,e,t,r){const i=TH(n,r,e),s=bpe(i,r,n,e),o=new Vt(0,0,0,0);for(let a=0;a<=n;++a){const A=t[i-n+a],l=s[a],c=A.w*l;o.x+=A.x*c,o.y+=A.y*c,o.z+=A.z*c,o.w+=A.w*l}return o}function Ipe(n,e,t,r,i){const s=[];for(let u=0;u<=t;++u)s[u]=0;const o=[];for(let u=0;u<=r;++u)o[u]=s.slice(0);const a=[];for(let u=0;u<=t;++u)a[u]=s.slice(0);a[0][0]=1;const A=s.slice(0),l=s.slice(0);for(let u=1;u<=t;++u){A[u]=e-i[n+1-u],l[u]=i[n+u]-e;let f=0;for(let d=0;d<u;++d){const h=l[d+1],p=A[u-d];a[u][d]=h+p;const m=a[d][u-1]/a[u][d];a[d][u]=f+h*m,f=p*m}a[u][u]=f}for(let u=0;u<=t;++u)o[0][u]=a[u][t];for(let u=0;u<=t;++u){let f=0,d=1;const h=[];for(let p=0;p<=t;++p)h[p]=s.slice(0);h[0][0]=1;for(let p=1;p<=r;++p){let m=0;const g=u-p,v=t-p;u>=p&&(h[d][0]=h[f][0]/a[v+1][g],m=h[d][0]*a[g][v]);const y=g>=-1?1:-g,w=u-1<=v?p-1:t-u;for(let b=y;b<=w;++b)h[d][b]=(h[f][b]-h[f][b-1])/a[v+1][g+b],m+=h[d][b]*a[g+b][v];u<=v&&(h[d][p]=-h[f][p-1]/a[v+1][u],m+=h[d][p]*a[u][v]),o[p][u]=m;const C=f;f=d,d=C}}let c=t;for(let u=1;u<=r;++u){for(let f=0;f<=t;++f)o[u][f]*=c;c*=t-u}return o}function Fpe(n,e,t,r,i){const s=i<n?i:n,o=[],a=TH(n,r,e),A=Ipe(a,r,n,s,e),l=[];for(let c=0;c<t.length;++c){const u=t[c].clone(),f=u.w;u.x*=f,u.y*=f,u.z*=f,l[c]=u}for(let c=0;c<=s;++c){const u=l[a-n].clone().multiplyScalar(A[c][0]);for(let f=1;f<=n;++f)u.add(l[a-n+f].clone().multiplyScalar(A[c][f]));o[c]=u}for(let c=s+1;c<=i+1;++c)o[c]=new Vt(0,0,0);return o}function Epe(n,e){let t=1;for(let i=2;i<=n;++i)t*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=n-e;++i)r*=i;return t/r}function Upe(n){const e=n.length,t=[],r=[];for(let s=0;s<e;++s){const o=n[s];t[s]=new z(o.x,o.y,o.z),r[s]=o.w}const i=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(i[s-a].clone().multiplyScalar(Epe(s,a)*r[a]));i[s]=o.divideScalar(r[0])}return i}function _pe(n,e,t,r,i){const s=Fpe(n,e,t,r,i);return Upe(s)}class DD extends hne{constructor(e,t,r,i,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<r.length;++o){const a=r[o];this.controlPoints[o]=new Vt(a.x,a.y,a.z,a.w)}}getPoint(e,t=new z){const r=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=xpe(this.degree,this.knots,this.controlPoints,i);return s.w!==1&&s.divideScalar(s.w),r.set(s.x,s.y,s.z)}getTangent(e,t=new z){const r=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=_pe(this.degree,this.knots,this.controlPoints,i,1);return r.copy(s[1]).normalize(),r}}let Ct,Pn,mi;class Spe extends Dh{constructor(e){super(e)}load(e,t,r,i){const s=this,o=s.path===""?va.extractUrlBase(e):s.path,a=new $_(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(A){try{t(s.parse(A,o))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e,t){if(kpe(e))Ct=new Npe().parse(e);else{const i=VH(e);if(!Dpe(i))throw new Error("THREE.FBXLoader: Unknown format.");if(LD(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+LD(i));Ct=new Tpe().parse(i)}const r=new xu(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Qpe(r,this.manager).parse(Ct)}}class Qpe{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Pn=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),i=this.parseDeformers(),s=new Rpe().parse(i);return this.parseScene(i,s,r),mi}parseConnections(){const e=new Map;return"Connections"in Ct&&Ct.Connections.connections.forEach(function(r){const i=r[0],s=r[1],o=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(i).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const A={ID:i,relationship:o};e.get(s).children.push(A)}),e}parseImages(){const e={},t={};if("Video"in Ct.Objects){const r=Ct.Objects.Video;for(const i in r){const s=r[i],o=parseInt(i);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,A=typeof s.Content=="string"&&s.Content!=="";if(a||A){const l=this.parseImage(r[i]);t[s.RelativeFilename||s.Filename]=l}}}}for(const r in e){const i=e[r];t[i]!==void 0?e[r]=t[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let s;switch(i){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in Ct.Objects){const r=Ct.Objects.Texture;for(const i in r){const s=this.parseTexture(r[i],e);t.set(parseInt(i),s)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,o=i!==void 0?i.value:0,a=s!==void 0?s.value:0;if(r.wrapS=o===0?cs:ai,r.wrapT=a===0?cs:ai,"Scaling"in e){const A=e.Scaling.value;r.repeat.x=A[0],r.repeat.y=A[1]}if("Translation"in e){const A=e.Translation.value;r.offset.x=A[0],r.offset.y=A[1]}return r}loadTexture(e,t){let r;const i=this.textureLoader.path,s=Pn.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(r=t[s[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const A=this.manager.getHandler(".tga");A===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new qn):(A.setPath(this.textureLoader.path),o=A.load(r))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new qn):o=this.textureLoader.load(r);return this.textureLoader.setPath(i),o}parseMaterials(e){const t=new Map;if("Material"in Ct.Objects){const r=Ct.Objects.Material;for(const i in r){const s=this.parseMaterial(r[i],e);s!==null&&t.set(parseInt(i),s)}}return t}parseMaterial(e,t){const r=e.id,i=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Pn.has(r))return null;const o=this.parseParameters(e,t,r);let a;switch(s.toLowerCase()){case"phong":a=new sI;break;case"lambert":a=new pne;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new sI;break}return a.setValues(o),a.name=i,a}parseParameters(e,t,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new Ne().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new Ne().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new Ne().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new Ne().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new Ne().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new Ne().fromArray(e.SpecularColor.value));const s=this;return Pn.get(r).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":i.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,o.ID),i.map!==void 0&&(i.map.encoding=dt);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,o.ID),i.emissiveMap!==void 0&&(i.emissiveMap.encoding=dt);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,o.ID),i.envMap!==void 0&&(i.envMap.mapping=jB,i.envMap.encoding=dt);break;case"SpecularColor":i.specularMap=s.getTexture(t,o.ID),i.specularMap!==void 0&&(i.specularMap.encoding=dt);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,o.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),i}getTexture(e,t){return"LayeredTexture"in Ct.Objects&&t in Ct.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Pn.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in Ct.Objects){const r=Ct.Objects.Deformer;for(const i in r){const s=r[i],o=Pn.get(parseInt(i));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,r);a.ID=i,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[i]=a}else if(s.attrType==="BlendShape"){const a={id:i};a.rawTargets=this.parseMorphTargets(o,r),a.id=i,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach(function(i){const s=t[i.ID];if(s.attrType!=="Cluster")return;const o={ID:i.ID,indices:[],weights:[],transformLink:new Oe().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),r.push(o)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let i=0;i<e.children.length;i++){const s=e.children[i],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=Pn.get(parseInt(s.ID)).children.filter(function(A){return A.relationship===void 0})[0].ID,r.push(a)}return r}parseScene(e,t,r){mi=new Er;const i=this.parseModels(e.skeletons,t,r),s=Ct.Objects.Model,o=this;i.forEach(function(A){const l=s[A.ID];o.setLookAtProperties(A,l),Pn.get(A.ID).parents.forEach(function(u){const f=i.get(u.ID);f!==void 0&&f.add(A)}),A.parent===null&&mi.add(A)}),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),mi.traverse(function(A){if(A.userData.transformData){A.parent&&(A.userData.transformData.parentMatrix=A.parent.matrix,A.userData.transformData.parentMatrixWorld=A.parent.matrixWorld);const l=kH(A.userData.transformData);A.applyMatrix4(l),A.updateWorldMatrix()}});const a=new Mpe().parse();mi.children.length===1&&mi.children[0].isGroup&&(mi.children[0].animations=a,mi=mi.children[0]),mi.animations=a}parseModels(e,t,r){const i=new Map,s=Ct.Objects.Model;for(const o in s){const a=parseInt(o),A=s[o],l=Pn.get(a);let c=this.buildSkeleton(l,e,a,A.attrName);if(!c){switch(A.attrType){case"Camera":c=this.createCamera(l);break;case"Light":c=this.createLight(l);break;case"Mesh":c=this.createMesh(l,t,r);break;case"NurbsCurve":c=this.createCurve(l,t);break;case"LimbNode":case"Root":c=new ym;break;case"Null":default:c=new Er;break}c.name=A.attrName?mt.sanitizeNodeName(A.attrName):"",c.ID=a}this.getTransformData(c,A),i.set(a,c)}return i}buildSkeleton(e,t,r,i){let s=null;return e.parents.forEach(function(o){for(const a in t){const A=t[a];A.rawBones.forEach(function(l,c){if(l.ID===o.ID){const u=s;s=new ym,s.matrixWorld.copy(l.transformLink),s.name=i?mt.sanitizeNodeName(i):"",s.ID=r,A.bones[c]=s,u!==null&&s.add(u)}})}}),s}createCamera(e){let t,r;if(e.children.forEach(function(i){const s=Ct.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new kt;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let s=1;r.NearPlane!==void 0&&(s=r.NearPlane.value/1e3);let o=1e3;r.FarPlane!==void 0&&(o=r.FarPlane.value/1e3);let a=window.innerWidth,A=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(a=r.AspectWidth.value,A=r.AspectHeight.value);const l=a/A;let c=45;r.FieldOfView!==void 0&&(c=r.FieldOfView.value);const u=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:t=new Ir(c,l,s,o),u!==null&&t.setFocalLength(u);break;case 1:t=new o0(-a/2,a/2,A/2,-A/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new kt;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(i){const s=Ct.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new kt;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let s=16777215;r.Color!==void 0&&(s=new Ne().fromArray(r.Color.value));let o=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(o=0);let a=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?a=0:a=r.FarAttenuationEnd.value);const A=1;switch(i){case 0:t=new oE(s,o,a,A);break;case 1:t=new eS(s,o);break;case 2:let l=Math.PI/3;r.InnerAngle!==void 0&&(l=Dt.degToRad(r.InnerAngle.value));let c=0;r.OuterAngle!==void 0&&(c=Dt.degToRad(r.OuterAngle.value),c=Math.max(c,1)),t=new lZ(s,o,a,l,c,A);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new oE(s,o);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let i,s=null,o=null;const a=[];return e.children.forEach(function(A){t.has(A.ID)&&(s=t.get(A.ID)),r.has(A.ID)&&a.push(r.get(A.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new sI({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(A){A.vertexColors=!0}),s.FBX_Deformer?(i=new Mh(s,o),i.normalizeSkinWeights()):i=new Tn(s,o),i}createCurve(e,t){const r=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),i=new NA({color:3342591,linewidth:1});return new Th(r,i)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=DH(t.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&Pn.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const s=Ct.Objects.Model[i.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),mi.add(e.target)):e.lookAt(new z().fromArray(o))}}})}bindSkeleton(e,t,r){const i=this.parsePoseNodes();for(const s in e){const o=e[s];Pn.get(parseInt(o.ID)).parents.forEach(function(A){if(t.has(A.ID)){const l=A.ID;Pn.get(l).parents.forEach(function(u){r.has(u.ID)&&r.get(u.ID).bind(new ac(o.bones),i[u.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Ct.Objects){const t=Ct.Objects.Pose;for(const r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){const i=t[r].PoseNode;Array.isArray(i)?i.forEach(function(s){e[s.Node]=new Oe().fromArray(s.Matrix.a)}):e[i.Node]=new Oe().fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Ct&&"AmbientColor"in Ct.GlobalSettings){const e=Ct.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],i=e[2];if(t!==0||r!==0||i!==0){const s=new Ne(t,r,i);mi.add(new cZ(s,1))}}}}class Rpe{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in Ct.Objects){const r=Ct.Objects.Geometry;for(const i in r){const s=Pn.get(parseInt(i)),o=this.parseGeometry(s,r[i],e);t.set(parseInt(i),o)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const i=r.skeletons,s=[],o=e.parents.map(function(u){return Ct.Objects.Model[u.ID]});if(o.length===0)return;const a=e.children.reduce(function(u,f){return i[f.ID]!==void 0&&(u=i[f.ID]),u},null);e.children.forEach(function(u){r.morphTargets[u.ID]!==void 0&&s.push(r.morphTargets[u.ID])});const A=o[0],l={};"RotationOrder"in A&&(l.eulerOrder=DH(A.RotationOrder.value)),"InheritType"in A&&(l.inheritType=parseInt(A.InheritType.value)),"GeometricTranslation"in A&&(l.translation=A.GeometricTranslation.value),"GeometricRotation"in A&&(l.rotation=A.GeometricRotation.value),"GeometricScaling"in A&&(l.scale=A.GeometricScaling.value);const c=kH(l);return this.genGeometry(t,a,s,c)}genGeometry(e,t,r,i){const s=new zt;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),A=new vn(a.vertex,3);if(A.applyMatrix4(i),s.setAttribute("position",A),a.colors.length>0&&s.setAttribute("color",new vn(a.colors,3)),t&&(s.setAttribute("skinIndex",new DC(a.weightsIndices,4)),s.setAttribute("skinWeight",new vn(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const l=new Mn().getNormalMatrix(i),c=new vn(a.normal,3);c.applyNormalMatrix(l),s.setAttribute("normal",c)}if(a.uvs.forEach(function(l,c){let u="uv"+(c+1).toString();c===0&&(u="uv"),s.setAttribute(u,new vn(a.uvs[c],2))}),o.material&&o.material.mappingType!=="AllSame"){let l=a.materialIndex[0],c=0;if(a.materialIndex.forEach(function(u,f){u!==l&&(s.addGroup(c,f-c,l),l=u,c=f)}),s.groups.length>0){const u=s.groups[s.groups.length-1],f=u.start+u.count;f!==a.materialIndex.length&&s.addGroup(f,a.materialIndex.length-f,l)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,r,i),s}parseGeoNode(e,t){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(i,s){i.indices.forEach(function(o,a){r.weightTable[o]===void 0&&(r.weightTable[o]=[]),r.weightTable[o].push({id:s,weight:i.weights[a]})})})),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,s=!1,o=[],a=[],A=[],l=[],c=[],u=[];const f=this;return e.vertexIndices.forEach(function(d,h){let p,m=!1;d<0&&(d=d^-1,m=!0);let g=[],v=[];if(o.push(d*3,d*3+1,d*3+2),e.color){const y=uy(h,r,d,e.color);A.push(y[0],y[1],y[2])}if(e.skeleton){if(e.weightTable[d]!==void 0&&e.weightTable[d].forEach(function(y){v.push(y.weight),g.push(y.id)}),v.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const y=[0,0,0,0],w=[0,0,0,0];v.forEach(function(C,b){let F=C,I=g[b];w.forEach(function(S,T,H){if(F>S){H[T]=F,F=S;const X=y[T];y[T]=I,I=X}})}),g=y,v=w}for(;v.length<4;)v.push(0),g.push(0);for(let y=0;y<4;++y)c.push(v[y]),u.push(g[y])}if(e.normal){const y=uy(h,r,d,e.normal);a.push(y[0],y[1],y[2])}e.material&&e.material.mappingType!=="AllSame"&&(p=uy(h,r,d,e.material)[0],p<0&&(f.negativeMaterialIndices=!0,p=0)),e.uv&&e.uv.forEach(function(y,w){const C=uy(h,r,d,y);l[w]===void 0&&(l[w]=[]),l[w].push(C[0]),l[w].push(C[1])}),i++,m&&(f.genFace(t,e,o,p,a,A,l,c,u,i),r++,i=0,o=[],a=[],A=[],l=[],c=[],u=[])}),t}genFace(e,t,r,i,s,o,a,A,l,c){for(let u=2;u<c;u++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[(u-1)*3]]),e.vertex.push(t.vertexPositions[r[(u-1)*3+1]]),e.vertex.push(t.vertexPositions[r[(u-1)*3+2]]),e.vertex.push(t.vertexPositions[r[u*3]]),e.vertex.push(t.vertexPositions[r[u*3+1]]),e.vertex.push(t.vertexPositions[r[u*3+2]]),t.skeleton&&(e.vertexWeights.push(A[0]),e.vertexWeights.push(A[1]),e.vertexWeights.push(A[2]),e.vertexWeights.push(A[3]),e.vertexWeights.push(A[(u-1)*4]),e.vertexWeights.push(A[(u-1)*4+1]),e.vertexWeights.push(A[(u-1)*4+2]),e.vertexWeights.push(A[(u-1)*4+3]),e.vertexWeights.push(A[u*4]),e.vertexWeights.push(A[u*4+1]),e.vertexWeights.push(A[u*4+2]),e.vertexWeights.push(A[u*4+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[(u-1)*4]),e.weightsIndices.push(l[(u-1)*4+1]),e.weightsIndices.push(l[(u-1)*4+2]),e.weightsIndices.push(l[(u-1)*4+3]),e.weightsIndices.push(l[u*4]),e.weightsIndices.push(l[u*4+1]),e.weightsIndices.push(l[u*4+2]),e.weightsIndices.push(l[u*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(u-1)*3]),e.colors.push(o[(u-1)*3+1]),e.colors.push(o[(u-1)*3+2]),e.colors.push(o[u*3]),e.colors.push(o[u*3+1]),e.colors.push(o[u*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(u-1)*3]),e.normal.push(s[(u-1)*3+1]),e.normal.push(s[(u-1)*3+2]),e.normal.push(s[u*3]),e.normal.push(s[u*3+1]),e.normal.push(s[u*3+2])),t.uv&&t.uv.forEach(function(f,d){e.uvs[d]===void 0&&(e.uvs[d]=[]),e.uvs[d].push(a[d][0]),e.uvs[d].push(a[d][1]),e.uvs[d].push(a[d][(u-1)*2]),e.uvs[d].push(a[d][(u-1)*2+1]),e.uvs[d].push(a[d][u*2]),e.uvs[d].push(a[d][u*2+1])})}addMorphTargets(e,t,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;r.forEach(function(o){o.rawTargets.forEach(function(a){const A=Ct.Objects.Geometry[a.geoID];A!==void 0&&s.genMorphGeometry(e,t,A,i,a.name)})})}genMorphGeometry(e,t,r,i,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=r.Vertices!==void 0?r.Vertices.a:[],A=r.Indexes!==void 0?r.Indexes.a:[],l=e.attributes.position.count*3,c=new Float32Array(l);for(let h=0;h<A.length;h++){const p=A[h]*3;c[p]=a[h*3],c[p+1]=a[h*3+1],c[p+2]=a[h*3+2]}const u={vertexIndices:o,vertexPositions:c},f=this.genBuffers(u),d=new vn(f.vertex,3);d.name=s||r.attrName,d.applyMatrix4(i),e.morphAttributes.position.push(d)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let s=[];return r==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:s,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let s=[];return r==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:i,indices:s,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let s=[];return r==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,s=[];for(let o=0;o<i.length;++o)s.push(o);return{dataSize:1,buffer:i,indices:s,mappingType:t,referenceType:r}}parseNurbsGeometry(e){if(DD===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new zt;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new zt;const r=t-1,i=e.KnotVector.a,s=[],o=e.Points.a;for(let u=0,f=o.length;u<f;u+=4)s.push(new Vt().fromArray(o,u));let a,A;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=r,A=i.length-1-a;for(let u=0;u<r;++u)s.push(s[u])}const c=new DD(r,i,s,a,A).getPoints(s.length*12);return new zt().setFromPoints(c)}}class Mpe{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const r in t){const i=t[r],s=this.addClip(i);e.push(s)}return e}parseClips(){if(Ct.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=Ct.Objects.AnimationCurveNode,t=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:i.id,attr:i.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=Ct.Objects.AnimationCurve;for(const r in t){const i={id:t[r].id,times:t[r].KeyTime.a.map(Vpe),values:t[r].KeyValueFloat.a},s=Pn.get(i.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=i:a.match(/Y/)?e.get(o).curves.y=i:a.match(/Z/)?e.get(o).curves.z=i:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=i)}}}parseAnimationLayers(e){const t=Ct.Objects.AnimationLayer,r=new Map;for(const i in t){const s=[],o=Pn.get(parseInt(i));o!==void 0&&(o.children.forEach(function(A,l){if(e.has(A.ID)){const c=e.get(A.ID);if(c.curves.x!==void 0||c.curves.y!==void 0||c.curves.z!==void 0){if(s[l]===void 0){const u=Pn.get(A.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(u!==void 0){const f=Ct.Objects.Model[u.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",A);return}const d={modelName:f.attrName?mt.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};mi.traverse(function(h){h.ID===f.id&&(d.transform=h.matrix,h.userData.transformData&&(d.eulerOrder=h.userData.transformData.eulerOrder))}),d.transform||(d.transform=new Oe),"PreRotation"in f&&(d.preRotation=f.PreRotation.value),"PostRotation"in f&&(d.postRotation=f.PostRotation.value),s[l]=d}}s[l]&&(s[l][c.attr]=c)}else if(c.curves.morph!==void 0){if(s[l]===void 0){const u=Pn.get(A.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,f=Pn.get(u).parents[0].ID,d=Pn.get(f).parents[0].ID,h=Pn.get(d).parents[0].ID,p=Ct.Objects.Model[h],m={modelName:p.attrName?mt.sanitizeNodeName(p.attrName):"",morphName:Ct.Objects.Deformer[u].attrName};s[l]=m}s[l][c.attr]=c}}}),r.set(parseInt(i),s))}return r}parseAnimStacks(e){const t=Ct.Objects.AnimationStack,r={};for(const i in t){const s=Pn.get(parseInt(i)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);r[i]={name:t[i].attrName,layer:o}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach(function(i){t=t.concat(r.generateTracks(i))}),new uu(e.name,-1,t)}generateTracks(e){const t=[];let r=new z,i=new et,s=new z;if(e.transform&&e.transform.decompose(r,i,s),r=r.toArray(),i=new Jr().setFromQuaternion(i,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,r,i){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,r);return new zl(e+"."+i,s,o)}generateRotationTrack(e,t,r,i,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Dt.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Dt.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Dt.degToRad));const a=this.getTimesForAllAxes(t),A=this.getKeyframeTrackValues(a,t,r);i!==void 0&&(i=i.map(Dt.degToRad),i.push(o),i=new Jr().fromArray(i),i=new et().setFromEuler(i)),s!==void 0&&(s=s.map(Dt.degToRad),s.push(o),s=new Jr().fromArray(s),s=new et().setFromEuler(s).invert());const l=new et,c=new Jr,u=[];for(let f=0;f<A.length;f+=3)c.set(A[f],A[f+1],A[f+2],o),l.setFromEuler(c),i!==void 0&&l.premultiply(i),s!==void 0&&l.multiply(s),l.toArray(u,f/3*4);return new Fa(e+".quaternion",a,u)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map(function(s){return s/100}),i=mi.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new ah(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,i){return r-i}),t.length>1){let r=1,i=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==i&&(t[r]=o,i=o,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){const i=r,s=[];let o=-1,a=-1,A=-1;return e.forEach(function(l){if(t.x&&(o=t.x.times.indexOf(l)),t.y&&(a=t.y.times.indexOf(l)),t.z&&(A=t.z.times.indexOf(l)),o!==-1){const c=t.x.values[o];s.push(c),i[0]=c}else s.push(i[0]);if(a!==-1){const c=t.y.values[a];s.push(c),i[1]=c}else s.push(i[1]);if(A!==-1){const c=t.z.values[A];s.push(c),i[2]=c}else s.push(i[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const r=e.values[t-1],i=e.values[t]-r,s=Math.abs(i);if(s>=180){const o=s/180,a=i/o;let A=r+a;const l=e.times[t-1],u=(e.times[t]-l)/o;let f=l+u;const d=[],h=[];for(;f<e.times[t];)d.push(f),f+=u,h.push(A),A+=a;e.times=PD(e.times,t,d),e.values=PD(e.values,t,h)}}}}class Tpe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new NH,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,s){const o=i.match(/^[\s\t]*;/),a=i.match(/^[\s\t]*$/);if(o||a)return;const A=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),l=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=i.match("^\\t{"+(t.currentIndent-1)+"}}");A?t.parseNodeBegin(i,A):l?t.parseNodeProperty(i,l,r[++s]):c?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(A){return A.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:r},o=this.parseNodeAttr(i),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,s):r in a?(r==="PoseNode"?a.PoseNode.push(s):a[r].id!==void 0&&(a[r]={},a[r][a[r].id]=a[r]),o.id!==""&&(a[r][o.id]=s)):typeof o.id=="number"?(a[r]={},a[r][o.id]=s):r!=="Properties70"&&(r==="PoseNode"?a[r]=[s]:a[r]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:r,type:i}}parseNodeProperty(e,t,r){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&s===","&&(s=r.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,i,s);return}if(i==="C"){const A=s.split(",").slice(1),l=parseInt(A[0]),c=parseInt(A[1]);let u=s.split(",").slice(3);u=u.map(function(f){return f.trim().replace(/^"/,"")}),i="connections",s=[l,c],Ppe(s,u),o[i]===void 0&&(o[i]=[])}i==="Node"&&(o.id=s),i in o&&Array.isArray(o[i])?o[i].push(s):i!=="a"?o[i]=s:o.a=s,this.setCurrentProp(o,i),i==="a"&&s.slice(-1)!==","&&(o.a=s1(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=s1(t.a))}parseNodeSpecialProperty(e,t,r){const i=r.split('",').map(function(c){return c.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=i[0],o=i[1],a=i[2],A=i[3];let l=i[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=s1(l);break}this.getPrevNode()[s]={type:o,type2:a,flag:A,value:l},this.setCurrentProp(this.getPrevNode(),s)}}class Npe{parse(e){const t=new VD(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new NH;for(;!this.endOfContent(t);){const s=this.parseNode(t,r);s!==null&&i.add(s.name,s)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},i=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(i===0)return null;const A=[];for(let f=0;f<s;f++)A.push(this.parseProperty(e));const l=A.length>0?A[0]:"",c=A.length>1?A[1]:"",u=A.length>2?A[2]:"";for(r.singleProperty=s===1&&e.getOffset()===i;i>e.getOffset();){const f=this.parseNode(e,t);f!==null&&this.parseSubNode(a,r,f)}return r.propertyList=A,typeof l=="number"&&(r.id=l),c!==""&&(r.attrName=c),u!==""&&(r.attrType=u),a!==""&&(r.name=a),r}parseSubNode(e,t,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(t[r.name]=r,r.a=i):t[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(s,o){o!==0&&i.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(s){t[s]=r[s]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],s=r.propertyList[1];const o=r.propertyList[2],a=r.propertyList[3];let A;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?A=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:A=r.propertyList[4],t[i]={type:s,type2:o,flag:a,value:A}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}typeof Cpe>"u"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const a=Pm(new Uint8Array(e.getArrayBuffer(o))),A=new VD(a.buffer);switch(t){case"b":case"c":return A.getBooleanArray(i);case"d":return A.getFloat64Array(i);case"f":return A.getFloat32Array(i);case"i":return A.getInt32Array(i);case"l":return A.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class VD{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let i=0;i<e;i++)t[i]=this.getUint8();const r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),va.decodeText(new Uint8Array(t))}}class NH{add(e,t){this[e]=t}}function kpe(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===VH(n,0,e.length)}function Dpe(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function r(i){const s=n[i-1];return n=n.slice(t+i),t++,s}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function LD(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Vpe(n){return n/46186158e3}const Lpe=[];function uy(n,e,t,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=n;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const s=i*r.dataSize,o=s+r.dataSize;return Wpe(Lpe,r.buffer,s,o)}const i1=new Jr,vf=new z;function kH(n){const e=new Oe,t=new Oe,r=new Oe,i=new Oe,s=new Oe,o=new Oe,a=new Oe,A=new Oe,l=new Oe,c=new Oe,u=new Oe,f=new Oe,d=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(vf.fromArray(n.translation)),n.preRotation){const T=n.preRotation.map(Dt.degToRad);T.push(n.eulerOrder||Jr.DefaultOrder),t.makeRotationFromEuler(i1.fromArray(T))}if(n.rotation){const T=n.rotation.map(Dt.degToRad);T.push(n.eulerOrder||Jr.DefaultOrder),r.makeRotationFromEuler(i1.fromArray(T))}if(n.postRotation){const T=n.postRotation.map(Dt.degToRad);T.push(n.eulerOrder||Jr.DefaultOrder),i.makeRotationFromEuler(i1.fromArray(T)),i.invert()}n.scale&&s.scale(vf.fromArray(n.scale)),n.scalingOffset&&a.setPosition(vf.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition(vf.fromArray(n.scalingPivot)),n.rotationOffset&&A.setPosition(vf.fromArray(n.rotationOffset)),n.rotationPivot&&l.setPosition(vf.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(u.copy(n.parentMatrix),c.copy(n.parentMatrixWorld));const h=t.clone().multiply(r).multiply(i),p=new Oe;p.extractRotation(c);const m=new Oe;m.copyPosition(c);const g=m.clone().invert().multiply(c),v=p.clone().invert().multiply(g),y=s,w=new Oe;if(d===0)w.copy(p).multiply(h).multiply(v).multiply(y);else if(d===1)w.copy(p).multiply(v).multiply(h).multiply(y);else{const H=new Oe().scale(new z().setFromMatrixScale(u)).clone().invert(),X=v.clone().multiply(H);w.copy(p).multiply(h).multiply(X).multiply(y)}const C=l.clone().invert(),b=o.clone().invert();let F=e.clone().multiply(A).multiply(l).multiply(t).multiply(r).multiply(i).multiply(C).multiply(a).multiply(o).multiply(s).multiply(b);const I=new Oe().copyPosition(F),S=c.clone().multiply(I);return f.copyPosition(S),F=f.clone().multiply(w),F.premultiply(c.invert()),F}function DH(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function s1(n){return n.split(",").map(function(t){return parseFloat(t)})}function VH(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),va.decodeText(new Uint8Array(n,e,t))}function Ppe(n,e){for(let t=0,r=n.length,i=e.length;t<i;t++,r++)n[r]=e[t]}function Wpe(n,e,t,r){for(let i=t,s=0;i<r;i++,s++)n[s]=e[i];return n}function PD(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}const Ope={mixamorigHips:"hips",mixamorigSpine:"spine",mixamorigSpine1:"chest",mixamorigSpine2:"upperChest",mixamorigNeck:"neck",mixamorigHead:"head",mixamorigLeftShoulder:"leftShoulder",mixamorigLeftArm:"leftUpperArm",mixamorigLeftForeArm:"leftLowerArm",mixamorigLeftHand:"leftHand",mixamorigLeftHandThumb1:"leftThumbMetacarpal",mixamorigLeftHandThumb2:"leftThumbProximal",mixamorigLeftHandThumb3:"leftThumbDistal",mixamorigLeftHandIndex1:"leftIndexProximal",mixamorigLeftHandIndex2:"leftIndexIntermediate",mixamorigLeftHandIndex3:"leftIndexDistal",mixamorigLeftHandMiddle1:"leftMiddleProximal",mixamorigLeftHandMiddle2:"leftMiddleIntermediate",mixamorigLeftHandMiddle3:"leftMiddleDistal",mixamorigLeftHandRing1:"leftRingProximal",mixamorigLeftHandRing2:"leftRingIntermediate",mixamorigLeftHandRing3:"leftRingDistal",mixamorigLeftHandPinky1:"leftLittleProximal",mixamorigLeftHandPinky2:"leftLittleIntermediate",mixamorigLeftHandPinky3:"leftLittleDistal",mixamorigRightShoulder:"rightShoulder",mixamorigRightArm:"rightUpperArm",mixamorigRightForeArm:"rightLowerArm",mixamorigRightHand:"rightHand",mixamorigRightHandPinky1:"rightLittleProximal",mixamorigRightHandPinky2:"rightLittleIntermediate",mixamorigRightHandPinky3:"rightLittleDistal",mixamorigRightHandRing1:"rightRingProximal",mixamorigRightHandRing2:"rightRingIntermediate",mixamorigRightHandRing3:"rightRingDistal",mixamorigRightHandMiddle1:"rightMiddleProximal",mixamorigRightHandMiddle2:"rightMiddleIntermediate",mixamorigRightHandMiddle3:"rightMiddleDistal",mixamorigRightHandIndex1:"rightIndexProximal",mixamorigRightHandIndex2:"rightIndexIntermediate",mixamorigRightHandIndex3:"rightIndexDistal",mixamorigRightHandThumb1:"rightThumbMetacarpal",mixamorigRightHandThumb2:"rightThumbProximal",mixamorigRightHandThumb3:"rightThumbDistal",mixamorigLeftUpLeg:"leftUpperLeg",mixamorigLeftLeg:"leftLowerLeg",mixamorigLeftFoot:"leftFoot",mixamorigLeftToeBase:"leftToes",mixamorigRightUpLeg:"rightUpperLeg",mixamorigRightLeg:"rightLowerLeg",mixamorigRightFoot:"rightFoot",mixamorigRightToeBase:"rightToes"};function LH(n,e,t){var p;const r=uu.findByName(n,"mixamo.com");if(r==null)return null;const i=[],s=new et,o=new et,a=new et,A=new z,l=e.getObjectByName("mixamorigHips").position.y,c=(p=t.humanoid)==null?void 0:p.getNormalizedBoneNode("hips").getWorldPosition(A).y,u=t.scene.getWorldPosition(A).y,d=Math.abs(c-u)/l;return r.tracks.forEach(m=>{const g=m.clone(),v=g.name.split("."),y=v[0],C=Ope[y],b=e.getObjectByName(y);if(C!=null){const F=v[1];if(b.getWorldQuaternion(s).invert(),b.parent.getWorldQuaternion(o),g instanceof Fa){for(let I=0;I<g.values.length;I+=4){const S=g.values.slice(I,I+4);a.fromArray(S),a.premultiply(o).multiply(s),a.toArray(S),S.forEach((T,H)=>{g.values[H+I]=T})}i.push(new Fa(`${C}.${F}`,g.times,g.values.map((I,S)=>{var T;return((T=t.meta)==null?void 0:T.metaVersion)==="0"&&S%2===0?-I:I})))}else if(g instanceof zl){const I=g.values.map((S,T)=>{var H;return(((H=t.meta)==null?void 0:H.metaVersion)==="0"&&T%3!==1?-S:S)*d});i.push(new zl(`${C}.${F}`,g.times,I))}}}),new uu("vrmAnimation",r.duration,i)}const Zpe=new Spe,Gpe=new rb,o1=.2,Jpe=n=>Math.floor(Math.random()*n);class WD{constructor(e,t,r,i,s,o){var a,A,l,c;this.mixer=new Wne(t),this.actions=[],this.to=null,this.from=null,this.vrm=r,this.animationManager=e,this.mixamoModel=null,this.fadeOutActions=null,this.newAnimationWeight=1,this.neckBone=(A=(a=r==null?void 0:r.humanoid)==null?void 0:a.humanBones)==null?void 0:A.neck,this.spineBone=(c=(l=r==null?void 0:r.humanoid)==null?void 0:l.humanBones)==null?void 0:c.spine,this.setAnimations(i),this.to=this.actions[s],o!=-1&&(this.from=this.actions[o],this.from.reset(),this.from.time=e.getFromActionTime(),this.from.play(),this.to.weight=e.getWeightIn(),this.from.weight=e.getWeightOut()),this.actions[s].reset(),this.actions[s].time=e.getToActionTime(),this.actions[s].play()}setMouseLookEnabled(e){this.setAnimations(this.animations,this.mixamoModel,e)}setAnimations(e,t,r=null){if(r=r??this.animationManager.mouseLookEnabled,this.animations=e,t!=null){if(this.vrm!=null){const i=LH(e,t,this.vrm);i&&(e=[i],this.mixamoModel=t)}}else{const i=[];e.forEach(s=>{i.push(s.clone())}),e=i}r&&e[0].tracks.map((i,s)=>{(i.name==="neck.quaternion"||i.name==="spine.quaternion")&&e[0].tracks.splice(s,1)}),this.fadeOutActions=this.actions,this.actions=[],this.newAnimationWeight=0;for(let i=0;i<e.length;i++)this.actions.push(this.mixer.clipAction(e[i]));this.actions[0].weight=0,this.actions[0].play()}update(e,t){this.fadeOutActions!=null&&(this.newAnimationWeight+=1/5,this.fadeOutActions.forEach(r=>{r.weight=1-this.newAnimationWeight}),this.newAnimationWeight>=1&&(this.newAnimationWeight=1,this.fadeOutActions.forEach(r=>{r.weight=0,r.stop()}),this.fadeOutActions=null),this.actions.forEach(r=>{r.weight=this.newAnimationWeight})),this.from!=null&&(this.from.weight=t),this.to!=null&&(this.to.weight=e),this.mixer.update(1/30)}reset(){this.mixer.setTime(0),this.to.paused=!0}resume(){this.to.paused=!1}dispose(){this.animationManager.disposeAnimation(this)}}class Hpe{constructor(e){this.animationPaths=null,this.lastAnimID=null,this.mainControl=null,this.animationControl=null,this.animations=null,this.curLoadAnim=0,this.currentAnimationName="",this.weightIn=NaN,this.weightOut=NaN,this.offset=null,this.lastAnimID=-1,this.curAnimID=0,this.animationControls=[],this.started=!1,this.mouseLookEnabled=!1,this.mixamoModel=null,this.mixamoAnimations=null,e&&(this.offset=new z(e[0],e[1],e[2])),setInterval(()=>{this.update()},1e3/30)}enableMouseLook(e){this.mouseLookEnabled=e,this.animationControls.forEach(t=>{t.setMouseLookEnabled(e)})}async loadAnimation(e,t=!0,r="",i=""){const s=r+(r!=""?"/":"")+$t(e)[0];i=i==""?Bw(s):i,this.currentAnimationName=i;const a=await(t?Zpe:Gpe).loadAsync(s);uu.findByName(a.animations,"mixamo.com")!=null?(this.mixamoModel=a.clone(),this.mixamoAnimations=a.animations):(this.mixamoModel=null,this.animations=a.animations,this.offset&&this.offsetHips()),this.mainControl==null?(this.mainControl=new WD(this,a,null,a.animations,this.curAnimID,this.lastAnimID),this.animationControls.push(this.mainControl)):this.animationControls.forEach(l=>{l.setAnimations(a.animations,this.mixamoModel,this.mouseLookEnabled)})}getCurrentAnimationName(){return this.currentAnimationName}storeAnimationPaths(e,t){const r=$t(e);this.animationPaths=r.map(i=>`${t}/${i}`)}loadNextAnimation(){this.curLoadAnim==this.animationPaths.length-1?this.curLoadAnim=0:this.curLoadAnim++,this.loadAnimation(this.animationPaths[this.curLoadAnim])}loadPreviousAnimation(){this.curLoadAnim==0?this.curLoadAnim=this.animationPaths.length-1:this.curLoadAnim--,this.loadAnimation(this.animationPaths[this.curLoadAnim])}enableScreenshot(){this.animationControls.forEach(e=>{e.reset()})}disableScreenshot(){this.animationControls.forEach(e=>{e.resume()})}offsetHips(){this.animations.forEach(e=>{for(let t=0;t<e.tracks.length;t++){const r=e.tracks[t];if(r.name==="hips.position")for(let i=0;i<r.values.length/3;i++){const s=i*3;r.values[s]=r.values[s]+this.offset.x,r.values[s+1]=r.values[s+1]+this.offset.y,r.values[s+2]=r.values[s+2]+this.offset.z}}})}startAnimation(e){let t=null;if(this.mixamoModel!=null?(t=[LH(this.mixamoAnimations,this.mixamoModel.clone(),e)],this.animations==null&&(this.animations=t)):t=this.animations,!t){console.warn("no animations were preloaded, ignoring");return}const r=new WD(this,e.scene,e,t,this.curAnimID,this.lastAnimID);this.animationControls.push(r),kG(e,{animationControl:r}),this.started===!1&&(this.started=!0,this.animRandomizer(t[this.curAnimID].duration))}getFromActionTime(){return this.mainControl.actions[this.lastAnimID].time}getToActionTime(){return this.mainControl?this.mainControl.actions[this.curAnimID].time:.1}getWeightIn(){return this.weightIn}getWeightOut(){return this.weightOut}disposeAnimation(e){if(e!=null){const t=this.animationControls.indexOf(e);t!=-1&&this.animationControls.splice(t,1)}}dispose(){this.animationControls.forEach(e=>{e.dispose()})}animRandomizer(e){setTimeout(()=>{this.lastAnimID=this.curAnimID,this.curAnimID=Jpe(this.animations.length),this.curAnimID!=this.lastAnimID&&this.animationControls.forEach(t=>{t.from=t.actions[this.lastAnimID],t.to=t.actions[this.curAnimID],this.weightIn=0,this.weightOut=1,t.to.play(),t.to.reset()}),this.animRandomizer(this.animations[this.curAnimID].duration-o1)},e*1e3)}update(){this.mainControl&&(this.animationControls.forEach(e=>{e.update(this.weightIn,this.weightOut)}),this.weightIn<1?this.weightIn+=1/(30*o1):this.weightIn=1,this.weightOut>0?this.weightOut-=1/(30*o1):this.weightOut=0)}}const zpe="_container_1fjfz_1",Xpe="_messageWindow_1fjfz_11",Ype="_messageTitle_1fjfz_25",Kpe="_buttonContainer_1fjfz_36",fy={container:zpe,messageWindow:Xpe,messageTitle:Ype,buttonContainer:Kpe};var dU={},jpe={get exports(){return dU},set exports(n){dU=n}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=t.apply(null,s);a&&r.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var A in s)e.call(s,A)&&s[A]&&r.push(A)}}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(jpe);const Ld=dU,$pe="_iconButtonWrap_1fm7l_1",qpe="_buttonBackground_1fm7l_8",ege="_buttonBackgroundColor_1fm7l_13",tge="_innerBackgroundColor_1fm7l_16",nge="_dark_1fm7l_20",rge="_iconWrap_1fm7l_28",ige="_icon_1fm7l_1",sge="_active_1fm7l_83",oge="_buttonWrap_1fm7l_95",age="_buttonIconWrap_1fm7l_108",Age="_innerWrap_1fm7l_127",Un={iconButtonWrap:$pe,buttonBackground:qpe,buttonBackgroundColor:ege,innerBackgroundColor:tge,dark:nge,iconWrap:rge,icon:ige,active:sge,buttonWrap:oge,buttonIconWrap:age,innerWrap:Age},lge=[{name:"backpack",file:"/assets/icons/backpack.svg"},{name:"microphone",file:"/assets/icons/microphone.svg"},{name:"speechToText",file:"/assets/icons/speechToText.svg"},{name:"arrowRight",file:"/assets/icons/arrowRight.svg"},{name:"arrowLeft",file:"/assets/icons/arrowLeft.svg"},{name:"rooms",file:"/assets/icons/rooms.svg"},{name:"scenes",file:"/assets/icons/scenes.svg"},{name:"settings",file:"/assets/icons/settings.svg"},{name:"tokens",file:"/assets/icons/tokens.svg"},{name:"voice",file:"/assets/icons/voice.svg"},{name:"vr",file:"/assets/icons/vr.svg"},{name:"discord",file:"/assets/icons/discord.svg"},{name:"metamask",file:"/assets/icons/metamask.svg"},{name:"close",file:"/assets/icons/close.svg"},{name:"hide",file:"/assets/icons/hide.svg"},{name:"map",file:"/assets/icons/map.svg"},{name:"login",file:"/assets/icons/login.svg"},{name:"logout",file:"/assets/icons/logout.svg"},{name:"plus",file:"/assets/icons/plus.svg"},{name:"minus",file:"/assets/icons/minus.svg"},{name:"mint",file:"/assets/icons/mint.svg"},{name:"download",file:"/assets/icons/download.svg"},{name:"classDropHunter",file:"/assets/icons/class-drop-hunter.svg"},{name:"classEndineer",file:"/assets/icons/class-engineer.svg"},{name:"classCustom",file:"/assets/icons/class-custom.svg"},{name:"classNeuralHacker",file:"/assets/icons/class-neural-hacker.svg"},{name:"classLiskWitch",file:"/assets/icons/class-lisk-witch.svg"},{name:"classBruiser",file:"/assets/icons/class-bruiser.svg"},{name:"classBeastPainter",file:"/assets/icons/class-beast-painter.svg"},{name:"soundon",file:"/assets/icons/soundon.svg"},{name:"soundoff",file:"/assets/icons/soundoff.svg"},{name:"soundoff",file:"/assets/icons/soundoff.svg"},{name:"polygon",file:"/assets/icons/polygon.svg"}];async function cge(n){const e=lge.find(t=>t.name===n);return await fetch(e.file).then(t=>t.text()).then(t=>new DOMParser().parseFromString(t,"image/svg+xml").firstElementChild)}function In(n){const{size:e,icon:t,className:r,onClick:i,theme:s,type:o,text:a,onMouseEnter:A,active:l,onSubmit:c,minWidth:u,disabled:f}=n,d=pe.useRef(null);return pe.useEffect(()=>{t&&cge(t).then(h=>{d.current&&(d.current.innerHTML="",h&&(h.classList.add(Un.icon),d.current.append(h)))})},[t]),o&&o==="login"?J.jsxs("div",{className:Ld(r,Un.iconButtonWrap,s&&s==="dark"?Un.dark:Un.light,l&&Un.active),style:{height:e},onClick:i,onMouseEnter:A,children:[J.jsxs("svg",{width:"71",height:"67",viewBox:"0 0 71 67",className:Un.buttonBackground,xmlns:"http://www.w3.org/2000/svg",children:[J.jsx("path",{d:"M2 2H68.8452L64.1437 65H2V2Z",className:Un.buttonBackgroundColor,fill:"#D9D9D9",stroke:"#050B0E",strokeWidth:"4"}),J.jsx("path",{d:"M9 9H62L58.2676 58H9V9Z",fill:"#050B0E",className:Un.innerBackgroundColor})]}),J.jsx("span",{ref:d,className:Un.iconWrap})]}):o&&o==="icon"?J.jsxs("div",{className:Ld(r,Un.iconButtonWrap,s&&s==="dark"?Un.dark:Un.light,l&&Un.active),style:{height:e},onClick:i,onMouseEnter:A,children:[J.jsxs("svg",{className:Un.buttonBackground,width:"69",height:"63",viewBox:"0 0 69 63",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[J.jsx("path",{d:"M5 2H2.85562L3.00485 4.13918L6.7903 58.4048L6.9201 60.2656H8.78545H62.6772H64.6178L64.6763 58.3259L66.3135 4.06031L66.3756 2H64.3144H5Z",fill:"#efefef",className:Un.buttonBackgroundColor,stroke:"black",strokeWidth:"4"}),J.jsx("path",{d:"M8.77795 7.28503H61.7957L59.8437 54.7911H11.367L8.77795 7.28503Z",fill:"black",className:Un.innerBackgroundColor})]}),J.jsx("span",{ref:d,className:Un.iconWrap})]}):J.jsx("button",{className:Ld(r,Un.buttonWrap,s&&s==="dark"?Un.dark:Un.light),onClick:i,onMouseEnter:A,onSubmit:c,type:o,disabled:f,style:{minWidth:u?u+"px":""},children:J.jsxs("div",{className:Un.innerWrap,style:{fontSize:e},children:[t&&J.jsx("span",{ref:d,className:Un.buttonIconWrap,style:{height:e,width:e,opacity:f?"0.4":"1"}}),a&&a]})})}function uge(n){const{cancelOption:e=!0,confirmDialogText:t,confirmDialogWindow:r,setConfirmDialogWindow:i,confirmDialogCallback:s}=n;return r?J.jsx("div",{className:fy.container,children:J.jsxs("div",{className:fy.messageWindow,children:[J.jsx("div",{className:fy.messageTitle,children:t}),J.jsxs("div",{className:fy.buttonContainer,children:[e&&J.jsx(In,{size:16,theme:"light",text:"Cancel",onClick:()=>{s[0](!1),i(!1)}}),J.jsx(In,{size:16,theme:"light",text:"Continue",onClick:()=>{s[0](!0),i(!1)}})]})]})}):J.jsx("div",{})}const OD=4096,ZD=new z,fge=new xu,Pw=fge.load("/assets/backgrounds/main-background2.jpg");Pw.wrapS=Pw.wrapT=cs;class dge{constructor(){this.renderer=new LC({preserveDrawingBuffer:!0,antialias:!0}),this.renderer.outputEncoding=dt,this.renderer.setSize(OD,OD),this.camera=new Ir(30,1,.1,1e3)}setCamera(e,t){this.camera.position.copy(e),ZD.set(0,0,-1),this.cameraDir=ZD.applyQuaternion(this.camera.quaternion),this.cameraDir.normalize(),this.camera.position.x-=this.cameraDir.x*t,this.camera.position.z-=this.cameraDir.z*t}saveAsImage(e){let t;try{this.scene.background=Pw,this.renderer.render(this.scene,this.camera);const r="image/octet-stream",i="image/png";t=this.renderer.domElement.toDataURL(i);const s=AE.Buffer.from(t.replace(/^data:image\/\w+;base64,/,""),"base64"),o=new Blob([s],{type:"image/jpeg"});return this.saveFile(t.replace(i,r),e),this.scene.background=null,o}catch(r){return console.log(r),!1}}_createImage(e,t){this.renderer.setSize(e,t);try{this.scene.background=Pw,this.renderer.render(this.scene,this.camera);const r="image/png";let i=this.renderer.domElement.toDataURL(r);return this.scene.background=null,i}catch(r){return console.log(r),null}}saveScreenshot(e,t,r){const i=this._createImage(t,r),s="image/octet-stream",o="image/png";this.saveFile(i.replace(o,s),e)}getScreenshotImage(e,t){const r=this._createImage(e,t),i=new Image;return i.src=r,i}getScreenshotTexture(e,t){const r=this.getScreenshotImage(e,t),i=new qn(r);return i.needsUpdate=!0,i}getScreenshotBlob(e,t){const r=this._createImage(e,t),i=AE.Buffer.from(r.replace(/^data:image\/\w+;base64,/,""),"base64");return new Blob([i],{type:"image/jpeg"})}saveFile(e,t){const r=document.createElement("a");typeof r.download=="string"?(document.body.appendChild(r),r.download=t,r.href=e,r.click(),document.body.removeChild(r)):window.open(e,"_blank").document.write("<title>"+t+"</title><img src='"+e+"'/>")}}const GD={type:"change"},a1={type:"start"},JD={type:"end"};class hge extends oc{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new z,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Vu.ROTATE,MIDDLE:Vu.DOLLY,RIGHT:Vu.PAN},this.touches={ONE:Lu.ROTATE,TWO:Lu.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(x){x.addEventListener("keydown",Me),this._domElementKeyEvents=x},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(GD),r.update(),s=i.NONE},this.update=function(){const x=new z,N=new et().setFromUnitVectors(e.up,new z(0,1,0)),j=N.clone().invert(),q=new z,ne=new et,Ce=2*Math.PI;return function(){const Ee=r.object.position;x.copy(Ee).sub(r.target),x.applyQuaternion(N),a.setFromVector3(x),r.autoRotate&&s===i.NONE&&S(F()),r.enableDamping?(a.theta+=A.theta*r.dampingFactor,a.phi+=A.phi*r.dampingFactor):(a.theta+=A.theta,a.phi+=A.phi);let We=r.minAzimuthAngle,Te=r.maxAzimuthAngle;return isFinite(We)&&isFinite(Te)&&(We<-Math.PI?We+=Ce:We>Math.PI&&(We-=Ce),Te<-Math.PI?Te+=Ce:Te>Math.PI&&(Te-=Ce),We<=Te?a.theta=Math.max(We,Math.min(Te,a.theta)):a.theta=a.theta>(We+Te)/2?Math.max(We,a.theta):Math.min(Te,a.theta)),a.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=l,a.radius=Math.max(r.minDistance,Math.min(r.maxDistance,a.radius)),r.enableDamping===!0?r.target.addScaledVector(c,r.dampingFactor):r.target.add(c),x.setFromSpherical(a),x.applyQuaternion(j),Ee.copy(r.target).add(x),r.object.lookAt(r.target),r.enableDamping===!0?(A.theta*=1-r.dampingFactor,A.phi*=1-r.dampingFactor,c.multiplyScalar(1-r.dampingFactor)):(A.set(0,0,0),c.set(0,0,0)),l=1,u||q.distanceToSquared(r.object.position)>o||8*(1-ne.dot(r.object.quaternion))>o?(r.dispatchEvent(GD),q.copy(r.object.position),ne.copy(r.object.quaternion),u=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",se),r.domElement.removeEventListener("pointerdown",re),r.domElement.removeEventListener("pointercancel",_e),r.domElement.removeEventListener("wheel",Ue),r.domElement.removeEventListener("pointermove",me),r.domElement.removeEventListener("pointerup",Pe),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Me)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=i.NONE;const o=1e-6,a=new DT,A=new DT;let l=1;const c=new z;let u=!1;const f=new Ge,d=new Ge,h=new Ge,p=new Ge,m=new Ge,g=new Ge,v=new Ge,y=new Ge,w=new Ge,C=[],b={};function F(){return 2*Math.PI/60/60*r.autoRotateSpeed}function I(){return Math.pow(.95,r.zoomSpeed)}function S(x){A.theta-=x}function T(x){A.phi-=x}const H=function(){const x=new z;return function(j,q){x.setFromMatrixColumn(q,0),x.multiplyScalar(-j),c.add(x)}}(),X=function(){const x=new z;return function(j,q){r.screenSpacePanning===!0?x.setFromMatrixColumn(q,1):(x.setFromMatrixColumn(q,0),x.crossVectors(r.object.up,x)),x.multiplyScalar(j),c.add(x)}}(),Q=function(){const x=new z;return function(j,q){const ne=r.domElement;if(r.object.isPerspectiveCamera){const Ce=r.object.position;x.copy(Ce).sub(r.target);let be=x.length();be*=Math.tan(r.object.fov/2*Math.PI/180),H(2*j*be/ne.clientHeight,r.object.matrix),X(2*q*be/ne.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(H(j*(r.object.right-r.object.left)/r.object.zoom/ne.clientWidth,r.object.matrix),X(q*(r.object.top-r.object.bottom)/r.object.zoom/ne.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function B(x){r.object.isPerspectiveCamera?l/=x:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*x)),r.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function E(x){r.object.isPerspectiveCamera?l*=x:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/x)),r.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function R(x){f.set(x.clientX,x.clientY)}function k(x){v.set(x.clientX,x.clientY)}function M(x){p.set(x.clientX,x.clientY)}function L(x){d.set(x.clientX,x.clientY),h.subVectors(d,f).multiplyScalar(r.rotateSpeed);const N=r.domElement;S(2*Math.PI*h.x/N.clientHeight),T(2*Math.PI*h.y/N.clientHeight),f.copy(d),r.update()}function Z(x){y.set(x.clientX,x.clientY),w.subVectors(y,v),w.y>0?B(I()):w.y<0&&E(I()),v.copy(y),r.update()}function P(x){m.set(x.clientX,x.clientY),g.subVectors(m,p).multiplyScalar(r.panSpeed),Q(g.x,g.y),p.copy(m),r.update()}function U(x){x.deltaY<0?E(I()):x.deltaY>0&&B(I()),r.update()}function G(x){let N=!1;switch(x.code){case r.keys.UP:Q(0,r.keyPanSpeed),N=!0;break;case r.keys.BOTTOM:Q(0,-r.keyPanSpeed),N=!0;break;case r.keys.LEFT:Q(r.keyPanSpeed,0),N=!0;break;case r.keys.RIGHT:Q(-r.keyPanSpeed,0),N=!0;break}N&&(x.preventDefault(),r.update())}function oe(){if(C.length===1)f.set(C[0].pageX,C[0].pageY);else{const x=.5*(C[0].pageX+C[1].pageX),N=.5*(C[0].pageY+C[1].pageY);f.set(x,N)}}function D(){if(C.length===1)p.set(C[0].pageX,C[0].pageY);else{const x=.5*(C[0].pageX+C[1].pageX),N=.5*(C[0].pageY+C[1].pageY);p.set(x,N)}}function K(){const x=C[0].pageX-C[1].pageX,N=C[0].pageY-C[1].pageY,j=Math.sqrt(x*x+N*N);v.set(0,j)}function ce(){r.enableZoom&&K(),r.enablePan&&D()}function le(){r.enableZoom&&K(),r.enableRotate&&oe()}function he(x){if(C.length==1)d.set(x.pageX,x.pageY);else{const j=_(x),q=.5*(x.pageX+j.x),ne=.5*(x.pageY+j.y);d.set(q,ne)}h.subVectors(d,f).multiplyScalar(r.rotateSpeed);const N=r.domElement;S(2*Math.PI*h.x/N.clientHeight),T(2*Math.PI*h.y/N.clientHeight),f.copy(d)}function $(x){if(C.length===1)m.set(x.pageX,x.pageY);else{const N=_(x),j=.5*(x.pageX+N.x),q=.5*(x.pageY+N.y);m.set(j,q)}g.subVectors(m,p).multiplyScalar(r.panSpeed),Q(g.x,g.y),p.copy(m)}function ae(x){const N=_(x),j=x.pageX-N.x,q=x.pageY-N.y,ne=Math.sqrt(j*j+q*q);y.set(0,ne),w.set(0,Math.pow(y.y/v.y,r.zoomSpeed)),B(w.y),v.copy(y)}function te(x){r.enableZoom&&ae(x),r.enablePan&&$(x)}function Ae(x){r.enableZoom&&ae(x),r.enableRotate&&he(x)}function re(x){r.enabled!==!1&&(C.length===0&&(r.domElement.setPointerCapture(x.pointerId),r.domElement.addEventListener("pointermove",me),r.domElement.addEventListener("pointerup",Pe)),de(x),x.pointerType==="touch"?W(x):Se(x))}function me(x){r.enabled!==!1&&(x.pointerType==="touch"?O(x):Fe(x))}function Pe(x){Be(x),C.length===0&&(r.domElement.releasePointerCapture(x.pointerId),r.domElement.removeEventListener("pointermove",me),r.domElement.removeEventListener("pointerup",Pe)),r.dispatchEvent(JD),s=i.NONE}function _e(x){Be(x)}function Se(x){let N;switch(x.button){case 0:N=r.mouseButtons.LEFT;break;case 1:N=r.mouseButtons.MIDDLE;break;case 2:N=r.mouseButtons.RIGHT;break;default:N=-1}switch(N){case Vu.DOLLY:if(r.enableZoom===!1)return;k(x),s=i.DOLLY;break;case Vu.ROTATE:if(x.ctrlKey||x.metaKey||x.shiftKey){if(r.enablePan===!1)return;M(x),s=i.PAN}else{if(r.enableRotate===!1)return;R(x),s=i.ROTATE}break;case Vu.PAN:if(x.ctrlKey||x.metaKey||x.shiftKey){if(r.enableRotate===!1)return;R(x),s=i.ROTATE}else{if(r.enablePan===!1)return;M(x),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(a1)}function Fe(x){switch(s){case i.ROTATE:if(r.enableRotate===!1)return;L(x);break;case i.DOLLY:if(r.enableZoom===!1)return;Z(x);break;case i.PAN:if(r.enablePan===!1)return;P(x);break}}function Ue(x){r.enabled===!1||r.enableZoom===!1||s!==i.NONE||(x.preventDefault(),r.dispatchEvent(a1),U(x),r.dispatchEvent(JD))}function Me(x){r.enabled===!1||r.enablePan===!1||G(x)}function W(x){switch(V(x),C.length){case 1:switch(r.touches.ONE){case Lu.ROTATE:if(r.enableRotate===!1)return;oe(),s=i.TOUCH_ROTATE;break;case Lu.PAN:if(r.enablePan===!1)return;D(),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(r.touches.TWO){case Lu.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ce(),s=i.TOUCH_DOLLY_PAN;break;case Lu.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;le(),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(a1)}function O(x){switch(V(x),s){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;he(x),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;$(x),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;te(x),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ae(x),r.update();break;default:s=i.NONE}}function se(x){r.enabled!==!1&&x.preventDefault()}function de(x){C.push(x)}function Be(x){delete b[x.pointerId];for(let N=0;N<C.length;N++)if(C[N].pointerId==x.pointerId){C.splice(N,1);return}}function V(x){let N=b[x.pointerId];N===void 0&&(N=new Ge,b[x.pointerId]=N),N.set(x.pageX,x.pageY)}function _(x){const N=x.pointerId===C[0].pointerId?C[1]:C[0];return b[N.pointerId]}r.domElement.addEventListener("contextmenu",se),r.domElement.addEventListener("pointerdown",re),r.domElement.addEventListener("pointercancel",_e),r.domElement.addEventListener("wheel",Ue,{passive:!1}),this.update()}}function pge({sceneModel:n,lookatManager:e}){const{scene:t,model:r,setModel:i,currentCameraMode:s,setControls:o,setMousePosition:a,setCamera:A}=pe.useContext(ki),l=p=>{a({x:p.x,y:p.y})};pe.useEffect(()=>(window.addEventListener("mousemove",l),()=>window.removeEventListener("mousemove",l)),[l]);let c=!1,[u,f]=pe.useState(!1);const d=new uZ,h=new Ge;return pe.useEffect(()=>{if(c||u)return;f(!0),c=!0,t.add(n);const p=new Ir(30,window.innerWidth/window.innerHeight,.1,1e3);A(p),e.setCamera(p),p.position.set(0,1.3,2);const m=document.getElementById("editor-scene"),g=new LC({canvas:m,antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),v=()=>{g.setSize(window.innerWidth,window.innerHeight),p.aspect=window.innerWidth/window.innerHeight,p.updateProjectionMatrix()};window.addEventListener("resize",v),g.setSize(window.innerWidth,window.innerHeight),g.setPixelRatio(window.devicePixelRatio),g.outputEncoding=dt;const y=new hge(p,g.domElement);y.minDistance=1,y.maxDistance=4,y.maxPolarAngle=Math.PI/2,y.enablePan=!0,y.target=new z(0,1,0),y.enableDamping=!0,y.dampingFactor=.1,o(y);const w=new z(-.5,0,-.5),C=new z(.5,1.5,.5),b=()=>{requestAnimationFrame(b),s!==WJ.AR&&(y.target.clamp(w,C),y==null||y.update(),e.update(),g.render(t,p))};b();const F=new kt;async function I(){r!=null&&t!=null&&t.remove(r),i(F),t.add(F)}I();const S=()=>{F.traverse(B=>{B.isMesh&&B.userData.origIndexBuffer&&(B.userData.clippedIndexGeometry=B.geometry.index.clone(),B.geometry.setIndex(B.userData.origIndexBuffer))})},T=()=>{F.traverse(B=>{B.isMesh&&B.userData.origIndexBuffer&&B.geometry.setIndex(B.userData.clippedIndexGeometry)})},H=(B,E)=>{for(let R=0;R<B.length;R+=3)if(E[0]==B[R]&&E[1]==B[R+1]&&E[2]==B[R+2])return R;return-1},X=(B,E)=>{var Z,P;const R=B.object,k=B.face,M=[k.a,k.b,k.c],L=(P=(Z=R.userData)==null?void 0:Z.clippedIndexGeometry)==null?void 0:P.array;if(L!=null){const U=H(L,M),G=Array.from(L);if(U==-1&&!E){const oe=[...G,...M];R.userData.clippedIndexGeometry=new st(new Uint32Array(oe),1,!1)}U!=1&&E&&(G.splice(U,3),R.userData.clippedIndexGeometry=new st(new Uint32Array(G),1,!1))}},Q=B=>{const E=B.ctrlKey;{S();const R=g.domElement.getBoundingClientRect();h.x=(B.clientX-R.left)/R.width*2-1,h.y=-((B.clientY-R.top)/R.height)*2+1,d.setFromCamera(h,p);const k=d.intersectObjects(F.children);if(k.length>0){const M=k[0];X(M,E)}T()}};return m.addEventListener("click",Q),()=>{removeEventListener("mousemove",l),removeEventListener("resize",l),window.removeEventListener("click",Q),t.remove(r)}},[]),J.jsx(J.Fragment,{})}const gge="/assets/anata-a574c58f.png",mge="_backgroundImg_idcma_1",vge="_Background_idcma_18",yge="_webamark_idcma_26",Bge="_logo_idcma_34",Jp={backgroundImg:mge,Background:vge,webamark:yge,logo:Bge};function wge(){return J.jsxs("div",{className:Jp.backgroundImg,children:[J.jsx("div",{className:Jp.backgroundBlur}),J.jsx("div",{className:Jp.Background,children:J.jsx("div",{className:Jp.webamark,children:J.jsx("img",{src:gge,className:Jp.logo})})})]})}const Cge="_chatContainer_1659d_1",bge="_scrollContainer_1659d_16",xge="_topLine_1659d_26",Ige="_bottomLine_1659d_54",Fge="_buttonContainer_1659d_82",Ege="_buttonLeft_1659d_91",Uge="_buttonRight_1659d_95",_ge="_buttonCenter_1659d_99",bc={chatContainer:Cge,scrollContainer:bge,topLine:xge,bottomLine:Ige,buttonContainer:Fge,buttonLeft:Ege,buttonRight:Uge,buttonCenter:_ge};var hU={},Sge={get exports(){return hU},set exports(n){hU=n}},Ww={},Qge={get exports(){return Ww},set exports(n){Ww=n}},PH=function(e,t){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(t,i)}},Rge=PH,zS=Object.prototype.toString,XS=function(n){return function(e){var t=zS.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())}}(Object.create(null));function Eu(n){return n=n.toLowerCase(),function(t){return XS(t)===n}}function YS(n){return Array.isArray(n)}function Ow(n){return typeof n>"u"}function Mge(n){return n!==null&&!Ow(n)&&n.constructor!==null&&!Ow(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}var WH=Eu("ArrayBuffer");function Tge(n){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&WH(n.buffer),e}function Nge(n){return typeof n=="string"}function kge(n){return typeof n=="number"}function OH(n){return n!==null&&typeof n=="object"}function uB(n){if(XS(n)!=="object")return!1;var e=Object.getPrototypeOf(n);return e===null||e===Object.prototype}var Dge=Eu("Date"),Vge=Eu("File"),Lge=Eu("Blob"),Pge=Eu("FileList");function KS(n){return zS.call(n)==="[object Function]"}function Wge(n){return OH(n)&&KS(n.pipe)}function Oge(n){var e="[object FormData]";return n&&(typeof FormData=="function"&&n instanceof FormData||zS.call(n)===e||KS(n.toString)&&n.toString()===e)}var Zge=Eu("URLSearchParams");function Gge(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function Jge(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function jS(n,e){if(!(n===null||typeof n>"u"))if(typeof n!="object"&&(n=[n]),YS(n))for(var t=0,r=n.length;t<r;t++)e.call(null,n[t],t,n);else for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.call(null,n[i],i,n)}function pU(){var n={};function e(i,s){uB(n[s])&&uB(i)?n[s]=pU(n[s],i):uB(i)?n[s]=pU({},i):YS(i)?n[s]=i.slice():n[s]=i}for(var t=0,r=arguments.length;t<r;t++)jS(arguments[t],e);return n}function Hge(n,e,t){return jS(e,function(i,s){t&&typeof i=="function"?n[s]=Rge(i,t):n[s]=i}),n}function zge(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n}function Xge(n,e,t,r){n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,t&&Object.assign(n.prototype,t)}function Yge(n,e,t){var r,i,s,o={};e=e||{};do{for(r=Object.getOwnPropertyNames(n),i=r.length;i-- >0;)s=r[i],o[s]||(e[s]=n[s],o[s]=!0);n=Object.getPrototypeOf(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e}function Kge(n,e,t){n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return r!==-1&&r===t}function jge(n){if(!n)return null;var e=n.length;if(Ow(e))return null;for(var t=new Array(e);e-- >0;)t[e]=n[e];return t}var $ge=function(n){return function(e){return n&&e instanceof n}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),Mr={isArray:YS,isArrayBuffer:WH,isBuffer:Mge,isFormData:Oge,isArrayBufferView:Tge,isString:Nge,isNumber:kge,isObject:OH,isPlainObject:uB,isUndefined:Ow,isDate:Dge,isFile:Vge,isBlob:Lge,isFunction:KS,isStream:Wge,isURLSearchParams:Zge,isStandardBrowserEnv:Jge,forEach:jS,merge:pU,extend:Hge,trim:Gge,stripBOM:zge,inherits:Xge,toFlatObject:Yge,kindOf:XS,kindOfTest:Eu,endsWith:Kge,toArray:jge,isTypedArray:$ge,isFileList:Pge},yf=Mr;function HD(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ZH=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(yf.isURLSearchParams(t))i=t.toString();else{var s=[];yf.forEach(t,function(A,l){A===null||typeof A>"u"||(yf.isArray(A)?l=l+"[]":A=[A],yf.forEach(A,function(u){yf.isDate(u)?u=u.toISOString():yf.isObject(u)&&(u=JSON.stringify(u)),s.push(HD(l)+"="+HD(u))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},qge=Mr;function lb(){this.handlers=[]}lb.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};lb.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};lb.prototype.forEach=function(e){qge.forEach(this.handlers,function(r){r!==null&&e(r)})};var eme=lb,tme=Mr,nme=function(e,t){tme.forEach(e,function(i,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[s])})},GH=Mr;function yh(n,e,t,r,i){Error.call(this),this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i)}GH.inherits(yh,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var JH=yh.prototype,HH={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(n){HH[n]={value:n}});Object.defineProperties(yh,HH);Object.defineProperty(JH,"isAxiosError",{value:!0});yh.from=function(n,e,t,r,i,s){var o=Object.create(JH);return GH.toFlatObject(n,o,function(A){return A!==Error.prototype}),yh.call(o,n.message,e,t,r,i),o.name=n.name,s&&Object.assign(o,s),o};var Yh=yh,zH={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},yo=Mr;function rme(n,e){e=e||new FormData;var t=[];function r(s){return s===null?"":yo.isDate(s)?s.toISOString():yo.isArrayBuffer(s)||yo.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function i(s,o){if(yo.isPlainObject(s)||yo.isArray(s)){if(t.indexOf(s)!==-1)throw Error("Circular reference detected in "+o);t.push(s),yo.forEach(s,function(A,l){if(!yo.isUndefined(A)){var c=o?o+"."+l:l,u;if(A&&!o&&typeof A=="object"){if(yo.endsWith(l,"{}"))A=JSON.stringify(A);else if(yo.endsWith(l,"[]")&&(u=yo.toArray(A))){u.forEach(function(f){!yo.isUndefined(f)&&e.append(c,r(f))});return}}i(A,c)}}),t.pop()}else e.append(o,r(s))}return i(n),e}var XH=rme,A1,zD;function ime(){if(zD)return A1;zD=1;var n=Yh;return A1=function(t,r,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?t(i):r(new n("Request failed with status code "+i.status,[n.ERR_BAD_REQUEST,n.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},A1}var l1,XD;function sme(){if(XD)return l1;XD=1;var n=Mr;return l1=n.isStandardBrowserEnv()?function(){return{write:function(r,i,s,o,a,A){var l=[];l.push(r+"="+encodeURIComponent(i)),n.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),n.isString(o)&&l.push("path="+o),n.isString(a)&&l.push("domain="+a),A===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),l1}var ome=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},ame=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},Ame=ome,lme=ame,YH=function(e,t){return e&&!Ame(t)?lme(e,t):t},c1,YD;function cme(){if(YD)return c1;YD=1;var n=Mr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return c1=function(r){var i={},s,o,a;return r&&n.forEach(r.split(`
`),function(l){if(a=l.indexOf(":"),s=n.trim(l.substr(0,a)).toLowerCase(),o=n.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},c1}var u1,KD;function ume(){if(KD)return u1;KD=1;var n=Mr;return u1=n.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function s(o){var a=o;return t&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=s(window.location.href),function(a){var A=n.isString(a)?s(a):a;return A.protocol===i.protocol&&A.host===i.host}}():function(){return function(){return!0}}(),u1}var f1,jD;function cb(){if(jD)return f1;jD=1;var n=Yh,e=Mr;function t(r){n.call(this,r??"canceled",n.ERR_CANCELED),this.name="CanceledError"}return e.inherits(t,n,{__CANCEL__:!0}),f1=t,f1}var d1,$D;function fme(){return $D||($D=1,d1=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}),d1}var h1,qD;function eV(){if(qD)return h1;qD=1;var n=Mr,e=ime(),t=sme(),r=ZH,i=YH,s=cme(),o=ume(),a=zH,A=Yh,l=cb(),c=fme();return h1=function(f){return new Promise(function(h,p){var m=f.data,g=f.headers,v=f.responseType,y;function w(){f.cancelToken&&f.cancelToken.unsubscribe(y),f.signal&&f.signal.removeEventListener("abort",y)}n.isFormData(m)&&n.isStandardBrowserEnv()&&delete g["Content-Type"];var C=new XMLHttpRequest;if(f.auth){var b=f.auth.username||"",F=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";g.Authorization="Basic "+btoa(b+":"+F)}var I=i(f.baseURL,f.url);C.open(f.method.toUpperCase(),r(I,f.params,f.paramsSerializer),!0),C.timeout=f.timeout;function S(){if(C){var X="getAllResponseHeaders"in C?s(C.getAllResponseHeaders()):null,Q=!v||v==="text"||v==="json"?C.responseText:C.response,B={data:Q,status:C.status,statusText:C.statusText,headers:X,config:f,request:C};e(function(R){h(R),w()},function(R){p(R),w()},B),C=null}}if("onloadend"in C?C.onloadend=S:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(S)},C.onabort=function(){C&&(p(new A("Request aborted",A.ECONNABORTED,f,C)),C=null)},C.onerror=function(){p(new A("Network Error",A.ERR_NETWORK,f,C,C)),C=null},C.ontimeout=function(){var Q=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",B=f.transitional||a;f.timeoutErrorMessage&&(Q=f.timeoutErrorMessage),p(new A(Q,B.clarifyTimeoutError?A.ETIMEDOUT:A.ECONNABORTED,f,C)),C=null},n.isStandardBrowserEnv()){var T=(f.withCredentials||o(I))&&f.xsrfCookieName?t.read(f.xsrfCookieName):void 0;T&&(g[f.xsrfHeaderName]=T)}"setRequestHeader"in C&&n.forEach(g,function(Q,B){typeof m>"u"&&B.toLowerCase()==="content-type"?delete g[B]:C.setRequestHeader(B,Q)}),n.isUndefined(f.withCredentials)||(C.withCredentials=!!f.withCredentials),v&&v!=="json"&&(C.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&C.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(y=function(X){C&&(p(!X||X&&X.type?new l:X),C.abort(),C=null)},f.cancelToken&&f.cancelToken.subscribe(y),f.signal&&(f.signal.aborted?y():f.signal.addEventListener("abort",y))),m||(m=null);var H=c(I);if(H&&["http","https","file"].indexOf(H)===-1){p(new A("Unsupported protocol "+H+":",A.ERR_BAD_REQUEST,f));return}C.send(m)})},h1}var p1,tV;function dme(){return tV||(tV=1,p1=null),p1}var dr=Mr,nV=nme,rV=Yh,hme=zH,pme=XH,gme={"Content-Type":"application/x-www-form-urlencoded"};function iV(n,e){!dr.isUndefined(n)&&dr.isUndefined(n["Content-Type"])&&(n["Content-Type"]=e)}function mme(){var n;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(n=eV()),n}function vme(n,e,t){if(dr.isString(n))try{return(e||JSON.parse)(n),dr.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}var ub={transitional:hme,adapter:mme(),transformRequest:[function(e,t){if(nV(t,"Accept"),nV(t,"Content-Type"),dr.isFormData(e)||dr.isArrayBuffer(e)||dr.isBuffer(e)||dr.isStream(e)||dr.isFile(e)||dr.isBlob(e))return e;if(dr.isArrayBufferView(e))return e.buffer;if(dr.isURLSearchParams(e))return iV(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var r=dr.isObject(e),i=t&&t["Content-Type"],s;if((s=dr.isFileList(e))||r&&i==="multipart/form-data"){var o=this.env&&this.env.FormData;return pme(s?{"files[]":e}:e,o&&new o)}else if(r||i==="application/json")return iV(t,"application/json"),vme(e);return e}],transformResponse:[function(e){var t=this.transitional||ub.transitional,r=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!r&&this.responseType==="json";if(s||i&&dr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?rV.from(o,rV.ERR_BAD_RESPONSE,this,null,this.response):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dme()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};dr.forEach(["delete","get","head"],function(e){ub.headers[e]={}});dr.forEach(["post","put","patch"],function(e){ub.headers[e]=dr.merge(gme)});var $S=ub,yme=Mr,Bme=$S,wme=function(e,t,r){var i=this||Bme;return yme.forEach(r,function(o){e=o.call(i,e,t)}),e},g1,sV;function KH(){return sV||(sV=1,g1=function(e){return!!(e&&e.__CANCEL__)}),g1}var oV=Mr,m1=wme,Cme=KH(),bme=$S,xme=cb();function v1(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new xme}var Ime=function(e){v1(e),e.headers=e.headers||{},e.data=m1.call(e,e.data,e.headers,e.transformRequest),e.headers=oV.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),oV.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||bme.adapter;return t(e).then(function(i){return v1(e),i.data=m1.call(e,i.data,i.headers,e.transformResponse),i},function(i){return Cme(i)||(v1(e),i&&i.response&&(i.response.data=m1.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Wi=Mr,jH=function(e,t){t=t||{};var r={};function i(c,u){return Wi.isPlainObject(c)&&Wi.isPlainObject(u)?Wi.merge(c,u):Wi.isPlainObject(u)?Wi.merge({},u):Wi.isArray(u)?u.slice():u}function s(c){if(Wi.isUndefined(t[c])){if(!Wi.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],t[c])}function o(c){if(!Wi.isUndefined(t[c]))return i(void 0,t[c])}function a(c){if(Wi.isUndefined(t[c])){if(!Wi.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,t[c])}function A(c){if(c in t)return i(e[c],t[c]);if(c in e)return i(void 0,e[c])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:A};return Wi.forEach(Object.keys(e).concat(Object.keys(t)),function(u){var f=l[u]||s,d=f(u);Wi.isUndefined(d)&&f!==A||(r[u]=d)}),r},y1,aV;function $H(){return aV||(aV=1,y1={version:"0.27.2"}),y1}var Fme=$H().version,ll=Yh,qS={};["object","boolean","number","function","string","symbol"].forEach(function(n,e){qS[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});var AV={};qS.transitional=function(e,t,r){function i(s,o){return"[Axios v"+Fme+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return function(s,o,a){if(e===!1)throw new ll(i(o," has been removed"+(t?" in "+t:"")),ll.ERR_DEPRECATED);return t&&!AV[o]&&(AV[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function Eme(n,e,t){if(typeof n!="object")throw new ll("options must be an object",ll.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(n),i=r.length;i-- >0;){var s=r[i],o=e[s];if(o){var a=n[s],A=a===void 0||o(a,s,n);if(A!==!0)throw new ll("option "+s+" must be "+A,ll.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ll("Unknown option "+s,ll.ERR_BAD_OPTION)}}var Ume={assertOptions:Eme,validators:qS},qH=Mr,_me=ZH,lV=eme,cV=Ime,fb=jH,Sme=YH,e4=Ume,Bf=e4.validators;function Bh(n){this.defaults=n,this.interceptors={request:new lV,response:new lV}}Bh.prototype.request=function(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=fb(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&e4.assertOptions(r,{silentJSONParsing:Bf.transitional(Bf.boolean),forcedJSONParsing:Bf.transitional(Bf.boolean),clarifyTimeoutError:Bf.transitional(Bf.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(t)===!1||(s=s&&d.synchronous,i.unshift(d.fulfilled,d.rejected))});var o=[];this.interceptors.response.forEach(function(d){o.push(d.fulfilled,d.rejected)});var a;if(!s){var A=[cV,void 0];for(Array.prototype.unshift.apply(A,i),A=A.concat(o),a=Promise.resolve(t);A.length;)a=a.then(A.shift(),A.shift());return a}for(var l=t;i.length;){var c=i.shift(),u=i.shift();try{l=c(l)}catch(f){u(f);break}}try{a=cV(l)}catch(f){return Promise.reject(f)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};Bh.prototype.getUri=function(e){e=fb(this.defaults,e);var t=Sme(e.baseURL,e.url);return _me(t,e.params,e.paramsSerializer)};qH.forEach(["delete","get","head","options"],function(e){Bh.prototype[e]=function(t,r){return this.request(fb(r||{},{method:e,url:t,data:(r||{}).data}))}});qH.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(fb(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Bh.prototype[e]=t(),Bh.prototype[e+"Form"]=t(!0)});var Qme=Bh,B1,uV;function Rme(){if(uV)return B1;uV=1;var n=cb();function e(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(o){r=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(A){i.subscribe(A),o=A}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},t(function(o){i.reason||(i.reason=new n(o),r(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},e.prototype.unsubscribe=function(r){if(this._listeners){var i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var r,i=new e(function(o){r=o});return{token:i,cancel:r}},B1=e,B1}var w1,fV;function Mme(){return fV||(fV=1,w1=function(e){return function(r){return e.apply(null,r)}}),w1}var C1,dV;function Tme(){if(dV)return C1;dV=1;var n=Mr;return C1=function(t){return n.isObject(t)&&t.isAxiosError===!0},C1}var hV=Mr,Nme=PH,fB=Qme,kme=jH,Dme=$S;function t4(n){var e=new fB(n),t=Nme(fB.prototype.request,e);return hV.extend(t,fB.prototype,e),hV.extend(t,e),t.create=function(i){return t4(kme(n,i))},t}var Ni=t4(Dme);Ni.Axios=fB;Ni.CanceledError=cb();Ni.CancelToken=Rme();Ni.isCancel=KH();Ni.VERSION=$H().version;Ni.toFormData=XH;Ni.AxiosError=Yh;Ni.Cancel=Ni.CanceledError;Ni.all=function(e){return Promise.all(e)};Ni.spread=Mme();Ni.isAxiosError=Tme();Qge.exports=Ni;Ww.default=Ni;(function(n){n.exports=Ww})(Sge);const n4=m3(hU),r4={"Female 1":"1QnOliOAmerMUNuo2wXoH-YoainoSjZen","Female 2":"132G6oD0HHPPn4t1H6IkYv18_F0UVLWgi","Female 3":"1CdYZ2r52mtgJsFs88U0ZViMSnzpQ_HRp","Male 1":"17MQWS6m6VKkiU9KWRNGbTemZ0fIBKm0O","Male 2":"1AwNZizuEmCgmnpAlqGLXWh_mvTm6OLbM","Male 3":"1TKFdmFLttjjzByj2fZW8J70ZHjR-RTwc",Robot:"1NwpxG6kQ5lxwjPyuZTR0M9qc_7bMqPUH"},Pd={red:{color:"#FF0000",fontColor:"#FF9494"},orange:{color:"#FF7300",fontColor:"#FF9A47"},yellow:{color:"#FFC800",fontColor:"#FFC800"},green:{color:"#99FF00",fontColor:"#99FF00"},blue:{color:"#00AAFF",fontColor:"#38BDFF"},indigo:{color:"#0062FF",fontColor:"#80B0FF"},violet:{color:"#C800FF",fontColor:"#EDADFF"},purple:{color:"#6600FF",fontColor:"#C59EFF"},pink:{color:"#FF94D2",fontColor:"#FF94D2"},black:{color:"#000000",fontColor:"#BFBFBF"},white:{color:"#FFFFFF",fontColor:"#FFFFFF"}},Vme={confused:["Huh?","What?","Eh?","Nani?"],silent:["..."],thoughtful:["Hmmm"],neutral:["Can you say that again?","Can you repeat that?","Please say that again","Sorry I didnt understand, can you repeat that?"]},Lme="_chatBox_1fp89_1",Pme="_messages_1fp89_50",Wme="_scrollBox_1fp89_67",Ome="_send_1fp89_78",Zme="_mic_1fp89_90",Gme="_sendButton_1fp89_94",Jme="_speaker_1fp89_100",Hme="_warning_1fp89_121",zme="_isTyping_1fp89_130",Xme="_show_1fp89_136",Ko={chatBox:Lme,messages:Pme,scrollBox:Wme,send:Ome,mic:Zme,sendButton:Gme,speaker:Jme,warning:Hme,isTyping:zme,show:Xme};var Yme={serverUrl:"http://localhost:20741",clientId:"any",accessToken:"test1234"},cl={language:"en-US",task:"",model:"",continuous:!0,optimizeFinalResult:!0,messageFormat:"default",engineOptions:{}},b1="",pV={},dy={},gV;function Kme(n){if(console.log("INFO - Server version: "+n.version),console.log("INFO - Active engine: "+n.engine),b1=n.engine,console.log("INFO - Available ASR languages: "+JSON.stringify(n.languages,null,2)),cl.language=n.languages[0],n.languages,console.log("INFO - Available ASR models: "+JSON.stringify(n.models,null,2)),cl.model=n.models[0],console.log("INFO - ASR model properties: "+JSON.stringify(n.modelProperties,null,2)),n.models.forEach(function(e,t){dy[e]=n.modelProperties[t],dy[e].language=n.languages[t],dy[e].engine||(dy[e].engine=b1)}),console.log("INFO - Available ASR features: "+JSON.stringify(n.features,null,2)),Array.isArray(n.features)?pV[b1]=n.features:pV=n.features,!gV){gV={};let e=navigator.language,t;if(e&&n.languages&&n.models){let r=n.languages.indexOf(e);if(r>=0)t=r;else{let i=e.substring(0,2);for(let s=0;s<n.languages.length;s++)if(n.languages[s].indexOf(i)==0){t=s;break}}}t!=null&&(cl.language=n.languages[t],cl.model=n.models[t]),console.log("INFO - Default language/model: "+cl.language+"/"+cl.model+" - NOTE: If you set 'language' via settings make sure to remove 'model'!")}}function jme(){console.log("INFO - Loading server settings...");var n=new AbortController;setTimeout(function(){n.abort()},8e3),fetch(Yme.serverUrl+"/settings",{method:"GET",signal:n.signal}).then(function(e){if(e.ok)return e.json();throw{name:"FetchError",message:e.statusText,code:e.status}}).then(function(e){console.log("Server Info",e),e&&e.settings&&Kme(e.settings)}).catch(function(e){console.error("Server Info Fetch ERROR",e)})}var Od;class gU{constructor(e){Nu(this,Od,[]);tt(this,"length",0);return Tb(this,Od,e),new Proxy(this,{get:(t,r)=>{if(r==="length")return vs(this,Od).length;if(typeof+r=="number")return vs(this,Od)[r]}})}}Od=new WeakMap;class Zw{constructor(e){tt(this,"resultIndex",0);tt(this,"results");this.results=new gU(e)}_dispatch(e,t){const r=Object.create(Zw);r.resultIndex=this.resultIndex,r.results=this.results,r.type=t,e._dispatchEvent(r)}}class $me{constructor(){tt(this,"transcript","");tt(this,"confidence",1)}}var Zd;class qme{constructor(e){Nu(this,Zd,[]);tt(this,"isFinal",!1);tt(this,"length",0);return Tb(this,Zd,e),new Proxy(this,{get:(t,r)=>{if(r==="isFinal")return this.isFinal;if(r==="length")return vs(this,Zd).length;if(typeof r=="symbol")return"You tried to access the raw list I think?";if(typeof+r=="number")return vs(this,Zd)[r]},[Symbol.toPrimitive]:(t,r)=>{console.log("Am I in here?")}})}}Zd=new WeakMap;const Hp=Object.freeze({NOSPEECH:"no-speech",ABORTED:"aborted",AUDIOCAPTURE:"audio-capture",NETWORK:"network",NOTALLOWED:"not-allowed",SERVICENOTALLOWED:"service-not-allowed",BADGRAMMAR:"bad-grammar",LANGUAGENOTSUPPORTED:"language-not-supported"});class md{constructor(){tt(this,"error","");tt(this,"message","")}_dispatch(e){const t=Object.create(md);t.error=this.error,t.message=this.message,t.type="error",e._dispatchEvent(t)}}function e0e(n,e){var t=atob(n);if(e){for(var r=new Uint8Array(t.length),i=0,s=t.length;i<s;++i)r[i]=t.charCodeAt(i);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return t}function t0e(n,e,t){var r=e===void 0?null:e,i=t===void 0?!1:t,s=e0e(n,i),o=s.indexOf(`
`,10)+1,a=s.substring(o)+(r?"//# sourceMappingURL="+r:""),A=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(A)}function i4(n,e,t){var r;return function(s){return r=r||t0e(n,e,t),new Worker(r,s)}}var n0e=i4("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqDQogICAqIE9yaWdpbmFsIGNvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMgLSBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wOw0KICAgKiBNb2RpZmllZCBmb3IgU0VQSUEgcHJvamVjdCAoTUlUIExpY2Vuc2UpDQogICAqLw0KICAgDQogIC8qKg0KICAgKiBBIEpTIEZJRk8gaW1wbGVtZW50YXRpb24gZm9yIHRoZSBBdWRpb1dvcmtsZXQuDQogICAqIE5vdGU6DQogICAqICAtIFRoZSBjaGFubmVsIGNvdW50IG9mIGlucHV0L291dHB1dCBjYW5ub3QgYmUgY2hhbmdlZCBkeW5hbWljYWxseS4NCiAgICogICAgVGhlIEF1ZGlvV29ya2xldE5vZGUgc2hvdWxkIGJlIGNvbmZpZ3VyZWQgd2l0aCB0aGUgYC5jaGFubmVsQ291bnQgPSBrYA0KICAgKiAgICAod2hlcmUgayBpcyB0aGUgY2hhbm5lbCBjb3VudCB5b3Ugd2FudCkgYW5kIGAuY2hhbm5lbENvdW50TW9kZSA9IGV4cGxpY2l0YC4NCiAgICoNCiAgICogQGNsYXNzDQogICAqLw0KICAgY2xhc3MgUmluZ0J1ZmZlciB7DQogICAgLyoqDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBsZW5ndGggQnVmZmVyIGxlbmd0aCBpbiBmcmFtZXMuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBjaGFubmVsQ291bnQgQnVmZmVyIGNoYW5uZWwgY291bnQuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBwcmVjaXNpb24gIlVpbnQ4IiwgIkludDgiLCAiVWludDE2IiwgIkludDE2IiwgIkZsb2F0MzIiIGV0Yy4NCiAgICAgKi8NCiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsIGNoYW5uZWxDb3VudCwgcHJlY2lzaW9uKSB7DQogICAgICB0aGlzLl9yZWFkSW5kZXggPSAwOw0KICAgICAgdGhpcy5fd3JpdGVJbmRleCA9IDA7DQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KDQogICAgICB0aGlzLl9jaGFubmVsQ291bnQgPSBjaGFubmVsQ291bnQ7DQogICAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGg7DQogICAgICB0aGlzLl9jaGFubmVsRGF0YSA9IFtdOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsraSkgew0KICAJICBpZiAocHJlY2lzaW9uID09ICJVaW50MTYiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgVWludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDE2Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIlVpbnQ4Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDgiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgSW50OEFycmF5KGxlbmd0aCk7IH0NCiAgCSAgZWxzZSB7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEZsb2F0MzJBcnJheShsZW5ndGgpOyB9DQogICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2V0dGVyIGZvciBBdmFpbGFibGUgZnJhbWVzIGluIGJ1ZmZlci4NCiAgICAgKg0KICAgICAqIEByZXR1cm4ge251bWJlcn0gQXZhaWxhYmxlIGZyYW1lcyBpbiBidWZmZXIuDQogICAgICovDQogICAgZ2V0IGZyYW1lc0F2YWlsYWJsZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9mcmFtZXNBdmFpbGFibGU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUHVzaCBhIHNlcXVlbmNlIG9mIEFycmF5cyB0byBidWZmZXIuDQogICAgICoNCiAgICAgKiBAcGFyYW0gIHthcnJheX0gYXJyYXlTZXF1ZW5jZSBBIHNlcXVlbmNlIG9mIEFycmF5cy4NCiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gY3VzdG9tVHJhbnNmb3JtIEEgZnVuY3Rpb24gb2YgKGFycmF5LCBjaGFubmVsLCBpbmRleCkgdG8gdHJhbnNmb3JtIHRoZSBpbnB1dCBkdXJpbmcgcHVzaCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVzaChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIHxhcnJheVNlcXVlbmNlfCBzdG9yYWdlIHRvIHRoZSBpbnRlcm5hbCBidWZmZXIuDQogICAgICBsZXQgc291cmNlTGVuZ3RoID0gYXJyYXlTZXF1ZW5jZVswXS5sZW5ndGg7DQogIAlsZXQgdHJhbnNmb3JtID0gY3VzdG9tVHJhbnNmb3JtIHx8IGZ1bmN0aW9uKHRoaXNBcnJheSwgY2hhbm5lbCwgaSl7DQogIAkJcmV0dXJuIHRoaXNBcnJheVtjaGFubmVsXVtpXTsNCiAgCX07DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZUxlbmd0aDsgKytpKSB7DQogICAgICAgIGxldCB3cml0ZUluZGV4ID0gKHRoaXMuX3dyaXRlSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIHRoaXMuX2NoYW5uZWxEYXRhW2NoYW5uZWxdW3dyaXRlSW5kZXhdID0gdHJhbnNmb3JtKGFycmF5U2VxdWVuY2UsIGNoYW5uZWwsIGkpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHRoaXMuX3dyaXRlSW5kZXggKz0gc291cmNlTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3dyaXRlSW5kZXggPj0gdGhpcy5fbGVuZ3RoKSB7DQogICAgICAgIHRoaXMuX3dyaXRlSW5kZXggPSB0aGlzLl93cml0ZUluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICAvLyBGb3IgZXhjZXNzaXZlIGZyYW1lcywgdGhlIGJ1ZmZlciB3aWxsIGJlIG92ZXJ3cml0dGVuLg0KICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlICs9IHNvdXJjZUxlbmd0aDsNCiAgICAgIGlmICh0aGlzLl9mcmFtZXNBdmFpbGFibGUgPiB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlID0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFB1bGwgZGF0YSBvdXQgb2YgYnVmZmVyIGFuZCBmaWxsIGEgZ2l2ZW4gc2VxdWVuY2Ugb2YgQXJyYXlzLg0KICAgICAqDQogICAgICogQHBhcmFtICB7YXJyYXl9IGFycmF5U2VxdWVuY2UgQW4gYXJyYXkgb2YgQXJyYXlzLg0KICAgICAqIEBwYXJhbSAge2Z1bmN0aW9ufSBjdXN0b21UcmFuc2Zvcm0gQSBmdW5jdGlvbiBvZiAoYXJyYXksIGNoYW5uZWwsIGluZGV4KSB0byB0cmFuc2Zvcm0gdGhlIG91dHB1dCBkdXJpbmcgcHVsbCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVsbChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBJZiB0aGUgRklGTyBpcyBjb21wbGV0ZWx5IGVtcHR5LCBkbyBub3RoaW5nLg0KICAgICAgaWYgKHRoaXMuX2ZyYW1lc0F2YWlsYWJsZSA9PT0gMCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQoNCiAgICAgIGxldCBkZXN0aW5hdGlvbkxlbmd0aCA9IGFycmF5U2VxdWVuY2VbMF0ubGVuZ3RoOw0KICAJbGV0IHRyYW5zZm9ybSA9IGN1c3RvbVRyYW5zZm9ybSB8fCBmdW5jdGlvbih0aGlzQXJyYXksIGNoYW5uZWwsIGkpew0KICAJCXJldHVybiB0aGlzQXJyYXlbY2hhbm5lbF1baV07DQogIAl9Ow0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciB0byB0aGUgfGFycmF5U2VxdWVuY2V8IHN0b3JhZ2UuDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlc3RpbmF0aW9uTGVuZ3RoOyArK2kpIHsNCiAgICAgICAgbGV0IHJlYWRJbmRleCA9ICh0aGlzLl9yZWFkSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIGFycmF5U2VxdWVuY2VbY2hhbm5lbF1baV0gPSB0cmFuc2Zvcm0odGhpcy5fY2hhbm5lbERhdGEsIGNoYW5uZWwsIHJlYWRJbmRleCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgdGhpcy5fcmVhZEluZGV4ICs9IGRlc3RpbmF0aW9uTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3JlYWRJbmRleCA+PSB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fcmVhZEluZGV4ID0gdGhpcy5fcmVhZEluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgLT0gZGVzdGluYXRpb25MZW5ndGg7DQogICAgICBpZiAodGhpcy5fZnJhbWVzQXZhaWxhYmxlIDwgMCkgew0KICAgICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KICAgICAgfQ0KICAgIH0NCiAgfQoKICBjb25zdCBXZWJSdGNWYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2F8fEYoIkFzc2VydGlvbiBmYWlsZWQ6ICIrYik7fWZ1bmN0aW9uIGMoYSl7dmFyIGM9SVsiXyIrYV07cmV0dXJuIGIoYywiQ2Fubm90IGNhbGwgdW5rbm93biBmdW5jdGlvbiAiK2ErIiwgbWFrZSBzdXJlIGl0IGlzIGV4cG9ydGVkIiksY31mdW5jdGlvbiBkKGEsYixkLGUpe2Z1bmN0aW9uIGcoYSl7cmV0dXJuICJzdHJpbmciPT09Yj9mKGEpOiJib29sZWFuIj09PWI/ISFhOmF9dmFyIGo9e3N0cmluZzpmdW5jdGlvbihhKXt2YXIgYj0wO2lmKG51bGwhPT1hJiZ2b2lkIDAhPT1hJiYwIT09YSl7dmFyIGM9KGEubGVuZ3RoPDwyKSsxO2I9Y2IoYyksaChhLGIsYyk7fXJldHVybiBifSxhcnJheTpmdW5jdGlvbihhKXt2YXIgYj1jYihhLmxlbmd0aCk7cmV0dXJuIGsoYSxiKSxifX0sbD1jKGEpLG09W10sbj0wO2lmKGUpZm9yKHZhciBvLHA9MDtwPGUubGVuZ3RoO3ArKylvPWpbZFtwXV0sbz8oMD09PW4mJihuPWViKCkpLG1bcF09byhlW3BdKSk6bVtwXT1lW3BdO3ZhciBxPWwuYXBwbHkobnVsbCxtKTtyZXR1cm4gcT1nKHEpLDAhPT1uJiZkYihuKSxxfWZ1bmN0aW9uIGUoYSxiLGMpe2Zvcih2YXIgZD1iK2MsZT1iO2FbZV0mJiEoZT49ZCk7KSsrZTtpZigxNjxlLWImJmEuc3ViYXJyYXkmJmlhKXJldHVybiBpYS5kZWNvZGUoYS5zdWJhcnJheShiLGUpKTtmb3IodmFyIGYsZz0iIjtiPGU7KXtpZihmPWFbYisrXSwhKDEyOCZmKSl7Zys9U3RyaW5nLmZyb21DaGFyQ29kZShmKTtjb250aW51ZX12YXIgaD02MyZhW2IrK107aWYoMTkyPT0oMjI0JmYpKXtnKz1TdHJpbmcuZnJvbUNoYXJDb2RlKCgzMSZmKTw8NnxoKTtjb250aW51ZX12YXIgaT02MyZhW2IrK107aWYoZj0yMjQ9PSgyNDAmZik/KDE1JmYpPDwxMnxoPDw2fGk6KDcmZik8PDE4fGg8PDEyfGk8PDZ8NjMmYVtiKytdLDY1NTM2PmYpZys9U3RyaW5nLmZyb21DaGFyQ29kZShmKTtlbHNlIHt2YXIgaj1mLTY1NTM2O2crPVN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8aj4+MTAsNTYzMjB8MTAyMyZqKTt9fXJldHVybiBnfWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gYT9lKF8sYSxiKToiIn1mdW5jdGlvbiBnKGEsYixjLGQpe2lmKCEoMDxkKSlyZXR1cm4gMDtmb3IodmFyIGUsZj1jLGc9YytkLTEsaD0wO2g8YS5sZW5ndGg7KytoKXtpZihlPWEuY2hhckNvZGVBdChoKSw1NTI5Njw9ZSYmNTczNDM+PWUpe3ZhciBqPWEuY2hhckNvZGVBdCgrK2gpO2U9NjU1MzYrKCgxMDIzJmUpPDwxMCl8MTAyMyZqO31pZigxMjc+PWUpe2lmKGM+PWcpYnJlYWs7YltjKytdPWU7fWVsc2UgaWYoMjA0Nz49ZSl7aWYoYysxPj1nKWJyZWFrO2JbYysrXT0xOTJ8ZT4+NixiW2MrK109MTI4fDYzJmU7fWVsc2UgaWYoNjU1MzU+PWUpe2lmKGMrMj49ZylicmVhaztiW2MrK109MjI0fGU+PjEyLGJbYysrXT0xMjh8NjMmZT4+NixiW2MrK109MTI4fDYzJmU7fWVsc2Uge2lmKGMrMz49ZylicmVhaztiW2MrK109MjQwfGU+PjE4LGJbYysrXT0xMjh8NjMmZT4+MTIsYltjKytdPTEyOHw2MyZlPj42LGJbYysrXT0xMjh8NjMmZTt9fXJldHVybiBiW2NdPTAsYy1mfWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBnKGEsXyxiLGMpfWZ1bmN0aW9uIGkoYSl7Zm9yKHZhciBiLGM9MCxkPTA7ZDxhLmxlbmd0aDsrK2QpYj1hLmNoYXJDb2RlQXQoZCksNTUyOTY8PWImJjU3MzQzPj1iJiYoYj02NTUzNisoKDEwMjMmYik8PDEwKXwxMDIzJmEuY2hhckNvZGVBdCgrK2QpKSwxMjc+PWI/KytjOjIwNDc+PWI/Yys9Mjo2NTUzNT49Yj9jKz0zOmMrPTQ7cmV0dXJuIGN9ZnVuY3Rpb24gaihhKXt2YXIgYj1pKGEpKzEsYz1jYihiKTtyZXR1cm4gZyhhLCQsYyxiKSxjfWZ1bmN0aW9uIGsoYSxiKXskLnNldChhLGIpO31mdW5jdGlvbiBsKCl7SS5IRUFQOD0kPW5ldyBJbnQ4QXJyYXkoWiksSS5IRUFQMTY9bmV3IEludDE2QXJyYXkoWiksSS5IRUFQMzI9Y2E9bmV3IEludDMyQXJyYXkoWiksSS5IRUFQVTg9Xz1uZXcgVWludDhBcnJheShaKSxJLkhFQVBVMTY9bmV3IFVpbnQxNkFycmF5KFopLEkuSEVBUFUzMj1uZXcgVWludDMyQXJyYXkoWiksSS5IRUFQRjMyPW5ldyBGbG9hdDMyQXJyYXkoWiksSS5IRUFQRjY0PW5ldyBGbG9hdDY0QXJyYXkoWik7fWZ1bmN0aW9uIG0oYSl7Zm9yKDswPGEubGVuZ3RoOyl7dmFyIGI9YS5zaGlmdCgpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBiKXtiKCk7Y29udGludWV9dmFyIGM9Yi5mdW5jOyJudW1iZXIiPT10eXBlb2YgYz92b2lkIDA9PT1iLmFyZz9JLmR5bkNhbGxfdihjKTpJLmR5bkNhbGxfdmkoYyxiLmFyZyk6Yyh2b2lkIDA9PT1iLmFyZz9udWxsOmIuYXJnKTt9fWZ1bmN0aW9uIG4oKXtpZihJLnByZVJ1bilmb3IoImZ1bmN0aW9uIj09dHlwZW9mIEkucHJlUnVuJiYoSS5wcmVSdW49W0kucHJlUnVuXSk7SS5wcmVSdW4ubGVuZ3RoOylzKEkucHJlUnVuLnNoaWZ0KCkpO20ob2EpO31mdW5jdGlvbiBvKCl7bShwYSk7fWZ1bmN0aW9uIHAoKXttKHFhKTt9ZnVuY3Rpb24gcigpe2lmKEkucG9zdFJ1bilmb3IoImZ1bmN0aW9uIj09dHlwZW9mIEkucG9zdFJ1biYmKEkucG9zdFJ1bj1bSS5wb3N0UnVuXSk7SS5wb3N0UnVuLmxlbmd0aDspdChJLnBvc3RSdW4uc2hpZnQoKSk7bShyYSk7fWZ1bmN0aW9uIHMoYSl7b2EudW5zaGlmdChhKTt9ZnVuY3Rpb24gdChhKXtyYS51bnNoaWZ0KGEpO31mdW5jdGlvbiB1KCl7T2ErKyxJLm1vbml0b3JSdW5EZXBlbmRlbmNpZXMmJkkubW9uaXRvclJ1bkRlcGVuZGVuY2llcyhPYSk7fWZ1bmN0aW9uIHYoKXtpZihPYS0tLEkubW9uaXRvclJ1bkRlcGVuZGVuY2llcyYmSS5tb25pdG9yUnVuRGVwZW5kZW5jaWVzKE9hKSwwPT1PYSYmKFFhKSl7dmFyIGE9UWE7UWE9bnVsbCxhKCk7fX1mdW5jdGlvbiB3KGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9YS5leHBvcnRzO0kuYXNtPWIsdigpO31mdW5jdGlvbiBjKGEpe2lmKCJib29sZWFuIj09dHlwZW9mIE8mJk8pe3ZhciBiO3RyeXtiPUJ1ZmZlci5mcm9tKGEsImJhc2U2NCIpO31jYXRjaChjKXtiPW5ldyBCdWZmZXIoYSwiYmFzZTY0Iik7fXJldHVybiBuZXcgVWludDhBcnJheShiLmJ1ZmZlcixiLmJ5dGVPZmZzZXQsYi5ieXRlTGVuZ3RoKX10cnl7Zm9yKHZhciBjPWYoYSksZD1uZXcgVWludDhBcnJheShjLmxlbmd0aCksZT0wO2U8Yy5sZW5ndGg7KytlKWRbZV09Yy5jaGFyQ29kZUF0KGUpO3JldHVybiBkfWNhdGNoKGEpe3Rocm93IG5ldyBFcnJvcigiQ29udmVydGluZyBiYXNlNjQgc3RyaW5nIHRvIGJ5dGVzIGZhaWxlZC4iKX19ZnVuY3Rpb24gZChhKXtyZXR1cm4gYyhhLnNsaWNlKDM3KSl9dmFyIGU9e2VudjphLGdsb2JhbDp7TmFOOk5hTixJbmZpbml0eToxLzB9LCJnbG9iYWwuTWF0aCI6TWF0aCxhc20yd2FzbTpTfTt1KCk7dmFyIGY9ImZ1bmN0aW9uIj09dHlwZW9mIGF0b2I/YXRvYjpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxqPSIiLGs9MDthPWEucmVwbGFjZSgvW15BLVphLXowLTlcK1wvXD1dL2csIiIpO2RvIGU9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGY9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGc9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGg9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGI9ZTw8MnxmPj40LGM9KDE1JmYpPDw0fGc+PjIsZD0oMyZnKTw8NnxoLGorPVN0cmluZy5mcm9tQ2hhckNvZGUoYiksNjQhPT1nJiYoais9U3RyaW5nLmZyb21DaGFyQ29kZShjKSksNjQhPT1oJiYoais9U3RyaW5nLmZyb21DaGFyQ29kZShkKSk7d2hpbGUoazxhLmxlbmd0aCk7cmV0dXJuIGp9O2lmKEkuaW5zdGFudGlhdGVXYXNtKXRyeXtyZXR1cm4gSS5pbnN0YW50aWF0ZVdhc20oZSxiKX1jYXRjaChhKXtyZXR1cm4gUigiTW9kdWxlLmluc3RhbnRpYXRlV2FzbSBjYWxsYmFjayBmYWlsZWQgd2l0aCBlcnJvcjogIithKSwhMX1yZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGI9ZChKKTtyZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoYixlKS50aGVuKGEsZnVuY3Rpb24oYSl7UigiZmFpbGVkIHRvIGFzeW5jaHJvbm91c2x5IHByZXBhcmUgd2FzbTogIithKSxGKGEpO30pfShmdW5jdGlvbihhKXtiKGEuaW5zdGFuY2UpO30pLHt9fWZ1bmN0aW9uIHgoYSxiKXtTYS52YXJhcmdzPWI7dHJ5e2Zvcih2YXIgYz1TYS5nZXQoKSxkPVNhLmdldCgpLGU9U2EuZ2V0KCksZj0wLGc9MDtnPGU7ZysrKXtmb3IodmFyIGg9Y2FbZCs4Kmc+PjJdLGs9Y2FbZCsoOCpnKzQpPj4yXSxsPTA7bDxrO2wrKylTYS5wcmludENoYXIoYyxfW2grbF0pO2YrPWs7fXJldHVybiBmfWNhdGNoKGEpe3JldHVybiAidW5kZWZpbmVkIiE9dHlwZW9mIEZTJiZhIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcnx8RihhKSwtYS5lcnJub319ZnVuY3Rpb24geSgpe3JldHVybiAkLmxlbmd0aH1mdW5jdGlvbiB6KGEsYixjKXtfLnNldChfLnN1YmFycmF5KGIsYitjKSxhKTt9ZnVuY3Rpb24gQShhKXtyZXR1cm4gSS5fX19lcnJub19sb2NhdGlvbiYmKGNhW0kuX19fZXJybm9fbG9jYXRpb24oKT4+Ml09YSksYX1mdW5jdGlvbiBCKCl7RigiT09NIik7fWZ1bmN0aW9uIEMoYSl7dGhpcy5uYW1lPSJFeGl0U3RhdHVzIix0aGlzLm1lc3NhZ2U9IlByb2dyYW0gdGVybWluYXRlZCB3aXRoIGV4aXQoIithKyIpIix0aGlzLnN0YXR1cz1hO31mdW5jdGlvbiBEKGEpe2Z1bmN0aW9uIGIoKXtJLmNhbGxlZFJ1bnx8KEkuY2FsbGVkUnVuPSEwLGdhfHwobygpLHAoKSxHKEkpLEkub25SdW50aW1lSW5pdGlhbGl6ZWQmJkkub25SdW50aW1lSW5pdGlhbGl6ZWQoKSxJLl9tYWluJiZvYiYmSS5jYWxsTWFpbihhKSxyKCkpKTt9KGE9YXx8SS5hcmd1bWVudHMsISgwPE9hKSkmJihuKCksMDxPYXx8SS5jYWxsZWRSdW58fChJLnNldFN0YXR1cz8oSS5zZXRTdGF0dXMoIlJ1bm5pbmcuLi4iKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe0kuc2V0U3RhdHVzKCIiKTt9LDEpLGIoKTt9LDEpKTpiKCkpKTt9ZnVuY3Rpb24gRShhLGIpe2ImJkkubm9FeGl0UnVudGltZSYmMD09PWF8fChJLm5vRXhpdFJ1bnRpbWV8fChnYT0hMCxJLm9uRXhpdCYmSS5vbkV4aXQoYSkpLEkucXVpdChhLG5ldyBDKGEpKSk7fWZ1bmN0aW9uIEYoYSl7dGhyb3cgSS5vbkFib3J0JiZJLm9uQWJvcnQoYSksdm9pZCAwPT09YT9hPSIiOihRKGEpLFIoYSksYT0iXCIiK2ErIlwiIiksZ2E9ITAsImFib3J0KCIrYSsiKS4gQnVpbGQgd2l0aCAtcyBBU1NFUlRJT05TPTEgZm9yIG1vcmUgaW5mby4ifWE9YXx8e307dmFyIEcsST0idW5kZWZpbmVkIj09dHlwZW9mIGE/e306YSxKPSJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsQUdGemJRRUFBQUFCcEFFVllBTi9mMzhCZjJBQUFHQUJmd0YvWUFKL2Z3Ri9ZQWQvZjM5L2YzOS9BWDlnQ0g5L2YzOS9mMzkvQVg5Z0EzOStmd0YrWUFGL0FHQUhmMzkvZjM5L2Z3QmdCSDkvZjM4QVlBQUJmMkFDZjM4QVlBWi9mMzkvZjM4QmYyQUVmMzkvZndGL1lBWi9mMzkvZjM4QVlBVi9mMzkvZndCZ0EzOS9md0JnQ1g5L2YzOS9mMzkvZndGL1lBUi9mMzUvQVg1Z0NIOS9mMzkvZjM5L0FHQUZmMzkvZjM4QmZ3TFdBaEFEWlc1MkJXRmliM0owQUFjRFpXNTJEbDlmWDJGemMyVnlkRjltWVdsc0FBa0RaVzUyQzE5ZlgzTmxkRVZ5Y2s1dkFBY0RaVzUyRFY5ZlgzTjVjMk5oYkd3eE5EQUFBd05sYm5ZTlgxOWZjM2x6WTJGc2JERTBOZ0FEQTJWdWRneGZYMTl6ZVhOallXeHNOVFFBQXdObGJuWUxYMTlmYzNselkyRnNiRFlBQXdObGJuWVpYMlZ0YzJOeWFYQjBaVzVmWjJWMFgyaGxZWEJmYzJsNlpRQUtBMlZ1ZGhaZlpXMXpZM0pwY0hSbGJsOXRaVzFqY0hsZlltbG5BQUFEWlc1MkYxOWxiWE5qY21sd2RHVnVYM0psYzJsNlpWOW9aV0Z3QUFJRFpXNTJGMkZpYjNKMFQyNURZVzV1YjNSSGNtOTNUV1Z0YjNKNUFBSURaVzUyQzNObGRGUmxiWEJTWlhRd0FBY0RaVzUyREY5ZmRHRmliR1ZmWW1GelpRTi9BQU5sYm5ZT1JGbE9RVTFKUTFSUFVGOVFWRklEZndBRFpXNTJCbTFsYlc5eWVRSUJnQUtBQWdObGJuWUZkR0ZpYkdVQmNBRWdJQU5uWmdJS0J3c0tBZ3dDQWdNTkF3SURBQUFOQWdBQUFBME9Ed2tDRHcwSkFBRUJBUUVEQ1FjQUVBa0pDUVFDQndBQUFBSUZBZ0FBQ0FzREF3TURBd01DQUFZQ0NnSUFBZ2NBQWdJRERRTUNBZ2NEQUFBQ0F3QU5CUkVTQndzVEFnTUFCQVVHQVFjSUZBWVBBbjhCUWNBNUMzOEJRY0M1d0FJTEI3QUNGaEZmWDE5bGNuSnViMTlzYjJOaGRHbHZiZ0JOQlY5bWNtVmxBRm9GWDIxaGFXNEFFQWRmYldGc2JHOWpBRmtIWDIxbGJXTndlUUJjQjE5dFpXMXpaWFFBWFExZmNISnZZMlZ6YzE5a1lYUmhBQklGWDNOaWNtc0FYZ2hmYzJWMGJXOWtaUUFSQ21SNWJrTmhiR3hmYVdrQVh3dGtlVzVEWVd4c1gybHBhUUJnREdSNWJrTmhiR3hmYVdscGFRQmhFR1I1YmtOaGJHeGZhV2xwYVdscGFXa0FZaEZrZVc1RFlXeHNYMmxwYVdscGFXbHBhUUJqREdSNWJrTmhiR3hmYW1scWFRQnhDV1I1YmtOaGJHeGZkZ0JsQ21SNWJrTmhiR3hmZG1rQVpoQmtlVzVEWVd4c1gzWnBhV2xwYVdscEFHY1RaWE4wWVdKc2FYTm9VM1JoWTJ0VGNHRmpaUUFQQ25OMFlXTnJRV3hzYjJNQURBeHpkR0ZqYTFKbGMzUnZjbVVBRGdsemRHRmphMU5oZG1VQURRa21BUUFqQUFzZ2FFazNhR2xFUlVaSFNHbHBhazg1T2twcWFtcHJObXc5YlV0dUxHODRjRUVLcU1FQlpoc0JBWDhqQWlFQklBQWpBbW9rQWlNQ1FROXFRWEJ4SkFJZ0FRc0VBQ01DQ3dZQUlBQWtBZ3NLQUNBQUpBSWdBU1FEQ3hzQVFmQXJFQk5CZjBZRVFFRUFEd3RCOENzb0FnQVFGRUYvUndzTUFFSHdLeWdDQUNBQUVCVUxjQUFnQUVVRVFFSGVJUkJZR2dzZ0FDNEJBQ0FEUndSQVFaQWhRYUFoUVI1QnB5RVFBUXNnQUVISUFXb3VBUUFnQkVjRVFFRzBJVUdnSVVFZlFhY2hFQUVMSUFVZ0FFR2dIMm91QVFCR0JFQkI4Q3NvQWdBZ0FpQUFJQUVRRmc4RlFjZ2hRYUFoUVNCQnB5RVFBUXRCQUFzdEFDQUFCSDhnQUVIZ0JSQlpJZ0EyQWdBZ0FBUi9FQ29nQUVIY0JXcEJBRFlDQUVFQUJVRi9Dd1ZCZndzTEJnQWdBQkFZQ3lJQUlBQUVmeUFBUWR3RmFpZ0NBRUVxUmdSL0lBQWdBUkFaQlVGL0N3VkJmd3NMeFFFQUlBQkZCRUJCZnc4TElBSkZJQUJCM0FWcUtBSUFRU3BIY2dSQVFYOFBDeUFCSUFNUUZ3UkFRWDhQQ3dKQUlBRkJnUG9CU0FSQUlBRkJnUDBBU0FSQUlBRkJ3RDVyUlFSQUlBQWdBaUFERUJzaEFBd0RDMEYvRHdVZ0FVR0EvUUJyUlFSQUlBQWdBaUFERUNBaEFBd0RDMEYvRHdzQUJTQUJRWUQzQWtnRVFDQUJRWUQ2QVd0RkJFQWdBQ0FDSUFNUUh5RUFEQU1MUVg4UEJTQUJRWUQzQW10RkJFQWdBQ0FDSUFNUUdpRUFEQU1MUVg4UEN3QUxBQXNnQUVFQklBQkJBVWdiQzRVQkFBSi9JQUVnQUVHQStnRklCSDhDZnlBQVFZRDlBRWdFUUVFSUlBQkJ3RDVyUlEwQkdrRi9EQU1MUVg4Z0FFR0EvUUJyRFFJYVFSQUxCU0FBUVlEM0FrZ0VmMEYvSUFCQmdQb0JhdzBDR2tFZ0JVRi9JQUJCZ1BjQ2F3MENHa0V3Q3dzaUFFRWViRVlnQVNBQVFRcHNSaUFCSUFCQkZHeEdjbkpCQVhOQkgzUkJIM1VMQzQwREFRRi9JQUJGQkVCQmZ3OExJQUJCQVRZQ0FDQUFRUVJxSWdGQ0FEY0NBQ0FCUWdBM0FnZ2dBRUdVQW1wQ0FEY0NBQ0FBUVJScUVEQWdBRUcwQVdvaUFVR0FDQ2tCQURjQkFDQUJRWWdJS1FFQU53RUlJQUZCa0FncEFRQTNBUkFnQUVITUFXb2lBVUdnQ0NrQkFEY0JBQ0FCUWFnSUtRRUFOd0VJSUFGQnNBZ3BBUUEzQVJBZ0FFSGtBV29pQVVIQUNDa0JBRGNCQUNBQlFjZ0lLUUVBTndFSUlBRkIwQWdwQVFBM0FSQWdBRUg4QVdvaUFVSGdDQ2tCQURjQkFDQUJRZWdJS1FFQU53RUlJQUZCOEFncEFRQTNBUkFnQUVHY0FtcEJBRUhBQVJCZEdrRUFJUUVEUUNBQVFkd0RhaUFCUVFGMGFrR1F6Z0E3QVFBZ0FVRUJhaUlCUWVBQVJ3MEFDeUFBUWFnRmFpSUJRZ0EzQWdBZ0FVSUFOd0lJSUFGQ0FEY0NFQ0FCUVFBMkFoZ2dBRUdjQldwQndBdzdBUUFnQUVHZUJXcEJ3QXc3QVFBZ0FFR2dCV3BCd0F3N0FRQWdBRUdpQldwQndBdzdBUUFnQUVHa0JXcEJ3QXc3QVFBZ0FFR21CV3BCd0F3N0FRQWdBRUVBRUJrRVFFRi9Ed3NnQUVIY0JXcEJLallDQUVFQUMrZ0RBQUpBQWtBQ1FBSkFBa0FnQVE0RUFBRUNBd1FMSUFCQnhBVnFJZ0ZCb0NBb0FRQTJBUUFnQVVHa0lDNEJBRHNCQkNBQVFjb0ZhaUlCUWFZZ0tBRUFOZ0VBSUFGQnFpQXVBUUE3QVFRZ0FFSFFCV29pQVVHVUlDZ0JBRFlCQUNBQlFaZ2dMZ0VBT3dFRUlBQkIxZ1ZxSWdCQm1pQW9BUUEyQVFBZ0FFR2VJQzRCQURzQkJFRUFEd3NnQUVIRUJXb2lBVUdnSUNnQkFEWUJBQ0FCUWFRZ0xnRUFPd0VFSUFCQnlnVnFJZ0ZCcGlBb0FRQTJBUUFnQVVHcUlDNEJBRHNCQkNBQVFkQUZhaUlCUWF3Z0tBRUFOZ0VBSUFGQnNDQXVBUUE3QVFRZ0FFSFdCV29pQUVHeUlDZ0JBRFlCQUNBQVFiWWdMZ0VBT3dFRVFRQVBDeUFBUWNRRmFpSUJRY1FnS0FFQU5nRUFJQUZCeUNBdUFRQTdBUVFnQUVIS0JXb2lBVUhLSUNnQkFEWUJBQ0FCUWM0Z0xnRUFPd0VFSUFCQjBBVnFJZ0ZCdUNBb0FRQTJBUUFnQVVHOElDNEJBRHNCQkNBQVFkWUZhaUlBUWI0Z0tBRUFOZ0VBSUFCQndpQXVBUUE3QVFSQkFBOExJQUJCeEFWcUlnRkJ4Q0FvQVFBMkFRQWdBVUhJSUM0QkFEc0JCQ0FBUWNvRmFpSUJRY29nS0FFQU5nRUFJQUZCemlBdUFRQTdBUVFnQUVIUUJXb2lBVUhRSUNnQkFEWUJBQ0FCUWRRZ0xnRUFPd0VFSUFCQjFnVnFJZ0JCMWlBb0FRQTJBUUFnQUVIYUlDNEJBRHNCQkVFQUR3dEJmd3QyQVFaL0l3SWhBeU1DUWVBYWFpUUNJQU5CZ0JkcUlRVWdBeUlHUVFCQmdCY1FYUm9nQWtIZ0EyMGhCeUFDUWQ4RFNnUkFJQUJCRkdvaENFRUFJUVFEUUNBQklBUkIwQUJzUVFGMElBVnFJQWdnQmhBdklBUkJBV29pQkNBSFJ3MEFDd3NnQUNBRklBSkJCbTBRR3lFQUlBTWtBaUFBQ3pRQkFYOGpBaUVESXdKQkVHb2tBaUFBSUFBZ0F5QUFJQUVnQWlBREVDRWdBaEFjUVJCMFFSQjFJZ0EyQWdBZ0F5UUNJQUFMcXhBQkczOGpBaUVMSXdKQmdBRnFKQUlnQzBIZ0FHb2hEaUFMUVVCcklROGdDMEVnYWlJTVFnQTNBd0FnREVJQU53TUlJQXhDQURjREVDQUxJaEJDQURjREFDQUxRZ0EzQXdnZ0MwSUFOd01RQW44Q1FBSkFBa0FnQTBIUUFHc09VUUFDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBUUlMSUFCQnhBVnFJUVVnQUVIS0JXb2hCQ0FBUWRZRmFpRUhJQUJCMEFWcURBSUxJQUJCeGdWcUlRVWdBRUhNQldvaEJDQUFRZGdGYWlFSElBQkIwZ1ZxREFFTElBQkJ5QVZxSVFVZ0FFSE9CV29oQkNBQVFkb0ZhaUVISUFCQjFBVnFDeUVESUFjdUFRQWhDQ0FFTGdFQUlSY2dCUzRCQUNFWUlBSkJFSFJCRUhWQkNrb0VRQ0FETGdFQUlRMUJBQ0VDUVFBaEEwRUFJUVVEUUNBQ1FRRjBJQUZxSWdjdUFRQWdBRUcwQVdvZ0FrRUJkR291QVFBZ0FFSGtBV29nQWtFQmRHb3VBUUFnQWtFQmRDQU9haEFuSUFKQkFYUkJnQWxxTGdFQWJDRUtJQWN1QVFBZ0FFSE1BV29nQWtFQmRHb3VBUUFnQUVIOEFXb2dBa0VCZEdvdUFRQWdBa0VCZENBUGFoQW5JQUpCQVhSQm9BbHFMZ0VBYkNFSklBb2dCeTRCQUNBQVFiUUJhaUFDUVFacUlnUkJBWFJxTGdFQUlBQkI1QUZxSUFSQkFYUnFMZ0VBSUFSQkFYUWdEbW9RSnlBRVFRRjBRWUFKYWk0QkFHeHFJUVlnQ1NBSExnRUFJQUJCekFGcUlBUkJBWFJxTGdFQUlBQkIvQUZxSUFSQkFYUnFMZ0VBSUFSQkFYUWdEMm9RSnlBRVFRRjBRYUFKYWk0QkFHeHFJUWNnQmhBZFFSOGdCaHNnQnhBZFFSOGdCeHRyUVJCMElnUkJFSFVnQWtFQmRFSGNJR291QVFCc0lBTnFJUU5CQVNBRklBUkJEblVnRFVvYklRVWdCa0VNZGlJRVFSQjBRUUJLQkg4Z0FrRUJkQ0FNYWlBS1FRSjBRWUNBZjNFZ0JFSC8vd054RUM0aUJEc0JBRUdBZ0FFZ0JHdEIvLzhEY1NFR0lBSkJCbW9GUVlDQUFTRUdJQUlMUVFGMElBeHFJQVk3QVFBZ0IwRU1kaUlFUVJCMFFRQktCRUFnQWtFQmRDQVFhaUFKUVFKMFFZQ0FmM0VnQkVILy93TnhFQzRpQkRzQkFDQUNRUVpxUVFGMElCQnFRWUNBQVNBRWF6c0JBQXNnQWtFQmFpSUNRUVpIRFFBTElBVkIvLzhEY1NBRElBaE9jaUlOUVFCSElSSkJBQ0VHUVlEa0FDRUNBMEFnQUNBR1FRRjBJQUZxSWhNdUFRQWdCaEFwUVJCMFFSQjFRUVIwSUFCQnRBRnFJQVpCQVhScUloUkJBQ0FHUVFGMFFZQUphaUlWRUI1QkJuWnJRUkIwUVJCMVFZQ2FBV3hCRUhZaEdVSElBQ0FHYXlFYUlBSkIvLzhEY1VHQUJXb2lBa0gvL3dOeElSc2dBa0VRZEVFUWRTRWNRUUFoQ2dOQUlBQkJ0QUZxSUFZZ0NrRUdiR29pQ0VFQmRHb2lFUzRCQUNFQ0lBQkJ6QUZxSUFoQkFYUnFJaDB1QVFBaEZpQUFRZVFCYWlBSVFRRjBhaUlETGdFQUlRVWdBRUg4QVdvZ0NFRUJkR29pQnk0QkFDRUVJQkVnQ2lBYWFpSVJRUWQwSUFwQkIzUkJnQVZxSWg0Z0dTQVNCSDhnQWdVZ0FrSC8vd054SUFoQkFYUWdEbW91QVFBZ0NFRUJkQ0FNYWk0QkFFRUZkR3hCRUhWQmp3VnNRUloxYWtILy93TnhDMEgvL3dOeGFpSUpJQWxCRUhRZ0hrRVFkRWdiSWdrZ0NVRVFkQ0FSUVJkMFNoczdBUUFnRWdSQUlCMGdHeUFLUVFGMFFlZ2dhaTRCQUNJQ0lCWWdDRUVCZENBUGFpNEJBQ0lESUFoQkFYUWdFR291QVFBaUJVRUZkR3hCRUhWQm1qTnNRUlYxUVFGcVFRRjFhaUlKUWYvL0EzRWdDVUVRZEVFUWRTQUNTQnNpQWlBY0lBSkJFSFJCRUhWSUd6c0JBQ0FESUJNdkFRQWdGa0VFYWtFRGRXdEJFSFJCRUhWc1FRTjFRWUJnYWlBRlFRSjFiQ0lDUVFSMUlRVWdBa0VQU2dSL1FSZ2hDVUdBZ0lBRUlRZ2dCeUVESUFVZ0JFRUtiRUgvL3dOeEVDNGhCU0FFQlVFWUlRbEJnSUNBQkNFSUlBY2hBMEVBUVFBZ0JXc2dCRUVLYkVILy93TnhFQzVySVFVZ0JBc2hBZ1VnQ0VFQmRDQU9haTRCQUNBVEx3RUFJQUpCQTNWclFSQjBRUkIxYkVFRGRVR0FZR29nQ0VFQmRDQU1haTRCQUVFQ2FrRUNkV3dpQWtFT2RTRUVJQUpCLy84QVNnUi9RUlloQ1VHQWdJQUJJUWdnQkNBRklnSVFMZ1ZCRmlFSlFZQ0FnQUVoQ0VFQVFRQWdCR3NnQlNJQ0VDNXJDeUVGQ3lBRFFZQURJQUpCLy84RGNTQUlJQVZCRUhScUlBbDFhaUlDUWYvL0EzRWdBa0VRZEVHQWdJQU1TQnM3QVFBZ0NrRUJhaUlLUVFKSERRQUxJQlJCQUNBVkVCNGhBaUFBUWN3QmFpQUdRUUYwYWlJRFFRQWdCa0VCZEVHZ0NXb2lCQkFlSWdWQkNYWWdBa0VKZG10QkVIUkJFSFVpQnlBR1FRRjBRZXdnYWk0QkFDSUtTQVJBSUFNZ0NpQUhhMEVRZEVFUWRTSURRUTFzUVFKMlFmLy9BM0VnQkJBZUlRSWdGRUVBSUFOQmdJQURiRUVRZG10Qi8vOERjU0FWRUI0aEF3VWdBaUVESUFVaEFnc2dBa0VKZEVFUWRTSUZJQVpCQVhSQitDQnFMZ0VBSWdJaUJFb0VRQ0FBUWN3QmFpQUdRUUYwYWlJSElBUWdCV3NpQlNBSEx3RUFhanNCQUNBR1FRRjBJQUJxUWRnQmFpSUVJQVF2QVFBZ0JXbzdBUUFMSUFOQkNYUkJFSFVpQXlBR1FRRjBRWVFoYWk0QkFDSUZTZ1JBSUFCQnRBRnFJQVpCQVhScUlnUWdCU0FEYXlJRElBUXZBUUJxT3dFQUlBWkJBWFFnQUdwQndBRnFJZ1VnQlM4QkFDQURhanNCQUFzZ0JrRUJhaUlHUVFaSERRQUxJQUJCbEFKcUlnRWdBU2dDQUVFQmFqWUNBQ0FOUWYvL0EzRUVRQ0FBUVpvQ2FpSUJMZ0VBUVFGcVFSQjBRUkIxSVFJZ0FTQUNPd0VBSUFKQkJrb0VRQ0FCUVFZN0FRQWdBRUdZQW1vZ0Z6c0JBQ0FMSkFJZ0RROEZJQUJCbUFKcUlCZzdBUUFnQ3lRQ0lBMFBDd0FMQ3lBQVFaZ0NhaUlDTGdFQUlnRkJBRW9FZnlBQ0lBRkJmMm83QVFBZ0FVSC8vd054UVFKcVFmLy9BM0VGUVFBTElRRWdBRUdhQW1wQkFEc0JBQ0FMSkFJZ0FRdHVBUUYvSUFCRkJFQkJBQThMUVlDQWdJQjhRUUJCRUNBQUlBQkJIM1Z6SWdCQi8vOEJTeHNpQVVFSWNpQUJRWUNBZ0h3Z0FYWWdBSEZGR3lJQlFRUnlJQUZCZ0lDQVFDQUJkaUFBY1VVYklnRkJBbklnQVVHQWdJQ0FmaUFCZGlBQWNVVWJJZ0YySUFCeFJTQUJhZ3RVQVFGL0lBQWdBVUgvL3dOeElnRWdBQzhCQUdvaUF6c0JBQ0FDTGdFQUlBTkJFSFJCRUhWc0lRTWdBU0FBUVF4cUlnRXZBUUJxSVFBZ0FTQUFPd0VBSUFNZ0FrRU1haTRCQUNBQVFSQjBRUkIxYkdvTFJnRUJmeU1DSVFNakFrR2dDMm9rQWlBQklBTkI0QU5xSWdFZ0FFRU1haUFDRUNnZ0FTQURJQUJCQkdvZ0FrRUJkUkFvSUFBZ0F5QUNRUUoxRUJzaEFDQURKQUlnQUFzd0FRRi9Jd0loQXlNQ1FlQURhaVFDSUFFZ0F5QUFRUVJxSUFJUUtDQUFJQU1nQWtFQmRSQWJJUUFnQXlRQ0lBQUw1QUlCQjM4akFpRUlJd0pCOEFWcUpBSWdDRUh3QTJvaEJTQUlRWUFDYWlFSklBaEJnQUZxSVFZZ0NDSUhRZUFGYWlJRVFRQTdBUUFnQWtFQmRTRUtJQUpCZjB3RVFFSDZJVUdMSWtHS0FrRzBJaEFCQ3lBQ1FmRUJTQVJBSUFFZ0FpQUFRYWdGYWlBQVFiSUZhaUFGSUFrUUlpQUZJQW9nQUVHcUJXb2dBRUcwQldvZ0JpQUhFQ0lnQmlBQ1FRSjJJZ0ZCc0FFZ0JDQURRUXBxRUNNZ0J5QUJRYkFCSUFRZ0EwRUlhaEFqSUFrZ0NpQUFRYXdGYWlBQVFiWUZhaUFHSUFjUUlpQUdJQUZCc0FFZ0JDQURRUVpxRUNNZ0J5QUJJQUJCcmdWcUlBQkJ1QVZxSUFVZ0NSQWlJQVVnQWtFRGRpSUJRWkFDSUFRZ0EwRUVhaEFqSUFrZ0FTQUFRYkFGYWlBQVFib0ZhaUFHSUFjUUlpQUdJQUpCQkhZaUFVSHdBaUFFSUFOQkFtb1FJeUFISUFFZ0FFRzhCV29nQlJBa0lBVWdBVUh3QWlBRUlBTVFJeUFFTGdFQUlRQWdDQ1FDSUFBUEJVSFFJa0dMSWtHTEFrRzBJaEFCQzBFQUMzc0JBWDhnQUNBQlFRRjFJZ1pCN0tNQklBSWdCQkFtSUFCQkFtb2dCa0hES3lBRElBVVFKaUFCUVFGTUJFQVBDMEVBSVFBRFFDQUVRUUpxSVFFZ0JDQUVMZ0VBSWdNZ0JTOEJBR3M3QVFBZ0JVRUNhaUVDSUFVZ0F5QUZMd0VBYWpzQkFDQUFRUUZxSWdBZ0JrZ0VRQ0FCSVFRZ0FpRUZEQUVMQ3d1SUFnRUNmeU1DSVFZakFrRVFhaVFDSUFZaUJVRUFOZ0lBSUFCRkJFQkI0eUpCaXlKQnBBRkI4eUlRQVFzZ0FVRUFUQVJBUWY4aVFZc2lRYVVCUWZNaUVBRUxJQUFnQVNBRkVERWlBRVVFUUNBRUlBSTdBUUFnQmlRQ0R3dEJFU0FBRUNWcklRRWdCU0FGS0FJQUlBRnFJZ1UyQWdBZ0JDQUNRZi8vQTNGQkFDQUFRUUFnQVd0MElBQWdBWFlnQVVFQVNCc2lBVUVFZGtIL0IzRkJnUEFBY2tIVXdBRnNRUk4ySUFWQkVIUkJFSFZCMU1BQmJFRUpkbW9pQUNBQVFZQ0FBbkViYWpzQkFDQURMZ0VBSWdBaEFpQUFRUXRPQkVBZ0JpUUNEd3NnQlVGL1NnUkFJQU1nQWtFTGFqc0JBQ0FHSkFJRklBTWdBaUFCUVFBZ0JXdDJhanNCQUNBR0pBSUxDN29CQVFoL0lBRkJBRXdFUUE4TElBSkJBbW9oQlNBQ1FRUnFJUVlnQWtFR2FpRUhRUUFoQ0FOQUlBQXVBUUFoQkNBRkxnRUFJUWtnQlNBQ0xnRUFJZ283QVFBZ0FFRUNhaUVMSUFJZ0FDNEJBRHNCQUNBS1FiS1lmMndnQkNBSmFrSG5NMnhxSUFZdUFRQWlBRUhNUEd4cUlBY3VBUUJCakZSc2FpRUVJQWNnQURzQkFDQUdJQVJCRG5aQi8vOERjU0lBT3dFQUlBTkJBbW9oQkNBRElBQTdBUUFnQ0VFQmFpSUlJQUZIQkVBZ0N5RUFJQVFoQXd3QkN3c0xad0VCZnlBQVJRUkFRUUFQQ3lBQVFZQ0FnSUI0UVFCQkVDQUFRZi8vQTBzYklnRkJDSElnQVNBQVFZQ0FnSGdnQVhaeFJSc2lBVUVFY2lBQklBQkJnSUNBZ0g4Z0FYWnhSUnNpQVVFQ2NpQUJJQUJCZ0lDQWdId2dBWFp4UlJzaUFIWnhSU0FBYWd1TUFRRURmeUFETHdFQVFSQjBJUVVnQVVFQVRBUkFJQU1nQlVFUWRqc0JBQThMSUFKQkVIUkJFSFVoQmtFQUlRY2dCU0VDQTBBZ0JFRUNhaUVGSUFRZ0JpQUFMZ0VBYkNBQ2FpSUNRUkIyT3dFQUlBQXVBUUJCRG5RZ0JpQUNRUkIxYkd0QkFYUWhBaUFBUVFScUlRQWdCMEVCYWlJSElBRkhCRUFnQlNFRURBRUxDeUFESUFKQkVIWTdBUUFMb1FFQkFYOGdBa0VRZEVFUmRVR0FnQWhxSUFJUUxrRVFkQ0lFUVJCMUlRSWdBeUFBUWYvL0EzRkJBM1FnQVVILy93TnhhMEVRZEVFUWRTSUFJQVJCRW5VaUEwRU9kQ0FEYkVFUWRXeEJDbllpQVRzQkFDQUFJQUZCRUhSQkVIVnNJZ0JCZ05TdkJVNEVRRUVBRHdzZ0FrRUFJQUJCQjNSQkVIVkIwT0lGYkVHQWdIeHhheUlBUVJCMlFmOEhjVUdBQ0hJZ0FFR0FnSUJnYzBFYWRVRUJhblpzQzkwQkFRWi9JQUlvQWdBaEJDQUNRUVJxSWdZb0FnQWhCU0FEUVFGMUlRZ2dBMEVCVEFSQUlBSWdCRFlDQUNBR0lBVTJBZ0FQQzBFQUlRY2dCQ0VESUFVaEJBTkFJQUVnQTBFQmRpQUFMZ0VBUWZzb2JFRU9kbW9pQXpzQkFDQUFMZ0VBSUFOQkVIUkJFSFVpQ1VIN0tHeEJESFZySVFNZ0FVRUNhaUVGSUFFZ0JFRUJkaUFBUVFKcUlnRXVBUUJCOEFwc1FRNTFha0VRZEVFUWRTSUVJQWxxT3dFQUlBQkJCR29oQUNBQkxnRUFJQVJCOEFwc1FReDFheUVFSUFkQkFXb2lCeUFJU0FSQUlBVWhBUXdCQ3dzZ0FpQUROZ0lBSUFZZ0JEWUNBQXYrQmdFSGZ5QUFRWndDYWlBQ1FRUjBJZ1ZCQVhScUlRY2dBRUhjQTJvZ0JVRUJkR29oQXlBQ1FRWk9CRUJCanlOQnBpTkJ6QUJCeHlNUUFRc2dCMEVlYWlFSUlBTkJIbW9oQ1VFQUlRVURRQ0FGUVFGMElBZHFJZ1l1QVFBaUJFSGtBRVlFUUNBRklRWURRQ0FHUVFGMElBTnFJQVpCQVdvaUJFRUJkQ0FEYWk0QkFEc0JBQ0FHUVFGMElBZHFJQVJCQVhRZ0Iyb3VBUUE3QVFBZ0JFRVFSd1JBSUFRaEJnd0JDd3NnQ0VIbEFEc0JBQ0FKUVpET0FEc0JBQVVnQmlBRVFRRnFPd0VBQ3lBRlFRRnFJZ1ZCRUVjTkFBc0NRQUpBQWtBZ0EwRU9haTRCQUNBQlFSQjBRUkIxU2dSQUlBTkJCbW91QVFBZ0FVRVFkRUVRZFVvRVFDQURRUUpxTGdFQUlBRkJFSFJCRUhWS0JFQWdBeTRCQUNBQlFSQjBRUkIxVENFRURBTUZRUUpCQXlBRFFRUnFMZ0VBSUFGQkVIUkJFSFZLR3lFRURBTUxBQVVnQTBFS2FpNEJBQ0FCUVJCMFFSQjFTZ1JBUVFSQkJTQURRUWhxTGdFQUlBRkJFSFJCRUhWS0d5RUVEQU1GUVFaQkJ5QURRUXhxTGdFQUlBRkJFSFJCRUhWS0d5RUVEQU1MQUFzQUJTQURRUjVxTGdFQUlBRkJFSFJCRUhWS0JFQWdBMEVXYWk0QkFDQUJRUkIwUVJCMVNnUkFJQU5CRW1vdUFRQWdBVUVRZEVFUWRVb0VRRUVJUVFrZ0EwRVFhaTRCQUNBQlFSQjBRUkIxU2hzaEJBd0VCVUVLUVFzZ0EwRVVhaTRCQUNBQlFSQjBRUkIxU2hzaEJBd0VDd0FGSUFOQkdtb3VBUUFnQVVFUWRFRVFkVW9FUUVFTVFRMGdBMEVZYWk0QkFDQUJRUkIwUVJCMVNoc2hCQXdFQlNBRFFSeHFMZ0VBSUFGQkVIUkJFSFZLQkVCQkRpRUVEQVVGUVE4aEJBd0dDd0FMQUFzQUN3c01BZ3RCRHlFRkEwQWdCVUVCZENBRGFpQUZRWDlxSWdaQkFYUWdBMm91QVFBN0FRQWdCVUVCZENBSGFpQUdRUUYwSUFkcUxnRUFPd0VBSUFZZ0JFb0VRQ0FHSVFVTUFRc0xDeUFFUVFGMElBTnFJQUU3QVFBZ0JFRUJkQ0FIYWtFQk93RUFDeUFBUVpRQ2FpZ0NBQ0lCUVFKS0JFQWdBMEVFYWlFREJTQUJRUUJNQkVBZ0FFR2NCV29nQWtFQmRHb2lBaTRCQUVFQUlnRkJBV3BzSVFBZ0FpQUJRZi8vQVhOQndBeHNRWUNBQVdvZ0FHcEJEM1pCLy84RGNTSUFPd0VBSUFBUEN3dEJtVE5CdC8wQklBTXVBUUFpQlNBQVFad0ZhaUFDUVFGMGFpNEJBRWdiSVFFZ0FVSC8vd0Z6SUFWQkVIUkJFSFZzUVlDQUFXb2dBRUdjQldvZ0FrRUJkR29pQWk0QkFDQUJRUUZxYkdwQkQzWkIvLzhEY1NFQUlBSWdBRHNCQUNBQUN3UUFFQ3NMQ2dCQjlDdEJBUkJiR2dzRUFCQXRDL0lCQVF4L0l3SWhBQ01DUVRCcUpBSWdBRUVzYWlJQlFRQTJBZ0FnQUVFb2FpSUNRUUEyQWdBZ0FFRWthaUlEUVFBMkFnQWdBRUVnYWlJRVFRQTJBZ0FnQUVFY2FpSUZRUUEyQWdBZ0FFRVlhaUlHUVFBMkFnQWdBRUVVYWlJSFFRQTJBZ0FnQUVFUWFpSUlRUUEyQWdBZ0FFRU1haUlKUVFBMkFnQWdBRUVJYWlJS1FRQTJBZ0FnQUVFRWFpSUxRUUEyQWdBZ0FFRUFOZ0lBSUFCQkFUWUNBQ0FMUVFJMkFnQWdDa0VETmdJQUlBbEJCRFlDQUNBSVFRVTJBZ0FnQjBFQk5nSUFJQVpCQVRZQ0FDQUZRUUUyQWdBZ0JFRUNOZ0lBSUFOQkFUWUNBQ0FDUVFJMkFnQWdBVUVETmdJQUlBQWtBZ3NmQUNBQlFmLy9BM0ZGQkVCQi8vLy8vd2NQQ3lBQUlBRkJFSFJCRUhWdEM1OEJBUUovSUFCQjRBTWdBMEdBQ0dvaUFDQUNFRFFnQUVId0FTQURRVUJySUFKQklHb1FOU0FEUVNCcUlnUWdBa0hnQUdvaUFDa0NBRGNDQUNBRUlBQXBBZ2czQWdnZ0JDQUFLUUlRTndJUUlBUWdBQ2tDR0RjQ0dDQUFJQU5CNEFkcUlnVXBBZ0EzQWdBZ0FDQUZLUUlJTndJSUlBQWdCU2tDRURjQ0VDQUFJQVVwQWhnM0FoZ2dCQ0FEUWRBQUVESWdBMEdnQVNBQklBSkJnQUZxRURNTERBQWdBRUVBUWFBQkVGMGFDMWtCQTM4Z0FDQUJJQUVRT3lFRUlBRkJBRXdFUUNBQ0lBUTJBZ0JCQUE4TFFRQWhBMEVBSVFVRFFDQURJQUF1QVFBaUF5QURiQ0FFZG1vaEF5QUFRUUpxSVFBZ0JVRUJhaUlGSUFGSERRQUxJQUlnQkRZQ0FDQURDNDBDQVFoL0lBSkJBRXdFUUE4TFFRQWhBd05BSUFFZ0FDZ0NBRUdLQm14QmdJQUJhaUFBUVFScUlnVW9BZ0JCL205c2FpQUFRUWhxSWdZb0FnQkJ2d2hzYWlBQVFReHFJZ1FvQWdCQjliVUJiR29nQUVFUWFpSUhLQUlBUWVma0FHeHFJQUJCRkdvaUNDZ0NBRUc1WW14cUlBQkJHR29pQ1NnQ0FFRzVBMnhxSUFCQkhHb2lDaWdDQUVIZUFXeHFOZ0lBSUFGQkJHb2dCU2dDQUVIZUFXeEJnSUFCYWlBR0tBSUFRYmtEYkdvZ0JDZ0NBRUc1WW14cUlBY29BZ0JCNStRQWJHb2dDQ2dDQUVIMXRRRnNhaUFKS0FJQVFiOEliR29nQ2lnQ0FFSCtiMnhxSUFCQklHb29BZ0JCaWdac2FqWUNBQ0FCUVFocUlRRWdBMEVCYWlJRElBSkhCRUFnQkNFQURBRUxDd3ZGQkFFS2Z5QUJRUUYxSVFzZ0FVRUJUQVJBRHdzZ0EwRUVhaUVISUFOQkNHb2hDQ0FEUVF4cUlRbEJBQ0VHQTBBZ0F5Z0NBQ0FHUVFOMElBQnFJZ3dvQWdBaUJFR0FRR3NnQnlnQ0FDSUthMEVPZFVIcUYyeHFJUVVnQXlBRU5nSUFJQW9nQlNBSUtBSUFJZ3BySWdSQkRuVWdCRUVmZG1wQm1Na0FiR29oQkNBSElBVTJBZ0FnQ1NBS0lBUWdDU2dDQUdzaUJVRU9kU0FGUVI5MmFrSFg5UUJzYWlJRk5nSUFJQWdnQkRZQ0FDQU1JQVZCQVhVMkFnQWdCa0VCYWlJR0lBdElEUUFMSUFCQkJHb2hEQ0FCUVFGTUJFQVBDeUFEUVJScUlRWWdBMEVRYWlFSElBTkJHR29oQ0NBRFFSeHFJUWxCQUNFREEwQWdCeWdDQUNBRFFRTjBJQXhxSWdvb0FnQWlCRUdBUUdzZ0JpZ0NBQ0lOYTBFT2RVRzFCbXhxSVFVZ0J5QUVOZ0lBSUEwZ0JTQUlLQUlBSWcxcklnUkJEblVnQkVFZmRtcEIzaTlzYWlFRUlBWWdCVFlDQUNBSklBMGdCQ0FKS0FJQWF5SUZRUTUxSUFWQkgzWnFRZDdnQUd4cUlnVTJBZ0FnQ0NBRU5nSUFJQW9nQlVFQmRUWUNBQ0FEUVFGcUlnTWdDMGdOQUFzZ0FVRUJUQVJBRHd0QkFDRUJBMEFnQVVFQmRDSURRUUowSUFCcUtBSUFJQU5CQVhKQkFuUWdBR29vQWdCcUlRWWdBMEVDY2tFQ2RDQUFhaWdDQUNBRFFRTnlRUUowSUFCcUtBSUFhaUVESUFGQkFYUWdBbXBCLy84QklBWkJEM1VnQmtILy8vLy9BMG9iSWdaQmdJQitJQVpCZ0lCK1NoczdBUUFnQVVFQmNrRUJkQ0FDYWtILy93RWdBMEVQZFNBRFFmLy8vLzhEU2hzaUEwR0FnSDRnQTBHQWdINUtHenNCQUNBQlFRSnFJZ0VnQzBnTkFBc0xzQU1CQ1g4Z0FVRUJkU0VMSUFGQkFVd0VRQThMSUFOQkJHb2hEQ0FEUVFocUlRY2dBMEVNYWlFSVFRQWhCUU5BSUFNb0FnQWdCVUVDZENBQWFpNEJBRUVQZEVHQWdBRnlJZ1pCZ01BQUlBd29BZ0FpQkd0cVFRNTFRZW9YYkdvaENTQURJQVkyQWdBZ0JDQUpJQWNvQWdBaUJtc2lCRUVPZFNBRVFSOTJha0dZeVFCc2FpRUtJQXdnQ1RZQ0FDQUlJQVlnQ2lBSUtBSUFheUlFUVE1MUlBUkJIM1pxUWRmMUFHeHFJZ1EyQWdBZ0J5QUtOZ0lBSUFWQkFuUWdBbW9nQkVFQmRUWUNBQ0FGUVFGcUlnVWdDMGdOQUFzZ0FFRUNhaUVGSUFGQkFVd0VRQThMSUFOQkZHb2hCeUFEUVJCcUlRZ2dBMEVZYWlFSklBTkJIR29oQ2tFQUlRQURRQ0FJS0FJQUlBQkJBblFnQldvdUFRQkJEM1JCZ0lBQmNpSURRWURBQUNBSEtBSUFJZ0ZyYWtFT2RVRzFCbXhxSVFZZ0NDQUROZ0lBSUFFZ0JpQUpLQUlBSWdOcklnRkJEblVnQVVFZmRtcEIzaTlzYWlFRUlBY2dCallDQUNBS0lBTWdCQ0FLS0FJQWF5SUJRUTUxSUFGQkgzWnFRZDdnQUd4cUlnTTJBZ0FnQ1NBRU5nSUFJQUJCQW5RZ0Ftb2lBU0FCS0FJQUlBTkJBWFZxTmdJQUlBQkJBV29pQUNBTFNBMEFDd3ZhQmdFTWZ5QUJRUUYxSVF3Z0FFRUVhaUVQSUFOQk1Hb2hEU0FCUVFGTUJFQVBDeUFEUVFScUlRWWdBMEVJYWlFS0lBTkJER29oQ1VFQUlRY2dEU0VJQTBBZ0F5Z0NBQ0FJS0FJQUlnUkJnRUJySUFZb0FnQWlCV3RCRG5WQjZoZHNhaUVJSUFNZ0JEWUNBQ0FGSUFnZ0NpZ0NBQ0lGYXlJRVFRNTFJQVJCSDNacVFaakpBR3hxSVFRZ0JpQUlOZ0lBSUFrZ0JTQUVJQWtvQWdCcklnaEJEblVnQ0VFZmRtcEIxL1VBYkdvaUNEWUNBQ0FLSUFRMkFnQWdCMEVCZENJRVFRSjBJQUpxSUFoQkFYVTJBZ0FnQkVFQ2RDQVBhaUVJSUFkQkFXb2lCeUFNU0EwQUN5QUJRUUZNQkVBUEN5QURRUlJxSVFjZ0EwRVFhaUVHSUFOQkdHb2hDaUFEUVJ4cUlRbEJBQ0VJQTBBZ0JpZ0NBQ0FJUVFGMElnNUJBblFnQUdvb0FnQWlCVUdBUUdzZ0J5Z0NBQ0lMYTBFT2RVRzFCbXhxSVFRZ0JpQUZOZ0lBSUFzZ0JDQUtLQUlBSWd0cklnVkJEblVnQlVFZmRtcEIzaTlzYWlFRklBY2dCRFlDQUNBSklBc2dCU0FKS0FJQWF5SUVRUTUxSUFSQkgzWnFRZDdnQUd4cUlnUTJBZ0FnQ2lBRk5nSUFJQTVCQW5RZ0Ftb2lCU0FGS0FJQUlBUkJBWFZxUVE5MU5nSUFJQWhCQVdvaUNDQU1TQTBBQ3lBQ1FRUnFJUWdnQVVFQlRBUkFEd3NnQTBFa2FpRUhJQU5CSUdvaEJpQURRU2hxSVFvZ0EwRXNhaUVKUVFBaEFnTkFJQVlvQWdBZ0FrRUJkQ0lPUVFKMElBQnFLQUlBSWdWQmdFQnJJQWNvQWdBaUMydEJEblZCNmhkc2FpRUVJQVlnQlRZQ0FDQUxJQVFnQ2lnQ0FDSUxheUlGUVE1MUlBVkJIM1pxUVpqSkFHeHFJUVVnQnlBRU5nSUFJQWtnQ3lBRklBa29BZ0JySWdSQkRuVWdCRUVmZG1wQjEvVUFiR29pQkRZQ0FDQUtJQVUyQWdBZ0RrRUNkQ0FJYWlBRVFRRjFOZ0lBSUFKQkFXb2lBaUFNU0EwQUN5QUJRUUZNQkVBUEN5QURRVFJxSVFFZ0EwRTRhaUVDSUFOQlBHb2hBMEVBSVFBRFFDQU5LQUlBSUFCQkFYUWlDa0VDZENBUGFpZ0NBQ0lHUVlCQWF5QUJLQUlBSWdsclFRNTFRYlVHYkdvaEJ5QU5JQVkyQWdBZ0NTQUhJQUlvQWdBaUNXc2lCa0VPZFNBR1FSOTJha0hlTDJ4cUlRWWdBU0FITmdJQUlBTWdDU0FHSUFNb0FnQnJJZ2RCRG5VZ0IwRWZkbXBCM3VBQWJHb2lCellDQUNBQ0lBWTJBZ0FnQ2tFQ2RDQUlhaUlHSUFZb0FnQWdCMEVCZFdwQkQzVTJBZ0FnQUVFQmFpSUFJQXhJRFFBTEM0SUJBUUovUVFFZ0JIUkJBWFVoQnlBRlJTQUFSU0FDUlhKeUlBWkJBVWh5SUFSQkFFaHlCRUJCZnc4TElBRkJFSFJCRUhVaENDQURRUkIwUVJCMUlRTkJBQ0VCQTM4Z0FVRUJkQ0FGYWlBQlFRRjBJQUJxTGdFQUlBaHNJQWRxSUFGQkFYUWdBbW91QVFBZ0EyeHFJQVIxT3dFQUlBRkJBV29pQVNBR1J3MEFRUUFMQ3lnQkFYOGdBRUVLU3dSQVFRQWhBUVZCQkJCWklnRUVRQ0FCSUFBMkFnQUZRUUFoQVFzTElBRUxEUUFnQUVVRVFBOExJQUFRV2d1VUFRRUdmeU1DSVFZakFrR0FJR29rQWlBR0lRTkJBU0FBS0FJQUlnZDBJUWdnQjBFZlJ3UkFRUUFoQlVFQUlRUURRQ0FFUVFGMElBTnFJQVZCQVhRZ0FXb3VBUUE3QVFBZ0JFRUJja0VCZENBRGFrRUFPd0VBSUFSQkFtb2hCQ0FGUVFGcUlnVWdDRWdOQUFzTElBTWdCeEJDSUFNZ0FDZ0NBRUVCRUQ4aEFDQUNJQU1nQ0VFQmRFRUVhaEJjR2lBR0pBSWdBQXZmQVFFSGZ5TUNJUVVqQWtHQUlHb2tBaUFGSWdRZ0FVRUJJQUFvQWdBaUJuUWlCMEVDYWlJRFFRRjBFRndhSUFkQkFYUWlDQ0FEU2dSQUEwQWdBMEVCZENBRWFpQUlJQU5ySWdsQkFYUWdBV291QVFBN0FRQWdBMEVCYWtFQmRDQUVha0VBSUFsQkFXcEJBWFFnQVdvdkFRQnJPd0VBSUFnZ0EwRUNhaUlEU2cwQUN3c2dCQ0FHRUVJZ0JDQUFLQUlBUVFFUVFDRURJQVpCSDBZRVFDQUZKQUlnQXc4TFFRQWhBRUVBSVFFRFFDQUFRUUYwSUFKcUlBRkJBWFFnQkdvdUFRQTdBUUFnQVVFQ2FpRUJJQUJCQVdvaUFDQUhTQTBBQ3lBRkpBSWdBd3VRQVFFQ2YwRUFJQUlRUEVFUWRFRVFkU0lESUFGQkFFb0VmMEYvSVFJRFFDQUFRUUpxSVFRZ0FDNEJBQ0lBUVFBZ0FHc2dBRUVBU2h0QkVIUkJFSFVpQUNBQ0lBQWdBa29iSVFJZ0FVRi9haUVBSUFGQkFVb0VRQ0FBSVFFZ0JDRUFEQUVMQ3lBQ1FmLy9BM0VGUVg4TElnQkJFSFJCRUhVaUFTQUJiQkFkSWdGcklBQkIvLzhEY1VVZ0FTQURTbkliQzJjQkFYOGdBRUVCSUFCQkFrRVFRUUFnQUVILy93TkxHeUlCSUFGQkNISWdBRUdBL2dNZ0FYUnhSUnNpQVNBQlFRUnlJQUJCOEFFZ0FYUnhSUnNpQVNBQlFRSnlJQUJCRENBQmRIRkZHeUlBZEhGQkFFY2dBR29pQUhSeFFRQkhJQUJxUWYvL0EzRUxsd0VCQW44Z0EwRUFTaUFGUVFCS2NTQUhJQVlnQTBGL2Ftd2lDR29pQ1NBQlNIRkZCRUJCZnc4TElBaEJBRWdFUUVFQUR3c0RmMEVBSVFGQmdCQWhBd05BSUFGQkFYUWdCR291QVFBZ0J5QUJhMEVCZENBQWFpNEJBR3dnQTJvaEF5QUJRUUZxSWdFZ0JVY05BQXNnQWtFQ2FpRUJJQUlnQTBFTWRSQStPd0VBSUFZZ0Iyb2lCeUFKU2dSL1FRQUZJQUVoQWd3QkN3c0xKQUFnQUVILy93RktCSDlCLy84QkJTQUFRWUNBZmlBQVFZQ0Fma29iUWYvL0EzRUxDNllGQVE5L1FRRWdBWFFpQmtHQUNFb0VRRUYvRHdzZ0JrRUJTaUVCSUFJRWZ5QUJSUVJBUVFBUEMwRUpJUWRCQVNFREEzOGdBMEVCZENFSUlBTkJBRW9FUUVFQUlRRURRQ0FCSUFkMElRSWdBU0FHU0FSQUlBSkJBWFJCd0ExcUxnRUFJUXBCQUNBQ1FRRjBRY0FKYWk4QkFFRVFkR3RCRUhVaEN5QUJJUUlEUUNBS0lBSWdBMnBCQVhRaUJFRUJkQ0FBYWlJSkxnRUFJZzFzUVFGcUlBUkJBWEpCQVhRZ0FHb2lEaTRCQUNJUElBdHNhMEVCZFNFRUlBSkJBWFFpQlVFQmRDQUFhaUlRTGdFQVFRNTBJUXdnQlVFQmNrRUJkQ0FBYWlJUkxnRUFRUTUwSVFVZ0NTQU1RWUNBQVdvZ0JHdEJEM1k3QVFBZ0RpQUZRWUNBQVNBTElBMXNRUUZxSUFvZ0QyeHFRUUYxSWdscmFrRVBkanNCQUNBUUlBeEJnSUFCYWlBRWFrRVBkanNCQUNBUklBbEJnSUFCYWlBRmFrRVBkanNCQUNBQ0lBaHFJZ0lnQmtnTkFBc0xJQU1nQVVFQmFpSUJSdzBBQ3dzZ0IwRi9haUVISUFnZ0JrZ0VmeUFJSVFNTUFRVkJBQXNMQlNBQlJRUkFRUUFQQzBFSklRZEJBU0VEQTM4Z0EwRUJkQ0VJSUFOQkFFb0VRRUVBSVFFRFFDQUJJQWQwSVFJZ0FTQUdTQVJBSUFKQkFYUkJ3QTFxTGdFQUlRcEJBQ0FDUVFGMFFjQUphaThCQUVFUWRHdEJFSFVoQ3lBQklRSURRQ0FLSUFJZ0EycEJBWFFpQkVFQmRDQUFhaUlKTGdFQUlnMXNJQXNnQkVFQmNrRUJkQ0FBYWlJT0xnRUFJZzlzYTBFUGRTRUVJQUpCQVhRaUJVRUJkQ0FBYWlJUUxnRUFJUXdnQlVFQmNrRUJkQ0FBYWlJUkxnRUFJUVVnQ1NBTUlBUnJRUUYyT3dFQUlBNGdCU0FLSUE5c0lBc2dEV3hxUVE5MUlnbHJRUUYyT3dFQUlCQWdCQ0FNYWtFQmRqc0JBQ0FSSUFVZ0NXcEJBWFk3QVFBZ0FpQUlhaUlDSUFaSURRQUxDeUFESUFGQkFXb2lBVWNOQUFzTElBZEJmMm9oQnlBSUlBWklCSDhnQ0NFRERBRUZRUUFMQ3dzTHRRVUJGSDlCQVNBQmRDSUZRWUFJU2dSQVFYOFBDeUFGUVFGTUJFQkJBQThMSUFWQkFYUWhGQ0FDUlNFVlFRa2hEVUVCSVFaQkFDRVBBMEFnQUNBVUVFTWlBa0VRZEVFUWRVR0Y2Z0JLSVFFZ0FrRVFkRUVRZFVHSzFBRktJZ0lnQVNBUGFtb2hEMEVDUVFFZ0FSc2dBU0FDR3lFRFFZQ0FBVUdBd0FBZ0FSc2dBblFoQnlBR1FRRjBJUTRnQmtFQVNpRUJJQlVFUUNBQkJFQkJBQ0VCQTBBZ0FTQU5kQ0VDSUFFZ0JVZ0VRQ0FDUVFGMFFjQU5haTRCQUNFSElBSkJBWFJCd0FscUxnRUFJUXNnQVNFQ0EwQWdCeUFDSUFacVFRRjBJZ2hCQVhRZ0FHb2lCQzRCQUNJTWJDQUxJQWhCQVhKQkFYUWdBR29pRUM0QkFDSVJiR3RCRDNVaENDQUNRUUYwSWdsQkFYUWdBR29pRWk0QkFDRUtJQWxCQVhKQkFYUWdBR29pRXk0QkFDRUpJQVFnQ2lBSWF5QURkVHNCQUNBUUlBa2dCeUFSYkNBTElBeHNha0VQZFNJRWF5QURkVHNCQUNBU0lBZ2dDbW9nQTNVN0FRQWdFeUFFSUFscUlBTjFPd0VBSUFJZ0Rtb2lBaUFGU0EwQUN3c2dCaUFCUVFGcUlnRkhEUUFMQ3dVZ0FRUkFJQU5CRG1vaEEwRUFJUUVEUUNBQklBMTBJUUlnQVNBRlNBUkFJQUpCQVhSQndBMXFMZ0VBSVFzZ0FrRUJkRUhBQ1dvdUFRQWhDQ0FCSVFJRFFDQUxJQUlnQm1wQkFYUWlDa0VCZENBQWFpSU1MZ0VBSWhCc1FRRnFJQWdnQ2tFQmNrRUJkQ0FBYWlJUkxnRUFJaEpzYTBFQmRTRUtJQUpCQVhRaUJFRUJkQ0FBYWlJVExnRUFRUTUwSVFrZ0JFRUJja0VCZENBQWFpSVdMZ0VBUVE1MElRUWdEQ0FISUFscUlBcHJJQU4xT3dFQUlCRWdCQ0FISUFnZ0VHeEJBV29nQ3lBU2JHcEJBWFVpREd0cUlBTjFPd0VBSUJNZ0J5QUphaUFLYWlBRGRUc0JBQ0FXSUFjZ0RHb2dCR29nQTNVN0FRQWdBaUFPYWlJQ0lBVklEUUFMQ3lBR0lBRkJBV29pQVVjTkFBc0xDeUFOUVg5cUlRMGdEaUFGU0FSQUlBNGhCZ3dCQ3dzZ0R3dTRBUUVGZnlBRVFSQjBRUkIxSVFjZ0JFRVFkRUVRZFVFQVRBUkFEd3NnQTBFUWRFRVFkU0VJSUFOQkVIUkJFSFZCQUVvaENTQUdRUkIwUVJCMUlRWWdCVUVRZEVFUWRTRUtRUUFoQkFOQUlBQkJBRFlDQUNBSkJFQWdCQ0FHYkNFTElBQW9BZ0FoQlVFQUlRTURRQ0FGSUFNZ0MycEJBWFFnQW1vdUFRQWdBMEVCZENBQmFpNEJBR3dnQ25WcUlRVWdBMEVCYWlJRElBaEhEUUFMSUFBZ0JUWUNBQXNnQUVFRWFpRUFJQVJCQVdvaUJDQUhSdzBBQ3d1QUFnRUdmeUFCUVhscVFRSkpCRUJCd0JsQm9CMGdBVUVJUmlJQkd5RUNRZkFCUWZBQUlBRWJJUVJCQUNFQkEwQWdBVUVCZENBQ2FpNEJBRUVDZENBQWFpSURLQUlBSVFVZ0F5QUJRUUZ5UVFGMElBSnFMZ0VBUVFKMElBQnFJZ01vQWdBMkFnQWdBeUFGTmdJQUlBRkJBbW9pQVNBRVNRMEFDdzhMUVFFZ0FYUWlBMEYvYWlFR0lBTkJBVXdFUUE4TFFRRWhBa0VBSVFRRFFDQUdJQVJySVFVZ0F5RUJBMEFnQVVFQmRTSUJJQVZLRFFBTElBSkJBblFnQUdvaEJTQUVJQUZCZjJweElBRnFJZ1JCQW5RZ0FHb2hBU0FFSUFKS0JFQWdCU2dDQUNFSElBVWdBU2dDQURZQ0FDQUJJQWMyQWdBTElBTWdBa0VCYWlJQ1J3MEFDd3RoQVFOL0lBQkZJQUZCQVVoeUJFQkJmdzhMUVFBaEJFRUFJUUlEUUNBRVFRRjBJQUJxTGdFQUlnTkJBQ0FEYXlBRFFYOUtHeUlESUFJZ0F5QUNTaHNoQWlBRVFRRnFJZ1FnQVVjTkFBc2dBa0gvL3dFZ0FrSC8vd0ZJRzBILy93TnhDMkFCQTM4Z0FFVWdBVUVCU0hJRVFFRi9Ed3RCQUNFRVFRQWhBZ05BSUFSQkFuUWdBR29vQWdBaUEwRUFJQU5ySUFOQmYwb2JJZ01nQWlBRElBSkxHeUVDSUFSQkFXb2lCQ0FCUncwQUN5QUNRZi8vLy84SElBSkIvLy8vL3dkSkd3dFFBUU4vSUFCQkFFY2dBVUVBU25GRkJFQkJnSUIrRHd0QkFDRURRWUNBZmlFQ0EwQWdBMEVCZENBQWFpNEJBQ0lFSUFJZ0JDQUNRUkIwUVJCMVNoc2hBaUFEUVFGcUlnTWdBVWNOQUFzZ0FndE9BUU4vSUFCQkFFY2dBVUVBU25GRkJFQkJnSUNBZ0hnUEMwRUFJUU5CZ0lDQWdIZ2hBZ05BSUFOQkFuUWdBR29vQWdBaUJDQUNJQVFnQWtvYklRSWdBMEVCYWlJRElBRkhEUUFMSUFJTFVBRURmeUFBUVFCSElBRkJBRXB4UlFSQVFmLy9BUThMUVFBaEEwSC8vd0VoQWdOQUlBTkJBWFFnQUdvdUFRQWlCQ0FDSUFRZ0FrRVFkRUVRZFVnYklRSWdBMEVCYWlJRElBRkhEUUFMSUFJTFRnRURmeUFBUVFCSElBRkJBRXB4UlFSQVFmLy8vLzhIRHd0QkFDRURRZi8vLy84SElRSURRQ0FEUVFKMElBQnFLQUlBSWdRZ0FpQUVJQUpJR3lFQ0lBTkJBV29pQXlBQlJ3MEFDeUFDQ3k0QkFYOGpBaUVCSXdKQkVHb2tBaUFCSUFCQlBHb29BZ0FRVGpZQ0FFRUdJQUVRQmhCTUlRQWdBU1FDSUFBTG1BTUJDMzhqQWlFSEl3SkJNR29rQWlBSFFTQnFJUVVnQnlJRElBQkJIR29pQ2lnQ0FDSUVOZ0lBSUFOQkJHb2dBRUVVYWlJTEtBSUFJQVJySWdRMkFnQWdBMEVJYWlBQk5nSUFJQU5CREdvZ0FqWUNBQ0FEUVJCcUlnRWdBRUU4YWlJTUtBSUFOZ0lBSUFGQkJHb2dBellDQUNBQlFRaHFRUUkyQWdBQ1FBSkFJQUlnQkdvaUJFR1NBU0FCRUFRUVRDSUJSZzBBUVFJaENBTkFJQUZCQUU0RVFDQURRUWhxSUFNZ0FTQURRUVJxS0FJQUlnbExJZ1liSWdNZ0FTQUpRUUFnQmh0cklna2dBeWdDQUdvMkFnQWdBMEVFYWlJTklBMG9BZ0FnQ1dzMkFnQWdCU0FNS0FJQU5nSUFJQVZCQkdvZ0F6WUNBQ0FGUVFocUlBWkJIM1JCSDNVZ0NHb2lDRFlDQUVHU0FTQUZFQVFRVENJR0lBUWdBV3NpQkVZTkFpQUdJUUVNQVFzTElBQkJFR3BCQURZQ0FDQUtRUUEyQWdBZ0MwRUFOZ0lBSUFBZ0FDZ0NBRUVnY2pZQ0FDQUlRUUpHQkg5QkFBVWdBaUFEUVFScUtBSUFhd3NoQWd3QkN5QUFRUkJxSUFCQkxHb29BZ0FpQVNBQVFUQnFLQUlBYWpZQ0FDQUtJQUUyQWdBZ0N5QUJOZ0lBQ3lBSEpBSWdBZ3QwQVFKL0l3SWhCQ01DUVNCcUpBSWdCRUVJYWlJRElBQkJQR29vQWdBMkFnQWdBMEVFYWlBQlFpQ0lQZ0lBSUFOQkNHb2dBVDRDQUNBRFFReHFJQVFpQURZQ0FDQURRUkJxSUFJMkFnQkJqQUVnQXhBREVFeEJBRWdFZmlBQVFuODNBd0JDZndVZ0FDa0RBQXNoQVNBRUpBSWdBUXNiQUNBQVFZQmdTd1JBRUUxQkFDQUFhellDQUVGL0lRQUxJQUFMQlFCQitDc0xCQUFnQUF0MkFRTi9Jd0loQkNNQ1FTQnFKQUlnQkNJRFFSQnFJUVVnQUVFa2FrRUVOZ0lBSUFBb0FnQkJ3QUJ4UlFSQUlBTWdBRUU4YWlnQ0FEWUNBQ0FEUVFScVFaT29BVFlDQUNBRFFRaHFJQVUyQWdCQk5pQURFQVVFUUNBQVFjc0Fha0YvT2dBQUN3c2dBQ0FCSUFJUVNpRUFJQVFrQWlBQUN3UUFRUUVMQXdBQkM0VUNBUVIvQWtBQ1FDQUNRUkJxSWdRb0FnQWlBdzBBSUFJUVV3Ui9RUUFGSUFRb0FnQWhBd3dCQ3lFQ0RBRUxJQUpCRkdvaUJpZ0NBQ0lGSVFRZ0F5QUZheUFCU1FSQUlBSkJKR29vQWdBaEF5QUNJQUFnQVNBRFFRZHhRUXhxRVFBQUlRSU1BUXNnQVVVZ0FrSExBR29zQUFCQkFFaHlCSDlCQUFVQ2Z5QUJJUU1EUUNBQUlBTkJmMm9pQldvc0FBQkJDa2NFUUNBRkJFQWdCU0VEREFJRlFRQU1Bd3NBQ3dzZ0FrRWthaWdDQUNFRUlBSWdBQ0FESUFSQkIzRkJER29SQUFBaUFpQURTUTBDSUFZb0FnQWhCQ0FCSUFOcklRRWdBQ0FEYWlFQUlBTUxDeUVDSUFRZ0FDQUJFRndhSUFZZ0JpZ0NBQ0FCYWpZQ0FDQUJJQUpxSVFJTElBSUxmZ0VDZnlBQVFjb0FhaUlDTEFBQUlRRWdBaUFCSUFGQi93RnFjam9BQUNBQUtBSUFJZ0ZCQ0hFRWZ5QUFJQUZCSUhJMkFnQkJmd1VnQUVFSWFrRUFOZ0lBSUFCQkJHcEJBRFlDQUNBQVFSeHFJQUJCTEdvb0FnQWlBVFlDQUNBQVFSUnFJQUUyQWdBZ0FFRVFhaUFCSUFCQk1Hb29BZ0JxTmdJQVFRQUxDNDRCQVFOL0FrQUNRQ0FBSWdKQkEzRkZEUUFnQWlFQkEwQUNRQ0FBTEFBQVJRUkFJQUVoQUF3QkN5QUFRUUZxSWdBaUFVRURjUTBCREFJTEN3d0JDd05BSUFCQkJHb2hBU0FBS0FJQUlnTkJnSUdDaEhoeFFZQ0Jnb1I0Y3lBRFFmLzkrM2RxY1VVRVFDQUJJUUFNQVFzTElBTkIvd0Z4QkVBRFFDQUFRUUZxSWdBc0FBQU5BQXNMQ3lBQUlBSnJDeHNCQVg4Z0FCQlVJZ0lnQUVFQklBSWdBUkJXUjBFZmRFRWZkUXRhQVFKL0lBRWdBbXdoQkNBQ1FRQWdBUnNoQWlBRFFjd0FhaWdDQUVGL1NnUkFJQU1RVUVVaEJTQUFJQVFnQXhCU0lRQWdCVVVFUUNBREVGRUxCU0FBSUFRZ0F4QlNJUUFMSUFBZ0JFY0VRQ0FBSUFGdUlRSUxJQUlMdEFFQkJuOGpBaUVESXdKQkVHb2tBaUFESWdRZ0FVSC9BWEVpQnpvQUFBSkFBa0FnQUVFUWFpSUNLQUlBSWdVTkFDQUFFRk1FZjBGL0JTQUNLQUlBSVFVTUFRc2hBUXdCQ3lBQVFSUnFJZ0lvQWdBaUJpQUZTUVJBSUFGQi93RnhJZ0VnQUVITEFHb3NBQUJIQkVBZ0FpQUdRUUZxTmdJQUlBWWdCem9BQUF3Q0N3c2dBRUVrYWlnQ0FDRUJJQUFnQkVFQklBRkJCM0ZCREdvUkFBQkJBVVlFZnlBRUxRQUFCVUYvQ3lFQkN5QURKQUlnQVF1R0FRRURmMEdRSUNnQ0FDSUJRY3dBYWlnQ0FFRi9TZ1IvSUFFUVVBVkJBQXNoQWlBQUlBRVFWVUVBU0FSL1FYOEZBbjhnQVVITEFHb3NBQUJCQ2tjRVFDQUJRUlJxSWdNb0FnQWlBQ0FCUVJCcUtBSUFTUVJBSUFNZ0FFRUJhallDQUNBQVFRbzZBQUJCQUF3Q0N3c2dBVUVLRUZkQkgzVUxDeUVBSUFJRVFDQUJFRkVMSUFBTDRUZ0JESDhqQWlFS0l3SkJFR29rQWlBS0lRa2dBRUgxQVVrRWYwSDhLeWdDQUNJRFFSQWdBRUVMYWtGNGNTQUFRUXRKR3lJQ1FRTjJJZ0IySWdGQkEzRUVRQ0FCUVFGeFFRRnpJQUJxSWdCQkEzUkJwQ3hxSWdGQkNHb2lCaWdDQUNJQ1FRaHFJZ1VvQWdBaUJDQUJSZ1JBUWZ3cklBTkJBU0FBZEVGL2MzRTJBZ0FGSUFSQkRHb2dBVFlDQUNBR0lBUTJBZ0FMSUFKQkJHb2dBRUVEZENJQVFRTnlOZ0lBSUFBZ0FtcEJCR29pQUNBQUtBSUFRUUZ5TmdJQUlBb2tBaUFGRHdzZ0FrR0VMQ2dDQUNJSFN3Ui9JQUVFUUVFQ0lBQjBJZ1JCQUNBRWEzSWdBU0FBZEhFaUFFRUFJQUJyY1VGL2FpSUFRUXgyUVJCeElnRWdBQ0FCZGlJQVFRVjJRUWh4SWdGeUlBQWdBWFlpQUVFQ2RrRUVjU0lCY2lBQUlBRjJJZ0JCQVhaQkFuRWlBWElnQUNBQmRpSUFRUUYyUVFGeElnRnlJQUFnQVhacUlnUkJBM1JCcEN4cUlnQkJDR29pQlNnQ0FDSUJRUWhxSWdnb0FnQWlCaUFBUmdSQVFmd3JJQU5CQVNBRWRFRi9jM0VpQURZQ0FBVWdCa0VNYWlBQU5nSUFJQVVnQmpZQ0FDQURJUUFMSUFGQkJHb2dBa0VEY2pZQ0FDQUJJQUpxSWdaQkJHb2dCRUVEZENJRUlBSnJJZ05CQVhJMkFnQWdBU0FFYWlBRE5nSUFJQWNFUUVHUUxDZ0NBQ0VDSUFkQkEzWWlCRUVEZEVHa0xHb2hBU0FBUVFFZ0JIUWlCSEVFZnlBQlFRaHFJZ0FoQkNBQUtBSUFCVUg4S3lBQUlBUnlOZ0lBSUFGQkNHb2hCQ0FCQ3lFQUlBUWdBallDQUNBQVFReHFJQUkyQWdBZ0FrRUlhaUFBTmdJQUlBSkJER29nQVRZQ0FBdEJoQ3dnQXpZQ0FFR1FMQ0FHTmdJQUlBb2tBaUFJRHd0QmdDd29BZ0FpQ3dSL0lBdEJBQ0FMYTNGQmYyb2lBRUVNZGtFUWNTSUJJQUFnQVhZaUFFRUZka0VJY1NJQmNpQUFJQUYySWdCQkFuWkJCSEVpQVhJZ0FDQUJkaUlBUVFGMlFRSnhJZ0Z5SUFBZ0FYWWlBRUVCZGtFQmNTSUJjaUFBSUFGMmFrRUNkRUdzTG1vb0FnQWlBRUVFYWlnQ0FFRjRjU0FDYXlFSUlBQWhCUU5BQWtBZ0FFRVFhaWdDQUNJQkJFQWdBU0VBQlNBQVFSUnFLQUlBSWdCRkRRRUxJQUJCQkdvb0FnQkJlSEVnQW1zaUJDQUlTU0VCSUFRZ0NDQUJHeUVJSUFBZ0JTQUJHeUVGREFFTEN5QUNJQVZxSWd3Z0JVc0VmeUFGUVJocUtBSUFJUWtnQlVFTWFpZ0NBQ0lBSUFWR0JFQUNRQ0FGUVJScUlnRW9BZ0FpQUVVRVFDQUZRUkJxSWdFb0FnQWlBRVVFUUVFQUlRQU1BZ3NMQTBBQ1FDQUFRUlJxSWdRb0FnQWlCZ1IvSUFRaEFTQUdCU0FBUVJCcUlnUW9BZ0FpQmtVTkFTQUVJUUVnQmdzaEFBd0JDd3NnQVVFQU5nSUFDd1VnQlVFSWFpZ0NBQ0lCUVF4cUlBQTJBZ0FnQUVFSWFpQUJOZ0lBQ3lBSkJFQUNRQ0FGUVJ4cUtBSUFJZ0ZCQW5SQnJDNXFJZ1FvQWdBZ0JVWUVRQ0FFSUFBMkFnQWdBRVVFUUVHQUxDQUxRUUVnQVhSQmYzTnhOZ0lBREFJTEJTQUpRUkJxSWdFZ0NVRVVhaUFCS0FJQUlBVkdHeUFBTmdJQUlBQkZEUUVMSUFCQkdHb2dDVFlDQUNBRlFSQnFLQUlBSWdFRVFDQUFRUkJxSUFFMkFnQWdBVUVZYWlBQU5nSUFDeUFGUVJScUtBSUFJZ0VFUUNBQVFSUnFJQUUyQWdBZ0FVRVlhaUFBTmdJQUN3c0xJQWhCRUVrRVFDQUZRUVJxSUFJZ0NHb2lBRUVEY2pZQ0FDQUFJQVZxUVFScUlnQWdBQ2dDQUVFQmNqWUNBQVVnQlVFRWFpQUNRUU55TmdJQUlBeEJCR29nQ0VFQmNqWUNBQ0FJSUF4cUlBZzJBZ0FnQndSQVFaQXNLQUlBSVFJZ0IwRURkaUlCUVFOMFFhUXNhaUVBSUFOQkFTQUJkQ0lCY1FSL0lBQkJDR29pQVNFRElBRW9BZ0FGUWZ3cklBRWdBM0kyQWdBZ0FFRUlhaUVESUFBTElRRWdBeUFDTmdJQUlBRkJER29nQWpZQ0FDQUNRUWhxSUFFMkFnQWdBa0VNYWlBQU5nSUFDMEdFTENBSU5nSUFRWkFzSUF3MkFnQUxJQW9rQWlBRlFRaHFEd1VnQWdzRklBSUxCU0FDQ3dVZ0FFRy9mMHNFZjBGL0JRSi9JQUJCQzJvaUFFRjRjU0VCUVlBc0tBSUFJZ1FFZjBFQUlBRnJJUUlDZndKQUlBQkJDSFlpQUFSL0lBRkIvLy8vQjBzRWYwRWZCU0FBSUFCQmdQNC9ha0VRZGtFSWNTSUdkQ0lEUVlEZ0gycEJFSFpCQkhFaEFDQURJQUIwSWdWQmdJQVBha0VRZGtFQ2NTRURJQUZCRGlBQUlBWnlJQU55YXlBRklBTjBRUTkyYWlJQVFRZHFka0VCY1NBQVFRRjBjZ3NGUVFBTElnZEJBblJCckM1cUtBSUFJZ0FFUUVFQUlRVWdBVUVBUVJrZ0IwRUJkbXNnQjBFZlJodDBJUVpCQUNFREEwQWdBRUVFYWlnQ0FFRjRjU0FCYXlJSUlBSkpCRUFnQ0FSL0lBQWhBeUFJQlVFQUlRTWdBQ0VDREFRTElRSUxJQVVnQUVFVWFpZ0NBQ0lGSUFWRklBVWdBRUVRYWlBR1FSOTJRUUowYWlnQ0FDSUlSbkliSVFBZ0JrRUJkQ0VHSUFnRVFDQUFJUVVnQ0NFQURBRUxDd1ZCQUNFQVFRQWhBd3NnQUNBRGNnUi9JQUFoQmlBREJTQUJJQVJCQWlBSGRDSUFRUUFnQUd0eWNTSUFSUTBFR2lBQVFRQWdBR3R4UVg5cUlnQkJESFpCRUhFaUF5QUFJQU4ySWdCQkJYWkJDSEVpQTNJZ0FDQURkaUlBUVFKMlFRUnhJZ055SUFBZ0EzWWlBRUVCZGtFQ2NTSURjaUFBSUFOMklnQkJBWFpCQVhFaUEzSWdBQ0FEZG1wQkFuUkJyQzVxS0FJQUlRWkJBQXNoQUNBR0JIOGdBaUVESUFZaEFnd0JCU0FDSVFZZ0FBc01BUXNEZnlBQ1FRUnFLQUlBUVhoeElBRnJJZ1VnQTBraEJpQUZJQU1nQmhzaEF5QUNJQUFnQmhzaEFDQUNRUkJxS0FJQUlnWUVmeUFHQlNBQ1FSUnFLQUlBQ3lJQ0RRQWdBeUVHSUFBTEN5SURCSDhnQmtHRUxDZ0NBQ0FCYTBrRWZ5QUJJQU5xSWdjZ0Ewc0VmeUFEUVJocUtBSUFJUWtnQTBFTWFpZ0NBQ0lBSUFOR0JFQUNRQ0FEUVJScUlnSW9BZ0FpQUVVRVFDQURRUkJxSWdJb0FnQWlBRVVFUUVFQUlRQU1BZ3NMQTBBQ1FDQUFRUlJxSWdVb0FnQWlDQVIvSUFVaEFpQUlCU0FBUVJCcUlnVW9BZ0FpQ0VVTkFTQUZJUUlnQ0FzaEFBd0JDd3NnQWtFQU5nSUFDd1VnQTBFSWFpZ0NBQ0lDUVF4cUlBQTJBZ0FnQUVFSWFpQUNOZ0lBQ3lBSkJFQUNRQ0FEUVJ4cUtBSUFJZ0pCQW5SQnJDNXFJZ1VvQWdBZ0EwWUVRQ0FGSUFBMkFnQWdBRVVFUUVHQUxDQUVRUUVnQW5SQmYzTnhJZ0EyQWdBTUFnc0ZJQWxCRUdvaUFpQUpRUlJxSUFJb0FnQWdBMFliSUFBMkFnQWdBRVVFUUNBRUlRQU1BZ3NMSUFCQkdHb2dDVFlDQUNBRFFSQnFLQUlBSWdJRVFDQUFRUkJxSUFJMkFnQWdBa0VZYWlBQU5nSUFDeUFEUVJScUtBSUFJZ0lFZnlBQVFSUnFJQUkyQWdBZ0FrRVlhaUFBTmdJQUlBUUZJQVFMSVFBTEJTQUVJUUFMSUFaQkVFa0VRQ0FEUVFScUlBRWdCbW9pQUVFRGNqWUNBQ0FBSUFOcVFRUnFJZ0FnQUNnQ0FFRUJjallDQUFVQ1FDQURRUVJxSUFGQkEzSTJBZ0FnQjBFRWFpQUdRUUZ5TmdJQUlBWWdCMm9nQmpZQ0FDQUdRUU4ySVFFZ0JrR0FBa2tFUUNBQlFRTjBRYVFzYWlFQVFmd3JLQUlBSWdKQkFTQUJkQ0lCY1FSL0lBQkJDR29pQVNFQ0lBRW9BZ0FGUWZ3cklBRWdBbkkyQWdBZ0FFRUlhaUVDSUFBTElRRWdBaUFITmdJQUlBRkJER29nQnpZQ0FDQUhRUWhxSUFFMkFnQWdCMEVNYWlBQU5nSUFEQUVMSUFaQkNIWWlBUVIvSUFaQi8vLy9CMHNFZjBFZkJTQUJJQUZCZ1A0L2FrRVFka0VJY1NJRWRDSUNRWURnSDJwQkVIWkJCSEVoQVNBQ0lBRjBJZ1ZCZ0lBUGFrRVFka0VDY1NFQ0lBWkJEaUFCSUFSeUlBSnlheUFGSUFKMFFROTJhaUlCUVFkcWRrRUJjU0FCUVFGMGNnc0ZRUUFMSWdGQkFuUkJyQzVxSVFJZ0IwRWNhaUFCTmdJQUlBZEJFR29pQkVFRWFrRUFOZ0lBSUFSQkFEWUNBQ0FBUVFFZ0FYUWlCSEZGQkVCQmdDd2dBQ0FFY2pZQ0FDQUNJQWMyQWdBZ0IwRVlhaUFDTmdJQUlBZEJER29nQnpZQ0FDQUhRUWhxSUFjMkFnQU1BUXNnQWlnQ0FDSUFRUVJxS0FJQVFYaHhJQVpHQkVBZ0FDRUJCUUpBSUFaQkFFRVpJQUZCQVhacklBRkJIMFliZENFQ0EwQWdBRUVRYWlBQ1FSOTJRUUowYWlJRUtBSUFJZ0VFUUNBQ1FRRjBJUUlnQVVFRWFpZ0NBRUY0Y1NBR1JnMENJQUVoQUF3QkN3c2dCQ0FITmdJQUlBZEJHR29nQURZQ0FDQUhRUXhxSUFjMkFnQWdCMEVJYWlBSE5nSUFEQUlMQ3lBQlFRaHFJZ0FvQWdBaUFrRU1haUFITmdJQUlBQWdCellDQUNBSFFRaHFJQUkyQWdBZ0IwRU1haUFCTmdJQUlBZEJHR3BCQURZQ0FBc0xJQW9rQWlBRFFRaHFEd1VnQVFzRklBRUxCU0FCQ3dVZ0FRc0xDd3NoQUVHRUxDZ0NBQ0lDSUFCUEJFQkJrQ3dvQWdBaEFTQUNJQUJySWdOQkQwc0VRRUdRTENBQUlBRnFJZ1EyQWdCQmhDd2dBellDQUNBRVFRUnFJQU5CQVhJMkFnQWdBU0FDYWlBRE5nSUFJQUZCQkdvZ0FFRURjallDQUFWQmhDeEJBRFlDQUVHUUxFRUFOZ0lBSUFGQkJHb2dBa0VEY2pZQ0FDQUJJQUpxUVFScUlnQWdBQ2dDQUVFQmNqWUNBQXNnQ2lRQ0lBRkJDR29QQzBHSUxDZ0NBQ0lDSUFCTEJFQkJpQ3dnQWlBQWF5SUNOZ0lBUVpRc1FaUXNLQUlBSWdFZ0FHb2lBellDQUNBRFFRUnFJQUpCQVhJMkFnQWdBVUVFYWlBQVFRTnlOZ0lBSUFva0FpQUJRUWhxRHdzZ0FFRXdhaUVHUWRRdktBSUFCSDlCM0M4b0FnQUZRZHd2UVlBZ05nSUFRZGd2UVlBZ05nSUFRZUF2UVg4MkFnQkI1QzlCZnpZQ0FFSG9MMEVBTmdJQVFiZ3ZRUUEyQWdCQjFDOGdDVUZ3Y1VIWXF0V3FCWE0yQWdCQmdDQUxJZ0VnQUVFdmFpSUZhaUlJUVFBZ0FXc2lDWEVpQkNBQVRRUkFJQW9rQWtFQUR3dEJ0QzhvQWdBaUFRUkFRYXd2S0FJQUlnTWdCR29pQnlBRFRTQUhJQUZMY2dSQUlBb2tBa0VBRHdzTEFrQUNRRUc0THlnQ0FFRUVjUVJBUVFBaEFnVUNRQUpBQWtCQmxDd29BZ0FpQVVVTkFFRzhMeUVEQTBBQ1FDQURLQUlBSWdjZ0FVMEVRQ0FISUFOQkJHb29BZ0JxSUFGTERRRUxJQU5CQ0dvb0FnQWlBdzBCREFJTEN5QUlJQUpySUFseElnSkIvLy8vL3dkSkJFQWdBaEJlSVFFZ0FTQURLQUlBSUFOQkJHb29BZ0JxUncwQ0lBRkJmMGNOQlFWQkFDRUNDd3dDQzBFQUVGNGlBVUYvUmdSL1FRQUZRYXd2S0FJQUlnZ2dBVUhZTHlnQ0FDSUNRWDlxSWdOcVFRQWdBbXR4SUFGclFRQWdBU0FEY1JzZ0JHb2lBbW9oQXlBQ1FmLy8vLzhIU1NBQ0lBQkxjUVIvUWJRdktBSUFJZ2tFUUNBRElBaE5JQU1nQ1V0eUJFQkJBQ0VDREFVTEN5QUJJQUlRWGlJRFJnMEZJQU1oQVF3Q0JVRUFDd3NoQWd3QkMwRUFJQUpySVFnZ0FVRi9SeUFDUWYvLy8vOEhTWEVnQmlBQ1MzRkZCRUFnQVVGL1JnUkFRUUFoQWd3Q0JRd0VDd0FMUWR3dktBSUFJZ01nQlNBQ2EycEJBQ0FEYTNFaUEwSC8vLy8vQjA4TkFpQURFRjVCZjBZRWZ5QUlFRjRhUVFBRklBSWdBMm9oQWd3REN5RUNDMEc0TDBHNEx5Z0NBRUVFY2pZQ0FBc2dCRUgvLy8vL0Iwa0VRQ0FFRUY0aEFVRUFFRjRpQXlBQmF5SUdJQUJCS0dwTElRUWdCaUFDSUFRYklRSWdCRUVCY3lBQlFYOUdjaUFCUVg5SElBTkJmMGR4SUFFZ0EwbHhRUUZ6Y2tVTkFRc01BUXRCckM5QnJDOG9BZ0FnQW1vaUF6WUNBQ0FEUWJBdktBSUFTd1JBUWJBdklBTTJBZ0FMUVpRc0tBSUFJZ1FFUUFKQVFid3ZJUU1DUUFKQUEwQWdBeWdDQUNJR0lBTkJCR29vQWdBaUJXb2dBVVlOQVNBRFFRaHFLQUlBSWdNTkFBc01BUXNnQTBFRWFpRUlJQU5CREdvb0FnQkJDSEZGQkVBZ0JpQUVUU0FCSUFSTGNRUkFJQWdnQWlBRmFqWUNBQ0FFUVFBZ0JFRUlhaUlCYTBFSGNVRUFJQUZCQjNFYklnTnFJUUZCaUN3b0FnQWdBbW9pQmlBRGF5RUNRWlFzSUFFMkFnQkJpQ3dnQWpZQ0FDQUJRUVJxSUFKQkFYSTJBZ0FnQkNBR2FrRUVha0VvTmdJQVFaZ3NRZVF2S0FJQU5nSUFEQU1MQ3dzZ0FVR01MQ2dDQUVrRVFFR01MQ0FCTmdJQUN5QUJJQUpxSVFaQnZDOGhBd0pBQWtBRFFDQURLQUlBSUFaR0RRRWdBMEVJYWlnQ0FDSUREUUFMREFFTElBTkJER29vQWdCQkNIRkZCRUFnQXlBQk5nSUFJQU5CQkdvaUF5QURLQUlBSUFKcU5nSUFRUUFnQVVFSWFpSUNhMEVIY1VFQUlBSkJCM0ViSUFGcUlna2dBR29oQlNBR1FRQWdCa0VJYWlJQmEwRUhjVUVBSUFGQkIzRWJhaUlDSUFscklBQnJJUU1nQ1VFRWFpQUFRUU55TmdJQUlBSWdCRVlFUUVHSUxFR0lMQ2dDQUNBRGFpSUFOZ0lBUVpRc0lBVTJBZ0FnQlVFRWFpQUFRUUZ5TmdJQUJRSkFRWkFzS0FJQUlBSkdCRUJCaEN4QmhDd29BZ0FnQTJvaUFEWUNBRUdRTENBRk5nSUFJQVZCQkdvZ0FFRUJjallDQUNBQUlBVnFJQUEyQWdBTUFRc2dBa0VFYWlnQ0FDSUFRUU54UVFGR0JFQWdBRUY0Y1NFSElBQkJBM1loQkNBQVFZQUNTUVJBSUFKQkNHb29BZ0FpQUNBQ1FReHFLQUlBSWdGR0JFQkIvQ3RCL0Nzb0FnQkJBU0FFZEVGL2MzRTJBZ0FGSUFCQkRHb2dBVFlDQUNBQlFRaHFJQUEyQWdBTEJRSkFJQUpCR0dvb0FnQWhDQ0FDUVF4cUtBSUFJZ0FnQWtZRVFBSkFJQUpCRUdvaUFVRUVhaUlFS0FJQUlnQUVRQ0FFSVFFRklBRW9BZ0FpQUVVRVFFRUFJUUFNQWdzTEEwQUNRQ0FBUVJScUlnUW9BZ0FpQmdSL0lBUWhBU0FHQlNBQVFSQnFJZ1FvQWdBaUJrVU5BU0FFSVFFZ0Jnc2hBQXdCQ3dzZ0FVRUFOZ0lBQ3dVZ0FrRUlhaWdDQUNJQlFReHFJQUEyQWdBZ0FFRUlhaUFCTmdJQUN5QUlSUTBBSUFKQkhHb29BZ0FpQVVFQ2RFR3NMbW9pQkNnQ0FDQUNSZ1JBQWtBZ0JDQUFOZ0lBSUFBTkFFR0FMRUdBTENnQ0FFRUJJQUYwUVg5emNUWUNBQXdDQ3dVZ0NFRVFhaUlCSUFoQkZHb2dBU2dDQUNBQ1Joc2dBRFlDQUNBQVJRMEJDeUFBUVJocUlBZzJBZ0FnQWtFUWFpSUVLQUlBSWdFRVFDQUFRUkJxSUFFMkFnQWdBVUVZYWlBQU5nSUFDeUFFUVFScUtBSUFJZ0ZGRFFBZ0FFRVVhaUFCTmdJQUlBRkJHR29nQURZQ0FBc0xJQUlnQjJvaEFpQURJQWRxSVFNTElBSkJCR29pQUNBQUtBSUFRWDV4TmdJQUlBVkJCR29nQTBFQmNqWUNBQ0FESUFWcUlBTTJBZ0FnQTBFRGRpRUJJQU5CZ0FKSkJFQWdBVUVEZEVHa0xHb2hBRUg4S3lnQ0FDSUNRUUVnQVhRaUFYRUVmeUFBUVFocUlnRWhBaUFCS0FJQUJVSDhLeUFCSUFKeU5nSUFJQUJCQ0dvaEFpQUFDeUVCSUFJZ0JUWUNBQ0FCUVF4cUlBVTJBZ0FnQlVFSWFpQUJOZ0lBSUFWQkRHb2dBRFlDQUF3QkN5QURRUWgySWdBRWZ5QURRZi8vL3dkTEJIOUJId1VnQUNBQVFZRCtQMnBCRUhaQkNIRWlBblFpQVVHQTRCOXFRUkIyUVFSeElRQWdBU0FBZENJRVFZQ0FEMnBCRUhaQkFuRWhBU0FEUVE0Z0FDQUNjaUFCY21zZ0JDQUJkRUVQZG1vaUFFRUhhblpCQVhFZ0FFRUJkSElMQlVFQUN5SUJRUUowUWF3dWFpRUFJQVZCSEdvZ0FUWUNBQ0FGUVJCcUlnSkJCR3BCQURZQ0FDQUNRUUEyQWdCQmdDd29BZ0FpQWtFQklBRjBJZ1J4UlFSQVFZQXNJQUlnQkhJMkFnQWdBQ0FGTmdJQUlBVkJHR29nQURZQ0FDQUZRUXhxSUFVMkFnQWdCVUVJYWlBRk5nSUFEQUVMSUFBb0FnQWlBRUVFYWlnQ0FFRjRjU0FEUmdSQUlBQWhBUVVDUUNBRFFRQkJHU0FCUVFGMmF5QUJRUjlHRzNRaEFnTkFJQUJCRUdvZ0FrRWZka0VDZEdvaUJDZ0NBQ0lCQkVBZ0FrRUJkQ0VDSUFGQkJHb29BZ0JCZUhFZ0EwWU5BaUFCSVFBTUFRc0xJQVFnQlRZQ0FDQUZRUmhxSUFBMkFnQWdCVUVNYWlBRk5nSUFJQVZCQ0dvZ0JUWUNBQXdDQ3dzZ0FVRUlhaUlBS0FJQUlnSkJER29nQlRZQ0FDQUFJQVUyQWdBZ0JVRUlhaUFDTmdJQUlBVkJER29nQVRZQ0FDQUZRUmhxUVFBMkFnQUxDeUFLSkFJZ0NVRUlhZzhMQzBHOEx5RURBMEFDUUNBREtBSUFJZ1lnQkUwRVFDQUdJQU5CQkdvb0FnQnFJZ1VnQkVzTkFRc2dBMEVJYWlnQ0FDRUREQUVMQ3lBRlFWRnFJZ1pCQ0dvaEF5QUVJQVpCQUNBRGEwRUhjVUVBSUFOQkIzRWJhaUlESUFNZ0JFRVFhaUlKU1JzaUEwRUlhaUVHUVpRc1FRQWdBVUVJYWlJSWEwRUhjVUVBSUFoQkIzRWJJZ2dnQVdvaUJ6WUNBRUdJTENBQ1FWaHFJZ3NnQ0dzaUNEWUNBQ0FIUVFScUlBaEJBWEkyQWdBZ0FTQUxha0VFYWtFb05nSUFRWmdzUWVRdktBSUFOZ0lBSUFOQkJHb2lDRUViTmdJQUlBWkJ2QzhwQWdBM0FnQWdCa0hFTHlrQ0FEY0NDRUc4THlBQk5nSUFRY0F2SUFJMkFnQkJ5QzlCQURZQ0FFSEVMeUFHTmdJQUlBTkJHR29oQVFOQUlBRkJCR29pQWtFSE5nSUFJQUZCQ0dvZ0JVa0VRQ0FDSVFFTUFRc0xJQU1nQkVjRVFDQUlJQWdvQWdCQmZuRTJBZ0FnQkVFRWFpQURJQVJySWdaQkFYSTJBZ0FnQXlBR05nSUFJQVpCQTNZaEFpQUdRWUFDU1FSQUlBSkJBM1JCcEN4cUlRRkIvQ3NvQWdBaUEwRUJJQUowSWdKeEJIOGdBVUVJYWlJQ0lRTWdBaWdDQUFWQi9Dc2dBaUFEY2pZQ0FDQUJRUWhxSVFNZ0FRc2hBaUFESUFRMkFnQWdBa0VNYWlBRU5nSUFJQVJCQ0dvZ0FqWUNBQ0FFUVF4cUlBRTJBZ0FNQWdzZ0JrRUlkaUlCQkg4Z0JrSC8vLzhIU3dSL1FSOEZJQUVnQVVHQS9qOXFRUkIyUVFoeElnTjBJZ0pCZ09BZmFrRVFka0VFY1NFQklBSWdBWFFpQlVHQWdBOXFRUkIyUVFKeElRSWdCa0VPSUFFZ0EzSWdBbkpySUFVZ0FuUkJEM1pxSWdGQkIycDJRUUZ4SUFGQkFYUnlDd1ZCQUFzaUFrRUNkRUdzTG1vaEFTQUVRUnhxSUFJMkFnQWdCRUVVYWtFQU5nSUFJQWxCQURZQ0FFR0FMQ2dDQUNJRFFRRWdBblFpQlhGRkJFQkJnQ3dnQXlBRmNqWUNBQ0FCSUFRMkFnQWdCRUVZYWlBQk5nSUFJQVJCREdvZ0JEWUNBQ0FFUVFocUlBUTJBZ0FNQWdzZ0FTZ0NBQ0lCUVFScUtBSUFRWGh4SUFaR0JFQWdBU0VDQlFKQUlBWkJBRUVaSUFKQkFYWnJJQUpCSDBZYmRDRURBMEFnQVVFUWFpQURRUjkyUVFKMGFpSUZLQUlBSWdJRVFDQURRUUYwSVFNZ0FrRUVhaWdDQUVGNGNTQUdSZzBDSUFJaEFRd0JDd3NnQlNBRU5nSUFJQVJCR0dvZ0FUWUNBQ0FFUVF4cUlBUTJBZ0FnQkVFSWFpQUVOZ0lBREFNTEN5QUNRUWhxSWdFb0FnQWlBMEVNYWlBRU5nSUFJQUVnQkRZQ0FDQUVRUWhxSUFNMkFnQWdCRUVNYWlBQ05nSUFJQVJCR0dwQkFEWUNBQXNMQlVHTUxDZ0NBQ0lEUlNBQklBTkpjZ1JBUVl3c0lBRTJBZ0FMUWJ3dklBRTJBZ0JCd0M4Z0FqWUNBRUhJTDBFQU5nSUFRYUFzUWRRdktBSUFOZ0lBUVp3c1FYODJBZ0JCc0N4QnBDdzJBZ0JCckN4QnBDdzJBZ0JCdUN4QnJDdzJBZ0JCdEN4QnJDdzJBZ0JCd0N4QnRDdzJBZ0JCdkN4QnRDdzJBZ0JCeUN4QnZDdzJBZ0JCeEN4QnZDdzJBZ0JCMEN4QnhDdzJBZ0JCekN4QnhDdzJBZ0JCMkN4QnpDdzJBZ0JCMUN4QnpDdzJBZ0JCNEN4QjFDdzJBZ0JCM0N4QjFDdzJBZ0JCNkN4QjNDdzJBZ0JCNUN4QjNDdzJBZ0JCOEN4QjVDdzJBZ0JCN0N4QjVDdzJBZ0JCK0N4QjdDdzJBZ0JCOUN4QjdDdzJBZ0JCZ0MxQjlDdzJBZ0JCL0N4QjlDdzJBZ0JCaUMxQi9DdzJBZ0JCaEMxQi9DdzJBZ0JCa0MxQmhDMDJBZ0JCakMxQmhDMDJBZ0JCbUMxQmpDMDJBZ0JCbEMxQmpDMDJBZ0JCb0MxQmxDMDJBZ0JCbkMxQmxDMDJBZ0JCcUMxQm5DMDJBZ0JCcEMxQm5DMDJBZ0JCc0MxQnBDMDJBZ0JCckMxQnBDMDJBZ0JCdUMxQnJDMDJBZ0JCdEMxQnJDMDJBZ0JCd0MxQnRDMDJBZ0JCdkMxQnRDMDJBZ0JCeUMxQnZDMDJBZ0JCeEMxQnZDMDJBZ0JCMEMxQnhDMDJBZ0JCekMxQnhDMDJBZ0JCMkMxQnpDMDJBZ0JCMUMxQnpDMDJBZ0JCNEMxQjFDMDJBZ0JCM0MxQjFDMDJBZ0JCNkMxQjNDMDJBZ0JCNUMxQjNDMDJBZ0JCOEMxQjVDMDJBZ0JCN0MxQjVDMDJBZ0JCK0MxQjdDMDJBZ0JCOUMxQjdDMDJBZ0JCZ0M1QjlDMDJBZ0JCL0MxQjlDMDJBZ0JCaUM1Qi9DMDJBZ0JCaEM1Qi9DMDJBZ0JCa0M1QmhDNDJBZ0JCakM1QmhDNDJBZ0JCbUM1QmpDNDJBZ0JCbEM1QmpDNDJBZ0JCb0M1QmxDNDJBZ0JCbkM1QmxDNDJBZ0JCcUM1Qm5DNDJBZ0JCcEM1Qm5DNDJBZ0JCbEN4QkFDQUJRUWhxSWdOclFRZHhRUUFnQTBFSGNSc2lBeUFCYWlJRU5nSUFRWWdzSUFKQldHb2lBaUFEYXlJRE5nSUFJQVJCQkdvZ0EwRUJjallDQUNBQklBSnFRUVJxUVNnMkFnQkJtQ3hCNUM4b0FnQTJBZ0FMUVlnc0tBSUFJZ0VnQUVzRVFFR0lMQ0FCSUFCcklnSTJBZ0JCbEN4QmxDd29BZ0FpQVNBQWFpSUROZ0lBSUFOQkJHb2dBa0VCY2pZQ0FDQUJRUVJxSUFCQkEzSTJBZ0FnQ2lRQ0lBRkJDR29QQ3dzUVRVRU1OZ0lBSUFva0FrRUFDOGdQQVFoL0lBQkZCRUFQQzBHTUxDZ0NBQ0VFSUFCQmVHb2lBU0FBUVh4cUtBSUFJZ05CZUhFaUFHb2hCaUFEUVFGeEJFQWdBU0VDQlFKL0lBRW9BZ0FoQWlBRFFRTnhSUVJBRHdzZ0FDQUNhaUVESUFFZ0Ftc2lBQ0FFU1FSQUR3dEJrQ3dvQWdBZ0FFWUVRQ0FHUVFScUlnRW9BZ0FpQWtFRGNVRURSd1JBSUFBaEFTQUFJUUlnQXd3Q0MwR0VMQ0FETmdJQUlBRWdBa0YrY1RZQ0FDQUFRUVJxSUFOQkFYSTJBZ0FnQUNBRGFpQUROZ0lBRHdzZ0FrRURkaUVFSUFKQmdBSkpCRUFnQUVFSWFpZ0NBQ0lCSUFCQkRHb29BZ0FpQWtZRVFFSDhLMEg4S3lnQ0FFRUJJQVIwUVg5emNUWUNBQ0FBSVFFZ0FDRUNJQU1NQWdVZ0FVRU1haUFDTmdJQUlBSkJDR29nQVRZQ0FDQUFJUUVnQUNFQ0lBTU1BZ3NBQ3lBQVFSaHFLQUlBSVFjZ0FFRU1haWdDQUNJQklBQkdCRUFDUUNBQVFSQnFJZ0pCQkdvaUJDZ0NBQ0lCQkVBZ0JDRUNCU0FDS0FJQUlnRkZCRUJCQUNFQkRBSUxDd05BQWtBZ0FVRVVhaUlFS0FJQUlnVUVmeUFFSVFJZ0JRVWdBVUVRYWlJRUtBSUFJZ1ZGRFFFZ0JDRUNJQVVMSVFFTUFRc0xJQUpCQURZQ0FBc0ZJQUJCQ0dvb0FnQWlBa0VNYWlBQk5nSUFJQUZCQ0dvZ0FqWUNBQXNnQndSL0lBQkJIR29vQWdBaUFrRUNkRUdzTG1vaUJDZ0NBQ0FBUmdSQUlBUWdBVFlDQUNBQlJRUkFRWUFzUVlBc0tBSUFRUUVnQW5SQmYzTnhOZ0lBSUFBaEFTQUFJUUlnQXd3REN3VWdCMEVRYWlJQ0lBZEJGR29nQWlnQ0FDQUFSaHNnQVRZQ0FDQUJSUVJBSUFBaEFTQUFJUUlnQXd3REN3c2dBVUVZYWlBSE5nSUFJQUJCRUdvaUJDZ0NBQ0lDQkVBZ0FVRVFhaUFDTmdJQUlBSkJHR29nQVRZQ0FBc2dCRUVFYWlnQ0FDSUNCSDhnQVVFVWFpQUNOZ0lBSUFKQkdHb2dBVFlDQUNBQUlRRWdBQ0VDSUFNRklBQWhBU0FBSVFJZ0F3c0ZJQUFoQVNBQUlRSWdBd3NMSVFBTElBRWdCazhFUUE4TElBWkJCR29pQkNnQ0FDSURRUUZ4UlFSQUR3c2dBMEVDY1FSL0lBUWdBMEYrY1RZQ0FDQUNRUVJxSUFCQkFYSTJBZ0FnQUNBQmFpQUFOZ0lBSUFBRlFaUXNLQUlBSUFaR0JFQkJpQ3hCaUN3b0FnQWdBR29pQURZQ0FFR1VMQ0FDTmdJQUlBSkJCR29nQUVFQmNqWUNBQ0FDUVpBc0tBSUFSd1JBRHd0QmtDeEJBRFlDQUVHRUxFRUFOZ0lBRHd0QmtDd29BZ0FnQmtZRVFFR0VMRUdFTENnQ0FDQUFhaUlBTmdJQVFaQXNJQUUyQWdBZ0FrRUVhaUFBUVFGeU5nSUFJQUFnQVdvZ0FEWUNBQThMSUFOQmVIRWdBR29oQkNBRFFRTjJJUVVnQTBHQUFra0VRQ0FHUVFocUtBSUFJZ0FnQmtFTWFpZ0NBQ0lEUmdSQVFmd3JRZndyS0FJQVFRRWdCWFJCZjNOeE5nSUFCU0FBUVF4cUlBTTJBZ0FnQTBFSWFpQUFOZ0lBQ3dVQ1FDQUdRUmhxS0FJQUlRZ2dCa0VNYWlnQ0FDSUFJQVpHQkVBQ1FDQUdRUkJxSWdOQkJHb2lCU2dDQUNJQUJFQWdCU0VEQlNBREtBSUFJZ0JGQkVCQkFDRUFEQUlMQ3dOQUFrQWdBRUVVYWlJRktBSUFJZ2NFZnlBRklRTWdCd1VnQUVFUWFpSUZLQUlBSWdkRkRRRWdCU0VESUFjTElRQU1BUXNMSUFOQkFEWUNBQXNGSUFaQkNHb29BZ0FpQTBFTWFpQUFOZ0lBSUFCQkNHb2dBellDQUFzZ0NBUkFJQVpCSEdvb0FnQWlBMEVDZEVHc0xtb2lCU2dDQUNBR1JnUkFJQVVnQURZQ0FDQUFSUVJBUVlBc1FZQXNLQUlBUVFFZ0EzUkJmM054TmdJQURBTUxCU0FJUVJCcUlnTWdDRUVVYWlBREtBSUFJQVpHR3lBQU5nSUFJQUJGRFFJTElBQkJHR29nQ0RZQ0FDQUdRUkJxSWdVb0FnQWlBd1JBSUFCQkVHb2dBellDQUNBRFFSaHFJQUEyQWdBTElBVkJCR29vQWdBaUF3UkFJQUJCRkdvZ0F6WUNBQ0FEUVJocUlBQTJBZ0FMQ3dzTElBSkJCR29nQkVFQmNqWUNBQ0FCSUFScUlBUTJBZ0JCa0N3b0FnQWdBa1lFZjBHRUxDQUVOZ0lBRHdVZ0JBc0xJZ05CQTNZaEFTQURRWUFDU1FSQUlBRkJBM1JCcEN4cUlRQkIvQ3NvQWdBaUEwRUJJQUYwSWdGeEJIOGdBRUVJYWlJQklRTWdBU2dDQUFWQi9Dc2dBU0FEY2pZQ0FDQUFRUWhxSVFNZ0FBc2hBU0FESUFJMkFnQWdBVUVNYWlBQ05nSUFJQUpCQ0dvZ0FUWUNBQ0FDUVF4cUlBQTJBZ0FQQ3lBRFFRaDJJZ0FFZnlBRFFmLy8vd2RMQkg5Qkh3VWdBQ0FBUVlEK1AycEJFSFpCQ0hFaUJIUWlBVUdBNEI5cVFSQjJRUVJ4SVFBZ0FTQUFkQ0lGUVlDQUQycEJFSFpCQW5FaEFTQURRUTRnQUNBRWNpQUJjbXNnQlNBQmRFRVBkbW9pQUVFSGFuWkJBWEVnQUVFQmRISUxCVUVBQ3lJQlFRSjBRYXd1YWlFQUlBSkJIR29nQVRZQ0FDQUNRUlJxUVFBMkFnQWdBa0VRYWtFQU5nSUFRWUFzS0FJQUlnUkJBU0FCZENJRmNRUkFBa0FnQUNnQ0FDSUFRUVJxS0FJQVFYaHhJQU5HQkVBZ0FDRUJCUUpBSUFOQkFFRVpJQUZCQVhacklBRkJIMFliZENFRUEwQWdBRUVRYWlBRVFSOTJRUUowYWlJRktBSUFJZ0VFUUNBRVFRRjBJUVFnQVVFRWFpZ0NBRUY0Y1NBRFJnMENJQUVoQUF3QkN3c2dCU0FDTmdJQUlBSkJHR29nQURZQ0FDQUNRUXhxSUFJMkFnQWdBa0VJYWlBQ05nSUFEQUlMQ3lBQlFRaHFJZ0FvQWdBaUEwRU1haUFDTmdJQUlBQWdBallDQUNBQ1FRaHFJQU0yQWdBZ0FrRU1haUFCTmdJQUlBSkJHR3BCQURZQ0FBc0ZRWUFzSUFRZ0JYSTJBZ0FnQUNBQ05nSUFJQUpCR0dvZ0FEWUNBQ0FDUVF4cUlBSTJBZ0FnQWtFSWFpQUNOZ0lBQzBHY0xFR2NMQ2dDQUVGL2FpSUFOZ0lBSUFBRVFBOExRY1F2SVFBRFFDQUFLQUlBSWdGQkNHb2hBQ0FCRFFBTFFad3NRWDgyQWdBTExBQWdBQ2dDQUVIZnQ5NmFBVVlFUUVFQUR3c2dBVUVCY1VFYWFoRUJBQ0FBUWQrMzNwb0JOZ0lBUVFBTHhnTUJBMzhnQWtHQXdBQk9CRUFnQUNBQklBSVFDQm9nQUE4TElBQWhCQ0FBSUFKcUlRTWdBRUVEY1NBQlFRTnhSZ1JBQTBBZ0FFRURjUVJBSUFKRkJFQWdCQThMSUFBZ0FTd0FBRG9BQUNBQVFRRnFJUUFnQVVFQmFpRUJJQUpCQVdzaEFnd0JDd3NnQTBGOGNTSUNRVUJxSVFVRFFDQUFJQVZNQkVBZ0FDQUJLQUlBTmdJQUlBQWdBU2dDQkRZQ0JDQUFJQUVvQWdnMkFnZ2dBQ0FCS0FJTU5nSU1JQUFnQVNnQ0VEWUNFQ0FBSUFFb0FoUTJBaFFnQUNBQktBSVlOZ0lZSUFBZ0FTZ0NIRFlDSENBQUlBRW9BaUEyQWlBZ0FDQUJLQUlrTmdJa0lBQWdBU2dDS0RZQ0tDQUFJQUVvQWl3MkFpd2dBQ0FCS0FJd05nSXdJQUFnQVNnQ05EWUNOQ0FBSUFFb0FqZzJBamdnQUNBQktBSThOZ0k4SUFCQlFHc2hBQ0FCUVVCcklRRU1BUXNMQTBBZ0FDQUNTQVJBSUFBZ0FTZ0NBRFlDQUNBQVFRUnFJUUFnQVVFRWFpRUJEQUVMQ3dVZ0EwRUVheUVDQTBBZ0FDQUNTQVJBSUFBZ0FTd0FBRG9BQUNBQUlBRXNBQUU2QUFFZ0FDQUJMQUFDT2dBQ0lBQWdBU3dBQXpvQUF5QUFRUVJxSVFBZ0FVRUVhaUVCREFFTEN3c0RRQ0FBSUFOSUJFQWdBQ0FCTEFBQU9nQUFJQUJCQVdvaEFDQUJRUUZxSVFFTUFRc0xJQVFMbUFJQkJIOGdBQ0FDYWlFRUlBRkIvd0Z4SVFFZ0FrSERBRTRFUUFOQUlBQkJBM0VFUUNBQUlBRTZBQUFnQUVFQmFpRUFEQUVMQ3lBQlFRaDBJQUZ5SUFGQkVIUnlJQUZCR0hSeUlRTWdCRUY4Y1NJRlFVQnFJUVlEUUNBQUlBWk1CRUFnQUNBRE5nSUFJQUFnQXpZQ0JDQUFJQU0yQWdnZ0FDQUROZ0lNSUFBZ0F6WUNFQ0FBSUFNMkFoUWdBQ0FETmdJWUlBQWdBellDSENBQUlBTTJBaUFnQUNBRE5nSWtJQUFnQXpZQ0tDQUFJQU0yQWl3Z0FDQUROZ0l3SUFBZ0F6WUNOQ0FBSUFNMkFqZ2dBQ0FETmdJOElBQkJRR3NoQUF3QkN3c0RRQ0FBSUFWSUJFQWdBQ0FETmdJQUlBQkJCR29oQUF3QkN3c0xBMEFnQUNBRVNBUkFJQUFnQVRvQUFDQUFRUUZxSVFBTUFRc0xJQVFnQW1zTFVnRURmeEFISVFNZ0FDTUJLQUlBSWdKcUlnRWdBa2dnQUVFQVNuRWdBVUVBU0hJRVFDQUJFQW9hUVF3UUFrRi9Ed3NnQVNBRFNnUkFJQUVRQ1VVRVFFRU1FQUpCZnc4TEN5TUJJQUUyQWdBZ0Fnc01BQ0FCSUFCQkEzRVJBZ0FMRVFBZ0FTQUNJQUJCQjNGQkJHb1JBd0FMRXdBZ0FTQUNJQU1nQUVFSGNVRU1haEVBQUFzYkFDQUJJQUlnQXlBRUlBVWdCaUFISUFCQkFYRkJGR29SQkFBTEhRQWdBU0FDSUFNZ0JDQUZJQVlnQnlBSUlBQkJBWEZCRm1vUkJRQUxFd0FnQVNBQ0lBTWdBRUVCY1VFWWFoRUdBQXNOQUNBQVFRRnhRUnBxRVFFQUN3OEFJQUVnQUVFQmNVRWNhaEVIQUFzYkFDQUJJQUlnQXlBRUlBVWdCaUFISUFCQkFYRkJIbW9SQ0FBTENBQkJBQkFBUVFBTENBQkJBUkFBUVFBTENBQkJBaEFBUVFBTENBQkJBeEFBUVFBTENBQkJCQkFBUVFBTENBQkJCUkFBUWdBTEJnQkJCaEFBQ3dZQVFRY1FBQXNHQUVFSUVBQUxJd0VCZmlBQUlBRWdBcTBnQTYxQ0lJYUVJQVFRWkNFRklBVkNJSWluRUFzZ0JhY0xDL2thREFCQmdBZ0xHRklhSEJPWkd6c2FjeG9wRGQ0ZEZ3K01IbUljbkJNS0VRQkJvQWdMR0hJZ1pTZGVKeTh1UXk2bEdBRWxZeVYvS3AwZDlCODdIUUJCd0FnTEdIb0JLQVR0QVVZQ3NBSlJBdG9CdVFMYkFiQUNwUUhIQVFCQjRBZ0xHQ3NDK1FFM0Fnd0NTUUxQQlAwQlBBUHNBUVFHTndSU0F3QkJnQWtMRnlJQVBnQklBRUlBTlFBWkFGNEFRZ0E0QUQ0QVN3Qm5BRUdnQ1FzWE1BQlNBQzBBVndBeUFDOEFVQUF1QUZNQUtRQk9BRkVBUWNJSkM3OFZ5UUNTQVZzQ0pBUHRBN1lFZmdWSEJoQUgyUWVoQ0dvSk1ncjdDc01MaXd4VERSc080dzZyRDNJUU9SRUFFc2NTamhOVkZCc1Y0UlduRm0wWE14ajRHTDBaZ2hwR0d3c2N6eHlUSFZZZUdSL2NINThnWVNFakl1UWlwaU5uSkNjbDV5V25KbWNuSmlqbEtLTXBZU29lSzlzcm1DeFVMUkF1ekM2R0wwRXcrekMwTVcweUpqUGVNNVkwVFRVRE5yazJiemNrT05nNGpEay9Pdkk2cER0V1BBYzl0ejFuUGhZL3hUOXpRQ0JCelVGNVFpVkQwRU42UkNORnpFVjBSaHhIdzBkcFNBNUpzMGxYU3ZwS25Vcy9UT0JNZ0UwZ1RyOU9YVS82VDVkUU0xSE9VV2hTQVZPYVV6SlV5VlJmVmZSVmlWWWRWN0JYUWxqVFdHTlo4MW1CV2c5Ym5Gc29YTE5jUFYzR1hVOWUxbDVkWCtKZloyRHJZRzVoOEdGeFl2RmljR1B1WTJ0azUyUmlaZDFsVm1iT1prVm52R2N4YUtWb0dXbUxhZnhwYkdyYmFrcHJ0MnNqYkk1cytHeGhiY2x0TUc2VmJ2cHVYbS9BYnlKd2duRGhjRUJ4blhINWNWUnlybklHYzE1enRYTUtkRjUwc1hRRGRWUjFwSFh6ZFVCMmpYYllkaUozYTNlemQvbDNQM2lEZU1aNENIbEplWWw1eDNrRWVrRjZmSHExZXU1NkpYdGNlNUY3eEh2M2V5bDhXWHlJZkxaODRud09mVGg5WVgySmZiQjkxWDM1ZlJ4K1BuNWVmbjUrbkg2NWZ0Uis3MzRJZnlCL04zOU1mMkYvZEgrR2Y1Wi9wbiswZjhGL3pYL1hmK0IvNkgvdmYvVi8rWC84Zi81Ly8zLytmL3gvK1gvMWYrOS82SC9nZjlkL3pYL0JmN1IvcG4rV2Y0Wi9kSDloZjB4L04zOGdmd2gvNzM3VWZybCtuSDUrZmw1K1BuNGNmdmw5MVgyd2ZZbDlZWDA0ZlE1OTRueTJmSWg4V1h3cGZQZDd4SHVSZTF4N0pYdnVlclY2ZkhwQmVnUjZ4M21KZVVsNUNIbkdlSU40UDNqNWQ3TjNhM2NpZDloMmpYWkFkdk4xcEhWVWRRTjFzWFJlZEFwMHRYTmVjd1p6cm5KVWN2bHhuWEZBY2VGd2duQWljTUJ2WG0vNmJwVnVNRzdKYldGdCtHeU9iQ05zdDJ0S2E5dHFiR3I4YVl0cEdXbWxhREZvdkdkRlo4NW1WbWJkWldKbDUyUnJaTzVqY0dQeFluRmk4R0Z1WWV0Z1oyRGlYMTFmMWw1UFhzWmRQVjJ6WENoY25Gc1BXNEZhODFsaldkTllRbGl3VngxWGlWYjBWVjlWeVZReVZKcFRBVk5vVXM1Uk0xR1hVUHBQWFUrL1RpQk9nRTNnVEQ5TW5VdjZTbGRLczBrT1NXbEl3MGNjUjNSR3pFVWpSWHBFMEVNbFEzbEN6VUVnUVhOQXhUOFdQMmMrdHowSFBWWThwRHZ5T2o4NmpEbllPQ1E0YnplNU5nTTJUVFdXTk40ekpqTnRNclF4K3pCQk1JWXZ6QzRRTGxRdG1DemJLeDRyWVNxaktlVW9KaWhuSjZjbTV5VW5KV2NrcGlQa0lpTWlZU0dmSU53ZkdSOVdIcE1kenh3TEhFWWJnaHE5R2ZnWU14aHRGNmNXNFJVYkZWVVVqaFBIRWdBU09SRnlFS3NQNHc0YkRsTU5pd3pEQy9zS01ncHFDYUVJMlFjUUIwY0dmZ1cyQk8wREpBTmJBcElCeVFBQUFEZi9idjZsL2R6OEUveEsrNEw2dWZudytDZjRYL2VXOXM3MUJmVTk5SFh6cmZMbDhSM3hWZkNPNzhmdUFPNDU3WExzcSt2bDZoL3FXZW1UNk0zbkNPZEQ1bjdsdXVUMTR6SGpiZUtxNGVmZ0pPQmgzNS9lM2QwYzNWcmNtZHZaMmhuYVdkbVoyTnJYRzlkZDFwL1Y0dFFsMUdqVHJOTHcwVFRSZXRDL3p3WFBUTTZUemRyTUlzeHF5N1BLL2NsSHlaSEkzTWNveDNUR3djVU94VnpFcXNQNXdrbkNtY0hxd0R2QWpiL2d2ak8raDczYnZEQzhocnZkdWpTNmpMbmt1RDI0bDdmeXRrMjJxYlVHdFdPMHdiTWdzNEN5NExGQnNhT3dCckJwcjgydU1xNllyZitzWnF6T3F6ZXJvYW9NcW5lcDQ2aFFxTDZuTGFlZHBnMm1mNlh4cEdTazJLTk5vOE9pT3FLeG9TcWhvNkFlb0ptZkZaK1NuaENlajUwUG5aQ2NFcHlWbXhtYm5wb2ptcXFaTXBtN21FU1l6NWRibCtlV2RaWUVscFNWSlpXMmxFbVUzWk55a3dpVG41STNrdENSYTVFR2thS1FRSkRlajM2UEg0L0FqbU9PQjQ2c2pWS04rb3lpakV1TTlvdWlpMCtML1lxc2lseUtEWXJBaVhPSktJbmVpSldJVFlnSGlNR0hmWWM2aC9pR3Q0WjNoam1HL0lXL2hZU0ZTNFVTaGR1RXBJUnZoRHlFQ1lUWGc2ZURlSU5LZ3g2RDhvTElncCtDZDRKUWdpdUNCNExrZ2NLQm9vR0NnV1NCUjRFc2dSR0IrSURnZ01tQXRJQ2ZnSXlBZW9CcWdGcUFUSUEvZ0RPQUtZQWdnQmlBRVlBTGdBZUFCSUFDZ0FHQUFvQUVnQWVBQzRBUmdCaUFJSUFwZ0RPQVA0Qk1nRnFBYW9CNmdJeUFuNEMwZ01tQTRJRDRnQkdCTElGSGdXU0Jnb0dpZ2NLQjVJRUhnaXVDVUlKM2dwK0N5SUx5Z2g2RFNvTjRnNmVEMTRNSmhEeUViNFNraE51RUVvVkxoWVNGdjRYOGhUbUdkNGEzaHZpR09vZDloOEdIQjRoTmlKV0kzb2dvaVhPSndJa05pbHlLcklyOWlrK0xvb3YyaTB1TW9vejZqRktOckkwSGptT093STRmajM2UDNvOUFrS0tRQnBGcmtkQ1JONUtma2dpVGNwUGRrMG1VdHBRbGxaU1ZCSloxbHVlV1c1ZlBsMFNZdTVneW1hcVpJNXFlbWhtYmxac1NuSkNjRDUyUG5SQ2VrcDRWbjVtZkhxQ2pvQ3Foc2FFNm9zT2lUYVBZbzJTazhhUi9wUTJtbmFZdHA3Nm5VS2pqcUhlcERLcWhxamVyenF0bXJQK3NtSzB5cnMydWFhOEdzS093UWJIZ3NZQ3lJTFBCczJPMEJyV3B0VTIyOHJhWHR6MjQ1TGlNdVRTNjNicUd1ekM4Mjd5SHZUTys0TDZOdnp2QTZzQ1p3VW5DK2NLcXcxekVEc1hCeFhUR0tNZmN4NUhJUjhuOXliUEthc3Npek5yTWs4MU16Z1hQdjg5NjBEVFI4TkdzMG1qVEpkVGkxSi9WWGRZYjE5clhtZGhaMlJuYTJkcVoyMXJjSE4zZDNaL2VZZDhrNE9mZ3F1RnQ0akhqOWVPNjVIN2xRK1lJNTgzbmsraFo2Ui9xNWVxcjYzTHNPZTBBN3NmdWp1OVY4QjN4NWZHdDhuWHpQZlFGOWM3MWx2WmY5eWY0OFBpNStZTDZTdnNUL056OHBmMXUvamYvQVFDQUFBSUFRQUFEQU1BQUJBQWdBQVVBb0FBR0FHQUFCd0RnQUFnQUVBQUpBSkFBQ2dCUUFBc0EwQUFNQURBQURRQ3dBQTRBY0FBUEFQQUFFUUNJQUJJQVNBQVRBTWdBRkFBb0FCVUFxQUFXQUdnQUZ3RG9BQmtBbUFBYUFGZ0FHd0RZQUJ3QU9BQWRBTGdBSGdCNEFCOEErQUFoQUlRQUlnQkVBQ01BeEFBbEFLUUFKZ0JrQUNjQTVBQXBBSlFBS2dCVUFDc0ExQUFzQURRQUxRQzBBQzRBZEFBdkFQUUFNUUNNQURJQVRBQXpBTXdBTlFDc0FEWUFiQUEzQU93QU9RQ2NBRG9BWEFBN0FOd0FQUUM4QUQ0QWZBQS9BUHdBUVFDQ0FFTUF3Z0JGQUtJQVJnQmlBRWNBNGdCSkFKSUFTZ0JTQUVzQTBnQk5BTElBVGdCeUFFOEE4Z0JSQUlvQVV3REtBRlVBcWdCV0FHb0FWd0RxQUZrQW1nQmJBTm9BWFFDNkFGNEFlZ0JmQVBvQVlRQ0dBR01BeGdCbEFLWUFad0RtQUdrQWxnQnJBTllBYlFDMkFHNEFkZ0J2QVBZQWNRQ09BSE1BemdCMUFLNEFkd0R1QUhrQW5nQjdBTjRBZlFDK0FIOEEvZ0NEQU1FQWhRQ2hBSWNBNFFDSkFKRUFpd0RSQUkwQXNRQ1BBUEVBa3dESkFKVUFxUUNYQU9rQW13RFpBSjBBdVFDZkFQa0Fvd0RGQUtjQTVRQ3JBTlVBclFDMUFLOEE5UUN6QU0wQXR3RHRBTHNBM1FDL0FQMEF4d0RqQU1zQTB3RFBBUE1BMXdEckFOOEErd0R2QVBjQUFRQkFBQUlBSUFBREFHQUFCQUFRQUFVQVVBQUdBREFBQndCd0FBa0FTQUFLQUNnQUN3Qm9BQXdBR0FBTkFGZ0FEZ0E0QUE4QWVBQVJBRVFBRWdBa0FCTUFaQUFWQUZRQUZnQTBBQmNBZEFBWkFFd0FHZ0FzQUJzQWJBQWRBRndBSGdBOEFCOEFmQUFoQUVJQUl3QmlBQ1VBVWdBbUFESUFKd0J5QUNrQVNnQXJBR29BTFFCYUFDNEFPZ0F2QUhvQU1RQkdBRE1BWmdBMUFGWUFOd0IyQURrQVRnQTdBRzRBUFFCZUFEOEFmZ0JEQUdFQVJRQlJBRWNBY1FCTEFHa0FUUUJaQUU4QWVRQlRBR1VBVndCMUFGc0FiUUJmQUgwQVp3QnpBRzhBZXdBRkFFR01Id3NCQVFCQnBCOExEZ0VBQUFBQkFBQUE2QkVBQUFBRUFFRzhId3NCQVFCQnl4OExCUXIvLy8vL0FFR1FJQXZNQTRBUEFBQVlBQlVBR0FBNUFEQUFPUUFJQUFRQUF3QU9BQWNBQlFBbEFDQUFKUUJrQUZBQVpBQlNBRTRBVWdBZEFRUUJIUUVHQUFNQUFnQUpBQVVBQXdCZUFGNEFYZ0JNQkJvRVRBUUdBQWdBQ2dBTUFBNEFFQUNBQWdBRElBSWdBa0FDUUFKQUFrQUNnQ3lBTEFBdEFDMEFMUUF0QUNTQUl3QWpnQ0lBSW9BaFpHRjBZVnN3WFNBOVBTQjJZV3d3QUcxaGFXNHVZd0J3Y205alpYTnpYMlJoZEdFQVpHRjBZVnN4TURCZElEMDlJSFpoYkRFd01BQmtZWFJoV3pJd01EQmRJRDA5SUhaaGJESXdNREFBY0hKdlkyVnpjMTlrWVhSaE9pQmtZWFJoSUQwOUlFNVZURXdnQUdSaGRHRmZiR1Z1WjNSb0lENDlJREFBZDJWaWNuUmpMMk52YlcxdmJsOWhkV1JwYnk5MllXUXZkbUZrWDJacGJIUmxjbUpoYm1zdVl3QlhaV0pTZEdOV1lXUmZRMkZzWTNWc1lYUmxSbVZoZEhWeVpYTUFaR0YwWVY5c1pXNW5kR2dnUEQwZ01qUXdBR1JoZEdGZmFXNGdJVDBnVGxWTVRBQk1iMmRQWmtWdVpYSm5lUUJrWVhSaFgyeGxibWQwYUNBK0lEQUFZMmhoYm01bGJDQThJR3RPZFcxRGFHRnVibVZzY3dCM1pXSnlkR012WTI5dGJXOXVYMkYxWkdsdkwzWmhaQzkyWVdSZmMzQXVZd0JYWldKU2RHTldZV1JmUm1sdVpFMXBibWx0ZFcwPSI7SS5yZWFkeT1uZXcgUHJvbWlzZShmdW5jdGlvbihhLGIpe0c9YTt9KTt2YXIgSyxMPXt9O2ZvcihLIGluIEkpSS5oYXNPd25Qcm9wZXJ0eShLKSYmKExbS109SVtLXSk7SS5hcmd1bWVudHM9W10sSS50aGlzUHJvZ3JhbT0iLi90aGlzLnByb2dyYW0iLEkucXVpdD1mdW5jdGlvbihhLGIpe3Rocm93IGJ9LEkucHJlUnVuPVtdLEkucG9zdFJ1bj1bXTt2YXIgTT0hMSxOPSExLE89ITEsUD0hMTtpZihNPSJvYmplY3QiPT10eXBlb2Ygd2luZG93LE49ImZ1bmN0aW9uIj09dHlwZW9mIGltcG9ydFNjcmlwdHMsUD0ib2JqZWN0Ij09dHlwZW9mIHByb2Nlc3MmJiJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlLE89UCYmIU0mJiFOLE8pezE8cHJvY2Vzcy5hcmd2Lmxlbmd0aCYmKEkudGhpc1Byb2dyYW09cHJvY2Vzcy5hcmd2WzFdLnJlcGxhY2UoL1xcL2csIi8iKSksSS5hcmd1bWVudHM9cHJvY2Vzcy5hcmd2LnNsaWNlKDIpLCJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiYobW9kdWxlLmV4cG9ydHM9SSkscHJvY2Vzcy5vbigidW5jYXVnaHRFeGNlcHRpb24iLGZ1bmN0aW9uKGEpe2lmKCEoYSBpbnN0YW5jZW9mIEMpKXRocm93IGF9KSxwcm9jZXNzLm9uKCJ1bmhhbmRsZWRSZWplY3Rpb24iLEYpLEkucXVpdD1mdW5jdGlvbihhKXtwcm9jZXNzLmV4aXQoYSk7fSxJLmluc3BlY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gIltFbXNjcmlwdGVuIE1vZHVsZSBvYmplY3RdIn07fWVsc2UgaWYoTXx8TilJLnNldFdpbmRvd1RpdGxlPWZ1bmN0aW9uKGEpe2RvY3VtZW50LnRpdGxlPWE7fTtlbHNlO3ZhciBRPUkucHJpbnR8fCgidW5kZWZpbmVkIj09dHlwZW9mIGNvbnNvbGU/InVuZGVmaW5lZCI9PXR5cGVvZiBwcmludD9udWxsOnByaW50OmNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkpLFI9SS5wcmludEVycnx8KCJ1bmRlZmluZWQiPT10eXBlb2YgcHJpbnRFcnI/InVuZGVmaW5lZCIhPXR5cGVvZiBjb25zb2xlJiZjb25zb2xlLndhcm4uYmluZChjb25zb2xlKXx8UTpwcmludEVycik7Zm9yKEsgaW4gTClMLmhhc093blByb3BlcnR5KEspJiYoSVtLXT1MW0tdKTtMPXZvaWQgMDt2YXIgUz17ImY2NC1yZW0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGElYn0sZGVidWdnZXI6ZnVuY3Rpb24oKXtkZWJ1Z2dlcn19LFY9MCxXPWZ1bmN0aW9uKCl7cmV0dXJuIFZ9OyJvYmplY3QiIT10eXBlb2YgV2ViQXNzZW1ibHkmJlIoIm5vIG5hdGl2ZSB3YXNtIHN1cHBvcnQgZGV0ZWN0ZWQiKTt2YXIgWCxaLCQsXyxjYSxnYT0hMSxpYT0idW5kZWZpbmVkIj09dHlwZW9mIFRleHREZWNvZGVyP3ZvaWQgMDpuZXcgVGV4dERlY29kZXIoInV0ZjgiKTsidW5kZWZpbmVkIj09dHlwZW9mIFRleHREZWNvZGVyP3ZvaWQgMDpuZXcgVGV4dERlY29kZXIoInV0Zi0xNmxlIik7dmFyIGthPTY1NTM2LGxhPTczMjgsbWE9NTI0Mjg4MCxuYT1JLlRPVEFMX01FTU9SWXx8MTY3NzcyMTY7bmE8bWEmJlIoIlRPVEFMX01FTU9SWSBzaG91bGQgYmUgbGFyZ2VyIHRoYW4gVE9UQUxfU1RBQ0ssIHdhcyAiK25hKyIhIChUT1RBTF9TVEFDSz0iK21hKyIpIiksSS5idWZmZXI/Wj1JLmJ1ZmZlcjoib2JqZWN0Ij09dHlwZW9mIFdlYkFzc2VtYmx5JiYiZnVuY3Rpb24iPT10eXBlb2YgV2ViQXNzZW1ibHkuTWVtb3J5PyhYPW5ldyBXZWJBc3NlbWJseS5NZW1vcnkoe2luaXRpYWw6bmEva2EsbWF4aW11bTpuYS9rYX0pLFo9WC5idWZmZXIpOlo9bmV3IEFycmF5QnVmZmVyKG5hKSxsKCksY2FbbGE+PjJdPTUyNTAyNDA7dmFyIG9hPVtdLHBhPVtdLHFhPVtdLHJhPVtdLE9hPTAsUWE9bnVsbDtJLnByZWxvYWRlZEltYWdlcz17fSxJLnByZWxvYWRlZEF1ZGlvcz17fTsoKGZ1bmN0aW9uKGEpe3JldHVybiAwPT09YS5pbmRleE9mKCJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsIil9KSkoSil8fEYoIndhc21CaW5hcnlGaWxlIGhhcyB0byBiZSBhIGRhdGEtVVJJIiksSS5hc209ZnVuY3Rpb24oYSxiKXtiLm1lbW9yeT1YLGIudGFibGU9bmV3IFdlYkFzc2VtYmx5LlRhYmxlKHtpbml0aWFsOjMyLG1heGltdW06MzIsZWxlbWVudDoiYW55ZnVuYyJ9KSxiLl9fbWVtb3J5X2Jhc2U9MTAyNCxiLl9fdGFibGVfYmFzZT0wO3ZhciBjPXcoYik7cmV0dXJuIGN9O3ZhciBTYT17YnVmZmVyczpbbnVsbCxbXSxbXV0scHJpbnRDaGFyOmZ1bmN0aW9uKGEsYil7dmFyIGM9U2EuYnVmZmVyc1thXTswPT09Ynx8MTA9PT1iPygoMT09PWE/UTpSKShlKGMsMCkpLGMubGVuZ3RoPTApOmMucHVzaChiKTt9LHZhcmFyZ3M6MCxnZXQ6ZnVuY3Rpb24oKXtTYS52YXJhcmdzKz00O3ZhciBhPWNhW1NhLnZhcmFyZ3MtND4+Ml07cmV0dXJuIGF9LGdldFN0cjpmdW5jdGlvbigpe3ZhciBhPWYoU2EuZ2V0KCkpO3JldHVybiBhfSxnZXQ2NDpmdW5jdGlvbigpe3ZhciBhPVNhLmdldCgpO1NhLmdldCgpO3JldHVybiBhfSxnZXRaZXJvOmZ1bmN0aW9uKCl7U2EuZ2V0KCk7fX0sVGE9SS5hc20oe30se2Fib3J0OkYsc2V0VGVtcFJldDA6ZnVuY3Rpb24oYSl7Vj1hO30sZ2V0VGVtcFJldDA6VyxfX19hc3NlcnRfZmFpbDpmdW5jdGlvbihhLGIsYyxkKXtGKCJBc3NlcnRpb24gZmFpbGVkOiAiK2YoYSkrIiwgYXQ6ICIrW2I/ZihiKToidW5rbm93biBmaWxlbmFtZSIsYyxkP2YoZCk6InVua25vd24gZnVuY3Rpb24iXSk7fSxfX19zZXRFcnJObzpBLF9fX3N5c2NhbGwxNDA6ZnVuY3Rpb24oYSxiKXtTYS52YXJhcmdzPWI7dHJ5e3ZhciBjPVNhLmdldFN0cmVhbUZyb21GRCgpLGQ9U2EuZ2V0KCksZT1TYS5nZXQoKSxmPVNhLmdldCgpLGc9U2EuZ2V0KCk7cmV0dXJuIDB9Y2F0Y2goYSl7cmV0dXJuICJ1bmRlZmluZWQiIT10eXBlb2YgRlMmJmEgaW5zdGFuY2VvZiBGUy5FcnJub0Vycm9yfHxGKGEpLC1hLmVycm5vfX0sX19fc3lzY2FsbDE0Njp4LF9fX3N5c2NhbGw1NDpmdW5jdGlvbihhLGIpe1NhLnZhcmFyZ3M9Yjt0cnl7cmV0dXJuIDB9Y2F0Y2goYSl7cmV0dXJuICJ1bmRlZmluZWQiIT10eXBlb2YgRlMmJmEgaW5zdGFuY2VvZiBGUy5FcnJub0Vycm9yfHxGKGEpLC1hLmVycm5vfX0sX19fc3lzY2FsbDY6ZnVuY3Rpb24oYSxiKXtTYS52YXJhcmdzPWI7dHJ5e1NhLmdldFN0cmVhbUZyb21GRCgpO3JldHVybiAwfWNhdGNoKGEpe3JldHVybiAidW5kZWZpbmVkIiE9dHlwZW9mIEZTJiZhIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcnx8RihhKSwtYS5lcnJub319LF9lbXNjcmlwdGVuX2dldF9oZWFwX3NpemU6eSxfZW1zY3JpcHRlbl9tZW1jcHlfYmlnOnosX2Vtc2NyaXB0ZW5fcmVzaXplX2hlYXA6ZnVuY3Rpb24oYSl7QigpO30sYWJvcnRPbkNhbm5vdEdyb3dNZW1vcnk6QixmbHVzaF9OT19GSUxFU1lTVEVNOmZ1bmN0aW9uKCl7dmFyIGE9SS5fZmZsdXNoO2EmJmEoMCk7dmFyIGI9U2EuYnVmZmVycztiWzFdLmxlbmd0aCYmU2EucHJpbnRDaGFyKDEsMTApLGJbMl0ubGVuZ3RoJiZTYS5wcmludENoYXIoMiwxMCk7fSx0ZW1wRG91YmxlUHRyOjczNDQsRFlOQU1JQ1RPUF9QVFI6bGF9LFopO0kuYXNtPVRhO0kuX19fZXJybm9fbG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uX19fZXJybm9fbG9jYXRpb24uYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLl9mcmVlPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLl9mcmVlLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5fbWFpbj1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fbWFpbi5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuX21hbGxvYz1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fbWFsbG9jLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5fbWVtY3B5PWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLl9tZW1jcHkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLl9tZW1zZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uX21lbXNldC5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuX3Byb2Nlc3NfZGF0YT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fcHJvY2Vzc19kYXRhLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5fc2Jyaz1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fc2Jyay5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuX3NldG1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uX3NldG1vZGUuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLmVzdGFibGlzaFN0YWNrU3BhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uZXN0YWJsaXNoU3RhY2tTcGFjZS5hcHBseShudWxsLGFyZ3VtZW50cyl9O3ZhciBjYj1JLnN0YWNrQWxsb2M9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uc3RhY2tBbGxvYy5hcHBseShudWxsLGFyZ3VtZW50cyl9LGRiPUkuc3RhY2tSZXN0b3JlPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLnN0YWNrUmVzdG9yZS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGViPUkuc3RhY2tTYXZlPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLnN0YWNrU2F2ZS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9paT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5keW5DYWxsX2lpaT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9paWlpPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfaWlpaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9paWlpaWlpaT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpaWlpaWlpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5keW5DYWxsX2lpaWlpaWlpaT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpaWlpaWlpaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9qaWppPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfamlqaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF92PWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfdi5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF92aT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX3ZpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5keW5DYWxsX3ZpaWlpaWlpPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfdmlpaWlpaWkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLmFzbT1UYSxJLmNjYWxsPWQsSS5jd3JhcD1mdW5jdGlvbihhLGIsZSxmKXtlPWV8fFtdO3ZhciBnPWUuZXZlcnkoZnVuY3Rpb24oYSl7cmV0dXJuICJudW1iZXIiPT09YX0pO3JldHVybiAic3RyaW5nIiE9PWImJmcmJiFmP2MoYSk6ZnVuY3Rpb24oKXtyZXR1cm4gZChhLGIsZSxhcmd1bWVudHMpfX0sQy5wcm90b3R5cGU9bmV3IEVycm9yLEMucHJvdG90eXBlLmNvbnN0cnVjdG9yPUM7UWE9ZnVuY3Rpb24gYSgpe0kuY2FsbGVkUnVufHxEKCksSS5jYWxsZWRSdW58fChRYT1hKTt9LEkuY2FsbE1haW49ZnVuY3Rpb24oYSl7YT1hfHxbXTt2YXIgYj1hLmxlbmd0aCsxLGM9Y2IoNCooYisxKSk7Y2FbYz4+Ml09aihJLnRoaXNQcm9ncmFtKTtmb3IodmFyIGQ9MTtkPGI7ZCsrKWNhWyhjPj4yKStkXT1qKGFbZC0xXSk7Y2FbKGM+PjIpK2JdPTA7dHJ5e3ZhciBlPUkuX21haW4oYixjLDApO0UoZSwhMCk7fWNhdGNoKGEpe2lmKGEgaW5zdGFuY2VvZiBDKXJldHVybjtpZigiU2ltdWxhdGVJbmZpbml0ZUxvb3AiPT1hKXJldHVybiB2b2lkKEkubm9FeGl0UnVudGltZT0hMCk7dmFyIGY9YTthJiYib2JqZWN0Ij09dHlwZW9mIGEmJmEuc3RhY2smJihmPVthLGEuc3RhY2tdKSxSKCJleGNlcHRpb24gdGhyb3duOiAiK2YpLEkucXVpdCgxLGEpO31maW5hbGx5e319LEkucnVuPUQ7aWYoSS5hYm9ydD1GLEkucHJlSW5pdClmb3IoImZ1bmN0aW9uIj09dHlwZW9mIEkucHJlSW5pdCYmKEkucHJlSW5pdD1bSS5wcmVJbml0XSk7MDxJLnByZUluaXQubGVuZ3RoOylJLnByZUluaXQucG9wKCkoKTt2YXIgb2I9ITA7cmV0dXJuIEkubm9Jbml0aWFsUnVuJiYob2I9ITEpLEkubm9FeGl0UnVudGltZT0hMCxEKCksYS5yZWFkeX19KCk7CgogIC8vV2ViUlRDIFZBRCBJbnRlcmZhY2UgZm9yIFNFUElBIFdlYi1BdWRpbyBQcm9jZXNzb3INCiAgZnVuY3Rpb24gV2ViUnRjVm9pY2VBY3Rpdml0eURldGVjdG9yIChvcHRpb25zLCBpbml0Q2FsbGJhY2spIHsNCiAgCXRoaXMudmFkTW9kdWxlID0ge307DQogIAl0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9Ow0KICAJDQogIAl2YXIgb25QcmludCA9IHRoaXMub3B0aW9ucy5vbkluZm8gfHwgdGhpcy5vcHRpb25zLm9uUHJpbnQgfHwgZnVuY3Rpb24odGV4dCl7IGNvbnNvbGUubG9nKCJWQUQgcHJpbnQiLCB0ZXh0KTsgfTsNCiAgCXZhciBvbkVycm9yID0gdGhpcy5vcHRpb25zLm9uRXJyb3IgfHwgdGhpcy5vcHRpb25zLm9uUHJpbnRFcnIgfHwgZnVuY3Rpb24odGV4dCl7IGNvbnNvbGUuZXJyb3IoIlZBRCBwcmludEVyciIsIHRleHQpOyB9Ow0KICAJdmFyIG9uU3RhdHVzID0gdGhpcy5vcHRpb25zLm9uU3RhdHVzTWVzc2FnZSB8fCB0aGlzLm9wdGlvbnMub25TZXRTdGF0dXMgfHwgZnVuY3Rpb24odGV4dCl7IGNvbnNvbGUubG9nKCJWQUQgc2V0U3RhdHVzIiwgdGV4dCk7IH07DQogIAl2YXIgdmFkTW9kZSA9ICh0aGlzLm9wdGlvbnMubW9kZSAhPSB1bmRlZmluZWQpPyB0aGlzLm9wdGlvbnMubW9kZSA6IDM7CS8vbW9kZXM6IDA9UXVhbGl0eSBtb2RlLCAxPUxvdyBiaXRyYXRlIG1vZGUsIDI9QWdncmVzc2l2ZSBtb2RlLCAzPVZlcnkgYWdncmVzc2l2ZSBtb2RlDQoNCiAgCWNvbnN0IHNlbGYgPSB0aGlzOw0KICAJV2ViUnRjVmFkKHsNCiAgCQlwcmVSdW46IFtdLA0KICAJCXBvc3RSdW46IFtdLA0KICAJCXByaW50OiBmdW5jdGlvbih0ZXh0KXsNCiAgCQkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB0ZXh0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5qb2luKCcgJyk7DQogIAkJCW9uUHJpbnQodGV4dCk7DQogIAkJfSwNCiAgCQlwcmludEVycjogZnVuY3Rpb24odGV4dCl7DQogIAkJCWlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgdGV4dCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuam9pbignICcpOw0KICAJCQlvbkVycm9yKHRleHQpOw0KICAJCX0sDQogIAkJc2V0U3RhdHVzOiBmdW5jdGlvbih0ZXh0KXsNCiAgCQkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB0ZXh0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5qb2luKCcgJyk7DQogIAkJCW9uU3RhdHVzKHRleHQpOw0KICAJCX0sDQogIAkJdG90YWxEZXBlbmRlbmNpZXM6IDAsDQogIAkJbW9uaXRvclJ1bkRlcGVuZGVuY2llczogZnVuY3Rpb24obGVmdCl7DQogIAkJCXRoaXMudG90YWxEZXBlbmRlbmNpZXMgPSBNYXRoLm1heCh0aGlzLnRvdGFsRGVwZW5kZW5jaWVzLCBsZWZ0KTsNCiAgCQkJdGhpcy5zZXRTdGF0dXMobGVmdCA/ICdQcmVwYXJpbmcuLi4gKCcgKyAodGhpcy50b3RhbERlcGVuZGVuY2llcyAtIGxlZnQpICsgJy8nICsgdGhpcy50b3RhbERlcGVuZGVuY2llcyArICcpJyA6ICdBbGwgZG93bmxvYWRzIGNvbXBsZXRlLicpOw0KICAJCX0sDQogIAkJbm9Jbml0aWFsUnVuOiB0cnVlDQogIAl9KQ0KICAJLnRoZW4oZnVuY3Rpb24oTW9kdWxlKXsNCiAgCQl2YXIgVmFkID0gew0KICAJCQl3YXNtTW9kdWxlOiBNb2R1bGUNCiAgCQkJLy9zZXRNb2RlOiAuLi4sDQogIAkJCS8vZ2V0TW9kZTogLi4uLA0KICAJCQkvL3Byb2Nlc3M6IC4uLg0KICAJCX07DQogIAkJDQogIAkJLy9zZXR1cA0KICAJCQ0KICAJCXZhciBtYWluID0gTW9kdWxlLmN3cmFwKCdtYWluJyk7DQogIAkJaWYgKG1haW4oKSAhPSAxKXsNCiAgCQkJb25FcnJvcigiVkFEICdtYWluJyBlcnJvciIpOw0KICAJCQl0aHJvdyB7bmFtZTogIlZhZE1vZHVsZUVycm9yIiwgbWVzc2FnZTogIkZhaWxlZCB0byBpbml0aWFsaXplIHZpYSAnbWFpbigpJyJ9Ow0KICAJCX0NCg0KICAJCVZhZC5zZXRNb2RlID0gTW9kdWxlLmN3cmFwKCdzZXRtb2RlJywgJ251bWJlcicsIFsnbnVtYmVyJ10pOw0KICAJCVZhZC5nZXRNb2RlID0gZnVuY3Rpb24oKXsgcmV0dXJuIHZhZE1vZGU7IH07DQogIAkJDQogIAkJaWYgKFZhZC5zZXRNb2RlKHZhZE1vZGUpICE9IDApew0KICAJCQlvbkVycm9yKCJWQUQgJ3NldE1vZGUnIGVycm9yIik7DQogIAkJCXRocm93IHtuYW1lOiAiVmFkTW9kdWxlRXJyb3IiLCBtZXNzYWdlOiAiRmFpbGVkIHRvIHNldCBtb2RlIn07DQogIAkJfQ0KICAJCW9uUHJpbnQoIlZBRCBtb2RlOiAiICsgdmFkTW9kZSk7DQogIAkJDQogIAkJVmFkLnByb2Nlc3MgPSBNb2R1bGUuY3dyYXAoJ3Byb2Nlc3NfZGF0YScsICdudW1iZXInLCBbJ251bWJlcicsICdudW1iZXInLCAnbnVtYmVyJywgJ251bWJlcicsICdudW1iZXInLCAnbnVtYmVyJ10pOw0KICAJCS8vYXJndW1lbnRzOiAoZGF0YUhlYXAuYnl0ZU9mZnNldCwgc2FtcGxlTGVuZ3RoLCBzYW1wbGVSYXRlLCBzYW1wbGVzWzBdLCBzYW1wbGVzWzEwMF0sIHNhbXBsZXNbMjAwMF0pDQogIAkJLy9yZXF1aXJlbWVudHMgZm9yIHNhbXBsZVJhdGU6IDgwMDAsIDE2MDAwLCAzMjAwMCwgNDgwMDAgLSBzYW1wbGVMZW5ndGg6IHNhbXBsZVJhdGUvMTAwMCAqICgxMHwyMHwzMCkgPT4gNDhrIC0gNDgwLCA5NjAsIDE0NDAgOyAxNmsgLSAxNjAsIDMyMCwgNDgwIDsgDQogIAkJDQogIAkJVmFkLmdldFZvaWNlQWN0aXZpdHkgPSBmdW5jdGlvbihzYW1wbGVSYXRlLCBzYW1wbGVzSW50MTYpew0KICAJCQkvL0dldCBkYXRhIGJ5dGUgc2l6ZSwgYWxsb2NhdGUgbWVtb3J5IG9uIEVtc2NyaXB0ZW4gaGVhcCwgYW5kIGdldCBwb2ludGVyDQogIAkJCWxldCBuRGF0YUJ5dGVzID0gc2FtcGxlc0ludDE2Lmxlbmd0aCAqIHNhbXBsZXNJbnQxNi5CWVRFU19QRVJfRUxFTUVOVDsNCiAgCQkJbGV0IGRhdGFQdHIgPSBNb2R1bGUuX21hbGxvYyhuRGF0YUJ5dGVzKTsNCg0KICAJCQkvL0NvcHkgZGF0YSB0byBFbXNjcmlwdGVuIGhlYXAgKGRpcmVjdGx5IGFjY2Vzc2VkIGZyb20gTW9kdWxlLkhFQVBVOCkNCiAgCQkJbGV0IGRhdGFIZWFwID0gbmV3IFVpbnQ4QXJyYXkoTW9kdWxlLkhFQVBVOC5idWZmZXIsIGRhdGFQdHIsIG5EYXRhQnl0ZXMpOw0KICAJCQlkYXRhSGVhcC5zZXQobmV3IFVpbnQ4QXJyYXkoc2FtcGxlc0ludDE2LmJ1ZmZlcikpOw0KDQogIAkJCS8vQ2FsbCBmdW5jdGlvbiBhbmQgZ2V0IHJlc3VsdA0KICAJCQlsZXQgcmVzdWx0ID0gVmFkLnByb2Nlc3MoZGF0YUhlYXAuYnl0ZU9mZnNldCwgc2FtcGxlc0ludDE2Lmxlbmd0aCwgc2FtcGxlUmF0ZSwgDQogIAkJCQlzYW1wbGVzSW50MTZbMF0sIHNhbXBsZXNJbnQxNlsxMDBdLCBzYW1wbGVzSW50MTZbMjAwMF0pOw0KDQogIAkJCS8vRnJlZSBtZW1vcnkNCiAgCQkJTW9kdWxlLl9mcmVlKGRhdGFIZWFwLmJ5dGVPZmZzZXQpOw0KICAJCQlyZXR1cm4gcmVzdWx0OwkJLy8tMTogRVJST1IsIDA6IE5vIGFjdGl2ZSBzcGVlY2gsIDE6IEFjdGl2ZSBzcGVlY2gJKGNvcmUgZnVuY3Rpb24gZ2l2ZXMgMS02IGJ1dCBvdXRwdXQgaGVyZSBpcyAxIGZvciBhbGwpDQogIAkJfTsNCiAgCQkNCiAgCQlyZXR1cm4gVmFkOw0KICAJfSkNCiAgCS50aGVuKGZ1bmN0aW9uKHZhZCl7DQogIAkJc2VsZi52YWRNb2R1bGUgPSB2YWQ7DQogIAkJaWYgKGluaXRDYWxsYmFjaykgaW5pdENhbGxiYWNrKHNlbGYudmFkTW9kdWxlKTsNCiAgCX0pOw0KICAJLy9Nb2R1bGUuc2V0U3RhdHVzKCdEb3dubG9hZGluZy4uLicpOw0KICB9CgogIC8vaW1wb3J0ICcuL3NoYXJlZC9tZXlkYS5taW4uY29tcHJlc3NlZC5qcyc7CS8vd2UgaW1wb3J0IHRoaXMgb24gZGVtYW5kIGJlbG93DQoNCiAgdmFyIHZhZE1vZHVsZTsNCg0KICBvbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7DQogICAgICAvL0F1ZGlvIHdvcmtlciBpbnRlcmZhY2UNCiAgCS8vY29uc29sZS5sb2coIldlYlJ0Y1ZhZFdvcmtlciBvbm1lc3NhZ2UiLCBlLmRhdGEpOwkJLy9ERUJVRw0KICAJaWYgKGUuZGF0YS5jdHJsKXsNCiAgCQlzd2l0Y2ggKGUuZGF0YS5jdHJsLmFjdGlvbil7DQogIAkJCWNhc2UgImNvbnN0cnVjdCI6DQogIAkJCQljb25zdHJ1Y3RXb3JrZXIoZS5kYXRhLmN0cmwub3B0aW9ucyk7DQogIAkJCQlicmVhazsNCiAgCQkJY2FzZSAicHJvY2VzcyI6DQogIAkJCQlwcm9jZXNzJDEoZS5kYXRhLmN0cmwuZGF0YSk7DQogIAkJCQlicmVhazsNCiAgCQkJY2FzZSAiaGFuZGxlIjoNCiAgCQkJCWhhbmRsZUV2ZW50KGUuZGF0YS5jdHJsLmRhdGEpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0YXJ0IjoNCiAgCQkJCXN0YXJ0KGUuZGF0YS5jdHJsLm9wdGlvbnMpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0b3AiOg0KICAJCQkJc3RvcChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZXNldCI6DQogIAkJCQlyZXNldChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZWxlYXNlIjoNCiAgCQkJY2FzZSAiY2xvc2UiOg0KICAJCQkJcmVsZWFzZShlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQlkZWZhdWx0Og0KICAJCQkJY29uc29sZS5sb2coIlVua25vd24gY29udHJvbCBtZXNzYWdlOiIsIGUuZGF0YSk7DQogIAkJCQlicmVhazsNCiAgCQl9DQogIAl9DQogIH07DQoNCiAgbGV0IHdvcmtlcklkID0gIndlYnJ0Yy12YWQtd29ya2VyLSIgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKSArICItIiArIERhdGUubm93KCk7DQogIGxldCBkb0RlYnVnID0gZmFsc2U7DQogIGxldCB3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IGZhbHNlOw0KICAvL2xldCBpc1JlYWR5Rm9yUHJvY2Vzc2luZyA9IGZhbHNlOwkJLy9UT0RPOiBpbXBsZW1lbnQNCg0KICBsZXQgaW5wdXRTYW1wbGVSYXRlOw0KICBsZXQgY2hhbm5lbENvdW50Ow0KICBsZXQgaW5wdXRTYW1wbGVTaXplOw0KICBsZXQgcHJvY2Vzc0J1ZmZlclNpemU7CS8vZGVmaW5lcyAnX3Byb2Nlc3NSaW5nQnVmZmVyJyBzaXplIHRvZ2V0aGVyIHdpdGggJ2lucHV0U2FtcGxlU2l6ZScNCiAgbGV0IHZhZE1vZGU7DQogIGxldCBpc0Zsb2F0MzJJbnB1dDsJCS8vZGVmYXVsdCBmYWxzZQ0KDQogIGxldCB2b2ljZUVuZXJneTsNCiAgbGV0IHZvaWNlRW5lcmd5Q2FwID0gNTA7DQogIGxldCB2b2ljZUVuZXJneURyb3BSYXRlID0gMjsNCiAgbGV0IF9zYW1wbGVzVG9UaW1lTXNGYWN0b3I7DQoNCiAgbGV0IG1leWRhQW5hbHl6ZXI7DQoNCiAgbGV0IF9wcm9jZXNzUmluZ0J1ZmZlcjsJCS8vaG9sZHMgbXVsdGlwbGUgdmFkRnJhbWVzDQogIGxldCBfdmFkRnJhbWVzOwkJCQkvL2VhY2ggZnJhbWUgcHJvY2Vzc2VzIG9uZSBjaHVuayBvZiAnX3ZhZEJ1ZmZlclNpemUnIGFzIGxvbmcgYXMgJ19wcm9jZXNzUmluZ0J1ZmZlcicgaGFzIGVub3VnaCBzYW1wbGVzDQogIGxldCBfdmFkRnJhbWVUaW1lTXM7CQkvL3JlYWwgdGltZSAobXMpIG9mIG9uZSB2YWRGcmFtZSAoZGVmaW5lZCBieSBzYW1wbGUtcmF0ZSBhbmQgYnVmZmVyIHNpemUpDQogIGxldCBfdmFkQnVmZmVyU2l6ZTsJCQkvL3NpemUgb2YgYSBzaW5nbGUgdmFkRnJhbWUgKHJlc3RyaWN0aW9ucyBhcHBseSkNCiAgbGV0IF92YWRCdWZmZXI7DQogIGxldCBfaW50MTZJbnB1dEJ1ZmZlcjsJCS8vdXNlZCBvbmx5IGlmIGlucHV0IGlzIGZsb2F0MzINCg0KICAvL3NlcXVlbmNlIGNvbnRyb2wNCiAgbGV0IHVzZVNlcXVlbmNlQW5hbHl6ZXIgPSBmYWxzZTsNCiAgbGV0IHZvaWNlQWN0aXZhdGlvblRpbWU7DQogIGxldCB2b2ljZVJlc2V0VGltZTsNCiAgbGV0IHNpbGVuY2VBY3RpdmF0aW9uVGltZTsNCiAgbGV0IG1heFNlcXVlbmNlVGltZTsNCiAgbGV0IG1pblNlcXVlbmNlVGltZTsNCg0KICBsZXQgX3NlcXVlbmNlVm9pY2VUaW1lOw0KICBsZXQgX3NlcXVlbmNlU2lsZW5jZVRpbWU7DQogIGxldCBfc2VxdWVuY2VTYXdWb2ljZSwgX3NlcXVlbmNlU2F3U2lsZW5jZUFmdGVyVm9pY2UsIF9zZXF1ZW5jZUZpbmlzaGVkVm9pY2U7DQogIGxldCBfc2VxdWVuY2VJc0FjdGl2ZSwgX3NlcXVlbmNlSXNEb25lLCBfc2VxdWVuY2VTdGFydGVkQXQ7DQoNCiAgbGV0IF9pc0ZpcnN0VmFsaWRQcm9jZXNzOw0KDQogIGZ1bmN0aW9uIGluaXQoKXsNCiAgCWlmIChpbnB1dFNhbXBsZVNpemUgPiBwcm9jZXNzQnVmZmVyU2l6ZSl7DQogIAkJdGhyb3cgSlNPTi5zdHJpbmdpZnkobmV3IEJ1ZmZlclNpemVFeGNlcHRpb24oIlByb2Nlc3NvciAnYnVmZmVyU2l6ZScgaGFzIHRvIGJlIGJpZ2dlciB0aGFuICdpbnB1dFNhbXBsZVNpemUnISBDdXJyZW50bHk6ICIgKyBpbnB1dFNhbXBsZVNpemUgKyAiID4gIiArIHByb2Nlc3NCdWZmZXJTaXplKSk7DQogIAkJLy9OT1RFOiB0aGlzIG5lZWRzIHRvIGJlIGEgc3RyaW5nIHRvIHNob3cgdXAgaW4gd29ya2VyLm9uZXJyb3IgcHJvcGVybHkgOi0vDQogIAl9DQogIAkvL3JlcXVpcmVtZW50cyBmb3Igc2FtcGxlUmF0ZTogODAwMCwgMTYwMDAsIDMyMDAwLCA0ODAwMCAtIHNhbXBsZUxlbmd0aDogc2FtcGxlUmF0ZS8xMDAwICogKDEwfDIwfDMwKSA9PiA0OGsgLSA0ODAsIDk2MCwgMTQ0MCA7IDE2ayAtIDE2MCwgMzIwLCA0ODA7DQogIAlpZiAoIVs4MDAwLCAxNjAwMCwgMzIwMDAsIDQ4MDAwXS5pbmNsdWRlcyhpbnB1dFNhbXBsZVJhdGUpKXsNCiAgCQl0aHJvdyBKU09OLnN0cmluZ2lmeShuZXcgU2FtcGxlUmF0ZUV4Y2VwdGlvbigiRm9yIHRoaXMgbW9kdWxlIHNhbXBsZS1yYXRlIGhhcyB0byBiZSBvbmUgb2Y6IDgwMDAsIDE2MDAwLCAzMjAwMCwgNDgwMDAiKSk7DQogIAl9DQogIAl2YXIgYWxsb3dlZEJ1ZmZlclNpemVzID0gW2lucHV0U2FtcGxlUmF0ZS8xMDAwICogMzAsIGlucHV0U2FtcGxlUmF0ZS8xMDAwICogMjAsIGlucHV0U2FtcGxlUmF0ZS8xMDAwICogMTBdOwkJLy8xMCwgMjAgYW5kIDMwbXMgZnJhbWVzDQogIAlfdmFkQnVmZmVyU2l6ZSA9IDA7DQogIAlmb3IgKGxldCBpPTA7IGk8YWxsb3dlZEJ1ZmZlclNpemVzLmxlbmd0aDsgaSsrKXsNCiAgCQlpZiAocHJvY2Vzc0J1ZmZlclNpemUgPT0gYWxsb3dlZEJ1ZmZlclNpemVzW2ldIHx8IHByb2Nlc3NCdWZmZXJTaXplICUgYWxsb3dlZEJ1ZmZlclNpemVzW2ldID09IDApew0KICAJCQlfdmFkRnJhbWVzID0gcHJvY2Vzc0J1ZmZlclNpemUgLyBhbGxvd2VkQnVmZmVyU2l6ZXNbaV07DQogIAkJCV92YWRCdWZmZXJTaXplID0gYWxsb3dlZEJ1ZmZlclNpemVzW2ldOw0KICAJCQlicmVhazsNCiAgCQl9DQogIAl9DQogIAlpZiAoX3ZhZEJ1ZmZlclNpemUgPT0gMCl7DQogIAkJdGhyb3cgSlNPTi5zdHJpbmdpZnkobmV3IEJ1ZmZlclNpemVFeGNlcHRpb24oIkZvciBzYW1wbGUtcmF0ZSAnIiArIGlucHV0U2FtcGxlUmF0ZSArICInIHRoZSAnYnVmZmVyU2l6ZScgaGFzIHRvIGJlIGVxdWFsIG9yIGEgbXVsdGlwbGUgb2Y6ICIgKyBhbGxvd2VkQnVmZmVyU2l6ZXMuam9pbigiLCAiKSkpOw0KICAJfQ0KICAJdmFyIHJpbmdCdWZmZXJTaXplID0gcHJvY2Vzc0J1ZmZlclNpemUgKyBpbnB1dFNhbXBsZVNpemU7CQkvL1RPRE86IGNoZWNrIHNpemUgYWdhaW4NCiAgCV9wcm9jZXNzUmluZ0J1ZmZlciA9IG5ldyBSaW5nQnVmZmVyKHJpbmdCdWZmZXJTaXplLCBjaGFubmVsQ291bnQsICJJbnQxNiIpOw0KICAJX3ZhZEJ1ZmZlciA9IFtuZXcgSW50MTZBcnJheShfdmFkQnVmZmVyU2l6ZSldOw0KICAJaWYgKGlzRmxvYXQzMklucHV0KXsNCiAgCQlfaW50MTZJbnB1dEJ1ZmZlciA9IFtuZXcgSW50MTZBcnJheShpbnB1dFNhbXBsZVNpemUpXTsNCiAgCX0NCiAgCQ0KICAJX3NhbXBsZXNUb1RpbWVNc0ZhY3RvciA9IDEwMDAvaW5wdXRTYW1wbGVSYXRlOw0KICAJX3ZhZEZyYW1lVGltZU1zID0gTWF0aC5yb3VuZChfdmFkQnVmZmVyU2l6ZSAqIF9zYW1wbGVzVG9UaW1lTXNGYWN0b3IpOw0KICAJDQogIAlyZXNldFNlcXVlbmNlKCk7DQogIAkNCiAgCV9pc0ZpcnN0VmFsaWRQcm9jZXNzID0gdHJ1ZTsNCiAgfQ0KICBmdW5jdGlvbiByZWFkeSgpew0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiAxLA0KICAJCW1vZHVsZUluZm86IHsNCiAgCQkJbW9kdWxlSWQ6IHdvcmtlcklkLA0KICAJCQlpbnB1dFNhbXBsZVJhdGU6IGlucHV0U2FtcGxlUmF0ZSwNCiAgCQkJY2hhbm5lbENvdW50OiBjaGFubmVsQ291bnQsDQogIAkJCWlucHV0U2FtcGxlU2l6ZTogaW5wdXRTYW1wbGVTaXplLA0KICAJCQlpbnB1dElzRmxvYXQzMjogaXNGbG9hdDMySW5wdXQsDQogIAkJCXByb2Nlc3NCdWZmZXJTaXplOiBwcm9jZXNzQnVmZmVyU2l6ZSwNCiAgCQkJdmFkTW9kZTogdmFkTW9kdWxlLmdldE1vZGUoKSwNCiAgCQkJdmFkRnJhbWVzTWF4OiBfdmFkRnJhbWVzLA0KICAJCQl2YWRCdWZmZXJTaXplOiBfdmFkQnVmZmVyU2l6ZSwNCiAgCQkJdmFkRnJhbWVUaW1lTXM6IF92YWRGcmFtZVRpbWVNcywNCiAgCQkJdm9pY2VFbmVyZ3lDYXA6IHZvaWNlRW5lcmd5Q2FwLA0KICAJCQl2b2ljZUVuZXJneURyb3BSYXRlOiB2b2ljZUVuZXJneURyb3BSYXRlLA0KICAJCQl1c2VTZXF1ZW5jZUFuYWx5emVyOiB1c2VTZXF1ZW5jZUFuYWx5emVyDQogIAkJfQ0KICAJfSk7DQogIH0NCg0KICBmdW5jdGlvbiBjb25zdHJ1Y3RXb3JrZXIob3B0aW9ucykgew0KICAJaWYgKHdhc0NvbnN0cnVjdG9yQ2FsbGVkKXsNCiAgCQljb25zb2xlLmVycm9yKCJWYWRNb2R1bGVFcnJvciAtIENvbnN0cnVjdG9yIHdhcyBjYWxsZWQgdHdpY2UhIDJuZCBjYWxsIHdhcyBpZ25vcmVkIGJ1dCB0aGlzIHNob3VsZCBiZSBmaXhlZCEiLCAiLSIsIHdvcmtlcklkKTsJLy9ERUJVRw0KICAJCXJldHVybjsNCiAgCX1lbHNlIHsNCiAgCQl3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IHRydWU7DQogIAl9DQogIAlkb0RlYnVnID0gb3B0aW9ucy5zZXR1cC5kb0RlYnVnIHx8IGZhbHNlOw0KICAJaW5wdXRTYW1wbGVSYXRlID0gb3B0aW9ucy5zZXR1cC5pbnB1dFNhbXBsZVJhdGUgfHwgb3B0aW9ucy5zZXR1cC5jdHhJbmZvLnRhcmdldFNhbXBsZVJhdGUgfHwgb3B0aW9ucy5zZXR1cC5jdHhJbmZvLnNhbXBsZVJhdGU7DQogIAljaGFubmVsQ291bnQgPSAxOwkvL29wdGlvbnMuc2V0dXAuY2hhbm5lbENvdW50IHx8IDE7CQkvL1RPRE86IG9ubHkgTU9OTyBhdG0NCiAgCWlucHV0U2FtcGxlU2l6ZSA9IG9wdGlvbnMuc2V0dXAuaW5wdXRTYW1wbGVTaXplIHx8IDUxMjsNCiAgCXByb2Nlc3NCdWZmZXJTaXplID0gb3B0aW9ucy5zZXR1cC5idWZmZXJTaXplIHx8IChpbnB1dFNhbXBsZVJhdGUvMTAwMCAqIDMwICogMik7CS8vMiB3aW5kb3dzIG9mIDMwbXMgYnkgZGVmYXVsdA0KICAJdmFkTW9kZSA9IChvcHRpb25zLnNldHVwLnZhZE1vZGUgIT0gdW5kZWZpbmVkKT8gb3B0aW9ucy5zZXR1cC52YWRNb2RlIDogMzsNCiAgCWlzRmxvYXQzMklucHV0ID0gKG9wdGlvbnMuc2V0dXAuaXNGbG9hdDMyICE9IHVuZGVmaW5lZCk/IG9wdGlvbnMuc2V0dXAuaXNGbG9hdDMyIDogZmFsc2U7DQogIAkNCiAgCWlmIChvcHRpb25zLnNldHVwLnZvaWNlRW5lcmd5Q2FwICE9IHVuZGVmaW5lZCkgdm9pY2VFbmVyZ3lDYXAgPSBvcHRpb25zLnNldHVwLnZvaWNlRW5lcmd5Q2FwOw0KICAJaWYgKG9wdGlvbnMuc2V0dXAudm9pY2VFbmVyZ3lEcm9wUmF0ZSkgdm9pY2VFbmVyZ3lEcm9wUmF0ZSA9IG9wdGlvbnMuc2V0dXAudm9pY2VFbmVyZ3lEcm9wUmF0ZTsNCiAgCWlmIChvcHRpb25zLnNldHVwLnNlcXVlbmNlKXsNCiAgCQl1c2VTZXF1ZW5jZUFuYWx5emVyID0gdHJ1ZTsNCiAgCQl2b2ljZUFjdGl2YXRpb25UaW1lID0gb3B0aW9ucy5zZXR1cC5zZXF1ZW5jZS52b2ljZUFjdGl2YXRpb25UaW1lIHx8IDI1MDsNCiAgCQl2b2ljZVJlc2V0VGltZSA9IG9wdGlvbnMuc2V0dXAuc2VxdWVuY2Uudm9pY2VSZXNldFRpbWUgfHwgMTUwMDsNCiAgCQlzaWxlbmNlQWN0aXZhdGlvblRpbWUgPSBvcHRpb25zLnNldHVwLnNlcXVlbmNlLnNpbGVuY2VBY3RpdmF0aW9uVGltZSB8fCAyNTA7DQogIAkJbWF4U2VxdWVuY2VUaW1lID0gb3B0aW9ucy5zZXR1cC5zZXF1ZW5jZS5tYXhTZXF1ZW5jZVRpbWUgfHwgNjAwMDsNCiAgCQltaW5TZXF1ZW5jZVRpbWUgPSBvcHRpb25zLnNldHVwLnNlcXVlbmNlLm1pblNlcXVlbmNlVGltZSB8fCA2MDA7DQogIAl9ZWxzZSB7DQogIAkJdXNlU2VxdWVuY2VBbmFseXplciA9IGZhbHNlOw0KICAJfQ0KICAJDQogIAkvL1RPRE86IHVudXNlZCBzbyBmYXIgLi4uIGtlZXAgb3IgcmVtb3ZlPw0KICAJbWV5ZGFBbmFseXplciA9IG9wdGlvbnMuc2V0dXAubWV5ZGFBbmFseXplciB8fCB7fTsNCiAgCXZhciBtZXlkYVNldHRpbmdzS2V5cyA9IE9iamVjdC5rZXlzKG1leWRhQW5hbHl6ZXIpOw0KICAJaWYgKG1leWRhU2V0dGluZ3NLZXlzLmxlbmd0aCA+IDApew0KICAJCS8vaW1wb3J0IG9uIGRlbWFuZA0KICAJCWltcG9ydFNjcmlwdHMoJy4vc2hhcmVkL21leWRhLm1pbi5jb21wcmVzc2VkLmpzJyk7DQogIAkJLy9zZXR1cA0KICAJCW1leWRhU2V0dGluZ3NLZXlzLmZvckVhY2goZnVuY3Rpb24oaywgaSl7DQogIAkJCWlmIChrID09ICJmZWF0dXJlcyIpew0KICAJCQkJbWV5ZGFBbmFseXplcltrXTsNCiAgCQkJfWVsc2Ugew0KICAJCQkJTWV5ZGFba10gPSBtZXlkYUFuYWx5emVyW2tdOw0KICAJCQl9DQogIAkJfSk7DQogIAkJTWV5ZGEuc2FtcGxlUmF0ZSA9IHRhcmdldFNhbXBsZVJhdGU7DQogIAkJTWV5ZGEuYnVmZmVyU2l6ZSA9IGlucHV0U2FtcGxlU2l6ZTsNCiAgCQlpZiAoIU1leWRhLmJ1ZmZlclNpemUgfHwgKE1leWRhLmJ1ZmZlclNpemUgJiAoTWV5ZGEuYnVmZmVyU2l6ZSAtMSkgIT0gMCkpew0KICAJCQl0aHJvdyB7bmFtZTogIlZhZE1vZHVsZU1leWRhRXJyb3IiLCBtZXNzYWdlOiAiTWV5ZGEgYnVmZmVyLXNpemUgbXVzdCBiZSBwb3dlciBvZiAyLCBlLmcuIDEyOCwgMjU2LCA1MTIsIDEwMjQsIC4uLiJ9Ow0KICAJCX0NCiAgCX0NCiAgCQ0KICAJaW5pdCgpOw0KICAJDQogIAlmdW5jdGlvbiBvblZhZExvZyhtc2cpew0KICAJCWlmIChkb0RlYnVnKSBjb25zb2xlLmVycm9yKCJWYWRNb2R1bGVMb2cgLSIsIG1zZyk7CQkJLy9ERUJVRyAodXNlIHBvc3RNZXNzYWdlPykNCiAgCX0NCiAgCWZ1bmN0aW9uIG9uVmFkRXJyb3IobXNnKXsNCiAgCQljb25zb2xlLmVycm9yKCJWYWRNb2R1bGVFcnJvciAtIiwgbXNnKTsNCiAgCQl0aHJvdyB7bmFtZTogIlZhZE1vZHVsZUVycm9yIiwgbWVzc2FnZTogbXNnfTsJLy9UT0RPOiB0aGlzIHByb2JhYmx5IG5lZWRzIHRvIGJlIGEgc3RyaW5nIHRvIHNob3cgdXAgaW4gd29ya2VyLm9uZXJyb3IgcHJvcGVybHkgOi0vDQogIAl9DQogIAkNCiAgCS8vcHJlcGFyZQ0KICAJaWYgKCF2YWRNb2R1bGUpew0KICAJCW9uVmFkTG9nKCJJbml0LiBXZWJSVEMgVkFEIFdBU00gbW9kdWxlIik7CQkvL0RFQlVHDQogIAkJbmV3IFdlYlJ0Y1ZvaWNlQWN0aXZpdHlEZXRlY3Rvcih7DQogIAkJCW9uSW5mbzogb25WYWRMb2csDQogIAkJCW9uRXJyb3I6IG9uVmFkRXJyb3IsDQogIAkJCW9uU3RhdHVzTWVzc2FnZTogb25WYWRMb2csDQogIAkJCW1vZGU6IHZhZE1vZGUNCiAgCQl9LCBmdW5jdGlvbih2KXsNCiAgCQkJb25WYWRMb2coIldlYlJUQyBWQUQgcmVhZHkiKTsJCQkJLy9ERUJVRw0KICAJCQl2YWRNb2R1bGUgPSB2Ow0KICAJCQlyZWFkeSgpOw0KICAJCX0pOw0KICAJfWVsc2Ugew0KICAJCW9uVmFkTG9nKCJXZWJSVEMgVkFEIG1vZHVsZSBhbHJlYWR5IGxvYWRlZCIpOwkJLy9ERUJVRw0KICAJCXJlYWR5KCk7DQogIAl9DQogIH0NCg0KICAvL3NlcXVlbmNlIGJsb2NrDQogIGZ1bmN0aW9uIHNlcXVlbmNlRGV0ZWN0b3Iodm9pY2VBY3Rpdml0eSl7DQogIAlpZiAodm9pY2VBY3Rpdml0eSA9PSAwKXsNCiAgCQlpZiAoX3NlcXVlbmNlU2F3Vm9pY2Upew0KICAJCQlfc2VxdWVuY2VTaWxlbmNlVGltZSArPSBfdmFkRnJhbWVUaW1lTXM7DQogIAkJCWlmIChfc2VxdWVuY2VTaWxlbmNlVGltZSA+IHZvaWNlUmVzZXRUaW1lKXsNCiAgCQkJCV9zZXF1ZW5jZVNhd1NpbGVuY2VBZnRlclZvaWNlID0gdHJ1ZTsNCiAgCQkJfWVsc2UgaWYgKF9zZXF1ZW5jZVNpbGVuY2VUaW1lID4gc2lsZW5jZUFjdGl2YXRpb25UaW1lKXsNCiAgCQkJCV9zZXF1ZW5jZVZvaWNlVGltZSA9IDA7DQogIAkJCX0NCiAgCQl9DQogIAl9ZWxzZSB7DQogIAkJX3NlcXVlbmNlVm9pY2VUaW1lICs9IF92YWRGcmFtZVRpbWVNczsNCiAgCQlpZiAoIV9zZXF1ZW5jZVNhd1ZvaWNlICYmIF9zZXF1ZW5jZVZvaWNlVGltZSA+IHZvaWNlQWN0aXZhdGlvblRpbWUpew0KICAJCQlfc2VxdWVuY2VTYXdWb2ljZSA9IHRydWU7DQogIAkJCXJlZ2lzdGVyRXZlbnQoMSwgJ3ZvaWNlX3N0YXJ0Jyk7DQogIAkJfWVsc2UgaWYgKF9zZXF1ZW5jZVZvaWNlVGltZSA+IHZvaWNlQWN0aXZhdGlvblRpbWUpew0KICAJCQlfc2VxdWVuY2VTaWxlbmNlVGltZSA9IDA7DQogIAkJfQ0KICAJfQ0KICAJDQogIAlpZiAoX3NlcXVlbmNlU2F3Vm9pY2UgJiYgX3NlcXVlbmNlU2F3U2lsZW5jZUFmdGVyVm9pY2Upew0KICAJCV9zZXF1ZW5jZUZpbmlzaGVkVm9pY2UgPSB0cnVlOw0KICAJfWVsc2UgaWYgKF9zZXF1ZW5jZVNhd1ZvaWNlICYmIChfc2VxdWVuY2VWb2ljZVRpbWUgPiBtaW5TZXF1ZW5jZVRpbWUpKXsNCiAgCQlpZiAoIV9zZXF1ZW5jZUlzQWN0aXZlKXsNCiAgCQkJX3NlcXVlbmNlSXNBY3RpdmUgPSB0cnVlOw0KICAJCQlfc2VxdWVuY2VTdGFydGVkQXQgPSBEYXRlLm5vdygpOw0KICAJCQlyZWdpc3RlckV2ZW50KDIsICdzZXF1ZW5jZV9zdGFydGVkJyk7DQogIAkJfQ0KICAJfQ0KDQogIAlpZiAoX3NlcXVlbmNlRmluaXNoZWRWb2ljZSl7DQogIAkJX3NlcXVlbmNlSXNEb25lID0gdHJ1ZTsNCiAgCQlyZWdpc3RlckV2ZW50KDMsICdmaW5pc2hlZF92b2ljZScpOw0KDQogIAl9ZWxzZSBpZiAoX3NlcXVlbmNlU2F3Vm9pY2Upew0KICAJCWlmIChfc2VxdWVuY2VJc0FjdGl2ZSAmJiAoKERhdGUubm93KCkgLSBfc2VxdWVuY2VTdGFydGVkQXQpID4gbWF4U2VxdWVuY2VUaW1lKSkgew0KICAJCQlfc2VxdWVuY2VJc0RvbmUgPSB0cnVlOw0KICAJCQlyZWdpc3RlckV2ZW50KDQsICdmaW5pc2hlZF92b2ljZV9tYXh0aW1lJyk7DQogIAkJfQ0KICAJfQ0KICAJCQ0KICAJaWYgKF9zZXF1ZW5jZUlzRG9uZSl7DQogIAkJaWYgKF9zZXF1ZW5jZUlzQWN0aXZlKSByZWdpc3RlckV2ZW50KDUsICdzZXF1ZW5jZV9jb21wbGV0ZScpOw0KICAJCXJlc2V0U2VxdWVuY2UoKTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiByZXNldFNlcXVlbmNlKCl7DQogIAl2b2ljZUVuZXJneSA9IDA7DQogIAlfc2VxdWVuY2VTYXdWb2ljZSA9IGZhbHNlOw0KICAJX3NlcXVlbmNlRmluaXNoZWRWb2ljZSA9IGZhbHNlOw0KICAJX3NlcXVlbmNlU2F3U2lsZW5jZUFmdGVyVm9pY2UgPSBmYWxzZTsNCiAgCV9zZXF1ZW5jZVZvaWNlVGltZSA9IDA7DQogIAlfc2VxdWVuY2VTaWxlbmNlVGltZSA9IDA7DQogIAlfc2VxdWVuY2VJc0FjdGl2ZSA9IGZhbHNlOw0KICAJX3NlcXVlbmNlU3RhcnRlZEF0ID0gMDsNCiAgCV9zZXF1ZW5jZUlzRG9uZSA9IGZhbHNlOw0KICB9DQogIGZ1bmN0aW9uIHJlZ2lzdGVyRXZlbnQoY29kZSwgbXNnLCBkYXRhKXsNCiAgCXZhciBtc2cgPSB7DQogIAkJdmFkU2VxdWVuY2VDb2RlOiBjb2RlLA0KICAJCXZhZFNlcXVlbmNlTXNnOiBtc2cNCiAgCX07DQogIAlzd2l0Y2ggKGNvZGUpew0KICAJCS8vY2FzZSAxOiB2b2ljZSBzdGFydA0KICAJCS8vY2FzZSAyOiBzZXF1ZW5jZSBzdGFydA0KICAJCS8vY2FzZSAzOiBjYXNlIDQ6IGZpbmlzaGVkIHZvaWNlDQogIAkJY2FzZSA1Og0KICAJCQkvL3NlcXVlbmNlIGNvbXBsZXRlDQogIAkJCW1zZy52YWRTZXF1ZW5jZVN0YXJ0ZWQgPSBfc2VxdWVuY2VTdGFydGVkQXQ7DQogIAkJCW1zZy52YWRTZXF1ZW5jZUVuZGVkID0gRGF0ZS5ub3coKTsNCiAgCQkJYnJlYWs7DQogIAl9DQogIAkvL1NlbmQgaW5mbw0KICAJcG9zdE1lc3NhZ2UobXNnKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHByb2Nlc3MkMShkYXRhKSB7DQogIAkvL2V4cGVjdGVkOiBkYXRhLnNhbXBsZXMsIGRhdGEuc2FtcGxlUmF0ZSwgZGF0YS5jaGFubmVscywgZGF0YS50eXBlDQogIAkvL21pZ2h0IGhhdmU6IGRhdGEucm1zCS0JVE9ETzogbWFrZSB1c2Ugb2Y/DQogIAlpZiAoZGF0YSAmJiBkYXRhLnNhbXBsZXMpew0KICAJCS8vVXNlIDFzdCBpbnB1dCBhbmQgb3V0cHV0IG9ubHkNCiAgCQlsZXQgaW5wdXQgPSBkYXRhLnNhbXBsZXM7DQogIAkJaW5wdXRbMF0ubGVuZ3RoOw0KICAJCQ0KICAJCWlmIChfaXNGaXJzdFZhbGlkUHJvY2Vzcyl7DQogIAkJCV9pc0ZpcnN0VmFsaWRQcm9jZXNzID0gZmFsc2U7DQogIAkJCS8vY2hlY2s6IGlucHV0U2FtcGxlUmF0ZSwgaW5wdXRTYW1wbGVTaXplLCBjaGFubmVsQ291bnQsIGZsb2F0MzINCiAgCQkJaWYgKGRhdGEuc2FtcGxlUmF0ZSAhPSBpbnB1dFNhbXBsZVJhdGUpew0KICAJCQkJdmFyIG1zZyA9ICJTYW1wbGUtcmF0ZSBtaXNtYXRjaCEgU2hvdWxkIGJlICciICsgaW5wdXRTYW1wbGVSYXRlICsgIicgaXMgJyIgKyBkYXRhLnNhbXBsZVJhdGUgKyAiJyI7DQogIAkJCQljb25zb2xlLmVycm9yKCJBdWRpbyBXb3JrZXIgc2FtcGxlLXJhdGUgZXhjZXB0aW9uIC0gTXNnLjogIiArIG1zZyk7DQogIAkJCQl0aHJvdyBKU09OLnN0cmluZ2lmeShuZXcgU2FtcGxlUmF0ZUV4Y2VwdGlvbihtc2cpKTsJCQkvL05PVEU6IHRoaXMgbmVlZHMgdG8gYmUgYSBzdHJpbmcgdG8gc2hvdyB1cCBpbiB3b3JrZXIub25lcnJvciBwcm9wZXJseSA6LS8NCiAgCQkJfQ0KICAJCQlsZXQgaW5wdXRBcnJheVR5cGUgPSBkYXRhLnR5cGUgfHwgZGF0YS5zYW1wbGVzWzBdLmNvbnN0cnVjdG9yLm5hbWU7DQogIAkJCWxldCBpc0Zsb2F0MzIgPSAoaW5wdXRBcnJheVR5cGUuaW5kZXhPZigiRmxvYXQzMiIpID49IDApOw0KICAJCQlpZiAoaXNGbG9hdDMyICE9IGlzRmxvYXQzMklucHV0KXsNCiAgCQkJCXZhciBtc2cgPSAiQXJyYXkgdHlwZSBtaXNtYXRjaCEgSW5wdXQgc2FtcGxlcyBhcmUgb2YgdHlwZSAnIiArIGlucHV0QXJyYXlUeXBlICsgIicgYnV0IGV4cGVjdGVkOiAiICsgKGlzRmxvYXQzMklucHV0PyAiRmxvYXQzMiIgOiAiSW50MTYiKTsNCiAgCQkJCWNvbnNvbGUuZXJyb3IoIkF1ZGlvIFdvcmtlciB0eXBlIGV4Y2VwdGlvbiAtIE1zZy46ICIgKyBtc2cpOw0KICAJCQkJdGhyb3cgSlNPTi5zdHJpbmdpZnkobmV3IEFycmF5VHlwZUV4Y2VwdGlvbihtc2cpKTsJCQkvL05PVEU6IHRoaXMgbmVlZHMgdG8gYmUgYSBzdHJpbmcgdG8gc2hvdyB1cCBpbiB3b3JrZXIub25lcnJvciBwcm9wZXJseSA6LS8NCiAgCQkJfQ0KICAJCQkvL1RPRE86IHNob3VsZCB3ZSByZS1pbml0LiBpbnN0ZWFkIG9mIGZhaWw/DQogIAkJfQ0KICAJCQ0KICAJCS8vVE9ETzogaXMgTU9OTw0KICAJCWlmIChpc0Zsb2F0MzJJbnB1dCl7DQogIAkJCUNvbW1vbkNvbnZlcnRlcnMuZmxvYXRUbzE2Qml0UENNKF9pbnQxNklucHV0QnVmZmVyWzBdLCBpbnB1dFswXSk7DQogIAkJCV9wcm9jZXNzUmluZ0J1ZmZlci5wdXNoKFtfaW50MTZJbnB1dEJ1ZmZlclswXV0pOw0KICAJCX1lbHNlIHsNCiAgCQkJX3Byb2Nlc3NSaW5nQnVmZmVyLnB1c2goaW5wdXQpOw0KICAJCX0NCiAgCQkNCiAgCQkvL1Byb2Nlc3MgaWYgd2UgaGF2ZSBlbm91Z2ggZnJhbWVzDQogIAkJdmFyIHZhZFJlc3VsdHMgPSBbXTsNCiAgCQl3aGlsZSAoX3Byb2Nlc3NSaW5nQnVmZmVyLmZyYW1lc0F2YWlsYWJsZSA+PSBfdmFkQnVmZmVyU2l6ZSkgew0KICAJCQkvL3B1bGwgc2FtcGxlcw0KICAJCQlfcHJvY2Vzc1JpbmdCdWZmZXIucHVsbChfdmFkQnVmZmVyKTsNCiAgCQkJDQogIAkJCS8vYWN0aXZpdHkgY2hlY2sNCiAgCQkJdmFyIHZvaWNlQWN0aXZpdHkgPSB2YWRNb2R1bGUuZ2V0Vm9pY2VBY3Rpdml0eShpbnB1dFNhbXBsZVJhdGUsIF92YWRCdWZmZXJbMF0pOwkJLy9UT0RPOiBpcyBNT05PDQogIAkJCXZhZFJlc3VsdHMucHVzaCh2b2ljZUFjdGl2aXR5KTsNCiAgCQkJDQogIAkJCS8vdm9pY2UgZW5lcmd5IGFuZCBzZXF1ZW5jZSBjaGVjaw0KICAJCQlpZiAodm9pY2VBY3Rpdml0eSl7DQogIAkJCQl2b2ljZUVuZXJneSsrOw0KICAJCQkJaWYgKHZvaWNlRW5lcmd5Q2FwICYmIHZvaWNlRW5lcmd5ID4gdm9pY2VFbmVyZ3lDYXApIHZvaWNlRW5lcmd5ID0gdm9pY2VFbmVyZ3lDYXA7DQogIAkJCX1lbHNlIHsNCiAgCQkJCXZvaWNlRW5lcmd5ID0gdm9pY2VFbmVyZ3kgLSB2b2ljZUVuZXJneURyb3BSYXRlOw0KICAJCQkJaWYgKHZvaWNlRW5lcmd5IDwgMCkgdm9pY2VFbmVyZ3kgPSAwOw0KICAJCQl9DQogIAkJCWlmICh1c2VTZXF1ZW5jZUFuYWx5emVyKXsNCiAgCQkJCXNlcXVlbmNlRGV0ZWN0b3Iodm9pY2VBY3Rpdml0eSk7DQogIAkJCX0NCiAgCQl9DQogIAkJaWYgKHZhZFJlc3VsdHMubGVuZ3RoID4gMCl7DQogIAkJCS8vU2VuZCBpbmZvDQogIAkJCXBvc3RNZXNzYWdlKHsNCiAgCQkJCXZvaWNlQWN0aXZpdHk6IHZhZFJlc3VsdHMsDQogIAkJCQl2b2ljZUVuZXJneTogdm9pY2VFbmVyZ3kNCiAgCQkJfSk7DQogIAkJfQ0KICAJfQ0KICAJcmV0dXJuIHRydWU7DQogIH0NCg0KICBmdW5jdGlvbiBoYW5kbGVFdmVudChkYXRhKXsNCiAgCS8vZGF0YSB0aGF0IHNob3VsZCBub3QgYmUgcHJvY2Vzc2VkIGJ1dCBtaWdodCB0cmlnZ2VyIGFuIGV2ZW50DQogIH0NCg0KICBmdW5jdGlvbiBzdGFydChvcHRpb25zKSB7DQogICAgICAvL1RPRE86IGFueXRoaW5nIHRvIGRvPw0KICAJLy9OT1RFOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkLCB1c2Ugb25seSBmb3IgZ2F0aW5nIG9yIHNpbWlsYXIgc3R1ZmYhDQogIAlyZXNldFNlcXVlbmNlKCk7DQogIH0NCiAgZnVuY3Rpb24gc3RvcChvcHRpb25zKSB7DQogIAkvL1RPRE86IGFueXRoaW5nIHRvIGRvPw0KICAJLy9OT1RFOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkDQogIH0NCiAgZnVuY3Rpb24gcmVzZXQob3B0aW9ucykgew0KICAgICAgLy9UT0RPOiBjbGVhbiB1cCB3b3JrZXIgYW5kIHByZXAuIGZvciByZXN0YXJ0DQogIAlpbml0KCk7DQogIH0NCiAgZnVuY3Rpb24gcmVsZWFzZShvcHRpb25zKXsNCiAgCS8vZGVzdHJveQ0KICAJX3Byb2Nlc3NSaW5nQnVmZmVyID0gbnVsbDsNCiAgCV92YWRCdWZmZXIgPSBudWxsOw0KICAJX2ludDE2SW5wdXRCdWZmZXIgPSBudWxsOw0KICAJdmFkTW9kdWxlID0gbnVsbDsJCS8vVE9ETzogaXMgdGhlcmUgYW55IG90aGVyICdkZXN0cm95JycgZnVuY3Rpb24/DQogIAkvL25vdGlmeSBwcm9jZXNzb3IgdGhhdCB3ZSBjYW4gdGVybWluYXRlIG5vdw0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiA5DQogIAl9KTsNCiAgfQ0KDQogIC8vLS0tIGhlbHBlcnMgLS0tDQogIC8vLi4uCgp9KSgpOwoK",null,!1),r0e=i4("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqDQogICAqIE9yaWdpbmFsIGNvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMgLSBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wOw0KICAgKiBNb2RpZmllZCBmb3IgU0VQSUEgcHJvamVjdCAoTUlUIExpY2Vuc2UpDQogICAqLw0KICAgDQogIC8qKg0KICAgKiBBIEpTIEZJRk8gaW1wbGVtZW50YXRpb24gZm9yIHRoZSBBdWRpb1dvcmtsZXQuDQogICAqIE5vdGU6DQogICAqICAtIFRoZSBjaGFubmVsIGNvdW50IG9mIGlucHV0L291dHB1dCBjYW5ub3QgYmUgY2hhbmdlZCBkeW5hbWljYWxseS4NCiAgICogICAgVGhlIEF1ZGlvV29ya2xldE5vZGUgc2hvdWxkIGJlIGNvbmZpZ3VyZWQgd2l0aCB0aGUgYC5jaGFubmVsQ291bnQgPSBrYA0KICAgKiAgICAod2hlcmUgayBpcyB0aGUgY2hhbm5lbCBjb3VudCB5b3Ugd2FudCkgYW5kIGAuY2hhbm5lbENvdW50TW9kZSA9IGV4cGxpY2l0YC4NCiAgICoNCiAgICogQGNsYXNzDQogICAqLw0KICAgY2xhc3MgUmluZ0J1ZmZlciB7DQogICAgLyoqDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBsZW5ndGggQnVmZmVyIGxlbmd0aCBpbiBmcmFtZXMuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBjaGFubmVsQ291bnQgQnVmZmVyIGNoYW5uZWwgY291bnQuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBwcmVjaXNpb24gIlVpbnQ4IiwgIkludDgiLCAiVWludDE2IiwgIkludDE2IiwgIkZsb2F0MzIiIGV0Yy4NCiAgICAgKi8NCiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsIGNoYW5uZWxDb3VudCwgcHJlY2lzaW9uKSB7DQogICAgICB0aGlzLl9yZWFkSW5kZXggPSAwOw0KICAgICAgdGhpcy5fd3JpdGVJbmRleCA9IDA7DQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KDQogICAgICB0aGlzLl9jaGFubmVsQ291bnQgPSBjaGFubmVsQ291bnQ7DQogICAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGg7DQogICAgICB0aGlzLl9jaGFubmVsRGF0YSA9IFtdOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsraSkgew0KICAJICBpZiAocHJlY2lzaW9uID09ICJVaW50MTYiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgVWludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDE2Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIlVpbnQ4Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDgiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgSW50OEFycmF5KGxlbmd0aCk7IH0NCiAgCSAgZWxzZSB7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEZsb2F0MzJBcnJheShsZW5ndGgpOyB9DQogICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2V0dGVyIGZvciBBdmFpbGFibGUgZnJhbWVzIGluIGJ1ZmZlci4NCiAgICAgKg0KICAgICAqIEByZXR1cm4ge251bWJlcn0gQXZhaWxhYmxlIGZyYW1lcyBpbiBidWZmZXIuDQogICAgICovDQogICAgZ2V0IGZyYW1lc0F2YWlsYWJsZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9mcmFtZXNBdmFpbGFibGU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUHVzaCBhIHNlcXVlbmNlIG9mIEFycmF5cyB0byBidWZmZXIuDQogICAgICoNCiAgICAgKiBAcGFyYW0gIHthcnJheX0gYXJyYXlTZXF1ZW5jZSBBIHNlcXVlbmNlIG9mIEFycmF5cy4NCiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gY3VzdG9tVHJhbnNmb3JtIEEgZnVuY3Rpb24gb2YgKGFycmF5LCBjaGFubmVsLCBpbmRleCkgdG8gdHJhbnNmb3JtIHRoZSBpbnB1dCBkdXJpbmcgcHVzaCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVzaChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIHxhcnJheVNlcXVlbmNlfCBzdG9yYWdlIHRvIHRoZSBpbnRlcm5hbCBidWZmZXIuDQogICAgICBsZXQgc291cmNlTGVuZ3RoID0gYXJyYXlTZXF1ZW5jZVswXS5sZW5ndGg7DQogIAlsZXQgdHJhbnNmb3JtID0gY3VzdG9tVHJhbnNmb3JtIHx8IGZ1bmN0aW9uKHRoaXNBcnJheSwgY2hhbm5lbCwgaSl7DQogIAkJcmV0dXJuIHRoaXNBcnJheVtjaGFubmVsXVtpXTsNCiAgCX07DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZUxlbmd0aDsgKytpKSB7DQogICAgICAgIGxldCB3cml0ZUluZGV4ID0gKHRoaXMuX3dyaXRlSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIHRoaXMuX2NoYW5uZWxEYXRhW2NoYW5uZWxdW3dyaXRlSW5kZXhdID0gdHJhbnNmb3JtKGFycmF5U2VxdWVuY2UsIGNoYW5uZWwsIGkpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHRoaXMuX3dyaXRlSW5kZXggKz0gc291cmNlTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3dyaXRlSW5kZXggPj0gdGhpcy5fbGVuZ3RoKSB7DQogICAgICAgIHRoaXMuX3dyaXRlSW5kZXggPSB0aGlzLl93cml0ZUluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICAvLyBGb3IgZXhjZXNzaXZlIGZyYW1lcywgdGhlIGJ1ZmZlciB3aWxsIGJlIG92ZXJ3cml0dGVuLg0KICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlICs9IHNvdXJjZUxlbmd0aDsNCiAgICAgIGlmICh0aGlzLl9mcmFtZXNBdmFpbGFibGUgPiB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlID0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFB1bGwgZGF0YSBvdXQgb2YgYnVmZmVyIGFuZCBmaWxsIGEgZ2l2ZW4gc2VxdWVuY2Ugb2YgQXJyYXlzLg0KICAgICAqDQogICAgICogQHBhcmFtICB7YXJyYXl9IGFycmF5U2VxdWVuY2UgQW4gYXJyYXkgb2YgQXJyYXlzLg0KICAgICAqIEBwYXJhbSAge2Z1bmN0aW9ufSBjdXN0b21UcmFuc2Zvcm0gQSBmdW5jdGlvbiBvZiAoYXJyYXksIGNoYW5uZWwsIGluZGV4KSB0byB0cmFuc2Zvcm0gdGhlIG91dHB1dCBkdXJpbmcgcHVsbCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVsbChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBJZiB0aGUgRklGTyBpcyBjb21wbGV0ZWx5IGVtcHR5LCBkbyBub3RoaW5nLg0KICAgICAgaWYgKHRoaXMuX2ZyYW1lc0F2YWlsYWJsZSA9PT0gMCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQoNCiAgICAgIGxldCBkZXN0aW5hdGlvbkxlbmd0aCA9IGFycmF5U2VxdWVuY2VbMF0ubGVuZ3RoOw0KICAJbGV0IHRyYW5zZm9ybSA9IGN1c3RvbVRyYW5zZm9ybSB8fCBmdW5jdGlvbih0aGlzQXJyYXksIGNoYW5uZWwsIGkpew0KICAJCXJldHVybiB0aGlzQXJyYXlbY2hhbm5lbF1baV07DQogIAl9Ow0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciB0byB0aGUgfGFycmF5U2VxdWVuY2V8IHN0b3JhZ2UuDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlc3RpbmF0aW9uTGVuZ3RoOyArK2kpIHsNCiAgICAgICAgbGV0IHJlYWRJbmRleCA9ICh0aGlzLl9yZWFkSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIGFycmF5U2VxdWVuY2VbY2hhbm5lbF1baV0gPSB0cmFuc2Zvcm0odGhpcy5fY2hhbm5lbERhdGEsIGNoYW5uZWwsIHJlYWRJbmRleCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgdGhpcy5fcmVhZEluZGV4ICs9IGRlc3RpbmF0aW9uTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3JlYWRJbmRleCA+PSB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fcmVhZEluZGV4ID0gdGhpcy5fcmVhZEluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgLT0gZGVzdGluYXRpb25MZW5ndGg7DQogICAgICBpZiAodGhpcy5fZnJhbWVzQXZhaWxhYmxlIDwgMCkgew0KICAgICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KICAgICAgfQ0KICAgIH0NCiAgfQoKICAvL1NFUElBIFNUVCBTZXJ2ZXIgQ2xpZW50Og0KDQogIGNsYXNzIFNlcGlhU3R0U29ja2V0Q2xpZW50IHsNCg0KICAJY29uc3RydWN0b3Ioc2VydmVyVXJsLCBjbGllbnRJZCwgYWNjZXNzVG9rZW4sIGVuZ2luZU9wdGlvbnMsIHNlcnZlck9wdGlvbnMpew0KICAJCXRoaXMuc2VydmVyVXJsID0gKHNlcnZlclVybCB8fCAiaHR0cDovL2xvY2FsaG9zdDoyMDc0MSIpLnJlcGxhY2UoIlwvJCIsICIiKTsNCiAgCQl0aGlzLnNvY2tldEhvc3QgPSB0aGlzLnNlcnZlclVybC5yZXBsYWNlKC9eKGh0dHApLywgIndzIikgKyAiL3NvY2tldCI7CS8vbm90ZTogJy9zb2NrZXQnIGlzIGEgcGF0aCBhbGlhcyBmb3IgcHJveGllcw0KICAJCXRoaXMuY2xpZW50SWQgPSBjbGllbnRJZCB8fCAiYW55IjsNCiAgCQl0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW4gfHwgInRlc3QxMjM0IjsNCg0KICAJCWlmICghZW5naW5lT3B0aW9ucykgZW5naW5lT3B0aW9ucyA9IHt9Ow0KICAJCWlmICghc2VydmVyT3B0aW9ucykgc2VydmVyT3B0aW9ucyA9IHt9Ow0KDQogIAkJdGhpcy5zZXJ2ZXJWZXJzaW9uID0gIiI7DQogIAkJdGhpcy5hc3JFbmdpbmUgPSAiIjsNCiAgCQkNCiAgCQl0aGlzLmF2YWlsYWJsZUxhbmd1YWdlcyA9IFtdOw0KICAJCXRoaXMuYXZhaWxhYmxlTW9kZWxzID0gW107DQogIAkJdGhpcy5hdmFpbGFibGVGZWF0dXJlcyA9IFtdOw0KICAJCXRoaXMuYWN0aXZlT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oew0KICAJCQlzYW1wbGVyYXRlOiAxNjAwMCwNCiAgCQkJY29udGludW91czogZmFsc2UsDQogIAkJCWxhbmd1YWdlOiAiIiwNCiAgCQkJdGFzazogIiIsDQogIAkJCW1vZGVsOiAiIg0KICAJCX0sIGVuZ2luZU9wdGlvbnMpOw0KDQogIAkJdGhpcy5hY3RpdmVMYW5ndWFnZUNvZGUgPSB0aGlzLmFjdGl2ZU9wdGlvbnMubGFuZ3VhZ2UgfHwgIiI7DQogIAkJdGhpcy5hY3RpdmVBc3JUYXNrID0gdGhpcy5hY3RpdmVPcHRpb25zLnRhc2sgfHwgIiI7DQogIAkJdGhpcy5hY3RpdmVBc3JNb2RlbCA9IHRoaXMuYWN0aXZlT3B0aW9ucy5tb2RlbCB8fCAiIjsNCiAgCQkvL05PVEU6IGN1cnJlbnRseSBub3QgYXNzaWduZWQNCiAgCQl0aGlzLnBocmFzZXMgPSB0aGlzLmFjdGl2ZU9wdGlvbnMucGhyYXNlcyB8fCBbXTsNCiAgCQl0aGlzLmhvdFdvcmRzID0gdGhpcy5hY3RpdmVPcHRpb25zLmhvdFdvcmRzIHx8IFtdOw0KDQogIAkJdGhpcy5fbXNnSWQgPSAwOw0KDQogIAkJdGhpcy53ZWJzb2NrZXQgPSB1bmRlZmluZWQ7DQogIAkJdGhpcy5fY29ubmVjdGlvbklkID0gMDsNCg0KICAJCXRoaXMuYXV0b0Nsb3NlT25MYXN0RmluYWwgPSB0cnVlOwkvL2FwcGxpZXMgdG8gbm9uLWNvbnRpbnVvdXMgc2V0dXAgb25seQ0KDQogIAkJdGhpcy5jb25uZWN0aW9uSXNPcGVuID0gZmFsc2U7DQogIAkJdGhpcy5pc1JlYWR5Rm9yU3RyZWFtID0gZmFsc2U7DQoNCiAgCQl0aGlzLl9vbk9wZW4gPSBzZXJ2ZXJPcHRpb25zLm9uT3BlbiB8fCBmdW5jdGlvbigpe307DQogIAkJdGhpcy5fb25SZWFkeSA9IHNlcnZlck9wdGlvbnMub25SZWFkeSB8fCBmdW5jdGlvbihhY3RpdmVPcHRpb25zKXt9Ow0KICAJCXRoaXMuX29uQ2xvc2UgPSBzZXJ2ZXJPcHRpb25zLm9uQ2xvc2UgfHwgZnVuY3Rpb24oZXYpe307DQogIAkJdGhpcy5fb25SZXN1bHQgPSBzZXJ2ZXJPcHRpb25zLm9uUmVzdWx0IHx8IGZ1bmN0aW9uKHJlcyl7fTsNCiAgCQl0aGlzLl9vbkVycm9yID0gc2VydmVyT3B0aW9ucy5vbkVycm9yIHx8IGZ1bmN0aW9uKGVycil7DQogIAkJCWNvbnNvbGUuZXJyb3IoIlNlcGlhU3R0U29ja2V0Q2xpZW50IEVSUk9SIiwgZXJyKTsNCiAgCQl9Ow0KDQogIAkJdGhpcy5fc2tpcEF1dG9XZWxjb21lID0gc2VydmVyT3B0aW9ucy5za2lwQXV0b1dlbGNvbWU7DQogIAkJdGhpcy5fZG9EZWJ1ZyA9IHNlcnZlck9wdGlvbnMuZG9EZWJ1ZzsNCiAgCX0NCg0KICAJbG9nKG1zZyl7DQogIAkJaWYgKHRoaXMuX2RvRGVidWcpew0KICAJCQljb25zb2xlLmxvZygiU2VwaWFTdHRTb2NrZXRDbGllbnQiLCBtc2cpOw0KICAJCX0NCiAgCX0NCg0KICAJLy8tLS0gSFRUUCBJbnRlcmZhY2UgLS0tDQoNCiAgCXBpbmdTZXJ2ZXIoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKXsNCiAgCQljb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOw0KICAJCXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjb250cm9sbGVyLmFib3J0KCk7fSwgODAwMCk7DQogIAkJZmV0Y2godGhpcy5zZXJ2ZXJVcmwgKyAiL3BpbmciLCB7DQogIAkJCXNpZ25hbDogY29udHJvbGxlci5zaWduYWwNCiAgCQl9KS50aGVuKGZ1bmN0aW9uKHJlcyl7IHJldHVybiByZXMuanNvbigpOyB9KQ0KICAJCS50aGVuKGZ1bmN0aW9uKGpzb24pew0KICAJCQlpZiAoc3VjY2Vzc0NhbGxiYWNrKSBzdWNjZXNzQ2FsbGJhY2soanNvbik7DQogIAkJfSkNCiAgCQkuY2F0Y2goZnVuY3Rpb24oZXJyKXsNCiAgCQkJaWYgKGVycm9yQ2FsbGJhY2spIGVycm9yQ2FsbGJhY2soZXJyKTsNCiAgCQl9KTsNCiAgCX0NCg0KICAJbG9hZFNlcnZlckluZm8oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKXsNCiAgCQljb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOw0KICAJCXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjb250cm9sbGVyLmFib3J0KCk7fSwgODAwMCk7DQogIAkJZmV0Y2godGhpcy5zZXJ2ZXJVcmwgKyAiL3NldHRpbmdzIiwgew0KICAJCQltZXRob2Q6ICJHRVQiLA0KICAJCQlzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsDQogIAkJfSkudGhlbihmdW5jdGlvbihyZXMpew0KICAJCQlpZiAocmVzLm9rKXsNCiAgCQkJCXJldHVybiByZXMuanNvbigpOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlpZiAoZXJyb3JDYWxsYmFjaykgZXJyb3JDYWxsYmFjayh7DQogIAkJCQkJIm5hbWUiOiAiRmV0Y2hFcnJvciIsICJtZXNzYWdlIjogcmVzLnN0YXR1c1RleHQsICJjb2RlIjogcmVzLnN0YXR1cw0KICAJCQkJfSk7DQogIAkJCX0NCiAgCQl9KS50aGVuKGZ1bmN0aW9uKGpzb24pew0KICAJCQlpZiAoanNvbiAmJiBqc29uLnNldHRpbmdzKXsNCiAgCQkJCXRoaXMuX2hhbmRsZVNlcnZlclNldHRpbmdzKGpzb24uc2V0dGluZ3MpOw0KICAJCQkJaWYgKHN1Y2Nlc3NDYWxsYmFjaykgc3VjY2Vzc0NhbGxiYWNrKGpzb24uc2V0dGluZ3MpOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlpZiAoc3VjY2Vzc0NhbGxiYWNrKSBzdWNjZXNzQ2FsbGJhY2soe30pOw0KICAJCQl9DQogIAkJfSkuY2F0Y2goZnVuY3Rpb24oZXJyKXsNCiAgCQkJaWYgKGVycm9yQ2FsbGJhY2spIGVycm9yQ2FsbGJhY2soZXJyKTsNCiAgCQl9KTsNCiAgCX0NCg0KICAJX2hhbmRsZVNlcnZlclNldHRpbmdzKHNldHRpbmdzKXsNCiAgCQl0aGlzLnNlcnZlclZlcnNpb24gPSBzZXR0aW5ncy52ZXJzaW9uOw0KICAJCXRoaXMuYXNyRW5naW5lID0gc2V0dGluZ3MuZW5naW5lIHx8ICIiOw0KICAJCXRoaXMuYXZhaWxhYmxlTGFuZ3VhZ2VzID0gc2V0dGluZ3MubGFuZ3VhZ2VzIHx8IFtdOw0KICAJCXRoaXMuYXZhaWxhYmxlTW9kZWxzID0gc2V0dGluZ3MubW9kZWxzIHx8IFtdOw0KICAJCXRoaXMuYXZhaWxhYmxlRmVhdHVyZXMgPSBzZXR0aW5ncy5mZWF0dXJlcyB8fCBbXTsNCiAgCX0NCg0KICAJLy8tLS0gV2ViU29ja2V0IGludGVyZmFjZSAtLS0NCg0KICAJbmV3TWVzc2FnZUlkKCl7DQogIAkJdmFyIG1zZ0lkID0gKyt0aGlzLl9tc2dJZDsNCiAgCQlpZiAobXNnSWQgPiA5OTk5OTkpew0KICAJCQltc2dJZCA9IDE7DQogIAkJfQ0KICAJCXJldHVybiBtc2dJZDsNCiAgCX0NCg0KICAJb3BlbkNvbm5lY3Rpb24oKXsNCiAgCQlpZiAodGhpcy53ZWJzb2NrZXQgJiYgdGhpcy53ZWJzb2NrZXQucmVhZHlTdGF0ZSA9PSB0aGlzLndlYnNvY2tldC5PUEVOKXsNCiAgCQkJdGhpcy5fb25FcnJvcih7bmFtZTogIlNvY2tldENvbm5lY3Rpb25FcnJvciIsIG1lc3NhZ2U6ICJDb25uZWN0aW9uIHdhcyBhbHJlYWR5IE9QRU4ifSk7DQogIAkJCXJldHVybiBmYWxzZTsNCiAgCQl9DQogIAkJdmFyIHNlbGYgPSB0aGlzOw0KICAJCXZhciB0aGlzQ29ubmVjaXRvbklkOw0KICAJDQogIAkJLy9DUkVBVEUNCiAgCQl0aGlzLndlYnNvY2tldCA9IG5ldyBXZWJTb2NrZXQodGhpcy5zb2NrZXRIb3N0KTsNCiAgCQkNCiAgCQkvL09OT1BFTg0KICAJCXRoaXMud2Vic29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uKCl7DQogIAkJCXNlbGYubG9nKCJDb25uZWN0aW9uIE9QRU4iKTsNCiAgCQkJc2VsZi5jb25uZWN0aW9uSXNPcGVuID0gdHJ1ZTsNCiAgCQkJc2VsZi5fY29ubmVjdGlvbklkKys7DQogIAkJCXRoaXNDb25uZWNpdG9uSWQgPSBzZWxmLl9jb25uZWN0aW9uSWQ7DQogIAkJCXNlbGYuX29uT3BlbigpOw0KICAJCQkvL3NlbmQgd2VsY29tZQ0KICAJCQlpZiAoIXNlbGYuX3NraXBBdXRvV2VsY29tZSl7DQogIAkJCQlzZWxmLnNlbmRXZWxjb21lKCk7DQogIAkJCX0NCiAgCQl9Ow0KICAJCS8vT05DTE9TRQ0KICAJCXRoaXMud2Vic29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbihldil7DQogIAkJCXNlbGYubG9nKCJDb25uZWN0aW9uIENMT1NFRCIpOw0KICAJCQlzZWxmLmNvbm5lY3Rpb25Jc09wZW4gPSBmYWxzZTsNCiAgCQkJc2VsZi5pc1JlYWR5Rm9yU3RyZWFtID0gZmFsc2U7DQogIAkJCS8vdW5kZXJzdGFuZCBlcnJvcjogZXYuY29kZSBvciBldi5yZWFzb24gbWlnaHQgZ2l2ZSBtb3JlIGluc2lnaHRzDQogIAkJCXNlbGYuX29uQ2xvc2UoZXYpOw0KICAJCX07DQogIAkJLy9PTk1FU1NBR0UNCiAgCQl0aGlzLndlYnNvY2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCl7DQogIAkJCWlmIChldmVudCAmJiBldmVudC5kYXRhICYmIHR5cGVvZiBldmVudC5kYXRhID09ICJzdHJpbmciKXsNCiAgCQkJCXNlbGYubG9nKCJDb25uZWN0aW9uIE1FU1NBR0U6ICIgKyBldmVudC5kYXRhKTsJCS8vREVCVUcNCiAgCQkJCXRyeSB7DQogIAkJCQkJc2VsZi5oYW5kbGVTb2NrZXRNZXNzYWdlKEpTT04ucGFyc2UoZXZlbnQuZGF0YSkpOw0KICAJCQkJfWNhdGNoKGVycil7DQogIAkJCQkJY29uc29sZS5lcnJvcigiU2VwaWFTdHRTb2NrZXRDbGllbnQgLSBNZXNzYWdlUGFyc2VyRXJyb3IiLCBlcnIpOw0KICAJCQkJCXNlbGYuaGFuZGxlU29ja2V0RXJyb3Ioe25hbWU6ICJTb2NrZXRNZXNzYWdlUGFyc2VyRXJyb3IiLCBtZXNzYWdlOiAiTWVzc2FnZSBoYW5kbGVyIHNhdyBpbnZsYWlkIEpTT04/ISJ9KTsNCiAgCQkJCX0NCiAgCQkJfQ0KICAJCX07DQogIAkJLy9PTkVSUk9SDQogIAkJdGhpcy53ZWJzb2NrZXQub25lcnJvciA9IGZ1bmN0aW9uKGVycm9yKXsNCiAgCQkJaWYgKCF0aGlzQ29ubmVjaXRvbklkKXsNCiAgCQkJCS8vbmV2ZXIgb3BlbmVkDQogIAkJCQlzZWxmLl9vbkVycm9yKHtuYW1lOiAiU29ja2V0Q29ubmVjdGlvbkVycm9yIiwgbWVzc2FnZTogIkZhaWxlZCB0byBjb25uZWN0In0pOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlzZWxmLmhhbmRsZVNvY2tldEVycm9yKGVycm9yKTsNCiAgCQkJfQ0KICAJCX07DQoNCiAgCQlyZXR1cm4gdHJ1ZTsNCiAgCX0NCg0KICAJY2xvc2VDb25uZWN0aW9uKCl7DQogIAkJaWYgKHRoaXMud2Vic29ja2V0ICYmIHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgPT0gdGhpcy53ZWJzb2NrZXQuT1BFTil7DQogIAkJCXRoaXMud2Vic29ja2V0LmNsb3NlKCk7DQogIAkJCXJldHVybiB0cnVlOw0KICAJCX1lbHNlIHsNCiAgCQkJLy9mYWlsIHNpbGVudGx5Pw0KICAJCQlyZXR1cm4gZmFsc2U7DQogIAkJfQ0KICAJfQ0KDQogIAloYW5kbGVTb2NrZXRNZXNzYWdlKG1zZ0pzb24pew0KICAJCWlmIChtc2dKc29uLnR5cGUgPT0gImVycm9yIil7DQogIAkJCXRoaXMuaGFuZGxlU29ja2V0RXJyb3IobXNnSnNvbik7DQogIAkJfWVsc2Ugew0KICAJCQkvL2NvbnNvbGUubG9nKCJoYW5kbGVTb2NrZXRNZXNzYWdlIiwgSlNPTi5zdHJpbmdpZnkobXNnSnNvbikpOwkvL0RFQlVHDQogIAkJCQ0KICAJCQlpZiAobXNnSnNvbi50eXBlID09ICJwaW5nIil7DQogIAkJCQkvL1RPRE86IHNlbmQgb25seSBhZnRlciB3ZWxjb21lDQogIAkJCQl0aGlzLnNlbmRKc29uKHt0eXBlOiAicG9uZyIsIG1zZ19pZDogbXNnSnNvbi5tc2dfaWR9KTsNCg0KICAJCQl9ZWxzZSBpZiAobXNnSnNvbi50eXBlID09ICJ3ZWxjb21lIil7DQogIAkJCQl0aGlzLmxvZygiQ29ubmVjdGlvbiBXRUxDT01FIik7DQogIAkJCQkvL3JlYWQgYWN0aXZlIHNlc3Npb24vZW5naW5lIG9wdGlvbnMNCiAgCQkJCXRoaXMuYWN0aXZlT3B0aW9ucyA9IG1zZ0pzb24uaW5mbz8gbXNnSnNvbi5pbmZvLm9wdGlvbnMgOiB7fTsNCiAgCQkJCXRoaXMuYWN0aXZlTGFuZ3VhZ2VDb2RlID0gdGhpcy5hY3RpdmVPcHRpb25zLmxhbmd1YWdlIHx8ICIiOw0KICAJCQkJdGhpcy5hY3RpdmVBc3JUYXNrID0gdGhpcy5hY3RpdmVPcHRpb25zLnRhc2sgfHwgIiI7DQogIAkJCQl0aGlzLmFjdGl2ZUFzck1vZGVsID0gdGhpcy5hY3RpdmVPcHRpb25zLm1vZGVsIHx8ICIiOw0KICAJCQkJdGhpcy5pc1JlYWR5Rm9yU3RyZWFtID0gdHJ1ZTsNCiAgCQkJCXRoaXMuX29uUmVhZHkodGhpcy5hY3RpdmVPcHRpb25zKTsNCiAgCQkJDQogIAkJCX1lbHNlIGlmIChtc2dKc29uLnR5cGUgPT0gInJlc3VsdCIpew0KICAJCQkJdGhpcy5fb25SZXN1bHQobXNnSnNvbik7DQogIAkJCQlpZiAobXNnSnNvbi5pc0ZpbmFsICYmICF0aGlzLmFjdGl2ZU9wdGlvbnMuY29udGludW91cyAmJiB0aGlzLmF1dG9DbG9zZU9uTGFzdEZpbmFsKXsNCiAgCQkJCQkvL2FmdGVyIGZpbmFsIHJlc3VsdCwgY2xvc2UgY29ubmVjdGlvbg0KICAJCQkJCXRoaXMuY2xvc2VDb25uZWN0aW9uKCk7DQogIAkJCQl9DQogIAkJCX1lbHNlIGlmIChtc2dKc29uLnR5cGUgPT0gInJlc3BvbnNlIik7DQogIAkJfQ0KICAJfQ0KDQogIAloYW5kbGVTb2NrZXRFcnJvcihlcnIpew0KICAJCXZhciBlcnJvciA9IHt9Ow0KICAJCWlmICghZXJyKSBlcnJvciA9IHtuYW1lOiAiU29ja2V0TWVzc2FnZUVycm9yIiwgbWVzc2FnZTogInVua25vd24ifTsNCiAgCQllbHNlIGlmICh0eXBlb2YgZXJyID09ICJzdHJpbmciKSBlcnJvciA9IHtuYW1lOiAiU29ja2V0TWVzc2FnZUVycm9yIiwgbWVzc2FnZTogZXJyfTsNCiAgCQllbHNlIGVycm9yID0ge25hbWU6IChlcnIubmFtZSB8fCAiU29ja2V0TWVzc2FnZUVycm9yIiksIG1lc3NhZ2U6IChlcnIubWVzc2FnZSB8fCAidW5rbm93biIpLCBkZXRhaWxzOiBlcnJ9Ow0KICAJCS8vc2VuZA0KICAJCXRoaXMuX29uRXJyb3IoZXJyb3IpOw0KICAJCS8vRXJyb3JzIGFyZSBub3QgYWNjZXB0YWJsZSA6LXAgLSBjbG9zZSBpbiBhbnkgY2FzZQ0KICAJCXRoaXMuY2xvc2VDb25uZWN0aW9uKCk7CQkvL3RoaXMgaGFzIHByb2JhYmx5IG5vIGVmZmVjdCBhdCBhbGwNCiAgCX0NCg0KICAJc2VuZEpzb24oanNvbil7DQogIAkJaWYgKHRoaXMud2Vic29ja2V0ICYmIHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgPT0gdGhpcy53ZWJzb2NrZXQuT1BFTil7DQogIAkJCXRoaXMud2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoanNvbikpOw0KICAJCQlyZXR1cm4gdHJ1ZTsNCiAgCQl9ZWxzZSB7DQogIAkJCXRoaXMuX29uRXJyb3Ioe25hbWU6ICJTb2NrZXRDb25uZWN0aW9uRXJyb3IiLCBtZXNzYWdlOiAiQ29ubmVjdGlvbiBpcyBjbG9zZWQuIENhbm5vdCBzZW5kIG1lc3NhZ2UuIn0pOw0KICAJCQkvL3Rocm93IGVycm9yPw0KICAJCQlyZXR1cm4gZmFsc2U7DQogIAkJfQ0KICAJfQ0KICAJc2VuZEJ5dGVzKGJ1ZmZlckNodW5rKXsNCiAgCQlpZiAoIXRoaXMud2Vic29ja2V0IHx8IHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgIT0gdGhpcy53ZWJzb2NrZXQuT1BFTil7DQogIAkJCXRoaXMuX29uRXJyb3Ioe25hbWU6ICJTb2NrZXRDb25uZWN0aW9uRXJyb3IiLCBtZXNzYWdlOiAiQ29ubmVjdGlvbiBpcyBjbG9zZWQuIENhbm5vdCBzZW5kIG1lc3NhZ2UuIn0pOw0KICAJCQlyZXR1cm4gZmFsc2U7DQogIAkJfQ0KICAJCXRoaXMud2Vic29ja2V0LnNlbmQoYnVmZmVyQ2h1bmspOwkvL3RoaXMgY2FuIGJlIGEgdHlwZWQgYXJyYXkgKHJlY29tbWVuZGVkKSwgdmlldyBvciBibG9iIChJIGd1ZXNzKQ0KICAJCXJldHVybiB0cnVlOw0KICAJfQ0KICAJc2VuZE1lc3NhZ2UodGV4dCl7DQogIAkJcmV0dXJuIHRoaXMuc2VuZEpzb24oew0KICAJCQkidHlwZSI6ICJjaGF0IiwNCiAgCQkJImRhdGEiOiB7InRleHQiOiB0ZXh0fSwNCiAgCQkJIm1zZ19pZCI6IHRoaXMubmV3TWVzc2FnZUlkKCkNCiAgCQl9KTsNCiAgCX0NCiAgCXNlbmRXZWxjb21lKG9wdGlvbnMpew0KICAJCXZhciBvcHRpb25zVG9TZW5kID0gb3B0aW9ucyB8fCB0aGlzLmFjdGl2ZU9wdGlvbnM7DQogIAkJcmV0dXJuIHRoaXMuc2VuZEpzb24oew0KICAJCQkidHlwZSI6ICJ3ZWxjb21lIiwNCiAgCQkJImRhdGEiOiBvcHRpb25zVG9TZW5kLA0KICAJCQkiY2xpZW50X2lkIjogdGhpcy5jbGllbnRJZCwNCiAgCQkJImFjY2Vzc190b2tlbiI6IHRoaXMuYWNjZXNzVG9rZW4sDQogIAkJCSJtc2dfaWQiOiB0aGlzLm5ld01lc3NhZ2VJZCgpDQogIAkJfSk7DQogIAl9DQogIAlzZW5kQXVkaW9FbmQoYnl0ZUxlbmd0aCwgYnVmZmVyT3JUaW1lTGltaXQpew0KICAJCXJldHVybiB0aGlzLnNlbmRKc29uKHsNCiAgCQkJInR5cGUiOiAiYXVkaW9lbmQiLA0KICAJCQkiZGF0YSI6IHsNCiAgCQkJCSJieXRlTGVuZ3RoIjogYnl0ZUxlbmd0aCwNCiAgCQkJCSJidWZmZXJPclRpbWVMaW1pdCI6IGJ1ZmZlck9yVGltZUxpbWl0DQogIAkJCX0sDQogIAkJCSJtc2dfaWQiOiB0aGlzLm5ld01lc3NhZ2VJZCgpDQogIAkJfSk7DQogIAl9DQogIH0KCiAgb25tZXNzYWdlID0gZnVuY3Rpb24oZSkgew0KICAgICAgLy9BdWRpbyB3b3JrZXIgaW50ZXJmYWNlDQogIAlpZiAoZS5kYXRhLmN0cmwpew0KICAJCXN3aXRjaCAoZS5kYXRhLmN0cmwuYWN0aW9uKXsNCiAgCQkJLy9jb21tb24gaW50ZXJmYWNlDQogIAkJCWNhc2UgImNvbnN0cnVjdCI6DQogIAkJCQljb25zdHJ1Y3RXb3JrZXIoZS5kYXRhLmN0cmwub3B0aW9ucyk7DQogIAkJCQlicmVhazsNCiAgCQkJY2FzZSAicHJvY2VzcyI6DQogIAkJCQlwcm9jZXNzKGUuZGF0YS5jdHJsLmRhdGEpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgImhhbmRsZSI6DQogIAkJCQloYW5kbGVFdmVudChlLmRhdGEuY3RybC5kYXRhKTsJLy9lLmcuOiB0aGlzIHdvcmtlciBzZW5kcyBnYXRlIGV2ZW50cw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0YXJ0IjoNCiAgCQkJCXN0YXJ0KGUuZGF0YS5jdHJsLm9wdGlvbnMpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0b3AiOg0KICAJCQkJc3RvcChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZXNldCI6DQogIAkJCQlyZXNldChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZWxlYXNlIjoNCiAgCQkJY2FzZSAiY2xvc2UiOg0KICAJCQkJcmVsZWFzZShlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQlkZWZhdWx0Og0KICAJCQkJY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gVW5rbm93biBjb250cm9sIG1lc3NhZ2U6IiwgZS5kYXRhKTsNCiAgCQkJCWJyZWFrOw0KICAJCX0NCiAgCX0NCiAgCS8vY3VzdG9tIGludGVyZmFjZQ0KICAJaWYgKGUuZGF0YS5nYXRlICE9IHVuZGVmaW5lZCl7DQogIAkJaWYgKGRvRGVidWcpIGNvbnNvbGUuZXJyb3IoIlN0dFNvY2tldFdvcmtlciAtIERFQlVHIC0gTWVzc2FnZSIsIGUuZGF0YSk7CQkJLy9ERUJVRw0KICAJCWdhdGVDb250cm9sKGUuZGF0YS5nYXRlICYmIGUuZGF0YS5nYXRlID09ICJvcGVuIiwgZS5kYXRhLmdhdGVPcHRpb25zKTsNCiAgCX0NCiAgfTsNCg0KICBsZXQgd29ya2VySWQgPSAic3R0LXNvY2tldC13b3JrZXItIiArIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApICsgIi0iICsgRGF0ZS5ub3coKTsNCiAgbGV0IGRvRGVidWcgPSBmYWxzZTsNCiAgbGV0IGVuYWJsZURyeVJ1biA9IGZhbHNlOwkJLy9za2lwIHNlcnZlciBhbmQgZ2VuZXJhdGUgcHNldWRvIHJlc3VsdCBldmVudHMgdG8gZGVidWcgVUkgZXZlbnQgZmxvdw0KICBsZXQgcmV0dXJuQXVkaW9GaWxlID0gZmFsc2U7DQogIGxldCB3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IGZhbHNlOw0KDQogIGxldCBzb2NrZXRVcmw7DQogIGxldCBjbGllbnRJZCA7DQogIGxldCBhY2Nlc3NUb2tlbjsNCiAgbGV0IHN0dFNlcnZlcjsNCg0KICBsZXQgbWVzc2FnZUZvcm1hdDsJCQkvL2UuZy46ICJ3ZWJTcGVlY2hBcGkiIG9yICJkZWZhdWx0Ig0KDQogIGxldCBpbnB1dFNhbXBsZVJhdGU7DQogIGxldCBpbnB1dFNhbXBsZVNpemU7DQogIGxldCBjaGFubmVsQ291bnQ7DQogIGxldCBpc0Zsb2F0MzJJbnB1dDsJCS8vZGVmYXVsdCBmYWxzZQ0KICBsZXQgZW5jb2RlckJpdERlcHRoID0gMTY7DQogIGxldCBfYnl0ZXNQZXJTYW1wbGUgPSBlbmNvZGVyQml0RGVwdGgvODsNCg0KICBsZXQgbG9va2JhY2tCdWZmZXJNczsNCiAgbGV0IGxvb2tiYWNrQnVmZmVySXNCbG9ja2VkOw0KICBsZXQgX2xvb2tiYWNrQnVmZmVyU2l6ZTsNCiAgbGV0IF9sb29rYmFja1JpbmdCdWZmZXI7DQogIGxldCByZWNvcmRlZEJ1ZmZlcnM7DQogIGxldCBfc2VudEJ1ZmZlcnM7DQogIGxldCBfc2hpZnRlZEJ1ZmZlcnM7DQogIGxldCByZWNvcmRCdWZmZXJNYXhOOw0KICBsZXQgY29udGludW91czsJCS8vTk9URTogdGhpcyBpcyBhbiBlbmdpbmUgb3B0aW9uIGJ1dCBpbmZsdWVuY2VzIGZ1bGwgYnVmZmVyIGFzIHdlbGwNCg0KICBsZXQgZ2F0ZUlzT3BlbiA9IGZhbHNlOw0KICBsZXQgX2dhdGVPcGVuVFMgPSAwOw0KICBsZXQgX2dhdGVDbG9zZVRTID0gMDsNCg0KICBsZXQgX2lzRmlyc3RWYWxpZFByb2Nlc3MgPSB0cnVlOw0KDQogIGZ1bmN0aW9uIGluaXQoKXsNCiAgCXJlY29yZGVkQnVmZmVycyA9IG51bGw7DQogIAlfbG9va2JhY2tSaW5nQnVmZmVyID0gbnVsbDsNCiAgCWxvb2tiYWNrQnVmZmVySXNCbG9ja2VkID0gZmFsc2U7DQogIAlpZiAobG9va2JhY2tCdWZmZXJNcyl7DQogIAkJX2xvb2tiYWNrQnVmZmVyU2l6ZSA9IE1hdGgucm91bmQoKGxvb2tiYWNrQnVmZmVyTXMvMTAwMCkgKiBpbnB1dFNhbXBsZVJhdGUpOw0KICAJCWlmIChpc0Zsb2F0MzJJbnB1dCl7DQogIAkJCV9sb29rYmFja1JpbmdCdWZmZXIgPSBuZXcgUmluZ0J1ZmZlcihfbG9va2JhY2tCdWZmZXJTaXplLCBjaGFubmVsQ291bnQsICJGbG9hdDMyIik7CS8vVE9ETzogdGVzdCBmb3IgRmxvYXQzMg0KICAJCX1lbHNlIHsNCiAgCQkJX2xvb2tiYWNrUmluZ0J1ZmZlciA9IG5ldyBSaW5nQnVmZmVyKF9sb29rYmFja0J1ZmZlclNpemUsIGNoYW5uZWxDb3VudCwgIkludDE2Iik7DQogIAkJfQ0KICAJfWVsc2Ugew0KICAJCV9sb29rYmFja0J1ZmZlclNpemUgPSAwOw0KICAJfQ0KICAJcmVjb3JkZWRCdWZmZXJzID0gW107DQogIAlfc2VudEJ1ZmZlcnMgPSAwOw0KICAJX3NoaWZ0ZWRCdWZmZXJzID0gMDsNCiAgCV9pc0ZpcnN0VmFsaWRQcm9jZXNzID0gdHJ1ZTsNCiAgCWdhdGVJc09wZW4gPSBmYWxzZTsNCiAgCV9nYXRlT3BlblRTID0gMDsNCiAgCV9nYXRlQ2xvc2VUUyA9IDA7DQogIH0NCg0KICAvL1JlcXVlc3RzDQoNCiAgZnVuY3Rpb24gZ2F0ZUNvbnRyb2wob3BlbiwgZ2F0ZU9wdGlvbnMsIHRyaWdnZXJlZE9uRXJyb3Ipew0KICAJdmFyIG1zZyA9IHsNCiAgCQltb2R1bGVFdmVudDogdHJ1ZSwJCS8vdXNlICdtb2R1bGVFdmVudCcgdG8gZGlzdGluZ3Vpc2ggZnJvbSBub3JtYWwgcHJvY2Vzc2luZyByZXN1bHQNCiAgCQlnYXRlOiB7fQ0KICAJfTsNCiAgCWlmIChvcGVuKXsNCiAgCQkvL3dlIGFsd2F5cyByZXNldCB0aGUgYnVmZmVyDQogIAkJcmVjb3JkZWRCdWZmZXJzID0gW107DQogIAkJX3NlbnRCdWZmZXJzID0gMDsNCiAgCQlfc2hpZnRlZEJ1ZmZlcnMgPSAwOw0KICAJCV9nYXRlT3BlblRTID0gRGF0ZS5ub3coKTsNCiAgCQlnYXRlSXNPcGVuID0gdHJ1ZTsNCiAgCQltc2cuZ2F0ZS5pc09wZW4gPSB0cnVlOw0KICAJCW1zZy5nYXRlLm9wZW5lZEF0ID0gX2dhdGVPcGVuVFM7DQogIAkJLy9vcGVuIGNvbm5lY3Rpb24NCiAgCQlpZiAoc3R0U2VydmVyKXsNCiAgCQkJc3R0U2VydmVyLm9wZW5Db25uZWN0aW9uKCk7DQogIAkJfQ0KICAJfWVsc2Ugew0KICAJCV9nYXRlQ2xvc2VUUyA9IERhdGUubm93KCk7DQogIAkJZ2F0ZUlzT3BlbiA9IGZhbHNlOw0KICAJCW1zZy5nYXRlLmlzT3BlbiA9IGZhbHNlOw0KICAJCW1zZy5nYXRlLm9wZW5lZEF0ID0gX2dhdGVPcGVuVFM7DQogIAkJbXNnLmdhdGUuY2xvc2VkQXQgPSBfZ2F0ZUNsb3NlVFM7DQogIAkJLy8tLS0tLS0tLS0tIERSWS1SVU4gVEVTVDogZmFrZSBmaW5hbCByZXN1bHQgLS0tLS0tLS0tLQ0KICAJCWlmIChlbmFibGVEcnlSdW4gJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCAmJiByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoID4gcmVjb3JkQnVmZmVyTWF4Ti8zKXsNCiAgCQkJc2V0VGltZW91dChmdW5jdGlvbigpew0KICAJCQkJLy9maW5hbCByZXN1bHQNCiAgCQkJCWlmIChtZXNzYWdlRm9ybWF0ID09ICJ3ZWJTcGVlY2hBcGkiKXsNCiAgCQkJCQlzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZVJlY29nbml0aW9uUmVzdWx0KHRydWUsICJFbmQgb2YgdGVzdCBtZXNzYWdlIik7DQogIAkJCQl9ZWxzZSB7DQogIAkJCQkJc2VuZERlZmF1bHRSZWNvZ25pdGlvblJlc3VsdCh7InR5cGUiOiJyZXN1bHQiLCJtc2dfaWQiOkRhdGUubm93KCksImNvZGUiOjIwMCwidHJhbnNjcmlwdCI6IkVuZCBvZiB0ZXN0IG1lc3NhZ2UiLCJpc0ZpbmFsIjp0cnVlfSk7DQogIAkJCQl9DQogIAkJCX0sIDIwMDApOw0KICAJCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAJCX1lbHNlIGlmIChzdHRTZXJ2ZXIgJiYgc3R0U2VydmVyLmNvbm5lY3Rpb25Jc09wZW4gJiYgc3R0U2VydmVyLmlzUmVhZHlGb3JTdHJlYW0pew0KICAJCQl2YXIgY2xvc2VkRHVlVG9CdWZmZXJMaW1pdCA9IGNoZWNrSWZCdWZmZXJMaW1pdFdhc1JlYWNoZWQoKTsNCiAgCQkJaWYgKGNsb3NlZER1ZVRvQnVmZmVyTGltaXQpew0KICAJCQkJbXNnLmdhdGUuYnVmZmVyT3JUaW1lTGltaXQgPSB0cnVlOw0KICAJCQl9DQogIAkJCS8vY2xvc2UgaW5wdXQgYW5kIHJlcXVlc3QgZmluYWwgcmVzdWx0DQogIAkJCXJlcXVlc3RGaW5hbFJlc3VsdChjbG9zZWREdWVUb0J1ZmZlckxpbWl0KTsNCiAgCQl9DQogIAkJLy9lbHNlIHdlIHJlbHkgb24gJ19nYXRlQ2xvc2VUUycgdG8gZmluaXNoIGFmdGVyIGxhc3QgYnVmZmVyIGlzIHNlbnQNCg0KICAJCS8vc2VuZCBXQVY/DQogIAkJaWYgKCF0cmlnZ2VyZWRPbkVycm9yICYmIHJldHVybkF1ZGlvRmlsZSAmJiByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoKXsNCiAgCQkJc2V0VGltZW91dChmdW5jdGlvbigpew0KICAJCQkJc2VuZFdhdmVGaWxlQXJyYXlCdWZmZXIoZ2V0V2F2ZSgpKTsNCiAgCQkJfSwgMTAwKTsNCiAgCQl9DQogIAl9DQogIAlwb3N0TWVzc2FnZShtc2cpOw0KICB9DQoNCiAgZnVuY3Rpb24gZ2V0V2F2ZSgpew0KICAJdmFyIHZpZXc7DQogIAl2YXIgdG90YWxMZW5ndGggPSAwOw0KICAJcmVjb3JkZWRCdWZmZXJzLmZvckVhY2goZnVuY3Rpb24odil7DQogIAkJdG90YWxMZW5ndGggKz0gdi5ieXRlTGVuZ3RoOw0KICAJfSk7DQogIAlpZiAodG90YWxMZW5ndGgpew0KICAJCXZpZXcgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKHRvdGFsTGVuZ3RoKSk7DQogIAkJdmFyIG9mZnNldCA9IDA7DQogIAkJcmVjb3JkZWRCdWZmZXJzLmZvckVhY2goZnVuY3Rpb24odil7DQogIAkJCWZvciAobGV0IGkgPSAwOyBpIDwgdi5ieXRlTGVuZ3RoOyBpKyspew0KICAJCQkJdmlldy5zZXRVaW50OChvZmZzZXQsIHYuZ2V0VWludDgoaSkpOw0KICAJCQkJb2Zmc2V0Kys7DQogIAkJCX0NCiAgCQl9KTsNCiAgCX0NCiAgCXJldHVybiB2aWV3Ow0KICB9DQoNCiAgLy9JbnRlcmZhY2UNCg0KICBmdW5jdGlvbiBjb25zdHJ1Y3RXb3JrZXIob3B0aW9ucyl7DQogIAlpZiAod2FzQ29uc3RydWN0b3JDYWxsZWQpew0KICAJCWNvbnNvbGUuZXJyb3IoIlN0dFNvY2tldFdvcmtlciAtIENvbnN0cnVjdG9yIHdhcyBjYWxsZWQgdHdpY2UhIDJuZCBjYWxsIHdhcyBpZ25vcmVkIGJ1dCB0aGlzIHNob3VsZCBiZSBmaXhlZCEiLCAiLSIsIHdvcmtlcklkKTsJLy9ERUJVRw0KICAJCXJldHVybjsNCiAgCX1lbHNlIHsNCiAgCQl3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IHRydWU7DQogIAl9DQogIAlkb0RlYnVnID0gb3B0aW9ucy5zZXR1cC5kb0RlYnVnIHx8IGZhbHNlOw0KICAJcmV0dXJuQXVkaW9GaWxlID0gb3B0aW9ucy5zZXR1cC5yZXR1cm5BdWRpb0ZpbGUgfHwgZmFsc2U7DQoNCiAgCS8vcmVjb3JkZXINCiAgCWlucHV0U2FtcGxlUmF0ZSA9IG9wdGlvbnMuc2V0dXAuaW5wdXRTYW1wbGVSYXRlIHx8IG9wdGlvbnMuc2V0dXAuY3R4SW5mby50YXJnZXRTYW1wbGVSYXRlIHx8IG9wdGlvbnMuc2V0dXAuY3R4SW5mby5zYW1wbGVSYXRlOw0KICAJaW5wdXRTYW1wbGVTaXplID0gb3B0aW9ucy5zZXR1cC5pbnB1dFNhbXBsZVNpemUgfHwgNTEyOw0KICAJY2hhbm5lbENvdW50ID0gMTsJLy9vcHRpb25zLnNldHVwLmNoYW5uZWxDb3VudCB8fCAxOwkJLy9UT0RPOiBvbmx5IE1PTk8gYXRtDQogIAlsb29rYmFja0J1ZmZlck1zID0gKG9wdGlvbnMuc2V0dXAubG9va2JhY2tCdWZmZXJNcyAhPSB1bmRlZmluZWQpPyBvcHRpb25zLnNldHVwLmxvb2tiYWNrQnVmZmVyTXMgOiAwOw0KICAJaXNGbG9hdDMySW5wdXQgPSAob3B0aW9ucy5zZXR1cC5pc0Zsb2F0MzIgIT0gdW5kZWZpbmVkKT8gb3B0aW9ucy5zZXR1cC5pc0Zsb2F0MzIgOiBmYWxzZTsNCiAgCQ0KICAJaWYgKG9wdGlvbnMuc2V0dXAucmVjb3JkQnVmZmVyTGltaXRNcyAhPSB1bmRlZmluZWQpew0KICAJCXJlY29yZEJ1ZmZlck1heE4gPSAoaW5wdXRTYW1wbGVSYXRlICogb3B0aW9ucy5zZXR1cC5yZWNvcmRCdWZmZXJMaW1pdE1zLzEwMDApIC8gaW5wdXRTYW1wbGVTaXplOw0KICAJfWVsc2UgaWYgKG9wdGlvbnMuc2V0dXAucmVjb3JkQnVmZmVyTGltaXRLYiAhPSB1bmRlZmluZWQpew0KICAJCXJlY29yZEJ1ZmZlck1heE4gPSAob3B0aW9ucy5zZXR1cC5yZWNvcmRCdWZmZXJMaW1pdEtiICogMTAyNCkgLyAoMiAqIGlucHV0U2FtcGxlU2l6ZSk7DQogIAl9ZWxzZSB7DQogIAkJcmVjb3JkQnVmZmVyTWF4TiA9IDUyNDI4ODAgLyAoMiAqIGlucHV0U2FtcGxlU2l6ZSk7CS8vbWF4IDVNQiA9ICg1MjQyODgwW2J5dGVzXS8oYnl0ZXNQZXJTYW1wbGUgKiBzYW1wbGVTaXplKSkNCiAgCX0NCiAgCXJlY29yZEJ1ZmZlck1heE4gPSBNYXRoLmNlaWwocmVjb3JkQnVmZmVyTWF4Tik7DQogIAlpZiAocmVjb3JkQnVmZmVyTWF4TiA8IDApIHJlY29yZEJ1ZmZlck1heE4gPSAwOw0KDQogIAkvL2VuZCBvbiBmaXJzdCBmaW5hbCByZXN1bHQ/IC0gTk9URTogdGhpcyB3b3JrcyBhIGJpdCBkaWZmZXJlbnQgdGhhbiBXZWJTcGVlY2ggImNvbnRpbnVvdXMiDQogIAljb250aW51b3VzID0gKG9wdGlvbnMuc2V0dXAuY29udGludW91cyAhPSB1bmRlZmluZWQpPyBvcHRpb25zLnNldHVwLmNvbnRpbnVvdXMgOiBmYWxzZTsNCiAgCS8vaW50ZXJpbVJlc3VsdHMgKHVudXNlZD8pDQoNCiAgCS8vc2VydmVyDQogIAlzb2NrZXRVcmwgPSBvcHRpb25zLnNldHVwLnNvY2tldFVybCB8fCBvcHRpb25zLnNldHVwLnNlcnZlclVybCB8fCAiaHR0cDovL2xvY2FsaG9zdDoyMDc0MSI7DQogIAljbGllbnRJZCA9IG9wdGlvbnMuc2V0dXAuY2xpZW50SWQgfHwgImFueSI7DQogIAlhY2Nlc3NUb2tlbiA9IG9wdGlvbnMuc2V0dXAuYWNjZXNzVG9rZW4gfHwgInRlc3QxMjM0IjsNCiAgCW1lc3NhZ2VGb3JtYXQgPSBvcHRpb25zLnNldHVwLm1lc3NhZ2VGb3JtYXQgfHwgImRlZmF1bHQiOw0KICAJaWYgKHNvY2tldFVybCA9PSAiZGVidWciKXsNCiAgCQllbmFibGVEcnlSdW4gPSB0cnVlOw0KICAJCXJldHVybkF1ZGlvRmlsZSA9IHRydWU7DQogIAl9ZWxzZSB7DQogIAkJdmFyIGVuZ2luZU9wdGlvbnMgPSBvcHRpb25zLnNldHVwLmVuZ2luZU9wdGlvbnMgfHwge307CS8vYWxsIG9wdGlvbnMgKGNvbW1vbiBhbmQgZW5naW5lIHNwZWNpZmljKQ0KICAJCS8vY29tbW9uIG9wdGlvbiBzaG9ydGN1dHMgKG92ZXJ3cml0ZXMgZW5naW5lT3B0aW9ucyAtIHVzdWFsbHkgc3VwcG9ydGVkIGJ5IGFsbCBlbmdpbmVzKToNCiAgCQllbmdpbmVPcHRpb25zLnNhbXBsZXJhdGUgPSBpbnB1dFNhbXBsZVJhdGU7DQogIAkJZW5naW5lT3B0aW9ucy5jb250aW51b3VzID0gY29udGludW91czsNCiAgCQlpZiAob3B0aW9ucy5zZXR1cC5sYW5ndWFnZSkgZW5naW5lT3B0aW9ucy5sYW5ndWFnZSA9IG9wdGlvbnMuc2V0dXAubGFuZ3VhZ2U7CS8vZS5nLjogImRlLURFIg0KICAJCWlmIChvcHRpb25zLnNldHVwLnRhc2spIGVuZ2luZU9wdGlvbnMudGFzayA9IG9wdGlvbnMuc2V0dXAudGFzazsJCQkJLy9lLmcuOiAiY29udmVyc2F0aW9uIg0KICAJCWlmIChvcHRpb25zLnNldHVwLm1vZGVsKSBlbmdpbmVPcHRpb25zLm1vZGVsID0gb3B0aW9ucy5zZXR1cC5tb2RlbDsJCQkJLy9lLmcuOiAidm9zay1tb2RlbC1zbWFsbC1kZSINCiAgCQlpZiAob3B0aW9ucy5zZXR1cC5vcHRpbWl6ZUZpbmFsUmVzdWx0ICE9IHVuZGVmaW5lZCkgZW5naW5lT3B0aW9ucy5vcHRpbWl6ZUZpbmFsUmVzdWx0ID0gb3B0aW9ucy5zZXR1cC5vcHRpbWl6ZUZpbmFsUmVzdWx0Ow0KICAJCWVuZ2luZU9wdGlvbnMuZG9EZWJ1ZyA9IGRvRGVidWc7DQogIAkJLy9zcGVjaWFsIG9wdGlvbnMgKGUuZy4gZm9yIFZvc2spOg0KICAJCS8qDQogIAkJYWx0ZXJuYXRpdmVzOiAxLA0KICAJCXBocmFzZXM6IFtdLA0KICAJCXNwZWFrZXI6IGZhbHNlLA0KICAJCXdvcmRzOiBmYWxzZQ0KICAJCSovDQogIAkJLy9jb25zb2xlLmVycm9yKCJlbmdpbmVPcHRpb25zIiwgZW5naW5lT3B0aW9ucyk7CQkvL0RFQlVHDQogIAkJdmFyIHNlcnZlck9wdGlvbnMgPSB7DQogIAkJCW9uT3BlbjogZnVuY3Rpb24oKXsNCiAgCQkJCWlmIChkb0RlYnVnKSBjb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBERUJVRyAtIENPTk5FQ1RJT04gT1BFTiIpOw0KICAJCQkJc2VuZENvbm5lY3Rpb25FdmVudCgib3BlbiIpOw0KICAJCQl9LA0KICAJCQlvblJlYWR5OiBmdW5jdGlvbihhY3RpdmVPcHRpb25zKXsNCiAgCQkJCWlmIChkb0RlYnVnKSBjb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBERUJVRyAtIENPTk5FQ1RJT04gUkVBRFkiLCBhY3RpdmVPcHRpb25zKTsNCiAgCQkJCXNlbmRDb25uZWN0aW9uRXZlbnQoInJlYWR5IiwgYWN0aXZlT3B0aW9ucyk7DQogIAkJCQkvL21ha2Ugc3VyZSBzdHJlYW0gc3RhcnRzIG9yIGNvbnRpbnVlcw0KICAJCQkJc3RhcnRPckNvbnRpbnVlU3RyZWFtKCk7DQogIAkJCX0sDQogIAkJCW9uQ2xvc2U6IGZ1bmN0aW9uKCl7DQogIAkJCQlpZiAoZG9EZWJ1ZykgY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gREVCVUcgLSBDT05ORUNUSU9OIENMT1NFRCIpOw0KICAJCQkJc2VuZENvbm5lY3Rpb25FdmVudCgiY2xvc2VkIik7DQogIAkJCX0sDQogIAkJCW9uUmVzdWx0OiBmdW5jdGlvbihyZXMpew0KICAJCQkJaWYgKGRvRGVidWcpIGNvbnNvbGUuZXJyb3IoIlN0dFNvY2tldFdvcmtlciAtIERFQlVHIC0gQ09OTkVDVElPTiBSRVNVTFQiLCByZXMpOw0KICAJCQkJaWYgKG1lc3NhZ2VGb3JtYXQgPT0gIndlYlNwZWVjaEFwaSIpew0KICAJCQkJCXNlbmRXZWJTcGVlY2hDb21wYXRpYmxlUmVjb2duaXRpb25SZXN1bHQocmVzLmlzRmluYWwsIHJlcy50cmFuc2NyaXB0KTsNCiAgCQkJCX1lbHNlIHsNCiAgCQkJCQlzZW5kRGVmYXVsdFJlY29nbml0aW9uUmVzdWx0KHJlcyk7DQogIAkJCQl9DQogIAkJCQkvL2lmIHJlc3VsdCBpcyBmaW5hbCBhbmQgZ2F0ZSBpcyBjbG9zZWQgLT4gY2xvc2UgY29ubmVjdGlvbg0KICAJCQkJaWYgKHJlcy5pc0ZpbmFsICYmICFnYXRlSXNPcGVuICYmIHN0dFNlcnZlciAmJiBzdHRTZXJ2ZXIuY29ubmVjdGlvbklzT3Blbil7DQogIAkJCQkJc3R0U2VydmVyLmNsb3NlQ29ubmVjdGlvbigpOw0KICAJCQkJfQ0KICAJCQl9LA0KICAJCQlvbkVycm9yOiBmdW5jdGlvbihlcnIpeyANCiAgCQkJCWlmICghZXJyKSBlcnIgPSB7bmFtZTogIlVua25vd25FcnJvciIsIG1lc3NhZ2U6ICJVbmtub3duIGVycm9yIn07DQogIAkJCQljb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBDT05ORUNUSU9OIEVSUk9SIiwgZXJyKTsNCiAgCQkJCWlmIChtZXNzYWdlRm9ybWF0ID09ICJ3ZWJTcGVlY2hBcGkiKXsNCiAgCQkJCQl2YXIgcmVhc29uID0gInVua25vd24iOw0KICAJCQkJCWlmIChlcnIubmFtZSA9PSAiU29ja2V0Q29ubmVjdGlvbkVycm9yIil7DQogIAkJCQkJCXJlYXNvbiA9ICJuZXR3b3JrIjsNCiAgCQkJCQl9ZWxzZSBpZiAoZXJyLm5hbWUgPT0gIlVuYXV0aG9yaXplZCIpew0KICAJCQkJCQkvL3JlYXNvbiA9ICJub3QtYWxsb3dlZCI7CS8vTk9URTogY3VycmVudGx5IG1pc3Rha2VuIGZvciBtaWNyb3Bob25lIHBlcm1pc3Npb24gZXJyb3INCiAgCQkJCQkJcmVhc29uID0gInNlcnZpY2Utbm90LWFsbG93ZWQiOw0KICAJCQkJCX0NCiAgCQkJCQlzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZUVycm9yKHJlYXNvbiwgZXJyLm1lc3NhZ2UgfHwgZXJyLm5hbWUgfHwgIiIpOw0KICAJCQkJfWVsc2Ugew0KICAJCQkJCXNlbmREZWZhdWx0RXJyb3JFdmVudChlcnIpOw0KICAJCQkJfQ0KICAJCQkJLy9tYWtlIHN1cmUgc3RyZWFtIHN0b3BzDQogIAkJCQlpZiAoZ2F0ZUlzT3Blbil7DQogIAkJCQkJZ2F0ZUNvbnRyb2woZmFsc2UsIHt9LCB0cnVlKTsNCiAgCQkJCX0NCiAgCQkJfQ0KICAJCX07DQogIAkJc3R0U2VydmVyID0gbmV3IFNlcGlhU3R0U29ja2V0Q2xpZW50KHNvY2tldFVybCwgY2xpZW50SWQsIGFjY2Vzc1Rva2VuLCBlbmdpbmVPcHRpb25zLCBzZXJ2ZXJPcHRpb25zKTsNCiAgCX0NCiAgCQ0KICAJaW5pdCgpOw0KICAgICAgCQ0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiAxLA0KICAJCW1vZHVsZUluZm86IHsNCiAgCQkJbW9kdWxlSWQ6IHdvcmtlcklkLA0KICAJCQlpbnB1dFNhbXBsZVJhdGU6IGlucHV0U2FtcGxlUmF0ZSwNCiAgCQkJaW5wdXRTYW1wbGVTaXplOiBpbnB1dFNhbXBsZVNpemUsDQogIAkJCWlucHV0SXNGbG9hdDMyOiBpc0Zsb2F0MzJJbnB1dCwNCiAgCQkJY2hhbm5lbENvdW50OiBjaGFubmVsQ291bnQsDQogIAkJCWxvb2tiYWNrQnVmZmVyU2l6ZUtiOiBNYXRoLmNlaWwoKF9sb29rYmFja0J1ZmZlclNpemUgKiAyKS8xMDI0KSwJLy8xIHNhbXBsZSA9IDIgYnl0ZXMNCiAgCQkJbG9va2JhY2tMaW1pdE1zOiBsb29rYmFja0J1ZmZlck1zLA0KICAJCQlyZWNvcmRMaW1pdE1zOiBNYXRoLmNlaWwoKHJlY29yZEJ1ZmZlck1heE4gKiBpbnB1dFNhbXBsZVNpemUgKiAxMDAwKS9pbnB1dFNhbXBsZVJhdGUpLA0KICAJCQlzdHRTZXJ2ZXJVcmw6IHNvY2tldFVybCwNCiAgCQkJc3R0U2VydmVyT3B0aW9uczogKHN0dFNlcnZlcj8gc3R0U2VydmVyLmFjdGl2ZU9wdGlvbnMgOiB7fSkNCiAgCQl9DQogIAl9KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHByb2Nlc3MoZGF0YSl7DQogIAkvL2V4cGVjdGVkOiBkYXRhLnNhbXBsZXMsIGRhdGEuc2FtcGxlUmF0ZSwgZGF0YS50YXJnZXRTYW1wbGVSYXRlLCBkYXRhLmNoYW5uZWxzLCBkYXRhLnR5cGUNCiAgCS8vVE9ETzogY2hlY2sgcHJvY2VzcyB2YWx1ZXMgYWdhaW5zdCBjb25zdHJ1Y3RvciB2YWx1ZXMgKHNhbXBsZVNpemUgZXRjLikNCiAgCWlmIChkYXRhICYmIGRhdGEuc2FtcGxlcyl7DQogIAkJaWYgKF9pc0ZpcnN0VmFsaWRQcm9jZXNzKXsNCiAgCQkJLy9jb25zb2xlLmVycm9yKCJkYXRhIGluZm8iLCBkYXRhKTsJCS8vREVCVUcNCiAgCQkJX2lzRmlyc3RWYWxpZFByb2Nlc3MgPSBmYWxzZTsNCiAgCQkJLy9jaGVjazogaW5wdXRTYW1wbGVSYXRlLCBpbnB1dFNhbXBsZVNpemUsIGNoYW5uZWxDb3VudCwgZmxvYXQzMg0KICAJCQlpZiAoZGF0YS5zYW1wbGVSYXRlICE9IGlucHV0U2FtcGxlUmF0ZSl7DQogIAkJCQl2YXIgbXNnID0gIlNhbXBsZS1yYXRlIG1pc21hdGNoISBTaG91bGQgYmUgJyIgKyBpbnB1dFNhbXBsZVJhdGUgKyAiJyBpcyAnIiArIGRhdGEuc2FtcGxlUmF0ZSArICInIjsNCiAgCQkJCWNvbnNvbGUuZXJyb3IoIkF1ZGlvIFdvcmtlciBzYW1wbGUtcmF0ZSBleGNlcHRpb24gLSBNc2cuOiAiICsgbXNnKTsNCiAgCQkJCXRocm93IEpTT04uc3RyaW5naWZ5KG5ldyBTYW1wbGVSYXRlRXhjZXB0aW9uKG1zZykpOwkJCS8vTk9URTogdGhpcyBuZWVkcyB0byBiZSBhIHN0cmluZyB0byBzaG93IHVwIGluIHdvcmtlci5vbmVycm9yIHByb3Blcmx5IDotLw0KICAJCQl9DQogIAkJCXZhciBpbnB1dEFycmF5VHlwZSA9IGRhdGEudHlwZSB8fCBkYXRhLnNhbXBsZXNbMF0uY29uc3RydWN0b3IubmFtZTsNCiAgCQkJdmFyIGlzRmxvYXQzMiA9IChpbnB1dEFycmF5VHlwZS5pbmRleE9mKCJGbG9hdDMyIikgPj0gMCk7DQogIAkJCWlmIChpc0Zsb2F0MzIgIT0gaXNGbG9hdDMySW5wdXQpew0KICAJCQkJdmFyIG1zZyA9ICJBcnJheSB0eXBlIG1pc21hdGNoISBJbnB1dCBzYW1wbGVzIGFyZSBvZiB0eXBlICciICsgaW5wdXRBcnJheVR5cGUgKyAiJyBidXQgZXhwZWN0ZWQ6ICIgKyAoaXNGbG9hdDMySW5wdXQ/ICJGbG9hdDMyIiA6ICJJbnQxNiIpOw0KICAJCQkJY29uc29sZS5lcnJvcigiQXVkaW8gV29ya2VyIHR5cGUgZXhjZXB0aW9uIC0gTXNnLjogIiArIG1zZyk7DQogIAkJCQl0aHJvdyBKU09OLnN0cmluZ2lmeShuZXcgQXJyYXlUeXBlRXhjZXB0aW9uKG1zZykpOwkJCS8vTk9URTogdGhpcyBuZWVkcyB0byBiZSBhIHN0cmluZyB0byBzaG93IHVwIGluIHdvcmtlci5vbmVycm9yIHByb3Blcmx5IDotLw0KICAJCQl9DQogIAkJfQ0KICAJCWlmIChnYXRlSXNPcGVuKXsNCiAgCQkJYnVpbGRQY21DaHVua3MoZGF0YSk7DQogIAkJCQ0KICAJCX1lbHNlIGlmIChsb29rYmFja0J1ZmZlck1zICYmICFsb29rYmFja0J1ZmZlcklzQmxvY2tlZCl7DQogIAkJCS8vZG8gdGhpcyBvbmx5IHVudGlsIGdhdGUgd2FzIG9wZW5lZCAuLiB0aGVuIHdhaXQgZm9yIGJ1ZmZlciBleHBvcnQvY2xlYXINCiAgCQkJX2xvb2tiYWNrUmluZ0J1ZmZlci5wdXNoKGRhdGEuc2FtcGxlcyk7DQogIAkJfQ0KICAJfQ0KICB9DQoNCiAgZnVuY3Rpb24gYnVpbGRQY21DaHVua3MoZGF0YSl7DQogIAkvL2luZGV4IDANCiAgCWlmIChyZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoID09IDApew0KICAJCS8vMCAtLSBidWlsZCBoZWFkZXINCiAgCQlyZWNvcmRlZEJ1ZmZlcnMucHVzaChnZXRIZWFkZXJGb3JXQVYodW5kZWZpbmVkLCBpbnB1dFNhbXBsZVJhdGUsIGNoYW5uZWxDb3VudCkpOw0KICAJCS8vMSAtLSBhZGQgbG9va2JhY2sgc2FtcGxlcyAtLSBUT0RPOiB0ZXN0IQ0KICAJCWlmIChfbG9va2JhY2tSaW5nQnVmZmVyICYmIF9sb29rYmFja1JpbmdCdWZmZXIuZnJhbWVzQXZhaWxhYmxlKXsNCiAgCQkJLy9wdWxsIGFsbCBsb29rYmFjayBzYW1wbGVzDQogIAkJCXZhciBsb29rYmFja1NhbXBsZXM7DQogIAkJCWlmIChpc0Zsb2F0MzJJbnB1dCl7DQogIAkJCQlsb29rYmFja1NhbXBsZXMgPSBbbmV3IEZsb2F0MzJBcnJheShfbG9va2JhY2tSaW5nQnVmZmVyLmZyYW1lc0F2YWlsYWJsZSldOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlsb29rYmFja1NhbXBsZXMgPSBbbmV3IEludDE2QXJyYXkoX2xvb2tiYWNrUmluZ0J1ZmZlci5mcmFtZXNBdmFpbGFibGUpXTsNCiAgCQkJfQ0KICAJCQlfbG9va2JhY2tSaW5nQnVmZmVyLnB1bGwobG9va2JhY2tTYW1wbGVzKTsNCiAgCQkJLy9lbmNvZGUgYW5kIGFkZA0KICAJCQlyZWNvcmRlZEJ1ZmZlcnMucHVzaChlbmNvZGVXQVYodW5kZWZpbmVkLCBsb29rYmFja1NhbXBsZXNbMF0sIGlucHV0U2FtcGxlUmF0ZSwgY2hhbm5lbENvdW50LCBpc0Zsb2F0MzJJbnB1dCkpOw0KICAJCX0NCiAgCQlpZiAoZG9EZWJ1ZykgY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gREVCVUcgLSBIZWFkZXIgYW5kIExvb2tiYWNrIEJ1ZmZlciAob3B0aW9uYWwpIiwgcmVjb3JkZWRCdWZmZXJzKTsNCiAgCX0NCiAgCWlmIChkYXRhKXsNCiAgCQkvL1RPRE86IHRoaXMgd2lsbCBhbHdheXMgYmUgb25lIGNoYW5uZWwgT05MWSBzaW5jZSB0aGUgc2lnbmFsIGlzIGludGVybGVhdmVkDQogIAkJcmVjb3JkZWRCdWZmZXJzLnB1c2goZW5jb2RlV0FWKHVuZGVmaW5lZCwgZGF0YS5zYW1wbGVzWzBdLCBpbnB1dFNhbXBsZVJhdGUsIGNoYW5uZWxDb3VudCwgaXNGbG9hdDMySW5wdXQpKTsNCiAgCX0NCiAgCS8vLS0tLS0tLS0tLSBEUlktUlVOIFRFU1Q6IGZha2UgcGFydGlhbCByZXN1bHQgLS0tLS0tLS0tLQ0KICAJaWYgKGVuYWJsZURyeVJ1bil7DQogIAkJaWYgKHJlY29yZGVkQnVmZmVycy5sZW5ndGggPT0gTWF0aC5jZWlsKHJlY29yZEJ1ZmZlck1heE4vNCkpew0KICAJCQlpZiAoZG9EZWJ1ZykgY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gREVCVUcgLSBSZWFjaGVkIGEgcXVhcnRlciBvZiBtYXguIHRpbWUiLCByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoKTsNCiAgCQkJaWYgKG1lc3NhZ2VGb3JtYXQgPT0gIndlYlNwZWVjaEFwaSIpew0KICAJCQkJc2VuZFdlYlNwZWVjaENvbXBhdGlibGVSZWNvZ25pdGlvblJlc3VsdChmYWxzZSwgIkVuZCBvZiAuLi4iKTsNCiAgCQkJfWVsc2Ugew0KICAJCQkJc2VuZERlZmF1bHRSZWNvZ25pdGlvblJlc3VsdCh7InR5cGUiOiJyZXN1bHQiLCJtc2dfaWQiOkRhdGUubm93KCksImNvZGUiOjIwMCwidHJhbnNjcmlwdCI6IkVuZCBvZiAuLi4iLCJpc0ZpbmFsIjpmYWxzZX0pOw0KICAJCQl9DQogIAkJfQ0KICAJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIAl9ZWxzZSBpZiAoc3R0U2VydmVyICYmIHN0dFNlcnZlci5jb25uZWN0aW9uSXNPcGVuICYmIHN0dFNlcnZlci5pc1JlYWR5Rm9yU3RyZWFtKXsNCiAgCQkvL3NlbmQgYnVmZmVyDQogIAkJc3RhcnRPckNvbnRpbnVlU3RyZWFtKCk7DQogIAl9DQogIAkvL21heCBsZW5ndGgNCiAgCWlmIChyZWNvcmRCdWZmZXJNYXhOICYmIHJlY29yZGVkQnVmZmVycy5sZW5ndGggPj0gcmVjb3JkQnVmZmVyTWF4Til7DQogIAkJbWF4TGVuZ3RoUmVhY2hlZCgpOw0KICAJfQ0KICAJaWYgKCFsb29rYmFja0J1ZmZlcklzQmxvY2tlZCkgbG9va2JhY2tCdWZmZXJJc0Jsb2NrZWQgPSB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gc3RhcnRPckNvbnRpbnVlU3RyZWFtKCl7DQogIAkvL2J1ZmZlciBoYXMgZGF0YSBhbmQgbm90aGluZyBoYXMgYmVlbiBzZW50IHlldA0KICAJaWYgKCFfc2VudEJ1ZmZlcnMgJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCl7DQogIAkJLy9zZW5kIGFsbCBhdCBvbmNlDQogIAkJdmFyIGRhdGEgPSBuZXcgQmxvYihyZWNvcmRlZEJ1ZmZlcnMpOw0KICAJCV9zZW50QnVmZmVycyA9IHJlY29yZGVkQnVmZmVycy5sZW5ndGg7DQogIAkJc2VuZEJ5dGVzKGRhdGEpOw0KICAJDQogIAkvL2J1ZmZlciBoYXMgZGF0YSBhbmQgc29tZSBoYXMgYmVlbiBzZW50IGFscmVhZHkNCiAgCX1lbHNlIGlmIChfc2VudEJ1ZmZlcnMgJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCl7DQogIAkJdmFyIG5vcm1hbGl6ZWRMZW5ndGggPSByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoICsgX3NoaWZ0ZWRCdWZmZXJzOyAvL3Rha2Ugc2hpZnRlZCBkYXRhIGludG8gYWNjb3VudA0KICAJCWlmIChfc2VudEJ1ZmZlcnMgPT0gKG5vcm1hbGl6ZWRMZW5ndGggLSAxKSl7DQogIAkJCS8vc2VuZCBsYXN0DQogIAkJCXZhciBkYXRhID0gcmVjb3JkZWRCdWZmZXJzW3JlY29yZGVkQnVmZmVycy5sZW5ndGggLSAxXTsNCiAgCQkJX3NlbnRCdWZmZXJzKys7DQogIAkJCXNlbmRCeXRlcyhkYXRhKTsNCg0KICAJCX1lbHNlIGlmIChfc2VudEJ1ZmZlcnMgPCBub3JtYWxpemVkTGVuZ3RoKXsNCiAgCQkJLy9zZW5kIHJlc3QgYXQgb25jZQ0KICAJCQl2YXIgcmVzdE4gPSBub3JtYWxpemVkTGVuZ3RoIC0gX3NlbnRCdWZmZXJzOw0KICAJCQl2YXIgZGF0YSA9IG5ldyBCbG9iKHJlY29yZGVkQnVmZmVycy5zbGljZSgtMSAqIHJlc3ROKSk7DQogIAkJCV9zZW50QnVmZmVycyArPSByZXN0TjsNCiAgCQkJc2VuZEJ5dGVzKGRhdGEpOw0KICAJCQ0KICAJCX1lbHNlOw0KICAJLy9ubyBkYXRhIHlldA0KICAJfWVsc2U7DQogIAkvL25vIGJ5dGVzIGxlZnQgYW5kIHN0cmVhbSBlbmRlZD8NCiAgCWlmIChfZ2F0ZUNsb3NlVFMpew0KICAJCXZhciBjbG9zZWREdWVUb0J1ZmZlckxpbWl0ID0gY2hlY2tJZkJ1ZmZlckxpbWl0V2FzUmVhY2hlZCgpOw0KICAJCXJlcXVlc3RGaW5hbFJlc3VsdChjbG9zZWREdWVUb0J1ZmZlckxpbWl0KTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiBzZW5kQnl0ZXMoZGF0YSl7DQogIAlzdHRTZXJ2ZXIuc2VuZEJ5dGVzKGRhdGEpOw0KICB9DQoNCiAgZnVuY3Rpb24gcmVxdWVzdEZpbmFsUmVzdWx0KGNsb3NlZER1ZVRvQnVmZmVyTGltaXQpew0KICAJLy9jbG9zZSBpbnB1dCBhbmQgcmVxdWVzdCBmaW5hbCByZXN1bHQNCiAgCXZhciBieXRlTGVuZ3RoID0gMDsNCiAgCXJlY29yZGVkQnVmZmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRhKXsNCiAgCQlieXRlTGVuZ3RoICs9IHRhLmJ5dGVMZW5ndGg7DQogIAl9KTsNCiAgCXN0dFNlcnZlci5zZW5kQXVkaW9FbmQoYnl0ZUxlbmd0aCwgY2xvc2VkRHVlVG9CdWZmZXJMaW1pdCk7DQogIH0NCg0KICBmdW5jdGlvbiBjaGVja0lmQnVmZmVyTGltaXRXYXNSZWFjaGVkKCl7DQogIAl2YXIgcmVhY2hlZEJ1ZmZlckxpbWl0ID0gKCFjb250aW51b3VzICYmIHJlY29yZGVkQnVmZmVycyAmJiByZWNvcmRCdWZmZXJNYXhOIA0KICAJCSYmIHJlY29yZGVkQnVmZmVycy5sZW5ndGggJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCA+PSByZWNvcmRCdWZmZXJNYXhOKTsNCiAgCXJldHVybiByZWFjaGVkQnVmZmVyTGltaXQ7DQogIH0NCg0KICAvL3JlYWNoZWQgbWF4IHJlY29yZGluZyBsZW5ndGgNCiAgZnVuY3Rpb24gbWF4TGVuZ3RoUmVhY2hlZCgpew0KICAJaWYgKGNvbnRpbnVvdXMpew0KICAJCS8vZHJvcCBvbGQgYnVmZmVyDQogIAkJdmFyIHNoaWZ0ID0gKHJlY29yZGVkQnVmZmVycy5sZW5ndGggLSByZWNvcmRCdWZmZXJNYXhOKTsNCiAgCQlfc2hpZnRlZEJ1ZmZlcnMgKz0gc2hpZnQ7DQogIAkJcmVjb3JkZWRCdWZmZXJzLnNwbGljZSgwLCBzaGlmdCk7DQogIAl9ZWxzZSB7DQogIAkJLy9jbG9zZQ0KICAJCWlmIChnYXRlSXNPcGVuKXsNCiAgCQkJZ2F0ZUNvbnRyb2woZmFsc2UpOw0KICAJCX0NCiAgCX0NCiAgCS8vVE9ETzogZG8gbW9yZSAuLi4gPw0KICB9DQoNCiAgLy9zZW5kIHJlc3VsdCBtZXNzYWdlIChwYXJ0aWFsIG9yIGZpbmFsKQ0KICBmdW5jdGlvbiBzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZVJlY29nbml0aW9uUmVzdWx0KGlzRmluYWwsIHRyYW5zY3JpcHQpew0KICAJaWYgKGlzRmluYWwgJiYgIXRyYW5zY3JpcHQpew0KICAJCS8vdGhpcyBpcyBhY3R1YWxseSBhICdub21hdGNoJy8nbm8tc3BlZWNoJyBlcnJvciAobm8tc3BlZWNoIHVzdWFsbHkgZmFpbHMgbW9yZSBnZW50bHkpDQogIAkJc2VuZFdlYlNwZWVjaENvbXBhdGlibGVFcnJvcigibm8tc3BlZWNoIiwgIkZpbmFsIHJlc3VsdCB3YXMgZW1wdHkiKTsNCiAgCX1lbHNlIHsNCiAgCQlwb3N0TWVzc2FnZSh7DQogIAkJCXJlY29nbml0aW9uRXZlbnQ6IHsNCiAgCQkJCXR5cGU6ICJyZXN1bHQiLA0KICAJCQkJcmVzdWx0SW5kZXg6IDAsDQogIAkJCQlyZXN1bHRzOiBbew0KICAJCQkJCWlzRmluYWw6IGlzRmluYWwsDQogIAkJCQkJIjAiOiB7DQogIAkJCQkJCXRyYW5zY3JpcHQ6IHRyYW5zY3JpcHQNCiAgCQkJCQl9DQogIAkJCQl9XSwNCiAgCQkJCXRpbWVTdGFtcDogRGF0ZS5ub3coKQ0KICAJCQl9LA0KICAJCQlldmVudEZvcm1hdDogIndlYlNwZWVjaEFwaSINCiAgCQl9KTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiBzZW5kRGVmYXVsdFJlY29nbml0aW9uUmVzdWx0KGV2ZW50KXsNCiAgCWlmIChldmVudCAmJiAhZXZlbnQudHlwZSkgZXZlbnQudHlwZSA9ICJyZXN1bHQiOw0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCXJlY29nbml0aW9uRXZlbnQ6IGV2ZW50LA0KICAJCWV2ZW50Rm9ybWF0OiAiZGVmYXVsdCINCiAgCX0pOw0KICB9DQogIGZ1bmN0aW9uIHNlbmRDb25uZWN0aW9uRXZlbnQodHlwZSwgZGF0YSl7DQogIAlwb3N0TWVzc2FnZSh7DQogIAkJY29ubmVjdGlvbkV2ZW50OiB7DQogIAkJCXR5cGU6IHR5cGUsDQogIAkJCWRhdGE6IGRhdGENCiAgCQl9DQogIAl9KTsNCiAgfQ0KICAvL3NlbmQgZXJyb3IgbWVzc2FnZQ0KICBmdW5jdGlvbiBzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZUVycm9yKGVycm9yTmFtZSwgZXJyb3JNZXNzYWdlKXsNCiAgCXZhciBldmVudE5hbWUgPSAiZXJyb3IiOwkvL3Bvc3NpYmxlIGFzIHdlbGw6ICJub21hdGNoIg0KICAJLypzdXBwb3J0ZWQgZXJyb3JzOg0KICAJCSJuZXR3b3JrIiAoMSwgMjogdGltZW91dCwgODogYnVzeSwgMTA6IHJhdGUtbGltaXQpDQogIAkJImF1ZGlvLWNhcHR1cmUiICgzLCBoYXBwZW5zIGJlZm9yZSB3b3JrZXIpDQogIAkJInVua25vd24iICg0LCA1KQ0KICAJCSJuby1zcGVlY2giICg2KQ0KICAJCSJub21hdGNoIiAoNywgdXNlIGV2ZW50TmFtZSkNCiAgCQkiYWJvcnRlZCIgKD8pDQogIAkJIm5vdC1hbGxvd2VkIiAoOSkgLyAic2VydmljZS1ub3QtYWxsb3dlZCINCiAgCQkiYmFkLWdyYW1tYXIiICg/KQ0KICAJCSJsYW5ndWFnZS1ub3Qtc3VwcG9ydGVkIiAoMTIsIDEzKQ0KICAJKi8NCiAgCXBvc3RNZXNzYWdlKHsNCiAgCQlyZWNvZ25pdGlvbkV2ZW50OiB7DQogIAkJCXR5cGU6IGV2ZW50TmFtZSwNCiAgCQkJZXJyb3I6IGVycm9yTmFtZSwNCiAgCQkJbWVzc2FnZTogZXJyb3JNZXNzYWdlLA0KICAJCQl0aW1lU3RhbXA6IERhdGUubm93KCkNCiAgCQl9LA0KICAJCWV2ZW50Rm9ybWF0OiAid2ViU3BlZWNoQXBpIg0KICAJfSk7DQogIH0NCiAgZnVuY3Rpb24gc2VuZERlZmF1bHRFcnJvckV2ZW50KGVycm9yKXsNCiAgCWlmIChlcnJvciAmJiAhZXJyb3IudHlwZSkgZXJyb3IudHlwZSA9ICJlcnJvciI7DQogIAlwb3N0TWVzc2FnZSh7DQogIAkJcmVjb2duaXRpb25FdmVudDogZXJyb3IsDQogIAkJZXZlbnRGb3JtYXQ6ICJkZWZhdWx0Ig0KICAJfSk7DQogIH0NCg0KICAvL3NlbmQgd2F2ZSBmaWxlIGFzIGFycmF5IGJ1ZmZlciAoZGF0YSB2aWV3KQ0KICBmdW5jdGlvbiBzZW5kV2F2ZUZpbGVBcnJheUJ1ZmZlcih2aWV3KXsNCiAgCXBvc3RNZXNzYWdlKHsNCiAgCQltb2R1bGVSZXNwb25zZTogdHJ1ZSwJLy9za2lwIG1lc3NhZ2UgZm9yd2FyZGluZz8NCiAgCQlvdXRwdXQ6IHsNCiAgCQkJd2F2OiB2aWV3LA0KICAJCQlzYW1wbGVSYXRlOiBpbnB1dFNhbXBsZVJhdGUsDQogIAkJCXRvdGFsU2FtcGxlczogKCh2aWV3LmJ5dGVMZW5ndGggLSA0NCkvX2J5dGVzUGVyU2FtcGxlKSwNCiAgCQkJY2hhbm5lbHM6IGNoYW5uZWxDb3VudA0KICAJCX0NCiAgCX0pOw0KICB9DQoNCiAgZnVuY3Rpb24gaGFuZGxlRXZlbnQoZGF0YSl7DQogIAkvL1RPRE86IGFueXRoaW5nIHRvIGRvPw0KICB9DQoNCiAgZnVuY3Rpb24gc3RhcnQob3B0aW9ucyl7DQogICAgICAvL3dlIGRvIG5vdGhpbmcgYnV0IHdhaXQgZm9yIGRhdGEgb3IgZ2F0ZS1vcGVuIHNpZ25hbA0KICAJLy9OT1RFOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkDQogIH0NCiAgZnVuY3Rpb24gc3RvcChvcHRpb25zKXsNCiAgCS8vbWFrZSBzdXJlIHRoYXQgZ2F0ZSBpcyBjbG9zZWQgLi4uIFRPRE86IGFueXRoaW5nIGVsc2U/DQogIAlpZiAoZ2F0ZUlzT3Blbil7DQogIAkJZ2F0ZUNvbnRyb2woZmFsc2UpOw0KICAJfQ0KICAJLy9OT1RFIDE6IEluIHRoaXMgY2FzZSBhIHN0b3BwZWQgd29ya2VyIGNhbiBzdGlsbCBzZW5kIHBhcnRpYWwgb3IgZmluYWwgcmVzdWx0cy4NCiAgCS8vTk9URSAyOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkDQogIH0NCiAgZnVuY3Rpb24gcmVzZXQob3B0aW9ucyl7DQogIAkvL2NsZWFuIHVwIGNvbm5lY3Rpb24NCiAgCWlmIChzdHRTZXJ2ZXIgJiYgc3R0U2VydmVyLmNvbm5lY3Rpb25Jc09wZW4pew0KICAJCXN0dFNlcnZlci5jbG9zZUNvbm5lY3Rpb24oKTsNCiAgCQkvL05PVEU6IHdlIHRyeSB0byByZXVzZSB0aGlzIGluc3RhbmNlDQogIAl9DQogICAgICAvL2NsZWFuIHVwIHdvcmtlcg0KICAJaW5pdCgpOw0KICAJLy9UT0RPOiBhbnl0aGluZyBlbHNlPw0KICB9DQogIGZ1bmN0aW9uIHJlbGVhc2Uob3B0aW9ucyl7DQogIAkvL3RoaXMgaXMgZXhwZWN0ZWQgdG8gaGFwcGVuIGFmdGVyIGZpbmFsIHJlc3VsdCAob3IgYWJvcnQpIHNvOiBjbGVhbiB1cCBjb25uZWN0aW9uDQogIAlpZiAoc3R0U2VydmVyICYmIHN0dFNlcnZlci5jb25uZWN0aW9uSXNPcGVuKXsNCiAgCQlzdHRTZXJ2ZXIuY2xvc2VDb25uZWN0aW9uKCk7DQogIAl9DQogIAkvL2NsZWFuIHVwIHdvcmtlciBhbmQgY2xvc2UNCiAgCV9sb29rYmFja1JpbmdCdWZmZXIgPSBudWxsOw0KICAJcmVjb3JkZWRCdWZmZXJzID0gbnVsbDsNCiAgCV9zZW50QnVmZmVycyA9IHVuZGVmaW5lZDsNCiAgCV9zaGlmdGVkQnVmZmVycyA9IHVuZGVmaW5lZDsNCiAgCWdhdGVJc09wZW4gPSBmYWxzZTsNCiAgCV9nYXRlT3BlblRTID0gMDsNCiAgCV9nYXRlQ2xvc2VUUyA9IDA7DQogIAkvL25vdGlmeSBwcm9jZXNzb3IgdGhhdCB3ZSBjYW4gdGVybWluYXRlIG5vdw0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiA5DQogIAl9KTsNCiAgfQ0KDQogIC8vLS0tIGhlbHBlcnMgLS0tDQoNCiAgZnVuY3Rpb24gU2FtcGxlUmF0ZUV4Y2VwdGlvbihtZXNzYWdlKSB7DQogIAl0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOw0KICAJdGhpcy5uYW1lID0gIlNhbXBsZVJhdGVFeGNlcHRpb24iOw0KICB9DQogIGZ1bmN0aW9uIEFycmF5VHlwZUV4Y2VwdGlvbihtZXNzYWdlKSB7DQogIAl0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOw0KICAJdGhpcy5uYW1lID0gIkFycmF5VHlwZUV4Y2VwdGlvbiI7DQogIH0NCg0KICAvL0dldCBoZWFkZXIgZm9yIHNhbXBsZXMgb3IgbWF4IHNpemUgLSBGb3JtYXQgZGVzY3JpcHRpb246IGh0dHA6Ly9zb3VuZGZpbGUuc2FwcC5vcmcvZG9jL1dhdmVGb3JtYXQvDQogIGZ1bmN0aW9uIGdldEhlYWRlckZvcldBVihzYW1wbGVzLCBzYW1wbGVSYXRlLCBudW1DaGFubmVscyl7DQogIAl2YXIgYml0RGVwdGggPSBlbmNvZGVyQml0RGVwdGg7DQogIAl2YXIgYnl0ZXNQZXJTYW1wbGUgPSBfYnl0ZXNQZXJTYW1wbGU7DQogIAl2YXIgdmlldyA9IHNhbXBsZXM/IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoNDQgKyBzYW1wbGVzLmxlbmd0aCAqIGJ5dGVzUGVyU2FtcGxlKSkgOiBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDQ0KSk7DQogIAkvL05PVEU6IHRoaXMgc2hvdWxkIGJlICJyZWFsIiBzaXplIGJ1dCBpZiB3ZSBkb24ndCBrbm93IHlldCB0YWtlIG1heCBzaXplIC0gbWF4IHNpemUgaW5jbHVkZXMgbG9va2JhY2sNCiAgCXZhciBzYW1wbGVTaXplID0gc2FtcGxlcz8gc2FtcGxlcy5sZW5ndGggOiAocmVjb3JkQnVmZmVyTWF4TiAqIGlucHV0U2FtcGxlU2l6ZSk7DQogIAkvL1JJRkYgaWRlbnRpZmllcg0KICAJd2F2V3JpdGVTdHJpbmcodmlldywgMCwgJ1JJRkYnKTsNCiAgCXZpZXcuc2V0VWludDMyKDQsIDM2ICsgKHNhbXBsZVNpemUgKiBudW1DaGFubmVscyAqIGJ5dGVzUGVyU2FtcGxlKSwgdHJ1ZSk7CS8vVE9ETzogd2FzIChzYW1wbGVzLmxlbmd0aCAqIDIpDQogIAl3YXZXcml0ZVN0cmluZyh2aWV3LCA4LCAnV0FWRScpOw0KICAJd2F2V3JpdGVTdHJpbmcodmlldywgMTIsICdmbXQgJyk7DQogIAl2aWV3LnNldFVpbnQzMigxNiwgMTYsIHRydWUpOwkvLzE2IGZvciBQQ00NCiAgCXZpZXcuc2V0VWludDE2KDIwLCAxLCB0cnVlKTsJLy8xIGZvciBQQ00NCiAgCXZpZXcuc2V0VWludDE2KDIyLCBudW1DaGFubmVscywgdHJ1ZSk7DQogIAl2aWV3LnNldFVpbnQzMigyNCwgc2FtcGxlUmF0ZSwgdHJ1ZSk7DQogIAl2aWV3LnNldFVpbnQzMigyOCwgc2FtcGxlUmF0ZSAqIGJ5dGVzUGVyU2FtcGxlICogbnVtQ2hhbm5lbHMsIHRydWUpOwkvL1RPRE86IHdhcyAoc2FtcGxlUmF0ZSAqIDQpDQogIAl2aWV3LnNldFVpbnQxNigzMiwgbnVtQ2hhbm5lbHMgKiBieXRlc1BlclNhbXBsZSwgdHJ1ZSk7DQogIAl2aWV3LnNldFVpbnQxNigzNCwgYml0RGVwdGgsIHRydWUpOw0KICAJd2F2V3JpdGVTdHJpbmcodmlldywgMzYsICdkYXRhJyk7DQogIAl2aWV3LnNldFVpbnQzMig0MCwgKHNhbXBsZVNpemUgKiBudW1DaGFubmVscyAqIGJ5dGVzUGVyU2FtcGxlKSwgdHJ1ZSk7DQogIAlyZXR1cm4gdmlldzsNCiAgfQ0KICBmdW5jdGlvbiBlbmNvZGVXQVYoaGVhZGVyVmlldywgc2FtcGxlcywgc2FtcGxlUmF0ZSwgbnVtQ2hhbm5lbHMsIGNvbnZlcnRGcm9tRmxvYXQzMil7DQogIAlpZiAoIXNhbXBsZXMgfHwgIXNhbXBsZVJhdGUgfHwgIW51bUNoYW5uZWxzKXsNCiAgCQljb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBlbmNvZGVXQVYgLSBNaXNzaW5nIHBhcmFtZXRlcnMiKTsNCiAgCQlyZXR1cm47DQogIAl9DQogIAl2YXIgdmlldzsNCiAgCXZhciBvZmZzZXQ7DQogIAlpZiAoIWhlYWRlclZpZXcpew0KICAJCXZpZXcgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKHNhbXBsZXMubGVuZ3RoICogMikpOw0KICAJCW9mZnNldCA9IDA7DQogIAl9ZWxzZSB7DQogIAkJdmlldyA9IGhlYWRlclZpZXc7DQogIAkJb2Zmc2V0ID0gNDQ7DQogIAl9DQogIAlpZiAoY29udmVydEZyb21GbG9hdDMyKXsNCiAgCQl3YXZGbG9hdFRvMTZCaXRQQ00odmlldywgb2Zmc2V0LCBzYW1wbGVzKTsNCiAgCX1lbHNlIHsNCiAgCQl3YXZXcml0ZTE2Qml0UENNKHZpZXcsIG9mZnNldCwgc2FtcGxlcyk7DQogIAl9DQogIAlyZXR1cm4gdmlldzsNCiAgfQ0KICBmdW5jdGlvbiB3YXZGbG9hdFRvMTZCaXRQQ00odmlldywgb2Zmc2V0LCBpbnB1dCkgew0KICAJZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKywgb2Zmc2V0ICs9IDIpIHsNCiAgCQlsZXQgcyA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbigxLCBpbnB1dFtpXSkpOw0KICAJCXZpZXcuc2V0SW50MTYob2Zmc2V0LCBzIDwgMCA/IHMgKiAweDgwMDAgOiBzICogMHg3RkZGLCB0cnVlKTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiB3YXZXcml0ZTE2Qml0UENNKHZpZXcsIG9mZnNldCwgaW5wdXQpIHsNCiAgCWZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyssIG9mZnNldCArPSAyKSB7DQogIAkJdmlldy5zZXRJbnQxNihvZmZzZXQsIGlucHV0W2ldLCB0cnVlKTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiB3YXZXcml0ZVN0cmluZyh2aWV3LCBvZmZzZXQsIHN0cmluZykgew0KICAJZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHsNCiAgCQl2aWV3LnNldFVpbnQ4KG9mZnNldCArIGksIHN0cmluZy5jaGFyQ29kZUF0KGkpKTsNCiAgCX0NCiAgfQoKfSkoKTsKCg==",null,!1),i0e=`//TODO: 'import' not yet supported by FF :-( (Dec 2020)\r
//import { SampleRateException, SampleSizeException } from './shared/common.js';\r
//import { RingBuffer } from './shared/ring-buffer.js';\r
//import { SpeexResampler } from './speex/speex-resampler-interface.min.js';\r
//import { Speex } from './speex/speex-resampler-wasm.js';\r
class RingBuffer{constructor(a,b,c){this._readIndex=0,this._writeIndex=0,this._framesAvailable=0,this._channelCount=b,this._length=a,this._channelData=[];for(let d=0;d<this._channelCount;++d)this._channelData[d]="Uint16"==c?new Uint16Array(a):"Int16"==c?new Int16Array(a):"Uint8"==c?new Uint8Array(a):"Int8"==c?new Int8Array(a):new Float32Array(a)}get framesAvailable(){return this._framesAvailable}push(a,b){let c=a[0].length,d=b||function(a,b,c){return a[b][c]};for(let e,f=0;f<c;++f){e=(this._writeIndex+f)%this._length;for(let b=0;b<this._channelCount;++b)this._channelData[b][e]=d(a,b,f)}this._writeIndex+=c,this._writeIndex>=this._length&&(this._writeIndex-=this._length),this._framesAvailable+=c,this._framesAvailable>this._length&&(this._framesAvailable=this._length)}pull(a,b){if(0===this._framesAvailable)return;let c=a[0].length,d=this,e=b||function(a,b,c){return a[b][c]};for(let d,f=0;f<c;++f){d=(this._readIndex+f)%this._length;for(let b=0;b<this._channelCount;++b)a[b][f]=e(this._channelData,b,d)}this._readIndex+=c,this._readIndex>=this._length&&(this._readIndex-=this._length),this._framesAvailable-=c,0>this._framesAvailable&&(this._framesAvailable=0)}};\r
class SpeexResampler{constructor(a,b,c,d=7){this.channels=a,this.inRate=b,this.outRate=c,this.quality=d,this._inBufferPtr=-1,this._inBufferSize=-1,this._outBufferPtr=-1,this._outBufferSize=-1,this._inLengthPtr=-1,this._outLengthPtr=-1}processChunk(a){if(!speexModule)throw new Error("You need to wait for SpeexResampler.initPromise before calling this method");if(0!=a.constructor.name.indexOf("Int16Array"))throw new Error("Chunk format has to be 'Int16Array'");else a=new Uint8Array(a.buffer);if(0!=a.length%(this.channels*Uint16Array.BYTES_PER_ELEMENT))throw new Error("Chunk length should be a multiple of channels * 2 bytes");if(!this._resamplerPtr){const a=speexModule._malloc(4);this._resamplerPtr=speexModule._speex_resampler_init(this.channels,this.inRate,this.outRate,this.quality,a);const b=speexModule.getValue(a,"i32");if(0!==b)throw new Error(speexModule.AsciiToString(speexModule._speex_resampler_strerror(b)));this._inLengthPtr=speexModule._malloc(Uint32Array.BYTES_PER_ELEMENT),this._outLengthPtr=speexModule._malloc(Uint32Array.BYTES_PER_ELEMENT)}this._inBufferSize<a.length&&(-1!==this._inBufferPtr&&speexModule._free(this._inBufferPtr),this._inBufferPtr=speexModule._malloc(a.length),this._inBufferSize=a.length);const b=Math.ceil(a.length*this.outRate/this.inRate);this._outBufferSize<b&&(-1!==this._outBufferPtr&&speexModule._free(this._outBufferPtr),this._outBufferPtr=speexModule._malloc(b),this._outBufferSize=b),speexModule.setValue(this._inLengthPtr,a.length/this.channels/Uint16Array.BYTES_PER_ELEMENT,"i32"),speexModule.HEAPU8.set(a,this._inBufferPtr),speexModule.setValue(this._outLengthPtr,this._outBufferSize/this.channels/Uint16Array.BYTES_PER_ELEMENT,"i32");const c=speexModule._speex_resampler_process_interleaved_int(this._resamplerPtr,this._inBufferPtr,this._inLengthPtr,this._outBufferPtr,this._outLengthPtr);if(0!==c)throw new Error(speexModule.AsciiToString(speexModule._speex_resampler_strerror(c)));const d=speexModule.getValue(this._outLengthPtr,"i32");return new Int16Array(speexModule.HEAPU8.slice(this._outBufferPtr,this._outBufferPtr+d*this.channels*Uint16Array.BYTES_PER_ELEMENT).buffer)}}\r
\r
var speexModule;\r
\r
class SpeexResampleProcessor extends AudioWorkletProcessor {\r
	\r
	get SampleRateException() {\r
		return function(message){\r
			this.message = message;\r
			this.name = "SampleRateException";\r
		}\r
	}\r
	get SampleSizeException() {\r
		return function(message){\r
			this.message = message;\r
			this.name = "SampleSizeException";\r
		};\r
	}\r
	\r
	get Speex() {\r
		return function(){return function(a){function b(a,b,c){c=c||"i8","*"===c.charAt(c.length-1)&&(c="i32"),"i1"===c?Q[a>>0]=b:"i8"===c?Q[a>>0]=b:"i16"===c?S[a>>1]=b:"i32"===c?U[a>>2]=b:"i64"===c?(oa=[b>>>0,(na=b,1<=+ga(na)?0<na?(0|ja(+ia(na/4294967296),4294967295))>>>0:~~+ha((na-+(~~na>>>0))/4294967296)>>>0:0)],U[a>>2]=oa[0],U[a+4>>2]=oa[1]):"float"===c?W[a>>2]=b:"double"===c?X[a>>3]=b:p("invalid type for setValue: "+c)}function c(a,b){switch(b=b||"i8","*"===b.charAt(b.length-1)&&(b="i32"),b){case"i1":return Q[a>>0];case"i8":return Q[a>>0];case"i16":return S[a>>1];case"i32":return U[a>>2];case"i64":return U[a>>2];case"float":return W[a>>2];case"double":return X[a>>3];default:p("invalid type for getValue: "+b);}return null}function d(a){for(var b,c="";;){if(b=R[a++>>0],!b)return c;c+=String.fromCharCode(b)}}function e(a,b){return 0<a%b&&(a+=b-a%b),a}function f(a){P=a,A.HEAP8=Q=new Int8Array(a),A.HEAP16=S=new Int16Array(a),A.HEAP32=U=new Int32Array(a),A.HEAPU8=R=new Uint8Array(a),A.HEAPU16=T=new Uint16Array(a),A.HEAPU32=V=new Uint32Array(a),A.HEAPF32=W=new Float32Array(a),A.HEAPF64=X=new Float64Array(a)}function g(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b){b(A);continue}var c=b.func;"number"==typeof c?void 0===b.arg?A.dynCall_v(c):A.dynCall_vi(c,b.arg):c(void 0===b.arg?null:b.arg)}}function h(){if(A.preRun)for("function"==typeof A.preRun&&(A.preRun=[A.preRun]);A.preRun.length;)l(A.preRun.shift());g(ba)}function i(){fa=!0,g(ca)}function j(){g(da)}function k(){if(A.postRun)for("function"==typeof A.postRun&&(A.postRun=[A.postRun]);A.postRun.length;)m(A.postRun.shift());g(ea)}function l(a){ba.unshift(a)}function m(a){ea.unshift(a)}function n(){ka++,A.monitorRunDependencies&&A.monitorRunDependencies(ka)}function o(){if(ka--,A.monitorRunDependencies&&A.monitorRunDependencies(ka),0==ka&&(null!==la&&(clearInterval(la),la=null),ma)){var a=ma;ma=null,a()}}function p(a){throw A.onAbort&&A.onAbort(a),a+="",K(a),L(a),Z=!0,$=1,a="abort("+a+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(a)}function q(a){return 0===a.indexOf(pa)}function r(a,b,c){R.copyWithin(a,b,b+c)}function s(){return R.length}function t(a){try{return O.grow(a-P.byteLength+65535>>>16),f(O.buffer),1}catch(a){}}function u(a){if("boolean"==typeof I&&I){var b;try{b=Buffer.from(a,"base64")}catch(c){b=new Buffer(a,"base64")}return new Uint8Array(b.buffer,b.byteOffset,b.byteLength)}try{for(var c=qa(a),d=new Uint8Array(c.length),e=0;e<c.length;++e)d[e]=c.charCodeAt(e);return d}catch(a){throw new Error("Converting base64 string to bytes failed.")}}function v(a){return q(a)?u(a.slice(37)):void 0}function w(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}function x(a){function b(){Ba||(Ba=!0,A.calledRun=!0,Z||(i(),j(),y(A),A.onRuntimeInitialized&&A.onRuntimeInitialized(),k()))}(a=a||D,!(0<ka))&&(h(),0<ka||(A.setStatus?(A.setStatus("Running..."),setTimeout(function(){setTimeout(function(){A.setStatus("")},1),b()},1)):b()))}a=a||{};var y,z,A="undefined"==typeof a?{}:a;A.ready=new Promise(function(a,b){y=a,z=b});var B,C={};for(B in A)A.hasOwnProperty(B)&&(C[B]=A[B]);var D=[],E="./this.program",F=function(a,b){throw b},G=!1,H=!1,I=!1;G="object"==typeof window,H="function"==typeof importScripts,I="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;var J;I?(1<process.argv.length&&(E=process.argv[1].replace(/\\\\/g,"/")),D=process.argv.slice(2),process.on("uncaughtException",function(a){if(!(a instanceof w))throw a}),process.on("unhandledRejection",p),F=function(a){process.exit(a)},A.inspect=function(){return"[Emscripten Module object]"}):(G||H)&&(J=function(a){document.title=a});var K=A.print||console.log.bind(console),L=A.printErr||console.warn.bind(console);for(B in C)C.hasOwnProperty(B)&&(A[B]=C[B]);C=null,A.arguments&&(D=A.arguments),A.thisProgram&&(E=A.thisProgram),A.quit&&(F=A.quit);var M;A.wasmBinary&&(M=A.wasmBinary);var N;A.noExitRuntime&&(N=A.noExitRuntime),"object"!=typeof WebAssembly&&p("no native wasm support detected");var O,P,Q,R,S,T,U,V,W,X,Y=new WebAssembly.Table({initial:6,maximum:6,element:"anyfunc"}),Z=!1,$=0,_=65536,aa=A.INITIAL_MEMORY||20971520;O=A.wasmMemory?A.wasmMemory:new WebAssembly.Memory({initial:aa/_,maximum:2147483648/_}),O&&(P=O.buffer),aa=P.byteLength,f(P),U[6256>>2]=5249296;var ba=[],ca=[],da=[],ea=[],fa=!1,ga=Math.abs,ha=Math.ceil,ia=Math.floor,ja=Math.min,ka=0,la=null,ma=null;A.preloadedImages={},A.preloadedAudios={};var na,oa,pa="data:application/octet-stream;base64,";ca.push({func:function(){ta()}});var qa="function"==typeof atob?atob:function(a){var b,c,d,e,f,g,h,j="",k=0;a=a.replace(/[^A-Za-z0-9\\+\\/\\=]/g,"");do e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,j+=String.fromCharCode(b),64!==g&&(j+=String.fromCharCode(c)),64!==h&&(j+=String.fromCharCode(d));while(k<a.length);return j},ra={a:r,b:function(a){a>>>=0;var b=s(),c=2147483648;if(a>c)return!1;for(var d,f=1;4>=f;f*=2){d=b*(1+.2/f),d=Math.min(d,a+100663296);var g=Math.min(c,e(Math.max(16777216,a,d),65536)),h=t(g);if(h)return!0}return!1},memory:O,table:Y},sa=function(){function a(a){var b=a.exports;A.asm=b,o("wasm-instantiate")}var b={a:ra};if(n("wasm-instantiate"),A.instantiateWasm)try{var c=A.instantiateWasm(b,a);return c}catch(a){return L("Module.instantiateWasm callback failed with error: "+a),!1}return function(a){var c=v("data:application/octet-stream;base64,AGFzbQEAAAABggETYAZ/f39/f38Bf2ABfwF/YAF/AGACf38AYAN/f38AYAJ/fwF/YAV/f39/fwF/YAAAYAV/f39/fwBgBn9/f39/fwBgA39/fwF/YAR/f39/AX9gB39/f39/f38Bf2ACfH8Bf2AEfX1/fwF9YAF8AXxgAnx/AXxgAnx8AXxgA3x8fwF8AikEAWEBYQAKAWEBYgABAWEGbWVtb3J5AgHAAoCAAgFhBXRhYmxlAXAABgMgHwIBAxABARIOAQMFEQkAAAAABAgFDwwNCwEEBgIABgcGCQF/AUGQssACCwchCAFjACABZAAfAWUAAgFmAB0BZwAcAWgAGwFpABoBagAHCQsBAEEBCwUSERAPHgrXpwEfgQ0BB38CQCAARQ0AIABBeGoiAyAAQXxqKAIAIgFBeHEiAGohBQJAIAFBAXENACABQQNxRQ0BIAMgAygCACICayIDQYQtKAIAIgRJDQEgACACaiEAIANBiC0oAgBHBEAgAkH/AU0EQCADKAIIIgQgAkEDdiICQQN0QZwtakcaIAQgAygCDCIBRgRAQfQsQfQsKAIAQX4gAndxNgIADAMLIAQgATYCDCABIAQ2AggMAgsgAygCGCEGAkAgAyADKAIMIgFHBEAgBCADKAIIIgJNBEAgAigCDBoLIAIgATYCDCABIAI2AggMAQsCQCADQRRqIgIoAgAiBA0AIANBEGoiAigCACIEDQBBACEBDAELA0AgAiEHIAQiAUEUaiICKAIAIgQNACABQRBqIQIgASgCECIEDQALIAdBADYCAAsgBkUNAQJAIAMgAygCHCICQQJ0QaQvaiIEKAIARgRAIAQgATYCACABDQFB+CxB+CwoAgBBfiACd3E2AgAMAwsgBkEQQRQgBigCECADRhtqIAE2AgAgAUUNAgsgASAGNgIYIAMoAhAiAgRAIAEgAjYCECACIAE2AhgLIAMoAhQiAkUNASABIAI2AhQgAiABNgIYDAELIAUoAgQiAUEDcUEDRw0AQfwsIAA2AgAgBSABQX5xNgIEIAMgAEEBcjYCBCAAIANqIAA2AgAPCyAFIANNDQAgBSgCBCIBQQFxRQ0AAkAgAUECcUUEQCAFQYwtKAIARgRAQYwtIAM2AgBBgC1BgC0oAgAgAGoiADYCACADIABBAXI2AgQgA0GILSgCAEcNA0H8LEEANgIAQYgtQQA2AgAPCyAFQYgtKAIARgRAQYgtIAM2AgBB/CxB/CwoAgAgAGoiADYCACADIABBAXI2AgQgACADaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIMIQIgBSgCCCIEIAFBA3YiAUEDdEGcLWoiB0cEQEGELSgCABoLIAIgBEYEQEH0LEH0LCgCAEF+IAF3cTYCAAwCCyACIAdHBEBBhC0oAgAaCyAEIAI2AgwgAiAENgIIDAELIAUoAhghBgJAIAUgBSgCDCIBRwRAQYQtKAIAIAUoAggiAk0EQCACKAIMGgsgAiABNgIMIAEgAjYCCAwBCwJAIAVBFGoiAigCACIEDQAgBUEQaiICKAIAIgQNAEEAIQEMAQsDQCACIQcgBCIBQRRqIgIoAgAiBA0AIAFBEGohAiABKAIQIgQNAAsgB0EANgIACyAGRQ0AAkAgBSAFKAIcIgJBAnRBpC9qIgQoAgBGBEAgBCABNgIAIAENAUH4LEH4LCgCAEF+IAJ3cTYCAAwCCyAGQRBBFCAGKAIQIAVGG2ogATYCACABRQ0BCyABIAY2AhggBSgCECICBEAgASACNgIQIAIgATYCGAsgBSgCFCICRQ0AIAEgAjYCFCACIAE2AhgLIAMgAEEBcjYCBCAAIANqIAA2AgAgA0GILSgCAEcNAUH8LCAANgIADwsgBSABQX5xNgIEIAMgAEEBcjYCBCAAIANqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QZwtaiEAAn9B9CwoAgAiAkEBIAF0IgFxRQRAQfQsIAEgAnI2AgAgAAwBCyAAKAIICyECIAAgAzYCCCACIAM2AgwgAyAANgIMIAMgAjYCCA8LIANCADcCECADAn9BACAAQQh2IgFFDQAaQR8gAEH///8HSw0AGiABIAFBgP4/akEQdkEIcSIBdCICIAJBgOAfakEQdkEEcSICdCIEIARBgIAPakEQdkECcSIEdEEPdiABIAJyIARyayIBQQF0IAAgAUEVanZBAXFyQRxqCyICNgIcIAJBAnRBpC9qIQECQAJAAkBB+CwoAgAiBEEBIAJ0IgdxRQRAQfgsIAQgB3I2AgAgASADNgIAIAMgATYCGAwBCyAAQQBBGSACQQF2ayACQR9GG3QhAiABKAIAIQEDQCABIgQoAgRBeHEgAEYNAiACQR12IQEgAkEBdCECIAQgAUEEcWoiB0EQaigCACIBDQALIAcgAzYCECADIAQ2AhgLIAMgAzYCDCADIAM2AggMAQsgBCgCCCIAIAM2AgwgBCADNgIIIANBADYCGCADIAQ2AgwgAyAANgIIC0GULUGULSgCAEF/aiIANgIAIAANAEG8MCEDA0AgAygCACIAQQhqIQMgAA0AC0GULUF/NgIACwtSAQJ/QfAwKAIAIgEgAEEDakF8cSICaiEAAkAgAkEBTkEAIAAgAU0bDQAgAD8AQRB0SwRAIAAQAUUNAQtB8DAgADYCACABDwtB8CxBMDYCAEF/C9YCAQF/AkAgAUUNACAAIAFqIgJBf2pBADoAACAAQQA6AAAgAUEDSQ0AIAJBfmpBADoAACAAQQA6AAEgAkF9akEAOgAAIABBADoAAiABQQdJDQAgAkF8akEAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgJqIgBBADYCACAAIAEgAmtBfHEiAmoiAUF8akEANgIAIAJBCUkNACAAQQA2AgggAEEANgIEIAFBeGpBADYCACABQXRqQQA2AgAgAkEZSQ0AIABBADYCGCAAQQA2AhQgAEEANgIQIABBADYCDCABQXBqQQA2AgAgAUFsakEANgIAIAFBaGpBADYCACABQWRqQQA2AgAgAiAAQQRxQRhyIgJrIgFBIEkNACAAIAJqIQADQCAAQgA3AxggAEIANwMQIABCADcDCCAAQgA3AwAgAEEgaiEAIAFBYGoiAUEfSw0ACwsLqAEAAkAgAUGACE4EQCAARAAAAAAAAOB/oiEAIAFB/w9IBEAgAUGBeGohAQwCCyAARAAAAAAAAOB/oiEAIAFB/RcgAUH9F0gbQYJwaiEBDAELIAFBgXhKDQAgAEQAAAAAAAAQAKIhACABQYNwSgRAIAFB/gdqIQEMAQsgAEQAAAAAAAAQAKIhACABQYZoIAFBhmhKG0H8D2ohAQsgACABQf8Haq1CNIa/ogtTAgF/AX4CQAJ/QQAgAEUNABogAK0iAqciASAAQQFyQYCABEkNABpBfyABIAJCIIinGwsiARAHIgBFDQAgAEF8ai0AAEEDcUUNACAAIAEQBAsgAAvGLQELfyMAQRBrIgskAAJAAkACQAJAAkACQAJAAkACQAJAAkAgAEH0AU0EQEH0LCgCACIGQRAgAEELakF4cSAAQQtJGyIFQQN2IgB2IgFBA3EEQCABQX9zQQFxIABqIgJBA3QiBEGkLWooAgAiAUEIaiEAAkAgASgCCCIDIARBnC1qIgRGBEBB9CwgBkF+IAJ3cTYCAAwBC0GELSgCABogAyAENgIMIAQgAzYCCAsgASACQQN0IgJBA3I2AgQgASACaiIBIAEoAgRBAXI2AgQMDAsgBUH8LCgCACIITQ0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cSIAQQAgAGtxQX9qIgAgAEEMdkEQcSIAdiIBQQV2QQhxIgIgAHIgASACdiIAQQJ2QQRxIgFyIAAgAXYiAEEBdkECcSIBciAAIAF2IgBBAXZBAXEiAXIgACABdmoiAkEDdCIDQaQtaigCACIBKAIIIgAgA0GcLWoiA0YEQEH0LCAGQX4gAndxIgY2AgAMAQtBhC0oAgAaIAAgAzYCDCADIAA2AggLIAFBCGohACABIAVBA3I2AgQgASAFaiIHIAJBA3QiAiAFayIDQQFyNgIEIAEgAmogAzYCACAIBEAgCEEDdiIEQQN0QZwtaiEBQYgtKAIAIQICfyAGQQEgBHQiBHFFBEBB9CwgBCAGcjYCACABDAELIAEoAggLIQQgASACNgIIIAQgAjYCDCACIAE2AgwgAiAENgIIC0GILSAHNgIAQfwsIAM2AgAMDAtB+CwoAgAiCkUNASAKQQAgCmtxQX9qIgAgAEEMdkEQcSIAdiIBQQV2QQhxIgIgAHIgASACdiIAQQJ2QQRxIgFyIAAgAXYiAEEBdkECcSIBciAAIAF2IgBBAXZBAXEiAXIgACABdmpBAnRBpC9qKAIAIgEoAgRBeHEgBWshAyABIQIDQAJAIAIoAhAiAEUEQCACKAIUIgBFDQELIAAoAgRBeHEgBWsiAiADIAIgA0kiAhshAyAAIAEgAhshASAAIQIMAQsLIAEoAhghCSABIAEoAgwiBEcEQEGELSgCACABKAIIIgBNBEAgACgCDBoLIAAgBDYCDCAEIAA2AggMCwsgAUEUaiICKAIAIgBFBEAgASgCECIARQ0DIAFBEGohAgsDQCACIQcgACIEQRRqIgIoAgAiAA0AIARBEGohAiAEKAIQIgANAAsgB0EANgIADAoLQX8hBSAAQb9/Sw0AIABBC2oiAEF4cSEFQfgsKAIAIgdFDQBBACAFayECAkACQAJAAn9BACAAQQh2IgBFDQAaQR8gBUH///8HSw0AGiAAIABBgP4/akEQdkEIcSIAdCIBIAFBgOAfakEQdkEEcSIBdCIDIANBgIAPakEQdkECcSIDdEEPdiAAIAFyIANyayIAQQF0IAUgAEEVanZBAXFyQRxqCyIIQQJ0QaQvaigCACIDRQRAQQAhAAwBCyAFQQBBGSAIQQF2ayAIQR9GG3QhAUEAIQADQAJAIAMoAgRBeHEgBWsiBiACTw0AIAMhBCAGIgINAEEAIQIgAyEADAMLIAAgAygCFCIGIAYgAyABQR12QQRxaigCECIDRhsgACAGGyEAIAEgA0EAR3QhASADDQALCyAAIARyRQRAQQIgCHQiAEEAIABrciAHcSIARQ0DIABBACAAa3FBf2oiACAAQQx2QRBxIgB2IgFBBXZBCHEiAyAAciABIAN2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2akECdEGkL2ooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIAVrIgMgAkkhASADIAIgARshAiAAIAQgARshBCAAKAIQIgEEfyABBSAAKAIUCyIADQALCyAERQ0AIAJB/CwoAgAgBWtPDQAgBCgCGCEIIAQgBCgCDCIBRwRAQYQtKAIAIAQoAggiAE0EQCAAKAIMGgsgACABNgIMIAEgADYCCAwJCyAEQRRqIgMoAgAiAEUEQCAEKAIQIgBFDQMgBEEQaiEDCwNAIAMhBiAAIgFBFGoiAygCACIADQAgAUEQaiEDIAEoAhAiAA0ACyAGQQA2AgAMCAtB/CwoAgAiASAFTwRAQYgtKAIAIQACQCABIAVrIgJBEE8EQEH8LCACNgIAQYgtIAAgBWoiAzYCACADIAJBAXI2AgQgACABaiACNgIAIAAgBUEDcjYCBAwBC0GILUEANgIAQfwsQQA2AgAgACABQQNyNgIEIAAgAWoiASABKAIEQQFyNgIECyAAQQhqIQAMCgtBgC0oAgAiASAFSwRAQYAtIAEgBWsiATYCAEGMLUGMLSgCACIAIAVqIgI2AgAgAiABQQFyNgIEIAAgBUEDcjYCBCAAQQhqIQAMCgtBACEAIAVBL2oiBAJ/QcwwKAIABEBB1DAoAgAMAQtB2DBCfzcCAEHQMEKAoICAgIAENwIAQcwwIAtBDGpBcHFB2KrVqgVzNgIAQeAwQQA2AgBBsDBBADYCAEGAIAsiAmoiBkEAIAJrIgdxIgIgBU0NCUGsMCgCACIDBEBBpDAoAgAiCCACaiIJIAhNDQogCSADSw0KC0GwMC0AAEEEcQ0EAkACQEGMLSgCACIDBEBBtDAhAANAIAAoAgAiCCADTQRAIAggACgCBGogA0sNAwsgACgCCCIADQALC0EAEAMiAUF/Rg0FIAIhBkHQMCgCACIAQX9qIgMgAXEEQCACIAFrIAEgA2pBACAAa3FqIQYLIAYgBU0NBSAGQf7///8HSw0FQawwKAIAIgAEQEGkMCgCACIDIAZqIgcgA00NBiAHIABLDQYLIAYQAyIAIAFHDQEMBwsgBiABayAHcSIGQf7///8HSw0EIAYQAyIBIAAoAgAgACgCBGpGDQMgASEACwJAIAVBMGogBk0NACAAQX9GDQBB1DAoAgAiASAEIAZrakEAIAFrcSIBQf7///8HSwRAIAAhAQwHCyABEANBf0cEQCABIAZqIQYgACEBDAcLQQAgBmsQAxoMBAsgACIBQX9HDQUMAwtBACEEDAcLQQAhAQwFCyABQX9HDQILQbAwQbAwKAIAQQRyNgIACyACQf7///8HSw0BIAIQAyIBQQAQAyIATw0BIAFBf0YNASAAQX9GDQEgACABayIGIAVBKGpNDQELQaQwQaQwKAIAIAZqIgA2AgAgAEGoMCgCAEsEQEGoMCAANgIACwJAAkACQEGMLSgCACIDBEBBtDAhAANAIAEgACgCACICIAAoAgQiBGpGDQIgACgCCCIADQALDAILQYQtKAIAIgBBACABIABPG0UEQEGELSABNgIAC0EAIQBBuDAgBjYCAEG0MCABNgIAQZQtQX82AgBBmC1BzDAoAgA2AgBBwDBBADYCAANAIABBA3QiAkGkLWogAkGcLWoiAzYCACACQagtaiADNgIAIABBAWoiAEEgRw0AC0GALSAGQVhqIgBBeCABa0EHcUEAIAFBCGpBB3EbIgJrIgM2AgBBjC0gASACaiICNgIAIAIgA0EBcjYCBCAAIAFqQSg2AgRBkC1B3DAoAgA2AgAMAgsgAC0ADEEIcQ0AIAEgA00NACACIANLDQAgACAEIAZqNgIEQYwtIANBeCADa0EHcUEAIANBCGpBB3EbIgBqIgE2AgBBgC1BgC0oAgAgBmoiAiAAayIANgIAIAEgAEEBcjYCBCACIANqQSg2AgRBkC1B3DAoAgA2AgAMAQsgAUGELSgCACIESQRAQYQtIAE2AgAgASEECyABIAZqIQJBtDAhAAJAAkACQAJAAkACQANAIAIgACgCAEcEQCAAKAIIIgANAQwCCwsgAC0ADEEIcUUNAQtBtDAhAANAIAAoAgAiAiADTQRAIAIgACgCBGoiBCADSw0DCyAAKAIIIQAMAAALAAsgACABNgIAIAAgACgCBCAGajYCBCABQXggAWtBB3FBACABQQhqQQdxG2oiCSAFQQNyNgIEIAJBeCACa0EHcUEAIAJBCGpBB3EbaiIBIAlrIAVrIQAgBSAJaiEHIAEgA0YEQEGMLSAHNgIAQYAtQYAtKAIAIABqIgA2AgAgByAAQQFyNgIEDAMLIAFBiC0oAgBGBEBBiC0gBzYCAEH8LEH8LCgCACAAaiIANgIAIAcgAEEBcjYCBCAAIAdqIAA2AgAMAwsgASgCBCICQQNxQQFGBEAgAkF4cSEKAkAgAkH/AU0EQCABKAIIIgMgAkEDdiIEQQN0QZwtakcaIAMgASgCDCICRgRAQfQsQfQsKAIAQX4gBHdxNgIADAILIAMgAjYCDCACIAM2AggMAQsgASgCGCEIAkAgASABKAIMIgZHBEAgBCABKAIIIgJNBEAgAigCDBoLIAIgBjYCDCAGIAI2AggMAQsCQCABQRRqIgMoAgAiBQ0AIAFBEGoiAygCACIFDQBBACEGDAELA0AgAyECIAUiBkEUaiIDKAIAIgUNACAGQRBqIQMgBigCECIFDQALIAJBADYCAAsgCEUNAAJAIAEgASgCHCICQQJ0QaQvaiIDKAIARgRAIAMgBjYCACAGDQFB+CxB+CwoAgBBfiACd3E2AgAMAgsgCEEQQRQgCCgCECABRhtqIAY2AgAgBkUNAQsgBiAINgIYIAEoAhAiAgRAIAYgAjYCECACIAY2AhgLIAEoAhQiAkUNACAGIAI2AhQgAiAGNgIYCyABIApqIQEgACAKaiEACyABIAEoAgRBfnE2AgQgByAAQQFyNgIEIAAgB2ogADYCACAAQf8BTQRAIABBA3YiAUEDdEGcLWohAAJ/QfQsKAIAIgJBASABdCIBcUUEQEH0LCABIAJyNgIAIAAMAQsgACgCCAshASAAIAc2AgggASAHNgIMIAcgADYCDCAHIAE2AggMAwsgBwJ/QQAgAEEIdiIBRQ0AGkEfIABB////B0sNABogASABQYD+P2pBEHZBCHEiAXQiAiACQYDgH2pBEHZBBHEiAnQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASACciADcmsiAUEBdCAAIAFBFWp2QQFxckEcagsiATYCHCAHQgA3AhAgAUECdEGkL2ohAgJAQfgsKAIAIgNBASABdCIEcUUEQEH4LCADIARyNgIAIAIgBzYCAAwBCyAAQQBBGSABQQF2ayABQR9GG3QhAyACKAIAIQEDQCABIgIoAgRBeHEgAEYNAyADQR12IQEgA0EBdCEDIAIgAUEEcWoiBCgCECIBDQALIAQgBzYCEAsgByACNgIYIAcgBzYCDCAHIAc2AggMAgtBgC0gBkFYaiIAQXggAWtBB3FBACABQQhqQQdxGyICayIHNgIAQYwtIAEgAmoiAjYCACACIAdBAXI2AgQgACABakEoNgIEQZAtQdwwKAIANgIAIAMgBEEnIARrQQdxQQAgBEFZakEHcRtqQVFqIgAgACADQRBqSRsiAkEbNgIEIAJBvDApAgA3AhAgAkG0MCkCADcCCEG8MCACQQhqNgIAQbgwIAY2AgBBtDAgATYCAEHAMEEANgIAIAJBGGohAANAIABBBzYCBCAAQQhqIQEgAEEEaiEAIAQgAUsNAAsgAiADRg0DIAIgAigCBEF+cTYCBCADIAIgA2siBEEBcjYCBCACIAQ2AgAgBEH/AU0EQCAEQQN2IgFBA3RBnC1qIQACf0H0LCgCACICQQEgAXQiAXFFBEBB9CwgASACcjYCACAADAELIAAoAggLIQEgACADNgIIIAEgAzYCDCADIAA2AgwgAyABNgIIDAQLIANCADcCECADAn9BACAEQQh2IgBFDQAaQR8gBEH///8HSw0AGiAAIABBgP4/akEQdkEIcSIAdCIBIAFBgOAfakEQdkEEcSIBdCICIAJBgIAPakEQdkECcSICdEEPdiAAIAFyIAJyayIAQQF0IAQgAEEVanZBAXFyQRxqCyIANgIcIABBAnRBpC9qIQECQEH4LCgCACICQQEgAHQiBnFFBEBB+CwgAiAGcjYCACABIAM2AgAgAyABNgIYDAELIARBAEEZIABBAXZrIABBH0YbdCEAIAEoAgAhAQNAIAEiAigCBEF4cSAERg0EIABBHXYhASAAQQF0IQAgAiABQQRxaiIGKAIQIgENAAsgBiADNgIQIAMgAjYCGAsgAyADNgIMIAMgAzYCCAwDCyACKAIIIgAgBzYCDCACIAc2AgggB0EANgIYIAcgAjYCDCAHIAA2AggLIAlBCGohAAwFCyACKAIIIgAgAzYCDCACIAM2AgggA0EANgIYIAMgAjYCDCADIAA2AggLQYAtKAIAIgAgBU0NAEGALSAAIAVrIgE2AgBBjC1BjC0oAgAiACAFaiICNgIAIAIgAUEBcjYCBCAAIAVBA3I2AgQgAEEIaiEADAMLQfAsQTA2AgBBACEADAILAkAgCEUNAAJAIAQoAhwiAEECdEGkL2oiAygCACAERgRAIAMgATYCACABDQFB+CwgB0F+IAB3cSIHNgIADAILIAhBEEEUIAgoAhAgBEYbaiABNgIAIAFFDQELIAEgCDYCGCAEKAIQIgAEQCABIAA2AhAgACABNgIYCyAEKAIUIgBFDQAgASAANgIUIAAgATYCGAsCQCACQQ9NBEAgBCACIAVqIgBBA3I2AgQgACAEaiIAIAAoAgRBAXI2AgQMAQsgBCAFQQNyNgIEIAQgBWoiAyACQQFyNgIEIAIgA2ogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGcLWohAAJ/QfQsKAIAIgJBASABdCIBcUUEQEH0LCABIAJyNgIAIAAMAQsgACgCCAshASAAIAM2AgggASADNgIMIAMgADYCDCADIAE2AggMAQsgAwJ/QQAgAkEIdiIARQ0AGkEfIAJB////B0sNABogACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiBSAFQYCAD2pBEHZBAnEiBXRBD3YgACABciAFcmsiAEEBdCACIABBFWp2QQFxckEcagsiADYCHCADQgA3AhAgAEECdEGkL2ohAQJAAkAgB0EBIAB0IgVxRQRAQfgsIAUgB3I2AgAgASADNgIADAELIAJBAEEZIABBAXZrIABBH0YbdCEAIAEoAgAhBQNAIAUiASgCBEF4cSACRg0CIABBHXYhBSAAQQF0IQAgASAFQQRxaiIGKAIQIgUNAAsgBiADNgIQCyADIAE2AhggAyADNgIMIAMgAzYCCAwBCyABKAIIIgAgAzYCDCABIAM2AgggA0EANgIYIAMgATYCDCADIAA2AggLIARBCGohAAwBCwJAIAlFDQACQCABKAIcIgBBAnRBpC9qIgIoAgAgAUYEQCACIAQ2AgAgBA0BQfgsIApBfiAAd3E2AgAMAgsgCUEQQRQgCSgCECABRhtqIAQ2AgAgBEUNAQsgBCAJNgIYIAEoAhAiAARAIAQgADYCECAAIAQ2AhgLIAEoAhQiAEUNACAEIAA2AhQgACAENgIYCwJAIANBD00EQCABIAMgBWoiAEEDcjYCBCAAIAFqIgAgACgCBEEBcjYCBAwBCyABIAVBA3I2AgQgASAFaiIEIANBAXI2AgQgAyAEaiADNgIAIAgEQCAIQQN2IgVBA3RBnC1qIQBBiC0oAgAhAgJ/QQEgBXQiBSAGcUUEQEH0LCAFIAZyNgIAIAAMAQsgACgCCAshBSAAIAI2AgggBSACNgIMIAIgADYCDCACIAU2AggLQYgtIAQ2AgBB/CwgAzYCAAsgAUEIaiEACyALQRBqJAAgAAuZAQEDfCAAIACiIgMgAyADoqIgA0R81c9aOtnlPaJE65wriublWr6goiADIANEff6xV+Mdxz6iRNVhwRmgASq/oKJEpvgQERERgT+goCEFIAMgAKIhBCACRQRAIAQgAyAFokRJVVVVVVXFv6CiIACgDwsgACADIAFEAAAAAAAA4D+iIAQgBaKhoiABoSAERElVVVVVVcU/oqChC7YCAgJ9B3wgAbsiBpkiB0SN7bWg98awPmMEQCAADwsgByACtyIHRAAAAAAAAOA/omQEfUMAAAAABSAAIAGUIQEgAygCAAJ/IAYgBqAgB6O2iyADKAIEspQiBI4iBYtDAAAAT10EQCAFqAwBC0GAgICAeAsiAkEDdGoiAysDCCEHIAMrAwAhCiADKwMQIQkgAysDGCEGIAG7RBgtRFT7IQlAoiIIEBYgALuiIAijIAYgBCACspMiACAAIACUIgGUuyIIRJWoZ1VVVcU/oiILIAC7IgZElahnVVVVxT+ioSIMoiAJIAG7RAAAAAAAAOA/oiIJIAagIAhEAAAAAAAA4D+ioSIIoiAKIAkgBkS1K0xVVVXVv6KgIAuhIgaiIAdEAAAAAAAA8D8gDKEgCKEgBqGioKCgorYLC/IMAhJ/An0gACAAKAIIIgIgACgCDCIDbiIGNgIkIAAgACgCEEEUbCIBQbQJaigCACIENgIwIAAoAhghCSAAIAFBsAlqKAIAIgU2AhggACACIAMgBmxrNgIoIAAoAhwhDAJAAkACQCACIANLBEAgACABQbgJaioCACADs5QgArOVOAIsIAUgBSADbiIBIANsayIFQX8gAm4iBksNAiABIAZLDQIgASACbCIBIAIgBWwgA24iBUF/c0sNAiAAIAEgBWpBB2pBeHEiBTYCGCAEIANBAXQgAkkiAXYgA0ECdCACSSIGdiADQQN0IgcgAkl2IQQCQAJAIAENACAGDQAgByACTw0BCyAAIAQ2AjALIAQgA0EEdCACSSIBdiECIAFFQQAgAhsNASAAIAJBASACGyIENgIwDAELIAAgAUG8CWooAgA2AiwLAkAgAyAFbCICIAQgBWxBCGoiAU0EQEEBIQZB/////wEgA24gBU8NAQtBACEGIAEhAkH3////ASAEbiAFSQ0BCyAAKAJQIAJJBEAgACgCTCACQQJ0EAwiAUUNASAAIAI2AlAgACABNgJMCyAAAn8CQAJAIAZFBEBBfCEBIAAoAhgiAiAAKAIwIgRsQQRqIgVBfEoNASAAKAIQIQMMAgsgACgCGCECAkAgACgCDCIBRQ0AIAJFBEBBACECDAELIAFBASABQQFLGyEEIAJBfm0hBSAAKAIQQRRsQcAJaigCACEGIAGzIRMgACgCTCEHQQAhAwNAIAIgA2whCCADsyATlSEUQQAhAQNAIAcgASAIakECdGogACoCLCABQQFqIgEgBWqyIBSTIAIgBhAJOAIAIAEgAkcNAAsgA0EBaiIDIARHDQALC0EBQQIgACgCEEEIShsMAgsgAkEBdrMhEyAAKAIQIgNBFGxBwAlqKAIAIQYgBLMhFCAAKAJMIQQDQCABQQJ0IARqIAAqAiwgAbIgFJUgE5MgAiAGEAk4AhAgAUEBaiIBIAVHDQALC0EDQQQgA0EIShsLNgJUIAIgACgCIGpBf2oiASAAKAIcIgJLBEBB/////wEgACgCFCICbiABSQ0BIAAoAkggASACbEECdBAMIgJFDQEgACABNgIcIAAgAjYCSCABIQILIAAoAjhFBEAgAiAAKAIUbCICRQRAQQAPCyAAKAJIIAJBAnQQBEEADwsgACgCGCICIAlLBEAgACgCFCIDRQRAQQAPCyAJQX9qIQ0gA0ECdEF8aiEOIAAoAkQhD0EAIQYDQCAPIANBf2oiA0ECdCIQaiIHKAIAIgJBAXQhBSACIA1qIgEEQCADIAxsIQggACgCHCADbCEKIAAoAkghBANAIAQgAUF/aiIBIAJqIApqQQJ0aiAEIAEgCGpBAnRqKAIANgIAIAENAAsLIA4gBkECdGshCCACBEAgACgCSCAAKAIcIAhsaiACQQJ0EAQLIAdBADYCAAJAIAUgCWoiBCAAKAIYIgVJBEAgBEF/aiIHBEAgBUF+aiERIARBfmohEiAAKAIcIANsIQogACgCSCELQQAhAUEAIQIDQCALIAEgEWogCmpBAnRqIAsgASASaiAKakECdGooAgA2AgAgAkF/cyEBIAJBAWoiAiAHRw0ACwsgBUF/aiICIAdLBEAgACgCSCAAKAIcIAhsaiACIAdrQQJ0EAQLIAAoAjwgEGoiAiACKAIAIAUgBGtBAXZqNgIADAELIAcgBCAFa0EBdiICNgIAIAJBf2oiAUEAIAAoAhgiBGtGDQAgASAEaiIBQQEgAUEBSxshBSAAKAIcIANsIQcgACgCSCEEQQAhAQNAIAQgASAHaiIIQQJ0aiAEIAIgCGpBAnRqKAIANgIAIAFBAWoiASAFRw0ACwsgBkEBaiEGIAMNAAtBAA8LQQAhASACIAlPDQEgACgCFEUNASAAKAJEIQZBACEDA0AgBiADQQJ0aiIEKAIAIQEgBCAJIAJrQQF2IgI2AgAgASACaiIHQX9qIgFBACAAKAIYIgVrRwRAIAEgBWoiAUEBIAFBAUsbIQggACgCHCADbCEKIAAoAkghBUEAIQEDQCAFIAEgCmoiC0ECdGogBSACIAtqQQJ0aigCADYCACABQQFqIgEgCEcNAAsLIAQgBzYCACADQQFqIgMgACgCFE8EQEEADwUgACgCGCECDAELAAALAAsgACAJNgIYIABBBTYCVEEBIQELIAELhwwBBn8gACABaiEFAkACQCAAKAIEIgJBAXENACACQQNxRQ0BIAAoAgAiAyABaiEBIAAgA2siAEGILSgCAEcEQEGELSgCACEEIANB/wFNBEAgACgCCCIEIANBA3YiA0EDdEGcLWpHGiAEIAAoAgwiAkYEQEH0LEH0LCgCAEF+IAN3cTYCAAwDCyAEIAI2AgwgAiAENgIIDAILIAAoAhghBgJAIAAgACgCDCICRwRAIAQgACgCCCIDTQRAIAMoAgwaCyADIAI2AgwgAiADNgIIDAELAkAgAEEUaiIDKAIAIgQNACAAQRBqIgMoAgAiBA0AQQAhAgwBCwNAIAMhByAEIgJBFGoiAygCACIEDQAgAkEQaiEDIAIoAhAiBA0ACyAHQQA2AgALIAZFDQECQCAAIAAoAhwiA0ECdEGkL2oiBCgCAEYEQCAEIAI2AgAgAg0BQfgsQfgsKAIAQX4gA3dxNgIADAMLIAZBEEEUIAYoAhAgAEYbaiACNgIAIAJFDQILIAIgBjYCGCAAKAIQIgMEQCACIAM2AhAgAyACNgIYCyAAKAIUIgNFDQEgAiADNgIUIAMgAjYCGAwBCyAFKAIEIgJBA3FBA0cNAEH8LCABNgIAIAUgAkF+cTYCBCAAIAFBAXI2AgQgBSABNgIADwsCQCAFKAIEIgJBAnFFBEAgBUGMLSgCAEYEQEGMLSAANgIAQYAtQYAtKAIAIAFqIgE2AgAgACABQQFyNgIEIABBiC0oAgBHDQNB/CxBADYCAEGILUEANgIADwsgBUGILSgCAEYEQEGILSAANgIAQfwsQfwsKAIAIAFqIgE2AgAgACABQQFyNgIEIAAgAWogATYCAA8LQYQtKAIAIQMgAkF4cSABaiEBAkAgAkH/AU0EQCAFKAIIIgQgAkEDdiICQQN0QZwtakcaIAQgBSgCDCIDRgRAQfQsQfQsKAIAQX4gAndxNgIADAILIAQgAzYCDCADIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgJHBEAgAyAFKAIIIgNNBEAgAygCDBoLIAMgAjYCDCACIAM2AggMAQsCQCAFQRRqIgMoAgAiBA0AIAVBEGoiAygCACIEDQBBACECDAELA0AgAyEHIAQiAkEUaiIDKAIAIgQNACACQRBqIQMgAigCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIDQQJ0QaQvaiIEKAIARgRAIAQgAjYCACACDQFB+CxB+CwoAgBBfiADd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAI2AgAgAkUNAQsgAiAGNgIYIAUoAhAiAwRAIAIgAzYCECADIAI2AhgLIAUoAhQiA0UNACACIAM2AhQgAyACNgIYCyAAIAFBAXI2AgQgACABaiABNgIAIABBiC0oAgBHDQFB/CwgATYCAA8LIAUgAkF+cTYCBCAAIAFBAXI2AgQgACABaiABNgIACyABQf8BTQRAIAFBA3YiAkEDdEGcLWohAQJ/QfQsKAIAIgNBASACdCICcUUEQEH0LCACIANyNgIAIAEMAQsgASgCCAshAyABIAA2AgggAyAANgIMIAAgATYCDCAAIAM2AggPCyAAQgA3AhAgAAJ/QQAgAUEIdiICRQ0AGkEfIAFB////B0sNABogAiACQYD+P2pBEHZBCHEiAnQiAyADQYDgH2pBEHZBBHEiA3QiBCAEQYCAD2pBEHZBAnEiBHRBD3YgAiADciAEcmsiAkEBdCABIAJBFWp2QQFxckEcagsiAzYCHCADQQJ0QaQvaiECAkACQEH4LCgCACIEQQEgA3QiB3FFBEBB+CwgBCAHcjYCACACIAA2AgAgACACNgIYDAELIAFBAEEZIANBAXZrIANBH0YbdCEDIAIoAgAhAgNAIAIiBCgCBEF4cSABRg0CIANBHXYhAiADQQF0IQMgBCACQQRxaiIHQRBqKAIAIgINAAsgByAANgIQIAAgBDYCGAsgACAANgIMIAAgADYCCA8LIAQoAggiASAANgIMIAQgADYCCCAAQQA2AhggACAENgIMIAAgATYCCAsLfwECfyAARQRAIAEQBw8LIAFBQE8EQEHwLEEwNgIAQQAPCyAAQXhqQRAgAUELakF4cSABQQtJGxAVIgIEQCACQQhqDwsgARAHIgJFBEBBAA8LIAIgAEF8QXggAEF8aigCACIDQQNxGyADQXhxaiIDIAEgAyABSRsQEyAAEAIgAguSAQEDfEQAAAAAAADwPyAAIACiIgJEAAAAAAAA4D+iIgOhIgREAAAAAAAA8D8gBKEgA6EgAiACIAIgAkSQFcsZoAH6PqJEd1HBFmzBVr+gokRMVVVVVVWlP6CiIAIgAqIiAyADoiACIAJE1DiIvun6qL2iRMSxtL2e7iE+oKJErVKcgE9+kr6goqCiIAAgAaKhoKALzQgDEH8BfQF8IwBBoCBrIgckACAFKAIAIQsgAygCACEOIAAoAlwhECAAKAJYIREgACgCSCEGIAAoAhghCSAAKAIcIQggAEEBNgJcAkAgDkUNACALRQ0AIAggCWtBAWohEiAGIAEgCGwiCEECdGohEyAIQQJ0IAZqQXxqIRQDQCAHIBIgDiAOIBJLGzYCDCAHIAtBgAggC0GACEkbIgY2AggCQAJAAn8gAUECdCIPIAAoAkRqIggoAgBFBEBBACEJIAdBEGoMAQsgByAGNgKcICAHIAgoAgA2ApggIABBATYCOCAAKAIYIQwgACABIAAoAkggACgCHCABbEECdGoiCiAHQZggaiAHQRBqIAdBnCBqIAAoAlQRAAAhDSAAKAI8IA9qIgkoAgAiCCAHKAKYICIGSARAIAcgCDYCmCAgCCEGCyAHIA02ApwgIAkgCSgCACAGazYCACAHKAKYICEGIAxBAk4EQCAMQX9qIQhBACEJA0AgCiAJQQJ0aiAKIAYgCWpBAnRqKAIANgIAIAlBAWoiCSAIRw0ACwsgACgCRCAPaiIIIAgoAgAgBmsiBjYCACAGBEAgDEF/aiEMQQAhCSAHKAKYICENA0AgCiAJIAxqIhVBAnRqIAogDSAVakECdGooAgA2AgAgCUEBaiIJIAZHDQALCyAAKAJcIQYgByAHKAIIIAcoApwgIglrNgIIIAsgCWshCyAIKAIADQEgB0EQaiAGIAlsQQJ0agshDSAHKAIMIQgCQCACBEAgCEUNASAAKAIYIQpBACEGA0AgBiAKakECdCATakF8aiACIAYgEWxBAXRqLgEAsjgCACAGQQFqIgYgCEcNAAsMAQsgCEUNACAUIAAoAhhBAnRqIAhBAnQQBAsgAEEBNgI4IAAoAhghCiAAIAEgACgCSCAAKAIcIAFsQQJ0aiIMIAdBDGogDSAHQQhqIAAoAlQRAAAhDSAAKAI8IA9qIg8oAgAiBiAHKAIMIghIBEAgByAGNgIMIAYhCAsgByANNgIIIA8gDygCACAIazYCACAHKAIMIQggCkECSA0BIApBf2ohCkEAIQYDQCAMIAZBAnRqIAwgBiAIakECdGooAgA2AgAgBkEBaiIGIApHDQALDAELQQAhCCAHQQA2AgggB0EANgIMC0EAIQYgBygCCCIKIAlqIgkEQANAIAQgBiAQbEEBdGoCf0GAgAIgB0EQaiAGQQJ0aioCACIWQwD//8ZdDQAaQf//ASAWQwD9/0ZeDQAaIBa7RAAAAAAAAOA/oJwiF5lEAAAAAAAA4EFjBEAgF6oMAQtBgICAgHgLOwEAIAZBAWoiBiAJRw0ACwsgCyAKayELIA4gCGsiDkUNASACIAggEWxBAXRqQQAgAhshAiAEIAkgEGxBAXRqIQQgCw0ACwsgACAQNgJcIAMgAygCACAOazYCACAFIAUoAgAgC2s2AgAgACgCVBogB0GgIGokAAu/BQIPfwl9IAFBAnQiBiAAKAJAaiIOKAIAIQdBACEBAkAgACgCPCAGaiIPKAIAIgggAygCACIKTg0AIAAoAighCyAAKAIkIQwgACgCXCENIAUoAgAiA0EAIANBAEobIQUgACgCDCIGsyEbIAAoAhgiEEEBTgRAA0AgASAFRgRAIAUhAQwDCyAAKAIwIhEgB2wiAyADIAZuIgMgBmxrsyEYIAIgCEECdGohEkEEIANrIRMgACgCTCEUQQAhA0MAAAAAIRZDAAAAACEZQwAAAAAhGkMAAAAAIRcDQCAZIBIgA0ECdGoqAgAiFSAUIBMgA0EBaiIDIBFsakECdGoiCSoCAJSSIRkgFiAVIAkqAgSUkiEWIBogFSAJQXxqKgIAlJIhGiAXIBUgCUF4aioCAJSSIRcgAyAQRw0ACyAEIAEgDWxBAnRqIBggG5UiFSAVIBVDiqsqPpQiGJSUIhwgGJMiGCAXlCAVIBUgFUMAAAA/lJQiF5IgFSAXlJMiHSAalJIgGUQAAAAAAADwPyAYu6EgHbuhIBcgFUM7qqq+lJIgHJMiFbuhtpSSIBUgFpSSOAIAIAcgC2oiA0EAIAYgAyAGSRtrIQcgAUEBaiEBIAggDGogAyAGT2oiCCAKSA0ADAIACwALA0AgASAFRgRAIAUhAQwCCyAEIAEgDWxBAnRqIAAoAjAgB2wgBnCzIBuVIhUgFSAVQ4qrKj6UIhaUlCIZIBaTIhpDAAAAAJQgFSAVIBVDAAAAP5SUIhaSIBUgFpSTIhdDAAAAAJSSRAAAAAAAAPA/IBq7oSAXu6EgFiAVQzuqqr6UkiAZkyIVu6G2QwAAAACUkiAVQwAAAACUkjgCACAHIAtqIgJBACAGIAIgBkkbayEHIAFBAWohASAIIAxqIAIgBk9qIgggCkgNAAsLIA8gCDYCACAOIAc2AgAgAQvpBQMPfwR9BHwgAUECdCIGIAAoAkBqIg4oAgAhB0EAIQECQCAAKAI8IAZqIg8oAgAiCCADKAIAIgpODQAgACgCKCELIAAoAiQhDCAAKAJcIQ0gBSgCACIDQQAgA0EAShshBSAAKAIMIgazIRggACgCGCIQQQFOBEADQCABIAVGBEAgBSEBDAMLIAAoAjAiESAHbCIDIAMgBm4iAyAGbGuzIRYgAiAIQQJ0aiESQQQgA2shEyAAKAJMIRRBACEDRAAAAAAAAAAAIRlEAAAAAAAAAAAhGkQAAAAAAAAAACEbRAAAAAAAAAAAIRwDQCAaIBIgA0ECdGoqAgAiFSAUIBMgA0EBaiIDIBFsakECdGoiCSoCAJS7oCEaIBkgFSAJKgIElLugIRkgGyAVIAlBfGoqAgCUu6AhGyAcIBUgCUF4aioCAJS7oCEcIAMgEEcNAAsgBCABIA1sQQJ0aiAcIBYgGJUiFSAVIBVDiqsqPpQiFpSUIhcgFpO7IhyiIBsgFSAVIBVDAAAAP5SUIhaSIBUgFpSTuyIboqAgGkQAAAAAAADwPyAcoSAboSAWIBVDO6qqvpSSIBeTuyIaoba7oqAgGSAaoqC2OAIAIAcgC2oiA0EAIAYgAyAGSRtrIQcgAUEBaiEBIAggDGogAyAGT2oiCCAKSA0ADAIACwALA0AgASAFRgRAIAUhAQwCCyAEIAEgDWxBAnRqIAAoAjAgB2wgBnCzIBiVIhUgFSAVQ4qrKj6UIhaUlCIXIBaTuyIZRAAAAAAAAAAAoiAVIBUgFUMAAAA/lJQiFpIgFSAWlJO7IhpEAAAAAAAAAACioEQAAAAAAADwPyAZoSAaoSAWIBVDO6qqvpSSIBeTuyIZoba7RAAAAAAAAAAAoqAgGUQAAAAAAAAAAKKgtjgCACAHIAtqIgJBACAGIAIgBkkbayEHIAFBAWohASAIIAxqIAIgBk9qIgggCkgNAAsLIA8gCDYCACAOIAc2AgAgAQv1AgINfwF9IAFBAnQiBiAAKAJAaiINKAIAIQdBACEBAkAgACgCPCAGaiIOKAIAIgYgAygCACIJTg0AIAAoAgwhCCAAKAIoIQogACgCJCELIAAoAlwhDCAFKAIAIgNBACADQQBKGyEDIAAoAhgiBUEBTgRAIAAoAkwhDwNAIAEgA0YEQCADIQEMAwsgAiAGQQJ0aiEQIA8gBSAHbEECdGohEUMAAAAAIRNBACEAA0AgEyARIABBAnQiEmoqAgAgECASaioCAJSSIRMgAEEBaiIAIAVHDQALIAQgASAMbEECdGogEzgCACAHIApqIgBBACAIIAAgCEkbayEHIAFBAWohASAGIAtqIAAgCE9qIgYgCUgNAAsMAQsDQCABIANGBEAgAyEBDAILIAQgASAMbEECdGpBADYCACAHIApqIgBBACAIIAAgCEkbayEHIAFBAWohASAGIAtqIAAgCE9qIgYgCUgNAAsLIA4gBjYCACANIAc2AgAgAQv5AwIOfwR8IAFBAnQiBiAAKAJAaiIRKAIAIQdBACEBAkAgACgCPCAGaiISKAIAIgYgAygCACIMTg0AIAAoAgwhCCAAKAIoIQ0gACgCJCEOIAAoAlwhDyAFKAIAIgNBACADQQBKGyEDIAAoAhgiEEEBTgRAIAAoAkwhEwNAIAEgA0YEQCADIQEMAwsgAiAGQQJ0aiEAIBMgByAQbEECdGohCkEAIQVEAAAAAAAAAAAhFEQAAAAAAAAAACEVRAAAAAAAAAAAIRZEAAAAAAAAAAAhFwNAIBcgCiAFQQJ0IglqKgIAIAAgCWoqAgCUu6AhFyAUIAogCUEMciILaioCACAAIAtqKgIAlLugIRQgFSAKIAlBCHIiC2oqAgAgACALaioCAJS7oCEVIBYgCiAJQQRyIglqKgIAIAAgCWoqAgCUu6AhFiAFQQRqIgUgEEgNAAsgBCABIA9sQQJ0aiAXIBagIBWgIBSgtjgCACAHIA1qIgBBACAIIAAgCEkbayEHIAFBAWohASAGIA5qIAAgCE9qIgYgDEgNAAsMAQsDQCABIANGBEAgAyEBDAILIAQgASAPbEECdGpBADYCACAHIA1qIgBBACAIIAAgCEkbayEHIAFBAWohASAGIA5qIAAgCE9qIgYgDEgNAAsLIBIgBjYCACARIAc2AgAgAQv+AwECfyACQYAETwRAIAAgASACEAAaDwsgACACaiEDAkAgACABc0EDcUUEQAJAIAJBAUgEQCAAIQIMAQsgAEEDcUUEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA08NASACQQNxDQALCwJAIANBfHEiAEHAAEkNACACIABBQGoiBEsNAANAIAIgASgCADYCACACIAEoAgQ2AgQgAiABKAIINgIIIAIgASgCDDYCDCACIAEoAhA2AhAgAiABKAIUNgIUIAIgASgCGDYCGCACIAEoAhw2AhwgAiABKAIgNgIgIAIgASgCJDYCJCACIAEoAig2AiggAiABKAIsNgIsIAIgASgCMDYCMCACIAEoAjQ2AjQgAiABKAI4NgI4IAIgASgCPDYCPCABQUBrIQEgAkFAayICIARNDQALCyACIABPDQEDQCACIAEoAgA2AgAgAUEEaiEBIAJBBGoiAiAASQ0ACwwBCyADQQRJBEAgACECDAELIANBfGoiBCAASQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAiABLQABOgABIAIgAS0AAjoAAiACIAEtAAM6AAMgAUEEaiEBIAJBBGoiAiAETQ0ACwsgAiADSQRAA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA0cNAAsLC7kCAQR/AkAgAUUNACACRQ0AAkAgACgCACADRw0AIAAoAgQgBEcNACAAKAIIIAFHDQAgACgCDCACRg0BCyAAIAE2AgggACAENgIEIAAgAzYCACAAKAIMIQUgACACNgIMIAEhBCACIQMDQCAEIAMiBHAiAw0ACyAAIAIgBG4iAzYCDCAAIAEgBG42AggCQCAFRQ0AIAAoAhRFDQAgACgCQCEGQQAhBANAIAYgBEECdGoiASgCACICIAIgBW4iAiAFbGsiB0F/IANuIghLDQIgAiAISw0CIAIgA2wiAiADIAdsIAVuIgNBf3NLDQIgASACIANqIgI2AgAgAiAAKAIMIgJPBEAgASACQX9qNgIACyAEQQFqIgQgACgCFE8NASAAKAIMIQMMAAALAAsgACgCNEUEQA8LIAAQChoLC6sHAQl/IAAoAgQiB0EDcSECIAAgB0F4cSIGaiEEAkBBhC0oAgAiBSAASw0AIAJBAUYNAAsCQCACRQRAQQAhAiABQYACSQ0BIAYgAUEEak8EQCAAIQIgBiABa0HUMCgCAEEBdE0NAgtBAA8LAkAgBiABTwRAIAYgAWsiAkEQSQ0BIAAgB0EBcSABckECcjYCBCAAIAFqIgEgAkEDcjYCBCAEIAQoAgRBAXI2AgQgASACEAsMAQtBACECIARBjC0oAgBGBEBBgC0oAgAgBmoiBSABTQ0CIAAgB0EBcSABckECcjYCBCAAIAFqIgIgBSABayIBQQFyNgIEQYAtIAE2AgBBjC0gAjYCAAwBCyAEQYgtKAIARgRAQfwsKAIAIAZqIgUgAUkNAgJAIAUgAWsiAkEQTwRAIAAgB0EBcSABckECcjYCBCAAIAFqIgEgAkEBcjYCBCAAIAVqIgUgAjYCACAFIAUoAgRBfnE2AgQMAQsgACAHQQFxIAVyQQJyNgIEIAAgBWoiASABKAIEQQFyNgIEQQAhAkEAIQELQYgtIAE2AgBB/CwgAjYCAAwBCyAEKAIEIgNBAnENASADQXhxIAZqIgkgAUkNASAJIAFrIQoCQCADQf8BTQRAIAQoAggiBiADQQN2IgVBA3RBnC1qRxogBiAEKAIMIghGBEBB9CxB9CwoAgBBfiAFd3E2AgAMAgsgBiAINgIMIAggBjYCCAwBCyAEKAIYIQgCQCAEIAQoAgwiA0cEQCAFIAQoAggiAk0EQCACKAIMGgsgAiADNgIMIAMgAjYCCAwBCwJAIARBFGoiAigCACIGDQAgBEEQaiICKAIAIgYNAEEAIQMMAQsDQCACIQUgBiIDQRRqIgIoAgAiBg0AIANBEGohAiADKAIQIgYNAAsgBUEANgIACyAIRQ0AAkAgBCAEKAIcIgVBAnRBpC9qIgIoAgBGBEAgAiADNgIAIAMNAUH4LEH4LCgCAEF+IAV3cTYCAAwCCyAIQRBBFCAIKAIQIARGG2ogAzYCACADRQ0BCyADIAg2AhggBCgCECICBEAgAyACNgIQIAIgAzYCGAsgBCgCFCICRQ0AIAMgAjYCFCACIAM2AhgLIApBD00EQCAAIAdBAXEgCXJBAnI2AgQgACAJaiIBIAEoAgRBAXI2AgQMAQsgACAHQQFxIAFyQQJyNgIEIAAgAWoiAiAKQQNyNgIEIAAgCWoiASABKAIEQQFyNgIEIAIgChALCyAAIQILIAILxQEBAn8jAEEQayIBJAACQCAAvUIgiKdB/////wdxIgJB+8Ok/wNNBEAgAkGAgMDyA0kNASAARAAAAAAAAAAAQQAQCCEADAELIAJBgIDA/wdPBEAgACAAoSEADAELAkACQAJAAkAgACABEBhBA3EOAwABAgMLIAErAwAgASsDCEEBEAghAAwDCyABKwMAIAErAwgQDSEADAILIAErAwAgASsDCEEBEAiaIQAMAQsgASsDACABKwMIEA2aIQALIAFBEGokACAAC9cCAQJ/AkACQAJAIABFDQAgAUUNACACRQ0AIAVBC0kNAQsgBkUNASAGQQM2AgBBAA8LQeAAEAYiB0UEQEEAIQcgBkUNASAGQQE2AgBBAA8LIAdCADcCACAHQYCAgPwDNgIsIAdBfzYCECAHQoGAgIAQNwJYIAcgADYCFCAHQaABNgIgIAdCADcCCCAHIABBAnQiABAGIgg2AjwCQCAIRQ0AIAcgABAGIgg2AkQgCEUNACAHIAAQBiIANgJAIABFDQAgByAFNgIQIAcgASACIAMgBBAUAkAgBxAKIgBFBEAgB0EBNgI0DAELIAcoAkgQAiAHKAJMEAIgBygCPBACIAcoAkQQAiAHKAJAEAIgBxACQQAhBwsgBkUNASAGIAA2AgAgBw8LIAYEQCAGQQE2AgALIAcoAkwQAiAHKAI8EAIgBygCRBACIAcoAkAQAiAHEAJBACEHCyAHC8sJAwV/AX4EfCMAQTBrIgQkAAJAAkACQCAAvSIHQiCIpyICQf////8HcSIDQfrUvYAETQRAIAJB//8/cUH7wyRGDQEgA0H8souABE0EQCAHQgBZBEAgASAARAAAQFT7Ifm/oCIARDFjYhphtNC9oCIIOQMAIAEgACAIoUQxY2IaYbTQvaA5AwhBASECDAULIAEgAEQAAEBU+yH5P6AiAEQxY2IaYbTQPaAiCDkDACABIAAgCKFEMWNiGmG00D2gOQMIQX8hAgwECyAHQgBZBEAgASAARAAAQFT7IQnAoCIARDFjYhphtOC9oCIIOQMAIAEgACAIoUQxY2IaYbTgvaA5AwhBAiECDAQLIAEgAEQAAEBU+yEJQKAiAEQxY2IaYbTgPaAiCDkDACABIAAgCKFEMWNiGmG04D2gOQMIQX4hAgwDCyADQbuM8YAETQRAIANBvPvXgARNBEAgA0H8ssuABEYNAiAHQgBZBEAgASAARAAAMH982RLAoCIARMqUk6eRDum9oCIIOQMAIAEgACAIoUTKlJOnkQ7pvaA5AwhBAyECDAULIAEgAEQAADB/fNkSQKAiAETKlJOnkQ7pPaAiCDkDACABIAAgCKFEypSTp5EO6T2gOQMIQX0hAgwECyADQfvD5IAERg0BIAdCAFkEQCABIABEAABAVPshGcCgIgBEMWNiGmG08L2gIgg5AwAgASAAIAihRDFjYhphtPC9oDkDCEEEIQIMBAsgASAARAAAQFT7IRlAoCIARDFjYhphtPA9oCIIOQMAIAEgACAIoUQxY2IaYbTwPaA5AwhBfCECDAMLIANB+sPkiQRLDQELIAEgACAARIPIyW0wX+Q/okQAAAAAAAA4Q6BEAAAAAAAAOMOgIglEAABAVPsh+b+ioCIIIAlEMWNiGmG00D2iIguhIgA5AwAgA0EUdiIFIAC9QjSIp0H/D3FrQRFIIQMCfyAJmUQAAAAAAADgQWMEQCAJqgwBC0GAgICAeAshAgJAIAMNACABIAggCUQAAGAaYbTQPaIiAKEiCiAJRHNwAy6KGaM7oiAIIAqhIAChoSILoSIAOQMAIAUgAL1CNIinQf8PcWtBMkgEQCAKIQgMAQsgASAKIAlEAAAALooZozuiIgChIgggCUTBSSAlmoN7OaIgCiAIoSAAoaEiC6EiADkDAAsgASAIIAChIAuhOQMIDAELIANBgIDA/wdPBEAgASAAIAChIgA5AwAgASAAOQMIQQAhAgwBCyAHQv////////8Hg0KAgICAgICAsMEAhL8hAEEAIQJBASEFA0AgBEEQaiACQQN0agJ/IACZRAAAAAAAAOBBYwRAIACqDAELQYCAgIB4C7ciCDkDACAAIAihRAAAAAAAAHBBoiEAQQEhAiAFQQFxIQZBACEFIAYNAAsgBCAAOQMgAkAgAEQAAAAAAAAAAGIEQEECIQIMAQtBASEFA0AgBSICQX9qIQUgBEEQaiACQQN0aisDAEQAAAAAAAAAAGENAAsLIARBEGogBCADQRR2Qep3aiACQQFqEBkhAiAEKwMAIQAgB0J/VwRAIAEgAJo5AwAgASAEKwMImjkDCEEAIAJrIQIMAQsgASAAOQMAIAEgBCkDCDcDCAsgBEEwaiQAIAILtA4CEH8CfCMAQbAEayIGJAAgAiACQX1qQRhtIgRBACAEQQBKGyINQWhsaiEIQdQWKAIAIgkgA0F/aiIHakEATgRAIAMgCWohBCANIAdrIQIDQCAGQcACaiAFQQN0aiACQQBIBHxEAAAAAAAAAAAFIAJBAnRB4BZqKAIAtws5AwAgAkEBaiECIAVBAWoiBSAERw0ACwsgCEFoaiEKQQAhBCAJQQAgCUEAShshBSADQQFIIQsDQAJAIAsEQEQAAAAAAAAAACEUDAELIAQgB2ohDEEAIQJEAAAAAAAAAAAhFANAIBQgACACQQN0aisDACAGQcACaiAMIAJrQQN0aisDAKKgIRQgAkEBaiICIANHDQALCyAGIARBA3RqIBQ5AwAgBCAFRiECIARBAWohBCACRQ0AC0EvIAhrIRBBMCAIayEOIAhBZ2ohESAJIQQCQANAIAYgBEEDdGorAwAhFEEAIQIgBCEFIARBAUgiB0UEQANAIAZB4ANqIAJBAnRqAn8gFAJ/IBREAAAAAAAAcD6iIhSZRAAAAAAAAOBBYwRAIBSqDAELQYCAgIB4C7ciFEQAAAAAAABwwaKgIhWZRAAAAAAAAOBBYwRAIBWqDAELQYCAgIB4CzYCACAGIAVBf2oiBUEDdGorAwAgFKAhFCACQQFqIgIgBEcNAAsLAn8gFCAKEAUiFCAURAAAAAAAAMA/opxEAAAAAAAAIMCioCIUmUQAAAAAAADgQWMEQCAUqgwBC0GAgICAeAshCyAUIAu3oSEUAkACQAJAAn8gCkEBSCISRQRAIARBAnQgBmoiAiACKALcAyICIAIgDnUiAiAOdGsiBTYC3AMgAiALaiELIAUgEHUMAQsgCg0BIARBAnQgBmooAtwDQRd1CyIMQQFIDQIMAQtBAiEMIBREAAAAAAAA4D9mQQFzRQ0AQQAhDAwBC0EAIQJBACEFIAdFBEADQCAGQeADaiACQQJ0aiITKAIAIQ9B////ByEHAn8CQCAFDQBBgICACCEHIA8NAEEADAELIBMgByAPazYCAEEBCyEFIAJBAWoiAiAERw0ACwsCQCASDQACQAJAIBEOAgABAgsgBEECdCAGaiICIAIoAtwDQf///wNxNgLcAwwBCyAEQQJ0IAZqIgIgAigC3ANB////AXE2AtwDCyALQQFqIQsgDEECRw0ARAAAAAAAAPA/IBShIRRBAiEMIAVFDQAgFEQAAAAAAADwPyAKEAWhIRQLIBREAAAAAAAAAABhBEBBACEFAkAgBCICIAlMDQADQCAGQeADaiACQX9qIgJBAnRqKAIAIAVyIQUgAiAJSg0ACyAFRQ0AIAohCANAIAhBaGohCCAGQeADaiAEQX9qIgRBAnRqKAIARQ0ACwwDC0EBIQIDQCACIgVBAWohAiAGQeADaiAJIAVrQQJ0aigCAEUNAAsgBCAFaiEFA0AgBkHAAmogAyAEaiIHQQN0aiAEQQFqIgQgDWpBAnRB4BZqKAIAtzkDAEEAIQJEAAAAAAAAAAAhFCADQQFOBEADQCAUIAAgAkEDdGorAwAgBkHAAmogByACa0EDdGorAwCioCEUIAJBAWoiAiADRw0ACwsgBiAEQQN0aiAUOQMAIAQgBUgNAAsgBSEEDAELCwJAIBRBACAKaxAFIhREAAAAAAAAcEFmQQFzRQRAIAZB4ANqIARBAnRqAn8gFAJ/IBREAAAAAAAAcD6iIhSZRAAAAAAAAOBBYwRAIBSqDAELQYCAgIB4CyICt0QAAAAAAABwwaKgIhSZRAAAAAAAAOBBYwRAIBSqDAELQYCAgIB4CzYCACAEQQFqIQQMAQsCfyAUmUQAAAAAAADgQWMEQCAUqgwBC0GAgICAeAshAiAKIQgLIAZB4ANqIARBAnRqIAI2AgALRAAAAAAAAPA/IAgQBSEUAkAgBEF/TA0AIAQhAgNAIAYgAkEDdGogFCAGQeADaiACQQJ0aigCALeiOQMAIBREAAAAAAAAcD6iIRQgAkEASiEAIAJBf2ohAiAADQALQQAhByAEQQBIDQAgCUEAIAlBAEobIQAgBCEFA0AgACAHIAAgB0kbIQMgBCAFayEIQQAhAkQAAAAAAAAAACEUA0AgFCACQQN0QbAsaisDACAGIAIgBWpBA3RqKwMAoqAhFCACIANHIQogAkEBaiECIAoNAAsgBkGgAWogCEEDdGogFDkDACAFQX9qIQUgBCAHRyECIAdBAWohByACDQALC0QAAAAAAAAAACEUIARBAE4EQCAEIQIDQCAUIAZBoAFqIAJBA3RqKwMAoCEUIAJBAEohACACQX9qIQIgAA0ACwsgASAUmiAUIAwbOQMAIAYrA6ABIBShIRRBASECIARBAU4EQANAIBQgBkGgAWogAkEDdGorAwCgIRQgAiAERyEAIAJBAWohAiAADQALCyABIBSaIBQgDBs5AwggBkGwBGokACALQQdxCxoAIABBBE0EQCAAQQJ0QbAWaigCAA8LQewICxYAIAEgACgCADYCACACIAAoAgQ2AgALzAEBBn8gACgCXCEIIAIoAgAhBiAEKAIAIQcgACAAKAIUIgU2AlwgACgCWCEJIAAgBTYCWAJAIAVFDQBBACEFIAFFBEADQCAEIAc2AgAgAiAGNgIAIAAgBUEAIAIgAyAFQQF0aiAEEA4gBUEBaiIFIAAoAhRJDQAMAgALAAsDQCAEIAc2AgAgAiAGNgIAIAAgBSABIAVBAXQiCmogAiADIApqIAQQDiAFQQFqIgUgACgCFEkNAAsLIAAgCDYCXCAAIAk2AlggACgCVEEFRgspACAAKAJIEAIgACgCTBACIAAoAjwQAiAAKAJEEAIgACgCQBACIAAQAgvDAQEHfyABQQJ0IgYgACgCQGoiBygCACECQQAhAQJAIAAoAjwgBmoiCCgCACIGIAMoAgAiCU4NACAAKAIMIQMgACgCKCEKIAAoAiQhCyAAKAJcIQwgBSgCACIAQQAgAEEAShshAANAIAAgAUYEQCAAIQEMAgsgBCABIAxsQQJ0akEANgIAIAIgCmoiBUEAIAMgBSADSRtrIQIgAUEBaiEBIAYgC2ogBSADT2oiBiAJSA0ACwsgCCAGNgIAIAcgAjYCACABCxIAIAAgASACIAEgAiADIAQQFwsDAAELC9wkBgBBgAgLpgFTdWNjZXNzLgBNZW1vcnkgYWxsb2NhdGlvbiBmYWlsZWQuAEJhZCByZXNhbXBsZXIgc3RhdGUuAEludmFsaWQgYXJndW1lbnQuAElucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBvdmVybGFwLgBVbmtub3duIGVycm9yLiBCYWQgZXJyb3IgY29kZSBvciBzdHJhbmdlIHZlcnNpb24gbWlzbWF0Y2guAEGwCQvQCAgAAAAEAAAA4XpUP/YoXD+MBQAAEAAAAAQAAACamVk/rkdhP4wFAAAgAAAABAAAAMHKYT/D9Wg/jAUAADAAAAAIAAAAuB5lP4PAaj+UBQAAQAAAAAgAAACoxms/16NwP5QFAABQAAAAEAAAADEIbD/Xo3A/nAUAAGAAAAAQAAAA16NwP4XrcT+cBQAAgAAAABAAAAAzM3M/MzNzP5wFAACgAAAAEAAAAI/CdT+PwnU/nAUAAMAAAAAgAAAA2c53P9nOdz+kBQAAAAEAACAAAACamXk/mpl5P6QFAACwBQAAIAAAANAGAAAgAAAA8AcAACAAAAAQCQAAQAAAAAAAAAAlkeC6IOrvPwAAAAAAAPA/JZHguiDq7z/eSyvPzajvP1of/5rmPO8/Vc8Xtdqn7j++oGT2ouvtP9eQbjq4Cu0/i+jPZQcI7D+13m+04+bqP1gAdBT3quk/InJVNDFY6D9Qxa5ptfLmP1jktgHIfuU/lEUnbLsA5D9HK0pL3XziP6mj42pk9+A/qqmXpb7o3j8WxHqCSO/bP0tmzI+FCdk/P+nhV+491j/Cam59P5LTP6C+p2ppC9E/K3JfOQhbzT8nmWIvkPfIP6EHyq8X8cQ/ymKsgIxKwT8ixb5sVAq8P2GFAIUfQbY/j95wH7k1sT9DhMmeTsOpPyF7e98ReKI/80co6LznmD9Z7Q7n6XWOPyECDqFKzX4/AAAAAAAAAADBU0zOHuLvPwAAAAAAAPA/wVNMzh7i7z/PQsiaDYnvPwxt55h/9u4/iBIteTwt7j+aTfS3DDHtP7WwwLqeBuw/zJkOGWaz6j/ceSzHdT3pP1GrIrtWq+c/lTbJTdwD5j91q+ek903kP3cAm96LkOI/E4HqH0TS4D/GAMPR2TLeP1M+BFWj19o/2QhhwT+d1z+oagbhn4zUP24kfRgprdE/Wu959kMJzj8bAGArVy7JP1GWaxuQzsQ/i+xardnrwD/p1ilefgq7P98X+tRvLrU/Bg2BTAA4sD/KvUTl9C+oP6YV+O2YeKE/S/VT0nlDmD+Uz5/0jQGQPwBuNz3/qIM/3mkZRs2ZdT/ghYzL4ShjP/yp8dJNYkA/AAAAAAAAAAC5pqOQItrvPwAAAAAAAPA/uaajkCLa7z+FCxbae2nvP0RGzXjXsO4/JlPDhsC07T8z2i5dVnvsP6nOFzkTDOs/qepxIYdv6T9y5pEeCq/nP9bRacRp1OU/wKekFJXp4z85oADlSvjhP+qDG9/NCeA/VWrVMkJN3D9DXd77n6zYPw9a9sGFPtU/HwXbykMN0j+gZzcjGEHOP4yLevPh+sg/8K5IhvtMxD904ycfzDfAP+5his0ib7k/O05VygCKsz/oYS7K6FetPyQzzSoieaU/u2lt+cyCnj8iLHRvj++UPz4R3RbZjIs/XcJfm6YygT9QCLLYBQd0P4HIKr4EG2U/3O6rk6/bUj8bypqibUY3PwBBkBILmATIUQzShPTvPwAAAAAAAPA/yFEM0oT07z/2lQfpKdLvP9rTxPEyme8/1P0Q2Q9K7z9+n7tuW+XuP2HBP53Za+4/HdfxJXXe7T9qf2/sPD7tP8nqNcFgjOw/dyRFAS7K6z8evH7aC/nqPzrQvzR3Guo/9SUjgP4v6T/yQEODPTvoPw4HU97YPec/9/Kvo3k55j9MyMUgyS/lP864eJFsIuQ//5laGQET4z8vnDHtFwPiP2PZBs0y9OA/TVqGcoHP3z/Nj2T7Nb7dPxXGN5AFt9s/4AetqD282T9gMwqT88/XP/Md/MQB9NU/SoVn+AUq1D/nzTwUYHPSP43KNDcy0dA/2NF68MGIzj+vJ3gSKpvLP8hIk9552sg/tc9bIx9Hxj89V0IUH+HDP7XNAUAdqME/TbqQu8Y2vz8uDCY41HO7P2aSBQrEBLg/gFQWx3nmtD9iSE4mbhWyP6QVhJeFG68/7LLrIKeWqj+XqEFFk5OmPz54L+9YCaM/1eesR8jdnz9sz00XOXaaP/Tx2Oj/yZU/Dwu1pnnHkT9VF2z6HruMP/6ksSiy94Y/PLeW6n4lgj+l+7XMVE58P2cfVHefwnU/BcR/FTt1cD90f7OcnW9oP9Pw8wCSwGE/91Lb+qcjWT8/wazteUBRP/FCAJH6wkY/e7LNUz6APD8mUZIi8I8wP8dUbmB6FCE/fYl/NyCrCz/xaOOItfjkPgBBsRYLEQQAAAkEAAAjBAAAOAQAAEoEAEHQFgvXFQMAAAAEAAAABAAAAAYAAACD+aIARE5uAPwpFQDRVycA3TT1AGLbwAA8mZUAQZBDAGNR/gC73qsAt2HFADpuJADSTUIASQbgAAnqLgAcktEA6x3+ACmxHADoPqcA9TWCAES7LgCc6YQAtCZwAEF+XwDWkTkAU4M5AJz0OQCLX4QAKPm9APgfOwDe/5cAD5gFABEv7wAKWosAbR9tAM9+NgAJyycARk+3AJ5mPwAt6l8Auid1AOXrxwA9e/EA9zkHAJJSigD7a+oAH7FfAAhdjQAwA1YAe/xGAPCrawAgvM8ANvSaAOOpHQBeYZEACBvmAIWZZQCgFF8AjUBoAIDY/wAnc00ABgYxAMpWFQDJqHMAe+JgAGuMwAAZxEcAzWfDAAno3ABZgyoAi3bEAKYclgBEr90AGVfRAKU+BQAFB/8AM34/AMIy6ACYT94Au30yACY9wwAea+8An/heADUfOgB/8soA8YcdAHyQIQBqJHwA1W76ADAtdwAVO0MAtRTGAMMZnQCtxMIALE1BAAwAXQCGfUYA43EtAJvGmgAzYgAAtNJ8ALSnlwA3VdUA1z72AKMQGABNdvwAZJ0qAHDXqwBjfPgAerBXABcV5wDASVYAO9bZAKeEOAAkI8sA1op3AFpUIwAAH7kA8QobABnO3wCfMf8AZh5qAJlXYQCs+0cAfn/YACJltwAy6IkA5r9gAO/EzQBsNgkAXT/UABbe1wBYO94A3puSANIiKAAohugA4lhNAMbKMgAI4xYA4H3LABfAUADzHacAGOBbAC4TNACDEmIAg0gBAPWOWwCtsH8AHunyAEhKQwAQZ9MAqt3YAK5fQgBqYc4ACiikANOZtAAGpvIAXHd/AKPCgwBhPIgAinN4AK+MWgBv170ALaZjAPS/ywCNge8AJsFnAFXKRQDK2TYAKKjSAMJhjQASyXcABCYUABJGmwDEWcQAyMVEAE2ykQAAF/MA1EOtAClJ5QD91RAAAL78AB6UzABwzu4AEz71AOzxgACz58MAx/goAJMFlADBcT4ALgmzAAtF8wCIEpwAqyB7AC61nwBHksIAezIvAAxVbQByp5AAa+cfADHLlgB5FkoAQXniAPTfiQDolJcA4uaEAJkxlwCI7WsAX182ALv9DgBImrQAZ6RsAHFyQgCNXTIAnxW4ALzlCQCNMSUA93Q5ADAFHAANDAEASwhoACzuWABHqpAAdOcCAL3WJAD3faYAbkhyAJ8W7wCOlKYAtJH2ANFTUQDPCvIAIJgzAPVLfgCyY2gA3T5fAEBdAwCFiX8AVVIpADdkwABt2BAAMkgyAFtMdQBOcdQARVRuAAsJwQAq9WkAFGbVACcHnQBdBFAAtDvbAOp2xQCH+RcASWt9AB0nugCWaSkAxsysAK0UVACQ4moAiNmJACxyUAAEpL4AdweUAPMwcAAA/CcA6nGoAGbCSQBk4D0Al92DAKM/lwBDlP0ADYaMADFB3gCSOZ0A3XCMABe35wAI3zsAFTcrAFyAoABagJMAEBGSAA/o2ABsgK8A2/9LADiQDwBZGHYAYqUVAGHLuwDHibkAEEC9ANLyBABJdScA67b2ANsiuwAKFKoAiSYvAGSDdgAJOzMADpQaAFE6qgAdo8IAr+2uAFwmEgBtwk0ALXqcAMBWlwADP4MACfD2ACtAjABtMZkAObQHAAwgFQDYw1sA9ZLEAMatSwBOyqUApzfNAOapNgCrkpQA3UJoABlj3gB2jO8AaItSAPzbNwCuoasA3xUxAACuoQAM+9oAZE1mAO0FtwApZTAAV1a/AEf/OgBq+bkAdb7zACiT3wCrgDAAZoz2AATLFQD6IgYA2eQdAD2zpABXG48ANs0JAE5C6QATvqQAMyO1APCqGgBPZagA0sGlAAs/DwBbeM0AI/l2AHuLBACJF3IAxqZTAG9u4gDv6wAAm0pYAMTatwCqZroAds/PANECHQCx8S0AjJnBAMOtdwCGSNoA912gAMaA9ACs8C8A3eyaAD9cvADQ3m0AkMcfACrbtgCjJToAAK+aAK1TkwC2VwQAKS20AEuAfgDaB6cAdqoOAHtZoQAWEioA3LctAPrl/QCJ2/4Aib79AOR2bAAGqfwAPoBwAIVuFQD9h/8AKD4HAGFnMwAqGIYATb3qALPnrwCPbW4AlWc5ADG/WwCE10gAMN8WAMctQwAlYTUAyXDOADDLuAC/bP0ApACiAAVs5ABa3aAAIW9HAGIS0gC5XIQAcGFJAGtW4ACZUgEAUFU3AB7VtwAz8cQAE25fAF0w5ACFLqkAHbLDAKEyNgAIt6QA6rHUABb3IQCPaeQAJ/93AAwDgACNQC0AT82gACClmQCzotMAL10KALT5QgAR2ssAfb7QAJvbwQCrF70AyqKBAAhqXAAuVRcAJwBVAH8U8ADhB4YAFAtkAJZBjQCHvt4A2v0qAGsltgB7iTQABfP+ALm/ngBoak8ASiqoAE/EWgAt+LwA11qYAPTHlQANTY0AIDqmAKRXXwAUP7EAgDiVAMwgAQBx3YYAyd62AL9g9QBNZREAAQdrAIywrACywNAAUVVIAB77DgCVcsMAowY7AMBANQAG3HsA4EXMAE4p+gDWysgA6PNBAHxk3gCbZNgA2b4xAKSXwwB3WNQAaePFAPDaEwC6OjwARhhGAFV1XwDSvfUAbpLGAKwuXQAORO0AHD5CAGHEhwAp/ekA59bzACJ8ygBvkTUACODFAP/XjQBuauIAsP3GAJMIwQB8XXQAa62yAM1unQA+cnsAxhFqAPfPqQApc98Atcm6ALcAUQDisg0AdLokAOV9YAB02IoADRUsAIEYDAB+ZpQAASkWAJ96dgD9/b4AVkXvANl+NgDs2RMAi7q5AMSX/AAxqCcA8W7DAJTFNgDYqFYAtKi1AM/MDgASiS0Ab1c0ACxWiQCZzuMA1iC5AGteqgA+KpwAEV/MAP0LSgDh9PsAjjttAOKGLADp1IQA/LSpAO/u0QAuNckALzlhADghRAAb2cgAgfwKAPtKagAvHNgAU7SEAE6ZjABUIswAKlXcAMDG1gALGZYAGnC4AGmVZAAmWmAAP1LuAH8RDwD0tREA/Mv1ADS8LQA0vO4A6F3MAN1eYABnjpsAkjPvAMkXuABhWJsA4Ve8AFGDxgDYPhAA3XFIAC0c3QCvGKEAISxGAFnz1wDZepgAnlTAAE+G+gBWBvwA5XmuAIkiNgA4rSIAZ5PcAFXoqgCCJjgAyuebAFENpACZM7EAqdcOAGkFSABlsvAAf4inAIhMlwD50TYAIZKzAHuCSgCYzyEAQJ/cANxHVQDhdDoAZ+tCAP6d3wBe1F8Ae2ekALqsegBV9qIAK4gjAEG6VQBZbggAISqGADlHgwCJ4+YA5Z7UAEn7QAD/VukAHA/KAMVZigCU+isA08HFAA/FzwDbWq4AR8WGAIVDYgAhhjsALHmUABBhhwAqTHsAgCwaAEO/EgCIJpAAeDyJAKjE5ADl23sAxDrCACb06gD3Z4oADZK/AGWjKwA9k7EAvXwLAKRR3AAn3WMAaeHdAJqUGQCoKZUAaM4oAAnttABEnyAATpjKAHCCYwB+fCMAD7kyAKf1jgAUVucAIfEIALWdKgBvfk0ApRlRALX5qwCC39YAlt1hABY2AgDEOp8Ag6KhAHLtbQA5jXoAgripAGsyXABGJ1sAADTtANIAdwD89FUAAVlNAOBxgABBsywLPUD7Ifk/AAAAAC1EdD4AAACAmEb4PAAAAGBRzHg7AAAAgIMb8DkAAABAICV6OAAAAIAiguM2AAAAAB3zaTU=");return WebAssembly.instantiate(c,b).then(a,function(a){L("failed to asynchronously prepare wasm: "+a),p(a)})}(function(b){a(b.instance)}),{}}(),ta=A.___wasm_call_ctors=function(){return(ta=A.___wasm_call_ctors=A.asm.c).apply(null,arguments)},ua=A._speex_resampler_init=function(){return(ua=A._speex_resampler_init=A.asm.d).apply(null,arguments)},va=A._free=function(){return(va=A._free=A.asm.e).apply(null,arguments)},wa=A._speex_resampler_destroy=function(){return(wa=A._speex_resampler_destroy=A.asm.f).apply(null,arguments)},xa=A._speex_resampler_process_interleaved_int=function(){return(xa=A._speex_resampler_process_interleaved_int=A.asm.g).apply(null,arguments)},ya=A._speex_resampler_get_rate=function(){return(ya=A._speex_resampler_get_rate=A.asm.h).apply(null,arguments)},za=A._speex_resampler_strerror=function(){return(za=A._speex_resampler_strerror=A.asm.i).apply(null,arguments)},Aa=A._malloc=function(){return(Aa=A._malloc=A.asm.j).apply(null,arguments)};A.setValue=b,A.getValue=c,A.AsciiToString=d;var Ba;if(ma=function a(){Ba||x(),Ba||(ma=a)},A.run=x,A.preInit)for("function"==typeof A.preInit&&(A.preInit=[A.preInit]);0<A.preInit.length;)A.preInit.pop()();return N=!0,x(),a.ready}}();\r
	}\r
	get SpeexResampler() {\r
		return function(cc, is, os, q){return new SpeexResampler(cc, is, os, q);}\r
	}\r
	\r
	get emitterRms() {\r
		if (this.calculateRmsVolume){\r
			let rms = Math.sqrt(this._emitterSqrSum / this._emitterSamples);\r
			this._emitterSqrSum = 0;\r
			this._emitterSamples = 0;\r
			return rms;\r
		}else{\r
			return 0;\r
		}\r
	}\r
  \r
	constructor(options) {\r
		super();\r
		\r
		let that = this;\r
		this.moduleId = "speex-resample-switch-" + Math.round(Math.random() * 1000000) + "-" + Date.now();\r
		this.doDebug = options.processorOptions.doDebug || false;\r
		this.isReadyForProcessing = false;\r
		this.EXPECTED_SAMPLE_SIZE = 128;	//currently 128, but might change in future ... and even become variable! (I hope not)\r
\r
		this.sourceSamplerate = options.processorOptions.ctxInfo.sampleRate;	//INFO: should be same as global scope 'sampleRate'\r
\r
		this.targetSampleRate = options.processorOptions.targetSampleRate || options.processorOptions.ctxInfo.targetSampleRate || 16000;\r
		this.resampleQuality = (options.processorOptions.resampleQuality != undefined)? options.processorOptions.resampleQuality : 7;	//number from 1 to 10, 1 is fast but of bad quality, 10 is slow but best quality (less noise/aliasing, a higher complexity and a higher latency)\r
		this.emitterBufferSize = options.processorOptions.bufferSize || 512;	//TODO: there is probably a mismatch (we should pull go back to the idea of making the buffer bigger but pull less)\r
		this.channelCount = 1; //options.processorOptions.channels || 1;		//TODO: supports ONLY MONO atm\r
		this._bytesPerSample = 2;			//for buffer (aka Xint8 Array) length is in bytes (8bit), so *2 to get 16bit length;\r
		this.resampler;\r
		\r
		this.passThroughMode = (options.processorOptions.passThroughMode != undefined)? options.processorOptions.passThroughMode : 1;	//0: nothing, 1: original, 2: 16bit PCM\r
		this.calculateRmsVolume = (options.processorOptions.calculateRmsVolume != undefined)? options.processorOptions.calculateRmsVolume : true;\r
		this.gain = options.processorOptions.gain || 1.0;\r
				\r
		//resampling - modes 0: no change, -1: downsampling, 1: upsampling\r
		this.resamplingMode = (this.targetSampleRate < this.sourceSamplerate? -1 : (this.targetSampleRate > this.sourceSamplerate? 1 : 0));\r
		this.resampleRatio = this.targetSampleRate/this.sourceSamplerate;\r
		\r
		function init(){\r
			var expectedSizeAfterResampling = Math.ceil(that.EXPECTED_SAMPLE_SIZE * that.resampleRatio);\r
			if (expectedSizeAfterResampling > that.emitterBufferSize){\r
				//TODO: if we don't use a string this shows up as "Uncaught [object ...]" in worker.onerror ?! :-/\r
				throw {name: "BufferSizeException", message: ("Output buffer has to be bigger than (resampleRatio*inputSampleSize)! Currently: " + expectedSizeAfterResampling + " > " + that.emitterBufferSize)};\r
			}\r
			var ringBufferSize = expectedSizeAfterResampling + that.emitterBufferSize;			//this should be a safe size\r
			\r
			//RingBuffers - alloc. space for emitter\r
			//that._inputRingBuffer = new RingBuffer(that.collectorBufferSize + that.EXPECTED_SAMPLE_SIZE, that.channelCount);\r
			that._outputRingBuffer = new RingBuffer(ringBufferSize, that.channelCount, "Int16");\r
\r
			//Input and output (for each channel) - TODO: set size, one for each channel\r
			//that._newInputBuffer = [new Float32Array(that.collectorBufferSize)];\r
			that._newInputBuffer = [new Int16Array(that.EXPECTED_SAMPLE_SIZE)];		\r
			//TODO: for interleaved STEREO we need [new Uint8Array(that.EXPECTED_SAMPLE_SIZE * that.channelCount * that._bytesPerSample)];\r
				//... or do we?\r
				//NOTE: we could use DataView instead\r
				//let buffer = new ArrayBuffer(that.EXPECTED_SAMPLE_SIZE * that.channelCount * that._bytesPerSample);\r
				//let that._inputDataView = new DataView(buffer);\r
			that._newOutputBuffer = [new Int16Array(that.emitterBufferSize)];\r
			\r
			that._isFirstValidProcess = true;\r
			//that._lastEmit = 0;\r
			\r
			that._emitterSqrSum = 0;\r
			that._emitterSamples = 0;\r
			that._hasGain = (that.gain < 1 || that.gain > 1);\r
		}\r
		init();\r
		\r
		this.floatTo16BitInterleavedPCM = function(inFloat32, outInt16, i){\r
			//TODO: if not MONO interleave channels - requires: UInt8Array !!! (or does it?)\r
			/*\r
			for (let channel = 0; channel < that.channelCount; channel++){\r
				//pass through original\r
				output[channel][i] = inFloat32[channel][i];\r
				//clip and floatTo16BitPCM\r
				let sampleVal = Math.max(-1, Math.min(1, inFloat32[channel][i])) * 32767.5 - 0.5;\r
				//assign\r
				let outputIndex = (i * that.channelCount + channel) * that._bytesPerSample;\r
				that._newInputBuffer[channel][outputIndex] = sampleVal;\r
				that._newInputBuffer[channel][outputIndex + 1] = sampleVal >> 8;\r
			}\r
			*/\r
				\r
			let sampleVal = Math.max(-1, Math.min(1, inFloat32[0][i]));		//we need -1 to 1 - If this is the first processor we could skip clipping\r
			//that._inputDataView.setInt16(i * 2, sampleVal < 0 ? sampleVal * 0x8000 : sampleVal * 0x7FFF, true);	// 16-bit signed range is -32768 to 32767, littleEndian byte order.\r
			outInt16[0][i] = sampleVal < 0 ? sampleVal * 0x8000 : sampleVal * 0x7FFF;\r
		}\r
		\r
		function ready(skipResampler){\r
			if (!skipResampler){\r
				//use new resampler for every instance - it keeps data from previous calls to improve the resampling\r
				that.resampler = that.SpeexResampler(\r
					that.channelCount, that.sourceSamplerate, that.targetSampleRate, that.resampleQuality\r
				);\r
			}\r
			that.isReadyForProcessing = true;\r
			that.port.postMessage({\r
				moduleState: 1,\r
				moduleInfo: {\r
					moduleId: that.moduleId,\r
					sourceSamplerate: that.sourceSamplerate,\r
					targetSampleRate: that.targetSampleRate,\r
					emitterBufferSize: that.emitterBufferSize,\r
					calculateRmsVolume: that.calculateRmsVolume,\r
					channelCount: that.channelCount,\r
					resamplingMode: that.resamplingMode,\r
					gain: that.gain,\r
					passThroughMode: that.passThroughMode\r
				}\r
			});\r
		}\r
		//start\r
		function start(options){\r
			//TODO: anything?\r
			//NOTE: timing of this signal is not very well defined\r
		}\r
		//stop\r
		function stop(options){\r
			//NOTE: timing of this signal is not very well defined\r
			//send out the remaining buffer data here\r
			if (that._outputRingBuffer.framesAvailable){\r
				//pull last samples\r
				var lastSamples = [new Int16Array(that._outputRingBuffer.framesAvailable)];\r
				that._outputRingBuffer.pull(lastSamples);\r
\r
				//Send info\r
				that.port.postMessage({\r
					rms: that.emitterRms,\r
					samples: lastSamples,\r
					sampleRate: that.targetSampleRate,\r
					channels: that.channelCount,\r
					type: lastSamples[0].constructor.name,\r
					isLast: true\r
				});\r
			}\r
		}\r
		function reset(options){\r
			//TODO: implement\r
			init();\r
		}\r
		function release(options){\r
			//destroy\r
			that._outputRingBuffer = null;\r
			that._newInputBuffer = null;\r
			that._newOutputBuffer = null;\r
			that.resampler = null;\r
			speexModule = null;\r
			//notify processor that we can terminate now\r
			that.port.postMessage({\r
				moduleState: 9\r
			});\r
		}\r
		\r
		//on-request resampling\r
		function resampleRequest(req){\r
			var samples = req.samples;\r
			var int16Buffer;\r
			if (req.isInt16){\r
				int16Buffer = samples;\r
			}else{\r
				var sampleSize = samples[0].length;\r
				int16Buffer = [new Int16Array(sampleSize)];		//TODO: MONO\r
				for (let i = 0; i < sampleSize; ++i){\r
					that.floatTo16BitInterleavedPCM(samples, int16Buffer, i);\r
				}\r
			}\r
			if (that.resamplingMode){\r
				var processed = that.resampler.processChunk(int16Buffer[0]);\r
				that.port.postMessage({\r
					moduleResponse: true,\r
					resampleResult: {\r
						//test: int16Buffer,		//DEBUG\r
						samples: [processed],\r
						sampleRate: that.targetSampleRate,\r
						channels: that.channelCount\r
					}\r
				});\r
			}else{\r
				that.port.postMessage({\r
					error: "No resampling required. Skipped process!",\r
					moduleResponse: true,\r
					resampleResult: {}\r
				});\r
			}\r
		}\r
		\r
		//Control messages\r
		this.port.onmessage = function(e){\r
			if (e.data.ctrl){\r
				if (that.doDebug) console.error("SpeexResampleSwitch - Controls", e.data.ctrl);			//DEBUG\r
				switch (e.data.ctrl.action) {\r
					//common interface\r
					case "start":\r
						start(e.data.ctrl.options);\r
						break;\r
					case "stop":\r
						stop(e.data.ctrl.options);\r
						break;\r
					case "reset":\r
						reset(e.data.ctrl.options);\r
						break;\r
					case "release":\r
					case "close":\r
						release(e.data.ctrl.options);\r
						break;\r
					case "process":\r
						//customProcess(e.data.ctrl.data);\r
						break;\r
					case "handle":\r
						//handleEvent(e.data.ctrl.data);\r
						break;\r
					default:\r
						console.error("SpeexResampleSwitch - Unknown control message:", e.data);\r
						break;\r
				}\r
			}else if (e.data.resample){\r
				//custom interface\r
				resampleRequest(e.data.resample);\r
			}\r
        }\r
		\r
		function onSpeexLog(msg){\r
			if (that.doDebug) console.error("SpeexResampleSwitch - SpeexModuleLog -", msg, "-", that.moduleId);			//DEBUG (use postMessage?)\r
		}\r
		//function onSpeexError(msg){}		//TODO: we could wrap the 'resampler.processChunk' function in try-catch and log the error here\r
		\r
		//prepare\r
		if (this.resamplingMode){\r
			if (!speexModule){\r
				onSpeexLog("Init. Speex WASM module");\r
				SpeexResampler.initPromise = this.Speex().then(function(s){\r
					onSpeexLog("Speex WASM module ready");\r
					speexModule = s;	//NOTE: used inside Speex\r
					ready(false);\r
				});\r
			}else{\r
				onSpeexLog("Speex WASM moduel already loaded");\r
				ready(false);\r
			}\r
		}else{\r
			onSpeexLog("Speex WASM module not needed");\r
			ready(true);\r
		}\r
	}\r
\r
	process(inputs, outputs, parameters) {\r
		if (!this.isReadyForProcessing){\r
			console.error("SpeexResampleSwitch - Module wasn't ready for processing! Input was ignored!", "-", this.moduleId);\r
			return;\r
		}\r
\r
		//Use 1st input and output only\r
		let input = inputs[0];\r
		let output = outputs[0];\r
\r
		//NOTE: AudioWorkletProcessor always gets input[0].length frames (typically 128, might change in future)\r
		if (input.length > 0){\r
			let inputSampleSize = input[0].length;\r
			\r
			if (this._isFirstValidProcess){\r
				this._isFirstValidProcess = false;\r
				//check inputSampleSize\r
				if (inputSampleSize != this.EXPECTED_SAMPLE_SIZE){\r
					let msg = "Sample size is: " + inputSampleSize + ", expected: " + this.EXPECTED_SAMPLE_SIZE + ". Need code adjustments!";\r
					console.error("AudioWorkletProcessor sample size exception - Msg.: " + msg);\r
					throw new this.SampleSizeException(msg);\r
				}\r
			}\r
			\r
			//transfer input to 16bit signed, interleaved (channels) PCM output - TODO: ONLY MONO so far!\r
			let sqrSum = 0;\r
			for (let i = 0; i < inputSampleSize; ++i){\r
				//gain\r
				if (this._hasGain) input[0][i] = input[0][i] * this.gain;\r
				\r
				//float to 16Bit interleaved PCM\r
				this.floatTo16BitInterleavedPCM(input, this._newInputBuffer, i);\r
				\r
				//pass through\r
				if (this.passThroughMode == 2){\r
					output[0][i] = this._newInputBuffer[0][i];	//16Bit PCM\r
				}else if (this.passThroughMode == 1){\r
					output[0][i] = input[0][i];					//original (float32)\r
				}\r
				\r
				//calc. sum for RMS\r
				if (this.calculateRmsVolume){\r
					this._emitterSqrSum += (input[0][i] ** 2);\r
				}\r
			}\r
			this._emitterSamples += inputSampleSize;\r
			\r
			if (this.resamplingMode != 0){\r
				//let interleaved16bitPcmAudioChunk = new Int16Array(this._inputDataView);\r
				//let processed = this.resampler.processChunk(interleaved16bitPcmAudioChunk);\r
				let processed = this.resampler.processChunk(this._newInputBuffer[0]);\r
				this._outputRingBuffer.push([processed]);				//TODO: is MONO\r
			}else{\r
				this._outputRingBuffer.push([this._newInputBuffer[0]]);	//TODO: is MONO\r
			}\r
			\r
			//Process if we have enough frames for the kernel.\r
			if (this._outputRingBuffer.framesAvailable >= this.emitterBufferSize) {\r
				//pull samples\r
				this._outputRingBuffer.pull(this._newOutputBuffer);\r
\r
				//Send info\r
				this.port.postMessage({\r
					rms: this.emitterRms,\r
					samples: this._newOutputBuffer,\r
					sampleRate: this.targetSampleRate,\r
					channels: this.channelCount,\r
					type: this._newOutputBuffer[0].constructor.name\r
				});\r
			}\r
		}\r
		return true;\r
	}\r
}\r
\r
registerProcessor('speex-resample-switch', SpeexResampleProcessor);`;if(typeof sA!="object"){var sA={};window.SepiaFW=sA}(function(n){var e=n.webAudio||{};e.version="0.9.11";var t=window.AudioContext||window.webkitAudioContext,r=void 0,i=void 0;function s(){return r=!!t&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,!!r||i}e.isStreamRecorderSupported=s(),e.isNativeStreamResamplingSupported=!0,e.tryNativeStreamResampling=!0,e.contentFetchTimeout=8e3,e.defaultProcessorOptions={moduleFolder:"modules",initSuccessCallback:console.log,initErrorCallback:console.error,onerror:console.error};var o={};e.clearPreLoadCache=function(){o={}},e.getSupportedAudioConstraints=function(){var h=navigator.mediaDevices.getSupportedConstraints(),p={},m=e.overwriteSupportedAudioConstraints;return h.deviceId&&(p.deviceId=m.deviceId!=null?m.deviceId:void 0),h.channelCount&&(p.channelCount=m.channelCount!=null?m.channelCount:1),h.noiseSuppression&&(p.noiseSuppression=m.noiseSuppression!=null?m.noiseSuppression:!0),h.autoGainControl&&(p.autoGainControl=m.autoGainControl!=null?m.autoGainControl:!1),h.echoCancellation&&(p.echoCancellation=m.echoCancellation!=null?m.echoCancellation:!1),h.sampleRate&&(p.sampleRate=m.sampleRate!=null?m.sampleRate:48e3),p},e.overwriteSupportedAudioConstraints={},e.defaultMimeTypesForCodecs={ogg:"audio/ogg",ogg_opus:"audio/ogg;codecs=opus",ogg_vorbis:"audio/ogg;codecs=vorbis",ogg_speex:"audio/ogg;codecs=speex",opus:"audio/opus",vorbis:"audio/vorbis",speex:"audio/speex",wav:"audio/wav",raw:"audio/wav",webm_ogg_opus:"audio/webm;codecs=opus",webm_ogg_vorbis:"audio/webm;codecs=vorbis",webm_mkv_pcm:"audio/webm;codecs=pcm",mp3:"audio/mpeg",mp4:"audio/mp4",flac:"audio/flac",mpeg:"audio/mpeg"},e.getSupportedMediaRecorderCodecs=function(){var h={};return window.MediaRecorder&&Object.keys(e.defaultMimeTypesForCodecs).forEach(function(p){var m=e.defaultMimeTypesForCodecs[p];window.MediaRecorder.isTypeSupported(m)&&(h[p]=m)}),h},e.createAudioContext=function(h,p){var m={};!p&&h.targetSampleRate&&(m.sampleRate=h.targetSampleRate);var g=new t(m);return g},e.Processor=function(h,p,m){var g=this;m||(m=e.defaultProcessorOptions.initErrorCallback),p||(p=e.defaultProcessorOptions.initSuccessCallback),h||(h={});var v=h.onerror||e.defaultProcessorOptions.onerror,y=(h.moduleFolder||e.defaultProcessorOptions.moduleFolder).replace(/\/$/,"")+"/",w,C=0,b,F,I,S,T=!1,H=!1,X=!1,Q=h.initializerTimeout||3e3,B,E={},R={},k=[];function M($){h.debugLog&&h.debugLog("Started init. condition: "+$),E[$]=1}function L($){E[$]&&(delete E[$],h.debugLog&&h.debugLog("Completed init. condition: "+$),Object.keys(E).length==0&&(H||(clearTimeout(B),H=!0,X=!1,p({name:"ProcessorReady",message:"Processor is ready for action",inputSampleRate:w,targetSampleRate:h.targetSampleRate||w,sourceInfo:R,modulesInfo:k}))))}function Z(){clearTimeout(B),H=!1,X=!1,E={},M("sourceSetup"),M("modulesSetup")}function P($){Z(),m($)}Z(),X=!0,B=setTimeout(function(){P({message:"Initialization took too long! If you expect long running init. process use option 'initializerTimeout' (ms).",name:"ProcessorInitTimeout"})},Q);async function U($,ae){if(b&&$&&(b.state!="closed"&&await b.close(),b=null),!b||b.state=="closed")if(b=e.createAudioContext(h,ae),h.startSuspended==null||h.startSuspended){try{await b.resume()}catch{}await b.suspend()}else await b.resume();return b}async function G(){if(h.modules)for(let $=0;$<h.modules.length;$++){let ae=h.modules[$],te=oe(ae),Ae=te.moduleType,re=te.moduleName;if(Ae==1){let me=y+re+".js";h.debugLog&&h.debugLog("Adding audioWorklet module: "+me);try{await b.audioWorklet.addModule(`data:application/javascript;charset=utf8,${encodeURIComponent(i0e)}`)}catch(Pe){console.error(Pe),h.debugLog&&h.debugLog("FAILED to add audioWorklet module: "+me+" - Msg.: "+Pe.name+", "+Pe.message)}}else if(Ae==2){let me=y+re.replace(/-worker$/,"")+"-worker.js";h.debugLog&&h.debugLog("Adding worker module: "+me)}else throw Ae==3?{name:"CreateModuleError",message:"ScriptProcessor nodes are currently not supported as modules (only source)."}:Ae==4?{name:"CreateModuleError",message:"AudioNodes are currently not supported as modules (you can use them as custom source)."}:{name:"CreateModuleError",message:"Module type unknown."}}}function oe($){var ae,te,Ae,re;return typeof $=="object"?($.type&&$.type=="worker"||$.isWorker?ae=2:$.type&&$.type=="scriptProcessor"?ae=3:$.type&&$.type=="audioNode"?ae=4:ae=1,te=$.name,Ae=$.setup||$.settings,re=$.preLoad||{}):(ae=1,te=$,Ae={},re={}),{moduleType:ae,moduleName:te,moduleSetup:Ae,modulePreLoads:re}}function D(){T=!0}function K(){T=!1}if(!e.isStreamRecorderSupported&&!h.customSourceTest&&!h.customSource){var ce={name:"NotSupportedError",message:"Cannot create audio stream recorder because there are no compatible interfaces!"};P(ce);return}function le($,ae,te){var Ae=$.length;if(h.modules&&h.modules.length){var re=new Array(h.modules.length),me=h.modules.length;h.modules.forEach(async function(Pe,_e){if(!X)return;M("module-"+_e);var Se=oe(Pe),Fe=Se.moduleType,Ue=Se.moduleName,Me=Se.moduleSetup,W={},O=Object.keys(Se.modulePreLoads);try{await Promise.all(O.map(async function(x,N){var j=Se.modulePreLoads[x],q=1,ne=void 0;typeof j=="object"?(q=j.type&&(j.type==2||j.type.toLowerCase()=="arraybuffer")?2:1,j=j.path||j.url):x.indexOf("wasmFile")==0?q=2:x.indexOf("wasmBase64")==0&&(q=1,ne=u);var Ce=x+"_"+j;if(o[Ce])W[x]=o[Ce];else try{var be;if(!j||q>2)throw{name:"PreLoadError",message:"Missing 'path' (url) or unsupported type (use 1=text or 2=arraybuffer)"};q==1?be=await l(j):q==2&&(be=await A(j)),typeof ne=="function"&&(be=ne(be)),W[x]=be,o[Ce]=be}catch(Ee){throw{name:"AddModuleError",message:"Failed to pre-load data: "+x+" - name: "+Ue,info:Ee}}}))}catch(x){P(x);return}var se=Me.options||{};se.preLoadResults=W;var de;function Be(x){if(!(!x||x.data==null))if(x.data.moduleState==1)de.isReady=!0,L("module-"+_e),x.data.moduleInfo&&(de.moduleInfo=x.data.moduleInfo),re[_e]={moduleName:de.moduleName,moduleInfo:de.moduleInfo},--me==0&&te(re);else if(x.data.moduleState==9&&!de.isTerminated){if(typeof de.terminate=="function")try{de.isTerminated=!0,de.terminate()}catch(N){de.isTerminated=!0,V({name:"TerminateError",message:"Failed to terminate module",info:N})}}else x.data.moduleState==10?(x.data.error.target=x.target,V(x.data.error)):x.data.moduleResponse||Me.sendToModules&&(x.data.moduleEvent?Me.sendToModules.forEach(function(N){$[N]&&!$[N].ignoreSendToModules&&$[N].sendToModule({ctrl:{action:"handle",data:x.data}})}):Me.sendToModules.forEach(function(N){$[N]&&!$[N].ignoreSendToModules&&$[N].sendToModule({ctrl:{action:"process",data:x.data}})}));Me.onmessage&&Me.onmessage(x.data,$)}function V(x){var N;x.message&&x.message.indexOf("Uncaught {")==0?(x.preventDefault(),N=JSON.parse(x.message.replace(/^Uncaught /,"")),x.message=N):N=x,v({name:"AudioModuleProcessorException",message:"Error in module: "+x.target.moduleName+" - "+(N&&N.message?N.message:"Check console for details."),module:x.target.moduleName,info:N}),X&&!H&&P({message:"Error during setup of module: "+de.moduleName,name:"ProcessorInitError",info:N}),Me.onerror&&Me.onerror(x)}if(Fe==1){if(!ae){P({name:"AddModuleError",message:"Source does not support 'AudioWorkletProcessor' (use only workers instead) - name: "+Ue});return}se.processorOptions||(se.processorOptions=se.setup||{}),se.processorOptions.ctxInfo||(se.processorOptions.ctxInfo={sampleRate:b.sampleRate,targetSampleRate:h.targetSampleRate}),de=new AudioWorkletNode(b,Ue,se),de.isReady=!1,de.moduleName=Ue,de.port.onmessage=Be,de.onprocessorerror=V,de.sendToModule=function(x){de.isReady?de.port.postMessage(x):v({name:"AudioModuleProcessorException",message:"'sendToModule' was called before module was actually ready. Consider 'startSuspended' option maybe.'",module:de.moduleName})}}else if(Fe==2)se.setup||(se.setup={}),se.setup.ctxInfo||(se.setup.ctxInfo={sampleRate:b.sampleRate,targetSampleRate:h.targetSampleRate}),Ue.includes("webrtc-vad")?de=n0e():Ue.includes("stt-socket")&&(de=r0e()),de.isReady=!1,de.moduleName=Ue,de.onmessage=Be,de.onerror=V,de.sendToModule=function(x){de.isReady||x&&x.ctrl&&x.ctrl.action=="construct"?de.postMessage(x):v({name:"AudioModuleProcessorException",message:"'sendToModule' was called before module was actually ready. Consider 'startSuspended' option maybe.",module:de.moduleName})},de.sendToModule({ctrl:{action:"construct",options:se}});else if(Fe==3){P({name:"AddModuleError",message:"ScriptProcessor nodes are currently not supported as modules (only source)."});return}else if(Fe==4){P({name:"AddModuleError",message:"AudioNodes are currently not supported as modules (you can use them as custom source)."});return}else{P({name:"AddModuleError",message:"Unknown module type."});return}if(de.moduleType=Fe,de.ignoreSendToModules=!1,de.deactivate=function(){de.ignoreSendToModules=!0,T&&(de.sendToModule({ctrl:{action:"stop"}}),de.sendToModule({ctrl:{action:"reset"}}))},de.activate=function(){de.ignoreSendToModules=!1,T&&de.sendToModule({ctrl:{action:"start"}})},Pe.handle=de,!ae&&_e==0){var _=$[0];if(!_.onmessage){P({name:"AddModuleError",message:"If source is not compatible to 'AudioWorklet' it has to have a 'onmessage' event to get the processed data."});return}_.onmessage=function(x){!x||x.data==null||(x.data.moduleEvent||x.data.sourceEvent?de.sendToModule({ctrl:{action:"handle",data:x.data}}):de.sendToModule({ctrl:{action:"process",data:x.data}}))}}$[Ae+_e]=de})}else te([])}function he($,ae,te){w=b.sampleRate,te||(te={}),h.targetSampleRate&&h.targetSampleRate!=w&&(e.isNativeStreamResamplingSupported=!1,C=w-h.targetSampleRate);var Ae=[$],re=[],me=!0;te.hasWorkletSupport!=null?me=te.hasWorkletSupport:te.type=="scriptProcessor"&&(me=!1),le(Ae,me,function(_e){k=_e,L("modulesSetup"),g.processNodes=Ae;let Se=!1;if(Ae.forEach(function(Fe,Ue){me&&(!Fe.moduleType||Fe.moduleType==1)&&re.push(Fe),Fe.moduleInfo&&Fe.moduleInfo.resamplingMode&&(Se=!0)}),C&&!Se){P({message:"Samplerate mismatch and no resampler found!",name:"ProcessorInitError"});return}});var Pe=h.destinationNode||b.destination;g.mainAudioContext=b,g.source=$,g.sourceInfo=te,R=te,ae||(ae={}),F=function(_e,Se){Promise.resolve((ae.onBeforeStart||d)()).then(function(){return b.resume()}).then(function(){if(re.length>1){for(var Fe=1;Fe<re.length;Fe++)re[Fe-1].connect(re[Fe]);re[Fe-1].connect(Pe)}else re.length==1?re[0].connect(Pe):Ae[0].connect&&Ae[0].connect(Pe);if(Ae.forEach(function(Ue){Ue.sendToModule&&Ue.sendToModule({ctrl:{action:"start",options:{}}})}),ae.onAfterStart)return Promise.resolve(ae.onAfterStart())}).then(_e).catch(function(Fe){v({name:"ProcessorStartError",message:Fe.name+" - Message: "+(Fe.message||Fe)}),Se&&Se(Fe)})},I=function(_e,Se){Promise.resolve((ae.onBeforeStop||d)()).then(function(){return Ae.forEach(function(Fe,Ue){Fe.disconnect&&Fe.disconnect(),Fe.sendToModule&&Fe.sendToModule({ctrl:{action:"stop",options:{}}})}),b.suspend()}).then(function(){if(ae.onAfterStop)return Promise.resolve(ae.onAfterStop())}).then(_e).catch(function(Fe){v({name:"ProcessorStopError",message:Fe.name+" - Message: "+(Fe.message||Fe)}),Se&&Se(Fe)})},S=function(_e,Se){Promise.resolve((ae.onBeforeRelease||d)()).then(function(){return Ae.forEach(function(Fe,Ue){Fe.sendToModule&&Fe.sendToModule({ctrl:{action:"release",options:{}}}),Ae[Ue]=null}),g.processNodes=null,g.source=null,b.close()}).then(function(){if(ae.onAfterRelease)return Promise.resolve(ae.onAfterRelease())}).then(_e).catch(function(Fe){v({name:"ProcessorReleaseError",message:Fe.name+" - Message: "+(Fe.message||Fe)}),Se&&Se(Fe)})},L("sourceSetup")}if(h.customSourceTest){let $;e.createWhiteNoiseGeneratorNode(.1,{targetSampleRate:h.targetSampleRate}).then(function(ae){return $=ae,b=ae.context,G()}).then(function(){he($,{},{type:"whiteNoiseGenerator"})}).catch(function(ae){P(ae)})}else if(h.customSource){let $=h.customSource.node;b=$.context,G().then(function(){he($,{onBeforeStart:h.customSource.beforeStart,onAfterStart:h.customSource.start||h.customSource.afterStart,onBeforeStop:h.customSource.stop||h.customSource.beforeStop,onAfterStop:h.customSource.afterStop,onBeforeRelease:h.customSource.beforeRelease,onAfterRelease:h.customSource.release||h.customSource.afterRelease},{type:h.customSource.type||"custom",typeData:h.customSource.typeData,hasWorkletSupport:h.customSource.hasWorkletSupport!=null?h.customSource.hasWorkletSupport:!0})}).catch(function(ae){P(ae)})}else{let $;e.getMicrophone(h,U).then(function(ae){return $=ae,G()}).then(function(){he($.source,$.controls||{},$.info)}).catch(function(ae){P(typeof ae=="string"?{message:ae,name:"ProcessorInitError"}:{message:ae.message,name:ae.name,ref:ae})})}g.start=function($,ae,te){H&&!T?F(function(){var Ae=new Date().getTime();D(),h.onaudiostart&&h.onaudiostart({startTime:Ae}),$&&$()},te):ae&&ae()},g.stop=function($,ae,te){T?I(function(){var Ae=new Date().getTime();K(),h.onaudioend&&h.onaudioend({endTime:Ae}),$&&$()},te):ae&&ae()},g.release=function($,ae,te){H&&S?S(function(){Z(),h.onrelease&&h.onrelease(),$&&$()},te):X?P({message:"Release was called before initialization was complete.",name:"ProcessorInitError"}):ae&&ae()},g.isInitialized=function(){return H},g.isInitPending=function(){return X},g.isProcessing=function(){return T}},e.getAudioDevices=function(h){return new Promise(function(p,m){(async function(){if(!navigator.mediaDevices.enumerateDevices)return m({message:"MediaDevices 'enumerateDevices' is not available! Check if context is secure (SSL, HTTPS, etc.).",name:"NotSupportedError"});var g=!1,v=void 0;navigator.mediaDevices.enumerateDevices().then(function(y){if(!g){clearTimeout(v);var w={},C={};return y.forEach(function(b){b.kind=="audioinput"?w[b.label]=b.deviceId:b.kind=="audiooutput"&&(C[b.label]=b.deviceId)}),p({input:w,output:C})}}).catch(function(y){return m(y)}),v=setTimeout(function(){return g=!0,m({message:"Media device enumeration timeout. Permission might require user interaction.",name:"TimeoutError"})},h||5e3)})()})},e.getMicrophone=function(h,p,m){return h||(h={}),p||(p=async function(g,v){var y=e.createAudioContext(h,v);if(h.startSuspended==null||h.startSuspended){try{await y.resume()}catch{}await y.suspend()}else await y.resume();return y}),new Promise(function(g,v){(async function(){var y=JSON.parse(JSON.stringify(e.getSupportedAudioConstraints()));y.sampleRate&&h.targetSampleRate&&(y.sampleRate=h.targetSampleRate);var w={video:!1,audio:Object.keys(y).length?y:!0};if(!navigator.mediaDevices.getUserMedia)return v({message:"MediaDevices 'getUserMedia' is not available! Check if context is secure (SSL, HTTPS, etc.).",name:"NotSupportedError"});var C=!1,b=void 0;navigator.mediaDevices.getUserMedia(w).then(async function(F){if(!C){clearTimeout(b);var I;e.tryNativeStreamResampling&&e.isNativeStreamResamplingSupported?I=await p(!1,!1):I=await p(!1,!0);var S;try{S=I.createMediaStreamSource(F)}catch(Q){I=await p(!0,!0),S=I.createMediaStreamSource(F),Q&&Q.name&&Q.name=="NotSupportedError"&&(e.isNativeStreamResamplingSupported=!1,h.debugLog&&h.debugLog("Native stream resampling has been deactivated - Info: "+Q.message))}h.destinationNode||(h.destinationNode=I.createMediaStreamDestination());var T={type:"mic"},H;if(S.mediaStream&&S.mediaStream.getAudioTracks)try{H=S.mediaStream.getAudioTracks()[0],T.label=H.label,H.getSettings?T.settings=H.getSettings():T.settings={},T.settings.sampleRate=I.sampleRate}catch{}var X={onBeforeStart:function(){},onAfterStop:function(){},onAfterRelease:function(){H&&typeof H.stop=="function"&&H.readyState=="live"&&H.stop()}};return g({source:S,controls:X,info:T})}}).catch(function(F){return v(F)}),b=setTimeout(function(){return C=!0,v({message:"Media 'getUserMedia' timeout. Permission might require user interaction.",name:"TimeoutError"})},m||5e3)})()})},e.createAudioRecorder=function(h,p,m){return m||(m={}),m.codec||(m.codec="webm_ogg_opus"),new Promise(function(g,v){(async function(){try{var y=p.settings.sampleRate;if(!y)return v({message:"Sample-rate unknown! Please add correct 'sourceInfo'.",name:"AudioRecorderError"});var w=p.settings.channelCount;if(w>1)return v({message:"Sorry, but this recorder only supports MONO audio at the moment.",name:"NotSupportedError"});var C=m.mimeType||e.defaultMimeTypesForCodecs[m.codec]||e.defaultMimeTypesForCodecs.webm_ogg_opus,b=m.sampleTime||(m.chunkSize?Math.floor(1e3/y*m.chunkSize):0);if(b&&m.decodeToAudioBuffer&&console.error("WARNING: Partial decoding is not supported at the moment! It is possible but requires adding custom headers for each blob!"),window.MediaRecorder)if(MediaRecorder.isTypeSupported(C)){var F=new MediaRecorder(h,{mimeType:C,bitsPerSecond:y*2*w}),I,S,T=!1;F.onerror=m.onerror||console.error,m.onstart&&(F.onstart=m.onstart),m.onpause&&(F.onpause=m.onpause),m.onresume&&(F.onresume=m.onresume);var H=m.onstop;F.onstop=function(R){H&&!m.decodeToAudioBuffer&&H()};var X=m.ondataavailable||m.onprocess;m.decodeToAudioBuffer?X&&(F.ondataavailable=function(R){if(F.state=="inactive"&&(T=!0),R&&R.data){let k=Date.now();e.offlineAudioContextBlobDecoder(y,w,R.data,function(M){M&&X({data:M.getChannelData(0),decodeTime:Date.now()-k}),!T&&m.recordLimitMs&&Date.now()-I>=m.recordLimitMs?B():T&&H&&H()})}}):X&&(F.ondataavailable=function(R){X(R),m.recordLimitMs&&Date.now()-I>=m.recordLimitMs&&B()});var Q,B=function(){Q&&clearTimeout(Q),S=Date.now(),F.state!="inactive"&&F.stop()},E=function(){I=Date.now(),S=void 0,T=!1,b?F.start(b):(F.start(),m.recordLimitMs&&(Q=setTimeout(B,m.recordLimitMs)))};return g({getMediaRecorder:function(){return F},mimeType:C,sourceInfo:p,sampleTime:b,start:E,stop:B})}else return v({message:"MIME-Type '"+C+"' is not supported!",name:"NotSupportedError"});else return v({message:"'MediaRecorder' is not available!",name:"NotSupportedError"})}catch(R){return console.error("AudioRecorder",R),v(R)}})()})},e.offlineAudioContextBlobDecoder=function(h,p,m,g){a(m,function(v){if(!v)g();else{var y=new OfflineAudioContext(p,v.byteLength,h);y.decodeAudioData(v,function(w){g(w)},function(w){console.error("offlineAudioContext.decodeAudioData ERROR",w),g()})}})};function a(h,p){if(!h||!h.size)p();else if(typeof h.arrayBuffer=="function")h.arrayBuffer().then(function(g){p(g)}).catch(function(g){console.error("blobToArray '.arrayBuffer' ERROR",g),p()});else{var m=new FileReader;m.onload=function(){p(m.result)},m.onerror=function(g){console.error("blobToArray 'FileReader' ERROR",reader.error,g),p()},m.readAsArrayBuffer(h)}}e.blobToArray=a,e.createLegacyMicrophoneScriptProcessor=function(h){return h||(h={}),e.getMicrophone(h,void 0).then(function(p){var m=p.source,g=m.context,v=g.sampleRate,y=h.bufferSize||2048,w=1,C=g.createScriptProcessor(y,w,w);m.connect(C);var b={node:C,type:"scriptProcessor",typeData:p.info,hasWorkletSupport:!1,start:function(){p.controls.onAfterStart&&p.controls.onAfterStart()},stop:function(){p.controls.onBeforeStop&&p.controls.onBeforeStop()},release:function(){p.controls.onAfterRelease&&p.controls.onAfterRelease()}};if(p.controls&&(p.controls.onBeforeStart&&(b.beforeStart=p.controls.onBeforeStart),p.controls.onAfterStop&&(b.afterStop=p.controls.onAfterStop),p.controls.onBeforeRelease&&(b.beforeRelease=p.controls.onBeforeRelease)),h.onaudioprocess)C.onaudioprocess=h.onaudioprocess;else{let F=function(I){if(I&&I.inputBuffer){var S=[I.inputBuffer.getChannelData(0)];C.onmessage({data:{samples:S,sampleRate:v,channels:w,type:S[0].constructor.name}})}};C.onaudioprocess=function(I){F(I)},C.onmessage=h.onmessage||function(I){}}return b})},e.createWhiteNoiseGeneratorNode=function(h,p,m){p||(p={});var g=e.defaultProcessorOptions.moduleFolder.replace(/\/$/,"")+"/";return new Promise(function(v,y){(async function(){try{var w=e.createAudioContext(p);try{await w.resume()}catch{}await w.suspend();var C=g+"white-noise-generator.js";await w.audioWorklet.addModule(C);var b=new AudioWorkletNode(w,"white-noise-generator",{processorOptions:{gain:h||.1}});m&&(b.port.onmessage=m),v(b)}catch(F){return y(F)}})()})},e.createFileSource=function(h,p,m,g){return p||(p={}),new Promise(function(v,y){try{let w=function(b){y(b)},C=function(b){e.createAudioBufferSource(b,p,m,g).then(function(F){F.typeData={fileUrl:h},v(F)}).catch(w)};e.readFileAsBuffer(h,C,w)}catch(w){y(w)}})},e.createAudioBufferSource=function(h,p,m,g){return p||(p={}),new Promise(function(v,y){(async function(){try{var w=e.createAudioContext(p);try{await w.resume()}catch{}await w.suspend();var C=w.createBufferSource();w.decodeAudioData(h,function(b){return C.buffer=b,C.loop=m??!0,g&&(C.onended=g),v({node:C,type:"fileAudioBuffer",typeData:{},start:function(){C.start()},stop:function(){C.stop()},release:function(){}})},function(b){return y(b)})}catch(b){return y(b)}})()})},e.createSourceAudioPlayer=function(h,p,m,g,v){p||(p={}),p.modules=m||[],p.customSource=h,p.startSuspended==null&&(p.startSuspended=!0);var y=new e.Processor(p,g,v);return y},e.encodeWaveBuffer=function(h,p,m,g,v,y){var w=e.defaultProcessorOptions.moduleFolder.replace(/\/$/,"")+"/",C=new Worker(w+"wave-encoder-worker.js");v||(v=console.log),y||(y=console.error);var b={setup:{inputSampleRate:p,inputSampleSize:h.length,lookbackBufferMs:0}};C.onmessage=function(F){F.data.moduleState==1?C.postMessage({encode:{format:"wave",data:{samples:[h],sampleRate:p,channels:m,isFloat32:g}}}):F.data.encoderResult&&(C.terminate(),F.data.error?y({name:"EncoderError",message:F.data.error}):v(F.data.encoderResult))},C.onerror=function(F){C.terminate(),y(F)},C.postMessage({ctrl:{action:"construct",options:b}})},e.decodeAudioFile=function(h,p,m,g,v){e.readFileAsBuffer(h,function(y){var w=new OfflineAudioContext(m,y.byteLength,p);w.decodeAudioData(y,function(C){g(C)},function(C){v(C)})},function(y){v(y)})},e.decodeAudioFileToInt16Mono=function(h,p,m,g){var v=1;e.decodeAudioFile(h,p,v,function(y){var w=!0;e.encodeWaveBuffer(y.getChannelData(0),p,v,w,function(C){try{var b=new Int16Array(C.wav.buffer);m(b)}catch(F){g(F)}},g)},g)},e.resampleBufferViaSpeex=function(h,p,m,g,v,y,w){y||(y=console.log),w||(w=console.error);try{var C=new OfflineAudioContext(g,h.length,p),b=e.defaultProcessorOptions.moduleFolder.replace(/\/$/,"")+"/",F="speex-resample-switch";C.audioWorklet.addModule(b+F+".js").then(function(){var I={processorOptions:{ctxInfo:{sampleRate:p},targetSampleRate:m,resampleQuality:v,bufferSize:h.length}},S=new AudioWorkletNode(C,F,I);S.port.onmessage=function(T){T.data.moduleState==1?S.port.postMessage({resample:{samples:[h],isInt16:!0}}):T.data.resampleResult&&(C=null,T.data.error?w({name:"ResampleError",message:T.data.error}):y(T.data.resampleResult))},S.onprocessorerror=function(T){C=null,w(T)}})}catch(I){w(I)}},e.readFileAsBuffer=function(h,p,m){sA&&sA.files?sA.files.fetch(h,p,m,"arraybuffer",e.contentFetchTimeout):c("arraybuffer",h,p,m)},e.readFileAsText=function(h,p,m){sA&&sA.files?sA.files.fetch(h,p,m,void 0,e.contentFetchTimeout):c("text",h,p,m)};function A(h){return new Promise(function(p,m){e.readFileAsBuffer(h,function(g){p(g)},function(g){m(g)})})}function l(h){return new Promise(function(p,m){e.readFileAsText(h,function(g){p(g)},function(g){m(g)})})}function c(h,p,m,g){var v=new XMLHttpRequest;v.open("GET",p),v.responseType=h,v.timeout=e.contentFetchTimeout,v.onload=function(y){v.status>=200&&v.status<300?m(v.response):g({status:v.status,message:v.statusText})},v.onerror=function(y){g(y)},v.ontimeout=function(y){g(y)},v.send()}function u(h){try{for(var p=atob(h),m=new Uint8Array(p.length),g=0;g<p.length;++g)m[g]=p.charCodeAt(g);return m}catch{throw new Error("Converting base64 string to Uint8Array bytes array failed.")}}function f(h){try{return btoa(h.reduce(function(p,m){return p+String.fromCharCode(m)},""))}catch{throw new Error("Converting Uint8Array to base64 string failed.")}}e.base64={base64StringToUint8Array:u,uint8ArrayToBase64String:f},e.addAudioElementToPage=function(h,p,m){var g=document.createElement("audio");g.src=window.URL.createObjectURL(p.constructor.name=="Blob"?p:new Blob([p],{type:m||"audio/wav"})),g.setAttribute("controls","controls");var v=document.createElement("div");return v.appendChild(g),h||(h=document.body),h.appendChild(v),g};function d(){}n.webAudio=e})(sA);(function(){var n={};n.onProcessorReady=function(d){console.log("SepiaVoiceRecorder -  onProcessorReady",d)},n.onProcessorInitError=function(d){console.error("SepiaVoiceRecorder -  onProcessorInitError",d)},n.onConnected=function(d){console.log("SepiaVoiceRecorder -  onConnected",d)},n.onDisconnected=function(d){console.log("SepiaVoiceRecorder -  onDisconnected",d)},n.onAudioStart=function(d){console.log("SepiaVoiceRecorder -  onAudioStart")},n.onAudioEnd=function(d){console.log("SepiaVoiceRecorder -  onAudioEnd")},n.onProcessorError=function(d){console.error("SepiaVoiceRecorder -  onProcessorError",d)},n.onProcessorRelease=function(d){console.log("SepiaVoiceRecorder -  onProcessorRelease")},n.onDebugLog=function(d){console.log("debugLog",d)},n.onResamplerData=function(d){console.log("SepiaVoiceRecorder -  onResamplerData",d)},n.onWaveEncoderStateChange=function(d){console.log("SepiaVoiceRecorder -  onWaveEncoderStateChange",d)},n.onWaveEncoderAudioData=function(d){console.log("SepiaVoiceRecorder -  onWaveEncoderAudioData",d)};function e(d){d.output&&d.output.wav?n.onWaveEncoderAudioData(d.output.wav):d.output&&d.output.buffer,d.gate&&(n.onWaveEncoderStateChange(d.gate),d.gate.isOpen===!0?t=!0:d.gate.isOpen===!1&&(t&&u(),t=!1))}var t=!1;function r(d){d.voiceActivity!=null,d.voiceEnergy!=null,d.vadSequenceCode!=null&&(d.vadSequenceCode==1?n.onVadStateChange("vaup",1):d.vadSequenceCode==2?n.onVadStateChange("speechstart",2):d.vadSequenceCode==3?n.onVadStateChange("vadown",3):d.vadSequenceCode==4?n.onVadStateChange("speechend",4):d.vadSequenceCode==5&&n.onVadStateChange("speechend",5))}n.onSpeechRecognitionStateChange=function(d){console.log("SepiaVoiceRecorder -  onSpeechRecognitionStateChange",d)},n.onSpeechRecognitionEvent=function(d){console.log("SepiaVoiceRecorder -  onSpeechRecognitionEvent",d)};function i(d){d&&(d.gate&&(d.gate.isOpen==!1&&s?(s=!1,n.onSpeechRecognitionStateChange({state:"onStreamEnd",bufferOrTimeLimit:d.gate.bufferOrTimeLimit})):d.gate.isOpen==!0&&!s&&(n.onSpeechRecognitionStateChange({state:"onStreamStart"}),s=!0)),d.recognitionEvent&&n.onSpeechRecognitionEvent(d.recognitionEvent),d.connectionEvent&&(d.connectionEvent.type=="ready"?n.onConnected(d.connectionEvent.data):d.connectionEvent.type=="closed"&&n.onDisconnected(d.connectionEvent.data)),d.output&&d.output.wav&&n.onWaveEncoderAudioData(d.output.wav))}var s=!1,o,a=16e3,A=512;async function l(d){d?(d.targetSampleRate&&(a=d.targetSampleRate),d.resamplerBufferSize&&(A=d.resamplerBufferSize)):d={};var h=!!d.asr;typeof d.asr!="object"&&(d.asr={});var p=!!d.vad;typeof d.vad!="object"&&(d.vad={});var m=void 0;if(d.fileUrl)try{m=await SepiaFW.webAudio.createFileSource(d.fileUrl,{targetSampleRate:a})}catch(T){n.onProcessorInitError(T);return}var g={name:"speex-resample-switch",settings:{onmessage:n.onResamplerData,sendToModules:[],options:{processorOptions:{targetSampleRate:a,resampleQuality:d.resampleQuality||4,bufferSize:A,passThroughMode:0,calculateRmsVolume:!0,gain:d.gain||1}}}},v={name:"wave-encoder",type:"worker",handle:{},settings:{onmessage:e,options:{setup:{inputSampleRate:a,inputSampleSize:A,lookbackBufferMs:0,recordBufferLimitKb:500,recordBufferLimitMs:d.recordingLimitMs,doDebug:!1}}}},y,w=480*2,C={name:"webrtc-vad-worker",type:"worker",settings:{onmessage:r,options:{setup:{inputSampleRate:a,inputSampleSize:A,bufferSize:d.vad.bufferSize||w,vadMode:d.vad.mode||3,sequence:{silenceActivationTime:450,maxSequenceTime:d.vad.maxSequenceTime||1e4,minSequenceTime:d.vad.minSequenceTime||600}}}}},b,F={name:"stt-socket",type:"worker",handle:{},settings:{onmessage:i,options:{setup:{inputSampleRate:a,inputSampleSize:A,lookbackBufferMs:0,recordBufferLimitKb:500,recordBufferLimitMs:d.recordingLimitMs,serverUrl:d.asr.serverUrl,clientId:d.asr.clientId,accessToken:d.asr.accessToken,messageFormat:d.asr.messageFormat||"webSpeechApi",language:d.asr.language||"",task:d.asr.task||"",model:d.asr.model||"",continuous:d.asr.continuous!=null?d.asr.continuous:!1,optimizeFinalResult:d.asr.optimizeFinalResult,engineOptions:d.asr.engineOptions||{},returnAudioFile:d.asr.returnAudioFile||!1,doDebug:!1}}}},I,S=[];S.push(g),S.length,p&&(S.push(C),b=S.length,n.vadModule=C,g.settings.sendToModules.push(b)),h?(S.push(F),I=S.length,n.sttServerModule=F,g.settings.sendToModules.push(I)):(S.push(v),y=S.length,n.waveEncoder=v,g.settings.sendToModules.push(y)),o=new SepiaFW.webAudio.Processor({onaudiostart:n.onAudioStart,onaudioend:n.onAudioEnd,onrelease:n.onProcessorRelease,onerror:n.onProcessorError,targetSampleRate:a,modules:S,destinationNode:void 0,startSuspended:!0,debugLog:n.onDebugLog,customSource:m},function(T){n.onProcessorReady(T)},function(T){n.onProcessorInitError(T)})}n.create=function(d){if(o){n.onProcessorInitError({name:"ProcessorInitError",message:"SepiaVoiceRecorder already exists. Release old one before creating new."});return}d||(d={}),l(d)},n.isReady=function(){return!!o&&o.isInitialized()},n.isActive=function(){return!!o&&o.isInitialized()&&o.isProcessing()},n.start=function(d,h,p){o?o.start(function(){c("open"),f("open"),d&&d()},h,p):p&&p({name:"ProcessorInitError",message:"SepiaVoiceRecorder doesn't exist yet."})},n.stop=function(d,h,p){o?o.stop(function(m){c("close"),f("close"),d&&d(m)},h,p):h&&h()},n.release=function(d,h,p){o?o.release(function(){o=void 0,d&&d()},function(){o=void 0,h&&h()},function(m){o=void 0,p&&p(m)}):h&&h()},n.stopIfActive=function(d){n.isActive()?n.stop(d,d,void 0):d&&d()},n.stopAndReleaseIfActive=function(d){n.stopIfActive(function(){n.isReady()?n.release(d,d,void 0):(o=void 0,d&&d())})};function c(d){o&&n.waveEncoder&&n.waveEncoder.handle.sendToModule({gate:d})}function u(){o&&n.waveEncoder&&n.waveEncoder.handle.sendToModule({request:{get:"wave"}})}function f(d){o&&n.sttServerModule&&n.sttServerModule.handle.sendToModule({gate:d})}n.decodeAudioFileToInt16Mono=function(d,h,p,m,g){h||(h=16e3),p&&p>1&&console.error("SepiaVoiceRecorder.decodeAudioFileToInt16Mono - Channels > 1 not supported. Result will only contain data of channel 0."),m||(m=console.log),g||(g=console.error),SepiaFW.webAudio.decodeAudioFileToInt16Mono(d,h,m,g)},n.addAudioElementToPage=function(d,h,p){return SepiaFW.webAudio.addAudioElementToPage(d,h,p)},window.SepiaVoiceRecorder=n})();class s0e{constructor(e,t){tt(this,"volumeThresholds",[.05,10]);tt(this,"gain",1);tt(this,"isLoading",!1);tt(this,"isRecording",!1);tt(this,"isWaitingForFinalResult",!1);tt(this,"waitingForFinalResultTimer");tt(this,"waitingForFinalResultDelay",4e3);tt(this,"asrStreaming",!1);tt(this,"sourceInfo","-?-");if(window.SepiaFW&&(SepiaFW.webAudio.defaultProcessorOptions.moduleFolder="lib"),!window.SepiaVoiceRecorder)SepiaVoiceRecorder={notSupported:!0},console.error("SEPIA Web Audio Library not found or not supported (IE11?)!");else{this.sepiaSpeechRecognition=e,this.sepiaSpeechRecognitionConfig=t;const r=this;SepiaVoiceRecorder.onProcessorReady=function(i){console.log("SepiaVoiceRecorder -  onProcessorReady",i),this.sourceInfo="Sample-rate: "+i.targetSampleRate+"Hz (factor: "+i.inputSampleRate/i.targetSampleRate+`)
Device Label:
`+(i.sourceInfo?i.sourceInfo.label:""),console.log(this.sourceInfo),r.isLoading=!1,r.isRecording=!1,r.isWaitingForFinalResult=!1,SepiaVoiceRecorder.start()},SepiaVoiceRecorder.onConnected=function(i){i&&i.model&&(console.log("INFO - connected - ASR active model: "+i.model),e._dispatchEvent(new Event("start")))},SepiaVoiceRecorder.onDisconnected=function(){e._dispatchEvent(new Event("end"))},SepiaVoiceRecorder.onProcessorInitError=function(i){r.onMicError();const s=new md;switch(s.message=i.message,i.name){case"NotAllowedError":s.error=Hp.NOTALLOWED,s._dispatch(e);break;default:console.log(i);break}location.protocol=="http:"&&!location.origin.indexOf("http://localhost")==0&&console.error("Init. ERROR - Likely because of insecure origin (no HTTPS or localhost)")},SepiaVoiceRecorder.onProcessorError=function(i){console.error("SepiaVoiceRecorder -  onProcessorError",i),r.onMicError(),console.log("ERROR - onProcessorError: "+i.name)},SepiaVoiceRecorder.onAudioStart=function(i){e._dispatchEvent(new Event("audiostart")),r.isRecording=!0},SepiaVoiceRecorder.onAudioEnd=function(i){e._dispatchEvent(new Event("audioend")),r.isRecording=!1,r.isWaitingForFinalResult&&(clearTimeout(r.waitingForFinalResultTimer),r.waitingForFinalResultTimer=setTimeout(function(){r.isWaitingForFinalResult=!1},r.waitingForFinalResultDelay)),console.log("Microphone is CLOSED")},SepiaVoiceRecorder.onProcessorRelease=function(i){console.log("SepiaVoiceRecorder -  onProcessorRelease"),r.isRecording=!1,r.isLoading=!1,r.isWaitingForFinalResult=!1},SepiaVoiceRecorder.onDebugLog=function(i){},SepiaVoiceRecorder.onResamplerData=function(i){},SepiaVoiceRecorder.onSpeechRecognitionStateChange=function(i){i.state=="onStreamStart"?(r.asrStreaming,r.asrStreaming=!0):i.state=="onStreamEnd"&&(r.asrStreaming&&(i.bufferOrTimeLimit===!0&&console.log("Speech Recognition - Stopped streaming due to buffer- or time-limit"),r.isRecording?SepiaVoiceRecorder.stop():r.isWaitingForFinalResult&&(clearTimeout(r.waitingForFinalResultTimer),r.waitingForFinalResultTimer=setTimeout(function(){r.isWaitingForFinalResult=!1},r.waitingForFinalResultDelay))),r.asrStreaming=!1)},SepiaVoiceRecorder.onSpeechRecognitionEvent=function(i){if(i.type=="result"){if(!r.isRecording&&!r.isWaitingForFinalResult)return;const s=new $me;s.transcript=i.transcript,s.confidence=i.confidence;const o=new qme([s]);if(i.isFinal){r.isWaitingForFinalResult&&!r.isRecording&&clearTimeout(r.waitingForFinalResultTimer),o.isFinal=!0;const a=new gU([o]),A=new Zw(a);if(i.transcript)A._dispatch(e,"result");else{const l=new md;l.error=Hp.NOSPEECH,l.message="No speech was detected.",l._dispatch(e)}r.isWaitingForFinalResult=!1}else{o.isFinal=!1;const a=new gU([o]),A=new Zw(a);i.transcript?A._dispatch(e,"result"):A._dispatch(e,"nomatch"),r.isWaitingForFinalResult=!0}}else if(i.type=="error"){const s=new md;if(s.message=i.message,i.name&&i.message)switch(i.name){case"SocketConnectionError":s.error=Hp.NETWORK,s._dispatch(e);break;case"Error":i.message==="ChunkProcessorError failed to load."&&(s.error=Hp.SERVICENOTALLOWED,s.message="You are likely unauthorized to access this SEPIA STT server.",s._dispatch(e));break;default:console.log(i);break}else console.error("Speech Recognition Error:",i)}else console.log("Speech Recognition - Event: "+i.type)},SepiaVoiceRecorder.onWaveEncoderAudioData=function(i){},SepiaVoiceRecorder.onVadStateChange=function(i,s){switch(i){case"vaup":e._dispatchEvent(new Event("soundstart"));break;case"vadown":e._dispatchEvent(new Event("soundend"));break;case"speechstart":e._dispatchEvent(new Event("speechstart"));break;case"speechend":e._dispatchEvent(new Event("speechend"));break}}}}toggleMic(){const e=this.sepiaSpeechRecognition.lang.split("-")[0];if(cl.language!=this.sepiaSpeechRecognition.lang&&cl.language!=e){const r=new md;r.error=Hp.LANGUAGENOTSUPPORTED,r.message="The specified SEPIA STT server does not support the language specified by the user agent.",r._dispatch(this.sepiaSpeechRecognition);return}const t=this;!this.isLoading&&!this.isRecording&&!this.isWaitingForFinalResult?(this.isLoading=!0,SepiaVoiceRecorder.stopAndReleaseIfActive(function(){SepiaFW.webAudio.tryNativeStreamResampling=!1;const r={language:t.sepiaSpeechRecognition.lang,continuous:t.sepiaSpeechRecognition.continuous,messageFormat:"default"};var i=Object.assign(t.sepiaSpeechRecognitionConfig,r);console.log(i),SepiaVoiceRecorder.create({gain:t.gain,asr:i,vad:!0})})):this.isRecording?SepiaVoiceRecorder.stop():(this.isLoading||this.isWaitingForFinalResult)&&SepiaVoiceRecorder.stopAndReleaseIfActive(function(){t.isLoading=!1,t.isRecording=!1,t.isWaitingForFinalResult=!1})}releaseMic(e){SepiaVoiceRecorder.stopAndReleaseIfActive(function(){this.isLoading=!1,this.isRecording=!1,this.isWaitingForFinalResult=!1,e&&e()})}onMicError(){this.isRecording=!1,this.isWaitingForFinalResult=!1,this.isLoading=!1}}class mV{constructor(){tt(this,"src","");tt(this,"weight",1)}}var Jc,aC,s4;class o0e{constructor(){Nu(this,aC);Nu(this,Jc,[]);tt(this,"length",0);tt(this,"addFromURI",(e,t=1)=>{const r=new mV;fetch(e).then(i=>{i.text().then(s=>{r.src=s,r.weight=t,vs(this,Jc).push(r)})}).catch(i=>{console.log("Failed to add SpeechGrammar from URI: ",i)})});tt(this,"addFromString",(e,t=1)=>{const r=new mV;r.src=e,r.weight=t,vs(this,Jc).push(r)});return new Proxy(this,{get:(e,t)=>{var r;if(t==="addFromString"||t==="addFromURI")return function(){return e[t].apply(e,arguments)};if(typeof+t=="number")return XQ(r=e,aC,s4).call(r,t);if(t==="length")return vs(e,Jc).length}})}}Jc=new WeakMap,aC=new WeakSet,s4=function(e){return vs(this,Jc)[e]};let o4={};const a0e=n=>(o4=n,A0e);var Gd;class A0e{constructor(){Nu(this,Gd,new s0e(this,o4));tt(this,"grammars",new o0e);tt(this,"lang",document.documentElement.lang||navigator.language);tt(this,"continuous",!1);tt(this,"interimResults",!1);tt(this,"maxAlternatives",1);tt(this,"start",()=>{vs(this,Gd).toggleMic()});tt(this,"stop",()=>{vs(this,Gd).toggleMic()});tt(this,"abort",()=>{vs(this,Gd).toggleMic()});tt(this,"onaudiostart",e=>{});tt(this,"onsoundstart",e=>{});tt(this,"onspeechstart",e=>{});tt(this,"onspeechend",e=>{});tt(this,"onsoundend",e=>{});tt(this,"onaudioend",e=>{});tt(this,"onresult",e=>{});tt(this,"onnomatch",e=>{});tt(this,"onerror",e=>{});tt(this,"onstart",e=>{});tt(this,"onend",e=>{});tt(this,"_eventCallbacks",new Map);tt(this,"_dispatchEvent",e=>{const t=this._eventCallbacks.get(e.type);t&&t.forEach(r=>r(e)),this[`on${e.type}`](e)});tt(this,"addEventListener",(e,t)=>{this._eventCallbacks.has(e)?this._eventCallbacks.get(e).push(t):this._eventCallbacks.set(e,[t])});tt(this,"removeEventListener",(e,t)=>{if(this._eventCallbacks.has(e)){const r=this._eventCallbacks.get(e);r.includes(t)&&r.splice(r.indexOf(t),1)}});jme()}}Gd=new WeakMap;class l0e{constructor(){tt(this,"serverUrl","http://localhost:20741");tt(this,"clientId","any");tt(this,"accessToken","test1234");tt(this,"task","assistant");tt(this,"model","");tt(this,"optimizeFinalResult",!0);tt(this,"engineOptions",{})}}const c0e=2e4;async function u0e(n){let e=0;const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r],s=`${i==null?void 0:i.name}: ${i==null?void 0:i.message}`;if(e+=s.length,e<c0e)t.push(s);else break}return t.reverse(),t}const f0e="_message_1mjdp_1",d0e="_colorBg_1mjdp_13",h0e="_name_1mjdp_24",p0e="_speaker_1mjdp_39",zp={message:f0e,"chat-bubble":"_chat-bubble_1mjdp_1",colorBg:d0e,name:h0e,speaker:p0e},g0e=n=>{const{timestamp:e,name:t,message:r,type:i,color:s,err:o}=n;let a=new Date(e);const A=a.getHours()<10?"0"+a.getHours():a.getHours(),l=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes(),c=`${A}:${l}`;return J.jsxs("div",{className:`${zp.message} ${i&&zp.speaker}`,children:[J.jsxs("div",{className:zp.name,style:i?{}:{color:s},children:[t,", ",J.jsx("span",{children:c})]}),J.jsxs("div",{className:zp["chat-bubble"],style:o?{color:"#7a7a7a"}:{},children:[J.jsx("div",{className:zp.colorBg,style:i?{}:{backgroundColor:s}}),r+(o?"  ( Not sent )":"")]})]})},m0e=ct.sessionId??Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);ct.sessionId=m0e;const v0e=new l0e,y0e="Speaker",B0e=window.webkitSpeechRecognition||a0e(v0e),w0e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],C0e=["January","February","March","April","May","June","July","August","September","October","November","December"];function b0e({templateInfo:n,micEnabled:e,setMicEnabled:t,speechRecognition:r,setSpeechRecognition:i}){const[s,o]=Y.useState(!1),{t:a}=pe.useContext(ao),[A]=Y.useState(ct[`${n.id}_fulBio`]),[l]=Y.useState(ct[`${n.id}_fulBio`].colorKey?Pd[ct[`${n.id}_fulBio`].colorKey].fontColor:Pd[Object.keys(Pd)[0]].fontColor),[c,u]=Y.useState(ct.speaker||y0e);pe.useEffect(()=>{ct.speaker=c},[c]),Y.useContext(ki);const[f,d]=Y.useState(""),[h,p]=Y.useState([]),m=async b=>{b.preventDefault(),d(b.target.value)};Y.useEffect(()=>{const b=document.querySelector("#msgscroll");b.scrollTo(0,b.scrollHeight)},[h]),pe.useEffect(()=>{const b=F=>{F.ctrlKey&&F.key==="c"&&p([])};return window.addEventListener("keydown",b),()=>{window.removeEventListener("keydown",b)}},[]);const g=()=>{r.start(),t(!0)},v=()=>{r.stop(),t(!1)};pe.useEffect(()=>{s||document.getElementById("messageInput").focus()},[s]);const y=async b=>{if(b.preventDefault&&b.preventDefault(),v(),!s){const I=b.target.elements.message.value;w(I)}},w=async b=>{if(b&&b!==""&&!s){o(!0);const F=A.name;d("");const I={name:c,message:b,timestamp:Date.now(),type:1};p(T=>[...T,I]);const S=await u0e(h);if(S.push(`${c}: ${b}`),b.replaceAll(" ","")===""){const T=Mue(Rue(Vme)),H={name:F,message:T,timestamp:Date.now(),type:0};p(X=>[...X,H]),o(!1)}else try{const T=new Date,H=`${w0e[T.getDay()]}, ${C0e[T.getMonth()]} ${T.getDate()}, ${1900+T.getYear()}`,X=`${T.getHours()}:${T.getMinutes()} `,Q="https://upstreet.webaverse.com/api/ai",E={prompt:`The following is part of a conversation between ${c} and ${F}. ${F} is descriptive and helpful, and is honest when it doesn't know an answer. Included is a context which acts a short-term memory, used to guide the conversation and track topics.

CONTEXT:
Current Day: ${H}
Current Time: ${X}

Info about ${F}
---

Bio: "${A.bio}"

Question 1: "${A.question1}"
Response 1: "${A.response1}"

Question 2: "${A.question2}"
Response 2: "${A.response2}"

Question 3: "${A.question3}"
Response 3: "${A.response3}"

Favourite Color: "${A.colorKey}"

MOST RECENT MESSAGES:

${S.join(`
`)}
${F}:`,max_tokens:250,temperature:.9,top_p:1,frequency_penalty:0,presence_penalty:.6,stop:[c+":",F+":","\\n"]};n4.post(Q,E).then(R=>{const k=R.data.choices[0].text,M={name:F,message:k,timestamp:Date.now(),type:0};p(L=>[...L,M]),o(!1)}).catch(R=>{I.error=!0,o(!1),console.error(R)})}catch(T){o(!1),console.error(T)}}};let C=!1;return pe.useEffect(()=>{if(!s){if(r||C)return;C=!0;const b=new B0e({});i(b),b.onerror=F=>console.error(F.error,F.message),b.onresult=F=>{const I=F.resultIndex;F.results[I].isFinal&&(w(`${F.results[I][0].transcript}`),o(!0))},b.interimResults=!0,b.continuous=!0}},[]),J.jsxs("div",{className:Ko.chatBox,children:[J.jsxs("div",{className:Ko.speaker,children:[J.jsx("p",{className:Ko.warning,children:a("text.apiUnderMaintnance")}),J.jsx("label",{htmlFor:"speaker",children:a("labels.yourName")}),J.jsx("input",{type:"text",name:"speaker",defaultValue:c,onChange:b=>u(b.target.value)})]}),J.jsx("label",{children:a("labels.conversation")}),J.jsx("div",{className:Ko.messages,children:J.jsx("div",{className:Ko.scrollBox,id:"msgscroll",children:h.map((b,F)=>{if(b.timestamp)return J.jsx(g0e,{name:b.name,timestamp:b.timestamp,message:b.message,type:b.type,color:l,err:b.error},F)})})}),J.jsxs("form",{className:Ko.send,style:{opacity:s?"0.4":"1"},onSubmit:y,children:[J.jsx(In,{type:"icon",theme:"light",icon:"microphone",className:Ko.mic,size:32,active:!!e,onClick:()=>e?v():g()}),J.jsx("input",{autoComplete:"off",type:"text",name:"message",id:"messageInput",value:f,onInput:m,onChange:m,disabled:s}),J.jsx(In,{theme:"light",text:a("callToAction.send"),size:14,onSubmit:y,className:Ko.sendButton,type:"submit"})]}),J.jsxs("p",{className:`${Ko.isTyping} ${s&&Ko.show}`,children:[J.jsx("span",{style:{color:l},children:A.name})," is typing..."]})]})}function x0e({templateInfo:n}){const{setViewMode:e}=Y.useContext(ro),[t,r]=Y.useState(!1),[i,s]=Y.useState(!1),{playSound:o}=Y.useContext(io),{isMute:a}=Y.useContext(to),A=()=>{e(St.SAVE),!a&&o("backNextButton"),i&&i.stop(),r(!1)},{t:l}=pe.useContext(ao);return J.jsxs("div",{className:bc.container,children:[J.jsx("div",{className:"sectionTitle",children:l("pageTitles.chat")}),J.jsxs("div",{className:bc.chatContainer,children:[J.jsx("div",{className:bc.topLine}),J.jsx("div",{className:bc.bottomLine}),J.jsx("div",{className:bc.scrollContainer,children:J.jsx(b0e,{templateInfo:n,micEnabled:t,setMicEnabled:r,speechRecognition:i,setSpeechRecognition:s})})]}),J.jsx("div",{className:bc.buttonContainer,children:J.jsx(In,{theme:"light",text:l("callToAction.back"),size:14,className:bc.buttonLeft,onClick:A})})]})}const I0e="_buttonContainer_1fd4o_1",F0e="_buttonLeft_1fd4o_10",E0e="_buttonRight_1fd4o_14",U0e="_buttonCenter_1fd4o_18",hy={buttonContainer:I0e,buttonLeft:F0e,buttonRight:E0e,buttonCenter:U0e};var Qn;(function(n){n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.LINEAR=9729]="LINEAR",n[n.REPEAT=10497]="REPEAT"})(Qn||(Qn={}));const mU="blend_",vV="vrmColliderSphere";function _0e(n){return{title:n.name,version:"v0",author:n.authors[0]||"",contactInformation:n.contactInformation,allowedUserName:n.allowedUserName,violentUssageName:n.allowExcessivelyViolentUsage?"Allow":"Disallow",sexualUssageName:n.allowExcessivelySexualUsage?"Allow":"Disallow",commercialUssageName:"Disallow"}}function S0e(n){const e=[];for(const t in n.humanBones)e.push({bone:t,node:n.humanBones[t].node});return{humanBones:e}}function Q0e(n){switch(n){case"happy":return"joy";case"sad":return"sorrow";case"relaxed":return"fun";case"aa":return"a";case"ih":return"i";case"ou":return"u";case"ee":return"e";case"oh":return"o";default:return n}}function R0e(n){if(n.includes("Thumb")){if(n.includes("Metacarpal"))return n.replace("Metacarpal","Proximal");if(n.includes("Proximal"))return n.replace("Proximal","Intermediate")}return n}class M0e{parse(e,t,r,i,s,o,a){var Me;const A=_0e(e.meta),l=S0e(e.humanoid),c=e.materials,u=[],f={generator:"UniGLTF-2.0.0",version:"2.0"};if(t)if(l)if(A){if(!c)throw new Error("materials is undefined or null")}else throw new Error("meta is undefined or null");else throw new Error("humanoid is undefined or null");else throw new Error("avatar is undefined or null");const d=c.filter((W,O,se)=>se.findIndex(de=>de.name===W.name.replace(" (Outline)",""))===O).map(W=>W),h=d.map(W=>W.name),p=r?{name:"icon",imageBitmap:r.image}:null,m=d.filter(W=>W.map).map(W=>{if(!W.map)throw new Error(W.name+" map is null");return{name:W.name,imageBitmap:W.map.image}}),g=d.filter(W=>W.userData.shadeTexture).map(W=>{if(!W.userData.shadeTexture)throw new Error(W.userData.shadeTexture+" map is null");return{name:W.name+"_shade",imageBitmap:W.userData.shadeTexture.image}}),v=d.filter(W=>W.roughnessMap).map(W=>W.roughnessMap?{name:W.name+"_orm",imageBitmap:W.roughnessMap.image}:null),y=d.filter(W=>W.roughnessMap).map(W=>W.normalMap?{name:W.name+"_normal",imageBitmap:W.normalMap.image}:null),w=[...m,...g,...v,...y].filter(W=>W!==null),C=V0e(w,p),b=L0e(C),F=P0e(C),I=D0e(d,w),S=t.children.filter(W=>W.children.length>0&&W.children[0].type===oi.Bone)[0],T=a4(S).filter(W=>W.name!==vV),H=T.map(W=>W.name),X=T.map(W=>({children:W.children.filter(O=>O.name!==vV).map(O=>H.indexOf(O.name)),name:W.name,rotation:[W.quaternion.x,W.quaternion.y,W.quaternion.z,W.quaternion.w],scale:[W.scale.x,W.scale.y,W.scale.z],translation:[W.position.x,W.position.y,W.position.z]})),Q=[],B=t.children.filter(W=>W.type===oi.Group||W.type===oi.SkinnedMesh),E=[];B.forEach(W=>{const O=W.type===oi.Group?W.children[0]:W,se=O.geometry.attributes,de=new tl(se.position,Qn.FLOAT,Nt.POSITION,ea.VEC3,O.name,void 0);E.push(de);const Be=E.length-1,V=new tl(se.normal,Qn.FLOAT,Nt.NORMAL,ea.VEC3,O.name,void 0);E.push(V),E.push(new tl(se.uv,Qn.FLOAT,Nt.UV,ea.VEC2,O.name,void 0)),E.push(new tl(se.skinWeight,Qn.FLOAT,Nt.SKIN_WEIGHT,ea.VEC4,O.name,void 0)),E.push(new tl(se.skinIndex,Qn.UNSIGNED_SHORT,Nt.SKIN_INDEX,ea.VEC4,O.name,void 0)),(W.type===oi.Group?W.children.map(N=>N):[W]).forEach(N=>{if(!N.geometry.index)throw new Error(N.name+" geometry.index is null");E.push(new tl(N.geometry.index,Qn.UNSIGNED_INT,Nt.INDEX,ea.SCALAR,O.name,N.name))}),O.morphTargetDictionary||(O.morphTargetDictionary={},O.morphTargetInfluences=[],O.geometry.morphAttributes={},O.updateMorphTargets()),O.geometry.userData.targetNames=[],console.warn("taking only mesh 0 for morph targets now, take the correct mesh");for(const N in e.expressionManager.expressionMap){const j=e.expressionManager.expressionMap[N],q=j._binds.map(ne=>({mesh:0,index:ne.index,weight:ne.weight*100}));if(q.length>0){let ne=!1;for(const Ce in ii)if(N===ii[Ce]&&N!=="surprised"){u.push({name:N,presetName:Q0e(N),binds:q,isBinary:j.isBinary}),ne=!0;break}ne===!1&&u.push({name:N,presetName:"unknown",binds:q,isBinary:j.isBinary})}}const x=(N,j,q,ne)=>{const Ce=[],be=[];for(let Ee=0;Ee<N.length;Ee+=3){const We=N[Ee],Te=N[Ee+1],ie=N[Ee+2];(We!==0||Te!==0||ie!==0)&&(Ce.push(Ee/3),be.push(We,Te,ie))}if(Ce.length>0){const We=Ce.length%4,Te=We===0?0:4-We;if(Te>0)for(let we=0;we<Te;we++)Ce.push(0),be.push(0,0,0);const ie={targetMeshDataIndex:Be,count:Ce.length,indices:new Uint32Array(Ce),values:new Float32Array(be)};E.push(new tl(ne,Qn.FLOAT,q,ea.VEC3,O.name,mU+j,ie))}};for(const N in O.morphTargetDictionary){O.geometry.userData.targetNames.push(N);const j=O.morphTargetDictionary[N],q=O.geometry.morphAttributes;x(q.position[j].array,N,Nt.BLEND_POSITION,se.position),q.normal&&x(q.normal[j].array,N,Nt.BLEND_NORMAL,se.normal)}}),B.forEach(W=>{const O=W.type===oi.Group?W.children[0]:W,se=new Float32Array(O.skeleton.boneInverses.map(de=>de.elements).flat());E.push(new tl(new st(se,16),Qn.FLOAT,Nt.BIND_MATRIX,ea.MAT4,O.name,O.name))}),Q.push(...E.map(W=>({byteOffset:0,componentType:W.valueType,count:W.attribute.count,max:W.max,min:W.min,normalized:!1,type:W.accessorsType})));const R=N0e(B,E,h);B.forEach((W,O)=>{X.push({mesh:O,name:W.name,rotation:[W.quaternion.x,W.quaternion.y,W.quaternion.z,W.quaternion.w],scale:[W.scale.x,W.scale.y,W.scale.z],skin:O,translation:[W.position.x,W.position.y,W.position.z]})});const k=k0e(B,E,H),M={humanBones:[]};l.humanBones.forEach(W=>{H.indexOf(W.node.name)!=-1&&M.humanBones.push({bone:R0e(W.bone),node:H.indexOf(W.node.name),useDefaultValues:!0})});const L={floatProperties:{_DstBlend:.5,_ShadeShift:.5,_ShadeToony:.5,_ShadingGradeRate:.5},keywordMap:{_NORMALMAP:!1,MTOON_OUTLINE_COLOR_FIXED:!0,MTOON_OUTLINE_WIDTH_WORLD:!0},name:"VRMCombinedMat",renderQueue:2e3,shader:"VRM/MToon",tagMap:{RenderType:"Opaque"},textureProperties:{_MainTex:0,_ShadeTexture:0},vectorProperties:{_Color:[1,1,1,1],_EmissionColor:[0,0,0,1],_EmissionMap:[0,0,1,1],_MainTex:[0,0,1,1],_OutlineColor:[0,0,0,1],_OutlineWidthTexture:[0,0,1,1],_ReceiveShadowTexture:[0,0,1,1],_RimColor:[0,0,0,1],_RimTexture:[0,0,1,1],_ShadeColor:[.9,.9,.9,1]}},Z={name:"STDCombinedMat",shader:"VRM_USE_GLTFSHADER"},P=[];d.forEach(W=>{W.type=="ShaderMaterial"?P.push(P.push(Object.assign({},L))):P.push(P.push(Object.assign({},Z)))});const U=A;i.forEach(W=>{for(let O=0;O<T.length&&T[O].name!==W.name;O++);});const G=[],oe=((Me=B.find(W=>W.isSkinnedMesh))==null?void 0:Me.skeleton)||null;for(let W=0;W<oe.bones.length;W++){const O=oe.bones[W];if(O.userData.VRMcolliders){const se={node:H.indexOf(O.name),colliders:[],name:O.name};O.userData.VRMcolliders.forEach(de=>{const Be=de.sphere;se.colliders.push({radius:Be.radius*o,offset:{x:Be.offset[0]*o,y:Be.offset[1]*o,z:Be.offset[2]*o}})}),G.push(se)}}console.log("COLLIDER GROUPS",G);const D=W=>{for(let O=0;O<T.length;O++)if(T[O].name===W)return O;return-1},K=W=>{const O=D(W);if(O==-1)return[-1];{const se=[];return T[O].traverse(Be=>{Be.isBone&&se.push(D(Be.name))}),se}},ce=[];i.forEach(W=>{var V;const O=K(W.name),se=[];if(W.colliderGroups.forEach(_=>{const x=_.colliders[0];if(x!=null){const N=x.parent,j=G.findIndex(q=>q.name===N.name);j!=-1?se.push(j):console.warn("No collider group for bone name: ",N.name+" was found")}else console.log("No colliders definition were present in vrm file file for: ",W.name+" spring bones")}),O===[-1]){console.warn("No bone found for spring bone "+W.name);return}let de=D((V=W.center)==null?void 0:V.name);de==-1&&console.warn("no center bone for spring bone "+W.name);const Be=W.settings;ce.push({bones:O,center:de,colliderGroups:se,dragForce:Be.dragForce,gravityDir:{x:Be.gravityDir.x,y:Be.gravityDir.y,z:Be.gravityDir.z},gravityPower:Be.gravityPower,hitRadius:Be.hitRadius,stiffiness:Be.stiffness})});const le={boneGroups:ce,colliderGroups:G};console.log(le),U.texture=p?C.length-1:void 0;const he=[];he.push(...w.map(W=>({buffer:yV(W.imageBitmap),type:Nt.IMAGE}))),E.forEach((W,O)=>{W.buffer?he.push({buffer:W.buffer,typeString:"",type:W.type}):W.sparse&&(he.push({buffer:W.sparse.indices,typeString:"indices",type:W.type,count:W.sparse.count}),he.push({buffer:W.sparse.values,typeString:"values",type:W.type}))}),p&&he.push({buffer:yV(p.imageBitmap),type:Nt.IMAGE});let $=0,ae=0,te=0,Ae=0;const re=he.map(W=>{const O={buffer:0,byteLength:W.buffer.byteLength,byteOffset:$,target:W.type===Nt.IMAGE||W.type===Nt.BIND_MATRIX?void 0:W.type===Nt.INDEX?Qn.ELEMENT_ARRAY_BUFFER:Qn.ARRAY_BUFFER};return $+=W.buffer.byteLength,W.type===Nt.IMAGE?(C[ae++].bufferView=Ae,Ae++):E[te].sparse?(Q[te].sparse==null&&(Q[te].sparse={}),W.typeString==="indices"&&(Q[te].sparse.count=W.count,Q[te].sparse[W.typeString]={bufferView:Ae,byteOffset:0,componentType:Qn.UNSIGNED_INT}),W.typeString==="values"&&(Q[te].sparse[W.typeString]={bufferView:Ae,byteOffset:0}),W.typeString==="values"&&te++,Ae++):(E[te].bufferIndex=Ae,Q[te].bufferView=Ae,te++,Ae++),O}),me=W0e(t,X);T0e(U);const Pe={accessors:Q,asset:f,buffers:[{byteLength:$}],bufferViews:re,extensions:{VRM:{blendShapeMaster:{blendShapeGroups:u},firstPerson:{firstPersonBone:44,firstPersonBoneOffset:new z,lookAtHorizontalInner:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtHorizontalOuter:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtTypeName:"Bone",lookAtVerticalDown:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtVerticalUp:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10}},materialProperties:P,humanoid:M,meta:U,secondaryAnimation:le,specVersion:"0.0"}},extensionsUsed:["KHR_materials_unlit","KHR_texture_transform","VRM"],images:C,materials:I,meshes:R,nodes:X,samplers:b,scenes:me,skins:k,textures:F};console.log(Pe);const _e=new BV(yU(JSON.stringify(Pe,void 0,2)),"JSON"),Se=new BV(Bg(he.map(W=>W.buffer)),"BIN\0"),Fe=Bg([_e.buffer,Se.buffer]),Ue=Bg([yU("glTF"),vU(2,4),vU(Fe.byteLength+12,4)]);a(Bg([Ue,Fe]))}}function T0e(n){n.title=n.title||"Character",n.version=n.version||"1",n.author=n.author||"Anon",n.contactInformation=n.contactInformation||"",n.reference=n.reference||"",n.allowedUserName=n.allowedUserName||"Everyone",n.violentUssageName=n.violentUssageName||"Disallow",n.sexualUssageName=n.sexualUssageName||"Disallow",n.commercialUssageName=n.commercialUssageName||"Disallow",n.otherPermissionUrl=n.otherPermissionUrl||"",n.licenseName=n.licenseName||"Redistribution_Prohibited",n.otherLicenseUrl=n.otherLicenseUrl||""}function a4(n){return n.children.length<=0?[n]:[n].concat(n.children.map(e=>a4(e)).flat())}function yV(n){const e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0);const t=e.toDataURL("image/png"),r=atob(t.split(",")[1]),i=(4-r.length%4)%4,s=new ArrayBuffer(r.length+i),o=new DataView(s);for(let a=0;a<r.length;a++)o.setUint8(a,r.charCodeAt(a));for(let a=r.length;a<r.length+i;a++)o.setUint8(a,0);return s}function vU(n,e){const t=new ArrayBuffer(e);return new DataView(t).setUint32(0,n,!0),t}function yU(n){return new TextEncoder().encode(n).buffer}function Bg(n){let e=0;for(let i=0;i<n.length;i++)e+=n[i].byteLength;const t=new Uint8Array(e);let r=0;for(let i=0;i<n.length;++i)t.set(new Uint8Array(n[i]),r),r+=n[i].byteLength;return t.buffer}function x1(n,e){const t=e===Qn.UNSIGNED_SHORT?2:4,r=n.array;let i=0;const s=new ArrayBuffer(n.count*n.itemSize*t),o=new DataView(s);for(let a=0;a<n.count;a++)for(let A=0;A<n.itemSize;A++){let l;n.itemSize>4?l=r[a*n.itemSize+A]:A===0?l=n.getX(a):A===1?l=n.getY(a):A===2?l=n.getZ(a):l=n.getW(a),e===Qn.UNSIGNED_SHORT?o.setUint16(i,l,!0):e===Qn.UNSIGNED_INT?o.setUint32(i,l,!0):o.setFloat32(i,l,!0),i+=t}return s}class BV{constructor(e,t){this.data=e,this.type=t;const r=this.data;this.buffer=Bg([vU(r.byteLength,4),yU(this.type),r])}paddingBinary(e,t){const r=Math.ceil(e.byteLength/4)*4;if(e.byteLength===r)return e;const i=new Uint8Array(r);i.set(new Uint8Array(e),0);for(let s=e.byteLength;s<r;s++)i.set(new Uint8Array(t),s);return i.buffer}}class tl{constructor(e,t,r,i,s,o,a){if(this.attribute=e,this.type=r,this.valueType=t,this.accessorsType=i,this.meshName=s,this.name=o,a){const{indices:A,values:l,count:c,targetMeshDataIndex:u}=a,f=new st(A,1),d=new st(l,e.itemSize);this.targetMeshDataIndex=u,this.sparse={targetMeshDataIndex:u,count:c,indices:x1(f,Qn.UNSIGNED_INT),values:x1(d,Qn.FLOAT)},this.max=r===Nt.POSITION||r===Nt.BLEND_POSITION?[Math.max.apply(null,Array.from(l).filter((h,p)=>p%3===0)),Math.max.apply(null,Array.from(l).filter((h,p)=>p%3===1)),Math.max.apply(null,Array.from(l).filter((h,p)=>p%3===2))]:void 0,this.min=r===Nt.POSITION||r===Nt.BLEND_POSITION?[Math.min.apply(null,Array.from(l).filter((h,p)=>p%3===0)),Math.min.apply(null,Array.from(l).filter((h,p)=>p%3===1)),Math.min.apply(null,Array.from(l).filter((h,p)=>p%3===2))]:void 0}else this.buffer=x1(this.attribute,this.valueType),this.max=r===Nt.POSITION||r===Nt.BLEND_POSITION?[Math.max.apply(null,Array.from(this.attribute.array).filter((A,l)=>l%3===0)),Math.max.apply(null,Array.from(this.attribute.array).filter((A,l)=>l%3===1)),Math.max.apply(null,Array.from(this.attribute.array).filter((A,l)=>l%3===2))]:void 0,this.min=r===Nt.POSITION||r===Nt.BLEND_POSITION?[Math.min.apply(null,Array.from(this.attribute.array).filter((A,l)=>l%3===0)),Math.min.apply(null,Array.from(this.attribute.array).filter((A,l)=>l%3===1)),Math.min.apply(null,Array.from(this.attribute.array).filter((A,l)=>l%3===2))]:void 0}}var vd;(function(n){n.MeshBasicMaterial="MeshBasicMaterial",n.MeshStandardMaterial="MeshStandardMaterial",n.MToonMaterial="MToonMaterial"})(vd||(vd={}));var ea;(function(n){n.SCALAR="SCALAR",n.VEC2="VEC2",n.VEC3="VEC3",n.VEC4="VEC4",n.MAT4="MAT4"})(ea||(ea={}));var Nt;(function(n){n.POSITION="POSITION",n.NORMAL="NORMAL",n.UV="UV",n.INDEX="INDEX",n.SKIN_WEIGHT="SKIN_WEIGHT",n.SKIN_INDEX="SKIN_INDEX",n.BLEND_POSITION="BLEND_POSITION",n.BLEND_NORMAL="BLEND_NORMAL",n.BIND_MATRIX="BIND_MATRIX",n.IMAGE="IMAGE"})(Nt||(Nt={}));var oi;(function(n){n.Group="Group",n.SkinnedMesh="SkinnedMesh",n.Object3D="Object3D",n.Bone="Bone"})(oi||(oi={}));const N0e=(n,e,t)=>n.map(r=>{const i=r.type===oi.Group?r.children[0]:r,s=r.type===oi.Group?r.children.map(o=>o):[r];return{name:r.name,primitives:s.map(o=>{const a=e.map(l=>l.meshName===i.name?l.type:null),A=Array.isArray(o.material)?o.material[0].name:o.material.name;return{attributes:{JOINTS_0:a.indexOf(Nt.SKIN_INDEX),NORMAL:a.indexOf(Nt.NORMAL),POSITION:a.indexOf(Nt.POSITION),TEXCOORD_0:a.indexOf(Nt.UV),WEIGHTS_0:a.indexOf(Nt.SKIN_WEIGHT)},extras:{targetNames:o.geometry.userData.targetNames},indices:e.map(l=>l.type===Nt.INDEX&&l.meshName===i.name?l.name:null).indexOf(o.name),material:t.indexOf(A),mode:4,targets:i.geometry.userData.targetNames?i.geometry.userData.targetNames.map(l=>{const c=e.map(d=>d.type===Nt.BLEND_NORMAL&&d.meshName===i.name?d.name:null).indexOf(mU+l),u=e.map(d=>d.type===Nt.BLEND_POSITION&&d.meshName===i.name?d.name:null).indexOf(mU+l),f={};return u!==-1&&(f.POSITION=u),c!==-1&&(f.NORMAL=c),f}):void 0}})}}),k0e=(n,e,t)=>n.map(r=>{const i=r.type===oi.Group?r.children[0]:r;return{inverseBindMatrices:e.map(s=>s.type===Nt.BIND_MATRIX?s.meshName:null).indexOf(i.name),joints:i.skeleton.bones.map(s=>t.indexOf(s.name)).filter(s=>s!==-1),skeleton:t.indexOf(i.skeleton.bones[0].name)}}),D0e=(n,e)=>n.map(t=>{let r,i=null;if(t=t.userData.vrmMaterial?t.userData.vrmMaterial:t,t.type==="ShaderMaterial")i={},i.shadeMultiplyTexture={index:e.map(h=>h.name).indexOf(t.uniforms.shadeMultiplyTexture.name)},r=t.color?[1,1,1,1]:void 0;else{const d=t;r=d.color?[d.color.r,d.color.g,d.color.b,1]:void 0}let s=-1;t.map?s=e.map(d=>d.name).indexOf(t.name):t.uniforms&&t.uniforms.map&&(s=e.map(d=>d.name).indexOf(t.uniforms.map.name));let o=-1;t.roughnessMap&&(o=e.map(d=>d.name).indexOf(t.name+"_orm"));let a=-1;t.normalMap&&(a=e.map(d=>d.name).indexOf(t.name+"_normal"));const A=s>=0?{extensions:{KHR_texture_transform:{offset:[0,0],scale:[1,1]}},index:s,texCoord:0}:void 0,l={baseColorFactor:r,baseColorTexture:A},c=o>=0?{index:o,texCoord:0}:void 0,u=a>=0?{index:a,texCoord:0}:void 0;if(c)l.metallicRoughnessTexture=c;else{const d=(()=>{switch(t.type){case vd.MeshStandardMaterial:return t.metalness;case vd.MeshBasicMaterial:return 0;default:return 0}})(),h=(()=>{switch(t.type){case vd.MeshStandardMaterial:return t.roughness;case vd.MeshBasicMaterial:return .9;default:return .9}})();l.metallicFactor=d,l.roughnessFactor=h}const f={alphaCutoff:t.alphaTest>0?t.alphaTest:void 0,alphaMode:t.transparent?"BLEND":t.alphaTest>0?"MASK":"OPAQUE",doubleSided:t.side===2,extensions:t.type==="ShaderMaterial"?{KHR_materials_unlit:{},VRMC_materials_mtoon:i}:void 0,name:t.name,pbrMetallicRoughness:l};return u&&(f.normalTexture=u),f}),V0e=(n,e)=>(e?n.concat(e):n).filter(t=>t&&t.imageBitmap).map(t=>({bufferView:-1,mimeType:"image/png",name:t.name})),L0e=n=>n.map(()=>({magFilter:Qn.LINEAR,minFilter:Qn.LINEAR,wrapS:Qn.REPEAT,wrapT:Qn.REPEAT})),P0e=n=>n.map((e,t)=>({sampler:0,source:t})),W0e=(n,e)=>{const t=e.map(r=>r.name);return[{nodes:n.children.filter(r=>r.type===oi.Object3D||r.type===oi.SkinnedMesh||r.type===oi.Group||r.type===oi.Bone).map(r=>t.indexOf(r.name))}]};function A4(n){const e=n.clone(),t=[];return n.traverse(r=>{r.userData.origIndexBuffer&&t.push(r.userData.origIndexBuffer)}),e.traverse(r=>{r.userData.origIndexBuffer&&(r.userData.origIndexBuffer=t.shift())}),e}function O0e(n){const e=A4(n);let t;const r=[];e.traverse(s=>{if(!t&&s.isSkinnedMesh&&(t=_G(s)),s.isSkinnedMesh){if(s.geometry=s.geometry.clone(),s.skeleton=t,r.push(s),Array.isArray(s.material)){const o=s.material;s.material=new cu,s.material.map=o[0].map}s.userData.origIndexBuffer&&s.geometry.setIndex(s.userData.origIndexBuffer)}});const i=new Er;return r.forEach(s=>{i.add(s)}),i.add(t.bones[0]),i}async function Z0e(n,e,t){const r=await eQ(n,t),i=await c4(r,e,t);return new Blob([i],{type:"model/gltf-binary"})}async function wV(n,e,t,r){l4(n,{_optimized:{vrm:e}},t,r)}async function l4(n,e,t,r){const i=`${t&&t!==""?t:"AvatarCreatorModel"}`;G0e(n,e,r).then(s=>{f4(s,`${i}.vrm`)})}async function G0e(n,e,t){const r=await eQ(n,t);return c4(r,e,t)}function eQ(n,e){const t=A4(n),{createTextureAtlas:r}=e;return r?Kce(t,e):(console.log("no atlas"),zce(t,e))}async function CV(n,e="",t){const r=`${e&&e!==""?e:"AvatarCreatorModel"}`,{optimized:i=!0}=t,s=i?await eQ(n,t):O0e(n);J0e(s).then(o=>{if(o instanceof ArrayBuffer)f4(o,`${r}.glb`);else{const a=JSON.stringify(o,null,2);z0e(a,`${r}.gltf`)}})}function J0e(n){return new Promise(e=>new rS().parse(n,r=>{e(r)},r=>{console.error("Error parsing",r)},{trs:!1,onlyVisible:!1,truncateDrawRange:!0,binary:!0,forcePowerOfTwoTextures:!1,maxTextureSize:1024}))}function H0e(n){var r,i;const e=[];for(const s in n)if(((i=(r=n[s])==null?void 0:r.vrm)==null?void 0:i.springBoneManager)!=null){const o=n[s].vrm.springBoneManager.joints;for(const a of o)e.some(l=>l.name===a.bone.name)||e.push({name:a.bone.name,settings:a.settings,bone:a.bone,colliderGroups:a.colliderGroups,center:a.center})}const t=[];return e.forEach(s=>{for(const o in Im)if(s.bone.parent.name==Im[o]){t.push(s);break}}),t}function c4(n,e,t){const{screenshot:r=null,isVrm0:i=!1,vrmMeta:s=null,scale:o=1}=t;return new Promise(a=>{const A=i?new M0e:new Ole,l={...Y0e(e),...Vue(n,"CharacterCreator",s)};let c;n.traverse(h=>{h.isSkinnedMesh&&(c=h)}),(()=>{for(let h=0;h<c.skeleton.bones.length;h++){const p=c.skeleton.bones[h];p.position.x*=-1,p.position.z*=-1}c.skeleton.bones.forEach(h=>{h.updateMatrix(),h.updateMatrixWorld()}),c.skeleton.calculateInverses(),c.skeleton.computeBoneTexture(),c.skeleton.update()})(),c.skeleton.bones.filter(h=>h.name==="head")[0];const f=H0e(e),d=[];console.log("rootSpringBones = ",f),console.log("scale",t.scale),A.parse(l,n,r,f,d,o,h=>{a(h)})})}function u4(n,e){const t=document.createElement("a");t.style.display="none",document.body.appendChild(t),t.href=URL.createObjectURL(n),t.download=e,t.click()}function z0e(n,e){u4(new Blob([n],{type:"text/plain"}),e)}function f4(n,e){u4(X0e(n),e)}function X0e(n){return new Blob([n],{type:"application/octet-stream"})}function Y0e(n){for(const e in n)if(n[e].vrm)return n[e].vrm}const K0e="_button_13dfi_1",I1={button:K0e},j0e="Anon",$0e=({getFaceScreenshot:n})=>{const{t:e}=pe.useContext(ao),[t]=Y.useState(localStorage.getItem("name")||j0e),{model:r,avatar:i,templateInfo:s}=pe.useContext(ki),o=()=>{const A=ct.mergeOptions_sel_option||0,l=n();return console.log(ct.mergeOptions_create_atlas),{isVrm0:!0,createTextureAtlas:ct.mergeOptions_create_atlas==null?!0:ct.mergeOptions_create_atlas,mToonAtlasSize:Lr(ct.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:Lr(ct.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:Lr(ct.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:Lr(ct.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:A===0||A==2,exportMtoonAtlas:A===1||A==2,screenshot:l,scale:s.exportScale||1,vrmMeta:s.vrmMeta}},a=()=>{const A=o();l4(r,i,t,A)};return J.jsxs(Y.Fragment,{children:[J.jsx(In,{theme:"light",text:"GLB",icon:"download",size:14,className:I1.button,onClick:()=>{CV(r,!0,t)}}),J.jsx(In,{theme:"light",text:`GLB (${e("text.unoptimized")})`,icon:"download",size:14,className:I1.button,onClick:()=>{CV(r,!1,t)}}),J.jsx(In,{theme:"light",text:"VRM",icon:"download",size:14,className:I1.button,onClick:a})]})},q0e="_InformationContainerPos_16857_1",eve="_traitInfoTitle_16857_13",tve="_traitInfoText_16857_22",nve="_flexSelect_16857_33",rve="_scrollContainer_16857_68",ive="_checked_16857_93",sve="_checkmark_16857_97",ove="_checkboxHolder_16857_110",An={InformationContainerPos:q0e,traitInfoTitle:eve,traitInfoText:tve,flexSelect:nve,"arrow-button":"_arrow-button_16857_40","left-button":"_left-button_16857_54","right-button":"_right-button_16857_61",scrollContainer:rve,"custom-checkbox":"_custom-checkbox_16857_79","checkbox-container":"_checkbox-container_16857_84",checked:ive,checkmark:sve,checkboxHolder:ove},ave="_mainTitleWrap_4fb0s_1",Ave="_mainTitle_4fb0s_1",lve="_topLine_4fb0s_18",F1={mainTitleWrap:ave,mainTitle:Ave,topLine:lve};function Kh({title:n,width:e,left:t,right:r}){const i={width:e?`${e}px`:null,left:t?`${t}px`:null,right:r?`${r}px`:null};return n&&J.jsxs("div",{className:F1.mainTitleWrap,style:i,children:[J.jsx("div",{className:F1.topLine}),J.jsx("div",{className:F1.mainTitle,children:n})]})}const cve="_slider_5shah_1",E1={"slider-container":"_slider-container_5shah_1",slider:cve,"input-box":"_input-box_5shah_13"};function yd({value:n,min:e,max:t,onChange:r,step:i,stepBox:s}){return J.jsxs("div",{className:E1["slider-container"],children:[J.jsx("input",{type:"range",min:e,max:t,value:n,onChange:r,className:E1.slider,step:i}),s&&J.jsx("input",{type:"number",min:"0",max:"100",value:n,onChange:r,className:E1["input-box"],step:s})]})}function d4({showDropToDownload:n,showCreateAtlas:e}){const[t,r]=pe.useState(ct.mergeOptions_atlas_std_size||6),[i,s]=pe.useState(ct.mergeOptions_atlas_std_transp_size||6),[o,a]=pe.useState(ct.mergeOptions_atlas_mtoon_size||6),[A,l]=pe.useState(ct.mergeOptions_atlas_mtoon_transp_size||6),[c,u]=pe.useState(ct.mergeOptions_sel_option||0),[f]=pe.useState(["Merge to Standard","Merge to MToon","Keep Both"]),[d,h]=pe.useState(ct.mergeOptions_drop_download||!1),[p,m]=pe.useState(ct.mergeOptions_create_atlas==null?!0:ct.mergeOptions_create_atlas),g=b=>{h(b.target.checked),ct.mergeOptions_drop_download=b.target.checked},v=b=>{m(b.target.checked),ct.mergeOptions_create_atlas=b.target.checked},y=()=>{let b=c;c<=0?b=f.length-1:b-=1,u(b),ct.mergeOptions_sel_option=b},w=()=>{let b=c;c>=f.length-1?b=0:b+=1,u(b),ct.mergeOptions_sel_option=b},C=async(b,F)=>{let I=parseInt(b.target.value);I>8?I=8:I<0&&(I=0),(T=>{switch(F){case"standard opaque":r(T),ct.mergeOptions_atlas_std_size=T;break;case"standard transparent":s(T),ct.mergeOptions_atlas_std_transp_size=T;break;case"mtoon opaque":a(T),ct.mergeOptions_atlas_mtoon_size=T;break;case"mtoon transparent":l(T),ct.mergeOptions_atlas_mtoon_transp_size=T;break}})(I)};return J.jsxs("div",{className:An.InformationContainerPos,children:[J.jsx(Kh,{title:"Optimizer Options",width:180,left:20}),J.jsxs("div",{className:An.scrollContainer,children:[e&&J.jsxs(J.Fragment,{children:[J.jsx("div",{className:An.traitInfoTitle,children:"Create Atlas"}),J.jsx("div",{className:An.traitInfoText,children:J.jsxs("div",{className:An.checkboxHolder,children:[J.jsx("div",{}),J.jsxs("label",{className:An["custom-checkbox"],children:[J.jsx("input",{type:"checkbox",checked:p,onChange:v}),J.jsx("div",{className:An["checkbox-container"]})]}),J.jsx("div",{}),J.jsx("div",{}),p?"True":"False"]})}),J.jsx("br",{}),J.jsx("br",{})]}),(e==!1||p)&&J.jsxs(J.Fragment,{children:[J.jsx("div",{className:An.traitInfoTitle,children:"Merge Atlas Type"}),J.jsx("br",{}),J.jsxs("div",{className:An.flexSelect,children:[J.jsx("div",{className:`${An["arrow-button"]} ${An["left-button"]}`,onClick:y}),J.jsx("div",{className:An.traitInfoText,style:{marginBottom:"0"},children:f[c]}),J.jsx("div",{className:`${An["arrow-button"]} ${An["right-button"]}`,onClick:w})]}),J.jsx("br",{}),J.jsx("br",{}),J.jsx("br",{}),(c===0||c==2)&&J.jsxs(J.Fragment,{children:[J.jsx("div",{className:An.traitInfoTitle,children:"Standard Atlas Size"}),J.jsx("br",{}),J.jsxs("div",{className:An.traitInfoText,children:["Opaque: ",Lr(t)+" x "+Lr(t)]}),J.jsx(yd,{value:t,onChange:b=>C(b,"standard opaque"),min:1,max:8,step:1}),J.jsx("br",{}),J.jsxs("div",{className:An.traitInfoText,children:["Transparent: ",Lr(i)+" x "+Lr(i)]}),J.jsx(yd,{value:i,onChange:b=>C(b,"standard transparent"),min:1,max:8,step:1}),J.jsx("br",{})," ",J.jsx("br",{})," ",J.jsx("br",{})]}),(c===1||c==2)&&J.jsxs(J.Fragment,{children:[J.jsx("div",{className:An.traitInfoTitle,children:"MToon Atlas Size"}),J.jsx("br",{}),J.jsxs("div",{className:An.traitInfoText,children:["Opaque: ",Lr(o)+" x "+Lr(o)]}),J.jsx(yd,{value:o,onChange:b=>C(b,"mtoon opaque"),min:1,max:8,step:1}),J.jsx("br",{}),J.jsxs("div",{className:An.traitInfoText,children:["Transparent: ",Lr(A)+" x "+Lr(A)]}),J.jsx(yd,{value:A,onChange:b=>C(b,"mtoon transparent"),min:1,max:8,step:1}),J.jsx("br",{})," ",J.jsx("br",{})," ",J.jsx("br",{})]}),n&&J.jsxs(J.Fragment,{children:[J.jsx("div",{className:An.traitInfoTitle,children:"Drag Drop - Download"}),J.jsx("div",{className:An.traitInfoText,children:J.jsxs("div",{className:An.checkboxHolder,children:[J.jsx("div",{}),J.jsxs("label",{className:An["custom-checkbox"],children:[J.jsx("input",{type:"checkbox",checked:d,onChange:g}),J.jsx("div",{className:An["checkbox-container"]})]}),J.jsx("div",{}),J.jsx("div",{}),d?"True":"False"]})})]})]})]})]})}function uve({getFaceScreenshot:n}){const{t:e}=pe.useContext(ao),{playSound:t}=Y.useContext(io),{isMute:r}=Y.useContext(to),{setViewMode:i}=Y.useContext(ro),s=()=>{i(St.BIO),!r&&t("backNextButton")},o=()=>{i(St.MINT),!r&&t("backNextButton")};return J.jsxs("div",{className:hy.container,children:[J.jsx("div",{className:"sectionTitle",children:e("pageTitles.saveCharacter")}),J.jsxs("div",{className:hy.buttonContainer,children:[J.jsx(In,{theme:"light",text:e("callToAction.back"),size:14,className:hy.buttonLeft,onClick:s}),J.jsx(d4,{showCreateAtlas:!0}),J.jsx($0e,{getFaceScreenshot:n}),J.jsx(In,{theme:"light",text:"mint",size:14,className:hy.buttonRight,onClick:o})]})]})}const xc={},m0="abi/5.7.0",Rt=new fe(m0),hu={};let bV={calldata:!0,memory:!0,storage:!0},fve={calldata:!0,memory:!0};function py(n,e){if(n==="bytes"||n==="string"){if(bV[e])return!0}else if(n==="address"){if(e==="payable")return!0}else if((n.indexOf("[")>=0||n==="tuple")&&fve[e])return!0;return(bV[e]||e==="payable")&&Rt.throwArgumentError("invalid modifier","name",e),!1}function dve(n,e){let t=n;function r(a){Rt.throwArgumentError(`unexpected character at position ${a}`,"param",n)}n=n.replace(/\s/g," ");function i(a){let A={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(A.indexed=!1),A}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<n.length;a++){let A=n[a];switch(A){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||r(a),o.state.allowType=!1,o.type=Uf(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),py(o.type,o.name)&&(o.name=""),o.type=Uf(o.type);let l=o;o=o.parent,o||r(a),delete l.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),py(o.type,o.name)&&(o.name=""),o.type=Uf(o.type);let c=i(o.parent);o.parent.components.push(c),delete o.parent,o=c;break;case" ":o.state.allowType&&o.type!==""&&(o.type=Uf(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||r(a),o.indexed&&r(a),o.indexed=!0,o.name=""):py(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||r(a),o.type+=A,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(a),o.type+=A,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=A,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=A,delete o.state.allowArray):o.state.readArray?o.type+=A:r(a)}}return o.parent&&Rt.throwArgumentError("unexpected eof","param",n),delete s.state,o.name==="indexed"?(e||r(t.length-7),o.indexed&&r(t.length-7),o.indexed=!0,o.name=""):py(o.type,o.name)&&(o.name=""),s.type=Uf(s.type),s}function dB(n,e){for(let t in e)Ie(n,t,e[t])}const Wt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),hve=new RegExp(/^(.*)\[([0-9]*)\]$/);class gr{constructor(e,t){e!==hu&&Rt.throwError("use fromString",fe.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),dB(this,t);let r=this.type.match(hve);r?dB(this,{arrayLength:parseInt(r[2]||"-1"),arrayChildren:gr.fromObject({type:r[1],components:this.components}),baseType:"array"}):dB(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Wt.sighash),Wt[e]||Rt.throwArgumentError("invalid format type","format",e),e===Wt.json){let r={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.components&&(r.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(r)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Wt.sighash&&(t+=this.type),t+="("+this.components.map(r=>r.format(e)).join(e===Wt.full?", ":",")+")"):t+=this.type,e!==Wt.sighash&&(this.indexed===!0&&(t+=" indexed"),e===Wt.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?gr.fromString(e,t):gr.fromObject(e)}static fromObject(e){return gr.isParamType(e)?e:new gr(hu,{name:e.name||null,type:Uf(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(gr.fromObject):null})}static fromString(e,t){function r(i){return gr.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return r(dve(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function Om(n,e){return gve(n).map(t=>gr.fromString(t,e))}class mA{constructor(e,t){e!==hu&&Rt.throwError("use a static from method",fe.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),dB(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return mA.isFragment(e)?e:typeof e=="string"?mA.fromString(e):mA.fromObject(e)}static fromObject(e){if(mA.isFragment(e))return e;switch(e.type){case"function":return ua.fromObject(e);case"event":return cA.fromObject(e);case"constructor":return ca.fromObject(e);case"error":return pl.fromObject(e);case"fallback":case"receive":return null}return Rt.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?cA.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?ua.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?ca.fromString(e.trim()):e.split(" ")[0]==="error"?pl.fromString(e.substring(5).trim()):Rt.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class cA extends mA{format(e){if(e||(e=Wt.sighash),Wt[e]||Rt.throwArgumentError("invalid format type","format",e),e===Wt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Wt.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Wt.full?", ":",")+") ",e!==Wt.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return typeof e=="string"?cA.fromString(e):cA.fromObject(e)}static fromObject(e){if(cA.isEventFragment(e))return e;e.type!=="event"&&Rt.throwArgumentError("invalid event object","value",e);const t={name:Zm(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(gr.fromObject):[],type:"event"};return new cA(hu,t)}static fromString(e){let t=e.match(Gm);t||Rt.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":r=!0;break;case"":break;default:Rt.warn("unknown modifier: "+i)}}),cA.fromObject({name:t[1].trim(),anonymous:r,inputs:Om(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function h4(n,e){e.gas=null;let t=n.split("@");return t.length!==1?(t.length>2&&Rt.throwArgumentError("invalid human-readable ABI signature","value",n),t[1].match(/^[0-9]+$/)||Rt.throwArgumentError("invalid human-readable ABI signature gas","value",n),e.gas=Le.from(t[1]),t[0]):n}function p4(n,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",n.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}})}function g4(n){let e={constant:!1,payable:!0,stateMutability:"payable"};return n.stateMutability!=null?(e.stateMutability=n.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",n.constant!=null&&!!n.constant!==e.constant&&Rt.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",n),e.payable=e.stateMutability==="payable",n.payable!=null&&!!n.payable!==e.payable&&Rt.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",n)):n.payable!=null?(e.payable=!!n.payable,n.constant==null&&!e.payable&&n.type!=="constructor"&&Rt.throwArgumentError("unable to determine stateMutability","value",n),e.constant=!!n.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&Rt.throwArgumentError("cannot have constant payable function","value",n)):n.constant!=null?(e.constant=!!n.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):n.type!=="constructor"&&Rt.throwArgumentError("unable to determine stateMutability","value",n),e}class ca extends mA{format(e){if(e||(e=Wt.sighash),Wt[e]||Rt.throwArgumentError("invalid format type","format",e),e===Wt.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});e===Wt.sighash&&Rt.throwError("cannot format a constructor for sighash",fe.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(r=>r.format(e)).join(e===Wt.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "),t.trim()}static from(e){return typeof e=="string"?ca.fromString(e):ca.fromObject(e)}static fromObject(e){if(ca.isConstructorFragment(e))return e;e.type!=="constructor"&&Rt.throwArgumentError("invalid constructor object","value",e);let t=g4(e);t.constant&&Rt.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(gr.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?Le.from(e.gas):null};return new ca(hu,r)}static fromString(e){let t={type:"constructor"};e=h4(e,t);let r=e.match(Gm);return(!r||r[1].trim()!=="constructor")&&Rt.throwArgumentError("invalid constructor string","value",e),t.inputs=Om(r[2].trim(),!1),p4(r[3].trim(),t),ca.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class ua extends ca{format(e){if(e||(e=Wt.sighash),Wt[e]||Rt.throwArgumentError("invalid format type","format",e),e===Wt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Wt.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Wt.full?", ":",")+") ",e!==Wt.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(r=>r.format(e)).join(", ")+") "),this.gas!=null&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return typeof e=="string"?ua.fromString(e):ua.fromObject(e)}static fromObject(e){if(ua.isFunctionFragment(e))return e;e.type!=="function"&&Rt.throwArgumentError("invalid function object","value",e);let t=g4(e);const r={type:e.type,name:Zm(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(gr.fromObject):[],outputs:e.outputs?e.outputs.map(gr.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?Le.from(e.gas):null};return new ua(hu,r)}static fromString(e){let t={type:"function"};e=h4(e,t);let r=e.split(" returns ");r.length>2&&Rt.throwArgumentError("invalid function string","value",e);let i=r[0].match(Gm);if(i||Rt.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&Zm(t.name),t.inputs=Om(i[2],!1),p4(i[3].trim(),t),r.length>1){let s=r[1].match(Gm);(s[1].trim()!=""||s[3].trim()!="")&&Rt.throwArgumentError("unexpected tokens","value",e),t.outputs=Om(s[2],!1)}else t.outputs=[];return ua.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function xV(n){const e=n.format();return(e==="Error(string)"||e==="Panic(uint256)")&&Rt.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",n),n}class pl extends mA{format(e){if(e||(e=Wt.sighash),Wt[e]||Rt.throwArgumentError("invalid format type","format",e),e===Wt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Wt.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Wt.full?", ":",")+") ",t.trim()}static from(e){return typeof e=="string"?pl.fromString(e):pl.fromObject(e)}static fromObject(e){if(pl.isErrorFragment(e))return e;e.type!=="error"&&Rt.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:Zm(e.name),inputs:e.inputs?e.inputs.map(gr.fromObject):[]};return xV(new pl(hu,t))}static fromString(e){let t={type:"error"},r=e.match(Gm);return r||Rt.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&Zm(t.name),t.inputs=Om(r[2],!1),xV(pl.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Uf(n){return n.match(/^uint($|[^1-9])/)?n="uint256"+n.substring(4):n.match(/^int($|[^1-9])/)&&(n="int256"+n.substring(3)),n}const pve=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Zm(n){return(!n||!n.match(pve))&&Rt.throwArgumentError(`invalid identifier "${n}"`,"value",n),n}const Gm=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function gve(n){n=n.trim();let e=[],t="",r=0;for(let i=0;i<n.length;i++){let s=n[i];s===","&&r===0?(e.push(t),t=""):(t+=s,s==="("?r++:s===")"&&(r--,r===-1&&Rt.throwArgumentError("unbalanced parenthesis","value",n)))}return t&&e.push(t),e}const tQ=new fe(m0);function mve(n){const e=[],t=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{t(o,i[s])}catch(a){e.push({path:o,error:a})}}};return t([],n),e}class kA{constructor(e,t,r,i){this.name=e,this.type=t,this.localName=r,this.dynamic=i}_throwError(e,t){tQ.throwArgumentError(e,this.localName,t)}}class BU{constructor(e){Ie(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return wi(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(ts(e._data))}writeBytes(e){let t=it(e);const r=t.length%this.wordSize;return r&&(t=ts([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=it(Le.from(e));return t.length>this.wordSize&&tQ.throwError("value out-of-bounds",fe.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=ts([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class Gw{constructor(e,t,r,i){Ie(this,"_data",it(e)),Ie(this,"wordSize",t||32),Ie(this,"_coerceFunc",r),Ie(this,"allowLoose",i),this._offset=0}get data(){return $e(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):Gw.coerce(e,t)}_peekBytes(e,t,r){let i=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?i=t:tQ.throwError("data out-of-bounds",fe.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new Gw(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return Le.from(this.readBytes(this.wordSize))}}class vve extends kA{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Sr(t)}catch(r){this._throwError(r.message,t)}return e.writeValue(t)}decode(e){return Sr(kn(e.readValue().toHexString(),20))}}class yve extends kA{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Bd=new fe(m0);function m4(n,e,t){let r=null;if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let A={};r=e.map(l=>{const c=l.localName;return c||Bd.throwError("cannot encode object for signature with missing names",fe.errors.INVALID_ARGUMENT,{argument:"values",coder:l,value:t}),A[c]&&Bd.throwError("cannot encode object for signature with duplicate names",fe.errors.INVALID_ARGUMENT,{argument:"values",coder:l,value:t}),A[c]=!0,t[c]})}else Bd.throwArgumentError("invalid tuple value","tuple",t);e.length!==r.length&&Bd.throwArgumentError("types/value length mismatch","tuple",t);let i=new BU(n.wordSize),s=new BU(n.wordSize),o=[];e.forEach((A,l)=>{let c=r[l];if(A.dynamic){let u=s.length;A.encode(s,c);let f=i.writeUpdatableValue();o.push(d=>{f(d+u)})}else A.encode(i,c)}),o.forEach(A=>{A(i.length)});let a=n.appendWriter(i);return a+=n.appendWriter(s),a}function v4(n,e){let t=[],r=n.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=n.readValue(),A=r.subReader(a.toNumber());try{o=s.decode(A)}catch(l){if(l.code===fe.errors.BUFFER_OVERRUN)throw l;o=l,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(n)}catch(a){if(a.code===fe.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&t.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),t[a]!=null))return;const A=t[o];A instanceof Error?Object.defineProperty(t,a,{enumerable:!0,get:()=>{throw A}}):t[a]=A});for(let s=0;s<t.length;s++){const o=t[s];o instanceof Error&&Object.defineProperty(t,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(t)}class Bve extends kA{constructor(e,t,r){const i=e.type+"["+(t>=0?t:"")+"]",s=t===-1||e.dynamic;super("array",i,r,s),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;r===-1&&(r=t.length,e.writeValue(t.length)),Bd.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<t.length;s++)i.push(this.coder);return m4(e,i,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),t*32>e._data.length&&Bd.throwError("insufficient data length",fe.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let i=0;i<t;i++)r.push(new yve(this.coder));return e.coerce(this.name,v4(e,r))}}class wve extends kA{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class y4 extends kA{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=it(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class Cve extends y4{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,$e(super.decode(e)))}}class bve extends kA{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let r=it(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,$e(e.readBytes(this.size)))}}class xve extends kA{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class Ive extends kA{constructor(e,t,r){const i=(t?"int":"uint")+e*8;super(i,i,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=Le.from(t),i=Kz.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(r.gt(s)||r.lt(s.add(Yz).mul(Xz)))&&this._throwError("value out-of-bounds",t)}else(r.lt(R3)||r.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(this.size*8).mask(this.size*8),this.signed&&(r=r.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(this.size*8);return this.signed&&(t=t.fromTwos(this.size*8)),e.coerce(this.name,t)}}class Fve extends y4{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,wa(t))}decode(e){return jm(super.decode(e))}}class gy extends kA{constructor(e,t){let r=!1;const i=[];e.forEach(o=>{o.dynamic&&(r=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const t=this.coders.reduce((r,i)=>{const s=i.localName;return s&&(r[s]||(r[s]=0),r[s]++),r},{});return this.coders.forEach((r,i)=>{let s=r.localName;!s||t[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){return m4(e,this.coders,t)}decode(e){return e.coerce(this.name,v4(e,this.coders))}}const my=new fe(m0),Eve=new RegExp(/^bytes([0-9]*)$/),Uve=new RegExp(/^(u?int)([0-9]*)$/);class _ve{constructor(e){Ie(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new vve(e.name);case"bool":return new wve(e.name);case"string":return new Fve(e.name);case"bytes":return new Cve(e.name);case"array":return new Bve(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new gy((e.components||[]).map(r=>this._getCoder(r)),e.name);case"":return new xve(e.name)}let t=e.type.match(Uve);if(t){let r=parseInt(t[2]||"256");return(r===0||r>256||r%8!==0)&&my.throwArgumentError("invalid "+t[1]+" bit length","param",e),new Ive(r/8,t[1]==="int",e.name)}if(t=e.type.match(Eve),t){let r=parseInt(t[1]);return(r===0||r>32)&&my.throwArgumentError("invalid bytes length","param",e),new bve(r,e.name)}return my.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Gw(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new BU(this._getWordSize())}getDefaultValue(e){const t=e.map(i=>this._getCoder(gr.from(i)));return new gy(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&my.throwError("types/values length mismatch",fe.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(o=>this._getCoder(gr.from(o))),i=new gy(r,"_"),s=this._getWriter();return i.encode(s,t),s.data}decode(e,t,r){const i=e.map(o=>this._getCoder(gr.from(o)));return new gy(i,"_").decode(this._getReader(it(t),r))}}const Sve=new _ve,Bn=new fe(m0);class Qve extends Ym{}class Rve extends Ym{}class Mve extends Ym{}class wU extends Ym{static isIndexed(e){return!!(e&&e._isIndexed)}}const Tve={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function IV(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);return t.error=e,t}class FV{constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,Ie(this,"fragments",t.map(r=>mA.from(r)).filter(r=>r!=null)),Ie(this,"_abiCoder",ns(new.target,"getAbiCoder")()),Ie(this,"functions",{}),Ie(this,"errors",{}),Ie(this,"events",{}),Ie(this,"structs",{}),this.fragments.forEach(r=>{let i=null;switch(r.type){case"constructor":if(this.deploy){Bn.warn("duplicate definition - constructor");return}Ie(this,"deploy",r);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=r.format();if(i[s]){Bn.warn("duplicate definition - "+s);return}i[s]=r}),this.deploy||Ie(this,"deploy",ca.from({payable:!1,type:"constructor"})),Ie(this,"_isInterface",!0)}format(e){e||(e=Wt.full),e===Wt.sighash&&Bn.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(r=>r.format(e));return e===Wt.json?JSON.stringify(t.map(r=>JSON.parse(r))):t}static getAbiCoder(){return Sve}static getAddress(e){return Sr(e)}static getSighash(e){return Pr(zf(e.format()),0,4)}static getEventTopic(e){return zf(e.format())}getFunction(e){if(Bt(e)){for(const r in this.functions)if(e===this.getSighash(r))return this.functions[r];Bn.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===r);return i.length===0?Bn.throwArgumentError("no matching function","name",r):i.length>1&&Bn.throwArgumentError("multiple matching functions","name",r),this.functions[i[0]]}const t=this.functions[ua.fromString(e).format()];return t||Bn.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(Bt(e)){const r=e.toLowerCase();for(const i in this.events)if(r===this.getEventTopic(i))return this.events[i];Bn.throwArgumentError("no matching event","topichash",r)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===r);return i.length===0?Bn.throwArgumentError("no matching event","name",r):i.length>1&&Bn.throwArgumentError("multiple matching events","name",r),this.events[i[0]]}const t=this.events[cA.fromString(e).format()];return t||Bn.throwArgumentError("no matching event","signature",e),t}getError(e){if(Bt(e)){const r=ns(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===r(s))return this.errors[i]}Bn.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===r);return i.length===0?Bn.throwArgumentError("no matching error","name",r):i.length>1&&Bn.throwArgumentError("multiple matching errors","name",r),this.errors[i[0]]}const t=this.errors[ua.fromString(e).format()];return t||Bn.throwArgumentError("no matching error","signature",e),t}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return ns(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),ns(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){typeof e=="string"&&(e=this.getError(e));const r=it(t);return $e(r.slice(0,4))!==this.getSighash(e)&&Bn.throwArgumentError(`data signature does not match error ${e.name}.`,"data",$e(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return typeof e=="string"&&(e=this.getError(e)),$e(ts([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){typeof e=="string"&&(e=this.getFunction(e));const r=it(t);return $e(r.slice(0,4))!==this.getSighash(e)&&Bn.throwArgumentError(`data signature does not match function ${e.name}.`,"data",$e(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return typeof e=="string"&&(e=this.getFunction(e)),$e(ts([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){typeof e=="string"&&(e=this.getFunction(e));let r=it(t),i=null,s="",o=null,a=null,A=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch{}break;case 4:{const l=$e(r.slice(0,4)),c=Tve[l];if(c)o=this._abiCoder.decode(c.inputs,r.slice(4)),a=c.name,A=c.signature,c.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const u=this.getError(l);o=this._abiCoder.decode(u.inputs,r.slice(4)),a=u.name,A=u.format()}catch{}break}}return Bn.throwError("call revert exception"+s,fe.errors.CALL_EXCEPTION,{method:e.format(),data:$e(t),errorArgs:o,errorName:a,errorSignature:A,reason:i})}encodeFunctionResult(e,t){return typeof e=="string"&&(e=this.getFunction(e)),$e(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){typeof e=="string"&&(e=this.getEvent(e)),t.length>e.inputs.length&&Bn.throwError("too many arguments for "+e.format(),fe.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?zf(o):s.type==="bytes"?jn($e(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=Le.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),kn($e(o),32));for(t.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&Bn.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Bn.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(A=>i(a,A))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){typeof e=="string"&&(e=this.getEvent(e));const r=[],i=[],s=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&Bn.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const A=t[a];if(o.indexed)if(o.type==="string")r.push(zf(A));else if(o.type==="bytes")r.push(jn(A));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(this._abiCoder.encode([o.type],[A]))}else i.push(o),s.push(A)}),{data:this._abiCoder.encode(i,s),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"&&(e=this.getEvent(e)),r!=null&&!e.anonymous){let f=this.getEventTopic(e);(!Bt(r[0],32)||r[0].toLowerCase()!==f)&&Bn.throwError("fragment/topic mismatch",fe.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:f,value:r[0]}),r=r.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((f,d)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(i.push(gr.fromObject({type:"bytes32",name:f.name})),o.push(!0)):(i.push(f),o.push(!1)):(s.push(f),o.push(!1))});let a=r!=null?this._abiCoder.decode(i,ts(r)):null,A=this._abiCoder.decode(s,t,!0),l=[],c=0,u=0;e.inputs.forEach((f,d)=>{if(f.indexed)if(a==null)l[d]=new wU({_isIndexed:!0,hash:null});else if(o[d])l[d]=new wU({_isIndexed:!0,hash:a[u++]});else try{l[d]=a[u++]}catch(h){l[d]=h}else try{l[d]=A[c++]}catch(h){l[d]=h}if(f.name&&l[f.name]==null){const h=l[d];h instanceof Error?Object.defineProperty(l,f.name,{enumerable:!0,get:()=>{throw IV(`property ${JSON.stringify(f.name)}`,h)}}):l[f.name]=h}});for(let f=0;f<l.length;f++){const d=l[f];d instanceof Error&&Object.defineProperty(l,f,{enumerable:!0,get:()=>{throw IV(`index ${f}`,d)}})}return Object.freeze(l)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new Rve({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:Le.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Qve({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=$e(e);let r=this.getError(t.substring(0,10).toLowerCase());return r?new Mve({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const Nve="contracts/5.7.0";var pu=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(u){o(u)}}function A(c){try{l(r.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((r=r.apply(n,e||[])).next())})};const Wn=new fe(Nve);function Jw(n,e){return pu(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&Wn.throwArgumentError("invalid address or ENS name","name",t);try{return Sr(t)}catch{}n||Wn.throwError("a provider or signer is needed to resolve ENS names",fe.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield n.resolveName(t);return r==null&&Wn.throwArgumentError("resolver or addr is not configured for ENS name","name",t),r})}function hB(n,e,t){return pu(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((r,i)=>hB(n,Array.isArray(e)?e[i]:e[r.name],r))):t.type==="address"?yield Jw(n,e):t.type==="tuple"?yield hB(n,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(r=>hB(n,r,t.arrayChildren))):Promise.reject(Wn.makeError("invalid value for array",fe.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function db(n,e,t){return pu(this,void 0,void 0,function*(){let r={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(r=yn(t.pop())),Wn.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),n.signer?r.from?r.from=zn({override:Jw(n.signer,r.from),signer:n.signer.getAddress()}).then(l=>pu(this,void 0,void 0,function*(){return Sr(l.signer)!==l.override&&Wn.throwError("Contract with a Signer cannot override from",fe.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),l.override})):r.from=n.signer.getAddress():r.from&&(r.from=Jw(n.provider,r.from));const i=yield zn({args:hB(n.signer||n.provider,t,e.inputs),address:n.resolvedAddress,overrides:zn(r)||{}}),s=n.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=Le.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=Le.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=Le.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=Le.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=Le.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=vu(a.accessList)),o.gasLimit==null&&e.gas!=null){let l=21e3;const c=it(s);for(let u=0;u<c.length;u++)l+=4,c[u]&&(l+=64);o.gasLimit=Le.from(e.gas).add(l)}if(a.value){const l=Le.from(a.value);!l.isZero()&&!e.payable&&Wn.throwError("non-payable method cannot override value",fe.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),o.value=l}a.customData&&(o.customData=yn(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData,delete r.ccipReadEnabled;const A=Object.keys(r).filter(l=>r[l]!=null);return A.length&&Wn.throwError(`cannot override ${A.map(l=>JSON.stringify(l)).join(",")}`,fe.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:A}),o})}function kve(n,e){return function(...t){return db(n,e,t)}}function Dve(n,e){const t=n.signer||n.provider;return function(...r){return pu(this,void 0,void 0,function*(){t||Wn.throwError("estimate require a provider or signer",fe.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield db(n,e,r);return yield t.estimateGas(i)})}}function Vve(n,e){const t=e.wait.bind(e);e.wait=r=>t(r).then(i=>(i.events=i.logs.map(s=>{let o=os(s),a=null;try{a=n.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(A,l)=>n.interface.decodeEventLog(a.eventFragment,A,l),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>n.provider,o.getBlock=()=>n.provider.getBlock(i.blockHash),o.getTransaction=()=>n.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function B4(n,e,t){const r=n.signer||n.provider;return function(...i){return pu(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const A=yn(i.pop());A.blockTag!=null&&(s=yield A.blockTag),delete A.blockTag,i.push(A)}n.deployTransaction!=null&&(yield n._deployed(s));const o=yield db(n,e,i),a=yield r.call(o,s);try{let A=n.interface.decodeFunctionResult(e,a);return t&&e.outputs.length===1&&(A=A[0]),A}catch(A){throw A.code===fe.errors.CALL_EXCEPTION&&(A.address=n.address,A.args=i,A.transaction=o),A}})}}function Lve(n,e){return function(...t){return pu(this,void 0,void 0,function*(){n.signer||Wn.throwError("sending a transaction requires a signer",fe.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),n.deployTransaction!=null&&(yield n._deployed());const r=yield db(n,e,t),i=yield n.signer.sendTransaction(r);return Vve(n,i),i})}}function EV(n,e,t){return e.constant?B4(n,e,t):Lve(n,e)}function w4(n){return n.address&&(n.topics==null||n.topics.length===0)?"*":(n.address||"*")+"@"+(n.topics?n.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Jm{constructor(e,t){Ie(this,"tag",e),Ie(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(r=>t||r.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(r=>{const i=e.slice();return setTimeout(()=>{r.listener.apply(this,i)},0),!r.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class Pve extends Jm{constructor(){super("error",null)}}class UV extends Jm{constructor(e,t,r,i){const s={address:e};let o=t.getEventTopic(r);i?(o!==i[0]&&Wn.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(w4(s),s),Ie(this,"address",e),Ie(this,"interface",t),Ie(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,r)=>this.interface.decodeEventLog(this.fragment,t,r);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=mve(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class _V extends Jm{constructor(e,t){super("*",{address:e}),Ie(this,"address",e),Ie(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(r,i)=>this.interface.decodeEventLog(t.eventFragment,r,i),e.args=t.args}catch{}}}class Wve{constructor(e,t,r){Ie(this,"interface",ns(new.target,"getInterface")(t)),r==null?(Ie(this,"provider",null),Ie(this,"signer",null)):qm.isSigner(r)?(Ie(this,"provider",r.provider||null),Ie(this,"signer",r)):Km.isProvider(r)?(Ie(this,"provider",r),Ie(this,"signer",null)):Wn.throwArgumentError("invalid signer or provider","signerOrProvider",r),Ie(this,"callStatic",{}),Ie(this,"estimateGas",{}),Ie(this,"functions",{}),Ie(this,"populateTransaction",{}),Ie(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const A=this.interface.events[a];Ie(this.filters,a,(...l)=>({address:this.address,topics:this.interface.encodeFilterTopics(A,l)})),o[A.name]||(o[A.name]=[]),o[A.name].push(a)}),Object.keys(o).forEach(a=>{const A=o[a];A.length===1?Ie(this.filters,a,this.filters[A[0]]):Wn.warn(`Duplicate definition of ${a} (${A.join(", ")})`)})}if(Ie(this,"_runningEvents",{}),Ie(this,"_wrappedEmits",{}),e==null&&Wn.throwArgumentError("invalid contract address or ENS name","addressOrName",e),Ie(this,"address",e),this.provider)Ie(this,"resolvedAddress",Jw(this.provider,e));else try{Ie(this,"resolvedAddress",Promise.resolve(Sr(e)))}catch{Wn.throwError("provider is required to use ENS name as contract address",fe.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){Wn.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const A=a.name;i[`%${A}`]||(i[`%${A}`]=[]),i[`%${A}`].push(o)}this[o]==null&&Ie(this,o,EV(this,a,!0)),this.functions[o]==null&&Ie(this.functions,o,EV(this,a,!1)),this.callStatic[o]==null&&Ie(this.callStatic,o,B4(this,a,!0)),this.populateTransaction[o]==null&&Ie(this.populateTransaction,o,kve(this,a)),this.estimateGas[o]==null&&Ie(this.estimateGas,o,Dve(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const A=a[0];try{this[o]==null&&Ie(this,o,this[A])}catch{}this.functions[o]==null&&Ie(this.functions,o,this.functions[A]),this.callStatic[o]==null&&Ie(this.callStatic,o,this.callStatic[A]),this.populateTransaction[o]==null&&Ie(this.populateTransaction,o,this.populateTransaction[A]),this.estimateGas[o]==null&&Ie(this.estimateGas,o,this.estimateGas[A])})}static getContractAddress(e){return J3(e)}static getInterface(e){return FV.isInterface(e)?e:new FV(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&Wn.throwError("contract not deployed",fe.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Wn.throwError("sending a transactions require a signer",fe.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=yn(e||{});return["from","to"].forEach(function(r){t[r]!=null&&Wn.throwError("cannot override "+r,fe.errors.UNSUPPORTED_OPERATION,{operation:r})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new KU(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&Ie(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return wU.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new Pve);if(e==="event")return this._normalizeRunningEvent(new Jm("event",null));if(e==="*")return this._normalizeRunningEvent(new _V(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new UV(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const r=e.topics[0];if(typeof r!="string")throw new Error("invalid topic");const i=this.interface.getEvent(r);return this._normalizeRunningEvent(new UV(this.address,this.interface,i,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Jm(w4(t),t))}return this._normalizeRunningEvent(new _V(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const i=os(t);return i.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,r){if(this.provider||Wn.throwError("events require a provider or a signer with a provider",fe.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,t);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,t,r){const i=this._getRunningEvent(e),s=yn(i.filter);return typeof t=="string"&&Bt(t,32)?(r!=null&&Wn.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),s.blockHash=t):(s.fromBlock=t??0,s.toBlock=r??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),i=r.run(t)>0;return this._checkRunningEvents(r),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,r)=>t+this._runningEvents[r].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let r in this._runningEvents)this._runningEvents[r].listeners().forEach(i=>{t.push(i)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const r in this._runningEvents){const i=this._runningEvents[r];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class hb extends Wve{}var Hw={},Ove={get exports(){return Hw},set exports(n){Hw=n}},Wd=typeof Reflect=="object"?Reflect:null,SV=Wd&&typeof Wd.apply=="function"?Wd.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},pB;Wd&&typeof Wd.ownKeys=="function"?pB=Wd.ownKeys:Object.getOwnPropertySymbols?pB=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:pB=function(e){return Object.getOwnPropertyNames(e)};function Zve(n){console&&console.warn&&console.warn(n)}var C4=Number.isNaN||function(e){return e!==e};function qt(){qt.init.call(this)}Ove.exports=qt;Hw.once=zve;qt.EventEmitter=qt;qt.prototype._events=void 0;qt.prototype._eventsCount=0;qt.prototype._maxListeners=void 0;var QV=10;function pb(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(qt,"defaultMaxListeners",{enumerable:!0,get:function(){return QV},set:function(n){if(typeof n!="number"||n<0||C4(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");QV=n}});qt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};qt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||C4(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function b4(n){return n._maxListeners===void 0?qt.defaultMaxListeners:n._maxListeners}qt.prototype.getMaxListeners=function(){return b4(this)};qt.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var A=s[e];if(A===void 0)return!1;if(typeof A=="function")SV(A,this,t);else for(var l=A.length,c=U4(A,l),r=0;r<l;++r)SV(c[r],this,t);return!0};function x4(n,e,t,r){var i,s,o;if(pb(t),s=n._events,s===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),s=n._events),o=s[e]),o===void 0)o=s[e]=t,++n._eventsCount;else if(typeof o=="function"?o=s[e]=r?[t,o]:[o,t]:r?o.unshift(t):o.push(t),i=b4(n),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=n,a.type=e,a.count=o.length,Zve(a)}return n}qt.prototype.addListener=function(e,t){return x4(this,e,t,!1)};qt.prototype.on=qt.prototype.addListener;qt.prototype.prependListener=function(e,t){return x4(this,e,t,!0)};function Gve(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function I4(n,e,t){var r={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},i=Gve.bind(r);return i.listener=t,r.wrapFn=i,i}qt.prototype.once=function(e,t){return pb(t),this.on(e,I4(this,e,t)),this};qt.prototype.prependOnceListener=function(e,t){return pb(t),this.prependListener(e,I4(this,e,t)),this};qt.prototype.removeListener=function(e,t){var r,i,s,o,a;if(pb(t),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():Jve(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};qt.prototype.off=qt.prototype.removeListener;qt.prototype.removeAllListeners=function(e){var t,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function F4(n,e,t){var r=n._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?Hve(i):U4(i,i.length)}qt.prototype.listeners=function(e){return F4(this,e,!0)};qt.prototype.rawListeners=function(e){return F4(this,e,!1)};qt.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):E4.call(n,e)};qt.prototype.listenerCount=E4;function E4(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}qt.prototype.eventNames=function(){return this._eventsCount>0?pB(this._events):[]};function U4(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n[r];return t}function Jve(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function Hve(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function zve(n,e){return new Promise(function(t,r){function i(o){n.removeListener(e,s),r(o)}function s(){typeof n.removeListener=="function"&&n.removeListener("error",i),t([].slice.call(arguments))}_4(n,e,s,{once:!0}),e!=="error"&&Xve(n,i,{once:!0})})}function Xve(n,e,t){typeof n.on=="function"&&_4(n,"error",e,t)}function _4(n,e,t,r){if(typeof n.on=="function")r.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function i(s){r.once&&n.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}function Yve(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Kve=function(n){Yve(e,n);function e(r){var i,s=r===void 0?{}:r,o=s.supportedChainIds;return i=n.call(this)||this,i.supportedChainIds=o,i}var t=e.prototype;return t.emitUpdate=function(i){this.emit(Uo.Update,i)},t.emitError=function(i){this.emit(Uo.Error,i)},t.emitDeactivate=function(){this.emit(Uo.Deactivate)},e}(Hw.EventEmitter);function CU(){return CU=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},CU.apply(this,arguments)}function nQ(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function bU(n){return bU=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},bU(n)}function zw(n,e){return zw=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},zw(n,e)}function jve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function gB(n,e,t){return jve()?gB=Reflect.construct:gB=function(i,s,o){var a=[null];a.push.apply(a,s);var A=Function.bind.apply(i,a),l=new A;return o&&zw(l,o.prototype),l},gB.apply(null,arguments)}function $ve(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Xw(n){var e=typeof Map=="function"?new Map:void 0;return Xw=function(r){if(r===null||!$ve(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return gB(r,arguments,bU(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),zw(i,r)},Xw(n)}function vy(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function wf(n,e){try{var t=n()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}function jo(n){return n.hasOwnProperty("result")?n.result:n}var U1=function(n){nQ(e,n);function e(){var t;return t=n.call(this)||this,t.name=t.constructor.name,t.message="No Ethereum provider was found on window.ethereum.",t}return e}(Xw(Error)),qve=function(n){nQ(e,n);function e(){var t;return t=n.call(this)||this,t.name=t.constructor.name,t.message="The user rejected the request.",t}return e}(Xw(Error)),eye=function(n){nQ(e,n);function e(r){var i;return i=n.call(this,r)||this,i.handleNetworkChanged=i.handleNetworkChanged.bind(vy(i)),i.handleChainChanged=i.handleChainChanged.bind(vy(i)),i.handleAccountsChanged=i.handleAccountsChanged.bind(vy(i)),i.handleClose=i.handleClose.bind(vy(i)),i}var t=e.prototype;return t.handleChainChanged=function(i){this.emitUpdate({chainId:i,provider:window.ethereum})},t.handleAccountsChanged=function(i){i.length===0?this.emitDeactivate():this.emitUpdate({account:i[0]})},t.handleClose=function(i,s){this.emitDeactivate()},t.handleNetworkChanged=function(i){this.emitUpdate({chainId:i,provider:window.ethereum})},t.activate=function(){try{var i=function(c){if(s)return c;function u(){return CU({provider:window.ethereum},a?{account:a}:{})}var f=function(){if(!a)return Promise.resolve(window.ethereum.enable().then(function(d){return d&&jo(d)[0]})).then(function(d){a=d})}();return f&&f.then?f.then(u):u(f)},s=!1,o=this;if(!window.ethereum)throw new U1;window.ethereum.on&&(window.ethereum.on("chainChanged",o.handleChainChanged),window.ethereum.on("accountsChanged",o.handleAccountsChanged),window.ethereum.on("close",o.handleClose),window.ethereum.on("networkChanged",o.handleNetworkChanged)),window.ethereum.isMetaMask&&(window.ethereum.autoRefreshOnNetworkChange=!1);var a,A=wf(function(){return Promise.resolve(window.ethereum.send("eth_requestAccounts").then(function(l){return jo(l)[0]})).then(function(l){a=l})},function(l){if(l.code===4001)throw new qve});return Promise.resolve(A&&A.then?A.then(i):i(A))}catch(l){return Promise.reject(l)}},t.getProvider=function(){try{return Promise.resolve(window.ethereum)}catch(i){return Promise.reject(i)}},t.getChainId=function(){try{var i=function(){function A(){if(!s)try{s=jo(window.ethereum.send({method:"net_version"}))}catch{}return s||(window.ethereum.isDapper?s=jo(window.ethereum.cachedResults.net_version):s=window.ethereum.chainId||window.ethereum.netVersion||window.ethereum.networkVersion||window.ethereum._chainId),s}var l=function(){if(!s){var c=wf(function(){return Promise.resolve(window.ethereum.send("net_version").then(jo)).then(function(u){s=u})},function(){});if(c&&c.then)return c.then(function(){})}}();return l&&l.then?l.then(A):A(l)};if(!window.ethereum)throw new U1;var s,o=wf(function(){return Promise.resolve(window.ethereum.send("eth_chainId").then(jo)).then(function(a){s=a})},function(){});return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(a){return Promise.reject(a)}},t.getAccount=function(){try{var i=function(){function A(){return s||(s=jo(window.ethereum.send({method:"eth_accounts"}))[0]),s}var l=function(){if(!s){var c=wf(function(){return Promise.resolve(window.ethereum.enable().then(function(u){return jo(u)[0]})).then(function(u){s=u})},function(){});if(c&&c.then)return c.then(function(){})}}();return l&&l.then?l.then(A):A(l)};if(!window.ethereum)throw new U1;var s,o=wf(function(){return Promise.resolve(window.ethereum.send("eth_accounts").then(function(a){return jo(a)[0]})).then(function(a){s=a})},function(){});return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(a){return Promise.reject(a)}},t.deactivate=function(){window.ethereum&&window.ethereum.removeListener&&(window.ethereum.removeListener("chainChanged",this.handleChainChanged),window.ethereum.removeListener("accountsChanged",this.handleAccountsChanged),window.ethereum.removeListener("close",this.handleClose),window.ethereum.removeListener("networkChanged",this.handleNetworkChanged))},t.isAuthorized=function(){try{return window.ethereum?Promise.resolve(wf(function(){return Promise.resolve(window.ethereum.send("eth_accounts").then(function(i){return jo(i).length>0}))},function(){return!1})):Promise.resolve(!1)}catch(i){return Promise.reject(i)}},e}(Kve);function tye(){const{account:n,library:e,activate:t}=ZK(),[r,i]=pe.useState([]),{setViewMode:s}=Y.useContext(ro),{playSound:o}=Y.useContext(io),{isMute:a}=Y.useContext(to),A=new eye({supportedChainIds:[137,1,3,4,5,42,97]});pe.useEffect(()=>{if(n&&e){const f="0x69341F01C2113E2d09Cd4837bbF1786dfbBc41d7",d=["function balanceOf(address owner) external view returns (uint256)","function tokenOfOwnerByIndex(address owner, uint256 index) external view returns (uint256)","function tokenURI(uint256 tokenId) external view returns (string)"],h=new hb(f,d,e);h.balanceOf(n).then(p=>{const m=[];for(let g=0;g<p;g++)m.push(h.tokenOfOwnerByIndex(n,g));Promise.all(m).then(g=>{const v=g.map(y=>h.tokenURI(y));Promise.all(v).then(y=>{i(y)})})})}},[n,e]);const l=()=>{t(A)},c=f=>{!a&&o("backNextButton"),s(St.APPEARANCE)},u=()=>{s(St.LANDING),!a&&o("backNextButton")};return J.jsxs("div",{className:xc.container,children:[!n&&J.jsxs("div",{className:xc.message,children:["Please connect your wallet to load your characters",J.jsx("button",{className:xc.button,onClick:()=>l(),children:"Connect"})]}),J.jsxs("div",{className:xc.characterContainer,children:[J.jsx("div",{className:xc.title,children:"Load Character"}),r.map((f,d)=>J.jsx("div",{className:xc.character,onClick:()=>{c()},children:JSON.stringify(f)},d))]}),J.jsx("button",{className:xc.button,onClick:()=>u(),children:"Back"})]})}const nye="_container_q73cc_1",rye="_mintContainer_q73cc_6",iye="_mainTitleWrap_q73cc_33",sye="_mainTitle_q73cc_33",oye="_mintButtonContainer_q73cc_49",aye="_mintButton_q73cc_49",Aye="_genesisText_q73cc_60",lye="_required_q73cc_64",cye="_divider_q73cc_68",uye="_bottomContainer_q73cc_75",fye="_mintInfo_q73cc_85",dye="_topLine_q73cc_91",hye="_bottomLine_q73cc_104",ei={container:nye,mintContainer:rye,mainTitleWrap:iye,mainTitle:sye,mintButtonContainer:oye,mintButton:aye,genesisText:Aye,required:lye,divider:cye,bottomContainer:uye,mintInfo:fye,topLine:dye,bottomLine:hye},pye="0x543D43F390b7d681513045e8a85707438c463d80",Yw={owner:"0x634B0510C5062CFf8009eAAc2435eB93bc4764ad",address:"0x69341F01C2113E2d09Cd4837bbF1786dfbBc41d7",abi:[{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tokenPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"numberOfTokens",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"mintToken",outputs:[],stateMutability:"payable",type:"function"}]},RV={address:"0x0000000000000aF8FE6E4DE40F4804C90fA8Ea8F",abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AddressMismatch",type:"error"},{inputs:[],name:"AlreadyProxied",type:"error"},{inputs:[],name:"ColdAddressCannotBeTheSameAsHot",type:"error"},{inputs:[],name:"ColdIsAddressZero",type:"error"},{inputs:[],name:"ColdWalletCannotInteractUseHot",type:"error"},{inputs:[],name:"DeliveryCannotBeTheZeroAddress",type:"error"},{inputs:[],name:"DeliveryIsAddressZero",type:"error"},{inputs:[],name:"EthWithdrawFailed",type:"error"},{inputs:[],name:"IncorrectProxyRegisterFee",type:"error"},{inputs:[],name:"MigrationIsAllowedOnceOnly",type:"error"},{inputs:[],name:"NoPaymentPendingForAddress",type:"error"},{inputs:[],name:"NoRecordFoundForAddress",type:"error"},{inputs:[],name:"OnlyHotAddressCanChangeAddress",type:"error"},{inputs:[],name:"ProxyRegisterFeeRequired",type:"error"},{inputs:[],name:"RegisterAddressLocked",type:"error"},{inputs:[],name:"RewardRateIsLocked",type:"error"},{inputs:[],name:"UnknownAmount",type:"error"},{inputs:[],name:"UnrecognisedEPSAPIAmount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!0,internalType:"address",name:"delivery",type:"address"},{indexed:!1,internalType:"address",name:"oldDelivery",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"DeliveryUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"ensReverseRegistrarAddress",type:"address"}],name:"ENSReverseRegistrarSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"erc20",type:"address"},{indexed:!1,internalType:"uint256",name:"erc20Fee_",type:"uint256"}],name:"ERC20FeeUpdated",type:"event"},{anonymous:!1,inputs:[],name:"MigrationComplete",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!0,internalType:"uint64",name:"provider",type:"uint64"}],name:"NominationAccepted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"NominationMade",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!0,internalType:"uint64",name:"provider",type:"uint64"}],name:"ProxyRecordLive",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"enum IEPSProxyRegister.Participant",name:"initiator",type:"uint8"},{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"RecordDeleted",type:"event"},{anonymous:!1,inputs:[],name:"RewardRateLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint96",name:"rewardRate",type:"uint96"}],name:"RewardRateUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newToken",type:"address"}],name:"RewardTokenUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"hot_",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"}],name:"acceptNomination",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"activeEthAddresses",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"bool",name:"checkingHot_",type:"bool"}],name:"addressIsAvailable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"}],name:"beneficiaryBalance",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"id_",type:"uint256"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf1155",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf20",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryOf",outputs:[{internalType:"address",name:"beneficiary_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"coldIsActiveOnRegister",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"coldIsLive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"coldToHot",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"provider_",type:"uint256"}],name:"deleteRecord",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deletionNominalEth",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ensReverseRegistrar",outputs:[{internalType:"contract ENSReverseRegistrar",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"epsAPIBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc1155DelegationRegister",outputs:[{internalType:"contract IERC1155DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc1155DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc20DelegationRegister",outputs:[{internalType:"contract IERC20DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc20DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20PerTransactionFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721DelegationRegister",outputs:[{internalType:"contract IERC721DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses1155",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses20",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses721",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAllAddresses",outputs:[{internalType:"address[]",name:"erc721Addresses_",type:"address[]"},{internalType:"address[]",name:"erc1155Addresses_",type:"address[]"},{internalType:"address[]",name:"erc20Addresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_receivedAddress",type:"address"}],name:"getColdAndDeliveryAddresses",outputs:[{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"bool",name:"isProxied",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"}],name:"getProxyRecordForAddress",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"getProxyRecordForCold",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"getProxyRecordForHot",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"hotIsActiveOnRegister",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"hotIsLive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"hotToRecord",outputs:[{internalType:"uint64",name:"provider",type:"uint64"},{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"bool",name:"feePaid",type:"bool"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"},{internalType:"address",name:"cold_",type:"address"},{internalType:"address",name:"delivery_",type:"address"}],name:"isValidAddresses",outputs:[],stateMutability:"pure",type:"function"},{inputs:[],name:"lockERC1155DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockERC20DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockERC721DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockRewardRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"}],internalType:"struct EPSRegister.MigratedRecord[]",name:"migratedRecords_",type:"tuple[]"}],name:"migration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrationComplete",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"},{internalType:"address",name:"delivery_",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"}],name:"nominate",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"sender_",type:"address"},{internalType:"uint256",name:"erc20Value_",type:"uint256"},{internalType:"bytes",name:"data_",type:"bytes"}],name:"onTokenTransfer",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxyRegisterFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC1155",name:"token_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"}],name:"rescueERC1155",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token_",type:"address"},{internalType:"uint256",name:"amount_",type:"uint256"}],name:"rescueERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC721",name:"token_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"}],name:"rescueERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardRate",outputs:[{internalType:"uint88",name:"",type:"uint88"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardRateLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardToken",outputs:[{internalType:"contract IOAT",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"deleteNominalEth_",type:"uint256"}],name:"setDeletionNominalEth",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"ensName_",type:"string"}],name:"setENSName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"ensReverseRegistrar_",type:"address"}],name:"setENSReverseRegistrar",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc1155DelegationRegister_",type:"address"}],name:"setERC1155DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc20DelegationRegister_",type:"address"}],name:"setERC20DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc20_",type:"address"},{internalType:"uint256",name:"erc20Fee_",type:"uint256"}],name:"setERC20Fee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc721DelegationRegister_",type:"address"}],name:"setERC721DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"count_",type:"uint256"},{internalType:"uint256",name:"air_",type:"uint256"}],name:"setNNumberOfEthAddressesAndAirdropAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"registerFee_",type:"uint256"}],name:"setRegisterFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint88",name:"rewardRate_",type:"uint88"}],name:"setRewardRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"rewardToken_",type:"address"}],name:"setRewardToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"treasuryAddress_",type:"address"}],name:"setTreasuryAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"treasury",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"delivery_",type:"address"},{internalType:"uint256",name:"provider_",type:"uint256"}],name:"updateDeliveryAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token_",type:"address"},{internalType:"uint256",name:"amount_",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount_",type:"uint256"}],name:"withdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}]},gye={}.VITE_PINATA_API_KEY,mye={}.VITE_PINATA_API_SECRET,_1="0x89";let yy;async function vye(){if(yy!=null)return yy;const n=new FP("https://polygon-rpc.com/"),t=await new hb(Yw.address,Yw.abi,n).tokenPrice();return yy=Le.from(t).mul(1),yy}async function yye(){if(window.ethereum)try{const n=await window.ethereum.request({method:"eth_chainId"});if(parseInt(n,16)==parseInt(_1,16)){const e=await window.ethereum.request({method:"eth_requestAccounts"});return e.length>0?e[0]:""}else try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:_1}]});const e=await window.ethereum.request({method:"eth_requestAccounts"});return e.length>0?e[0]:""}catch(e){console.log("polygon not find:",e);try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x89",chainName:"Polygon Mainnet",rpcUrls:["https://polygon-rpc.com"],nativeCurrency:{name:"Matic",symbol:"MATIC",decimals:18},blockExplorerUrls:["https://polygonscan.com/"]}]}),await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:_1}]});const t=await window.ethereum.request({method:"eth_requestAccounts"});return t.length>0?t[0]:""}catch(t){console.log("Adding polygon chain failed",t)}}}catch{return""}else return""}async function S1(n,e){if(!n)return console.warn("Error saving to pinata: No file data");const t="https://api.pinata.cloud/pinning/pinFileToIPFS";let r=new FormData;return r.append("file",n,e),(await n4.post(t,r,{maxContentLength:"Infinity",maxBodyLength:"Infinity",headers:{"Content-Type":`multipart/form-data; boundary=${r._boundary}`,pinata_api_key:gye,pinata_secret_api_key:mye}})).data}const Bye=n=>{let e=[];return Object.keys(n).map(t=>{Object.keys(n[t]).length!==0&&e.push({trait_type:t,value:n[t].name})}),e};async function wye(n,e,t,r,i){if(!n)throw new Error("No avatar was provided");if(!e)throw new Error("No screenshot was provided");if(!t)throw new Error("No model was provided");const s=await yye();if(s=="")return"Please Connect Wallet";if(!i||await Cye(s)){console.log("minting");let a="AvatarImage_"+Date.now()+".png",A=await(async()=>{for(let v=0;v<10;v++)try{return await S1(e,a).catch(w=>{console.error(v,"---",w)})}catch(y){return console.warn(y),y}return"Failed to upload screenshot"})();const l=await Z0e(t,n,4096);let c;if(l){let v="AvatarGlb_"+Date.now()+".glb";c=await(async()=>{for(let y=0;y<10;y++)try{return await S1(l,v).catch(C=>(console.error(y,"---",C),"Couldn't save glb to pinata"))}catch(w){return console.warn(w),"Couldn't save glb to pinata"}return"Failed to upload glb"})()}else return"Unable to get glb";const u={name:r||"Avatars",description:"Character Studio Avatars.",image:`ipfs://${A.IpfsHash}`,animation_url:`ipfs://${c.IpfsHash}`,attributes:Bye(n)},f=JSON.stringify(u),h=`ipfs://${(await S1(new Blob([f]),"AvatarMetadata_"+Date.now()+".json")).IpfsHash}`;let p=await vye();const m=new $U(window.ethereum).getSigner(),g=new hb(Yw.address,Yw.abi,m);try{const v={value:p,from:s};if((await(await g.mintToken(1,h,v)).wait()).transactionHash)return console.log("Mint success!"),"Mint success!"}catch{return"Public Mint failed."}}}const Cye=async n=>{if(n){const e="0x6e58309CD851A5B124E3A56768a42d12f3B6D104",t=TK("mainnet",{alchemy:{}.VITE_ALCHEMY_API_KEY}),i=await new hb(RV.address,RV.abi,t).beneficiaryBalanceOf(e,pye,1);return parseInt(i)>0?!0:(console.log(`Currently in alpha. You need a genesis pass to mint. 
 Will be public soon!`),!1)}else return console.log("Please connect your wallet"),!1};function bye({getFaceScreenshot:n}){const{templateInfo:e,model:t,avatar:r}=Y.useContext(ki),{setViewMode:i}=Y.useContext(ro),{playSound:s}=Y.useContext(io),{isMute:o}=Y.useContext(to),[a,A]=Y.useState(""),[l,c]=Y.useState(!1),u=()=>{i(St.SAVE),!o&&s("backNextButton")},f=()=>{i(St.CHAT),!o&&s("backNextButton")};function d(){return J.jsxs("div",{className:ei.mainTitleWrap,children:[J.jsx("div",{className:ei.topLine}),J.jsx("div",{className:ei.mainTitle,children:"Mint"})]})}async function h(){!o&&s("backNextButton"),c(!0),A("Please check your wallet");const p=localStorage.getItem(`${e.id}_fulBio`),m=JSON.parse(p),g=n(256,256,!0),v=await wye(r,g,t,m.name);A(v),c(!1),console.log(v)}return J.jsxs("div",{className:ei.container,children:[J.jsx("div",{className:"sectionTitle",children:"Mint Your Character"}),J.jsxs("div",{className:ei.mintContainer,children:[J.jsx(d,{}),J.jsxs("div",{className:ei.mintButtonContainer,children:[J.jsx(In,{size:16,theme:"light",icon:"polygon",text:l?"Minting...":"Open Edition",className:ei.mintButton,disabled:l,onClick:h,minWidth:220}),J.jsx("div",{className:ei.divider}),J.jsx(In,{size:16,theme:"light",icon:"tokens",text:"Genesis Edition",className:ei.mintButton,disabled:!0,minWidth:220}),J.jsxs("span",{className:ei.genesisText,children:["(",J.jsx("span",{className:ei.required,children:"Coming Soon!"}),")"]})]}),J.jsxs("span",{className:ei.mintInfo,children:[a," "]})]}),J.jsxs("div",{className:ei.bottomContainer,children:[J.jsx(In,{theme:"light",text:"Back",size:14,className:ei.buttonLeft,onClick:u}),J.jsx(In,{theme:"light",text:"Chat",size:14,className:ei.buttonRight,onClick:f})]})]})}const xye="_button_bgujb_14",Iye="_buttonInactive_bgujb_18",Fye="_bioContainer_bgujb_22",Eye="_scrollContainer_bgujb_37",Uye="_topLine_bgujb_47",_ye="_bottomLine_bgujb_69",Sye="_buttonContainer_bgujb_91",Qye="_buttonLeft_bgujb_100",Rye="_buttonRight_bgujb_104",Mye="_buttonCenter_bgujb_108",Tye="_container_bgujb_122",Nye="_input_bgujb_158",kye="_label_bgujb_168",Dye="_section_bgujb_175",Vye="_select_bgujb_180",xt={"inner-container":"_inner-container_bgujb_1",button:xye,buttonInactive:Iye,bioContainer:Fye,scrollContainer:Eye,topLine:Uye,bottomLine:_ye,buttonContainer:Sye,buttonLeft:Qye,buttonRight:Rye,buttonCenter:Mye,container:Tye,input:Nye,label:kye,section:Dye,select:Vye},Lye=(n,e)=>{const t=n.name.toUpperCase(),r=e.names[Math.floor(Math.random()*e.names.length)],i=e.cities[Math.floor(Math.random()*e.cities.length)],s=e.weapons[Math.floor(Math.random()*e.weapons.length)],o=e.hobbies[Math.floor(Math.random()*e.hobbies.length)],a=e.professions[Math.floor(Math.random()*e.professions.length)],A=e.heShe[t]||"HE",l=Object.keys(r4).find(g=>{if(A.toUpperCase()==="SHE"&&g.includes("Female")||A.toUpperCase()==="HE"&&g.includes("Male"))return g}),c=Math.floor(Math.random()*Object.keys(Pd).length),u=Object.keys(Pd)[c],f=`${r} is a ${e.classes[t]} from ${i}. ${A} is ${o}. ${A} also enjoys ${a}. ${A} is armed with a ${s}.`,d=Pye(e),h=Oye(e),p=Wye(e);return{name:r,classType:t,city:i,weapon:s,hobby:o,profession:a,heshe:A,voiceKey:l,favColor:u,personality:d,relationship:h,hobbies:p,description:f,greeting:"Hello"}},Pye=n=>{const e=n.generalPersonalityQuestions[Math.floor(Math.random()*n.generalPersonalityQuestions.length)],t=n.generalPersonalityAnswers[Math.floor(Math.random()*n.generalPersonalityAnswers.length)];return{question:e,answer:t}},Wye=n=>{const e=n.hobbyQuestions[Math.floor(Math.random()*n.hobbyQuestions.length)],t=n.hobbyAnswers[Math.floor(Math.random()*n.hobbyAnswers.length)];return{question:e,answer:t}},Oye=n=>{const e=n.relationshipQuestions[Math.floor(Math.random()*n.relationshipQuestions.length)],t=n.relationshipAnswers[Math.floor(Math.random()*n.relationshipAnswers.length)];return{question:e,answer:t}},Zye=Object.keys(r4),Gye=Object.keys(Pd);function Jye({personality:n}){const{playSound:e}=Y.useContext(io),{isMute:t}=Y.useContext(to),{setViewMode:r}=Y.useContext(ro),{manifestSelectionIndex:i,getSelectedCharacterBaseData:s}=Y.useContext(ki),o=()=>{r(St.APPEARANCE),!t&&e("backNextButton")},a=()=>{r(St.SAVE),!t&&e("backNextButton")},[A,l]=Y.useState(ct[`${i}_fulBio`]||Lye(s(),n));Y.useEffect(()=>{ct[`${i}_fulBio`]=A},[A]),pe.useEffect(()=>{const u=f=>{f.ctrlKey&&f.key};return window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[]);const{t:c}=pe.useContext(ao);return J.jsxs("div",{className:xt.container,children:[J.jsx("div",{className:"sectionTitle",children:c("pageTitles.createBio")}),J.jsxs("div",{className:xt.bioContainer,children:[J.jsx("div",{className:xt.topLine}),J.jsx("div",{className:xt.bottomLine}),J.jsx("div",{className:xt.scrollContainer,children:J.jsxs("div",{className:xt["inner-container"],children:[J.jsxs("div",{className:xt.section,children:[J.jsx("label",{className:xt.label,htmlFor:"name",children:c("labels.name")}),J.jsx("input",{type:"text",name:"name",className:xt.input,defaultValue:A.name,onChange:u=>l({...A,name:u.target.value})})]}),J.jsxs("div",{className:xt.section,children:[J.jsx("label",{className:xt.label,htmlFor:"voice",children:c("labels.voice")}),J.jsx("select",{name:"voice",className:xt.select,defaultValue:A.voiceKey,onChange:u=>l({...A,voiceKey:u.target.value}),children:Zye.map((u,f)=>J.jsx("option",{value:u,children:u},f))})]}),J.jsxs("div",{className:xt.section,children:[J.jsx("label",{className:xt.label,htmlFor:"favcolor",children:c("labels.favoriteColor")}),J.jsx("select",{name:"favcolor",className:xt.select,defaultValue:A.colorKey,onChange:u=>l({...A,colorKey:u.target.value}),children:Gye.map((u,f)=>J.jsx("option",{value:u,children:u.charAt(0).toUpperCase()+u.slice(1)},f))})]}),J.jsxs("div",{className:xt.section,children:[J.jsx("label",{className:xt.label,htmlFor:"greeting",children:c("labels.preferredGreeting")}),J.jsx("input",{type:"text",name:"greeting",className:xt.input,defaultValue:A.greeting,onChange:u=>l({...A,greeting:u.target.value})})]}),J.jsxs("div",{className:xt.section,children:[J.jsx("label",{className:xt.label,htmlFor:"bio",children:c("labels.bio")}),J.jsx("textarea",{name:"bio",className:xt.input,rows:"4",cols:"50",defaultValue:A.description,onChange:u=>l({...A,description:u.target.value})})]}),J.jsxs("div",{className:xt.section,children:[J.jsxs("label",{className:xt.label,htmlFor:"question1",children:[c("labels.question")," 1"]}),J.jsx("select",{name:"question1",className:xt.select,defaultValue:A.personality.question,onChange:u=>l({...A,personality:{question:u.target.value,answer:A.personality.answer}}),children:n.generalPersonalityQuestions.map((u,f)=>J.jsx("option",{value:u,children:u},f))}),J.jsx("textarea",{name:"response1",className:xt.input,defaultValue:A.personality.answer,onChange:u=>l({...A,personality:{question:A.personality.question,answer:u.target.value}})})]}),J.jsxs("div",{className:xt.section,children:[J.jsxs("label",{className:xt.label,htmlFor:"question2",children:[c("labels.question")," 2"]}),J.jsx("select",{name:"question2",className:xt.select,defaultValue:A.relationship.question,onChange:u=>l({...A,relationship:{question:u.target.value,answer:A.relationship.answer}}),children:n.relationshipQuestions.map((u,f)=>J.jsx("option",{value:u,children:u},f))}),J.jsx("textarea",{name:"response1",className:xt.input,defaultValue:A.relationship.answer,onChange:u=>l({...A,relationship:{question:A.relationship.question,answer:u.target.value}})})]}),J.jsxs("div",{className:xt.section,children:[J.jsxs("label",{className:xt.label,htmlFor:"question3",children:[c("labels.question")," 3"]}),J.jsx("select",{name:"question3",className:xt.select,defaultValue:A.hobbies.question,onChange:u=>l({...A,hobbies:{question:u.target.value,answer:A.hobbies.answer}}),children:n.hobbyQuestions.map((u,f)=>J.jsx("option",{value:u,children:u},f))}),J.jsx("textarea",{name:"response3",className:xt.input,defaultValue:A.hobbies.answer,onChange:u=>l({...A,hobbies:{question:A.hobbies.question,answer:u.target.value}})})]})]})})]}),J.jsxs("div",{className:xt.buttonContainer,children:[J.jsx(In,{theme:"light",text:c("callToAction.back"),size:14,className:xt.buttonLeft,onClick:o}),J.jsx(In,{theme:"light",text:c("callToAction.next"),size:14,className:xt.buttonRight,onClick:a})]})]})}const Hye="_classdisabled_sjaap_1",zye="_container_sjaap_6",Xye="_classContainer_sjaap_14",Yye="_icon_sjaap_40",Kye="_name_sjaap_71",jye="_description_sjaap_80",$ye="_classFrame_sjaap_85",qye="_frameContainer_sjaap_107",eBe="_frame_sjaap_107",tBe="_image_sjaap_117",nBe="_lockedContainer_sjaap_123",rBe="_locked_sjaap_123",iBe="_buttonContainer_sjaap_137",sBe="_buttonLeft_sjaap_146",oBe="_buttonRight_sjaap_150",aBe="_buttonCenter_sjaap_154",ABe="_topLine_sjaap_168",lBe="_bottomLine_sjaap_194",br={classdisabled:Hye,container:zye,classContainer:Xye,class:"_class_sjaap_1",icon:Yye,name:Kye,description:jye,classFrame:$ye,frameContainer:qye,frame:eBe,image:tBe,lockedContainer:nBe,locked:rBe,buttonContainer:iBe,buttonLeft:sBe,buttonRight:oBe,buttonCenter:aBe,topLine:ABe,bottomLine:lBe};function cBe({fetchCharacterManifest:n}){const{t:e}=pe.useContext(ao),{setViewMode:t}=Y.useContext(ro),{playSound:r}=Y.useContext(io),{isMute:i}=Y.useContext(to),{manifest:s}=Y.useContext(ki),[o,a]=pe.useState([]);pe.useEffect(()=>{if(s!=null){const u=s.map(f=>({name:f.name,image:f.portrait,description:f.description,manifest:f.manifest,icon:f.icon,format:f.format,disabled:!1}));a(u)}},[s]);const A=()=>{t(St.LANDING),!i&&r("backNextButton")},l=u=>{n(u).then(()=>{t(St.APPEARANCE)}),!i&&r("classSelect")},c=()=>{!i&&r("classMouseOver")};return e("classes.dropHunter.name"),e("classes.dropHunter.description"),e("classes.neuralHacker.name"),e("classes.neuralHacker.description"),J.jsxs("div",{className:`${br.container} horizontalScroll`,children:[J.jsx("div",{className:"sectionTitle",children:e("pageTitles.chooseClass")}),J.jsx("div",{className:br.vrmOptimizerButton}),J.jsx("div",{className:br.topLine}),J.jsx("div",{className:br.classContainer,children:o.map((u,f)=>J.jsxs("div",{className:u.disabled?br.classdisabled:br.class,onClick:u.disabled?null:()=>l(f),onMouseOver:u.disabled?null:()=>c(),children:[J.jsxs("div",{className:br.classFrame,style:{backgroundImage:`url(${u.image})`},children:[J.jsx("div",{className:br.frameContainer,children:J.jsx("img",{src:"/assets/backgrounds/class-frame.svg",className:br.frame})}),J.jsx("div",{className:br.lockedContainer,children:u.disabled&&J.jsx("img",{src:"/assets/icons/locked.svg",className:br.locked})})]}),J.jsx("div",{className:br.icon,children:J.jsx("img",{src:u.icon,alt:u.name})}),J.jsx("div",{className:br.name,children:u.name}),J.jsx("div",{className:br.description,children:u.description})]},f))}),J.jsx("div",{className:br.bottomLine}),J.jsx("div",{className:br.buttonContainer,children:J.jsx(In,{theme:"light",text:e("callToAction.back"),size:14,className:br.buttonLeft,onClick:A})})]})}const uBe="_buttonContainer_1ueuk_1",fBe="_button_1ueuk_1",By={buttonContainer:uBe,button:fBe};function dBe(){const{setViewMode:n}=Y.useContext(ro),{playSound:e}=Y.useContext(io),{isMute:t}=Y.useContext(to),r=()=>{n(St.CREATE),!t&&e("backNextButton")},i=()=>{n(St.OPTIMIZER),!t&&e("backNextButton")};return J.jsx("div",{className:By.container,children:J.jsxs("div",{className:By.buttonContainer,children:[J.jsx("button",{className:By.button,onClick:r,children:J.jsx("img",{src:"/assets/media/btn_create_character.png"})}),J.jsx("button",{className:By.button,onClick:i,children:J.jsx("img",{src:"/assets/media/btn_optimize_character.png"})})]})})}const hBe="_buttonContainer_1fd4o_1",pBe="_buttonLeft_1fd4o_10",gBe="_buttonRight_1fd4o_14",mBe="_buttonCenter_1fd4o_18",Cf={buttonContainer:hBe,buttonLeft:pBe,buttonRight:gBe,buttonCenter:mBe},vBe="_SideMenu_buw5r_1",yBe="_scrollContainer_buw5r_13",BBe="_selectorButton_buw5r_32",wBe="_bottomLine_buw5r_42",CBe="_MenuImg_buw5r_70",bBe="_MenuOption_buw5r_88",xBe="_MenuOptionSelected_buw5r_94",IBe="_MenuImgActive_buw5r_99",FBe="_ShuffleOption_buw5r_117",EBe="_ShuffleOptionActive_buw5r_129",UBe="_MenuTitle_buw5r_141",_Be="_LoadingContainer_buw5r_155",SBe="_Loading_buw5r_155",QBe="_LoadingText_buw5r_181",Xp={SideMenu:vBe,scrollContainer:yBe,"selector-container":"_selector-container_buw5r_24",selectorButton:BBe,bottomLine:wBe,MenuImg:CBe,MenuOption:bBe,MenuOptionSelected:xBe,MenuImgActive:IBe,ShuffleOption:FBe,ShuffleOptionActive:EBe,MenuTitle:UBe,LoadingContainer:_Be,Loading:SBe,LoadingText:QBe},RBe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAXASURBVHgB7ZzNchNHEMd7ZiWf5WtSCSIfVa5cLN+MTRXrEFPcWJwHwNxys/0Etm+5YZ4Ac0pOIG4EU2WlCgffIm4+pIhS8ADKEQlt07OSKKGdlVdSz64K9++kmhlpR3+Pe3qmuwUgCIIgCIIgCIIgCIIgCIIgCIIgXHAUzCDLflDWRfCVgkVA5aOCkgqhRLMt9cdQW0MhNEBhHRFehW2ondaqDZgxZkZg3w9KrTm9RdJtknBlmAwjeLXTgvuzInbuAi//FPieUrv00gdW1GGnHe7nLXRuAkdmoKDvKYUBOCVfoT3IgSvrP295Gn4nG1sB91S0p4Kvvl34/83rszpkTOYrePXGxj1A3E41GKGGCl/Rq7oXQpM2tma/q0PC0R+orFAt0rfwU32eUgcnzx7tQIZkJrDZxNpFdUwvR6/arqgP59pQrdWqTUj52a0iBCT2nRRi14ttXEv72dOSicCpxCVhFeD+i+fVGkzB8s2g7HVgj77anRHDMhO5ABkwUlzjz4Z4d1ph+5w+jTazzZX1oEYmYTfB5av05rQEjtHgmMjmJoiLqKrFFi5xiTtEPTqcJFPpzc0pTk0EraJNBeqBrU9hZA72wAH03ArZ4+PBk18Socadl39UD8ARzgTuHnfVMT2gPNw3K+L2aHbauOTKT3ZmIrwi7NrENWYhR3Ftm1pJz2lnpsKJwGb10jrdjHXQhhYWQid+6Hnimv8a8hwum0siS19wlY7s4AAnApvVC9aH4U5vl2cljbjmv8a4ZZo8FtsY7N6HsMNug83q9YrqX8ujDk+OHt0FZtKKO9i2un7buGj+8Fha4fPcvjH7CtYeWI/BHS/cB2YmEbffbhvfKkC6I/wY8JsIrW7F2uiUxm0aJhXX0PO7a7H3qJGnv4lgFdiYB6vnQHcLwMg04n6cE1jnVF75ceMSMMIqsAnz2NrNxQ0wwSHu6DmFa8AIr4kILUdiMg9cGweXuIbenGqxDo/3jppVYKXpbnaI3n3u1HCK+3FuYXxuZIevASOsApNdK8faMO7Yj4sLcSM0xCMcmPqInfIRjNDFTnm4jWJSU4VpnIlr5hbaj87AiPPrymlwKa6hrS6wwK7FzQpegTG+Ijp6/BXxuYhr4N3kFMYEVu/HEzhLcZU90tIARrg3ubhNG8OvzHrlWuN1OMMCk1/553Abib6Y5r15mAWXfnsfXhusrS6Zb8L2o96Wh7i9OfmWrqncymFYBQ49y9GTaGkIkt6T14ZmElVs7UnfYVJYBTZXknSaawy3K89+DZint6BsiSkUTuK+VuX3gxFs14D+cMwrT3G7McO4eUDEJ8AMu8Bz7+HA1j4Y88rbz02KGZJ5YM+PcJIXkRTzIuHWQjqe5inuletBoLV6HO9xEzN0clROinnRKn6Qp7hRxEUraw6Ei5ihwYnAJuZlEkwsXeU8j79RRj3YkgHVoYt0guiZ4IgowQQhVSQjC3FXbmzsWssVyHNwtXoNzkoI3v5z1vz6m4V3FCK4OWpcZuIi7tn6yK3cefnMSXZnhNMajTevz04vXV6YJ5GXrQPM6mnDztvGGUvMbhhzWvviux9+U4C/gPXxeP/kqPorOCSTDHfyKv6G5Ox2czjZ/+uoegiMmPIwbTZVSKy5q58cPXaegJ1JhrtJ1x+R5V42OcSr6xvXOMqtUtbdRSUEkAGzVwRDoXSTFDJREUz3+OufM/zzK4IZ5Or14AC12ko5vGZqkcMQ/sOBWy5FURK6yy31apkrtFNV0iRcG5v74qi6DRmSS6WnKS0YUaDigiZdNOyfPHdXKpBELpWepuLyy+8XnmiEefobp454TII58IQFvE2u2FPIgfyLwdPVtY0PU93dtMzMzxkYoXUHtsl03JrUdJCdbmjEhwW60ctqEzuP2fxBjq7YPph6ZFSLaGqSP/VnmyQm3cqZ+uUoDlif1R/kEARBEARBEARBEARBEARBEARBEC48HwDC3eeu0ZVWOQAAAABJRU5ErkJggg==",MBe="/assets/tick-d416ee47.svg",Kw=[0,400,560,2400,4800],jw=[0,500,700,3e3,6e3],xU=[],qa=[],rQ=1024,S4=44100;for(let n=0;n<Kw.length;n++)qa[n]=Math.round(2*rQ/S4*Kw[n]);for(let n=0;n<jw.length;n++)xU[n]=Math.round(2*rQ/S4*jw[n]);class $w{constructor(e){this.vrm=e;const t=(r,i)=>{requestAnimationFrame(t),this.update(r,i)};t()}start(e){this.audioContext=new AudioContext,this.mediaStreamSource=this.audioContext.createMediaStreamSource(e),this.meter=$w.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter)}startFromAudioFile(e){this.audioContext||(this.audioContext=new AudioContext),this.userSpeechAnalyzer||(this.userSpeechAnalyzer=this.audioContext.createAnalyser()),this.userSpeechAnalyzer.smoothingTimeConstant=.5,this.userSpeechAnalyzer.fftSize=rQ,this.mediaStreamSource&&this.mediaStreamSource.stop(),this.audioContext.decodeAudioData(e).then(t=>{this.mediaStreamSource=this.audioContext.createBufferSource(),this.mediaStreamSource.buffer=t,this.meter=$w.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter),this.mediaStreamSource.connect(this.audioContext.destination),this.mediaStreamSource.start(),this.mediaStreamSource.connect(this.userSpeechAnalyzer)})}destroy(){var e,t,r;return(e=this.meter)==null||e.shutdown(),this.meter=null,(t=this.mediaStreamSource)==null||t.disconnect(),((r=this.audioContext)==null?void 0:r.close().catch(()=>{}))||Promise.resolve()}update(e){if(this.meter){const{volume:t}=this.meter;if(t<.01)this.vrm.expressionManager.setValue(ii.Oh,0),this.vrm.expressionManager.setValue(ii.Ah,0),this.vrm.expressionManager.setValue(ii.Ee,0);else{const{ah:r,oh:i,ee:s}=this.update2();this.vrm.expressionManager.setValue(ii.Oh,i),this.vrm.expressionManager.setValue(ii.Ah,r),this.vrm.expressionManager.setValue(ii.Ee,s),this.vrm.expressionManager.update(e)}}}update2(){function e(l){const u=new Float32Array(l.length);for(let f=0;f<l.length;f++)u[f]=.5+(l[f]+20)/140;return u}const t=new Float32Array(this.userSpeechAnalyzer.frequencyBinCount);this.userSpeechAnalyzer.getFloatFrequencyData(t);const r=e(t),i=new Float32Array(Kw.length),s=new Float32Array(jw.length);for(let l=0;l<Kw.length-1;l++){for(let c=qa[l];c<=qa[l+1];c++)r[c]>0&&(i[l]+=r[c]);i[l]/=qa[l+1]-qa[l]}for(let l=0;l<jw.length-1;l++){for(let c=qa[l];c<=qa[l+1];c++)r[c]>0&&(s[l]+=r[c]);i[l]/=qa[l+1]-qa[l],s[l]=s[l]/(xU[l+1]-xU[l])}const o=Math.max(s[1],i[1])>.2?1-2*Math.max(i[2],s[2]):(1-2*Math.max(i[2],s[2]))*5*Math.max(i[1],s[1]),a=3*Math.max(i[3],s[3]),A=.8*(Math.max(i[1],s[1])-Math.max(i[3],s[3]));return{oh:o,ee:A,ah:a}}static createAudioMeter(e){const t=e.createScriptProcessor(512);return t.onaudioprocess=r=>{const i=r.inputBuffer.getChannelData(0),s=i.length;let o=0,a;for(let l=0;l<s;l++)a=i[l],Math.abs(a)>=t.clipLevel&&(t.clipping=!0,t.lastClip=window.performance.now()),o+=a*a;const A=Math.sqrt(o/s);t.volume=Math.max(A,t.volume*t.averaging)},t.clipping=!1,t.lastClip=0,t.volume=0,t.clipLevel=.98,t.averaging=.95,t.clipLag=750,t.connect(e.destination),t.checkClipping=()=>t.clipping?(t.lastClip+t.clipLag<window.performance.now()&&(t.clipping=!1),t.clipping):!1,t.shutdown=()=>{t.disconnect(),t.onaudioprocess=null},t}}const TBe="_SelectorContainerPos_14r0b_1",NBe="_scrollContainer_14r0b_13",kBe="_uploadContainer_14r0b_25",DBe="_uploadButton_14r0b_38",VBe="_bottomLine_14r0b_64",LBe="_active_14r0b_109",PBe="_selectorButton_14r0b_113",WBe="_tickStyle_14r0b_126",OBe="_tickStyleInActive_14r0b_133",pi={SelectorContainerPos:TBe,scrollContainer:NBe,uploadContainer:kBe,uploadButton:DBe,"selector-container":"_selector-container_14r0b_57",bottomLine:VBe,"selector-button":"_selector-button_14r0b_98",active:LBe,selectorButton:PBe,"trait-icon":"_trait-icon_14r0b_119",tickStyle:WBe,tickStyleInActive:OBe,"icon-hidden":"_icon-hidden_14r0b_137"},ZBe="_tokenBoxWrap_jp0ul_1",GBe="_mask_jp0ul_7",JBe="_timer_jp0ul_31",HBe="_level_jp0ul_42",zBe="_mythic_jp0ul_55",XBe="_epic_jp0ul_60",YBe="_rare_jp0ul_65",KBe="_uncommon_jp0ul_70",jBe="_common_jp0ul_75",$Be="_none_jp0ul_80",qBe="_value_jp0ul_85",ewe="_frame_jp0ul_95",twe="_emptyIcon_jp0ul_111",nwe="_badge_jp0ul_123",rwe="_frameActive_jp0ul_131",nl={tokenBoxWrap:ZBe,mask:GBe,timer:JBe,level:HBe,mythic:zBe,epic:XBe,rare:YBe,uncommon:KBe,common:jBe,none:$Be,value:qBe,frame:ewe,emptyIcon:twe,badge:nwe,frameActive:rwe,default:"_default_jp0ul_159"},IU=n=>{const{size:e,active:t,onClick:r,level:i,icon:s,rarity:o,style:a}=n;return J.jsxs("div",{className:nl.tokenBoxWrap,style:{width:e,height:e},onClick:r,children:[t&&J.jsx("div",{className:Ld(nl.frame,nl.frameActive)}),J.jsx("div",{className:Ld(nl.frame,o&&nl[o])}),J.jsx("img",{src:s,className:nl.emptyIcon,style:a}),i&&J.jsxs("div",{className:Ld(nl.level,o&&nl[o]),children:["Lv.",i]})]})},iwe=async n=>{var r,i;const e=new rb;e.crossOrigin="anonymous",e.register(s=>new wG(s,{autoUpdateHumanBones:!0}));const t=await e.loadAsync(n);return((i=(r=t.userData)==null?void 0:r.vrmMeta)==null?void 0:i.metaVersion)==="0"&&(t.scene.rotation.y=Math.PI,t.scene.traverse(s=>{if(s.isMesh&&(s.userData.isVRM0=!0,s.isSkinnedMesh))for(let o=0;o<s.skeleton.bones.length;o++)s.skeleton.bones[o].userData.vrm0RestPosition={...s.skeleton.bones[o].position}})),URL.revokeObjectURL(n),t},swe=(n,e)=>{const t=n.userData.vrm;DG(t),n&&e&&e.attach(n.scene)},owe=n=>{var e,t;(e=n.parser.json.extensions)!=null&&e.VRM?awe(n):(t=n.parser.json.extensions)!=null&&t.VRMC_vrm?Awe(n):console.warn("No valid vrm file was provided")},awe=n=>{var a,A,l;const e=n.parser.json,t=n.scene,r=e.nodes,i=(l=(A=(a=e.extensions)==null?void 0:a.VRM)==null?void 0:A.secondaryAnimation)==null?void 0:l.colliderGroups,s=[],o=r.map(c=>Q4(c.name,s));i!=null&&i.forEach(c=>{const u=o[c.node],f=LG(t,u);if(f!=null){const d=c.colliders;f.userData.VRMcolliders=d.map(h=>({sphere:{radius:h.radius,offset:[h.offset.x,h.offset.y,h.offset.z]}}))}})},Awe=n=>{var A,l,c,u;const e=n.parser.json,t=n.scene,r=e.nodes,i=(l=(A=e.extensions)==null?void 0:A.VRMC_springBone)==null?void 0:l.colliderGroups,s=(u=(c=e.extensions)==null?void 0:c.VRMC_springBone)==null?void 0:u.colliders,o=[],a=r.map(f=>Q4(f.name,o));i!=null&&i.forEach(f=>{const d=$t(f.colliders);let h=-1,p=null;d.forEach(m=>{if(h!=s[m].node){h=s[m].node;const g=a[h];p=LG(t,g),p.userData.VRMcolliders=[]}if(p!=null){const g=s[m].shape;for(const v in g){const y=g[v];y!=null&&y.offset&&(y.offset[0]=-y.offset[0])}p.userData.VRMcolliders.push(g)}else console.error("no node with name "+a[h]+" was found")})})},Q4=(n,e)=>{const t=mt.sanitizeNodeName(n||"");return t in e?t+"_"+ ++e[t]:(e[t]=0,t)};var Ts={},v0={},lwe=typeof Hf=="object"&&Hf&&Hf.Object===Object&&Hf,R4=lwe,cwe=R4,uwe=typeof self=="object"&&self&&self.Object===Object&&self,fwe=cwe||uwe||Function("return this")(),ka=fwe,dwe=ka,hwe=dwe.Symbol,y0=hwe,MV=y0,M4=Object.prototype,pwe=M4.hasOwnProperty,gwe=M4.toString,Yp=MV?MV.toStringTag:void 0;function mwe(n){var e=pwe.call(n,Yp),t=n[Yp];try{n[Yp]=void 0;var r=!0}catch{}var i=gwe.call(n);return r&&(e?n[Yp]=t:delete n[Yp]),i}var vwe=mwe,ywe=Object.prototype,Bwe=ywe.toString;function wwe(n){return Bwe.call(n)}var Cwe=wwe,TV=y0,bwe=vwe,xwe=Cwe,Iwe="[object Null]",Fwe="[object Undefined]",NV=TV?TV.toStringTag:void 0;function Ewe(n){return n==null?n===void 0?Fwe:Iwe:NV&&NV in Object(n)?bwe(n):xwe(n)}var Uu=Ewe,Uwe=Array.isArray,Lo=Uwe;function _we(n){return n!=null&&typeof n=="object"}var DA=_we,Swe=Uu,Qwe=Lo,Rwe=DA,Mwe="[object String]";function Twe(n){return typeof n=="string"||!Qwe(n)&&Rwe(n)&&Swe(n)==Mwe}var Nwe=Twe;function kwe(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var A=o[n?a:++i];if(t(s[A],A,s)===!1)break}return e}}var Dwe=kwe,Vwe=Dwe,Lwe=Vwe(),Pwe=Lwe;function Wwe(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var Owe=Wwe,Zwe=Uu,Gwe=DA,Jwe="[object Arguments]";function Hwe(n){return Gwe(n)&&Zwe(n)==Jwe}var zwe=Hwe,kV=zwe,Xwe=DA,T4=Object.prototype,Ywe=T4.hasOwnProperty,Kwe=T4.propertyIsEnumerable,jwe=kV(function(){return arguments}())?kV:function(n){return Xwe(n)&&Ywe.call(n,"callee")&&!Kwe.call(n,"callee")},N4=jwe,wh={},$we={get exports(){return wh},set exports(n){wh=n}};function qwe(){return!1}var eCe=qwe;(function(n,e){var t=ka,r=eCe,i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===i,a=o?t.Buffer:void 0,A=a?a.isBuffer:void 0,l=A||r;n.exports=l})($we,wh);var tCe=9007199254740991,nCe=/^(?:0|[1-9]\d*)$/;function rCe(n,e){var t=typeof n;return e=e??tCe,!!e&&(t=="number"||t!="symbol"&&nCe.test(n))&&n>-1&&n%1==0&&n<e}var k4=rCe,iCe=9007199254740991;function sCe(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=iCe}var iQ=sCe,oCe=Uu,aCe=iQ,ACe=DA,lCe="[object Arguments]",cCe="[object Array]",uCe="[object Boolean]",fCe="[object Date]",dCe="[object Error]",hCe="[object Function]",pCe="[object Map]",gCe="[object Number]",mCe="[object Object]",vCe="[object RegExp]",yCe="[object Set]",BCe="[object String]",wCe="[object WeakMap]",CCe="[object ArrayBuffer]",bCe="[object DataView]",xCe="[object Float32Array]",ICe="[object Float64Array]",FCe="[object Int8Array]",ECe="[object Int16Array]",UCe="[object Int32Array]",_Ce="[object Uint8Array]",SCe="[object Uint8ClampedArray]",QCe="[object Uint16Array]",RCe="[object Uint32Array]",cn={};cn[xCe]=cn[ICe]=cn[FCe]=cn[ECe]=cn[UCe]=cn[_Ce]=cn[SCe]=cn[QCe]=cn[RCe]=!0;cn[lCe]=cn[cCe]=cn[CCe]=cn[uCe]=cn[bCe]=cn[fCe]=cn[dCe]=cn[hCe]=cn[pCe]=cn[gCe]=cn[mCe]=cn[vCe]=cn[yCe]=cn[BCe]=cn[wCe]=!1;function MCe(n){return ACe(n)&&aCe(n.length)&&!!cn[oCe(n)]}var TCe=MCe;function NCe(n){return function(e){return n(e)}}var sQ=NCe,Ch={},kCe={get exports(){return Ch},set exports(n){Ch=n}};(function(n,e){var t=R4,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s&&t.process,a=function(){try{var A=i&&i.require&&i.require("util").types;return A||o&&o.binding&&o.binding("util")}catch{}}();n.exports=a})(kCe,Ch);var DCe=TCe,VCe=sQ,DV=Ch,VV=DV&&DV.isTypedArray,LCe=VV?VCe(VV):DCe,D4=LCe,PCe=Owe,WCe=N4,OCe=Lo,ZCe=wh,GCe=k4,JCe=D4,HCe=Object.prototype,zCe=HCe.hasOwnProperty;function XCe(n,e){var t=OCe(n),r=!t&&WCe(n),i=!t&&!r&&ZCe(n),s=!t&&!r&&!i&&JCe(n),o=t||r||i||s,a=o?PCe(n.length,String):[],A=a.length;for(var l in n)(e||zCe.call(n,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||GCe(l,A)))&&a.push(l);return a}var V4=XCe,YCe=Object.prototype;function KCe(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||YCe;return n===t}var oQ=KCe;function jCe(n,e){return function(t){return n(e(t))}}var L4=jCe,$Ce=L4,qCe=$Ce(Object.keys,Object),ebe=qCe,tbe=oQ,nbe=ebe,rbe=Object.prototype,ibe=rbe.hasOwnProperty;function sbe(n){if(!tbe(n))return nbe(n);var e=[];for(var t in Object(n))ibe.call(n,t)&&t!="constructor"&&e.push(t);return e}var obe=sbe;function abe(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var jh=abe,Abe=Uu,lbe=jh,cbe="[object AsyncFunction]",ube="[object Function]",fbe="[object GeneratorFunction]",dbe="[object Proxy]";function hbe(n){if(!lbe(n))return!1;var e=Abe(n);return e==ube||e==fbe||e==cbe||e==dbe}var P4=hbe,pbe=P4,gbe=iQ;function mbe(n){return n!=null&&gbe(n.length)&&!pbe(n)}var gb=mbe,vbe=V4,ybe=obe,Bbe=gb;function wbe(n){return Bbe(n)?vbe(n):ybe(n)}var B0=wbe,Cbe=Pwe,bbe=B0;function xbe(n,e){return n&&Cbe(n,e,bbe)}var W4=xbe;function Ibe(n){return n}var O4=Ibe,Fbe=O4;function Ebe(n){return typeof n=="function"?n:Fbe}var Ube=Ebe,_be=W4,Sbe=Ube;function Qbe(n,e){return n&&_be(n,Sbe(e))}var aQ=Qbe,Rbe=L4,Mbe=Rbe(Object.getPrototypeOf,Object),AQ=Mbe,Tbe=Uu,Nbe=AQ,kbe=DA,Dbe="[object Object]",Vbe=Function.prototype,Lbe=Object.prototype,Z4=Vbe.toString,Pbe=Lbe.hasOwnProperty,Wbe=Z4.call(Object);function Obe(n){if(!kbe(n)||Tbe(n)!=Dbe)return!1;var e=Nbe(n);if(e===null)return!0;var t=Pbe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Z4.call(t)==Wbe}var Zbe=Obe;function Gbe(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var G4=Gbe;function Jbe(){this.__data__=[],this.size=0}var Hbe=Jbe;function zbe(n,e){return n===e||n!==n&&e!==e}var lQ=zbe,Xbe=lQ;function Ybe(n,e){for(var t=n.length;t--;)if(Xbe(n[t][0],e))return t;return-1}var mb=Ybe,Kbe=mb,jbe=Array.prototype,$be=jbe.splice;function qbe(n){var e=this.__data__,t=Kbe(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():$be.call(e,t,1),--this.size,!0}var exe=qbe,txe=mb;function nxe(n){var e=this.__data__,t=txe(e,n);return t<0?void 0:e[t][1]}var rxe=nxe,ixe=mb;function sxe(n){return ixe(this.__data__,n)>-1}var oxe=sxe,axe=mb;function Axe(n,e){var t=this.__data__,r=axe(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var lxe=Axe,cxe=Hbe,uxe=exe,fxe=rxe,dxe=oxe,hxe=lxe;function $h(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}$h.prototype.clear=cxe;$h.prototype.delete=uxe;$h.prototype.get=fxe;$h.prototype.has=dxe;$h.prototype.set=hxe;var vb=$h,pxe=vb;function gxe(){this.__data__=new pxe,this.size=0}var mxe=gxe;function vxe(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var yxe=vxe;function Bxe(n){return this.__data__.get(n)}var wxe=Bxe;function Cxe(n){return this.__data__.has(n)}var bxe=Cxe,xxe=ka,Ixe=xxe["__core-js_shared__"],Fxe=Ixe,Q1=Fxe,LV=function(){var n=/[^.]+$/.exec(Q1&&Q1.keys&&Q1.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Exe(n){return!!LV&&LV in n}var Uxe=Exe,_xe=Function.prototype,Sxe=_xe.toString;function Qxe(n){if(n!=null){try{return Sxe.call(n)}catch{}try{return n+""}catch{}}return""}var J4=Qxe,Rxe=P4,Mxe=Uxe,Txe=jh,Nxe=J4,kxe=/[\\^$.*+?()[\]{}|]/g,Dxe=/^\[object .+?Constructor\]$/,Vxe=Function.prototype,Lxe=Object.prototype,Pxe=Vxe.toString,Wxe=Lxe.hasOwnProperty,Oxe=RegExp("^"+Pxe.call(Wxe).replace(kxe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Zxe(n){if(!Txe(n)||Mxe(n))return!1;var e=Rxe(n)?Oxe:Dxe;return e.test(Nxe(n))}var Gxe=Zxe;function Jxe(n,e){return n==null?void 0:n[e]}var Hxe=Jxe,zxe=Gxe,Xxe=Hxe;function Yxe(n,e){var t=Xxe(n,e);return zxe(t)?t:void 0}var _u=Yxe,Kxe=_u,jxe=ka,$xe=Kxe(jxe,"Map"),cQ=$xe,qxe=_u,eIe=qxe(Object,"create"),yb=eIe,PV=yb;function tIe(){this.__data__=PV?PV(null):{},this.size=0}var nIe=tIe;function rIe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var iIe=rIe,sIe=yb,oIe="__lodash_hash_undefined__",aIe=Object.prototype,AIe=aIe.hasOwnProperty;function lIe(n){var e=this.__data__;if(sIe){var t=e[n];return t===oIe?void 0:t}return AIe.call(e,n)?e[n]:void 0}var cIe=lIe,uIe=yb,fIe=Object.prototype,dIe=fIe.hasOwnProperty;function hIe(n){var e=this.__data__;return uIe?e[n]!==void 0:dIe.call(e,n)}var pIe=hIe,gIe=yb,mIe="__lodash_hash_undefined__";function vIe(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=gIe&&e===void 0?mIe:e,this}var yIe=vIe,BIe=nIe,wIe=iIe,CIe=cIe,bIe=pIe,xIe=yIe;function qh(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}qh.prototype.clear=BIe;qh.prototype.delete=wIe;qh.prototype.get=CIe;qh.prototype.has=bIe;qh.prototype.set=xIe;var IIe=qh,WV=IIe,FIe=vb,EIe=cQ;function UIe(){this.size=0,this.__data__={hash:new WV,map:new(EIe||FIe),string:new WV}}var _Ie=UIe;function SIe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var QIe=SIe,RIe=QIe;function MIe(n,e){var t=n.__data__;return RIe(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Bb=MIe,TIe=Bb;function NIe(n){var e=TIe(this,n).delete(n);return this.size-=e?1:0,e}var kIe=NIe,DIe=Bb;function VIe(n){return DIe(this,n).get(n)}var LIe=VIe,PIe=Bb;function WIe(n){return PIe(this,n).has(n)}var OIe=WIe,ZIe=Bb;function GIe(n,e){var t=ZIe(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var JIe=GIe,HIe=_Ie,zIe=kIe,XIe=LIe,YIe=OIe,KIe=JIe;function ep(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ep.prototype.clear=HIe;ep.prototype.delete=zIe;ep.prototype.get=XIe;ep.prototype.has=YIe;ep.prototype.set=KIe;var uQ=ep,jIe=vb,$Ie=cQ,qIe=uQ,e1e=200;function t1e(n,e){var t=this.__data__;if(t instanceof jIe){var r=t.__data__;if(!$Ie||r.length<e1e-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new qIe(r)}return t.set(n,e),this.size=t.size,this}var n1e=t1e,r1e=vb,i1e=mxe,s1e=yxe,o1e=wxe,a1e=bxe,A1e=n1e;function tp(n){var e=this.__data__=new r1e(n);this.size=e.size}tp.prototype.clear=i1e;tp.prototype.delete=s1e;tp.prototype.get=o1e;tp.prototype.has=a1e;tp.prototype.set=A1e;var fQ=tp,l1e="__lodash_hash_undefined__";function c1e(n){return this.__data__.set(n,l1e),this}var u1e=c1e;function f1e(n){return this.__data__.has(n)}var d1e=f1e,h1e=uQ,p1e=u1e,g1e=d1e;function qw(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new h1e;++e<t;)this.add(n[e])}qw.prototype.add=qw.prototype.push=p1e;qw.prototype.has=g1e;var m1e=qw;function v1e(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}var y1e=v1e;function B1e(n,e){return n.has(e)}var w1e=B1e,C1e=m1e,b1e=y1e,x1e=w1e,I1e=1,F1e=2;function E1e(n,e,t,r,i,s){var o=t&I1e,a=n.length,A=e.length;if(a!=A&&!(o&&A>a))return!1;var l=s.get(n),c=s.get(e);if(l&&c)return l==e&&c==n;var u=-1,f=!0,d=t&F1e?new C1e:void 0;for(s.set(n,e),s.set(e,n);++u<a;){var h=n[u],p=e[u];if(r)var m=o?r(p,h,u,e,n,s):r(h,p,u,n,e,s);if(m!==void 0){if(m)continue;f=!1;break}if(d){if(!b1e(e,function(g,v){if(!x1e(d,v)&&(h===g||i(h,g,t,r,s)))return d.push(v)})){f=!1;break}}else if(!(h===p||i(h,p,t,r,s))){f=!1;break}}return s.delete(n),s.delete(e),f}var H4=E1e,U1e=ka,_1e=U1e.Uint8Array,z4=_1e;function S1e(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}var Q1e=S1e;function R1e(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var M1e=R1e,OV=y0,ZV=z4,T1e=lQ,N1e=H4,k1e=Q1e,D1e=M1e,V1e=1,L1e=2,P1e="[object Boolean]",W1e="[object Date]",O1e="[object Error]",Z1e="[object Map]",G1e="[object Number]",J1e="[object RegExp]",H1e="[object Set]",z1e="[object String]",X1e="[object Symbol]",Y1e="[object ArrayBuffer]",K1e="[object DataView]",GV=OV?OV.prototype:void 0,R1=GV?GV.valueOf:void 0;function j1e(n,e,t,r,i,s,o){switch(t){case K1e:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case Y1e:return!(n.byteLength!=e.byteLength||!s(new ZV(n),new ZV(e)));case P1e:case W1e:case G1e:return T1e(+n,+e);case O1e:return n.name==e.name&&n.message==e.message;case J1e:case z1e:return n==e+"";case Z1e:var a=k1e;case H1e:var A=r&V1e;if(a||(a=D1e),n.size!=e.size&&!A)return!1;var l=o.get(n);if(l)return l==e;r|=L1e,o.set(n,e);var c=N1e(a(n),a(e),r,i,s,o);return o.delete(n),c;case X1e:if(R1)return R1.call(n)==R1.call(e)}return!1}var $1e=j1e;function q1e(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var X4=q1e,eFe=X4,tFe=Lo;function nFe(n,e,t){var r=e(n);return tFe(n)?r:eFe(r,t(n))}var Y4=nFe;function rFe(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}var iFe=rFe;function sFe(){return[]}var K4=sFe,oFe=iFe,aFe=K4,AFe=Object.prototype,lFe=AFe.propertyIsEnumerable,JV=Object.getOwnPropertySymbols,cFe=JV?function(n){return n==null?[]:(n=Object(n),oFe(JV(n),function(e){return lFe.call(n,e)}))}:aFe,dQ=cFe,uFe=Y4,fFe=dQ,dFe=B0;function hFe(n){return uFe(n,dFe,fFe)}var j4=hFe,HV=j4,pFe=1,gFe=Object.prototype,mFe=gFe.hasOwnProperty;function vFe(n,e,t,r,i,s){var o=t&pFe,a=HV(n),A=a.length,l=HV(e),c=l.length;if(A!=c&&!o)return!1;for(var u=A;u--;){var f=a[u];if(!(o?f in e:mFe.call(e,f)))return!1}var d=s.get(n),h=s.get(e);if(d&&h)return d==e&&h==n;var p=!0;s.set(n,e),s.set(e,n);for(var m=o;++u<A;){f=a[u];var g=n[f],v=e[f];if(r)var y=o?r(v,g,f,e,n,s):r(g,v,f,n,e,s);if(!(y===void 0?g===v||i(g,v,t,r,s):y)){p=!1;break}m||(m=f=="constructor")}if(p&&!m){var w=n.constructor,C=e.constructor;w!=C&&"constructor"in n&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof C=="function"&&C instanceof C)&&(p=!1)}return s.delete(n),s.delete(e),p}var yFe=vFe,BFe=_u,wFe=ka,CFe=BFe(wFe,"DataView"),bFe=CFe,xFe=_u,IFe=ka,FFe=xFe(IFe,"Promise"),EFe=FFe,UFe=_u,_Fe=ka,SFe=UFe(_Fe,"Set"),QFe=SFe,RFe=_u,MFe=ka,TFe=RFe(MFe,"WeakMap"),NFe=TFe,FU=bFe,EU=cQ,UU=EFe,_U=QFe,SU=NFe,$4=Uu,np=J4,zV="[object Map]",kFe="[object Object]",XV="[object Promise]",YV="[object Set]",KV="[object WeakMap]",jV="[object DataView]",DFe=np(FU),VFe=np(EU),LFe=np(UU),PFe=np(_U),WFe=np(SU),Sc=$4;(FU&&Sc(new FU(new ArrayBuffer(1)))!=jV||EU&&Sc(new EU)!=zV||UU&&Sc(UU.resolve())!=XV||_U&&Sc(new _U)!=YV||SU&&Sc(new SU)!=KV)&&(Sc=function(n){var e=$4(n),t=e==kFe?n.constructor:void 0,r=t?np(t):"";if(r)switch(r){case DFe:return jV;case VFe:return zV;case LFe:return XV;case PFe:return YV;case WFe:return KV}return e});var wb=Sc,M1=fQ,OFe=H4,ZFe=$1e,GFe=yFe,$V=wb,qV=Lo,eL=wh,JFe=D4,HFe=1,tL="[object Arguments]",nL="[object Array]",wy="[object Object]",zFe=Object.prototype,rL=zFe.hasOwnProperty;function XFe(n,e,t,r,i,s){var o=qV(n),a=qV(e),A=o?nL:$V(n),l=a?nL:$V(e);A=A==tL?wy:A,l=l==tL?wy:l;var c=A==wy,u=l==wy,f=A==l;if(f&&eL(n)){if(!eL(e))return!1;o=!0,c=!1}if(f&&!c)return s||(s=new M1),o||JFe(n)?OFe(n,e,t,r,i,s):ZFe(n,e,A,t,r,i,s);if(!(t&HFe)){var d=c&&rL.call(n,"__wrapped__"),h=u&&rL.call(e,"__wrapped__");if(d||h){var p=d?n.value():n,m=h?e.value():e;return s||(s=new M1),i(p,m,t,r,s)}}return f?(s||(s=new M1),GFe(n,e,t,r,i,s)):!1}var YFe=XFe,KFe=YFe,iL=DA;function q4(n,e,t,r,i){return n===e?!0:n==null||e==null||!iL(n)&&!iL(e)?n!==n&&e!==e:KFe(n,e,t,r,q4,i)}var e5=q4,jFe=fQ,$Fe=e5,qFe=1,eEe=2;function tEe(n,e,t,r){var i=t.length,s=i,o=!r;if(n==null)return!s;for(n=Object(n);i--;){var a=t[i];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<s;){a=t[i];var A=a[0],l=n[A],c=a[1];if(o&&a[2]){if(l===void 0&&!(A in n))return!1}else{var u=new jFe;if(r)var f=r(l,c,A,n,e,u);if(!(f===void 0?$Fe(c,l,qFe|eEe,r,u):f))return!1}}return!0}var nEe=tEe,rEe=jh;function iEe(n){return n===n&&!rEe(n)}var t5=iEe,sEe=t5,oEe=B0;function aEe(n){for(var e=oEe(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,sEe(i)]}return e}var AEe=aEe;function lEe(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}var n5=lEe,cEe=nEe,uEe=AEe,fEe=n5;function dEe(n){var e=uEe(n);return e.length==1&&e[0][2]?fEe(e[0][0],e[0][1]):function(t){return t===n||cEe(t,n,e)}}var hEe=dEe,pEe=Uu,gEe=DA,mEe="[object Symbol]";function vEe(n){return typeof n=="symbol"||gEe(n)&&pEe(n)==mEe}var hQ=vEe,yEe=Lo,BEe=hQ,wEe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,CEe=/^\w*$/;function bEe(n,e){if(yEe(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||BEe(n)?!0:CEe.test(n)||!wEe.test(n)||e!=null&&n in Object(e)}var pQ=bEe,r5=uQ,xEe="Expected a function";function gQ(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(xEe);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(gQ.Cache||r5),t}gQ.Cache=r5;var IEe=gQ,FEe=IEe,EEe=500;function UEe(n){var e=FEe(n,function(r){return t.size===EEe&&t.clear(),r}),t=e.cache;return e}var _Ee=UEe,SEe=_Ee,QEe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,REe=/\\(\\)?/g,MEe=SEe(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(QEe,function(t,r,i,s){e.push(i?s.replace(REe,"$1"):r||t)}),e}),TEe=MEe,sL=y0,NEe=G4,kEe=Lo,DEe=hQ,VEe=1/0,oL=sL?sL.prototype:void 0,aL=oL?oL.toString:void 0;function i5(n){if(typeof n=="string")return n;if(kEe(n))return NEe(n,i5)+"";if(DEe(n))return aL?aL.call(n):"";var e=n+"";return e=="0"&&1/n==-VEe?"-0":e}var LEe=i5,PEe=LEe;function WEe(n){return n==null?"":PEe(n)}var OEe=WEe,ZEe=Lo,GEe=pQ,JEe=TEe,HEe=OEe;function zEe(n,e){return ZEe(n)?n:GEe(n,e)?[n]:JEe(HEe(n))}var s5=zEe,XEe=hQ,YEe=1/0;function KEe(n){if(typeof n=="string"||XEe(n))return n;var e=n+"";return e=="0"&&1/n==-YEe?"-0":e}var Cb=KEe,jEe=s5,$Ee=Cb;function qEe(n,e){e=jEe(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[$Ee(e[t++])];return t&&t==r?n:void 0}var o5=qEe,eUe=o5;function tUe(n,e,t){var r=n==null?void 0:eUe(n,e);return r===void 0?t:r}var nUe=tUe;function rUe(n,e){return n!=null&&e in Object(n)}var iUe=rUe,sUe=s5,oUe=N4,aUe=Lo,AUe=k4,lUe=iQ,cUe=Cb;function uUe(n,e,t){e=sUe(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=cUe(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&lUe(i)&&AUe(o,i)&&(aUe(n)||oUe(n)))}var fUe=uUe,dUe=iUe,hUe=fUe;function pUe(n,e){return n!=null&&hUe(n,e,dUe)}var gUe=pUe,mUe=e5,vUe=nUe,yUe=gUe,BUe=pQ,wUe=t5,CUe=n5,bUe=Cb,xUe=1,IUe=2;function FUe(n,e){return BUe(n)&&wUe(e)?CUe(bUe(n),e):function(t){var r=vUe(t,n);return r===void 0&&r===e?yUe(t,n):mUe(e,r,xUe|IUe)}}var EUe=FUe;function UUe(n){return function(e){return e==null?void 0:e[n]}}var _Ue=UUe,SUe=o5;function QUe(n){return function(e){return SUe(e,n)}}var RUe=QUe,MUe=_Ue,TUe=RUe,NUe=pQ,kUe=Cb;function DUe(n){return NUe(n)?MUe(kUe(n)):TUe(n)}var VUe=DUe,LUe=hEe,PUe=EUe,WUe=O4,OUe=Lo,ZUe=VUe;function GUe(n){return typeof n=="function"?n:n==null?WUe:typeof n=="object"?OUe(n)?PUe(n[0],n[1]):LUe(n):ZUe(n)}var JUe=GUe,HUe=gb;function zUe(n,e){return function(t,r){if(t==null)return t;if(!HUe(t))return n(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return t}}var XUe=zUe,YUe=W4,KUe=XUe,jUe=KUe(YUe),$Ue=jUe,qUe=$Ue,e_e=gb;function t_e(n,e){var t=-1,r=e_e(n)?Array(n.length):[];return qUe(n,function(i,s,o){r[++t]=e(i,s,o)}),r}var n_e=t_e,r_e=G4,i_e=JUe,s_e=n_e,o_e=Lo;function a_e(n,e){var t=o_e(n)?r_e:s_e;return t(n,i_e(e))}var A_e=a_e;Object.defineProperty(v0,"__esModule",{value:!0});v0.flattenNames=void 0;var l_e=Nwe,c_e=bb(l_e),u_e=aQ,f_e=bb(u_e),d_e=Zbe,h_e=bb(d_e),p_e=A_e,g_e=bb(p_e);function bb(n){return n&&n.__esModule?n:{default:n}}var m_e=v0.flattenNames=function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[];return(0,g_e.default)(e,function(r){Array.isArray(r)?n(r).map(function(i){return t.push(i)}):(0,h_e.default)(r)?(0,f_e.default)(r,function(i,s){i===!0&&t.push(s),t.push(s+"-"+i)}):(0,c_e.default)(r)&&t.push(r)}),t};v0.default=m_e;var w0={};function v_e(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var y_e=v_e,B_e=_u,w_e=function(){try{var n=B_e(Object,"defineProperty");return n({},"",{}),n}catch{}}(),C_e=w_e,AL=C_e;function b_e(n,e,t){e=="__proto__"&&AL?AL(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var a5=b_e,x_e=a5,I_e=lQ,F_e=Object.prototype,E_e=F_e.hasOwnProperty;function U_e(n,e,t){var r=n[e];(!(E_e.call(n,e)&&I_e(r,t))||t===void 0&&!(e in n))&&x_e(n,e,t)}var A5=U_e,__e=A5,S_e=a5;function Q_e(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],A=r?r(t[a],n[a],a,t,n):void 0;A===void 0&&(A=n[a]),i?S_e(t,a,A):__e(t,a,A)}return t}var xb=Q_e,R_e=xb,M_e=B0;function T_e(n,e){return n&&R_e(e,M_e(e),n)}var N_e=T_e;function k_e(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var D_e=k_e,V_e=jh,L_e=oQ,P_e=D_e,W_e=Object.prototype,O_e=W_e.hasOwnProperty;function Z_e(n){if(!V_e(n))return P_e(n);var e=L_e(n),t=[];for(var r in n)r=="constructor"&&(e||!O_e.call(n,r))||t.push(r);return t}var G_e=Z_e,J_e=V4,H_e=G_e,z_e=gb;function X_e(n){return z_e(n)?J_e(n,!0):H_e(n)}var mQ=X_e,Y_e=xb,K_e=mQ;function j_e(n,e){return n&&Y_e(e,K_e(e),n)}var $_e=j_e,eC={},q_e={get exports(){return eC},set exports(n){eC=n}};(function(n,e){var t=ka,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s?t.Buffer:void 0,a=o?o.allocUnsafe:void 0;function A(l,c){if(c)return l.slice();var u=l.length,f=a?a(u):new l.constructor(u);return l.copy(f),f}n.exports=A})(q_e,eC);function eSe(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var tSe=eSe,nSe=xb,rSe=dQ;function iSe(n,e){return nSe(n,rSe(n),e)}var sSe=iSe,oSe=X4,aSe=AQ,ASe=dQ,lSe=K4,cSe=Object.getOwnPropertySymbols,uSe=cSe?function(n){for(var e=[];n;)oSe(e,ASe(n)),n=aSe(n);return e}:lSe,l5=uSe,fSe=xb,dSe=l5;function hSe(n,e){return fSe(n,dSe(n),e)}var pSe=hSe,gSe=Y4,mSe=l5,vSe=mQ;function ySe(n){return gSe(n,vSe,mSe)}var BSe=ySe,wSe=Object.prototype,CSe=wSe.hasOwnProperty;function bSe(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&CSe.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var xSe=bSe,lL=z4;function ISe(n){var e=new n.constructor(n.byteLength);return new lL(e).set(new lL(n)),e}var vQ=ISe,FSe=vQ;function ESe(n,e){var t=e?FSe(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var USe=ESe,_Se=/\w*$/;function SSe(n){var e=new n.constructor(n.source,_Se.exec(n));return e.lastIndex=n.lastIndex,e}var QSe=SSe,cL=y0,uL=cL?cL.prototype:void 0,fL=uL?uL.valueOf:void 0;function RSe(n){return fL?Object(fL.call(n)):{}}var MSe=RSe,TSe=vQ;function NSe(n,e){var t=e?TSe(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var kSe=NSe,DSe=vQ,VSe=USe,LSe=QSe,PSe=MSe,WSe=kSe,OSe="[object Boolean]",ZSe="[object Date]",GSe="[object Map]",JSe="[object Number]",HSe="[object RegExp]",zSe="[object Set]",XSe="[object String]",YSe="[object Symbol]",KSe="[object ArrayBuffer]",jSe="[object DataView]",$Se="[object Float32Array]",qSe="[object Float64Array]",eQe="[object Int8Array]",tQe="[object Int16Array]",nQe="[object Int32Array]",rQe="[object Uint8Array]",iQe="[object Uint8ClampedArray]",sQe="[object Uint16Array]",oQe="[object Uint32Array]";function aQe(n,e,t){var r=n.constructor;switch(e){case KSe:return DSe(n);case OSe:case ZSe:return new r(+n);case jSe:return VSe(n,t);case $Se:case qSe:case eQe:case tQe:case nQe:case rQe:case iQe:case sQe:case oQe:return WSe(n,t);case GSe:return new r;case JSe:case XSe:return new r(n);case HSe:return LSe(n);case zSe:return new r;case YSe:return PSe(n)}}var AQe=aQe,lQe=jh,dL=Object.create,cQe=function(){function n(){}return function(e){if(!lQe(e))return{};if(dL)return dL(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),uQe=cQe,fQe=uQe,dQe=AQ,hQe=oQ;function pQe(n){return typeof n.constructor=="function"&&!hQe(n)?fQe(dQe(n)):{}}var gQe=pQe,mQe=wb,vQe=DA,yQe="[object Map]";function BQe(n){return vQe(n)&&mQe(n)==yQe}var wQe=BQe,CQe=wQe,bQe=sQ,hL=Ch,pL=hL&&hL.isMap,xQe=pL?bQe(pL):CQe,IQe=xQe,FQe=wb,EQe=DA,UQe="[object Set]";function _Qe(n){return EQe(n)&&FQe(n)==UQe}var SQe=_Qe,QQe=SQe,RQe=sQ,gL=Ch,mL=gL&&gL.isSet,MQe=mL?RQe(mL):QQe,TQe=MQe,NQe=fQ,kQe=y_e,DQe=A5,VQe=N_e,LQe=$_e,PQe=eC,WQe=tSe,OQe=sSe,ZQe=pSe,GQe=j4,JQe=BSe,HQe=wb,zQe=xSe,XQe=AQe,YQe=gQe,KQe=Lo,jQe=wh,$Qe=IQe,qQe=jh,eRe=TQe,tRe=B0,nRe=mQ,rRe=1,iRe=2,sRe=4,c5="[object Arguments]",oRe="[object Array]",aRe="[object Boolean]",ARe="[object Date]",lRe="[object Error]",u5="[object Function]",cRe="[object GeneratorFunction]",uRe="[object Map]",fRe="[object Number]",f5="[object Object]",dRe="[object RegExp]",hRe="[object Set]",pRe="[object String]",gRe="[object Symbol]",mRe="[object WeakMap]",vRe="[object ArrayBuffer]",yRe="[object DataView]",BRe="[object Float32Array]",wRe="[object Float64Array]",CRe="[object Int8Array]",bRe="[object Int16Array]",xRe="[object Int32Array]",IRe="[object Uint8Array]",FRe="[object Uint8ClampedArray]",ERe="[object Uint16Array]",URe="[object Uint32Array]",sn={};sn[c5]=sn[oRe]=sn[vRe]=sn[yRe]=sn[aRe]=sn[ARe]=sn[BRe]=sn[wRe]=sn[CRe]=sn[bRe]=sn[xRe]=sn[uRe]=sn[fRe]=sn[f5]=sn[dRe]=sn[hRe]=sn[pRe]=sn[gRe]=sn[IRe]=sn[FRe]=sn[ERe]=sn[URe]=!0;sn[lRe]=sn[u5]=sn[mRe]=!1;function mB(n,e,t,r,i,s){var o,a=e&rRe,A=e&iRe,l=e&sRe;if(t&&(o=i?t(n,r,i,s):t(n)),o!==void 0)return o;if(!qQe(n))return n;var c=KQe(n);if(c){if(o=zQe(n),!a)return WQe(n,o)}else{var u=HQe(n),f=u==u5||u==cRe;if(jQe(n))return PQe(n,a);if(u==f5||u==c5||f&&!i){if(o=A||f?{}:YQe(n),!a)return A?ZQe(n,LQe(o,n)):OQe(n,VQe(o,n))}else{if(!sn[u])return i?n:{};o=XQe(n,u,a)}}s||(s=new NQe);var d=s.get(n);if(d)return d;s.set(n,o),eRe(n)?n.forEach(function(m){o.add(mB(m,e,t,m,n,s))}):$Qe(n)&&n.forEach(function(m,g){o.set(g,mB(m,e,t,g,n,s))});var h=l?A?JQe:GQe:A?nRe:tRe,p=c?void 0:h(n);return kQe(p||n,function(m,g){p&&(g=m,m=n[g]),DQe(o,g,mB(m,e,t,g,n,s))}),o}var _Re=mB,SRe=_Re,QRe=1,RRe=4;function MRe(n){return SRe(n,QRe|RRe)}var TRe=MRe;Object.defineProperty(w0,"__esModule",{value:!0});w0.mergeClasses=void 0;var NRe=aQ,kRe=d5(NRe),DRe=TRe,VRe=d5(DRe),LRe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function d5(n){return n&&n.__esModule?n:{default:n}}var PRe=w0.mergeClasses=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=e.default&&(0,VRe.default)(e.default)||{};return t.map(function(i){var s=e[i];return s&&(0,kRe.default)(s,function(o,a){r[a]||(r[a]={}),r[a]=LRe({},r[a],s[a])}),i}),r};w0.default=PRe;var C0={};Object.defineProperty(C0,"__esModule",{value:!0});C0.autoprefix=void 0;var WRe=aQ,vL=ZRe(WRe),ORe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function ZRe(n){return n&&n.__esModule?n:{default:n}}var GRe={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var r=t[e];return r||{extend:e}}},JRe=C0.autoprefix=function(e){var t={};return(0,vL.default)(e,function(r,i){var s={};(0,vL.default)(r,function(o,a){var A=GRe[a];A?s=ORe({},s,A(o)):s[a]=o}),t[i]=s}),t};C0.default=JRe;var b0={};Object.defineProperty(b0,"__esModule",{value:!0});b0.hover=void 0;var HRe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zRe=pe,T1=XRe(zRe);function XRe(n){return n&&n.__esModule?n:{default:n}}function YRe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function yL(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function KRe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var jRe=b0.hover=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){KRe(i,r);function i(){var s,o,a,A;YRe(this,i);for(var l=arguments.length,c=Array(l),u=0;u<l;u++)c[u]=arguments[u];return A=(o=(a=yL(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(c))),a),a.state={hover:!1},a.handleMouseOver=function(){return a.setState({hover:!0})},a.handleMouseOut=function(){return a.setState({hover:!1})},a.render=function(){return T1.default.createElement(t,{onMouseOver:a.handleMouseOver,onMouseOut:a.handleMouseOut},T1.default.createElement(e,HRe({},a.props,a.state)))},o),yL(a,A)}return i}(T1.default.Component)};b0.default=jRe;var x0={};Object.defineProperty(x0,"__esModule",{value:!0});x0.active=void 0;var $Re=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qRe=pe,N1=e2e(qRe);function e2e(n){return n&&n.__esModule?n:{default:n}}function t2e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function BL(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function n2e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var r2e=x0.active=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){n2e(i,r);function i(){var s,o,a,A;t2e(this,i);for(var l=arguments.length,c=Array(l),u=0;u<l;u++)c[u]=arguments[u];return A=(o=(a=BL(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(c))),a),a.state={active:!1},a.handleMouseDown=function(){return a.setState({active:!0})},a.handleMouseUp=function(){return a.setState({active:!1})},a.render=function(){return N1.default.createElement(t,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp},N1.default.createElement(e,$Re({},a.props,a.state)))},o),BL(a,A)}return i}(N1.default.Component)};x0.default=r2e;var yQ={};Object.defineProperty(yQ,"__esModule",{value:!0});var i2e=function(e,t){var r={},i=function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[o]=a};return e===0&&i("first-child"),e===t-1&&i("last-child"),(e===0||e%2===0)&&i("even"),Math.abs(e%2)===1&&i("odd"),i("nth-child",e),r};yQ.default=i2e;Object.defineProperty(Ts,"__esModule",{value:!0});Ts.ReactCSS=Ts.loop=Ts.handleActive=BQ=Ts.handleHover=Ts.hover=void 0;var s2e=v0,o2e=rp(s2e),a2e=w0,A2e=rp(a2e),l2e=C0,c2e=rp(l2e),u2e=b0,h5=rp(u2e),f2e=x0,d2e=rp(f2e),h2e=yQ,p2e=rp(h2e);function rp(n){return n&&n.__esModule?n:{default:n}}Ts.hover=h5.default;var BQ=Ts.handleHover=h5.default;Ts.handleActive=d2e.default;Ts.loop=p2e.default;var g2e=Ts.ReactCSS=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var s=(0,o2e.default)(r),o=(0,A2e.default)(e,s);return(0,c2e.default)(o)},at=Ts.default=g2e,m2e=function(e,t,r,i,s){var o=s.clientWidth,a=s.clientHeight,A=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=A-(s.getBoundingClientRect().left+window.pageXOffset),u=l-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var f=void 0;if(u<0?f=0:u>a?f=1:f=Math.round(u*100/a)/100,t.a!==f)return{h:t.h,s:t.s,l:t.l,a:f,source:"rgb"}}else{var d=void 0;if(c<0?d=0:c>o?d=1:d=Math.round(c*100/o)/100,i!==d)return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}return null},k1={},v2e=function(e,t,r,i){if(typeof document>"u"&&!i)return null;var s=i?new i:document.createElement("canvas");s.width=r*2,s.height=r*2;var o=s.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,s.width,s.height),o.fillStyle=t,o.fillRect(0,0,r,r),o.translate(r,r),o.fillRect(0,0,r,r),s.toDataURL()):null},y2e=function(e,t,r,i){var s=e+"-"+t+"-"+r+(i?"-server":"");if(k1[s])return k1[s];var o=v2e(e,t,r,i);return k1[s]=o,o},wL=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ip=function(e){var t=e.white,r=e.grey,i=e.size,s=e.renderers,o=e.borderRadius,a=e.boxShadow,A=e.children,l=at({default:{grid:{borderRadius:o,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+y2e(t,r,i,s.canvas)+") center left"}}});return pe.isValidElement(A)?Y.cloneElement(A,wL({},A.props,{style:wL({},A.props.style,l.grid)})):Y.createElement("div",{style:l.grid})};ip.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var B2e=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},w2e=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function C2e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function CL(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function b2e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var wQ=function(n){b2e(e,n);function e(){var t,r,i,s;C2e(this,e);for(var o=arguments.length,a=Array(o),A=0;A<o;A++)a[A]=arguments[A];return s=(r=(i=CL(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i),i.handleChange=function(l){var c=m2e(l,i.props.hsl,i.props.direction,i.props.a,i.container);c&&typeof i.props.onChange=="function"&&i.props.onChange(c,l)},i.handleMouseDown=function(l){i.handleChange(l),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},r),CL(i,s)}return w2e(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var r=this,i=this.props.rgb,s=at({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:B2e({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return Y.createElement("div",{style:s.alpha},Y.createElement("div",{style:s.checkboard},Y.createElement(ip,{renderers:this.props.renderers})),Y.createElement("div",{style:s.gradient}),Y.createElement("div",{style:s.container,ref:function(a){return r.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Y.createElement("div",{style:s.pointer},this.props.pointer?Y.createElement(this.props.pointer,this.props):Y.createElement("div",{style:s.slider}))))}}]),e}(pe.PureComponent||pe.Component),x2e=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function I2e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function F2e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function E2e(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function U2e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var _2e=1,p5=38,S2e=40,Q2e=[p5,S2e],R2e=function(e){return Q2e.indexOf(e)>-1},M2e=function(e){return Number(String(e).replace(/%/g,""))},T2e=1,Qt=function(n){U2e(e,n);function e(t){F2e(this,e);var r=E2e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(i){r.setUpdatedValue(i.target.value,i)},r.handleKeyDown=function(i){var s=M2e(i.target.value);if(!isNaN(s)&&R2e(i.keyCode)){var o=r.getArrowOffset(),a=i.keyCode===p5?s+o:s-o;r.setUpdatedValue(a,i)}},r.handleDrag=function(i){if(r.props.dragLabel){var s=Math.round(r.props.value+i.movementX);s>=0&&s<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(s),i)}},r.handleMouseDown=function(i){r.props.dragLabel&&(i.preventDefault(),r.handleDrag(i),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(t.value).toUpperCase(),blurValue:String(t.value).toUpperCase()},r.inputId="rc-editable-input-"+T2e++,r}return x2e(e,[{key:"componentDidUpdate",value:function(r,i){this.props.value!==this.state.value&&(r.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(r){return I2e({},this.props.label,r)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||_2e}},{key:"setUpdatedValue",value:function(r,i){var s=this.props.label?this.getValueObjectWithLabel(r):r;this.props.onChange&&this.props.onChange(s,i),this.setState({value:r})}},{key:"render",value:function(){var r=this,i=at({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return Y.createElement("div",{style:i.wrap},Y.createElement("input",{id:this.inputId,style:i.input,ref:function(o){return r.input=o},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?Y.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(pe.PureComponent||pe.Component),N2e=function(e,t,r,i){var s=i.clientWidth,o=i.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,A=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,l=a-(i.getBoundingClientRect().left+window.pageXOffset),c=A-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var u=void 0;if(c<0)u=359;else if(c>o)u=0;else{var f=-(c*100/o)+100;u=360*f/100}if(r.h!==u)return{h:u,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var d=void 0;if(l<0)d=0;else if(l>s)d=359;else{var h=l*100/s;d=360*h/100}if(r.h!==d)return{h:d,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null},k2e=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function D2e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function bL(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function V2e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var sp=function(n){V2e(e,n);function e(){var t,r,i,s;D2e(this,e);for(var o=arguments.length,a=Array(o),A=0;A<o;A++)a[A]=arguments[A];return s=(r=(i=bL(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i),i.handleChange=function(l){var c=N2e(l,i.props.direction,i.props.hsl,i.container);c&&typeof i.props.onChange=="function"&&i.props.onChange(c,l)},i.handleMouseDown=function(l){i.handleChange(l),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},r),bL(i,s)}return k2e(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.direction,s=i===void 0?"horizontal":i,o=at({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return Y.createElement("div",{style:o.hue},Y.createElement("div",{className:"hue-"+s,style:o.container,ref:function(A){return r.container=A},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Y.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),Y.createElement("div",{style:o.pointer},this.props.pointer?Y.createElement(this.props.pointer,this.props):Y.createElement("div",{style:o.slider}))))}}]),e}(pe.PureComponent||pe.Component),De={},L2e={get exports(){return De},set exports(n){De=n}},P2e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",W2e=P2e,O2e=W2e;function g5(){}function m5(){}m5.resetWarningCache=g5;var Z2e=function(){function n(r,i,s,o,a,A){if(A!==O2e){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:m5,resetWarningCache:g5};return t.PropTypes=t,t};L2e.exports=Z2e();function G2e(){this.__data__=[],this.size=0}function I0(n,e){return n===e||n!==n&&e!==e}function Ib(n,e){for(var t=n.length;t--;)if(I0(n[t][0],e))return t;return-1}var J2e=Array.prototype,H2e=J2e.splice;function z2e(n){var e=this.__data__,t=Ib(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():H2e.call(e,t,1),--this.size,!0}function X2e(n){var e=this.__data__,t=Ib(e,n);return t<0?void 0:e[t][1]}function Y2e(n){return Ib(this.__data__,n)>-1}function K2e(n,e){var t=this.__data__,r=Ib(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function VA(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}VA.prototype.clear=G2e;VA.prototype.delete=z2e;VA.prototype.get=X2e;VA.prototype.has=Y2e;VA.prototype.set=K2e;function j2e(){this.__data__=new VA,this.size=0}function $2e(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function q2e(n){return this.__data__.get(n)}function eMe(n){return this.__data__.has(n)}var tMe=typeof global=="object"&&global&&global.Object===Object&&global;const v5=tMe;var nMe=typeof self=="object"&&self&&self.Object===Object&&self,rMe=v5||nMe||Function("return this")();const Po=rMe;var iMe=Po.Symbol;const ql=iMe;var y5=Object.prototype,sMe=y5.hasOwnProperty,oMe=y5.toString,Kp=ql?ql.toStringTag:void 0;function aMe(n){var e=sMe.call(n,Kp),t=n[Kp];try{n[Kp]=void 0;var r=!0}catch{}var i=oMe.call(n);return r&&(e?n[Kp]=t:delete n[Kp]),i}var AMe=Object.prototype,lMe=AMe.toString;function cMe(n){return lMe.call(n)}var uMe="[object Null]",fMe="[object Undefined]",xL=ql?ql.toStringTag:void 0;function Su(n){return n==null?n===void 0?fMe:uMe:xL&&xL in Object(n)?aMe(n):cMe(n)}function $s(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var dMe="[object AsyncFunction]",hMe="[object Function]",pMe="[object GeneratorFunction]",gMe="[object Proxy]";function CQ(n){if(!$s(n))return!1;var e=Su(n);return e==hMe||e==pMe||e==dMe||e==gMe}var mMe=Po["__core-js_shared__"];const D1=mMe;var IL=function(){var n=/[^.]+$/.exec(D1&&D1.keys&&D1.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function vMe(n){return!!IL&&IL in n}var yMe=Function.prototype,BMe=yMe.toString;function Qu(n){if(n!=null){try{return BMe.call(n)}catch{}try{return n+""}catch{}}return""}var wMe=/[\\^$.*+?()[\]{}|]/g,CMe=/^\[object .+?Constructor\]$/,bMe=Function.prototype,xMe=Object.prototype,IMe=bMe.toString,FMe=xMe.hasOwnProperty,EMe=RegExp("^"+IMe.call(FMe).replace(wMe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function UMe(n){if(!$s(n)||vMe(n))return!1;var e=CQ(n)?EMe:CMe;return e.test(Qu(n))}function _Me(n,e){return n==null?void 0:n[e]}function Ru(n,e){var t=_Me(n,e);return UMe(t)?t:void 0}var SMe=Ru(Po,"Map");const Hm=SMe;var QMe=Ru(Object,"create");const zm=QMe;function RMe(){this.__data__=zm?zm(null):{},this.size=0}function MMe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var TMe="__lodash_hash_undefined__",NMe=Object.prototype,kMe=NMe.hasOwnProperty;function DMe(n){var e=this.__data__;if(zm){var t=e[n];return t===TMe?void 0:t}return kMe.call(e,n)?e[n]:void 0}var VMe=Object.prototype,LMe=VMe.hasOwnProperty;function PMe(n){var e=this.__data__;return zm?e[n]!==void 0:LMe.call(e,n)}var WMe="__lodash_hash_undefined__";function OMe(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=zm&&e===void 0?WMe:e,this}function gu(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}gu.prototype.clear=RMe;gu.prototype.delete=MMe;gu.prototype.get=DMe;gu.prototype.has=PMe;gu.prototype.set=OMe;function ZMe(){this.size=0,this.__data__={hash:new gu,map:new(Hm||VA),string:new gu}}function GMe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Fb(n,e){var t=n.__data__;return GMe(e)?t[typeof e=="string"?"string":"hash"]:t.map}function JMe(n){var e=Fb(this,n).delete(n);return this.size-=e?1:0,e}function HMe(n){return Fb(this,n).get(n)}function zMe(n){return Fb(this,n).has(n)}function XMe(n,e){var t=Fb(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function LA(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}LA.prototype.clear=ZMe;LA.prototype.delete=JMe;LA.prototype.get=HMe;LA.prototype.has=zMe;LA.prototype.set=XMe;var YMe=200;function KMe(n,e){var t=this.__data__;if(t instanceof VA){var r=t.__data__;if(!Hm||r.length<YMe-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new LA(r)}return t.set(n,e),this.size=t.size,this}function Ba(n){var e=this.__data__=new VA(n);this.size=e.size}Ba.prototype.clear=j2e;Ba.prototype.delete=$2e;Ba.prototype.get=q2e;Ba.prototype.has=eMe;Ba.prototype.set=KMe;var jMe=function(){try{var n=Ru(Object,"defineProperty");return n({},"",{}),n}catch{}}();const tC=jMe;function bQ(n,e,t){e=="__proto__"&&tC?tC(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function QU(n,e,t){(t!==void 0&&!I0(n[e],t)||t===void 0&&!(e in n))&&bQ(n,e,t)}function $Me(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var A=o[n?a:++i];if(t(s[A],A,s)===!1)break}return e}}var qMe=$Me();const B5=qMe;var w5=typeof exports=="object"&&exports&&!exports.nodeType&&exports,FL=w5&&typeof module=="object"&&module&&!module.nodeType&&module,eTe=FL&&FL.exports===w5,EL=eTe?Po.Buffer:void 0,UL=EL?EL.allocUnsafe:void 0;function tTe(n,e){if(e)return n.slice();var t=n.length,r=UL?UL(t):new n.constructor(t);return n.copy(r),r}var nTe=Po.Uint8Array;const nC=nTe;function rTe(n){var e=new n.constructor(n.byteLength);return new nC(e).set(new nC(n)),e}function iTe(n,e){var t=e?rTe(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}function sTe(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var _L=Object.create,oTe=function(){function n(){}return function(e){if(!$s(e))return{};if(_L)return _L(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const aTe=oTe;function C5(n,e){return function(t){return n(e(t))}}var ATe=C5(Object.getPrototypeOf,Object);const b5=ATe;var lTe=Object.prototype;function xQ(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||lTe;return n===t}function cTe(n){return typeof n.constructor=="function"&&!xQ(n)?aTe(b5(n)):{}}function ec(n){return n!=null&&typeof n=="object"}var uTe="[object Arguments]";function SL(n){return ec(n)&&Su(n)==uTe}var x5=Object.prototype,fTe=x5.hasOwnProperty,dTe=x5.propertyIsEnumerable,hTe=SL(function(){return arguments}())?SL:function(n){return ec(n)&&fTe.call(n,"callee")&&!dTe.call(n,"callee")};const rC=hTe;var pTe=Array.isArray;const ds=pTe;var gTe=9007199254740991;function IQ(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=gTe}function op(n){return n!=null&&IQ(n.length)&&!CQ(n)}function mTe(n){return ec(n)&&op(n)}function vTe(){return!1}var I5=typeof exports=="object"&&exports&&!exports.nodeType&&exports,QL=I5&&typeof module=="object"&&module&&!module.nodeType&&module,yTe=QL&&QL.exports===I5,RL=yTe?Po.Buffer:void 0,BTe=RL?RL.isBuffer:void 0,wTe=BTe||vTe;const iC=wTe;var CTe="[object Object]",bTe=Function.prototype,xTe=Object.prototype,F5=bTe.toString,ITe=xTe.hasOwnProperty,FTe=F5.call(Object);function ETe(n){if(!ec(n)||Su(n)!=CTe)return!1;var e=b5(n);if(e===null)return!0;var t=ITe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&F5.call(t)==FTe}var UTe="[object Arguments]",_Te="[object Array]",STe="[object Boolean]",QTe="[object Date]",RTe="[object Error]",MTe="[object Function]",TTe="[object Map]",NTe="[object Number]",kTe="[object Object]",DTe="[object RegExp]",VTe="[object Set]",LTe="[object String]",PTe="[object WeakMap]",WTe="[object ArrayBuffer]",OTe="[object DataView]",ZTe="[object Float32Array]",GTe="[object Float64Array]",JTe="[object Int8Array]",HTe="[object Int16Array]",zTe="[object Int32Array]",XTe="[object Uint8Array]",YTe="[object Uint8ClampedArray]",KTe="[object Uint16Array]",jTe="[object Uint32Array]",un={};un[ZTe]=un[GTe]=un[JTe]=un[HTe]=un[zTe]=un[XTe]=un[YTe]=un[KTe]=un[jTe]=!0;un[UTe]=un[_Te]=un[WTe]=un[STe]=un[OTe]=un[QTe]=un[RTe]=un[MTe]=un[TTe]=un[NTe]=un[kTe]=un[DTe]=un[VTe]=un[LTe]=un[PTe]=!1;function $Te(n){return ec(n)&&IQ(n.length)&&!!un[Su(n)]}function qTe(n){return function(e){return n(e)}}var E5=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Jg=E5&&typeof module=="object"&&module&&!module.nodeType&&module,eNe=Jg&&Jg.exports===E5,V1=eNe&&v5.process,tNe=function(){try{var n=Jg&&Jg.require&&Jg.require("util").types;return n||V1&&V1.binding&&V1.binding("util")}catch{}}();const ML=tNe;var TL=ML&&ML.isTypedArray,nNe=TL?qTe(TL):$Te;const FQ=nNe;function RU(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var rNe=Object.prototype,iNe=rNe.hasOwnProperty;function sNe(n,e,t){var r=n[e];(!(iNe.call(n,e)&&I0(r,t))||t===void 0&&!(e in n))&&bQ(n,e,t)}function oNe(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],A=r?r(t[a],n[a],a,t,n):void 0;A===void 0&&(A=n[a]),i?bQ(t,a,A):sNe(t,a,A)}return t}function aNe(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var ANe=9007199254740991,lNe=/^(?:0|[1-9]\d*)$/;function EQ(n,e){var t=typeof n;return e=e??ANe,!!e&&(t=="number"||t!="symbol"&&lNe.test(n))&&n>-1&&n%1==0&&n<e}var cNe=Object.prototype,uNe=cNe.hasOwnProperty;function U5(n,e){var t=ds(n),r=!t&&rC(n),i=!t&&!r&&iC(n),s=!t&&!r&&!i&&FQ(n),o=t||r||i||s,a=o?aNe(n.length,String):[],A=a.length;for(var l in n)(e||uNe.call(n,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||EQ(l,A)))&&a.push(l);return a}function fNe(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var dNe=Object.prototype,hNe=dNe.hasOwnProperty;function pNe(n){if(!$s(n))return fNe(n);var e=xQ(n),t=[];for(var r in n)r=="constructor"&&(e||!hNe.call(n,r))||t.push(r);return t}function _5(n){return op(n)?U5(n,!0):pNe(n)}function gNe(n){return oNe(n,_5(n))}function mNe(n,e,t,r,i,s,o){var a=RU(n,t),A=RU(e,t),l=o.get(A);if(l){QU(n,t,l);return}var c=s?s(a,A,t+"",n,e,o):void 0,u=c===void 0;if(u){var f=ds(A),d=!f&&iC(A),h=!f&&!d&&FQ(A);c=A,f||d||h?ds(a)?c=a:mTe(a)?c=sTe(a):d?(u=!1,c=tTe(A,!0)):h?(u=!1,c=iTe(A,!0)):c=[]:ETe(A)||rC(A)?(c=a,rC(a)?c=gNe(a):(!$s(a)||CQ(a))&&(c=cTe(A))):u=!1}u&&(o.set(A,c),i(c,A,r,s,o),o.delete(A)),QU(n,t,c)}function S5(n,e,t,r,i){n!==e&&B5(e,function(s,o){if(i||(i=new Ba),$s(s))mNe(n,e,o,t,S5,r,i);else{var a=r?r(RU(n,o),s,o+"",n,e,i):void 0;a===void 0&&(a=s),QU(n,o,a)}},_5)}function Eb(n){return n}function vNe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var NL=Math.max;function yNe(n,e,t){return e=NL(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=NL(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),vNe(n,this,a)}}function BNe(n){return function(){return n}}var wNe=tC?function(n,e){return tC(n,"toString",{configurable:!0,enumerable:!1,value:BNe(e),writable:!0})}:Eb;const CNe=wNe;var bNe=800,xNe=16,INe=Date.now;function FNe(n){var e=0,t=0;return function(){var r=INe(),i=xNe-(r-t);if(t=r,i>0){if(++e>=bNe)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var ENe=FNe(CNe);const UNe=ENe;function _Ne(n,e){return UNe(yNe(n,e,Eb),n+"")}function SNe(n,e,t){if(!$s(t))return!1;var r=typeof e;return(r=="number"?op(t)&&EQ(e,t.length):r=="string"&&e in t)?I0(t[e],n):!1}function QNe(n){return _Ne(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(i--,s):void 0,o&&SNe(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})}var RNe=QNe(function(n,e,t){S5(n,e,t)});const Di=RNe;var F0=function(e){var t=e.zDepth,r=e.radius,i=e.background,s=e.children,o=e.styles,a=o===void 0?{}:o,A=at(Di({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+t*4+"px rgba(0,0,0,.24)",borderRadius:r,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":t===1});return Y.createElement("div",{style:A.wrap},Y.createElement("div",{style:A.bg}),Y.createElement("div",{style:A.content},s))};F0.propTypes={background:De.string,zDepth:De.oneOf([0,1,2,3,4,5]),radius:De.number,styles:De.object};F0.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var MNe=function(){return Po.Date.now()};const L1=MNe;var TNe=/\s/;function NNe(n){for(var e=n.length;e--&&TNe.test(n.charAt(e)););return e}var kNe=/^\s+/;function DNe(n){return n&&n.slice(0,NNe(n)+1).replace(kNe,"")}var VNe="[object Symbol]";function Ub(n){return typeof n=="symbol"||ec(n)&&Su(n)==VNe}var kL=0/0,LNe=/^[-+]0x[0-9a-f]+$/i,PNe=/^0b[01]+$/i,WNe=/^0o[0-7]+$/i,ONe=parseInt;function DL(n){if(typeof n=="number")return n;if(Ub(n))return kL;if($s(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=$s(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=DNe(n);var t=PNe.test(n);return t||WNe.test(n)?ONe(n.slice(2),t?2:8):LNe.test(n)?kL:+n}var ZNe="Expected a function",GNe=Math.max,JNe=Math.min;function Q5(n,e,t){var r,i,s,o,a,A,l=0,c=!1,u=!1,f=!0;if(typeof n!="function")throw new TypeError(ZNe);e=DL(e)||0,$s(t)&&(c=!!t.leading,u="maxWait"in t,s=u?GNe(DL(t.maxWait)||0,e):s,f="trailing"in t?!!t.trailing:f);function d(b){var F=r,I=i;return r=i=void 0,l=b,o=n.apply(I,F),o}function h(b){return l=b,a=setTimeout(g,e),c?d(b):o}function p(b){var F=b-A,I=b-l,S=e-F;return u?JNe(S,s-I):S}function m(b){var F=b-A,I=b-l;return A===void 0||F>=e||F<0||u&&I>=s}function g(){var b=L1();if(m(b))return v(b);a=setTimeout(g,p(b))}function v(b){return a=void 0,f&&r?d(b):(r=i=void 0,o)}function y(){a!==void 0&&clearTimeout(a),l=0,r=A=i=a=void 0}function w(){return a===void 0?o:v(L1())}function C(){var b=L1(),F=m(b);if(r=arguments,i=this,A=b,F){if(a===void 0)return h(A);if(u)return clearTimeout(a),a=setTimeout(g,e),d(A)}return a===void 0&&(a=setTimeout(g,e)),o}return C.cancel=y,C.flush=w,C}var HNe="Expected a function";function zNe(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(HNe);return $s(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),Q5(n,e,{leading:r,maxWait:e,trailing:i})}var XNe=function(e,t,r){var i=r.getBoundingClientRect(),s=i.width,o=i.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,A=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,l=a-(r.getBoundingClientRect().left+window.pageXOffset),c=A-(r.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>s&&(l=s),c<0?c=0:c>o&&(c=o);var u=l/s,f=1-c/o;return{h:t.h,s:u,v:f,a:t.a,source:"hsv"}},YNe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function KNe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function jNe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function $Ne(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var _b=function(n){$Ne(e,n);function e(t){KNe(this,e);var r=jNe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.handleChange=function(i){typeof r.props.onChange=="function"&&r.throttle(r.props.onChange,XNe(i,r.props.hsl,r.container),i)},r.handleMouseDown=function(i){r.handleChange(i);var s=r.getContainerRenderWindow();s.addEventListener("mousemove",r.handleChange),s.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=zNe(function(i,s,o){i(s,o)},50),r}return YNe(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var r=this.container,i=window;!i.document.contains(r)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var r=this.getContainerRenderWindow();r.removeEventListener("mousemove",this.handleChange),r.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.style||{},s=i.color,o=i.white,a=i.black,A=i.pointer,l=i.circle,c=at({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:o,black:a,pointer:A,circle:l}},{custom:!!this.props.style});return Y.createElement("div",{style:c.color,ref:function(f){return r.container=f},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Y.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),Y.createElement("div",{style:c.white,className:"saturation-white"},Y.createElement("div",{style:c.black,className:"saturation-black"}),Y.createElement("div",{style:c.pointer},this.props.pointer?Y.createElement(this.props.pointer,this.props):Y.createElement("div",{style:c.circle}))))}}]),e}(pe.PureComponent||pe.Component);function qNe(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var eke=C5(Object.keys,Object);const tke=eke;var nke=Object.prototype,rke=nke.hasOwnProperty;function ike(n){if(!xQ(n))return tke(n);var e=[];for(var t in Object(n))rke.call(n,t)&&t!="constructor"&&e.push(t);return e}function UQ(n){return op(n)?U5(n):ike(n)}function ske(n,e){return n&&B5(n,e,UQ)}function oke(n,e){return function(t,r){if(t==null)return t;if(!op(t))return n(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return t}}var ake=oke(ske);const R5=ake;function Ake(n){return typeof n=="function"?n:Eb}function lke(n,e){var t=ds(n)?qNe:R5;return t(n,Ake(e))}function sC(n){return sC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sC(n)}var cke=/^\s+/,uke=/\s+$/;function je(n,e){if(n=n||"",e=e||{},n instanceof je)return n;if(!(this instanceof je))return new je(n,e);var t=fke(n);this._originalInput=n,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}je.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,r,i,s,o,a;return t=e.r/255,r=e.g/255,i=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*o+.0722*a},setAlpha:function(e){return this._a=M5(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=LL(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=LL(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+i+"%)":"hsva("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=VL(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=VL(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+i+"%)":"hsla("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return PL(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return gke(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(gn(this._r,255)*100)+"%",g:Math.round(gn(this._g,255)*100)+"%",b:Math.round(gn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(gn(this._r,255)*100)+"%, "+Math.round(gn(this._g,255)*100)+"%, "+Math.round(gn(this._b,255)*100)+"%)":"rgba("+Math.round(gn(this._r,255)*100)+"%, "+Math.round(gn(this._g,255)*100)+"%, "+Math.round(gn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Uke[PL(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+WL(this._r,this._g,this._b,this._a),r=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=je(e);r="#"+WL(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0,s=!t&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return je(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(Bke,arguments)},brighten:function(){return this._applyModification(wke,arguments)},darken:function(){return this._applyModification(Cke,arguments)},desaturate:function(){return this._applyModification(mke,arguments)},saturate:function(){return this._applyModification(vke,arguments)},greyscale:function(){return this._applyModification(yke,arguments)},spin:function(){return this._applyModification(bke,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(Fke,arguments)},complement:function(){return this._applyCombination(xke,arguments)},monochromatic:function(){return this._applyCombination(Eke,arguments)},splitcomplement:function(){return this._applyCombination(Ike,arguments)},triad:function(){return this._applyCombination(OL,[3])},tetrad:function(){return this._applyCombination(OL,[4])}};je.fromRatio=function(n,e){if(sC(n)=="object"){var t={};for(var r in n)n.hasOwnProperty(r)&&(r==="a"?t[r]=n[r]:t[r]=wg(n[r]));n=t}return je(n,e)};function fke(n){var e={r:0,g:0,b:0},t=1,r=null,i=null,s=null,o=!1,a=!1;return typeof n=="string"&&(n=Rke(n)),sC(n)=="object"&&(Ka(n.r)&&Ka(n.g)&&Ka(n.b)?(e=dke(n.r,n.g,n.b),o=!0,a=String(n.r).substr(-1)==="%"?"prgb":"rgb"):Ka(n.h)&&Ka(n.s)&&Ka(n.v)?(r=wg(n.s),i=wg(n.v),e=pke(n.h,r,i),o=!0,a="hsv"):Ka(n.h)&&Ka(n.s)&&Ka(n.l)&&(r=wg(n.s),s=wg(n.l),e=hke(n.h,r,s),o=!0,a="hsl"),n.hasOwnProperty("a")&&(t=n.a)),t=M5(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function dke(n,e,t){return{r:gn(n,255)*255,g:gn(e,255)*255,b:gn(t,255)*255}}function VL(n,e,t){n=gn(n,255),e=gn(e,255),t=gn(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,o,a=(r+i)/2;if(r==i)s=o=0;else{var A=r-i;switch(o=a>.5?A/(2-r-i):A/(r+i),r){case n:s=(e-t)/A+(e<t?6:0);break;case e:s=(t-n)/A+2;break;case t:s=(n-e)/A+4;break}s/=6}return{h:s,s:o,l:a}}function hke(n,e,t){var r,i,s;n=gn(n,360),e=gn(e,100),t=gn(t,100);function o(l,c,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?l+(c-l)*6*u:u<1/2?c:u<2/3?l+(c-l)*(2/3-u)*6:l}if(e===0)r=i=s=t;else{var a=t<.5?t*(1+e):t+e-t*e,A=2*t-a;r=o(A,a,n+1/3),i=o(A,a,n),s=o(A,a,n-1/3)}return{r:r*255,g:i*255,b:s*255}}function LL(n,e,t){n=gn(n,255),e=gn(e,255),t=gn(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,o,a=r,A=r-i;if(o=r===0?0:A/r,r==i)s=0;else{switch(r){case n:s=(e-t)/A+(e<t?6:0);break;case e:s=(t-n)/A+2;break;case t:s=(n-e)/A+4;break}s/=6}return{h:s,s:o,v:a}}function pke(n,e,t){n=gn(n,360)*6,e=gn(e,100),t=gn(t,100);var r=Math.floor(n),i=n-r,s=t*(1-e),o=t*(1-i*e),a=t*(1-(1-i)*e),A=r%6,l=[t,o,s,s,a,t][A],c=[a,t,t,o,s,s][A],u=[s,s,a,t,t,o][A];return{r:l*255,g:c*255,b:u*255}}function PL(n,e,t,r){var i=[Qo(Math.round(n).toString(16)),Qo(Math.round(e).toString(16)),Qo(Math.round(t).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function gke(n,e,t,r,i){var s=[Qo(Math.round(n).toString(16)),Qo(Math.round(e).toString(16)),Qo(Math.round(t).toString(16)),Qo(T5(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function WL(n,e,t,r){var i=[Qo(T5(r)),Qo(Math.round(n).toString(16)),Qo(Math.round(e).toString(16)),Qo(Math.round(t).toString(16))];return i.join("")}je.equals=function(n,e){return!n||!e?!1:je(n).toRgbString()==je(e).toRgbString()};je.random=function(){return je.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function mke(n,e){e=e===0?0:e||10;var t=je(n).toHsl();return t.s-=e/100,t.s=Sb(t.s),je(t)}function vke(n,e){e=e===0?0:e||10;var t=je(n).toHsl();return t.s+=e/100,t.s=Sb(t.s),je(t)}function yke(n){return je(n).desaturate(100)}function Bke(n,e){e=e===0?0:e||10;var t=je(n).toHsl();return t.l+=e/100,t.l=Sb(t.l),je(t)}function wke(n,e){e=e===0?0:e||10;var t=je(n).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),je(t)}function Cke(n,e){e=e===0?0:e||10;var t=je(n).toHsl();return t.l-=e/100,t.l=Sb(t.l),je(t)}function bke(n,e){var t=je(n).toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,je(t)}function xke(n){var e=je(n).toHsl();return e.h=(e.h+180)%360,je(e)}function OL(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=je(n).toHsl(),r=[je(n)],i=360/e,s=1;s<e;s++)r.push(je({h:(t.h+s*i)%360,s:t.s,l:t.l}));return r}function Ike(n){var e=je(n).toHsl(),t=e.h;return[je(n),je({h:(t+72)%360,s:e.s,l:e.l}),je({h:(t+216)%360,s:e.s,l:e.l})]}function Fke(n,e,t){e=e||6,t=t||30;var r=je(n).toHsl(),i=360/t,s=[je(n)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(je(r));return s}function Eke(n,e){e=e||6;for(var t=je(n).toHsv(),r=t.h,i=t.s,s=t.v,o=[],a=1/e;e--;)o.push(je({h:r,s:i,v:s})),s=(s+a)%1;return o}je.mix=function(n,e,t){t=t===0?0:t||50;var r=je(n).toRgb(),i=je(e).toRgb(),s=t/100,o={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return je(o)};je.readability=function(n,e){var t=je(n),r=je(e);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)};je.isReadable=function(n,e,t){var r=je.readability(n,e),i,s;switch(s=!1,i=Mke(t),i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};je.mostReadable=function(n,e,t){var r=null,i=0,s,o,a,A;t=t||{},o=t.includeFallbackColors,a=t.level,A=t.size;for(var l=0;l<e.length;l++)s=je.readability(n,e[l]),s>i&&(i=s,r=je(e[l]));return je.isReadable(n,r,{level:a,size:A})||!o?r:(t.includeFallbackColors=!1,je.mostReadable(n,["#fff","#000"],t))};var MU=je.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Uke=je.hexNames=_ke(MU);function _ke(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function M5(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function gn(n,e){Ske(n)&&(n="100%");var t=Qke(n);return n=Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function Sb(n){return Math.min(1,Math.max(0,n))}function Ji(n){return parseInt(n,16)}function Ske(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function Qke(n){return typeof n=="string"&&n.indexOf("%")!=-1}function Qo(n){return n.length==1?"0"+n:""+n}function wg(n){return n<=1&&(n=n*100+"%"),n}function T5(n){return Math.round(parseFloat(n)*255).toString(16)}function ZL(n){return Ji(n)/255}var Co=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+n+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Ka(n){return!!Co.CSS_UNIT.exec(n)}function Rke(n){n=n.replace(cke,"").replace(uke,"").toLowerCase();var e=!1;if(MU[n])n=MU[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=Co.rgb.exec(n))?{r:t[1],g:t[2],b:t[3]}:(t=Co.rgba.exec(n))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Co.hsl.exec(n))?{h:t[1],s:t[2],l:t[3]}:(t=Co.hsla.exec(n))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Co.hsv.exec(n))?{h:t[1],s:t[2],v:t[3]}:(t=Co.hsva.exec(n))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Co.hex8.exec(n))?{r:Ji(t[1]),g:Ji(t[2]),b:Ji(t[3]),a:ZL(t[4]),format:e?"name":"hex8"}:(t=Co.hex6.exec(n))?{r:Ji(t[1]),g:Ji(t[2]),b:Ji(t[3]),format:e?"name":"hex"}:(t=Co.hex4.exec(n))?{r:Ji(t[1]+""+t[1]),g:Ji(t[2]+""+t[2]),b:Ji(t[3]+""+t[3]),a:ZL(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=Co.hex3.exec(n))?{r:Ji(t[1]+""+t[1]),g:Ji(t[2]+""+t[2]),b:Ji(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function Mke(n){var e,t;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),t=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var GL=function(e){var t=["r","g","b","a","h","s","l","v"],r=0,i=0;return lke(t,function(s){if(e[s]&&(r+=1,isNaN(e[s])||(i+=1),s==="s"||s==="l")){var o=/^\d+%$/;o.test(e[s])&&(i+=1)}}),r===i?e:!1},Cg=function(e,t){var r=e.hex?je(e.hex):je(e),i=r.toHsl(),s=r.toHsv(),o=r.toRgb(),a=r.toHex();i.s===0&&(i.h=t||0,s.h=t||0);var A=a==="000000"&&o.a===0;return{hsl:i,hex:A?"transparent":"#"+a,rgb:o,hsv:s,oldHue:e.h||t||i.h,source:e.source}},cc=function(e){if(e==="transparent")return!0;var t=String(e).charAt(0)==="#"?1:0;return e.length!==4+t&&e.length<7+t&&je(e).isValid()},_Q=function(e){if(!e)return"#fff";var t=Cg(e);if(t.hex==="transparent")return"rgba(0,0,0,0.4)";var r=(t.rgb.r*299+t.rgb.g*587+t.rgb.b*114)/1e3;return r>=128?"#000":"#fff"},P1=function(e,t){var r=e.replace("°","");return je(t+" ("+r+")")._ok},jp=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Tke=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Nke(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function kke(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Dke(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Vi=function(e){var t=function(r){Dke(i,r);function i(s){Nke(this,i);var o=kke(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return o.handleChange=function(a,A){var l=GL(a);if(l){var c=Cg(a,a.h||o.state.oldHue);o.setState(c),o.props.onChangeComplete&&o.debounce(o.props.onChangeComplete,c,A),o.props.onChange&&o.props.onChange(c,A)}},o.handleSwatchHover=function(a,A){var l=GL(a);if(l){var c=Cg(a,a.h||o.state.oldHue);o.props.onSwatchHover&&o.props.onSwatchHover(c,A)}},o.state=jp({},Cg(s.color,0)),o.debounce=Q5(function(a,A,l){a(A,l)},100),o}return Tke(i,[{key:"render",value:function(){var o={};return this.props.onSwatchHover&&(o.onSwatchHover=this.handleSwatchHover),Y.createElement(e,jp({},this.props,this.state,{onChange:this.handleChange},o))}}],[{key:"getDerivedStateFromProps",value:function(o,a){return jp({},Cg(o.color,a.oldHue))}}]),i}(pe.PureComponent||pe.Component);return t.propTypes=jp({},e.propTypes),t.defaultProps=jp({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},Vke=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Lke=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Pke(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function JL(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Wke(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Oke=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){Wke(i,r);function i(){var s,o,a,A;Pke(this,i);for(var l=arguments.length,c=Array(l),u=0;u<l;u++)c[u]=arguments[u];return A=(o=(a=JL(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(c))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},o),JL(a,A)}return Lke(i,[{key:"render",value:function(){return Y.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},Y.createElement(e,Vke({},this.props,this.state)))}}]),i}(Y.Component)},HL=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Zke=13,Gke=function(e){var t=e.color,r=e.style,i=e.onClick,s=i===void 0?function(){}:i,o=e.onHover,a=e.title,A=a===void 0?t:a,l=e.children,c=e.focus,u=e.focusStyle,f=u===void 0?{}:u,d=t==="transparent",h=at({default:{swatch:HL({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,c?f:{})}}),p=function(w){return s(t,w)},m=function(w){return w.keyCode===Zke&&s(t,w)},g=function(w){return o(t,w)},v={};return o&&(v.onMouseOver=g),Y.createElement("div",HL({style:h.swatch,onClick:p,title:A,tabIndex:0,onKeyDown:m},v),l,d&&Y.createElement(ip,{borderRadius:h.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Mu=Oke(Gke);var Jke=function(e){var t=e.direction,r=at({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return Y.createElement("div",{style:r.picker})},Hke=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},N5=function(e){var t=e.rgb,r=e.hsl,i=e.width,s=e.height,o=e.onChange,a=e.direction,A=e.style,l=e.renderers,c=e.pointer,u=e.className,f=u===void 0?"":u,d=at({default:{picker:{position:"relative",width:i,height:s},alpha:{radius:"2px",style:A}}});return Y.createElement("div",{style:d.picker,className:"alpha-picker "+f},Y.createElement(wQ,Hke({},d.alpha,{rgb:t,hsl:r,pointer:c,renderers:l,onChange:o,direction:a})))};N5.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Jke};Vi(N5);function k5(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var zke="__lodash_hash_undefined__";function Xke(n){return this.__data__.set(n,zke),this}function Yke(n){return this.__data__.has(n)}function oC(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new LA;++e<t;)this.add(n[e])}oC.prototype.add=oC.prototype.push=Xke;oC.prototype.has=Yke;function Kke(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function jke(n,e){return n.has(e)}var $ke=1,qke=2;function D5(n,e,t,r,i,s){var o=t&$ke,a=n.length,A=e.length;if(a!=A&&!(o&&A>a))return!1;var l=s.get(n),c=s.get(e);if(l&&c)return l==e&&c==n;var u=-1,f=!0,d=t&qke?new oC:void 0;for(s.set(n,e),s.set(e,n);++u<a;){var h=n[u],p=e[u];if(r)var m=o?r(p,h,u,e,n,s):r(h,p,u,n,e,s);if(m!==void 0){if(m)continue;f=!1;break}if(d){if(!Kke(e,function(g,v){if(!jke(d,v)&&(h===g||i(h,g,t,r,s)))return d.push(v)})){f=!1;break}}else if(!(h===p||i(h,p,t,r,s))){f=!1;break}}return s.delete(n),s.delete(e),f}function eDe(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}function tDe(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var nDe=1,rDe=2,iDe="[object Boolean]",sDe="[object Date]",oDe="[object Error]",aDe="[object Map]",ADe="[object Number]",lDe="[object RegExp]",cDe="[object Set]",uDe="[object String]",fDe="[object Symbol]",dDe="[object ArrayBuffer]",hDe="[object DataView]",zL=ql?ql.prototype:void 0,W1=zL?zL.valueOf:void 0;function pDe(n,e,t,r,i,s,o){switch(t){case hDe:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case dDe:return!(n.byteLength!=e.byteLength||!s(new nC(n),new nC(e)));case iDe:case sDe:case ADe:return I0(+n,+e);case oDe:return n.name==e.name&&n.message==e.message;case lDe:case uDe:return n==e+"";case aDe:var a=eDe;case cDe:var A=r&nDe;if(a||(a=tDe),n.size!=e.size&&!A)return!1;var l=o.get(n);if(l)return l==e;r|=rDe,o.set(n,e);var c=D5(a(n),a(e),r,i,s,o);return o.delete(n),c;case fDe:if(W1)return W1.call(n)==W1.call(e)}return!1}function gDe(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}function mDe(n,e,t){var r=e(n);return ds(n)?r:gDe(r,t(n))}function vDe(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}function yDe(){return[]}var BDe=Object.prototype,wDe=BDe.propertyIsEnumerable,XL=Object.getOwnPropertySymbols,CDe=XL?function(n){return n==null?[]:(n=Object(n),vDe(XL(n),function(e){return wDe.call(n,e)}))}:yDe;const bDe=CDe;function YL(n){return mDe(n,UQ,bDe)}var xDe=1,IDe=Object.prototype,FDe=IDe.hasOwnProperty;function EDe(n,e,t,r,i,s){var o=t&xDe,a=YL(n),A=a.length,l=YL(e),c=l.length;if(A!=c&&!o)return!1;for(var u=A;u--;){var f=a[u];if(!(o?f in e:FDe.call(e,f)))return!1}var d=s.get(n),h=s.get(e);if(d&&h)return d==e&&h==n;var p=!0;s.set(n,e),s.set(e,n);for(var m=o;++u<A;){f=a[u];var g=n[f],v=e[f];if(r)var y=o?r(v,g,f,e,n,s):r(g,v,f,n,e,s);if(!(y===void 0?g===v||i(g,v,t,r,s):y)){p=!1;break}m||(m=f=="constructor")}if(p&&!m){var w=n.constructor,C=e.constructor;w!=C&&"constructor"in n&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof C=="function"&&C instanceof C)&&(p=!1)}return s.delete(n),s.delete(e),p}var UDe=Ru(Po,"DataView");const TU=UDe;var _De=Ru(Po,"Promise");const NU=_De;var SDe=Ru(Po,"Set");const kU=SDe;var QDe=Ru(Po,"WeakMap");const DU=QDe;var KL="[object Map]",RDe="[object Object]",jL="[object Promise]",$L="[object Set]",qL="[object WeakMap]",e3="[object DataView]",MDe=Qu(TU),TDe=Qu(Hm),NDe=Qu(NU),kDe=Qu(kU),DDe=Qu(DU),Qc=Su;(TU&&Qc(new TU(new ArrayBuffer(1)))!=e3||Hm&&Qc(new Hm)!=KL||NU&&Qc(NU.resolve())!=jL||kU&&Qc(new kU)!=$L||DU&&Qc(new DU)!=qL)&&(Qc=function(n){var e=Su(n),t=e==RDe?n.constructor:void 0,r=t?Qu(t):"";if(r)switch(r){case MDe:return e3;case TDe:return KL;case NDe:return jL;case kDe:return $L;case DDe:return qL}return e});const t3=Qc;var VDe=1,n3="[object Arguments]",r3="[object Array]",Cy="[object Object]",LDe=Object.prototype,i3=LDe.hasOwnProperty;function PDe(n,e,t,r,i,s){var o=ds(n),a=ds(e),A=o?r3:t3(n),l=a?r3:t3(e);A=A==n3?Cy:A,l=l==n3?Cy:l;var c=A==Cy,u=l==Cy,f=A==l;if(f&&iC(n)){if(!iC(e))return!1;o=!0,c=!1}if(f&&!c)return s||(s=new Ba),o||FQ(n)?D5(n,e,t,r,i,s):pDe(n,e,A,t,r,i,s);if(!(t&VDe)){var d=c&&i3.call(n,"__wrapped__"),h=u&&i3.call(e,"__wrapped__");if(d||h){var p=d?n.value():n,m=h?e.value():e;return s||(s=new Ba),i(p,m,t,r,s)}}return f?(s||(s=new Ba),EDe(n,e,t,r,i,s)):!1}function SQ(n,e,t,r,i){return n===e?!0:n==null||e==null||!ec(n)&&!ec(e)?n!==n&&e!==e:PDe(n,e,t,r,SQ,i)}var WDe=1,ODe=2;function ZDe(n,e,t,r){var i=t.length,s=i,o=!r;if(n==null)return!s;for(n=Object(n);i--;){var a=t[i];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<s;){a=t[i];var A=a[0],l=n[A],c=a[1];if(o&&a[2]){if(l===void 0&&!(A in n))return!1}else{var u=new Ba;if(r)var f=r(l,c,A,n,e,u);if(!(f===void 0?SQ(c,l,WDe|ODe,r,u):f))return!1}}return!0}function V5(n){return n===n&&!$s(n)}function GDe(n){for(var e=UQ(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,V5(i)]}return e}function L5(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function JDe(n){var e=GDe(n);return e.length==1&&e[0][2]?L5(e[0][0],e[0][1]):function(t){return t===n||ZDe(t,n,e)}}var HDe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zDe=/^\w*$/;function QQ(n,e){if(ds(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||Ub(n)?!0:zDe.test(n)||!HDe.test(n)||e!=null&&n in Object(e)}var XDe="Expected a function";function RQ(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(XDe);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(RQ.Cache||LA),t}RQ.Cache=LA;var YDe=500;function KDe(n){var e=RQ(n,function(r){return t.size===YDe&&t.clear(),r}),t=e.cache;return e}var jDe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$De=/\\(\\)?/g,qDe=KDe(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(jDe,function(t,r,i,s){e.push(i?s.replace($De,"$1"):r||t)}),e});const eVe=qDe;var tVe=1/0,s3=ql?ql.prototype:void 0,o3=s3?s3.toString:void 0;function P5(n){if(typeof n=="string")return n;if(ds(n))return k5(n,P5)+"";if(Ub(n))return o3?o3.call(n):"";var e=n+"";return e=="0"&&1/n==-tVe?"-0":e}function nVe(n){return n==null?"":P5(n)}function W5(n,e){return ds(n)?n:QQ(n,e)?[n]:eVe(nVe(n))}var rVe=1/0;function Qb(n){if(typeof n=="string"||Ub(n))return n;var e=n+"";return e=="0"&&1/n==-rVe?"-0":e}function O5(n,e){e=W5(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[Qb(e[t++])];return t&&t==r?n:void 0}function iVe(n,e,t){var r=n==null?void 0:O5(n,e);return r===void 0?t:r}function sVe(n,e){return n!=null&&e in Object(n)}function oVe(n,e,t){e=W5(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=Qb(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&IQ(i)&&EQ(o,i)&&(ds(n)||rC(n)))}function aVe(n,e){return n!=null&&oVe(n,e,sVe)}var AVe=1,lVe=2;function cVe(n,e){return QQ(n)&&V5(e)?L5(Qb(n),e):function(t){var r=iVe(t,n);return r===void 0&&r===e?aVe(t,n):SQ(e,r,AVe|lVe)}}function uVe(n){return function(e){return e==null?void 0:e[n]}}function fVe(n){return function(e){return O5(e,n)}}function dVe(n){return QQ(n)?uVe(Qb(n)):fVe(n)}function hVe(n){return typeof n=="function"?n:n==null?Eb:typeof n=="object"?ds(n)?cVe(n[0],n[1]):JDe(n):dVe(n)}function pVe(n,e){var t=-1,r=op(n)?Array(n.length):[];return R5(n,function(i,s,o){r[++t]=e(i,s,o)}),r}function Tu(n,e){var t=ds(n)?k5:pVe;return t(n,hVe(e))}var gVe=function(e){var t=e.colors,r=e.onClick,i=e.onSwatchHover,s=at({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return Y.createElement("div",{style:s.swatches},Tu(t,function(o){return Y.createElement(Mu,{key:o,color:o,style:s.swatch,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+o}})}),Y.createElement("div",{style:s.clear}))},MQ=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.hex,s=e.colors,o=e.width,a=e.triangle,A=e.styles,l=A===void 0?{}:A,c=e.className,u=c===void 0?"":c,f=i==="transparent",d=function(m,g){cc(m)&&t({hex:m,source:"hex"},g)},h=at(Di({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:_Q(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},l),{"hide-triangle":a==="hide"});return Y.createElement("div",{style:h.card,className:"block-picker "+u},Y.createElement("div",{style:h.triangle}),Y.createElement("div",{style:h.head},f&&Y.createElement(ip,{borderRadius:"6px 6px 0 0"}),Y.createElement("div",{style:h.label},i)),Y.createElement("div",{style:h.body},Y.createElement(gVe,{colors:s,onClick:d,onSwatchHover:r}),Y.createElement(Qt,{style:{input:h.input},value:i,onChange:d})))};MQ.propTypes={width:De.oneOfType([De.string,De.number]),colors:De.arrayOf(De.string),triangle:De.oneOf(["top","hide"]),styles:De.object};MQ.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Vi(MQ);var _f={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},Sf={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Qf={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},Rf={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Mf={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},Tf={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},Nf={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},kf={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},Df={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},bg={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},Vf={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},Lf={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},Pf={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},Wf={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},Of={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},Zf={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},Gf={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},Jf={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},Z5=function(e){var t=e.color,r=e.onClick,i=e.onSwatchHover,s=e.hover,o=e.active,a=e.circleSize,A=e.circleSpacing,l=at({default:{swatch:{width:a,height:a,marginRight:A,marginBottom:A,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:s,active:o});return Y.createElement("div",{style:l.swatch},Y.createElement(Mu,{style:l.Swatch,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:l.Swatch.boxShadow+", 0 0 5px "+t}}))};Z5.defaultProps={circleSize:28,circleSpacing:14};const mVe=BQ(Z5);var TQ=function(e){var t=e.width,r=e.onChange,i=e.onSwatchHover,s=e.colors,o=e.hex,a=e.circleSize,A=e.styles,l=A===void 0?{}:A,c=e.circleSpacing,u=e.className,f=u===void 0?"":u,d=at(Di({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},l)),h=function(m,g){return r({hex:m,source:"hex"},g)};return Y.createElement("div",{style:d.card,className:"circle-picker "+f},Tu(s,function(p){return Y.createElement(mVe,{key:p,color:p,onClick:h,onSwatchHover:i,active:o===p.toLowerCase(),circleSize:a,circleSpacing:c})}))};TQ.propTypes={width:De.oneOfType([De.string,De.number]),circleSize:De.number,circleSpacing:De.number,styles:De.object};TQ.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[_f[500],Sf[500],Qf[500],Rf[500],Mf[500],Tf[500],Nf[500],kf[500],Df[500],bg[500],Vf[500],Lf[500],Pf[500],Wf[500],Of[500],Zf[500],Gf[500],Jf[500]],styles:{}};Vi(TQ);function a3(n){return n===void 0}var G5={};Object.defineProperty(G5,"__esModule",{value:!0});var A3=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vVe=pe,l3=yVe(vVe);function yVe(n){return n&&n.__esModule?n:{default:n}}function BVe(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var by=24,wVe=G5.default=function(n){var e=n.fill,t=e===void 0?"currentColor":e,r=n.width,i=r===void 0?by:r,s=n.height,o=s===void 0?by:s,a=n.style,A=a===void 0?{}:a,l=BVe(n,["fill","width","height","style"]);return l3.default.createElement("svg",A3({viewBox:"0 0 "+by+" "+by,style:A3({fill:t,width:i,height:o},A)},l),l3.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},CVe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function bVe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function xVe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function IVe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var J5=function(n){IVe(e,n);function e(t){bVe(this,e);var r=xVe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.toggleViews=function(){r.state.view==="hex"?r.setState({view:"rgb"}):r.state.view==="rgb"?r.setState({view:"hsl"}):r.state.view==="hsl"&&(r.props.hsl.a===1?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(i,s){i.hex?cc(i.hex)&&r.props.onChange({hex:i.hex,source:"hex"},s):i.r||i.g||i.b?r.props.onChange({r:i.r||r.props.rgb.r,g:i.g||r.props.rgb.g,b:i.b||r.props.rgb.b,source:"rgb"},s):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},s)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),r.props.onChange({h:i.h||r.props.hsl.h,s:Number(a3(i.s)?r.props.hsl.s:i.s),l:Number(a3(i.l)?r.props.hsl.l:i.l),source:"hsl"},s))},r.showHighlight=function(i){i.currentTarget.style.background="#eee"},r.hideHighlight=function(i){i.currentTarget.style.background="transparent"},t.hsl.a!==1&&t.view==="hex"?r.state={view:"rgb"}:r.state={view:t.view},r}return CVe(e,[{key:"render",value:function(){var r=this,i=at({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=Y.createElement("div",{style:i.fields,className:"flexbox-fix"},Y.createElement("div",{style:i.field},Y.createElement(Qt,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=Y.createElement("div",{style:i.fields,className:"flexbox-fix"},Y.createElement("div",{style:i.field},Y.createElement(Qt,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),Y.createElement("div",{style:i.field},Y.createElement(Qt,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),Y.createElement("div",{style:i.field},Y.createElement(Qt,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),Y.createElement("div",{style:i.alpha},Y.createElement(Qt,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=Y.createElement("div",{style:i.fields,className:"flexbox-fix"},Y.createElement("div",{style:i.field},Y.createElement(Qt,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),Y.createElement("div",{style:i.field},Y.createElement(Qt,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),Y.createElement("div",{style:i.field},Y.createElement(Qt,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),Y.createElement("div",{style:i.alpha},Y.createElement(Qt,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),Y.createElement("div",{style:i.wrap,className:"flexbox-fix"},s,Y.createElement("div",{style:i.toggle},Y.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(a){return r.icon=a}},Y.createElement(wVe,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),e}(Y.Component);J5.defaultProps={view:"hex"};var c3=function(){var e=at({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Y.createElement("div",{style:e.picker})},FVe=function(){var e=at({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return Y.createElement("div",{style:e.picker})},NQ=function(e){var t=e.width,r=e.onChange,i=e.disableAlpha,s=e.rgb,o=e.hsl,a=e.hsv,A=e.hex,l=e.renderers,c=e.styles,u=c===void 0?{}:c,f=e.className,d=f===void 0?"":f,h=e.defaultView,p=at(Di({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},u),{disableAlpha:i});return Y.createElement("div",{style:p.picker,className:"chrome-picker "+d},Y.createElement("div",{style:p.saturation},Y.createElement(_b,{style:p.Saturation,hsl:o,hsv:a,pointer:FVe,onChange:r})),Y.createElement("div",{style:p.body},Y.createElement("div",{style:p.controls,className:"flexbox-fix"},Y.createElement("div",{style:p.color},Y.createElement("div",{style:p.swatch},Y.createElement("div",{style:p.active}),Y.createElement(ip,{renderers:l}))),Y.createElement("div",{style:p.toggles},Y.createElement("div",{style:p.hue},Y.createElement(sp,{style:p.Hue,hsl:o,pointer:c3,onChange:r})),Y.createElement("div",{style:p.alpha},Y.createElement(wQ,{style:p.Alpha,rgb:s,hsl:o,pointer:c3,renderers:l,onChange:r})))),Y.createElement(J5,{rgb:s,hsl:o,hex:A,view:h,onChange:r,disableAlpha:i})))};NQ.propTypes={width:De.oneOfType([De.string,De.number]),disableAlpha:De.bool,styles:De.object,defaultView:De.oneOf(["hex","rgb","hsl"])};NQ.defaultProps={width:225,disableAlpha:!1,styles:{}};Vi(NQ);var EVe=function(e){var t=e.color,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=e.active,a=at({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:_Q(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return Y.createElement(Mu,{style:a.color,color:t,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},Y.createElement("div",{style:a.dot}))},UVe=function(e){var t=e.hex,r=e.rgb,i=e.onChange,s=at({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(A,l){A.r||A.g||A.b?i({r:A.r||r.r,g:A.g||r.g,b:A.b||r.b,source:"rgb"},l):i({hex:A.hex,source:"hex"},l)};return Y.createElement("div",{style:s.fields,className:"flexbox-fix"},Y.createElement("div",{style:s.active}),Y.createElement(Qt,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:t,onChange:o}),Y.createElement(Qt,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:r.r,onChange:o}),Y.createElement(Qt,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:r.g,onChange:o}),Y.createElement(Qt,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:r.b,onChange:o}))},kQ=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.colors,s=e.hex,o=e.rgb,a=e.styles,A=a===void 0?{}:a,l=e.className,c=l===void 0?"":l,u=at(Di({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},A)),f=function(h,p){h.hex?cc(h.hex)&&t({hex:h.hex,source:"hex"},p):t(h,p)};return Y.createElement(F0,{style:u.Compact,styles:A},Y.createElement("div",{style:u.compact,className:"compact-picker "+c},Y.createElement("div",null,Tu(i,function(d){return Y.createElement(EVe,{key:d,color:d,active:d.toLowerCase()===s,onClick:f,onSwatchHover:r})}),Y.createElement("div",{style:u.clear})),Y.createElement(UVe,{hex:s,rgb:o,onChange:f})))};kQ.propTypes={colors:De.arrayOf(De.string),styles:De.object};kQ.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};Vi(kQ);var _Ve=function(e){var t=e.hover,r=e.color,i=e.onClick,s=e.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=at({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:t});return Y.createElement("div",{style:a.swatch},Y.createElement(Mu,{color:r,onClick:i,onHover:s,focusStyle:o}))};const SVe=BQ(_Ve);var DQ=function(e){var t=e.width,r=e.colors,i=e.onChange,s=e.onSwatchHover,o=e.triangle,a=e.styles,A=a===void 0?{}:a,l=e.className,c=l===void 0?"":l,u=at(Di({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},A),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right","bottom-left-triangle":o==="bottom-left","bottom-right-triangle":o==="bottom-right"}),f=function(h,p){return i({hex:h,source:"hex"},p)};return Y.createElement("div",{style:u.card,className:"github-picker "+c},Y.createElement("div",{style:u.triangleShadow}),Y.createElement("div",{style:u.triangle}),Tu(r,function(d){return Y.createElement(SVe,{color:d,key:d,onClick:f,onSwatchHover:s})}))};DQ.propTypes={width:De.oneOfType([De.string,De.number]),colors:De.arrayOf(De.string),triangle:De.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:De.object};DQ.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Vi(DQ);var QVe=function(e){var t=e.direction,r=at({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return Y.createElement("div",{style:r.picker})},RVe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},VQ=function(e){var t=e.width,r=e.height,i=e.onChange,s=e.hsl,o=e.direction,a=e.pointer,A=e.styles,l=A===void 0?{}:A,c=e.className,u=c===void 0?"":c,f=at(Di({default:{picker:{position:"relative",width:t,height:r},hue:{radius:"2px"}}},l)),d=function(p){return i({a:1,h:p.h,l:.5,s:1})};return Y.createElement("div",{style:f.picker,className:"hue-picker "+u},Y.createElement(sp,RVe({},f.hue,{hsl:s,pointer:a,onChange:d,direction:o})))};VQ.propTypes={styles:De.object};VQ.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:QVe,styles:{}};Vi(VQ);var MVe=function(e){var t=e.onChange,r=e.hex,i=e.rgb,s=e.styles,o=s===void 0?{}:s,a=e.className,A=a===void 0?"":a,l=at(Di({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),c=function(f,d){f.hex?cc(f.hex)&&t({hex:f.hex,source:"hex"},d):(f.r||f.g||f.b)&&t({r:f.r||i.r,g:f.g||i.g,b:f.b||i.b,source:"rgb"},d)};return Y.createElement(F0,{styles:o},Y.createElement("div",{style:l.material,className:"material-picker "+A},Y.createElement(Qt,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:r,onChange:c}),Y.createElement("div",{style:l.split,className:"flexbox-fix"},Y.createElement("div",{style:l.third},Y.createElement(Qt,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:i.r,onChange:c})),Y.createElement("div",{style:l.third},Y.createElement(Qt,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:i.g,onChange:c})),Y.createElement("div",{style:l.third},Y.createElement(Qt,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:i.b,onChange:c})))))};Vi(MVe);var TVe=function(e){var t=e.onChange,r=e.rgb,i=e.hsv,s=e.hex,o=at({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(l,c){l["#"]?cc(l["#"])&&t({hex:l["#"],source:"hex"},c):l.r||l.g||l.b?t({r:l.r||r.r,g:l.g||r.g,b:l.b||r.b,source:"rgb"},c):(l.h||l.s||l.v)&&t({h:l.h||i.h,s:l.s||i.s,v:l.v||i.v,source:"hsv"},c)};return Y.createElement("div",{style:o.fields},Y.createElement(Qt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(i.h),onChange:a}),Y.createElement(Qt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:a}),Y.createElement(Qt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:a}),Y.createElement("div",{style:o.divider}),Y.createElement(Qt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:r.r,onChange:a}),Y.createElement(Qt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:r.g,onChange:a}),Y.createElement(Qt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:r.b,onChange:a}),Y.createElement("div",{style:o.divider}),Y.createElement(Qt,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:s.replace("#",""),onChange:a}),Y.createElement("div",{style:o.fieldSymbols},Y.createElement("div",{style:o.symbol},"°"),Y.createElement("div",{style:o.symbol},"%"),Y.createElement("div",{style:o.symbol},"%")))},NVe=function(e){var t=e.hsl,r=at({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return Y.createElement("div",{style:r.picker})},kVe=function(){var e=at({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return Y.createElement("div",{style:e.pointer},Y.createElement("div",{style:e.left},Y.createElement("div",{style:e.leftInside})),Y.createElement("div",{style:e.right},Y.createElement("div",{style:e.rightInside})))},u3=function(e){var t=e.onClick,r=e.label,i=e.children,s=e.active,o=at({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return Y.createElement("div",{style:o.button,onClick:t},r||i)},DVe=function(e){var t=e.rgb,r=e.currentColor,i=at({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return Y.createElement("div",null,Y.createElement("div",{style:i.label},"new"),Y.createElement("div",{style:i.swatches},Y.createElement("div",{style:i.new}),Y.createElement("div",{style:i.current})),Y.createElement("div",{style:i.label},"current"))},VVe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function LVe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function PVe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function WVe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var LQ=function(n){WVe(e,n);function e(t){LVe(this,e);var r=PVe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.state={currentColor:t.hex},r}return VVe(e,[{key:"render",value:function(){var r=this.props,i=r.styles,s=i===void 0?{}:i,o=r.className,a=o===void 0?"":o,A=at(Di({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return Y.createElement("div",{style:A.picker,className:"photoshop-picker "+a},Y.createElement("div",{style:A.head},this.props.header),Y.createElement("div",{style:A.body,className:"flexbox-fix"},Y.createElement("div",{style:A.saturation},Y.createElement(_b,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:NVe,onChange:this.props.onChange})),Y.createElement("div",{style:A.hue},Y.createElement(sp,{direction:"vertical",hsl:this.props.hsl,pointer:kVe,onChange:this.props.onChange})),Y.createElement("div",{style:A.controls},Y.createElement("div",{style:A.top,className:"flexbox-fix"},Y.createElement("div",{style:A.previews},Y.createElement(DVe,{rgb:this.props.rgb,currentColor:this.state.currentColor})),Y.createElement("div",{style:A.actions},Y.createElement(u3,{label:"OK",onClick:this.props.onAccept,active:!0}),Y.createElement(u3,{label:"Cancel",onClick:this.props.onCancel}),Y.createElement(TVe,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(Y.Component);LQ.propTypes={header:De.string,styles:De.object};LQ.defaultProps={header:"Color Picker",styles:{}};Vi(LQ);var OVe=function(e){var t=e.onChange,r=e.rgb,i=e.hsl,s=e.hex,o=e.disableAlpha,a=at({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),A=function(c,u){c.hex?cc(c.hex)&&t({hex:c.hex,source:"hex"},u):c.r||c.g||c.b?t({r:c.r||r.r,g:c.g||r.g,b:c.b||r.b,a:r.a,source:"rgb"},u):c.a&&(c.a<0?c.a=0:c.a>100&&(c.a=100),c.a/=100,t({h:i.h,s:i.s,l:i.l,a:c.a,source:"rgb"},u))};return Y.createElement("div",{style:a.fields,className:"flexbox-fix"},Y.createElement("div",{style:a.double},Y.createElement(Qt,{style:{input:a.input,label:a.label},label:"hex",value:s.replace("#",""),onChange:A})),Y.createElement("div",{style:a.single},Y.createElement(Qt,{style:{input:a.input,label:a.label},label:"r",value:r.r,onChange:A,dragLabel:"true",dragMax:"255"})),Y.createElement("div",{style:a.single},Y.createElement(Qt,{style:{input:a.input,label:a.label},label:"g",value:r.g,onChange:A,dragLabel:"true",dragMax:"255"})),Y.createElement("div",{style:a.single},Y.createElement(Qt,{style:{input:a.input,label:a.label},label:"b",value:r.b,onChange:A,dragLabel:"true",dragMax:"255"})),Y.createElement("div",{style:a.alpha},Y.createElement(Qt,{style:{input:a.input,label:a.label},label:"a",value:Math.round(r.a*100),onChange:A,dragLabel:"true",dragMax:"100"})))},ZVe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},H5=function(e){var t=e.colors,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=at({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),a=function(l,c){i({hex:l,source:"hex"},c)};return Y.createElement("div",{style:o.colors,className:"flexbox-fix"},t.map(function(A){var l=typeof A=="string"?{color:A}:A,c=""+l.color+(l.title||"");return Y.createElement("div",{key:c,style:o.swatchWrap},Y.createElement(Mu,ZVe({},l,{style:o.swatch,onClick:a,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+l.color}})))}))};H5.propTypes={colors:De.arrayOf(De.oneOfType([De.string,De.shape({color:De.string,title:De.string})])).isRequired};var GVe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},PQ=function(e){var t=e.width,r=e.rgb,i=e.hex,s=e.hsv,o=e.hsl,a=e.onChange,A=e.onSwatchHover,l=e.disableAlpha,c=e.presetColors,u=e.renderers,f=e.styles,d=f===void 0?{}:f,h=e.className,p=h===void 0?"":h,m=at(Di({default:GVe({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},d),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},d),{disableAlpha:l});return Y.createElement("div",{style:m.picker,className:"sketch-picker "+p},Y.createElement("div",{style:m.saturation},Y.createElement(_b,{style:m.Saturation,hsl:o,hsv:s,onChange:a})),Y.createElement("div",{style:m.controls,className:"flexbox-fix"},Y.createElement("div",{style:m.sliders},Y.createElement("div",{style:m.hue},Y.createElement(sp,{style:m.Hue,hsl:o,onChange:a})),Y.createElement("div",{style:m.alpha},Y.createElement(wQ,{style:m.Alpha,rgb:r,hsl:o,renderers:u,onChange:a}))),Y.createElement("div",{style:m.color},Y.createElement(ip,null),Y.createElement("div",{style:m.activeColor}))),Y.createElement(OVe,{rgb:r,hsl:o,hex:i,onChange:a,disableAlpha:l}),Y.createElement(H5,{colors:c,onClick:a,onSwatchHover:A}))};PQ.propTypes={disableAlpha:De.bool,width:De.oneOfType([De.string,De.number]),styles:De.object};PQ.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const JVe=Vi(PQ);var $p=function(e){var t=e.hsl,r=e.offset,i=e.onClick,s=i===void 0?function(){}:i,o=e.active,a=e.first,A=e.last,l=at({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+r*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:a,last:A}),c=function(f){return s({h:t.h,s:.5,l:r,source:"hsl"},f)};return Y.createElement("div",{style:l.swatch,onClick:c})},HVe=function(e){var t=e.onClick,r=e.hsl,i=at({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return Y.createElement("div",{style:i.swatches},Y.createElement("div",{style:i.swatch},Y.createElement($p,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<s&&Math.abs(r.s-.5)<s,onClick:t,first:!0})),Y.createElement("div",{style:i.swatch},Y.createElement($p,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<s&&Math.abs(r.s-.5)<s,onClick:t})),Y.createElement("div",{style:i.swatch},Y.createElement($p,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<s&&Math.abs(r.s-.5)<s,onClick:t})),Y.createElement("div",{style:i.swatch},Y.createElement($p,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<s&&Math.abs(r.s-.5)<s,onClick:t})),Y.createElement("div",{style:i.swatch},Y.createElement($p,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<s&&Math.abs(r.s-.5)<s,onClick:t,last:!0})),Y.createElement("div",{style:i.clear}))},zVe=function(){var e=at({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Y.createElement("div",{style:e.picker})},WQ=function(e){var t=e.hsl,r=e.onChange,i=e.pointer,s=e.styles,o=s===void 0?{}:s,a=e.className,A=a===void 0?"":a,l=at(Di({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return Y.createElement("div",{style:l.wrap||{},className:"slider-picker "+A},Y.createElement("div",{style:l.hue},Y.createElement(sp,{style:l.Hue,hsl:t,pointer:i,onChange:r})),Y.createElement("div",{style:l.swatches},Y.createElement(HVe,{hsl:t,onClick:r})))};WQ.propTypes={styles:De.object};WQ.defaultProps={pointer:zVe,styles:{}};Vi(WQ);var z5={};Object.defineProperty(z5,"__esModule",{value:!0});var f3=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},XVe=pe,d3=YVe(XVe);function YVe(n){return n&&n.__esModule?n:{default:n}}function KVe(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var xy=24,jVe=z5.default=function(n){var e=n.fill,t=e===void 0?"currentColor":e,r=n.width,i=r===void 0?xy:r,s=n.height,o=s===void 0?xy:s,a=n.style,A=a===void 0?{}:a,l=KVe(n,["fill","width","height","style"]);return d3.default.createElement("svg",f3({viewBox:"0 0 "+xy+" "+xy,style:f3({fill:t,width:i,height:o},A)},l),d3.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},$Ve=function(e){var t=e.color,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=e.first,a=e.last,A=e.active,l=at({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:_Q(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:a,active:A,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return Y.createElement(Mu,{color:t,style:l.color,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},Y.createElement("div",{style:l.check},Y.createElement(jVe,null)))},qVe=function(e){var t=e.onClick,r=e.onSwatchHover,i=e.group,s=e.active,o=at({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return Y.createElement("div",{style:o.group},Tu(i,function(a,A){return Y.createElement($Ve,{key:a,color:a,active:a.toLowerCase()===s,first:A===0,last:A===i.length-1,onClick:t,onSwatchHover:r})}))},OQ=function(e){var t=e.width,r=e.height,i=e.onChange,s=e.onSwatchHover,o=e.colors,a=e.hex,A=e.styles,l=A===void 0?{}:A,c=e.className,u=c===void 0?"":c,f=at(Di({default:{picker:{width:t,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},l)),d=function(p,m){return i({hex:p,source:"hex"},m)};return Y.createElement("div",{style:f.picker,className:"swatches-picker "+u},Y.createElement(F0,null,Y.createElement("div",{style:f.overflow},Y.createElement("div",{style:f.body},Tu(o,function(h){return Y.createElement(qVe,{key:h.toString(),group:h,active:a,onClick:d,onSwatchHover:s})}),Y.createElement("div",{style:f.clear})))))};OQ.propTypes={width:De.oneOfType([De.string,De.number]),height:De.oneOfType([De.string,De.number]),colors:De.arrayOf(De.arrayOf(De.string)),styles:De.object};OQ.defaultProps={width:320,height:240,colors:[[_f[900],_f[700],_f[500],_f[300],_f[100]],[Sf[900],Sf[700],Sf[500],Sf[300],Sf[100]],[Qf[900],Qf[700],Qf[500],Qf[300],Qf[100]],[Rf[900],Rf[700],Rf[500],Rf[300],Rf[100]],[Mf[900],Mf[700],Mf[500],Mf[300],Mf[100]],[Tf[900],Tf[700],Tf[500],Tf[300],Tf[100]],[Nf[900],Nf[700],Nf[500],Nf[300],Nf[100]],[kf[900],kf[700],kf[500],kf[300],kf[100]],[Df[900],Df[700],Df[500],Df[300],Df[100]],["#194D33",bg[700],bg[500],bg[300],bg[100]],[Vf[900],Vf[700],Vf[500],Vf[300],Vf[100]],[Lf[900],Lf[700],Lf[500],Lf[300],Lf[100]],[Pf[900],Pf[700],Pf[500],Pf[300],Pf[100]],[Wf[900],Wf[700],Wf[500],Wf[300],Wf[100]],[Of[900],Of[700],Of[500],Of[300],Of[100]],[Zf[900],Zf[700],Zf[500],Zf[300],Zf[100]],[Gf[900],Gf[700],Gf[500],Gf[300],Gf[100]],[Jf[900],Jf[700],Jf[500],Jf[300],Jf[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Vi(OQ);var ZQ=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.hex,s=e.colors,o=e.width,a=e.triangle,A=e.styles,l=A===void 0?{}:A,c=e.className,u=c===void 0?"":c,f=at(Di({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},l),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),d=function(p,m){cc(p)&&t({hex:p,source:"hex"},m)};return Y.createElement("div",{style:f.card,className:"twitter-picker "+u},Y.createElement("div",{style:f.triangleShadow}),Y.createElement("div",{style:f.triangle}),Y.createElement("div",{style:f.body},Tu(s,function(h,p){return Y.createElement(Mu,{key:p,color:h,hex:h,style:f.swatch,onClick:d,onHover:r,focusStyle:{boxShadow:"0 0 4px "+h}})}),Y.createElement("div",{style:f.hash},"#"),Y.createElement(Qt,{label:null,style:{input:f.input},value:i.replace("#",""),onChange:d}),Y.createElement("div",{style:f.clear})))};ZQ.propTypes={width:De.oneOfType([De.string,De.number]),triangle:De.oneOf(["hide","top-left","top-right"]),colors:De.arrayOf(De.string),styles:De.object};ZQ.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Vi(ZQ);var GQ=function(e){var t=at({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return Y.createElement("div",{style:t.picker})};GQ.propTypes={hsl:De.shape({h:De.number,s:De.number,l:De.number,a:De.number})};GQ.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var JQ=function(e){var t=at({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return Y.createElement("div",{style:t.picker})};JQ.propTypes={hsl:De.shape({h:De.number,s:De.number,l:De.number,a:De.number})};JQ.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var eLe=function(e){var t=e.onChange,r=e.rgb,i=e.hsl,s=e.hex,o=e.hsv,a=function(d,h){if(d.hex)cc(d.hex)&&t({hex:d.hex,source:"hex"},h);else if(d.rgb){var p=d.rgb.split(",");P1(d.rgb,"rgb")&&t({r:p[0],g:p[1],b:p[2],a:1,source:"rgb"},h)}else if(d.hsv){var m=d.hsv.split(",");P1(d.hsv,"hsv")&&(m[2]=m[2].replace("%",""),m[1]=m[1].replace("%",""),m[0]=m[0].replace("°",""),m[1]==1?m[1]=.01:m[2]==1&&(m[2]=.01),t({h:Number(m[0]),s:Number(m[1]),v:Number(m[2]),source:"hsv"},h))}else if(d.hsl){var g=d.hsl.split(",");P1(d.hsl,"hsl")&&(g[2]=g[2].replace("%",""),g[1]=g[1].replace("%",""),g[0]=g[0].replace("°",""),u[1]==1?u[1]=.01:u[2]==1&&(u[2]=.01),t({h:Number(g[0]),s:Number(g[1]),v:Number(g[2]),source:"hsl"},h))}},A=at({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),l=r.r+", "+r.g+", "+r.b,c=Math.round(i.h)+"°, "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",u=Math.round(o.h)+"°, "+Math.round(o.s*100)+"%, "+Math.round(o.v*100)+"%";return Y.createElement("div",{style:A.wrap,className:"flexbox-fix"},Y.createElement("div",{style:A.fields},Y.createElement("div",{style:A.double},Y.createElement(Qt,{style:{input:A.input,label:A.label},label:"hex",value:s,onChange:a})),Y.createElement("div",{style:A.column},Y.createElement("div",{style:A.single},Y.createElement(Qt,{style:{input:A.input2,label:A.label2},label:"rgb",value:l,onChange:a})),Y.createElement("div",{style:A.single},Y.createElement(Qt,{style:{input:A.input2,label:A.label2},label:"hsv",value:u,onChange:a})),Y.createElement("div",{style:A.single},Y.createElement(Qt,{style:{input:A.input2,label:A.label2},label:"hsl",value:c,onChange:a})))))},HQ=function(e){var t=e.width,r=e.onChange,i=e.rgb,s=e.hsl,o=e.hsv,a=e.hex,A=e.header,l=e.styles,c=l===void 0?{}:l,u=e.className,f=u===void 0?"":u,d=at(Di({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return Y.createElement("div",{style:d.picker,className:"google-picker "+f},Y.createElement("div",{style:d.head},A),Y.createElement("div",{style:d.swatch}),Y.createElement("div",{style:d.saturation},Y.createElement(_b,{hsl:s,hsv:o,pointer:GQ,onChange:r})),Y.createElement("div",{style:d.body},Y.createElement("div",{style:d.controls,className:"flexbox-fix"},Y.createElement("div",{style:d.hue},Y.createElement(sp,{style:d.Hue,hsl:s,radius:"4px",pointer:JQ,onChange:r}))),Y.createElement(eLe,{rgb:i,hsl:s,hex:a,hsv:o,onChange:r})))};HQ.propTypes={width:De.oneOfType([De.string,De.number]),styles:De.object,header:De.string};HQ.defaultProps={width:652,styles:{},header:"Color picker"};Vi(HQ);function tLe({confirmDialog:n,uploadVRMURL:e,templateInfo:t,animationManager:r,blinkManager:i,lookatManager:s,effectManager:o}){const{avatar:a,setAvatar:A,currentTraitName:l,currentOptions:c,selectedOptions:u,setSelectedOptions:f,model:d,setLipSync:h,mousePosition:p,removeOption:m,saveUserSelection:g,setIsChangingWholeAvatar:v,debugMode:y,setDisplayTraitOption:w,vrmHelperRoot:C}=pe.useContext(ki),{playSound:b}=pe.useContext(io),{isMute:F}=pe.useContext(to),{isLoading:I,setIsLoading:S}=pe.useContext(ro);pe.useContext(ao);const[T,H]=pe.useState("0"),[,X]=pe.useState(1),[Q,B]=pe.useState(null),[E,R]=pe.useState(new Map),[k,M]=pe.useState(new Ne(16777215)),L=(te,Ae)=>{R(E.set(te,Ae))},Z=()=>{R(new Map)};pe.useEffect(()=>{B(U())},[t]),pe.useEffect(()=>{e!=null&&e!=""&&(console.log(e),oe(e))},[e]);const P=te=>{M({background:te.hex});const Ae=new Ne(te.hex);a[l]&&a[l].vrm.scene.traverse(re=>{re.isMesh&&(re.material.type==="MeshStandardMaterial"?Array.isArray(re.material)?re.material.forEach(me=>{me.color=Ae,me.emissive=Ae}):(re.material.color=Ae,re.material.emissive=Ae):(re.material[0].uniforms.litFactor.value=Ae,re.material[0].uniforms.shadeColorFactor.value=new Ne(Ae.r*.8,Ae.g*.8,Ae.b*.8)))})},U=()=>{const te=t.traitRestrictions,Ae={};for(const re in te)$t(te[re].restrictedTraits).map(me=>{te[me]==null&&(te[me]={}),te[me].restrictedTraits==null&&(te[me].restrictedTraits=[]),te[me].restrictedTraits=[...new Set([...te[me].restrictedTraits,re])]}),$t(te[re].restrictedTypes).map(me=>{Ae[me]==null&&(Ae[me]={}),Ae[me].restrictedTraits==null&&(Ae[me].restrictedTraits=[]),Ae[me].restrictedTraits=[...new Set([...Ae[me].restrictedTraits,re])]});for(const re in t.typeRestrictions)Ae[re]==null&&(Ae[re]={}),Ae[re].restrictedTypes==null&&(Ae[re].restrictedTypes=[]),Ae[re].restrictedTypes=[...new Set([...Ae[re].restrictedTypes,...$t(t.typeRestrictions[re])])],$t(t.typeRestrictions[re]).map(me=>{Ae[me]==null&&(Ae[me]={}),Ae[me].restrictedTypes==null&&(Ae[me].restrictedTypes=[]),Ae[me].restrictedTypes=[...new Set([...Ae[me].restrictedTypes,re])]});return{traitRestrictions:te,typeRestrictions:Ae}},G=te=>{ce(te).then(Ae=>{let re={};Ae.map(Pe=>{re={...re,...$(Pe)}});const me={...a,...re};setTimeout(()=>{Object.keys(me).length>0&&Nd(me),!F&&b("characterLoad",300)},o.transitionTime),A(me)})};pe.useEffect(()=>{u.length>0&&(v(!0),u.length>1&&(o.setTransitionEffect("fade_out_avatar"),o.playFadeOutEffect(),Z()),G(u),f([]))},[u]);const oe=te=>{if(l){const Ae={item:{id:"custom_"+l,name:"Custom "+l,directory:te},trait:t.traits.find(re=>re.name===l)};o.setTransitionEffect("switch_item"),ce([Ae],!1,!1,!1).then(re=>{URL.revokeObjectURL(te);let me={};re.map(_e=>{me={...me,...$(_e)}});const Pe={...a,...me};setTimeout(()=>{Object.keys(Pe).length>0&&Nd(Pe)},o.transitionTime),A(Pe)})}else console.log("Please select a trait first")},D=async()=>{var te=document.createElement("input");te.type="file",te.accept=".vrm",te.onchange=Ae=>{var re=Ae.target.files[0];if(re.name.endsWith(".vrm")){const me=URL.createObjectURL(re);oe(me)}},te.click()},K=te=>{const Ae=te!=null;if(!I){if(te==null)te={item:null,trait:t.traits.find(re=>re.name===l)};else if(E.get(te.trait.trait)===te.key)return;te.avatarIndex==null&&(o.setTransitionEffect("switch_item"),te.selected=!0,ce($t(te),Ae).then(re=>{let me={};re.map(_e=>{me={...me,...$(_e)}});const Pe={...a,...me};setTimeout(()=>{Object.keys(Pe).length>0&&Nd(Pe)},o.transitionTime),A(Pe)}),w(te==null?void 0:te.item))}},ce=(te,Ae=!0,re=!0,me=!0)=>{for(const Ue of te)L(Ue.trait.trait,Ue.key);Ae&&(te=le(te)),me&&g(te);let Pe=!0;if(te.map(Ue=>{Ue.item!=null&&(Pe=!1)}),Pe===!0)return new Promise(Ue=>{Ue(te)});S(!0);const _e=new aZ,Se=new rb(_e);Se.crossOrigin="anonymous",Se.register(Ue=>new wG(Ue,{autoUpdateHumanBones:!0}));const Fe=new xu(_e);return _e.onProgress=function(Ue,Me,W){X(Math.round(Me/W*100))},new Promise(Ue=>{const Me=[];_e.onLoad=function(){X(0),Ue(Me),S(!1)},_e.onError=function(O){console.log("currentTraits",Me),console.warn("error loading "+O)},_e.onProgress=function(O,se,de){X(Math.round(se/de*100))};const W=re?(t.assetsLocation||"")+t.traitsDirectory:"";te.map((O,se)=>{var x,N,j;if(O.selected&&H(O.key),O==null){Me[se]=null;return}const de=[],Be=$t((x=O==null?void 0:O.item)==null?void 0:x.directory);try{Be.forEach(async(q,ne)=>{try{const Ce=await Se.loadAsync(W+q);de[ne]=Ce}catch(Ce){console.error(`Error loading model ${q}:`,Ce),te.splice(se,1),Me.splice(se,1)}})}catch(q){console.error("An error occurred:",q)}const V=[];$t((N=O==null?void 0:O.textureTrait)==null?void 0:N.directory).map((q,ne)=>{Fe.load(W+q,Ce=>{Ce.flipY=!1,V[ne]=Ce})});const _=[];$t((j=O==null?void 0:O.colorTrait)==null?void 0:j.value).map((q,ne)=>{_[ne]=new Ne(q)}),Me[se]={item:O==null?void 0:O.item,trait:O==null?void 0:O.trait,textureTrait:O==null?void 0:O.textureTrait,colorTrait:O==null?void 0:O.colorTrait,models:de,textures:V,colors:_}})})},le=te=>{var re,me,Pe;let Ae=[];for(let _e=0;_e<te.length;_e++){const Se=te[_e];if(!Ae.includes(Se.trait.name)){const Fe=Q==null?void 0:Q.typeRestrictions;Fe&&$t((re=Se.item)==null?void 0:re.type).map(Me=>{var W,O;Ae=[...new Set([...Ae,...he($t((W=Fe[Me])==null?void 0:W.restrictedTypes)),...$t((O=Fe[Me])==null?void 0:O.restrictedTraits)])]});const Ue=Q==null?void 0:Q.traitRestrictions;Ue&&(Ae=[...new Set([...Ae,...he($t((me=Ue[Se.trait.name])==null?void 0:me.restrictedTypes)),...$t((Pe=Ue[Se.trait.name])==null?void 0:Pe.restrictedTraits)])])}}return Ae.forEach(_e=>{var Fe;let Se=!1;L(_e,null);for(let Ue=0;Ue<te.length;Ue++)if(((Fe=te[Ue].trait)==null?void 0:Fe.name)===_e){te[Ue]={item:null,trait:t.traits.find(Me=>Me.name===_e)},Se=!0;break}Se||te.push({item:null,trait:t.traits.find(Ue=>Ue.name===_e)})}),te},he=te=>{var re,me;const Ae=[];for(const Pe in a)for(let _e=0;_e<te.length;_e++){const Se=te[_e];if((me=(re=a[Pe].traitInfo)==null?void 0:re.type)!=null&&me.includes(Se)){Ae.push(Pe);break}}return Ae},$=te=>{const Ae=te.item,re=te.trait,me=te.textureTrait,Pe=te.colorTrait,_e=te.models,Se=te.textures,Fe=te.colors;if(Ae==null)return a&&a[re.name]&&a[re.name].vrm&&setTimeout(()=>{Qm(a[re.name].vrm)},o.transitionTime),{[re.name]:{}};const Ue=[];let Me=null;if(_e.map(W=>{Me=W.userData.vrm,$t(t.colliderTraits).indexOf(re.trait)!==-1&&owe(W),$t(t.lipSyncTraits).indexOf(re.trait)!==-1&&h(new $w(Me)),DG(Me),$t(t.blinkerTraits).indexOf(re.trait)!==-1&&i.addBlinker(Me),s.addVRM(Me);const O=t.exportScale||1;Me.scene.scale.set(O,O,O);const se=t.offset;se!=null&&Me.scene.position.set(se[0],se[1],se[2]),r.startAnimation(Me),Ae.meshTargets&&$t(Ae.meshTargets).map(V=>{const _=Me.scene.getObjectByName(V);_!=null&&_.isMesh&&Ue.push(_)});const de=$t(Ae.cullingIgnore),Be=[];Me.scene.traverse(V=>{var _;if(!Ae.meshTargets&&V.isMesh&&Ue.push(V),V.frustumCulled=!1,V.isMesh){V.origMat=V.material;const x=()=>{const ne=.1+Math.random()*.9,Ce=.1+Math.random()*(1-.1),be=.1+Math.random()*(1-.1);return new Ne(ne,Ce,be)},N=new is({color:x(),wireframe:!0,wireframeLinewidth:.2}),j=V.material;if(V.setDebugMode=q=>{q?V.material.length?(V.material[0]=N,V.material[1]=N):V.material=N:V.material=j},y&&V.setDebugMode(!0),V.material.length?(o.setCustomShader(V.material[0]),o.setCustomShader(V.material[1])):o.setCustomShader(V.material),de.indexOf(V.name)===-1&&Be.push(V),V.isSkinnedMesh&&(Due(V),((_=Me.meta)==null?void 0:_.metaVersion)==="0")){Vh.rotateVRM0(Me),console.log("Loaded VRM0 file ",Me);for(let q=0;q<V.skeleton.bones.length;q++)V.skeleton.bones[q].userData.vrm0RestPosition={...V.skeleton.bones[q].position};V.userData.isVRM0=!0}}}),kG(Me,{cullingLayer:Ae.cullingLayer!=null?Ae.cullingLayer:re.cullingLayer!=null?re.cullingLayer:t.defaultCullingLayer!=null?t.defaultCullingLayer:-1,cullingDistance:Ae.cullingDistance!=null?Ae.cullingDistance:re.cullingDistance!=null?re.cullingDistance:t.defaultCullingDistance!=null?t.defaultCullingDistance:null,maxCullingDistance:Ae.maxCullingDistance!=null?Ae.maxCullingDistance:re.maxCullingDistance!=null?re.maxCullingDistance:t.maxCullingDistance!=null?t.maxCullingDistance:1/0,cullingMeshes:Be})}),Ue.map((W,O)=>{if(Se){const se=Se[O]||Se[0];se!=null&&(W.material[0].map=se,W.material[0].shadeMultiplyTexture=se)}if(Fe){const se=Fe[O]||Fe[0];se!=null&&(W.material[0].uniforms.litFactor.value=se,W.material[0].uniforms.shadeColorFactor.value=new Ne(se.r*.8,se.g*.8,se.b*.8))}}),a&&a[re.name]&&a[re.name].vrm&&setTimeout(()=>{Qm(a[re.name].vrm)},o.transitionTime),Me){const W=Me.scene;W.visible=!1,d.add(W),r.update(),setTimeout(()=>{const O=new Event("mousemove");O.x=p.x,O.y=p.y,window.dispatchEvent(O),W.visible=!0,o.getTransitionEffect("switch_item")?o.playSwitchItemEffect():o.playFadeInEffect()},o.transitionTime)}return{[re.name]:{traitInfo:Ae,textureInfo:me,colorInfo:Pe,name:Ae.name,model:Me&&Me.scene,vrm:Me}}};function ae(){const te=!!E.get(l);return m?J.jsx("div",{className:`${pi.selectorButton} ${pi["selector-button"]} ${l?"":pi.active}`,onClick:()=>{o.getTransitionEffect("normal")&&(K(null),H(""),o.setTransitionEffect("normal"),w(null))},children:J.jsx(IU,{size:56,resolution:2048,numFrames:128,id:"head",icon:RBe,rarity:te?"none":"mythic"})},"no-trait"):J.jsx(J.Fragment,{})}return!!l&&J.jsx("div",{children:J.jsxs("div",{className:pi.SelectorContainerPos,children:[J.jsx(JVe,{color:k.background,onChangeComplete:P}),J.jsx(Kh,{title:l,width:130,left:20}),J.jsx("div",{className:pi.bottomLine}),J.jsx("div",{className:pi.scrollContainer,children:J.jsxs("div",{className:pi["selector-container"],children:[J.jsx(ae,{}),c.map(te=>{let Ae=te.key===T;return E.size===0?Ae=!1:Ae=E.get(te.trait.trait)===te.key,J.jsxs("div",{className:`${pi.selectorButton} ${pi["selector-button"]} ${Ae?pi.active:""}`,onClick:()=>{o.getTransitionEffect("normal")&&(K(te),X(1))},children:[J.jsx(IU,{size:56,resolution:2048,numFrames:128,icon:te.icon,rarity:Ae?"mythic":"none",style:te.iconHSL?{filter:"brightness("+(te.iconHSL.l+.5)+") hue-rotate("+te.iconHSL.h*360+"deg) saturate("+te.iconHSL.s*100+"%)"}:{}}),J.jsx("img",{src:MBe,className:a[l]&&a[l].id===te.item.id?pi.tickStyle:pi.tickStyleInActive})]},te.key)})]})}),J.jsx("div",{className:pi.uploadContainer,children:J.jsx("div",{className:pi.uploadButton,onClick:D,children:J.jsx("div",{children:"Upload "})})})]})})}const nLe="_InformationContainerPos_1a135_2",rLe="_scrollContainer_1a135_15",iLe="_traitInfoTitle_1a135_26",sLe="_traitInfoText_1a135_34",oLe="_flexSelect_1a135_61",aLe="_checked_1a135_118",ALe="_checkmark_1a135_122",lLe="_checkboxHolder_1a135_135",_n={InformationContainerPos:nLe,scrollContainer:rLe,traitInfoTitle:iLe,traitInfoText:sLe,"input-box":"_input-box_1a135_42",flexSelect:oLe,"arrow-button":"_arrow-button_1a135_69","left-button":"_left-button_1a135_85","right-button":"_right-button_1a135_92","anim-button":"_anim-button_1a135_99","custom-checkbox":"_custom-checkbox_1a135_104","checkbox-container":"_checkbox-container_1a135_109",checked:aLe,checkmark:ALe,checkboxHolder:lLe};function cLe({animationManager:n,lookatManager:e}){const{displayTraitOption:t,avatar:r,currentVRM:i}=pe.useContext(ki),[s,o]=pe.useState(0),[a,A]=pe.useState(0),[l,c]=pe.useState(0),[u,f]=pe.useState(n.getCurrentAnimationName()),[d,h]=pe.useState(e.userActivated);pe.useEffect(()=>{var C,b,F;i!=null&&(c((C=i==null?void 0:i.data)==null?void 0:C.cullingLayer),o(((b=i==null?void 0:i.data)==null?void 0:b.cullingDistance[0])||0),A(((F=i==null?void 0:i.data)==null?void 0:F.cullingDistance[1])||0))},[i]),pe.useEffect(()=>{f(n.getCurrentAnimationName())},[n.currentAnimationName]);const p=C=>{o(C.target.value),i!=null&&i.data&&(i.data.cullingDistance[0]=C.target.value),Nd(r)},m=C=>{A(C.target.value),i!=null&&i.data&&(i.data.cullingDistance[1]=C.target.value),Nd(r)},g=C=>{console.log(e.enabled),i!=null&&i.data&&(c(C.target.value),i.data.cullingLayer=C.target.value,Nd(r))},v=async()=>{await n.loadNextAnimation(),f(n.getCurrentAnimationName())},y=async()=>{await n.loadPreviousAnimation(),f(n.getCurrentAnimationName())},w=C=>{h(C.target.checked),e.setActive(C.target.checked),n.enableMouseLook(C.target.checked)};return t!=null?J.jsx("div",{children:J.jsxs("div",{className:_n.InformationContainerPos,children:[J.jsx(Kh,{title:"Trait Information",width:180,right:20}),J.jsxs("div",{className:_n.scrollContainer,children:[J.jsx("div",{className:_n.traitInfoTitle,children:"Trait ID"}),J.jsx("div",{className:_n.traitInfoText,children:t==null?void 0:t.id}),J.jsx("div",{className:_n.traitInfoTitle,children:"Trait Name"}),J.jsx("div",{className:_n.traitInfoText,children:t==null?void 0:t.name}),J.jsx("div",{className:_n.traitInfoTitle,children:"Description"}),J.jsx("div",{className:_n.traitInfoText,children:(t==null?void 0:t.description)||"A nice "+(t==null?void 0:t.name)}),J.jsx("div",{className:_n.traitInfoTitle,children:"Culling Options"}),J.jsxs("div",{className:_n.traitInfoText,children:["Culling Layer",J.jsx("input",{type:"number",min:"0",max:"100",value:l,onChange:g,className:_n["input-box"],step:1}),J.jsx("br",{}),J.jsx("br",{}),"Cull Out Distance",J.jsx(yd,{value:s,onChange:p,min:0,max:1,step:.001,stepBox:.01}),J.jsx("br",{}),"Cull In Distance",J.jsx(yd,{value:a,onChange:m,min:0,max:1,step:.001,stepBox:.01})]}),J.jsx("div",{className:_n.traitInfoTitle,children:"Animation"}),J.jsx("br",{}),J.jsxs("div",{className:_n.flexSelect,children:[J.jsx("div",{className:`${_n["arrow-button"]} ${_n["left-button"]}`,onClick:y}),J.jsx("div",{className:_n.traitInfoText,children:u}),J.jsx("div",{className:`${_n["arrow-button"]} ${_n["right-button"]}`,onClick:v})]}),J.jsx("div",{className:_n.traitInfoText,children:J.jsxs("div",{className:_n.checkboxHolder,children:[J.jsx("div",{children:"Mouse Follow"}),J.jsxs("label",{className:_n["custom-checkbox"],children:[J.jsx("input",{type:"checkbox",checked:d,onChange:w}),J.jsx("div",{className:_n["checkbox-container"]})]})]})})]})]})}):J.jsx(J.Fragment,{})}const uLe="_InformationContainerPos_k0nn7_2",fLe="_scrollContainer_k0nn7_15",dLe="_traitInfoTitle_k0nn7_27",hLe="_traitInfoText_k0nn7_35",pLe="_flexSelect_k0nn7_62",gLe="_checked_k0nn7_119",mLe="_checkmark_k0nn7_123",vLe="_checkboxHolder_k0nn7_136",ja={InformationContainerPos:uLe,scrollContainer:fLe,traitInfoTitle:dLe,traitInfoText:hLe,"input-box":"_input-box_k0nn7_43",flexSelect:pLe,"arrow-button":"_arrow-button_k0nn7_70","left-button":"_left-button_k0nn7_86","right-button":"_right-button_k0nn7_93","anim-button":"_anim-button_k0nn7_100","custom-checkbox":"_custom-checkbox_k0nn7_105","checkbox-container":"_checkbox-container_k0nn7_110",checked:gLe,checkmark:mLe,checkboxHolder:vLe};function yLe({jsonSelectionArray:n}){const{setSelectedOptions:e}=pe.useContext(ki),[t,r]=pe.useState(0),i=async()=>{if(t>=n.length-1)e(n[0].options),r(0);else{const o=t+1;e(n[o].options),r(o)}},s=async()=>{if(console.log("prev"),t<=0)e(n[n.length-1].options),r(n.length-1);else{const o=t-1;e(n[o].options),r(o)}};return(n==null?void 0:n.length)>0?J.jsxs("div",{className:ja.InformationContainerPos,children:[J.jsx(Kh,{title:"TraitSelection",width:180,right:20}),J.jsxs("div",{className:ja.scrollContainer,children:[J.jsxs("div",{className:ja.flexSelect,children:[(n==null?void 0:n.length)>1?J.jsx("div",{className:`${ja["arrow-button"]} ${ja["left-button"]}`,onClick:s}):J.jsx(J.Fragment,{}),n[t].name&&J.jsx("div",{style:{textAlign:"center",flex:1},children:J.jsx("div",{className:ja.traitInfoTitle,children:n[t].name})}),(n==null?void 0:n.length)>1?J.jsx("div",{className:`${ja["arrow-button"]} ${ja["right-button"]}`,onClick:i}):J.jsx(J.Fragment,{})]}),n[t].thumb&&J.jsx("img",{src:n[t].thumb,alt:"Selection Thumbnail",style:{width:"280px",height:"460px",display:"block",margin:"20px auto 20px"}}),n[t].attributes.map(o=>J.jsx("div",{children:J.jsx("div",{className:ja.traitInfoText,children:`${o.trait} : ${o.id}`})},`json:${o.trait}_${o.name}`))]})]}):J.jsx(J.Fragment,{})}function BLe({uploadTextureURL:n,uploadVRMURL:e,confirmDialog:t,animationManager:r,blinkManager:i,lookatManager:s,effectManager:o,jsonSelectionArray:a}){const{currentTraitName:A,setCurrentTraitName:l,awaitDisplay:c,setCurrentOptions:u,setSelectedOptions:f,setAwaitDisplay:d,setRemoveOption:h,loadUserSelection:p,templateInfo:m,manifestSelectionIndex:g,moveCamera:v,avatar:y,setDisplayTraitOption:w,currentVRM:C,setCurrentVRM:b}=pe.useContext(ki),{isMute:F}=pe.useContext(to);pe.useContext(ao);const{playSound:I}=pe.useContext(io),[S,T]=Y.useState(!1);pe.useEffect(()=>{c&&(f(WG(m)),d(!1)),l(null)},[m]),pe.useEffect(()=>{n!=null&&C!=null&&Que(C.scene,n)},[n]);const H=X=>{var Q,B;if(!F&&I("optionClick"),X.name===A){w(null),S?(v({targetY:X.cameraTarget.height,distance:X.cameraTarget.distance}),T(!1)):(v({targetY:.8,distance:3.2}),T(!0)),l(null),b(null);return}h($t(m.requiredTraits).indexOf(X.name)===-1),v({targetY:X.cameraTarget.height,distance:X.cameraTarget.distance}),u(OG(X,m)),l(X.name),w((Q=y[X.name])==null?void 0:Q.traitInfo),b((B=y[X.name])==null?void 0:B.vrm)};return J.jsxs(pe.Fragment,{children:[J.jsxs("div",{className:Xp.SideMenu,children:[J.jsx(Kh,{title:"Appearance",left:20}),J.jsx("div",{className:Xp.bottomLine}),J.jsx("div",{className:Xp.scrollContainer,children:J.jsx("div",{className:Xp["selector-container"],children:m.traits&&m.traits.map((X,Q)=>J.jsxs("div",{className:Xp.selectorButton,children:[J.jsx(IU,{size:56,resolution:2048,numFrames:128,icon:(m.assetsLocation||"")+m.traitIconsDirectorySvg+X.iconSvg,rarity:A!==X.name?"none":"mythic",onClick:()=>{H(X)}}),X.name]},Q))})})]}),J.jsx(tLe,{confirmDialog:t,animationManager:r,templateInfo:m,blinkManager:i,lookatManager:s,effectManager:o,uploadVRMURL:e}),J.jsx(yLe,{jsonSelectionArray:a}),J.jsx(cLe,{currentVRM:C,animationManager:r,lookatManager:s})]})}const wLe="_dropArea_1a0z4_1",CLe={dropArea:wLe};function X5({onFilesDrop:n}){const[e,t]=pe.useState(!1);pe.useEffect(()=>{const i=o=>{o.preventDefault(),t(!1);const a=o.dataTransfer.files;n&&n(a)},s=o=>{o.preventDefault(),t(!0)};return window.addEventListener("drop",i),window.addEventListener("dragover",s),()=>{window.removeEventListener("drop",i),window.removeEventListener("dragover",s)}},[]);const r=()=>{t(!1)};return J.jsx("div",{onDragLeave:r,className:CLe.dropArea,style:{display:e?"flex":"none"}})}function bLe({animationManager:n,blinkManager:e,lookatManager:t,effectManager:r,confirmDialog:i}){const{isLoading:s,setViewMode:o}=Y.useContext(ro),{resetAvatar:a,getRandomCharacter:A,isChangingWholeAvatar:l,setIsChangingWholeAvatar:c,toggleDebugMNode:u,templateInfo:f,setSelectedOptions:d,setCurrentVRM:h,setDisplayTraitOption:p}=Y.useContext(ki),{playSound:m}=Y.useContext(io),{isMute:g}=Y.useContext(to),v=()=>{!g&&m("backNextButton"),a(),o(St.CREATE),p(null)},[y,w]=Y.useState(null),[C,b]=Y.useState(null),[F,I]=Y.useState(null),S=()=>{!g&&m("backNextButton"),o(St.BIO),p(null)},T=()=>{l||(!g&&m("randomizeButton"),A())},H=()=>{u()};pe.useEffect(()=>{const k=()=>c(!1);return r.addEventListener("fadeintraitend",k),r.addEventListener("fadeinavatarend",k),()=>{r.removeEventListener("fadeintraitend",k),r.removeEventListener("fadeinavatarend",k)}},[]);const{t:X}=pe.useContext(ao),Q=async k=>{const M=Bw(k.name),L=URL.createObjectURL(k);await n.loadAnimation(L,!0,"",M)},B=k=>{const M=URL.createObjectURL(k);b(M)},E=k=>{const M=URL.createObjectURL(k);I(M)},R=async k=>{const M=k[0];M&&M.name.toLowerCase().endsWith(".fbx")&&Q(M),M&&(M.name.toLowerCase().endsWith(".png")||M.name.toLowerCase().endsWith(".jpg"))&&B(M),M&&M.name.toLowerCase().endsWith(".vrm")&&E(M);const L=Array.from(k),Z=[],P=U=>new Promise((G,oe)=>{if(U&&U.name.toLowerCase().endsWith(".json")){const D=new FileReader,K=`${f.assetsLocation}/anata/_thumbnails/t_${U.name.split("_")[0]}.jpg`,ce=U.name.split(".")[0];D.onload=function(le){try{const he=JSON.parse(le.target.result),$=[],ae=he.attributes.map(re=>({trait:re.trait_type,id:re.value})).filter(re=>re.trait!=="TYPE"&&re.trait!=="BRACE"&&re.trait!=="SET"&&re.trait!=="SPECIAL_OTHER");he.attributes.forEach(re=>{$.push(Gue(re.value,re.trait_type,f))});const te=$.filter(re=>re!==null);f.traits.forEach(re=>{te.some(Pe=>Pe.trait.trait===re.trait)||te.push({item:null,trait:re})});const Ae={name:ce,thumb:K,attributes:ae,options:te};Z.push(Ae),G()}catch(he){console.error("Error parsing the JSON file:",he),oe(he)}},D.readAsText(U)}});Promise.all(L.map(P)).then(()=>{Z.length>0&&(w(Z),d(Z[0].options))}).catch(U=>{console.error("Error processing files:",U)})};return J.jsxs("div",{className:Cf.container,children:[J.jsx("div",{className:`loadingIndicator ${s?"active":""}`,children:J.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),J.jsx("div",{className:"sectionTitle",children:X("pageTitles.chooseAppearance")}),J.jsx(X5,{onFilesDrop:R}),J.jsx(BLe,{animationManager:n,blinkManager:e,lookatManager:t,effectManager:r,confirmDialog:i,jsonSelectionArray:y,uploadTextureURL:C,uploadVRMURL:F}),J.jsxs("div",{className:Cf.buttonContainer,children:[J.jsx(In,{theme:"light",text:X("callToAction.back"),size:14,className:Cf.buttonLeft,onClick:v}),J.jsx(In,{theme:"light",text:X("callToAction.next"),size:14,className:Cf.buttonRight,onClick:S}),J.jsx(In,{theme:"light",text:X("callToAction.randomize"),size:14,className:Cf.buttonCenter,onClick:T}),J.jsx(In,{theme:"light",text:"debug",size:14,className:Cf.buttonCenter,onClick:H})]})]})}const xLe="_InformationContainerPos_dj2k3_1",ILe="_traitInfoTitle_dj2k3_13",FLe="_traitInfoText_dj2k3_21",ELe="_flexSelect_dj2k3_30",ULe="_scrollContainer_dj2k3_65",_Le="_checked_dj2k3_90",SLe="_checkmark_dj2k3_94",QLe="_checkboxHolder_dj2k3_107",RLe="_buttonContainer_dj2k3_114",MLe="_buttonLeft_dj2k3_123",TLe="_buttonRight_dj2k3_127",NLe="_buttonCenter_dj2k3_131",Iy={InformationContainerPos:xLe,traitInfoTitle:ILe,traitInfoText:FLe,flexSelect:ELe,"arrow-button":"_arrow-button_dj2k3_37","left-button":"_left-button_dj2k3_51","right-button":"_right-button_dj2k3_58",scrollContainer:ULe,"custom-checkbox":"_custom-checkbox_dj2k3_76","checkbox-container":"_checkbox-container_dj2k3_81",checked:_Le,checkmark:SLe,checkboxHolder:QLe,buttonContainer:RLe,buttonLeft:MLe,buttonRight:TLe,buttonCenter:NLe},kLe="_InformationContainerPos_6onbc_2",DLe="_scrollContainer_6onbc_16",VLe="_traitInfoTitle_6onbc_28",LLe="_traitInfoText_6onbc_38",PLe="_flexSelect_6onbc_66",WLe="_checked_6onbc_123",OLe="_checkmark_6onbc_127",ZLe="_checkboxHolder_6onbc_140",gi={InformationContainerPos:kLe,scrollContainer:DLe,traitInfoTitle:VLe,traitInfoText:LLe,"input-box":"_input-box_6onbc_47",flexSelect:PLe,"arrow-button":"_arrow-button_6onbc_74","left-button":"_left-button_6onbc_90","right-button":"_right-button_6onbc_97","anim-button":"_anim-button_6onbc_104","custom-checkbox":"_custom-checkbox_6onbc_109","checkbox-container":"_checkbox-container_6onbc_114",checked:WLe,checkmark:OLe,checkboxHolder:ZLe};function GLe({currentVRM:n}){const[e,t]=pe.useState(0),[r,i]=pe.useState(0),[s,o]=pe.useState(0),[a,A]=pe.useState(0),[l,c]=pe.useState(0),[u,f]=pe.useState(0),[d,h]=pe.useState(0),[p,m]=pe.useState(0);return pe.useEffect(()=>{if(n!=null){const g=lh(n.scene,"Mesh"),v=lh(n.scene,"SkinnedMesh");t(g.length),i(v.length);const y=g.concat(v),{stdMats:w,stdCutoutpMats:C,stdTranspMats:b,mToonMats:F,mToonCutoutMats:I,mToonTranspMats:S}=Nue(y);o(w.length),A(b.length),c(C.length),f(F.length),h(S.length),m(I.length)}},[n]),n!=null?J.jsx("div",{children:J.jsxs("div",{className:gi.InformationContainerPos,children:[J.jsx(Kh,{title:"Model Information",width:180,right:20}),J.jsxs("div",{className:gi.scrollContainer,children:[J.jsx("div",{className:gi.traitInfoTitle,children:"Meshes:"}),J.jsx("div",{className:gi.traitInfoText,children:e}),J.jsx("div",{className:gi.traitInfoTitle,children:"SkinnedMeshes:"}),J.jsx("div",{className:gi.traitInfoText,children:r}),J.jsx("div",{className:gi.traitInfoTitle,children:"Standard Material Count:"}),J.jsxs("div",{className:gi.traitInfoText,children:["opaque: ",s]}),J.jsxs("div",{className:gi.traitInfoText,children:["cutout: ",l]}),J.jsxs("div",{className:gi.traitInfoText,children:["transparent: ",a]}),J.jsx("div",{className:gi.traitInfoTitle,children:"MToon Material Count:"}),J.jsxs("div",{className:gi.traitInfoText,children:["opaque: ",u]}),J.jsxs("div",{className:gi.traitInfoText,children:["cutout: ",p]}),J.jsxs("div",{className:gi.traitInfoText,children:["transparent: ",d]})]})]})}):J.jsx(J.Fragment,{})}function JLe({animationManager:n}){const{isLoading:e,setViewMode:t}=Y.useContext(ro),{model:r}=Y.useContext(ki),[i,s]=pe.useState(null),[o,a]=pe.useState(null),[A,l]=pe.useState(""),{playSound:c}=Y.useContext(io),{isMute:u}=Y.useContext(to),f=()=>{!u&&c("backNextButton"),t(St.LANDING)},d=()=>{const y=ct.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:Lr(ct.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:Lr(ct.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:Lr(ct.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:Lr(ct.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:y===0||y==2,exportMtoonAtlas:y===1||y==2}},h=()=>{const y=i.userData.vrm;wV(r,y,A+"_merged",d())};pe.useEffect(()=>{(async()=>{if(o!=null&&Qm(o),i!=null)if(swe(i,r),ct.mergeOptions_drop_download){const w=i.userData.vrm;await wV(r,w,A+"_merged",d()),Qm(i),s(null)}else a(i)})()},[i]);const{t:p}=pe.useContext(ao),m=async y=>{const w=Bw(y.name),C=URL.createObjectURL(y);await n.loadAnimation(C,!0,"",w)},g=async y=>{const w=URL.createObjectURL(y),C=await iwe(w),b=Bw(y.name);l(b),s(C),console.log(C)},v=async y=>{const w=y[0];w&&w.name.toLowerCase().endsWith(".fbx")&&m(w),w&&w.name.toLowerCase().endsWith(".vrm")&&g(w)};return J.jsxs("div",{className:Iy.container,children:[J.jsx("div",{className:`loadingIndicator ${e?"active":""}`,children:J.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),J.jsx("div",{className:"sectionTitle",children:"Optimize your character"}),J.jsx(X5,{onFilesDrop:v}),J.jsx(d4,{showDropToDownload:!0,showCreateAtlas:!1}),J.jsx(GLe,{currentVRM:i}),J.jsxs("div",{className:Iy.buttonContainer,children:[J.jsx(In,{theme:"light",text:p("callToAction.back"),size:14,className:Iy.buttonLeft,onClick:f}),i&&J.jsx(In,{theme:"light",text:"Download",size:14,className:Iy.buttonRight,onClick:h})]})]})}const HLe="_languageSwitchWrap_83v6a_1",zLe={languageSwitchWrap:HLe},h3={en:{nativeName:"English"},ru:{nativeName:"Русский"},zh:{nativeName:"中文"}};function XLe(){const{t:n,i18n:e}=KJ();return J.jsx("div",{className:zLe.languageSwitchWrap,children:J.jsx("select",{onChange:t=>e.changeLanguage(t.target.value),value:e.resolvedLanguage,children:Object.keys(h3).map(t=>J.jsx("option",{value:t,children:h3[t].nativeName},t))})})}const YLe="./local-manifest/manifest.json",KLe="./local-manifest/personality.json";let O1;const Z1=new z,Fy=new z;let G1,J1;const jLe=1.4,$Le=new z(0,1.25,0),Y5=new z(-.9786403788721187,1.4036900759197288,.9892635490125085),qLe=Y5.length(),e3e=.35,p3=6,g3=new z(0,.8,0),K5=new z(-2.2367993753934425,1.1512971720174363,2.2612065299409223),t3e=K5.length(),n3e=.5,rl=new z,Oi=new Vt,r3e=new Vt,i3e=new z(1,0,0),s3e=new z(0,1,0);async function j5(n){return await(await fetch(n)).json()}async function o3e(){return await(await fetch(KLe)).json()}async function a3e(){const n="/3d/Platform.glb";return(await new rb().loadAsync(n)).scene}async function A3e(n){const e=new Hpe(n.offset),t=$t(n.animationPath);return e.storeAnimationPaths(t,n.assetsLocation||""),await e.loadAnimation(t,t[0].endsWith(".fbx"),n.assetsLocation||""),e}async function l3e(){const n=await j5(YLe),e=await o3e(),t=await a3e(),r=new Mhe(.1,.1,.5,5),i=new The(80,"editor-scene"),s=new npe,o=new dge;return{initialManifest:n,personality:e,sceneModel:t,blinkManager:r,lookatManager:i,effectManager:s,screenshotManager:o}}const c3e=()=>{let n,e;const r=l3e().then(i=>{n="success",e=i},i=>{n="error",e=i});return{read(){if(n==="error")throw e;if(n==="success")return e;throw r}}},u3e=c3e();function f3e(){const{initialManifest:n,personality:e,sceneModel:t,blinkManager:r,lookatManager:i,effectManager:s,screenshotManager:o}=u3e.read(),[a,A]=pe.useState(!1),[l,c]=pe.useState({}),{camera:u,controls:f,scene:d,resetAvatar:h,setAwaitDisplay:p,setTemplateInfo:m,setManifestSelectionIndex:g,templateInfo:v,moveCamera:y,setManifest:w,manifest:C,model:b}=pe.useContext(ki),{viewMode:F}=pe.useContext(ro);s.camera=u,s.scene=d,o.scene=d;const I=()=>{if(s.camera){if([St.BIO,St.CHAT].includes(F)){F===St.CHAT?(O1=jLe,Z1.copy($Le),Fy.copy(Y5),G1=qLe,J1=e3e):(O1=p3,Z1.copy(g3),Fy.copy(K5),G1=t3e,J1=n3e),Oi.set(0,0,G1,1).applyMatrix4(s.camera.projectionMatrix),Oi.x/=Oi.w,Oi.y/=Oi.w,Oi.z/=Oi.w;const Z=r3e.set(J1*Oi.w,Oi.y*Oi.w,Oi.z*Oi.w,Oi.w).applyMatrix4(s.camera.projectionMatrixInverse).x,P=rl.set(Fy.x,0,Fy.z).angleTo(i3e);rl.set(Z,0,0).applyAxisAngle(s3e,P),rl.add(Z1),y({targetX:rl.x,targetY:rl.y,targetZ:rl.z,distance:O1})}else y({targetX:0,targetY:g3.y,targetZ:0,distance:p3});f&&([St.APPEARANCE,St.SAVE,St.OPTIMIZER].includes(F)?f.enabled=!0:f.enabled=!1)}},[S,T]=pe.useState(!1),[H,X]=pe.useState(""),[Q,B]=pe.useState([]),E=(Z,P)=>{X(Z),T(!0),B([P])},R=Z=>(p(!0),h(),new Promise(P=>{U();async function U(){const G=await j5(C[Z].manifest),oe=await A3e(G);c(oe),m(G),g(Z),P(G)}})),k=(Z=256,P=256,U=!1)=>{r.enableScreenshot(),b.traverse(ce=>{ce.isSkinnedMesh&&ce.skeleton.bones.filter(he=>he.name==="head")[0].getWorldPosition(rl)});const G=rl,D=v.name==="Drophunter"?.78:.85;o.setCamera(G,D);const K=U?o.getScreenshotBlob(Z,P):o.getScreenshotTexture(Z,P);return r.disableScreenshot(),l.disableScreenshot(),K},M={[St.LANDING]:J.jsx(dBe,{}),[St.APPEARANCE]:J.jsx(bLe,{animationManager:l,blinkManager:r,lookatManager:i,effectManager:s,confirmDialog:E}),[St.OPTIMIZER]:J.jsx(JLe,{animationManager:l}),[St.BIO]:J.jsx(Jye,{personality:e}),[St.CREATE]:J.jsx(cBe,{fetchCharacterManifest:R}),[St.LOAD]:J.jsx(tye,{}),[St.MINT]:J.jsx(bye,{getFaceScreenshot:k}),[St.SAVE]:J.jsx(uve,{getFaceScreenshot:k}),[St.CHAT]:J.jsx(x0e,{templateInfo:v})};let L=0;return pe.useEffect(()=>{const Z=P=>{const U=new Date().getTime(),G=U-L;G<300&&G>10&&P.target.id=="editor-scene"&&A(!a),L=U};return window.addEventListener("touchend",Z),window.addEventListener("click",Z),()=>{window.removeEventListener("touchend",Z),window.removeEventListener("click",Z)}},[a]),pe.useEffect(()=>(I(),[St.BIO,St.MINT,St.CHAT].includes(F)?i.enabled=!1:i.enabled=!0,window.addEventListener("resize",I),()=>{window.removeEventListener("resize",I)}),[F]),pe.useEffect(()=>{w(n)},[n]),pe.useContext(ao),J.jsxs(pe.Fragment,{children:[J.jsx("div",{className:"generalTitle",children:"Character Studio"}),J.jsx(XLe,{}),J.jsx(uge,{confirmDialogText:H,confirmDialogCallback:Q,confirmDialogWindow:S,setConfirmDialogWindow:T}),J.jsx(wge,{}),J.jsx(pge,{manifest:C,sceneModel:t,lookatManager:i}),M[F]]})}const d3e=n=>{const e=new $U(n);return e.pollingInterval=12e3,e};iF.createRoot(document.getElementById("root")).render(J.jsx(Y.StrictMode,{children:J.jsx(WK,{getLibrary:d3e,children:J.jsx(j8,{children:J.jsx(Qhe,{children:J.jsx(Y8,{children:J.jsx(cde,{children:J.jsx(lde,{children:J.jsx(yde,{children:J.jsx(pe.Suspense,{children:J.jsx(f3e,{})})})})})})})})})}));export{Hf as c};
