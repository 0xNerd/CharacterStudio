var bz=Object.defineProperty;var xz=(n,e,t)=>e in n?bz(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var it=(n,e,t)=>(xz(n,typeof e!="symbol"?e+"":e,t),t),Hb=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var Fs=(n,e,t)=>(Hb(n,e,"read from private field"),t?t.call(n):e.get(n)),Yu=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},zb=(n,e,t,r)=>(Hb(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);var hR=(n,e,t)=>(Hb(n,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var pa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Iz(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var QV={exports:{}},wC={},RV={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0=Symbol.for("react.element"),Fz=Symbol.for("react.portal"),_z=Symbol.for("react.fragment"),Ez=Symbol.for("react.strict_mode"),Sz=Symbol.for("react.profiler"),Uz=Symbol.for("react.provider"),Qz=Symbol.for("react.context"),Rz=Symbol.for("react.forward_ref"),Mz=Symbol.for("react.suspense"),Tz=Symbol.for("react.memo"),Nz=Symbol.for("react.lazy"),fR=Symbol.iterator;function kz(n){return n===null||typeof n!="object"?null:(n=fR&&n[fR]||n["@@iterator"],typeof n=="function"?n:null)}var MV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TV=Object.assign,NV={};function Uf(n,e,t){this.props=n,this.context=e,this.refs=NV,this.updater=t||MV}Uf.prototype.isReactComponent={};Uf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Uf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function kV(){}kV.prototype=Uf.prototype;function HE(n,e,t){this.props=n,this.context=e,this.refs=NV,this.updater=t||MV}var zE=HE.prototype=new kV;zE.constructor=HE;TV(zE,Uf.prototype);zE.isPureReactComponent=!0;var pR=Array.isArray,DV=Object.prototype.hasOwnProperty,YE={current:null},LV={key:!0,ref:!0,__self:!0,__source:!0};function VV(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)DV.call(e,r)&&!LV.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),A=0;A<a;A++)l[A]=arguments[A+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:e0,type:n,key:s,ref:o,props:i,_owner:YE.current}}function Dz(n,e){return{$$typeof:e0,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function XE(n){return typeof n=="object"&&n!==null&&n.$$typeof===e0}function Lz(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var gR=/\/+/g;function Yb(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Lz(""+n.key):e.toString(36)}function Dy(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case e0:case Fz:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Yb(o,0):r,pR(i)?(t="",n!=null&&(t=n.replace(gR,"$&/")+"/"),Dy(i,e,t,"",function(A){return A})):i!=null&&(XE(i)&&(i=Dz(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gR,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",pR(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Yb(s,a);o+=Dy(s,e,t,l,i)}else if(l=kz(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Yb(s,a++),o+=Dy(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function k0(n,e,t){if(n==null)return n;var r=[],i=0;return Dy(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Vz(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var wi={current:null},Ly={transition:null},Pz={ReactCurrentDispatcher:wi,ReactCurrentBatchConfig:Ly,ReactCurrentOwner:YE};Qt.Children={map:k0,forEach:function(n,e,t){k0(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return k0(n,function(){e++}),e},toArray:function(n){return k0(n,function(e){return e})||[]},only:function(n){if(!XE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Qt.Component=Uf;Qt.Fragment=_z;Qt.Profiler=Sz;Qt.PureComponent=HE;Qt.StrictMode=Ez;Qt.Suspense=Mz;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pz;Qt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=TV({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=YE.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)DV.call(e,l)&&!LV.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var A=0;A<l;A++)a[A]=arguments[A+2];r.children=a}return{$$typeof:e0,type:n.type,key:i,ref:s,props:r,_owner:o}};Qt.createContext=function(n){return n={$$typeof:Qz,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Uz,_context:n},n.Consumer=n};Qt.createElement=VV;Qt.createFactory=function(n){var e=VV.bind(null,n);return e.type=n,e};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(n){return{$$typeof:Rz,render:n}};Qt.isValidElement=XE;Qt.lazy=function(n){return{$$typeof:Nz,_payload:{_status:-1,_result:n},_init:Vz}};Qt.memo=function(n,e){return{$$typeof:Tz,type:n,compare:e===void 0?null:e}};Qt.startTransition=function(n){var e=Ly.transition;Ly.transition={};try{n()}finally{Ly.transition=e}};Qt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Qt.useCallback=function(n,e){return wi.current.useCallback(n,e)};Qt.useContext=function(n){return wi.current.useContext(n)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(n){return wi.current.useDeferredValue(n)};Qt.useEffect=function(n,e){return wi.current.useEffect(n,e)};Qt.useId=function(){return wi.current.useId()};Qt.useImperativeHandle=function(n,e,t){return wi.current.useImperativeHandle(n,e,t)};Qt.useInsertionEffect=function(n,e){return wi.current.useInsertionEffect(n,e)};Qt.useLayoutEffect=function(n,e){return wi.current.useLayoutEffect(n,e)};Qt.useMemo=function(n,e){return wi.current.useMemo(n,e)};Qt.useReducer=function(n,e,t){return wi.current.useReducer(n,e,t)};Qt.useRef=function(n){return wi.current.useRef(n)};Qt.useState=function(n){return wi.current.useState(n)};Qt.useSyncExternalStore=function(n,e,t){return wi.current.useSyncExternalStore(n,e,t)};Qt.useTransition=function(){return wi.current.useTransition()};Qt.version="18.2.0";RV.exports=Qt;var Ce=RV.exports;const X=Zl(Ce);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oz=Ce,Wz=Symbol.for("react.element"),Zz=Symbol.for("react.fragment"),Gz=Object.prototype.hasOwnProperty,Jz=Oz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hz={key:!0,ref:!0,__self:!0,__source:!0};function PV(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Gz.call(e,r)&&!Hz.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Wz,type:n,key:s,ref:o,props:i,_owner:Jz.current}}wC.Fragment=Zz;wC.jsx=PV;wC.jsxs=PV;QV.exports=wC;var L=QV.exports,jE={exports:{}};const zz={},Yz=Object.freeze(Object.defineProperty({__proto__:null,default:zz},Symbol.toStringTag,{value:"Module"})),Xz=Iz(Yz);jE.exports;(function(n){(function(e,t){function r(U,y){if(!U)throw new Error(y||"Assertion failed")}function i(U,y){U.super_=y;var I=function(){};I.prototype=y.prototype,U.prototype=new I,U.prototype.constructor=U}function s(U,y,I){if(s.isBN(U))return U;this.negative=0,this.words=null,this.length=0,this.red=null,U!==null&&((y==="le"||y==="be")&&(I=y,y=10),this._init(U||0,y||10,I||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Xz.Buffer}catch{}s.isBN=function(y){return y instanceof s?!0:y!==null&&typeof y=="object"&&y.constructor.wordSize===s.wordSize&&Array.isArray(y.words)},s.max=function(y,I){return y.cmp(I)>0?y:I},s.min=function(y,I){return y.cmp(I)<0?y:I},s.prototype._init=function(y,I,R){if(typeof y=="number")return this._initNumber(y,I,R);if(typeof y=="object")return this._initArray(y,I,R);I==="hex"&&(I=16),r(I===(I|0)&&I>=2&&I<=36),y=y.toString().replace(/\s+/g,"");var D=0;y[0]==="-"&&(D++,this.negative=1),D<y.length&&(I===16?this._parseHex(y,D,R):(this._parseBase(y,I,D),R==="le"&&this._initArray(this.toArray(),I,R)))},s.prototype._initNumber=function(y,I,R){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[y&67108863],this.length=1):y<4503599627370496?(this.words=[y&67108863,y/67108864&67108863],this.length=2):(r(y<9007199254740992),this.words=[y&67108863,y/67108864&67108863,1],this.length=3),R==="le"&&this._initArray(this.toArray(),I,R)},s.prototype._initArray=function(y,I,R){if(r(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var k,V,Z=0;if(R==="be")for(D=y.length-1,k=0;D>=0;D-=3)V=y[D]|y[D-1]<<8|y[D-2]<<16,this.words[k]|=V<<Z&67108863,this.words[k+1]=V>>>26-Z&67108863,Z+=24,Z>=26&&(Z-=26,k++);else if(R==="le")for(D=0,k=0;D<y.length;D+=3)V=y[D]|y[D+1]<<8|y[D+2]<<16,this.words[k]|=V<<Z&67108863,this.words[k+1]=V>>>26-Z&67108863,Z+=24,Z>=26&&(Z-=26,k++);return this._strip()};function a(U,y){var I=U.charCodeAt(y);if(I>=48&&I<=57)return I-48;if(I>=65&&I<=70)return I-55;if(I>=97&&I<=102)return I-87;r(!1,"Invalid character in "+U)}function l(U,y,I){var R=a(U,I);return I-1>=y&&(R|=a(U,I-1)<<4),R}s.prototype._parseHex=function(y,I,R){this.length=Math.ceil((y.length-I)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var k=0,V=0,Z;if(R==="be")for(D=y.length-1;D>=I;D-=2)Z=l(y,I,D)<<k,this.words[V]|=Z&67108863,k>=18?(k-=18,V+=1,this.words[V]|=Z>>>26):k+=8;else{var N=y.length-I;for(D=N%2===0?I+1:I;D<y.length;D+=2)Z=l(y,I,D)<<k,this.words[V]|=Z&67108863,k>=18?(k-=18,V+=1,this.words[V]|=Z>>>26):k+=8}this._strip()};function A(U,y,I,R){for(var D=0,k=0,V=Math.min(U.length,I),Z=y;Z<V;Z++){var N=U.charCodeAt(Z)-48;D*=R,N>=49?k=N-49+10:N>=17?k=N-17+10:k=N,r(N>=0&&k<R,"Invalid character"),D+=k}return D}s.prototype._parseBase=function(y,I,R){this.words=[0],this.length=1;for(var D=0,k=1;k<=67108863;k*=I)D++;D--,k=k/I|0;for(var V=y.length-R,Z=V%D,N=Math.min(V,V-Z)+R,_=0,z=R;z<N;z+=D)_=A(y,z,z+D,I),this.imuln(k),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(Z!==0){var ie=1;for(_=A(y,z,y.length,I),z=0;z<Z;z++)ie*=I;this.imuln(ie),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this._strip()},s.prototype.copy=function(y){y.words=new Array(this.length);for(var I=0;I<this.length;I++)y.words[I]=this.words[I];y.length=this.length,y.negative=this.negative,y.red=this.red};function c(U,y){U.words=y.words,U.length=y.length,U.negative=y.negative,U.red=y.red}if(s.prototype._move=function(y){c(y,this)},s.prototype.clone=function(){var y=new s(null);return this.copy(y),y},s.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch{s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(y,I){y=y||10,I=I|0||1;var R;if(y===16||y==="hex"){R="";for(var D=0,k=0,V=0;V<this.length;V++){var Z=this.words[V],N=((Z<<D|k)&16777215).toString(16);k=Z>>>24-D&16777215,D+=2,D>=26&&(D-=26,V--),k!==0||V!==this.length-1?R=h[6-N.length]+N+R:R=N+R}for(k!==0&&(R=k.toString(16)+R);R.length%I!==0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}if(y===(y|0)&&y>=2&&y<=36){var _=d[y],z=p[y];R="";var ie=this.clone();for(ie.negative=0;!ie.isZero();){var T=ie.modrn(z).toString(y);ie=ie.idivn(z),ie.isZero()?R=T+R:R=h[_-T.length]+T+R}for(this.isZero()&&(R="0"+R);R.length%I!==0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?y+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(y,I){return this.toArrayLike(o,y,I)}),s.prototype.toArray=function(y,I){return this.toArrayLike(Array,y,I)};var f=function(y,I){return y.allocUnsafe?y.allocUnsafe(I):new y(I)};s.prototype.toArrayLike=function(y,I,R){this._strip();var D=this.byteLength(),k=R||Math.max(1,D);r(D<=k,"byte array longer than desired length"),r(k>0,"Requested array length <= 0");var V=f(y,k),Z=I==="le"?"LE":"BE";return this["_toArrayLike"+Z](V,D),V},s.prototype._toArrayLikeLE=function(y,I){for(var R=0,D=0,k=0,V=0;k<this.length;k++){var Z=this.words[k]<<V|D;y[R++]=Z&255,R<y.length&&(y[R++]=Z>>8&255),R<y.length&&(y[R++]=Z>>16&255),V===6?(R<y.length&&(y[R++]=Z>>24&255),D=0,V=0):(D=Z>>>24,V+=2)}if(R<y.length)for(y[R++]=D;R<y.length;)y[R++]=0},s.prototype._toArrayLikeBE=function(y,I){for(var R=y.length-1,D=0,k=0,V=0;k<this.length;k++){var Z=this.words[k]<<V|D;y[R--]=Z&255,R>=0&&(y[R--]=Z>>8&255),R>=0&&(y[R--]=Z>>16&255),V===6?(R>=0&&(y[R--]=Z>>24&255),D=0,V=0):(D=Z>>>24,V+=2)}if(R>=0)for(y[R--]=D;R>=0;)y[R--]=0},Math.clz32?s.prototype._countBits=function(y){return 32-Math.clz32(y)}:s.prototype._countBits=function(y){var I=y,R=0;return I>=4096&&(R+=13,I>>>=13),I>=64&&(R+=7,I>>>=7),I>=8&&(R+=4,I>>>=4),I>=2&&(R+=2,I>>>=2),R+I},s.prototype._zeroBits=function(y){if(y===0)return 26;var I=y,R=0;return I&8191||(R+=13,I>>>=13),I&127||(R+=7,I>>>=7),I&15||(R+=4,I>>>=4),I&3||(R+=2,I>>>=2),I&1||R++,R},s.prototype.bitLength=function(){var y=this.words[this.length-1],I=this._countBits(y);return(this.length-1)*26+I};function m(U){for(var y=new Array(U.bitLength()),I=0;I<y.length;I++){var R=I/26|0,D=I%26;y[I]=U.words[R]>>>D&1}return y}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,I=0;I<this.length;I++){var R=this._zeroBits(this.words[I]);if(y+=R,R!==26)break}return y},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},s.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var I=0;I<y.length;I++)this.words[I]=this.words[I]|y.words[I];return this._strip()},s.prototype.ior=function(y){return r((this.negative|y.negative)===0),this.iuor(y)},s.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},s.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},s.prototype.iuand=function(y){var I;this.length>y.length?I=y:I=this;for(var R=0;R<I.length;R++)this.words[R]=this.words[R]&y.words[R];return this.length=I.length,this._strip()},s.prototype.iand=function(y){return r((this.negative|y.negative)===0),this.iuand(y)},s.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},s.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},s.prototype.iuxor=function(y){var I,R;this.length>y.length?(I=this,R=y):(I=y,R=this);for(var D=0;D<R.length;D++)this.words[D]=I.words[D]^R.words[D];if(this!==I)for(;D<I.length;D++)this.words[D]=I.words[D];return this.length=I.length,this._strip()},s.prototype.ixor=function(y){return r((this.negative|y.negative)===0),this.iuxor(y)},s.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},s.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},s.prototype.inotn=function(y){r(typeof y=="number"&&y>=0);var I=Math.ceil(y/26)|0,R=y%26;this._expand(I),R>0&&I--;for(var D=0;D<I;D++)this.words[D]=~this.words[D]&67108863;return R>0&&(this.words[D]=~this.words[D]&67108863>>26-R),this._strip()},s.prototype.notn=function(y){return this.clone().inotn(y)},s.prototype.setn=function(y,I){r(typeof y=="number"&&y>=0);var R=y/26|0,D=y%26;return this._expand(R+1),I?this.words[R]=this.words[R]|1<<D:this.words[R]=this.words[R]&~(1<<D),this._strip()},s.prototype.iadd=function(y){var I;if(this.negative!==0&&y.negative===0)return this.negative=0,I=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,I=this.isub(y),y.negative=1,I._normSign();var R,D;this.length>y.length?(R=this,D=y):(R=y,D=this);for(var k=0,V=0;V<D.length;V++)I=(R.words[V]|0)+(D.words[V]|0)+k,this.words[V]=I&67108863,k=I>>>26;for(;k!==0&&V<R.length;V++)I=(R.words[V]|0)+k,this.words[V]=I&67108863,k=I>>>26;if(this.length=R.length,k!==0)this.words[this.length]=k,this.length++;else if(R!==this)for(;V<R.length;V++)this.words[V]=R.words[V];return this},s.prototype.add=function(y){var I;return y.negative!==0&&this.negative===0?(y.negative=0,I=this.sub(y),y.negative^=1,I):y.negative===0&&this.negative!==0?(this.negative=0,I=y.sub(this),this.negative=1,I):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},s.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var I=this.iadd(y);return y.negative=1,I._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var R=this.cmp(y);if(R===0)return this.negative=0,this.length=1,this.words[0]=0,this;var D,k;R>0?(D=this,k=y):(D=y,k=this);for(var V=0,Z=0;Z<k.length;Z++)I=(D.words[Z]|0)-(k.words[Z]|0)+V,V=I>>26,this.words[Z]=I&67108863;for(;V!==0&&Z<D.length;Z++)I=(D.words[Z]|0)+V,V=I>>26,this.words[Z]=I&67108863;if(V===0&&Z<D.length&&D!==this)for(;Z<D.length;Z++)this.words[Z]=D.words[Z];return this.length=Math.max(this.length,Z),D!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(y){return this.clone().isub(y)};function g(U,y,I){I.negative=y.negative^U.negative;var R=U.length+y.length|0;I.length=R,R=R-1|0;var D=U.words[0]|0,k=y.words[0]|0,V=D*k,Z=V&67108863,N=V/67108864|0;I.words[0]=Z;for(var _=1;_<R;_++){for(var z=N>>>26,ie=N&67108863,T=Math.min(_,y.length-1),q=Math.max(0,_-U.length+1);q<=T;q++){var ge=_-q|0;D=U.words[ge]|0,k=y.words[q]|0,V=D*k+ie,z+=V/67108864|0,ie=V&67108863}I.words[_]=ie|0,N=z|0}return N!==0?I.words[_]=N|0:I.length--,I._strip()}var v=function(y,I,R){var D=y.words,k=I.words,V=R.words,Z=0,N,_,z,ie=D[0]|0,T=ie&8191,q=ie>>>13,ge=D[1]|0,he=ge&8191,Ae=ge>>>13,$=D[2]|0,ce=$&8191,me=$>>>13,_e=D[3]|0,P=_e&8191,fe=_e>>>13,de=D[4]|0,ee=de&8191,K=de>>>13,se=D[5]|0,ye=se&8191,ne=se>>>13,J=D[6]|0,Y=J&8191,ue=J>>>13,le=D[7]|0,we=le&8191,G=le>>>13,Q=D[8]|0,S=Q&8191,W=Q>>>13,te=D[9]|0,oe=te&8191,ae=te>>>13,Se=k[0]|0,Ee=Se&8191,Me=Se>>>13,Le=k[1]|0,ke=Le&8191,pe=Le>>>13,Fe=k[2]|0,Ue=Fe&8191,Te=Fe>>>13,Ye=k[3]|0,nt=Ye&8191,dt=Ye>>>13,cn=k[4]|0,Ft=cn&8191,ot=cn>>>13,Ar=k[5]|0,yt=Ar&8191,qt=Ar>>>13,co=k[6]|0,Xt=co&8191,en=co>>>13,re=k[7]|0,ve=re&8191,xe=re>>>13,be=k[8]|0,Ie=be&8191,We=be>>>13,lt=k[9]|0,$e=lt&8191,je=lt>>>13;R.negative=y.negative^I.negative,R.length=19,N=Math.imul(T,Ee),_=Math.imul(T,Me),_=_+Math.imul(q,Ee)|0,z=Math.imul(q,Me);var wt=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(wt>>>26)|0,wt&=67108863,N=Math.imul(he,Ee),_=Math.imul(he,Me),_=_+Math.imul(Ae,Ee)|0,z=Math.imul(Ae,Me),N=N+Math.imul(T,ke)|0,_=_+Math.imul(T,pe)|0,_=_+Math.imul(q,ke)|0,z=z+Math.imul(q,pe)|0;var ft=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(ft>>>26)|0,ft&=67108863,N=Math.imul(ce,Ee),_=Math.imul(ce,Me),_=_+Math.imul(me,Ee)|0,z=Math.imul(me,Me),N=N+Math.imul(he,ke)|0,_=_+Math.imul(he,pe)|0,_=_+Math.imul(Ae,ke)|0,z=z+Math.imul(Ae,pe)|0,N=N+Math.imul(T,Ue)|0,_=_+Math.imul(T,Te)|0,_=_+Math.imul(q,Ue)|0,z=z+Math.imul(q,Te)|0;var vt=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(vt>>>26)|0,vt&=67108863,N=Math.imul(P,Ee),_=Math.imul(P,Me),_=_+Math.imul(fe,Ee)|0,z=Math.imul(fe,Me),N=N+Math.imul(ce,ke)|0,_=_+Math.imul(ce,pe)|0,_=_+Math.imul(me,ke)|0,z=z+Math.imul(me,pe)|0,N=N+Math.imul(he,Ue)|0,_=_+Math.imul(he,Te)|0,_=_+Math.imul(Ae,Ue)|0,z=z+Math.imul(Ae,Te)|0,N=N+Math.imul(T,nt)|0,_=_+Math.imul(T,dt)|0,_=_+Math.imul(q,nt)|0,z=z+Math.imul(q,dt)|0;var Yt=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,N=Math.imul(ee,Ee),_=Math.imul(ee,Me),_=_+Math.imul(K,Ee)|0,z=Math.imul(K,Me),N=N+Math.imul(P,ke)|0,_=_+Math.imul(P,pe)|0,_=_+Math.imul(fe,ke)|0,z=z+Math.imul(fe,pe)|0,N=N+Math.imul(ce,Ue)|0,_=_+Math.imul(ce,Te)|0,_=_+Math.imul(me,Ue)|0,z=z+Math.imul(me,Te)|0,N=N+Math.imul(he,nt)|0,_=_+Math.imul(he,dt)|0,_=_+Math.imul(Ae,nt)|0,z=z+Math.imul(Ae,dt)|0,N=N+Math.imul(T,Ft)|0,_=_+Math.imul(T,ot)|0,_=_+Math.imul(q,Ft)|0,z=z+Math.imul(q,ot)|0;var Wr=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,N=Math.imul(ye,Ee),_=Math.imul(ye,Me),_=_+Math.imul(ne,Ee)|0,z=Math.imul(ne,Me),N=N+Math.imul(ee,ke)|0,_=_+Math.imul(ee,pe)|0,_=_+Math.imul(K,ke)|0,z=z+Math.imul(K,pe)|0,N=N+Math.imul(P,Ue)|0,_=_+Math.imul(P,Te)|0,_=_+Math.imul(fe,Ue)|0,z=z+Math.imul(fe,Te)|0,N=N+Math.imul(ce,nt)|0,_=_+Math.imul(ce,dt)|0,_=_+Math.imul(me,nt)|0,z=z+Math.imul(me,dt)|0,N=N+Math.imul(he,Ft)|0,_=_+Math.imul(he,ot)|0,_=_+Math.imul(Ae,Ft)|0,z=z+Math.imul(Ae,ot)|0,N=N+Math.imul(T,yt)|0,_=_+Math.imul(T,qt)|0,_=_+Math.imul(q,yt)|0,z=z+Math.imul(q,qt)|0;var Wo=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(Wo>>>26)|0,Wo&=67108863,N=Math.imul(Y,Ee),_=Math.imul(Y,Me),_=_+Math.imul(ue,Ee)|0,z=Math.imul(ue,Me),N=N+Math.imul(ye,ke)|0,_=_+Math.imul(ye,pe)|0,_=_+Math.imul(ne,ke)|0,z=z+Math.imul(ne,pe)|0,N=N+Math.imul(ee,Ue)|0,_=_+Math.imul(ee,Te)|0,_=_+Math.imul(K,Ue)|0,z=z+Math.imul(K,Te)|0,N=N+Math.imul(P,nt)|0,_=_+Math.imul(P,dt)|0,_=_+Math.imul(fe,nt)|0,z=z+Math.imul(fe,dt)|0,N=N+Math.imul(ce,Ft)|0,_=_+Math.imul(ce,ot)|0,_=_+Math.imul(me,Ft)|0,z=z+Math.imul(me,ot)|0,N=N+Math.imul(he,yt)|0,_=_+Math.imul(he,qt)|0,_=_+Math.imul(Ae,yt)|0,z=z+Math.imul(Ae,qt)|0,N=N+Math.imul(T,Xt)|0,_=_+Math.imul(T,en)|0,_=_+Math.imul(q,Xt)|0,z=z+Math.imul(q,en)|0;var Zo=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(Zo>>>26)|0,Zo&=67108863,N=Math.imul(we,Ee),_=Math.imul(we,Me),_=_+Math.imul(G,Ee)|0,z=Math.imul(G,Me),N=N+Math.imul(Y,ke)|0,_=_+Math.imul(Y,pe)|0,_=_+Math.imul(ue,ke)|0,z=z+Math.imul(ue,pe)|0,N=N+Math.imul(ye,Ue)|0,_=_+Math.imul(ye,Te)|0,_=_+Math.imul(ne,Ue)|0,z=z+Math.imul(ne,Te)|0,N=N+Math.imul(ee,nt)|0,_=_+Math.imul(ee,dt)|0,_=_+Math.imul(K,nt)|0,z=z+Math.imul(K,dt)|0,N=N+Math.imul(P,Ft)|0,_=_+Math.imul(P,ot)|0,_=_+Math.imul(fe,Ft)|0,z=z+Math.imul(fe,ot)|0,N=N+Math.imul(ce,yt)|0,_=_+Math.imul(ce,qt)|0,_=_+Math.imul(me,yt)|0,z=z+Math.imul(me,qt)|0,N=N+Math.imul(he,Xt)|0,_=_+Math.imul(he,en)|0,_=_+Math.imul(Ae,Xt)|0,z=z+Math.imul(Ae,en)|0,N=N+Math.imul(T,ve)|0,_=_+Math.imul(T,xe)|0,_=_+Math.imul(q,ve)|0,z=z+Math.imul(q,xe)|0;var bi=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(bi>>>26)|0,bi&=67108863,N=Math.imul(S,Ee),_=Math.imul(S,Me),_=_+Math.imul(W,Ee)|0,z=Math.imul(W,Me),N=N+Math.imul(we,ke)|0,_=_+Math.imul(we,pe)|0,_=_+Math.imul(G,ke)|0,z=z+Math.imul(G,pe)|0,N=N+Math.imul(Y,Ue)|0,_=_+Math.imul(Y,Te)|0,_=_+Math.imul(ue,Ue)|0,z=z+Math.imul(ue,Te)|0,N=N+Math.imul(ye,nt)|0,_=_+Math.imul(ye,dt)|0,_=_+Math.imul(ne,nt)|0,z=z+Math.imul(ne,dt)|0,N=N+Math.imul(ee,Ft)|0,_=_+Math.imul(ee,ot)|0,_=_+Math.imul(K,Ft)|0,z=z+Math.imul(K,ot)|0,N=N+Math.imul(P,yt)|0,_=_+Math.imul(P,qt)|0,_=_+Math.imul(fe,yt)|0,z=z+Math.imul(fe,qt)|0,N=N+Math.imul(ce,Xt)|0,_=_+Math.imul(ce,en)|0,_=_+Math.imul(me,Xt)|0,z=z+Math.imul(me,en)|0,N=N+Math.imul(he,ve)|0,_=_+Math.imul(he,xe)|0,_=_+Math.imul(Ae,ve)|0,z=z+Math.imul(Ae,xe)|0,N=N+Math.imul(T,Ie)|0,_=_+Math.imul(T,We)|0,_=_+Math.imul(q,Ie)|0,z=z+Math.imul(q,We)|0;var Vt=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,N=Math.imul(oe,Ee),_=Math.imul(oe,Me),_=_+Math.imul(ae,Ee)|0,z=Math.imul(ae,Me),N=N+Math.imul(S,ke)|0,_=_+Math.imul(S,pe)|0,_=_+Math.imul(W,ke)|0,z=z+Math.imul(W,pe)|0,N=N+Math.imul(we,Ue)|0,_=_+Math.imul(we,Te)|0,_=_+Math.imul(G,Ue)|0,z=z+Math.imul(G,Te)|0,N=N+Math.imul(Y,nt)|0,_=_+Math.imul(Y,dt)|0,_=_+Math.imul(ue,nt)|0,z=z+Math.imul(ue,dt)|0,N=N+Math.imul(ye,Ft)|0,_=_+Math.imul(ye,ot)|0,_=_+Math.imul(ne,Ft)|0,z=z+Math.imul(ne,ot)|0,N=N+Math.imul(ee,yt)|0,_=_+Math.imul(ee,qt)|0,_=_+Math.imul(K,yt)|0,z=z+Math.imul(K,qt)|0,N=N+Math.imul(P,Xt)|0,_=_+Math.imul(P,en)|0,_=_+Math.imul(fe,Xt)|0,z=z+Math.imul(fe,en)|0,N=N+Math.imul(ce,ve)|0,_=_+Math.imul(ce,xe)|0,_=_+Math.imul(me,ve)|0,z=z+Math.imul(me,xe)|0,N=N+Math.imul(he,Ie)|0,_=_+Math.imul(he,We)|0,_=_+Math.imul(Ae,Ie)|0,z=z+Math.imul(Ae,We)|0,N=N+Math.imul(T,$e)|0,_=_+Math.imul(T,je)|0,_=_+Math.imul(q,$e)|0,z=z+Math.imul(q,je)|0;var Go=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(Go>>>26)|0,Go&=67108863,N=Math.imul(oe,ke),_=Math.imul(oe,pe),_=_+Math.imul(ae,ke)|0,z=Math.imul(ae,pe),N=N+Math.imul(S,Ue)|0,_=_+Math.imul(S,Te)|0,_=_+Math.imul(W,Ue)|0,z=z+Math.imul(W,Te)|0,N=N+Math.imul(we,nt)|0,_=_+Math.imul(we,dt)|0,_=_+Math.imul(G,nt)|0,z=z+Math.imul(G,dt)|0,N=N+Math.imul(Y,Ft)|0,_=_+Math.imul(Y,ot)|0,_=_+Math.imul(ue,Ft)|0,z=z+Math.imul(ue,ot)|0,N=N+Math.imul(ye,yt)|0,_=_+Math.imul(ye,qt)|0,_=_+Math.imul(ne,yt)|0,z=z+Math.imul(ne,qt)|0,N=N+Math.imul(ee,Xt)|0,_=_+Math.imul(ee,en)|0,_=_+Math.imul(K,Xt)|0,z=z+Math.imul(K,en)|0,N=N+Math.imul(P,ve)|0,_=_+Math.imul(P,xe)|0,_=_+Math.imul(fe,ve)|0,z=z+Math.imul(fe,xe)|0,N=N+Math.imul(ce,Ie)|0,_=_+Math.imul(ce,We)|0,_=_+Math.imul(me,Ie)|0,z=z+Math.imul(me,We)|0,N=N+Math.imul(he,$e)|0,_=_+Math.imul(he,je)|0,_=_+Math.imul(Ae,$e)|0,z=z+Math.imul(Ae,je)|0;var yn=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(yn>>>26)|0,yn&=67108863,N=Math.imul(oe,Ue),_=Math.imul(oe,Te),_=_+Math.imul(ae,Ue)|0,z=Math.imul(ae,Te),N=N+Math.imul(S,nt)|0,_=_+Math.imul(S,dt)|0,_=_+Math.imul(W,nt)|0,z=z+Math.imul(W,dt)|0,N=N+Math.imul(we,Ft)|0,_=_+Math.imul(we,ot)|0,_=_+Math.imul(G,Ft)|0,z=z+Math.imul(G,ot)|0,N=N+Math.imul(Y,yt)|0,_=_+Math.imul(Y,qt)|0,_=_+Math.imul(ue,yt)|0,z=z+Math.imul(ue,qt)|0,N=N+Math.imul(ye,Xt)|0,_=_+Math.imul(ye,en)|0,_=_+Math.imul(ne,Xt)|0,z=z+Math.imul(ne,en)|0,N=N+Math.imul(ee,ve)|0,_=_+Math.imul(ee,xe)|0,_=_+Math.imul(K,ve)|0,z=z+Math.imul(K,xe)|0,N=N+Math.imul(P,Ie)|0,_=_+Math.imul(P,We)|0,_=_+Math.imul(fe,Ie)|0,z=z+Math.imul(fe,We)|0,N=N+Math.imul(ce,$e)|0,_=_+Math.imul(ce,je)|0,_=_+Math.imul(me,$e)|0,z=z+Math.imul(me,je)|0;var Zr=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,N=Math.imul(oe,nt),_=Math.imul(oe,dt),_=_+Math.imul(ae,nt)|0,z=Math.imul(ae,dt),N=N+Math.imul(S,Ft)|0,_=_+Math.imul(S,ot)|0,_=_+Math.imul(W,Ft)|0,z=z+Math.imul(W,ot)|0,N=N+Math.imul(we,yt)|0,_=_+Math.imul(we,qt)|0,_=_+Math.imul(G,yt)|0,z=z+Math.imul(G,qt)|0,N=N+Math.imul(Y,Xt)|0,_=_+Math.imul(Y,en)|0,_=_+Math.imul(ue,Xt)|0,z=z+Math.imul(ue,en)|0,N=N+Math.imul(ye,ve)|0,_=_+Math.imul(ye,xe)|0,_=_+Math.imul(ne,ve)|0,z=z+Math.imul(ne,xe)|0,N=N+Math.imul(ee,Ie)|0,_=_+Math.imul(ee,We)|0,_=_+Math.imul(K,Ie)|0,z=z+Math.imul(K,We)|0,N=N+Math.imul(P,$e)|0,_=_+Math.imul(P,je)|0,_=_+Math.imul(fe,$e)|0,z=z+Math.imul(fe,je)|0;var Is=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(Is>>>26)|0,Is&=67108863,N=Math.imul(oe,Ft),_=Math.imul(oe,ot),_=_+Math.imul(ae,Ft)|0,z=Math.imul(ae,ot),N=N+Math.imul(S,yt)|0,_=_+Math.imul(S,qt)|0,_=_+Math.imul(W,yt)|0,z=z+Math.imul(W,qt)|0,N=N+Math.imul(we,Xt)|0,_=_+Math.imul(we,en)|0,_=_+Math.imul(G,Xt)|0,z=z+Math.imul(G,en)|0,N=N+Math.imul(Y,ve)|0,_=_+Math.imul(Y,xe)|0,_=_+Math.imul(ue,ve)|0,z=z+Math.imul(ue,xe)|0,N=N+Math.imul(ye,Ie)|0,_=_+Math.imul(ye,We)|0,_=_+Math.imul(ne,Ie)|0,z=z+Math.imul(ne,We)|0,N=N+Math.imul(ee,$e)|0,_=_+Math.imul(ee,je)|0,_=_+Math.imul(K,$e)|0,z=z+Math.imul(K,je)|0;var Ga=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(Ga>>>26)|0,Ga&=67108863,N=Math.imul(oe,yt),_=Math.imul(oe,qt),_=_+Math.imul(ae,yt)|0,z=Math.imul(ae,qt),N=N+Math.imul(S,Xt)|0,_=_+Math.imul(S,en)|0,_=_+Math.imul(W,Xt)|0,z=z+Math.imul(W,en)|0,N=N+Math.imul(we,ve)|0,_=_+Math.imul(we,xe)|0,_=_+Math.imul(G,ve)|0,z=z+Math.imul(G,xe)|0,N=N+Math.imul(Y,Ie)|0,_=_+Math.imul(Y,We)|0,_=_+Math.imul(ue,Ie)|0,z=z+Math.imul(ue,We)|0,N=N+Math.imul(ye,$e)|0,_=_+Math.imul(ye,je)|0,_=_+Math.imul(ne,$e)|0,z=z+Math.imul(ne,je)|0;var Cc=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(Cc>>>26)|0,Cc&=67108863,N=Math.imul(oe,Xt),_=Math.imul(oe,en),_=_+Math.imul(ae,Xt)|0,z=Math.imul(ae,en),N=N+Math.imul(S,ve)|0,_=_+Math.imul(S,xe)|0,_=_+Math.imul(W,ve)|0,z=z+Math.imul(W,xe)|0,N=N+Math.imul(we,Ie)|0,_=_+Math.imul(we,We)|0,_=_+Math.imul(G,Ie)|0,z=z+Math.imul(G,We)|0,N=N+Math.imul(Y,$e)|0,_=_+Math.imul(Y,je)|0,_=_+Math.imul(ue,$e)|0,z=z+Math.imul(ue,je)|0;var cr=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(cr>>>26)|0,cr&=67108863,N=Math.imul(oe,ve),_=Math.imul(oe,xe),_=_+Math.imul(ae,ve)|0,z=Math.imul(ae,xe),N=N+Math.imul(S,Ie)|0,_=_+Math.imul(S,We)|0,_=_+Math.imul(W,Ie)|0,z=z+Math.imul(W,We)|0,N=N+Math.imul(we,$e)|0,_=_+Math.imul(we,je)|0,_=_+Math.imul(G,$e)|0,z=z+Math.imul(G,je)|0;var uo=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(uo>>>26)|0,uo&=67108863,N=Math.imul(oe,Ie),_=Math.imul(oe,We),_=_+Math.imul(ae,Ie)|0,z=Math.imul(ae,We),N=N+Math.imul(S,$e)|0,_=_+Math.imul(S,je)|0,_=_+Math.imul(W,$e)|0,z=z+Math.imul(W,je)|0;var bc=(Z+N|0)+((_&8191)<<13)|0;Z=(z+(_>>>13)|0)+(bc>>>26)|0,bc&=67108863,N=Math.imul(oe,$e),_=Math.imul(oe,je),_=_+Math.imul(ae,$e)|0,z=Math.imul(ae,je);var Qr=(Z+N|0)+((_&8191)<<13)|0;return Z=(z+(_>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,V[0]=wt,V[1]=ft,V[2]=vt,V[3]=Yt,V[4]=Wr,V[5]=Wo,V[6]=Zo,V[7]=bi,V[8]=Vt,V[9]=Go,V[10]=yn,V[11]=Zr,V[12]=Is,V[13]=Ga,V[14]=Cc,V[15]=cr,V[16]=uo,V[17]=bc,V[18]=Qr,Z!==0&&(V[19]=Z,R.length++),R};Math.imul||(v=g);function w(U,y,I){I.negative=y.negative^U.negative,I.length=U.length+y.length;for(var R=0,D=0,k=0;k<I.length-1;k++){var V=D;D=0;for(var Z=R&67108863,N=Math.min(k,y.length-1),_=Math.max(0,k-U.length+1);_<=N;_++){var z=k-_,ie=U.words[z]|0,T=y.words[_]|0,q=ie*T,ge=q&67108863;V=V+(q/67108864|0)|0,ge=ge+Z|0,Z=ge&67108863,V=V+(ge>>>26)|0,D+=V>>>26,V&=67108863}I.words[k]=Z,R=V,V=D}return R!==0?I.words[k]=R:I.length--,I._strip()}function B(U,y,I){return w(U,y,I)}s.prototype.mulTo=function(y,I){var R,D=this.length+y.length;return this.length===10&&y.length===10?R=v(this,y,I):D<63?R=g(this,y,I):D<1024?R=w(this,y,I):R=B(this,y,I),R},s.prototype.mul=function(y){var I=new s(null);return I.words=new Array(this.length+y.length),this.mulTo(y,I)},s.prototype.mulf=function(y){var I=new s(null);return I.words=new Array(this.length+y.length),B(this,y,I)},s.prototype.imul=function(y){return this.clone().mulTo(y,this)},s.prototype.imuln=function(y){var I=y<0;I&&(y=-y),r(typeof y=="number"),r(y<67108864);for(var R=0,D=0;D<this.length;D++){var k=(this.words[D]|0)*y,V=(k&67108863)+(R&67108863);R>>=26,R+=k/67108864|0,R+=V>>>26,this.words[D]=V&67108863}return R!==0&&(this.words[D]=R,this.length++),I?this.ineg():this},s.prototype.muln=function(y){return this.clone().imuln(y)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(y){var I=m(y);if(I.length===0)return new s(1);for(var R=this,D=0;D<I.length&&I[D]===0;D++,R=R.sqr());if(++D<I.length)for(var k=R.sqr();D<I.length;D++,k=k.sqr())I[D]!==0&&(R=R.mul(k));return R},s.prototype.iushln=function(y){r(typeof y=="number"&&y>=0);var I=y%26,R=(y-I)/26,D=67108863>>>26-I<<26-I,k;if(I!==0){var V=0;for(k=0;k<this.length;k++){var Z=this.words[k]&D,N=(this.words[k]|0)-Z<<I;this.words[k]=N|V,V=Z>>>26-I}V&&(this.words[k]=V,this.length++)}if(R!==0){for(k=this.length-1;k>=0;k--)this.words[k+R]=this.words[k];for(k=0;k<R;k++)this.words[k]=0;this.length+=R}return this._strip()},s.prototype.ishln=function(y){return r(this.negative===0),this.iushln(y)},s.prototype.iushrn=function(y,I,R){r(typeof y=="number"&&y>=0);var D;I?D=(I-I%26)/26:D=0;var k=y%26,V=Math.min((y-k)/26,this.length),Z=67108863^67108863>>>k<<k,N=R;if(D-=V,D=Math.max(0,D),N){for(var _=0;_<V;_++)N.words[_]=this.words[_];N.length=V}if(V!==0)if(this.length>V)for(this.length-=V,_=0;_<this.length;_++)this.words[_]=this.words[_+V];else this.words[0]=0,this.length=1;var z=0;for(_=this.length-1;_>=0&&(z!==0||_>=D);_--){var ie=this.words[_]|0;this.words[_]=z<<26-k|ie>>>k,z=ie&Z}return N&&z!==0&&(N.words[N.length++]=z),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(y,I,R){return r(this.negative===0),this.iushrn(y,I,R)},s.prototype.shln=function(y){return this.clone().ishln(y)},s.prototype.ushln=function(y){return this.clone().iushln(y)},s.prototype.shrn=function(y){return this.clone().ishrn(y)},s.prototype.ushrn=function(y){return this.clone().iushrn(y)},s.prototype.testn=function(y){r(typeof y=="number"&&y>=0);var I=y%26,R=(y-I)/26,D=1<<I;if(this.length<=R)return!1;var k=this.words[R];return!!(k&D)},s.prototype.imaskn=function(y){r(typeof y=="number"&&y>=0);var I=y%26,R=(y-I)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=R)return this;if(I!==0&&R++,this.length=Math.min(R,this.length),I!==0){var D=67108863^67108863>>>I<<I;this.words[this.length-1]&=D}return this._strip()},s.prototype.maskn=function(y){return this.clone().imaskn(y)},s.prototype.iaddn=function(y){return r(typeof y=="number"),r(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(this.words[0]|0)<=y?(this.words[0]=y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},s.prototype._iaddn=function(y){this.words[0]+=y;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},s.prototype.isubn=function(y){if(r(typeof y=="number"),r(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this._strip()},s.prototype.addn=function(y){return this.clone().iaddn(y)},s.prototype.subn=function(y){return this.clone().isubn(y)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(y,I,R){var D=y.length+R,k;this._expand(D);var V,Z=0;for(k=0;k<y.length;k++){V=(this.words[k+R]|0)+Z;var N=(y.words[k]|0)*I;V-=N&67108863,Z=(V>>26)-(N/67108864|0),this.words[k+R]=V&67108863}for(;k<this.length-R;k++)V=(this.words[k+R]|0)+Z,Z=V>>26,this.words[k+R]=V&67108863;if(Z===0)return this._strip();for(r(Z===-1),Z=0,k=0;k<this.length;k++)V=-(this.words[k]|0)+Z,Z=V>>26,this.words[k]=V&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(y,I){var R=this.length-y.length,D=this.clone(),k=y,V=k.words[k.length-1]|0,Z=this._countBits(V);R=26-Z,R!==0&&(k=k.ushln(R),D.iushln(R),V=k.words[k.length-1]|0);var N=D.length-k.length,_;if(I!=="mod"){_=new s(null),_.length=N+1,_.words=new Array(_.length);for(var z=0;z<_.length;z++)_.words[z]=0}var ie=D.clone()._ishlnsubmul(k,1,N);ie.negative===0&&(D=ie,_&&(_.words[N]=1));for(var T=N-1;T>=0;T--){var q=(D.words[k.length+T]|0)*67108864+(D.words[k.length+T-1]|0);for(q=Math.min(q/V|0,67108863),D._ishlnsubmul(k,q,T);D.negative!==0;)q--,D.negative=0,D._ishlnsubmul(k,1,T),D.isZero()||(D.negative^=1);_&&(_.words[T]=q)}return _&&_._strip(),D._strip(),I!=="div"&&R!==0&&D.iushrn(R),{div:_||null,mod:D}},s.prototype.divmod=function(y,I,R){if(r(!y.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var D,k,V;return this.negative!==0&&y.negative===0?(V=this.neg().divmod(y,I),I!=="mod"&&(D=V.div.neg()),I!=="div"&&(k=V.mod.neg(),R&&k.negative!==0&&k.iadd(y)),{div:D,mod:k}):this.negative===0&&y.negative!==0?(V=this.divmod(y.neg(),I),I!=="mod"&&(D=V.div.neg()),{div:D,mod:V.mod}):this.negative&y.negative?(V=this.neg().divmod(y.neg(),I),I!=="div"&&(k=V.mod.neg(),R&&k.negative!==0&&k.isub(y)),{div:V.div,mod:k}):y.length>this.length||this.cmp(y)<0?{div:new s(0),mod:this}:y.length===1?I==="div"?{div:this.divn(y.words[0]),mod:null}:I==="mod"?{div:null,mod:new s(this.modrn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new s(this.modrn(y.words[0]))}:this._wordDiv(y,I)},s.prototype.div=function(y){return this.divmod(y,"div",!1).div},s.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},s.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},s.prototype.divRound=function(y){var I=this.divmod(y);if(I.mod.isZero())return I.div;var R=I.div.negative!==0?I.mod.isub(y):I.mod,D=y.ushrn(1),k=y.andln(1),V=R.cmp(D);return V<0||k===1&&V===0?I.div:I.div.negative!==0?I.div.isubn(1):I.div.iaddn(1)},s.prototype.modrn=function(y){var I=y<0;I&&(y=-y),r(y<=67108863);for(var R=(1<<26)%y,D=0,k=this.length-1;k>=0;k--)D=(R*D+(this.words[k]|0))%y;return I?-D:D},s.prototype.modn=function(y){return this.modrn(y)},s.prototype.idivn=function(y){var I=y<0;I&&(y=-y),r(y<=67108863);for(var R=0,D=this.length-1;D>=0;D--){var k=(this.words[D]|0)+R*67108864;this.words[D]=k/y|0,R=k%y}return this._strip(),I?this.ineg():this},s.prototype.divn=function(y){return this.clone().idivn(y)},s.prototype.egcd=function(y){r(y.negative===0),r(!y.isZero());var I=this,R=y.clone();I.negative!==0?I=I.umod(y):I=I.clone();for(var D=new s(1),k=new s(0),V=new s(0),Z=new s(1),N=0;I.isEven()&&R.isEven();)I.iushrn(1),R.iushrn(1),++N;for(var _=R.clone(),z=I.clone();!I.isZero();){for(var ie=0,T=1;!(I.words[0]&T)&&ie<26;++ie,T<<=1);if(ie>0)for(I.iushrn(ie);ie-- >0;)(D.isOdd()||k.isOdd())&&(D.iadd(_),k.isub(z)),D.iushrn(1),k.iushrn(1);for(var q=0,ge=1;!(R.words[0]&ge)&&q<26;++q,ge<<=1);if(q>0)for(R.iushrn(q);q-- >0;)(V.isOdd()||Z.isOdd())&&(V.iadd(_),Z.isub(z)),V.iushrn(1),Z.iushrn(1);I.cmp(R)>=0?(I.isub(R),D.isub(V),k.isub(Z)):(R.isub(I),V.isub(D),Z.isub(k))}return{a:V,b:Z,gcd:R.iushln(N)}},s.prototype._invmp=function(y){r(y.negative===0),r(!y.isZero());var I=this,R=y.clone();I.negative!==0?I=I.umod(y):I=I.clone();for(var D=new s(1),k=new s(0),V=R.clone();I.cmpn(1)>0&&R.cmpn(1)>0;){for(var Z=0,N=1;!(I.words[0]&N)&&Z<26;++Z,N<<=1);if(Z>0)for(I.iushrn(Z);Z-- >0;)D.isOdd()&&D.iadd(V),D.iushrn(1);for(var _=0,z=1;!(R.words[0]&z)&&_<26;++_,z<<=1);if(_>0)for(R.iushrn(_);_-- >0;)k.isOdd()&&k.iadd(V),k.iushrn(1);I.cmp(R)>=0?(I.isub(R),D.isub(k)):(R.isub(I),k.isub(D))}var ie;return I.cmpn(1)===0?ie=D:ie=k,ie.cmpn(0)<0&&ie.iadd(y),ie},s.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var I=this.clone(),R=y.clone();I.negative=0,R.negative=0;for(var D=0;I.isEven()&&R.isEven();D++)I.iushrn(1),R.iushrn(1);do{for(;I.isEven();)I.iushrn(1);for(;R.isEven();)R.iushrn(1);var k=I.cmp(R);if(k<0){var V=I;I=R,R=V}else if(k===0||R.cmpn(1)===0)break;I.isub(R)}while(!0);return R.iushln(D)},s.prototype.invm=function(y){return this.egcd(y).a.umod(y)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(y){return this.words[0]&y},s.prototype.bincn=function(y){r(typeof y=="number");var I=y%26,R=(y-I)/26,D=1<<I;if(this.length<=R)return this._expand(R+1),this.words[R]|=D,this;for(var k=D,V=R;k!==0&&V<this.length;V++){var Z=this.words[V]|0;Z+=k,k=Z>>>26,Z&=67108863,this.words[V]=Z}return k!==0&&(this.words[V]=k,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(y){var I=y<0;if(this.negative!==0&&!I)return-1;if(this.negative===0&&I)return 1;this._strip();var R;if(this.length>1)R=1;else{I&&(y=-y),r(y<=67108863,"Number is too big");var D=this.words[0]|0;R=D===y?0:D<y?-1:1}return this.negative!==0?-R|0:R},s.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var I=this.ucmp(y);return this.negative!==0?-I|0:I},s.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var I=0,R=this.length-1;R>=0;R--){var D=this.words[R]|0,k=y.words[R]|0;if(D!==k){D<k?I=-1:D>k&&(I=1);break}}return I},s.prototype.gtn=function(y){return this.cmpn(y)===1},s.prototype.gt=function(y){return this.cmp(y)===1},s.prototype.gten=function(y){return this.cmpn(y)>=0},s.prototype.gte=function(y){return this.cmp(y)>=0},s.prototype.ltn=function(y){return this.cmpn(y)===-1},s.prototype.lt=function(y){return this.cmp(y)===-1},s.prototype.lten=function(y){return this.cmpn(y)<=0},s.prototype.lte=function(y){return this.cmp(y)<=0},s.prototype.eqn=function(y){return this.cmpn(y)===0},s.prototype.eq=function(y){return this.cmp(y)===0},s.red=function(y){return new H(y)},s.prototype.toRed=function(y){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(y){return this.red=y,this},s.prototype.forceRed=function(y){return r(!this.red,"Already a number in reduction context"),this._forceRed(y)},s.prototype.redAdd=function(y){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},s.prototype.redIAdd=function(y){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},s.prototype.redSub=function(y){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},s.prototype.redISub=function(y){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},s.prototype.redShl=function(y){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},s.prototype.redMul=function(y){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},s.prototype.redIMul=function(y){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(y){return r(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var C={k256:null,p224:null,p192:null,p25519:null};function b(U,y){this.name=U,this.p=new s(y,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}b.prototype._tmp=function(){var y=new s(null);return y.words=new Array(Math.ceil(this.n/13)),y},b.prototype.ireduce=function(y){var I=y,R;do this.split(I,this.tmp),I=this.imulK(I),I=I.iadd(this.tmp),R=I.bitLength();while(R>this.n);var D=R<this.n?-1:I.ucmp(this.p);return D===0?(I.words[0]=0,I.length=1):D>0?I.isub(this.p):I.strip!==void 0?I.strip():I._strip(),I},b.prototype.split=function(y,I){y.iushrn(this.n,0,I)},b.prototype.imulK=function(y){return y.imul(this.k)};function F(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,b),F.prototype.split=function(y,I){for(var R=4194303,D=Math.min(y.length,9),k=0;k<D;k++)I.words[k]=y.words[k];if(I.length=D,y.length<=9){y.words[0]=0,y.length=1;return}var V=y.words[9];for(I.words[I.length++]=V&R,k=10;k<y.length;k++){var Z=y.words[k]|0;y.words[k-10]=(Z&R)<<4|V>>>22,V=Z}V>>>=22,y.words[k-10]=V,V===0&&y.length>10?y.length-=10:y.length-=9},F.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var I=0,R=0;R<y.length;R++){var D=y.words[R]|0;I+=D*977,y.words[R]=I&67108863,I=D*64+(I/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y};function x(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(x,b);function E(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(E,b);function M(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(M,b),M.prototype.imulK=function(y){for(var I=0,R=0;R<y.length;R++){var D=(y.words[R]|0)*19+I,k=D&67108863;D>>>=26,y.words[R]=k,I=D}return I!==0&&(y.words[y.length++]=I),y},s._prime=function(y){if(C[y])return C[y];var I;if(y==="k256")I=new F;else if(y==="p224")I=new x;else if(y==="p192")I=new E;else if(y==="p25519")I=new M;else throw new Error("Unknown prime "+y);return C[y]=I,I};function H(U){if(typeof U=="string"){var y=s._prime(U);this.m=y.p,this.prime=y}else r(U.gtn(1),"modulus must be greater than 1"),this.m=U,this.prime=null}H.prototype._verify1=function(y){r(y.negative===0,"red works only with positives"),r(y.red,"red works only with red numbers")},H.prototype._verify2=function(y,I){r((y.negative|I.negative)===0,"red works only with positives"),r(y.red&&y.red===I.red,"red works only with red numbers")},H.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):(c(y,y.umod(this.m)._forceRed(this)),y)},H.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},H.prototype.add=function(y,I){this._verify2(y,I);var R=y.add(I);return R.cmp(this.m)>=0&&R.isub(this.m),R._forceRed(this)},H.prototype.iadd=function(y,I){this._verify2(y,I);var R=y.iadd(I);return R.cmp(this.m)>=0&&R.isub(this.m),R},H.prototype.sub=function(y,I){this._verify2(y,I);var R=y.sub(I);return R.cmpn(0)<0&&R.iadd(this.m),R._forceRed(this)},H.prototype.isub=function(y,I){this._verify2(y,I);var R=y.isub(I);return R.cmpn(0)<0&&R.iadd(this.m),R},H.prototype.shl=function(y,I){return this._verify1(y),this.imod(y.ushln(I))},H.prototype.imul=function(y,I){return this._verify2(y,I),this.imod(y.imul(I))},H.prototype.mul=function(y,I){return this._verify2(y,I),this.imod(y.mul(I))},H.prototype.isqr=function(y){return this.imul(y,y.clone())},H.prototype.sqr=function(y){return this.mul(y,y)},H.prototype.sqrt=function(y){if(y.isZero())return y.clone();var I=this.m.andln(3);if(r(I%2===1),I===3){var R=this.m.add(new s(1)).iushrn(2);return this.pow(y,R)}for(var D=this.m.subn(1),k=0;!D.isZero()&&D.andln(1)===0;)k++,D.iushrn(1);r(!D.isZero());var V=new s(1).toRed(this),Z=V.redNeg(),N=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new s(2*_*_).toRed(this);this.pow(_,N).cmp(Z)!==0;)_.redIAdd(Z);for(var z=this.pow(_,D),ie=this.pow(y,D.addn(1).iushrn(1)),T=this.pow(y,D),q=k;T.cmp(V)!==0;){for(var ge=T,he=0;ge.cmp(V)!==0;he++)ge=ge.redSqr();r(he<q);var Ae=this.pow(z,new s(1).iushln(q-he-1));ie=ie.redMul(Ae),z=Ae.redSqr(),T=T.redMul(z),q=he}return ie},H.prototype.invm=function(y){var I=y._invmp(this.m);return I.negative!==0?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},H.prototype.pow=function(y,I){if(I.isZero())return new s(1).toRed(this);if(I.cmpn(1)===0)return y.clone();var R=4,D=new Array(1<<R);D[0]=new s(1).toRed(this),D[1]=y;for(var k=2;k<D.length;k++)D[k]=this.mul(D[k-1],y);var V=D[0],Z=0,N=0,_=I.bitLength()%26;for(_===0&&(_=26),k=I.length-1;k>=0;k--){for(var z=I.words[k],ie=_-1;ie>=0;ie--){var T=z>>ie&1;if(V!==D[0]&&(V=this.sqr(V)),T===0&&Z===0){N=0;continue}Z<<=1,Z|=T,N++,!(N!==R&&(k!==0||ie!==0))&&(V=this.mul(V,D[Z]),N=0,Z=0)}_=26}return V},H.prototype.convertTo=function(y){var I=y.umod(this.m);return I===y?I.clone():I},H.prototype.convertFrom=function(y){var I=y.clone();return I.red=null,I},s.mont=function(y){return new O(y)};function O(U){H.call(this,U),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(O,H),O.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},O.prototype.convertFrom=function(y){var I=this.imod(y.mul(this.rinv));return I.red=null,I},O.prototype.imul=function(y,I){if(y.isZero()||I.isZero())return y.words[0]=0,y.length=1,y;var R=y.imul(I),D=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=R.isub(D).iushrn(this.shift),V=k;return k.cmp(this.m)>=0?V=k.isub(this.m):k.cmpn(0)<0&&(V=k.iadd(this.m)),V._forceRed(this)},O.prototype.mul=function(y,I){if(y.isZero()||I.isZero())return new s(0)._forceRed(this);var R=y.mul(I),D=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=R.isub(D).iushrn(this.shift),V=k;return k.cmp(this.m)>=0?V=k.isub(this.m):k.cmpn(0)<0&&(V=k.iadd(this.m)),V._forceRed(this)},O.prototype.invm=function(y){var I=this.imod(y._invmp(this.m).mul(this.r2));return I._forceRed(this)}})(n,pa)})(jE);var jz=jE.exports;const mt=Zl(jz),Kz="logger/5.7.0";let mR=!1,vR=!1;const Vy={debug:1,default:2,info:2,warning:3,error:4,off:5};let yR=Vy.default,Xb=null;function $z(){try{const n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{n.push(e)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){return n.message}return null}const wR=$z();var qI;(function(n){n.DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF"})(qI||(qI={}));var Io;(function(n){n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED"})(Io||(Io={}));const BR="0123456789abcdef";let Be=class dr{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();Vy[r]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(yR>Vy[r])&&console.log.apply(console,t)}debug(...e){this._log(dr.levels.DEBUG,e)}info(...e){this._log(dr.levels.INFO,e)}warn(...e){this._log(dr.levels.WARNING,e)}makeError(e,t,r){if(vR)return this.makeError("censored error",t,{});t||(t=dr.errors.UNKNOWN_ERROR),r||(r={});const i=[];Object.keys(r).forEach(l=>{const A=r[l];try{if(A instanceof Uint8Array){let c="";for(let u=0;u<A.length;u++)c+=BR[A[u]>>4],c+=BR[A[u]&15];i.push(l+"=Uint8Array(0x"+c+")")}else i.push(l+"="+JSON.stringify(A))}catch{i.push(l+"="+JSON.stringify(r[l].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;let o="";switch(t){case Io.NUMERIC_FAULT:{o="NUMERIC_FAULT";const l=e;switch(l){case"overflow":case"underflow":case"division-by-zero":o+="-"+l;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case Io.CALL_EXCEPTION:case Io.INSUFFICIENT_FUNDS:case Io.MISSING_NEW:case Io.NONCE_EXPIRED:case Io.REPLACEMENT_UNDERPRICED:case Io.TRANSACTION_REPLACED:case Io.UNPREDICTABLE_GAS_LIMIT:o=t;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=t,Object.keys(r).forEach(function(l){a[l]=r[l]}),a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,dr.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,i){e||this.throwError(t,r,i)}assertArgument(e,t,r,i){e||this.throwArgumentError(t,r,i)}checkNormalize(e){wR&&this.throwError("platform missing String.prototype.normalize",dr.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:wR})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,dr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,dr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r?r=": "+r:r="",e<t&&this.throwError("missing argument"+r,dr.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,dr.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",dr.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",dr.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",dr.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Xb||(Xb=new dr(Kz)),Xb}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",dr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),mR){if(!e)return;this.globalLogger().throwError("error censorship permanent",dr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}vR=!!e,mR=!!t}static setLogLevel(e){const t=Vy[e.toLowerCase()];if(t==null){dr.globalLogger().warn("invalid log level - "+e);return}yR=t}static from(e){return new dr(e)}};Be.errors=Io;Be.levels=qI;const qz="bytes/5.7.0",Nn=new Be(qz);function OV(n){return!!n.toHexString}function Rh(n){return n.slice||(n.slice=function(){const e=Array.prototype.slice.call(arguments);return Rh(new Uint8Array(Array.prototype.slice.apply(n,e)))}),n}function KE(n){return It(n)&&!(n.length%2)||BC(n)}function CR(n){return typeof n=="number"&&n==n&&n%1===0}function BC(n){if(n==null)return!1;if(n.constructor===Uint8Array)return!0;if(typeof n=="string"||!CR(n.length)||n.length<0)return!1;for(let e=0;e<n.length;e++){const t=n[e];if(!CR(t)||t<0||t>=256)return!1}return!0}function At(n,e){if(e||(e={}),typeof n=="number"){Nn.checkSafeUint53(n,"invalid arrayify value");const t=[];for(;n;)t.unshift(n&255),n=parseInt(String(n/256));return t.length===0&&t.push(0),Rh(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),OV(n)&&(n=n.toHexString()),It(n)){let t=n.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":Nn.throwArgumentError("hex data is odd-length","value",n));const r=[];for(let i=0;i<t.length;i+=2)r.push(parseInt(t.substring(i,i+2),16));return Rh(new Uint8Array(r))}return BC(n)?Rh(new Uint8Array(n)):Nn.throwArgumentError("invalid arrayify value","value",n)}function is(n){const e=n.map(i=>At(i)),t=e.reduce((i,s)=>i+s.length,0),r=new Uint8Array(t);return e.reduce((i,s)=>(r.set(s,i),i+s.length),0),Rh(r)}function ef(n){let e=At(n);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function e9(n,e){n=At(n),n.length>e&&Nn.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(n,e-n.length),Rh(t)}function It(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||e&&n.length!==2+2*e)}const jb="0123456789abcdef";function tt(n,e){if(e||(e={}),typeof n=="number"){Nn.checkSafeUint53(n,"invalid hexlify value");let t="";for(;n;)t=jb[n&15]+t,n=Math.floor(n/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof n=="bigint")return n=n.toString(16),n.length%2?"0x0"+n:"0x"+n;if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),OV(n))return n.toHexString();if(It(n))return n.length%2&&(e.hexPad==="left"?n="0x0"+n.substring(2):e.hexPad==="right"?n+="0":Nn.throwArgumentError("hex data is odd-length","value",n)),n.toLowerCase();if(BC(n)){let t="0x";for(let r=0;r<n.length;r++){let i=n[r];t+=jb[(i&240)>>4]+jb[i&15]}return t}return Nn.throwArgumentError("invalid hexlify value","value",n)}function du(n){if(typeof n!="string")n=tt(n);else if(!It(n)||n.length%2)return null;return(n.length-2)/2}function zr(n,e,t){return typeof n!="string"?n=tt(n):(!It(n)||n.length%2)&&Nn.throwArgumentError("invalid hexData","value",n),e=2+2*e,t!=null?"0x"+n.substring(e,2+2*t):"0x"+n.substring(e)}function Si(n){let e="0x";return n.forEach(t=>{e+=tt(t).substring(2)}),e}function CC(n){const e=t9(tt(n,{hexPad:"left"}));return e==="0x"?"0x0":e}function t9(n){typeof n!="string"&&(n=tt(n)),It(n)||Nn.throwArgumentError("invalid hex string","value",n),n=n.substring(2);let e=0;for(;e<n.length&&n[e]==="0";)e++;return"0x"+n.substring(e)}function Pn(n,e){for(typeof n!="string"?n=tt(n):It(n)||Nn.throwArgumentError("invalid hex string","value",n),n.length>2*e+2&&Nn.throwArgumentError("value out of range","value",arguments[1]);n.length<2*e+2;)n="0x0"+n.substring(2);return n}function bC(n){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(KE(n)){let t=At(n);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=tt(t.slice(0,32)),e.s=tt(t.slice(32,64))):t.length===65?(e.r=tt(t.slice(0,32)),e.s=tt(t.slice(32,64)),e.v=t[64]):Nn.throwArgumentError("invalid signature string","signature",n),e.v<27&&(e.v===0||e.v===1?e.v+=27:Nn.throwArgumentError("signature invalid v byte","signature",n)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=tt(t.slice(32,64))}else{if(e.r=n.r,e.s=n.s,e.v=n.v,e.recoveryParam=n.recoveryParam,e._vs=n._vs,e._vs!=null){const i=e9(At(e._vs),32);e._vs=tt(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Nn.throwArgumentError("signature recoveryParam mismatch _vs","signature",n),i[0]&=127;const o=tt(i);e.s==null?e.s=o:e.s!==o&&Nn.throwArgumentError("signature v mismatch _vs","signature",n)}if(e.recoveryParam==null)e.v==null?Nn.throwArgumentError("signature missing v and recoveryParam","signature",n):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Nn.throwArgumentError("signature recoveryParam mismatch v","signature",n)}e.r==null||!It(e.r)?Nn.throwArgumentError("signature missing or invalid r","signature",n):e.r=Pn(e.r,32),e.s==null||!It(e.s)?Nn.throwArgumentError("signature missing or invalid s","signature",n):e.s=Pn(e.s,32);const t=At(e.s);t[0]>=128&&Nn.throwArgumentError("signature s out of range","signature",n),e.recoveryParam&&(t[0]|=128);const r=tt(t);e._vs&&(It(e._vs)||Nn.throwArgumentError("signature invalid _vs","signature",n),e._vs=Pn(e._vs,32)),e._vs==null?e._vs=r:e._vs!==r&&Nn.throwArgumentError("signature _vs mismatch v and s","signature",n)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const n9="bignumber/5.7.0";var Uw=mt.BN;const al=new Be(n9),Kb={},bR=9007199254740991;let xR=!1;class Ze{constructor(e,t){e!==Kb&&al.throwError("cannot call constructor directly; use BigNumber.from",Be.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return xi(Et(this).fromTwos(e))}toTwos(e){return xi(Et(this).toTwos(e))}abs(){return this._hex[0]==="-"?Ze.from(this._hex.substring(1)):this}add(e){return xi(Et(this).add(Et(e)))}sub(e){return xi(Et(this).sub(Et(e)))}div(e){return Ze.from(e).isZero()&&_s("division-by-zero","div"),xi(Et(this).div(Et(e)))}mul(e){return xi(Et(this).mul(Et(e)))}mod(e){const t=Et(e);return t.isNeg()&&_s("division-by-zero","mod"),xi(Et(this).umod(t))}pow(e){const t=Et(e);return t.isNeg()&&_s("negative-power","pow"),xi(Et(this).pow(t))}and(e){const t=Et(e);return(this.isNegative()||t.isNeg())&&_s("unbound-bitwise-result","and"),xi(Et(this).and(t))}or(e){const t=Et(e);return(this.isNegative()||t.isNeg())&&_s("unbound-bitwise-result","or"),xi(Et(this).or(t))}xor(e){const t=Et(e);return(this.isNegative()||t.isNeg())&&_s("unbound-bitwise-result","xor"),xi(Et(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&_s("negative-width","mask"),xi(Et(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&_s("negative-width","shl"),xi(Et(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&_s("negative-width","shr"),xi(Et(this).shrn(e))}eq(e){return Et(this).eq(Et(e))}lt(e){return Et(this).lt(Et(e))}lte(e){return Et(this).lte(Et(e))}gt(e){return Et(this).gt(Et(e))}gte(e){return Et(this).gte(Et(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Et(this).isZero()}toNumber(){try{return Et(this).toNumber()}catch{_s("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return al.throwError("this platform does not support BigInt",Be.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?xR||(xR=!0,al.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?al.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Be.errors.UNEXPECTED_ARGUMENT,{}):al.throwError("BigNumber.toString does not accept parameters",Be.errors.UNEXPECTED_ARGUMENT,{})),Et(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Ze)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new Ze(Kb,qg(e)):e.match(/^-?[0-9]+$/)?new Ze(Kb,qg(new Uw(e))):al.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&_s("underflow","BigNumber.from",e),(e>=bR||e<=-bR)&&_s("overflow","BigNumber.from",e),Ze.from(String(e));const t=e;if(typeof t=="bigint")return Ze.from(t.toString());if(BC(t))return Ze.from(tt(t));if(t)if(t.toHexString){const r=t.toHexString();if(typeof r=="string")return Ze.from(r)}else{let r=t._hex;if(r==null&&t.type==="BigNumber"&&(r=t.hex),typeof r=="string"&&(It(r)||r[0]==="-"&&It(r.substring(1))))return Ze.from(r)}return al.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function qg(n){if(typeof n!="string")return qg(n.toString(16));if(n[0]==="-")return n=n.substring(1),n[0]==="-"&&al.throwArgumentError("invalid hex","value",n),n=qg(n),n==="0x00"?n:"-"+n;if(n.substring(0,2)!=="0x"&&(n="0x"+n),n==="0x")return"0x00";for(n.length%2&&(n="0x0"+n.substring(2));n.length>4&&n.substring(0,4)==="0x00";)n="0x"+n.substring(4);return n}function xi(n){return Ze.from(qg(n))}function Et(n){const e=Ze.from(n).toHexString();return e[0]==="-"?new Uw("-"+e.substring(3),16):new Uw(e.substring(2),16)}function _s(n,e,t){const r={fault:n,operation:e};return t!=null&&(r.value=t),al.throwError(n,Be.errors.NUMERIC_FAULT,r)}function r9(n){return new Uw(n,36).toString(16)}const i9="properties/5.7.0";var s9=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const Qw=new Be(i9);function Re(n,e,t){Object.defineProperty(n,e,{enumerable:!0,value:t,writable:!1})}function ss(n,e){for(let t=0;t<32;t++){if(n[e])return n[e];if(!n.prototype||typeof n.prototype!="object")break;n=Object.getPrototypeOf(n.prototype).constructor}return null}function qn(n){return s9(this,void 0,void 0,function*(){const e=Object.keys(n).map(r=>{const i=n[r];return Promise.resolve(i).then(s=>({key:r,value:s}))});return(yield Promise.all(e)).reduce((r,i)=>(r[i.key]=i.value,r),{})})}function o9(n,e){(!n||typeof n!="object")&&Qw.throwArgumentError("invalid object","object",n),Object.keys(n).forEach(t=>{e[t]||Qw.throwArgumentError("invalid object key - "+t,"transaction:"+t,n)})}function xn(n){const e={};for(const t in n)e[t]=n[t];return e}const a9={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function WV(n){if(n==null||a9[typeof n])return!0;if(Array.isArray(n)||typeof n=="object"){if(!Object.isFrozen(n))return!1;const e=Object.keys(n);for(let t=0;t<e.length;t++){let r=null;try{r=n[e[t]]}catch{continue}if(!WV(r))return!1}return!0}return Qw.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function l9(n){if(WV(n))return n;if(Array.isArray(n))return Object.freeze(n.map(e=>ls(e)));if(typeof n=="object"){const e={};for(const t in n){const r=n[t];r!==void 0&&Re(e,t,ls(r))}return e}return Qw.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function ls(n){return l9(n)}class t0{constructor(e){for(const t in e)this[t]=ls(e[t])}}const A9="abstract-provider/5.7.0";var c9=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const u9=new Be(A9);class d9 extends t0{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class n0{constructor(){u9.checkAbstract(new.target,n0),Re(this,"_isProvider",!0)}getFeeData(){return c9(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield qn({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let r=null,i=null,s=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,s=Ze.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:r,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const h9="networks/5.7.1",IR=new Be(h9);function f9(n){return n&&typeof n.renetwork=="function"}function hl(n){const e=function(t,r){r==null&&(r={});const i=[];if(t.InfuraProvider&&r.infura!=="-")try{i.push(new t.InfuraProvider(n,r.infura))}catch{}if(t.EtherscanProvider&&r.etherscan!=="-")try{i.push(new t.EtherscanProvider(n,r.etherscan))}catch{}if(t.AlchemyProvider&&r.alchemy!=="-")try{i.push(new t.AlchemyProvider(n,r.alchemy))}catch{}if(t.PocketProvider&&r.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new t.PocketProvider(n,r.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(t.CloudflareProvider&&r.cloudflare!=="-")try{i.push(new t.CloudflareProvider(n))}catch{}if(t.AnkrProvider&&r.ankr!=="-")try{const s=["ropsten"],o=new t.AnkrProvider(n,r.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(i.length===0)return null;if(t.FallbackProvider){let s=1;return r.quorum!=null?s=r.quorum:n==="homestead"&&(s=2),new t.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(t){return hl(t)},e}function Rw(n,e){const t=function(r,i){return r.JsonRpcProvider?new r.JsonRpcProvider(n,e):null};return t.renetwork=function(r){return Rw(n,r)},t}const FR={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:hl("homestead")},_R={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:hl("ropsten")},ER={chainId:63,name:"classicMordor",_defaultProvider:Rw("https://www.ethercluster.com/mordor","classicMordor")},D0={unspecified:{chainId:0,name:"unspecified"},homestead:FR,mainnet:FR,morden:{chainId:2,name:"morden"},ropsten:_R,testnet:_R,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:hl("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:hl("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:hl("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:hl("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:Rw("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:ER,classicTestnet:ER,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Rw("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:hl("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:hl("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function ZV(n){if(n==null)return null;if(typeof n=="number"){for(const r in D0){const i=D0[r];if(i.chainId===n)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:n,name:"unknown"}}if(typeof n=="string"){const r=D0[n];return r==null?null:{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress,_defaultProvider:r._defaultProvider||null}}const e=D0[n.name];if(!e)return typeof n.chainId!="number"&&IR.throwArgumentError("invalid network chainId","network",n),n;n.chainId!==0&&n.chainId!==e.chainId&&IR.throwArgumentError("network chainId mismatch","network",n);let t=n._defaultProvider||null;return t==null&&e._defaultProvider&&(f9(e._defaultProvider)?t=e._defaultProvider.renetwork(n):t=e._defaultProvider),{name:n.name,chainId:e.chainId,ensAddress:n.ensAddress||e.ensAddress||null,_defaultProvider:t}}function GV(n){n=atob(n);const e=[];for(let t=0;t<n.length;t++)e.push(n.charCodeAt(t));return At(e)}function JV(n){n=At(n);let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return btoa(e)}class HV{constructor(e){Re(this,"alphabet",e),Re(this,"base",e.length),Re(this,"_alphabetMap",{}),Re(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=At(e);if(t.length===0)return"";let r=[0];for(let s=0;s<t.length;++s){let o=t[s];for(let a=0;a<r.length;++a)o+=r[a]<<8,r[a]=o%this.base,o=o/this.base|0;for(;o>0;)r.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;t[s]===0&&s<t.length-1;++s)i+=this._leader;for(let s=r.length-1;s>=0;--s)i+=this.alphabet[r[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let i=this._alphabetMap[e[r]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<t.length;++o)s+=t[o]*this.base,t[o]=s&255,s>>=8;for(;s>0;)t.push(s&255),s>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return At(new Uint8Array(t.reverse()))}}new HV("abcdefghijklmnopqrstuvwxyz234567");const eF=new HV("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),p9="0x0000000000000000000000000000000000000000",g9=Ze.from(-1),zV=Ze.from(0),m9=Ze.from(1),v9=Ze.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),y9="0x0000000000000000000000000000000000000000000000000000000000000000";var YV={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(n){(function(){var e="input is invalid type",t="finalize already called",r=typeof window=="object",i=r?window:{};i.JS_SHA3_NO_WINDOW&&(r=!1);var s=!r&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=pa:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&n.exports,l=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",A="0123456789abcdef".split(""),c=[31,7936,2031616,520093696],u=[4,1024,262144,67108864],h=[1,256,65536,16777216],d=[6,1536,393216,100663296],p=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],m=[224,256,384,512],g=[128,256],v=["hex","buffer","arrayBuffer","array","digest"],w={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(T){return Object.prototype.toString.call(T)==="[object Array]"}),l&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(T){return typeof T=="object"&&T.buffer&&T.buffer.constructor===ArrayBuffer});for(var B=function(T,q,ge){return function(he){return new _(T,q,T).update(he)[ge]()}},C=function(T,q,ge){return function(he,Ae){return new _(T,q,Ae).update(he)[ge]()}},b=function(T,q,ge){return function(he,Ae,$,ce){return y["cshake"+T].update(he,Ae,$,ce)[ge]()}},F=function(T,q,ge){return function(he,Ae,$,ce){return y["kmac"+T].update(he,Ae,$,ce)[ge]()}},x=function(T,q,ge,he){for(var Ae=0;Ae<v.length;++Ae){var $=v[Ae];T[$]=q(ge,he,$)}return T},E=function(T,q){var ge=B(T,q,"hex");return ge.create=function(){return new _(T,q,T)},ge.update=function(he){return ge.create().update(he)},x(ge,B,T,q)},M=function(T,q){var ge=C(T,q,"hex");return ge.create=function(he){return new _(T,q,he)},ge.update=function(he,Ae){return ge.create(Ae).update(he)},x(ge,C,T,q)},H=function(T,q){var ge=w[T],he=b(T,q,"hex");return he.create=function(Ae,$,ce){return!$&&!ce?y["shake"+T].create(Ae):new _(T,q,Ae).bytepad([$,ce],ge)},he.update=function(Ae,$,ce,me){return he.create($,ce,me).update(Ae)},x(he,b,T,q)},O=function(T,q){var ge=w[T],he=F(T,q,"hex");return he.create=function(Ae,$,ce){return new z(T,q,$).bytepad(["KMAC",ce],ge).bytepad([Ae],ge)},he.update=function(Ae,$,ce,me){return he.create(Ae,ce,me).update($)},x(he,F,T,q)},U=[{name:"keccak",padding:h,bits:m,createMethod:E},{name:"sha3",padding:d,bits:m,createMethod:E},{name:"shake",padding:c,bits:g,createMethod:M},{name:"cshake",padding:u,bits:g,createMethod:H},{name:"kmac",padding:u,bits:g,createMethod:O}],y={},I=[],R=0;R<U.length;++R)for(var D=U[R],k=D.bits,V=0;V<k.length;++V){var Z=D.name+"_"+k[V];if(I.push(Z),y[Z]=D.createMethod(k[V],D.padding),D.name!=="sha3"){var N=D.name+k[V];I.push(N),y[N]=y[Z]}}function _(T,q,ge){this.blocks=[],this.s=[],this.padding=q,this.outputBits=ge,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(T<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=ge>>5,this.extraBytes=(ge&31)>>3;for(var he=0;he<50;++he)this.s[he]=0}_.prototype.update=function(T){if(this.finalized)throw new Error(t);var q,ge=typeof T;if(ge!=="string"){if(ge==="object"){if(T===null)throw new Error(e);if(l&&T.constructor===ArrayBuffer)T=new Uint8Array(T);else if(!Array.isArray(T)&&(!l||!ArrayBuffer.isView(T)))throw new Error(e)}else throw new Error(e);q=!0}for(var he=this.blocks,Ae=this.byteCount,$=T.length,ce=this.blockCount,me=0,_e=this.s,P,fe;me<$;){if(this.reset)for(this.reset=!1,he[0]=this.block,P=1;P<ce+1;++P)he[P]=0;if(q)for(P=this.start;me<$&&P<Ae;++me)he[P>>2]|=T[me]<<p[P++&3];else for(P=this.start;me<$&&P<Ae;++me)fe=T.charCodeAt(me),fe<128?he[P>>2]|=fe<<p[P++&3]:fe<2048?(he[P>>2]|=(192|fe>>6)<<p[P++&3],he[P>>2]|=(128|fe&63)<<p[P++&3]):fe<55296||fe>=57344?(he[P>>2]|=(224|fe>>12)<<p[P++&3],he[P>>2]|=(128|fe>>6&63)<<p[P++&3],he[P>>2]|=(128|fe&63)<<p[P++&3]):(fe=65536+((fe&1023)<<10|T.charCodeAt(++me)&1023),he[P>>2]|=(240|fe>>18)<<p[P++&3],he[P>>2]|=(128|fe>>12&63)<<p[P++&3],he[P>>2]|=(128|fe>>6&63)<<p[P++&3],he[P>>2]|=(128|fe&63)<<p[P++&3]);if(this.lastByteIndex=P,P>=Ae){for(this.start=P-Ae,this.block=he[ce],P=0;P<ce;++P)_e[P]^=he[P];ie(_e),this.reset=!0}else this.start=P}return this},_.prototype.encode=function(T,q){var ge=T&255,he=1,Ae=[ge];for(T=T>>8,ge=T&255;ge>0;)Ae.unshift(ge),T=T>>8,ge=T&255,++he;return q?Ae.push(he):Ae.unshift(he),this.update(Ae),Ae.length},_.prototype.encodeString=function(T){var q,ge=typeof T;if(ge!=="string"){if(ge==="object"){if(T===null)throw new Error(e);if(l&&T.constructor===ArrayBuffer)T=new Uint8Array(T);else if(!Array.isArray(T)&&(!l||!ArrayBuffer.isView(T)))throw new Error(e)}else throw new Error(e);q=!0}var he=0,Ae=T.length;if(q)he=Ae;else for(var $=0;$<T.length;++$){var ce=T.charCodeAt($);ce<128?he+=1:ce<2048?he+=2:ce<55296||ce>=57344?he+=3:(ce=65536+((ce&1023)<<10|T.charCodeAt(++$)&1023),he+=4)}return he+=this.encode(he*8),this.update(T),he},_.prototype.bytepad=function(T,q){for(var ge=this.encode(q),he=0;he<T.length;++he)ge+=this.encodeString(T[he]);var Ae=q-ge%q,$=[];return $.length=Ae,this.update($),this},_.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var T=this.blocks,q=this.lastByteIndex,ge=this.blockCount,he=this.s;if(T[q>>2]|=this.padding[q&3],this.lastByteIndex===this.byteCount)for(T[0]=T[ge],q=1;q<ge+1;++q)T[q]=0;for(T[ge-1]|=2147483648,q=0;q<ge;++q)he[q]^=T[q];ie(he)}},_.prototype.toString=_.prototype.hex=function(){this.finalize();for(var T=this.blockCount,q=this.s,ge=this.outputBlocks,he=this.extraBytes,Ae=0,$=0,ce="",me;$<ge;){for(Ae=0;Ae<T&&$<ge;++Ae,++$)me=q[Ae],ce+=A[me>>4&15]+A[me&15]+A[me>>12&15]+A[me>>8&15]+A[me>>20&15]+A[me>>16&15]+A[me>>28&15]+A[me>>24&15];$%T===0&&(ie(q),Ae=0)}return he&&(me=q[Ae],ce+=A[me>>4&15]+A[me&15],he>1&&(ce+=A[me>>12&15]+A[me>>8&15]),he>2&&(ce+=A[me>>20&15]+A[me>>16&15])),ce},_.prototype.arrayBuffer=function(){this.finalize();var T=this.blockCount,q=this.s,ge=this.outputBlocks,he=this.extraBytes,Ae=0,$=0,ce=this.outputBits>>3,me;he?me=new ArrayBuffer(ge+1<<2):me=new ArrayBuffer(ce);for(var _e=new Uint32Array(me);$<ge;){for(Ae=0;Ae<T&&$<ge;++Ae,++$)_e[$]=q[Ae];$%T===0&&ie(q)}return he&&(_e[Ae]=q[Ae],me=me.slice(0,ce)),me},_.prototype.buffer=_.prototype.arrayBuffer,_.prototype.digest=_.prototype.array=function(){this.finalize();for(var T=this.blockCount,q=this.s,ge=this.outputBlocks,he=this.extraBytes,Ae=0,$=0,ce=[],me,_e;$<ge;){for(Ae=0;Ae<T&&$<ge;++Ae,++$)me=$<<2,_e=q[Ae],ce[me]=_e&255,ce[me+1]=_e>>8&255,ce[me+2]=_e>>16&255,ce[me+3]=_e>>24&255;$%T===0&&ie(q)}return he&&(me=$<<2,_e=q[Ae],ce[me]=_e&255,he>1&&(ce[me+1]=_e>>8&255),he>2&&(ce[me+2]=_e>>16&255)),ce};function z(T,q,ge){_.call(this,T,q,ge)}z.prototype=new _,z.prototype.finalize=function(){return this.encode(this.outputBits,!0),_.prototype.finalize.call(this)};var ie=function(T){var q,ge,he,Ae,$,ce,me,_e,P,fe,de,ee,K,se,ye,ne,J,Y,ue,le,we,G,Q,S,W,te,oe,ae,Se,Ee,Me,Le,ke,pe,Fe,Ue,Te,Ye,nt,dt,cn,Ft,ot,Ar,yt,qt,co,Xt,en,re,ve,xe,be,Ie,We,lt,$e,je,wt,ft,vt,Yt,Wr;for(he=0;he<48;he+=2)Ae=T[0]^T[10]^T[20]^T[30]^T[40],$=T[1]^T[11]^T[21]^T[31]^T[41],ce=T[2]^T[12]^T[22]^T[32]^T[42],me=T[3]^T[13]^T[23]^T[33]^T[43],_e=T[4]^T[14]^T[24]^T[34]^T[44],P=T[5]^T[15]^T[25]^T[35]^T[45],fe=T[6]^T[16]^T[26]^T[36]^T[46],de=T[7]^T[17]^T[27]^T[37]^T[47],ee=T[8]^T[18]^T[28]^T[38]^T[48],K=T[9]^T[19]^T[29]^T[39]^T[49],q=ee^(ce<<1|me>>>31),ge=K^(me<<1|ce>>>31),T[0]^=q,T[1]^=ge,T[10]^=q,T[11]^=ge,T[20]^=q,T[21]^=ge,T[30]^=q,T[31]^=ge,T[40]^=q,T[41]^=ge,q=Ae^(_e<<1|P>>>31),ge=$^(P<<1|_e>>>31),T[2]^=q,T[3]^=ge,T[12]^=q,T[13]^=ge,T[22]^=q,T[23]^=ge,T[32]^=q,T[33]^=ge,T[42]^=q,T[43]^=ge,q=ce^(fe<<1|de>>>31),ge=me^(de<<1|fe>>>31),T[4]^=q,T[5]^=ge,T[14]^=q,T[15]^=ge,T[24]^=q,T[25]^=ge,T[34]^=q,T[35]^=ge,T[44]^=q,T[45]^=ge,q=_e^(ee<<1|K>>>31),ge=P^(K<<1|ee>>>31),T[6]^=q,T[7]^=ge,T[16]^=q,T[17]^=ge,T[26]^=q,T[27]^=ge,T[36]^=q,T[37]^=ge,T[46]^=q,T[47]^=ge,q=fe^(Ae<<1|$>>>31),ge=de^($<<1|Ae>>>31),T[8]^=q,T[9]^=ge,T[18]^=q,T[19]^=ge,T[28]^=q,T[29]^=ge,T[38]^=q,T[39]^=ge,T[48]^=q,T[49]^=ge,se=T[0],ye=T[1],qt=T[11]<<4|T[10]>>>28,co=T[10]<<4|T[11]>>>28,ae=T[20]<<3|T[21]>>>29,Se=T[21]<<3|T[20]>>>29,ft=T[31]<<9|T[30]>>>23,vt=T[30]<<9|T[31]>>>23,Ft=T[40]<<18|T[41]>>>14,ot=T[41]<<18|T[40]>>>14,pe=T[2]<<1|T[3]>>>31,Fe=T[3]<<1|T[2]>>>31,ne=T[13]<<12|T[12]>>>20,J=T[12]<<12|T[13]>>>20,Xt=T[22]<<10|T[23]>>>22,en=T[23]<<10|T[22]>>>22,Ee=T[33]<<13|T[32]>>>19,Me=T[32]<<13|T[33]>>>19,Yt=T[42]<<2|T[43]>>>30,Wr=T[43]<<2|T[42]>>>30,Ie=T[5]<<30|T[4]>>>2,We=T[4]<<30|T[5]>>>2,Ue=T[14]<<6|T[15]>>>26,Te=T[15]<<6|T[14]>>>26,Y=T[25]<<11|T[24]>>>21,ue=T[24]<<11|T[25]>>>21,re=T[34]<<15|T[35]>>>17,ve=T[35]<<15|T[34]>>>17,Le=T[45]<<29|T[44]>>>3,ke=T[44]<<29|T[45]>>>3,S=T[6]<<28|T[7]>>>4,W=T[7]<<28|T[6]>>>4,lt=T[17]<<23|T[16]>>>9,$e=T[16]<<23|T[17]>>>9,Ye=T[26]<<25|T[27]>>>7,nt=T[27]<<25|T[26]>>>7,le=T[36]<<21|T[37]>>>11,we=T[37]<<21|T[36]>>>11,xe=T[47]<<24|T[46]>>>8,be=T[46]<<24|T[47]>>>8,Ar=T[8]<<27|T[9]>>>5,yt=T[9]<<27|T[8]>>>5,te=T[18]<<20|T[19]>>>12,oe=T[19]<<20|T[18]>>>12,je=T[29]<<7|T[28]>>>25,wt=T[28]<<7|T[29]>>>25,dt=T[38]<<8|T[39]>>>24,cn=T[39]<<8|T[38]>>>24,G=T[48]<<14|T[49]>>>18,Q=T[49]<<14|T[48]>>>18,T[0]=se^~ne&Y,T[1]=ye^~J&ue,T[10]=S^~te&ae,T[11]=W^~oe&Se,T[20]=pe^~Ue&Ye,T[21]=Fe^~Te&nt,T[30]=Ar^~qt&Xt,T[31]=yt^~co&en,T[40]=Ie^~lt&je,T[41]=We^~$e&wt,T[2]=ne^~Y&le,T[3]=J^~ue&we,T[12]=te^~ae&Ee,T[13]=oe^~Se&Me,T[22]=Ue^~Ye&dt,T[23]=Te^~nt&cn,T[32]=qt^~Xt&re,T[33]=co^~en&ve,T[42]=lt^~je&ft,T[43]=$e^~wt&vt,T[4]=Y^~le&G,T[5]=ue^~we&Q,T[14]=ae^~Ee&Le,T[15]=Se^~Me&ke,T[24]=Ye^~dt&Ft,T[25]=nt^~cn&ot,T[34]=Xt^~re&xe,T[35]=en^~ve&be,T[44]=je^~ft&Yt,T[45]=wt^~vt&Wr,T[6]=le^~G&se,T[7]=we^~Q&ye,T[16]=Ee^~Le&S,T[17]=Me^~ke&W,T[26]=dt^~Ft&pe,T[27]=cn^~ot&Fe,T[36]=re^~xe&Ar,T[37]=ve^~be&yt,T[46]=ft^~Yt&Ie,T[47]=vt^~Wr&We,T[8]=G^~se&ne,T[9]=Q^~ye&J,T[18]=Le^~S&te,T[19]=ke^~W&oe,T[28]=Ft^~pe&Ue,T[29]=ot^~Fe&Te,T[38]=xe^~Ar&qt,T[39]=be^~yt&co,T[48]=Yt^~Ie&lt,T[49]=Wr^~We&$e,T[0]^=f[he],T[1]^=f[he+1]};if(a)n.exports=y;else for(R=0;R<I.length;++R)i[I[R]]=y[I[R]]})()})(YV);var w9=YV.exports;const B9=Zl(w9);function ir(n){return"0x"+B9.keccak_256(At(n))}const C9="strings/5.7.0",XV=new Be(C9);var em;(function(n){n.current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD"})(em||(em={}));var qi;(function(n){n.UNEXPECTED_CONTINUE="unexpected continuation byte",n.BAD_PREFIX="bad codepoint prefix",n.OVERRUN="string overrun",n.MISSING_CONTINUE="missing continuation byte",n.OUT_OF_RANGE="out of UTF-8 range",n.UTF16_SURROGATE="UTF-16 surrogate",n.OVERLONG="overlong representation"})(qi||(qi={}));function b9(n,e,t,r,i){return XV.throwArgumentError(`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function jV(n,e,t,r,i){if(n===qi.BAD_PREFIX||n===qi.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return n===qi.OVERRUN?t.length-e-1:0}function x9(n,e,t,r,i){return n===qi.OVERLONG?(r.push(i),0):(r.push(65533),jV(n,e,t))}const I9=Object.freeze({error:b9,ignore:jV,replace:x9});function KV(n,e){e==null&&(e=I9.error),n=At(n);const t=[];let r=0;for(;r<n.length;){const i=n[r++];if(!(i>>7)){t.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?r+=e(qi.UNEXPECTED_CONTINUE,r-1,n,t):r+=e(qi.BAD_PREFIX,r-1,n,t);continue}if(r-1+s>=n.length){r+=e(qi.OVERRUN,r-1,n,t);continue}let a=i&(1<<8-s-1)-1;for(let l=0;l<s;l++){let A=n[r];if((A&192)!=128){r+=e(qi.MISSING_CONTINUE,r,n,t),a=null;break}a=a<<6|A&63,r++}if(a!==null){if(a>1114111){r+=e(qi.OUT_OF_RANGE,r-1-s,n,t,a);continue}if(a>=55296&&a<=57343){r+=e(qi.UTF16_SURROGATE,r-1-s,n,t,a);continue}if(a<=o){r+=e(qi.OVERLONG,r-1-s,n,t,a);continue}t.push(a)}}return t}function Fa(n,e=em.current){e!=em.current&&(XV.checkNormalize(),n=n.normalize(e));let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const s=n.charCodeAt(r);if(r>=n.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return At(t)}function F9(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function r0(n,e){return F9(KV(n,e))}function _9(n,e=em.current){return KV(Fa(n,e))}function ih(n){return ir(Fa(n))}const $V="hash/5.7.0";function qV(n,e){e==null&&(e=1);const t=[],r=t.forEach,i=function(s,o){r.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):t.push(a)})};return i(n,e),t}function E9(n){const e={};for(let t=0;t<n.length;t++){const r=n[t];e[r[0]]=r[1]}return e}function S9(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let C=1;C<r;C++)s.push(i+=t());let o=t(),a=e;e+=o;let l=0,A=0;function c(){return l==0&&(A=A<<8|n[e++],l=8),A>>--l&1}const u=31,h=Math.pow(2,u),d=h>>>1,p=d>>1,f=h-1;let m=0;for(let C=0;C<u;C++)m=m<<1|c();let g=[],v=0,w=h;for(;;){let C=Math.floor(((m-v+1)*i-1)/w),b=0,F=r;for(;F-b>1;){let M=b+F>>>1;C<s[M]?F=M:b=M}if(b==0)break;g.push(b);let x=v+Math.floor(w*s[b]/i),E=v+Math.floor(w*s[b+1]/i)-1;for(;!((x^E)&d);)m=m<<1&f|c(),x=x<<1&f,E=E<<1&f|1;for(;x&~E&p;)m=m&d|m<<1&f>>>1|c(),x=x<<1^d,E=(E^d)<<1|d|1;v=x,w=1+E-x}let B=r-4;return g.map(C=>{switch(C-B){case 3:return B+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return B+256+(n[a++]<<8|n[a++]);case 1:return B+n[a++];default:return C-1}})}function U9(n){let e=0;return()=>n[e++]}function Q9(n){return U9(S9(n))}function R9(n){return n&1?~n>>1:n>>1}function M9(n,e){let t=Array(n);for(let r=0;r<n;r++)t[r]=1+e();return t}function SR(n,e){let t=Array(n);for(let r=0,i=-1;r<n;r++)t[r]=i+=1+e();return t}function T9(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=R9(e());return t}function Mw(n,e){let t=SR(n(),n),r=n(),i=SR(r,n),s=M9(r,n);for(let o=0;o<r;o++)for(let a=0;a<s[o];a++)t.push(i[o]+a);return e?t.map(o=>e[o]):t}function N9(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(D9(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(L9(t,n))}return E9(qV(e))}function k9(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(t)}return e}function eP(n,e,t){let r=Array(n).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)T9(n,t).forEach((s,o)=>r[o].push(s));return r}function D9(n,e){let t=1+e(),r=e(),i=k9(e),s=eP(i.length,1+n,e);return qV(s.map((o,a)=>{const l=o[0],A=o.slice(1);return Array(i[a]).fill(void 0).map((c,u)=>{let h=u*r;return[l+u*t,A.map(d=>d+h)]})}))}function L9(n,e){let t=1+e();return eP(t,1+n,e).map(i=>[i[0],i.slice(1)])}function V9(n){let e=Mw(n).sort((r,i)=>r-i);return t();function t(){let r=[];for(;;){let A=Mw(n,e);if(A.length==0)break;r.push({set:new Set(A),node:t()})}r.sort((A,c)=>c.set.size-A.set.size);let i=n(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,l=i==2;return{branches:r,valid:s,fe0f:o,save:a,check:l}}}function P9(){return Q9(GV("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const xC=P9(),O9=new Set(Mw(xC)),W9=new Set(Mw(xC)),Z9=N9(xC),G9=V9(xC),UR=45,QR=95;function tP(n){return _9(n)}function J9(n){return n.filter(e=>e!=65039)}function nP(n){for(let e of n.split(".")){let t=tP(e);try{for(let r=t.lastIndexOf(QR)-1;r>=0;r--)if(t[r]!==QR)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(r=>r<128)&&t[2]===UR&&t[3]===UR)throw new Error("invalid label extension")}catch(r){throw new Error(`Invalid label "${e}": ${r.message}`)}}return n}function H9(n){return nP(z9(n,J9))}function z9(n,e){let t=tP(n).reverse(),r=[];for(;t.length;){let i=X9(t);if(i){r.push(...e(i));continue}let s=t.pop();if(O9.has(s)){r.push(s);continue}if(W9.has(s))continue;let o=Z9[s];if(o){r.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return nP(Y9(String.fromCodePoint(...r)))}function Y9(n){return n.normalize("NFC")}function X9(n,e){var t;let r=G9,i,s,o=[],a=n.length;for(e&&(e.length=0);a;){let l=n[--a];if(r=(t=r.branches.find(A=>A.set.has(l)))===null||t===void 0?void 0:t.node,!r)break;if(r.save)s=l;else if(r.check&&l===s)break;o.push(l),r.fe0f&&(o.push(65039),a>0&&n[a-1]==65039&&a--),r.valid&&(i=o.slice(),r.valid==2&&i.splice(1,1),e&&e.push(...n.slice(a).reverse()),n.length=a)}return i}const j9=new Be($V),rP=new Uint8Array(32);rP.fill(0);function RR(n){if(n.length===0)throw new Error("invalid ENS name; empty component");return n}function iP(n){const e=Fa(H9(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(RR(e.slice(r,i))),r=i+1);if(r>=e.length)throw new Error("invalid ENS name; empty component");return t.push(RR(e.slice(r))),t}function Py(n){typeof n!="string"&&j9.throwArgumentError("invalid ENS name; not a string","name",n);let e=rP;const t=iP(n);for(;t.length;)e=ir(is([e,ir(t.pop())]));return tt(e)}function K9(n){return tt(is(iP(n).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}const $9="rlp/5.7.0",ia=new Be($9);function MR(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function TR(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function sP(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(sP(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=MR(r.length);return i.unshift(247+i.length),i.concat(r)}KE(n)||ia.throwArgumentError("RLP object must be BytesLike","object",n);const e=Array.prototype.slice.call(At(n));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=MR(e.length);return t.unshift(183+t.length),t.concat(e)}function IC(n){return tt(sP(n))}function NR(n,e,t,r){const i=[];for(;t<e+1+r;){const s=oP(n,t);i.push(s.result),t+=s.consumed,t>e+1+r&&ia.throwError("child data too short",Be.errors.BUFFER_OVERRUN,{})}return{consumed:1+r,result:i}}function oP(n,e){if(n.length===0&&ia.throwError("data too short",Be.errors.BUFFER_OVERRUN,{}),n[e]>=248){const t=n[e]-247;e+1+t>n.length&&ia.throwError("data short segment too short",Be.errors.BUFFER_OVERRUN,{});const r=TR(n,e+1,t);return e+1+t+r>n.length&&ia.throwError("data long segment too short",Be.errors.BUFFER_OVERRUN,{}),NR(n,e,e+1+t,t+r)}else if(n[e]>=192){const t=n[e]-192;return e+1+t>n.length&&ia.throwError("data array too short",Be.errors.BUFFER_OVERRUN,{}),NR(n,e,e+1,t)}else if(n[e]>=184){const t=n[e]-183;e+1+t>n.length&&ia.throwError("data array too short",Be.errors.BUFFER_OVERRUN,{});const r=TR(n,e+1,t);e+1+t+r>n.length&&ia.throwError("data array too short",Be.errors.BUFFER_OVERRUN,{});const i=tt(n.slice(e+1+t,e+1+t+r));return{consumed:1+t+r,result:i}}else if(n[e]>=128){const t=n[e]-128;e+1+t>n.length&&ia.throwError("data too short",Be.errors.BUFFER_OVERRUN,{});const r=tt(n.slice(e+1,e+1+t));return{consumed:1+t,result:r}}return{consumed:1,result:tt(n[e])}}function $E(n){const e=At(n),t=oP(e,0);return t.consumed!==e.length&&ia.throwArgumentError("invalid rlp data","data",n),t.result}const q9="address/5.7.0",sh=new Be(q9);function kR(n){It(n,20)||sh.throwArgumentError("invalid address","address",n),n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=At(ir(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const e6=9007199254740991;function t6(n){return Math.log10?Math.log10(n):Math.log(n)/Math.LN10}const qE={};for(let n=0;n<10;n++)qE[String(n)]=String(n);for(let n=0;n<26;n++)qE[String.fromCharCode(65+n)]=String(10+n);const DR=Math.floor(t6(e6));function n6(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>qE[r]).join("");for(;e.length>=DR;){let r=e.substring(0,DR);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function Vr(n){let e=null;if(typeof n!="string"&&sh.throwArgumentError("invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/))n.substring(0,2)!=="0x"&&(n="0x"+n),e=kR(n),n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==n&&sh.throwArgumentError("bad address checksum","address",n);else if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(n.substring(2,4)!==n6(n)&&sh.throwArgumentError("bad icap checksum","address",n),e=r9(n.substring(4));e.length<40;)e="0"+e;e=kR("0x"+e)}else sh.throwArgumentError("invalid address","address",n);return e}function aP(n){let e=null;try{e=Vr(n.from)}catch{sh.throwArgumentError("missing from address","transaction",n)}const t=ef(At(Ze.from(n.nonce).toHexString()));return Vr(zr(ir(IC([e,t])),12))}var r6=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const _n=new Be($V),lP=new Uint8Array(32);lP.fill(0);const i6=Ze.from(-1),AP=Ze.from(0),cP=Ze.from(1),s6=Ze.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function o6(n){const e=At(n),t=e.length%32;return t?Si([e,lP.slice(t)]):tt(e)}const a6=Pn(cP.toHexString(),32),l6=Pn(AP.toHexString(),32),LR={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},$b=["name","version","chainId","verifyingContract","salt"];function VR(n){return function(e){return typeof e!="string"&&_n.throwArgumentError(`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const A6={name:VR("name"),version:VR("version"),chainId:function(n){try{return Ze.from(n).toString()}catch{}return _n.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",n)},verifyingContract:function(n){try{return Vr(n).toLowerCase()}catch{}return _n.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){try{const e=At(n);if(e.length!==32)throw new Error("bad length");return tt(e)}catch{}return _n.throwArgumentError('invalid domain value "salt"',"domain.salt",n)}};function qb(n){{const e=n.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",r=parseInt(e[2]||"256");(r%8!==0||r>256||e[2]&&e[2]!==String(r))&&_n.throwArgumentError("invalid numeric width","type",n);const i=s6.mask(t?r-1:r),s=t?i.add(cP).mul(i6):AP;return function(o){const a=Ze.from(o);return(a.lt(s)||a.gt(i))&&_n.throwArgumentError(`value out-of-bounds for ${n}`,"value",o),Pn(a.toTwos(256).toHexString(),32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&_n.throwArgumentError("invalid bytes width","type",n),function(r){return At(r).length!==t&&_n.throwArgumentError(`invalid length for ${n}`,"value",r),o6(r)}}}switch(n){case"address":return function(e){return Pn(Vr(e),32)};case"bool":return function(e){return e?a6:l6};case"bytes":return function(e){return ir(e)};case"string":return function(e){return ih(e)}}return null}function PR(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}class ji{constructor(e){Re(this,"types",Object.freeze(ls(e))),Re(this,"_encoderCache",{}),Re(this,"_types",{});const t={},r={},i={};Object.keys(e).forEach(a=>{t[a]={},r[a]=[],i[a]={}});for(const a in e){const l={};e[a].forEach(A=>{l[A.name]&&_n.throwArgumentError(`duplicate variable name ${JSON.stringify(A.name)} in ${JSON.stringify(a)}`,"types",e),l[A.name]=!0;const c=A.type.match(/^([^\x5b]*)(\x5b|$)/)[1];c===a&&_n.throwArgumentError(`circular type reference to ${JSON.stringify(c)}`,"types",e),!qb(c)&&(r[c]||_n.throwArgumentError(`unknown type ${JSON.stringify(c)}`,"types",e),r[c].push(a),t[a][c]=!0)})}const s=Object.keys(r).filter(a=>r[a].length===0);s.length===0?_n.throwArgumentError("missing primary type","types",e):s.length>1&&_n.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),Re(this,"primaryType",s[0]);function o(a,l){l[a]&&_n.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),l[a]=!0,Object.keys(t[a]).forEach(A=>{r[A]&&(o(A,l),Object.keys(l).forEach(c=>{i[c][A]=!0}))}),delete l[a]}o(this.primaryType,{});for(const a in i){const l=Object.keys(i[a]);l.sort(),this._types[a]=PR(a,e[a])+l.map(A=>PR(A,e[A])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const i=qb(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i),o=parseInt(t[3]);return a=>{o>=0&&a.length!==o&&_n.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let l=a.map(s);return this._types[i]&&(l=l.map(ir)),ir(Si(l))}}const r=this.types[e];if(r){const i=ih(this._types[e]);return s=>{const o=r.map(({name:a,type:l})=>{const A=this.getEncoder(l)(s[a]);return this._types[l]?ir(A):A});return o.unshift(i),Si(o)}}return _n.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||_n.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return ir(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(qb(e))return r(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&_n.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(l=>this._visit(o,l,r))}const s=this.types[e];return s?s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,t[a],r),o),{}):_n.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new ji(e)}static getPrimaryType(e){return ji.from(e).primaryType}static hashStruct(e,t,r){return ji.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const i=LR[r];i||_n.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>$b.indexOf(r.name)-$b.indexOf(i.name)),ji.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Si(["0x1901",ji.hashDomain(e),ji.from(t).hash(r)])}static hash(e,t,r){return ir(ji.encode(e,t,r))}static resolveNames(e,t,r,i){return r6(this,void 0,void 0,function*(){e=xn(e);const s={};e.verifyingContract&&!It(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=ji.from(t);o.visit(r,(a,l)=>(a==="address"&&!It(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}})}static getPayload(e,t,r){ji.hashDomain(e);const i={},s=[];$b.forEach(l=>{const A=e[l];A!=null&&(i[l]=A6[l](A),s.push({name:l,type:LR[l]}))});const o=ji.from(t),a=xn(t);return a.EIP712Domain?_n.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,A)=>{if(l.match(/^bytes(\d*)/))return tt(At(A));if(l.match(/^u?int/))return Ze.from(A).toString();switch(l){case"address":return A.toLowerCase();case"bool":return!!A;case"string":return typeof A!="string"&&_n.throwArgumentError("invalid string","value",A),A}return _n.throwArgumentError("unsupported type","type",l)})}}}var uP={},Rt={},i0=dP;function dP(n,e){if(!n)throw new Error(e||"Assertion failed")}dP.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var tF={exports:{}};typeof Object.create=="function"?tF.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:tF.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var c6=tF.exports,u6=i0,d6=c6;Rt.inherits=d6;function h6(n,e){return(n.charCodeAt(e)&64512)!==55296||e<0||e+1>=n.length?!1:(n.charCodeAt(e+1)&64512)===56320}function f6(n,e){if(Array.isArray(n))return n.slice();if(!n)return[];var t=[];if(typeof n=="string")if(e){if(e==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),i=0;i<n.length;i+=2)t.push(parseInt(n[i]+n[i+1],16))}else for(var r=0,i=0;i<n.length;i++){var s=n.charCodeAt(i);s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):h6(n,i)?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128)}else for(i=0;i<n.length;i++)t[i]=n[i]|0;return t}Rt.toArray=f6;function p6(n){for(var e="",t=0;t<n.length;t++)e+=fP(n[t].toString(16));return e}Rt.toHex=p6;function hP(n){var e=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return e>>>0}Rt.htonl=hP;function g6(n,e){for(var t="",r=0;r<n.length;r++){var i=n[r];e==="little"&&(i=hP(i)),t+=pP(i.toString(16))}return t}Rt.toHex32=g6;function fP(n){return n.length===1?"0"+n:n}Rt.zero2=fP;function pP(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}Rt.zero8=pP;function m6(n,e,t,r){var i=t-e;u6(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var l;r==="big"?l=n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3]:l=n[a+3]<<24|n[a+2]<<16|n[a+1]<<8|n[a],s[o]=l>>>0}return s}Rt.join32=m6;function v6(n,e){for(var t=new Array(n.length*4),r=0,i=0;r<n.length;r++,i+=4){var s=n[r];e==="big"?(t[i]=s>>>24,t[i+1]=s>>>16&255,t[i+2]=s>>>8&255,t[i+3]=s&255):(t[i+3]=s>>>24,t[i+2]=s>>>16&255,t[i+1]=s>>>8&255,t[i]=s&255)}return t}Rt.split32=v6;function y6(n,e){return n>>>e|n<<32-e}Rt.rotr32=y6;function w6(n,e){return n<<e|n>>>32-e}Rt.rotl32=w6;function B6(n,e){return n+e>>>0}Rt.sum32=B6;function C6(n,e,t){return n+e+t>>>0}Rt.sum32_3=C6;function b6(n,e,t,r){return n+e+t+r>>>0}Rt.sum32_4=b6;function x6(n,e,t,r,i){return n+e+t+r+i>>>0}Rt.sum32_5=x6;function I6(n,e,t,r){var i=n[e],s=n[e+1],o=r+s>>>0,a=(o<r?1:0)+t+i;n[e]=a>>>0,n[e+1]=o}Rt.sum64=I6;function F6(n,e,t,r){var i=e+r>>>0,s=(i<e?1:0)+n+t;return s>>>0}Rt.sum64_hi=F6;function _6(n,e,t,r){var i=e+r;return i>>>0}Rt.sum64_lo=_6;function E6(n,e,t,r,i,s,o,a){var l=0,A=e;A=A+r>>>0,l+=A<e?1:0,A=A+s>>>0,l+=A<s?1:0,A=A+a>>>0,l+=A<a?1:0;var c=n+t+i+o+l;return c>>>0}Rt.sum64_4_hi=E6;function S6(n,e,t,r,i,s,o,a){var l=e+r+s+a;return l>>>0}Rt.sum64_4_lo=S6;function U6(n,e,t,r,i,s,o,a,l,A){var c=0,u=e;u=u+r>>>0,c+=u<e?1:0,u=u+s>>>0,c+=u<s?1:0,u=u+a>>>0,c+=u<a?1:0,u=u+A>>>0,c+=u<A?1:0;var h=n+t+i+o+l+c;return h>>>0}Rt.sum64_5_hi=U6;function Q6(n,e,t,r,i,s,o,a,l,A){var c=e+r+s+a+A;return c>>>0}Rt.sum64_5_lo=Q6;function R6(n,e,t){var r=e<<32-t|n>>>t;return r>>>0}Rt.rotr64_hi=R6;function M6(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}Rt.rotr64_lo=M6;function T6(n,e,t){return n>>>t}Rt.shr64_hi=T6;function N6(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}Rt.shr64_lo=N6;var Qf={},OR=Rt,k6=i0;function FC(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Qf.BlockHash=FC;FC.prototype.update=function(e,t){if(e=OR.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=OR.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};FC.prototype.digest=function(e){return this.update(this._pad()),k6(this.pending===null),this._digest(e)};FC.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var s=1;s<r;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var Rf={},Da={},D6=Rt,va=D6.rotr32;function L6(n,e,t,r){if(n===0)return gP(e,t,r);if(n===1||n===3)return vP(e,t,r);if(n===2)return mP(e,t,r)}Da.ft_1=L6;function gP(n,e,t){return n&e^~n&t}Da.ch32=gP;function mP(n,e,t){return n&e^n&t^e&t}Da.maj32=mP;function vP(n,e,t){return n^e^t}Da.p32=vP;function V6(n){return va(n,2)^va(n,13)^va(n,22)}Da.s0_256=V6;function P6(n){return va(n,6)^va(n,11)^va(n,25)}Da.s1_256=P6;function O6(n){return va(n,7)^va(n,18)^n>>>3}Da.g0_256=O6;function W6(n){return va(n,17)^va(n,19)^n>>>10}Da.g1_256=W6;var tf=Rt,Z6=Qf,G6=Da,ex=tf.rotl32,dp=tf.sum32,J6=tf.sum32_5,H6=G6.ft_1,yP=Z6.BlockHash,z6=[1518500249,1859775393,2400959708,3395469782];function _a(){if(!(this instanceof _a))return new _a;yP.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}tf.inherits(_a,yP);var Y6=_a;_a.blockSize=512;_a.outSize=160;_a.hmacStrength=80;_a.padLength=64;_a.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=ex(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],A=this.h[4];for(i=0;i<r.length;i++){var c=~~(i/20),u=J6(ex(s,5),H6(c,o,a,l),A,r[i],z6[c]);A=l,l=a,a=ex(o,30),o=s,s=u}this.h[0]=dp(this.h[0],s),this.h[1]=dp(this.h[1],o),this.h[2]=dp(this.h[2],a),this.h[3]=dp(this.h[3],l),this.h[4]=dp(this.h[4],A)};_a.prototype._digest=function(e){return e==="hex"?tf.toHex32(this.h,"big"):tf.split32(this.h,"big")};var nf=Rt,X6=Qf,Mf=Da,j6=i0,ho=nf.sum32,K6=nf.sum32_4,$6=nf.sum32_5,q6=Mf.ch32,eY=Mf.maj32,tY=Mf.s0_256,nY=Mf.s1_256,rY=Mf.g0_256,iY=Mf.g1_256,wP=X6.BlockHash,sY=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ea(){if(!(this instanceof Ea))return new Ea;wP.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sY,this.W=new Array(64)}nf.inherits(Ea,wP);var BP=Ea;Ea.blockSize=512;Ea.outSize=256;Ea.hmacStrength=192;Ea.padLength=64;Ea.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=K6(iY(r[i-2]),r[i-7],rY(r[i-15]),r[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],A=this.h[4],c=this.h[5],u=this.h[6],h=this.h[7];for(j6(this.k.length===r.length),i=0;i<r.length;i++){var d=$6(h,nY(A),q6(A,c,u),this.k[i],r[i]),p=ho(tY(s),eY(s,o,a));h=u,u=c,c=A,A=ho(l,d),l=a,a=o,o=s,s=ho(d,p)}this.h[0]=ho(this.h[0],s),this.h[1]=ho(this.h[1],o),this.h[2]=ho(this.h[2],a),this.h[3]=ho(this.h[3],l),this.h[4]=ho(this.h[4],A),this.h[5]=ho(this.h[5],c),this.h[6]=ho(this.h[6],u),this.h[7]=ho(this.h[7],h)};Ea.prototype._digest=function(e){return e==="hex"?nf.toHex32(this.h,"big"):nf.split32(this.h,"big")};var nF=Rt,CP=BP;function Ql(){if(!(this instanceof Ql))return new Ql;CP.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}nF.inherits(Ql,CP);var oY=Ql;Ql.blockSize=512;Ql.outSize=224;Ql.hmacStrength=192;Ql.padLength=64;Ql.prototype._digest=function(e){return e==="hex"?nF.toHex32(this.h.slice(0,7),"big"):nF.split32(this.h.slice(0,7),"big")};var Pi=Rt,aY=Qf,lY=i0,ya=Pi.rotr64_hi,wa=Pi.rotr64_lo,bP=Pi.shr64_hi,xP=Pi.shr64_lo,Kl=Pi.sum64,tx=Pi.sum64_hi,nx=Pi.sum64_lo,AY=Pi.sum64_4_hi,cY=Pi.sum64_4_lo,uY=Pi.sum64_5_hi,dY=Pi.sum64_5_lo,IP=aY.BlockHash,hY=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ko(){if(!(this instanceof ko))return new ko;IP.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=hY,this.W=new Array(160)}Pi.inherits(ko,IP);var FP=ko;ko.blockSize=1024;ko.outSize=512;ko.hmacStrength=192;ko.padLength=128;ko.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var s=xY(r[i-4],r[i-3]),o=IY(r[i-4],r[i-3]),a=r[i-14],l=r[i-13],A=CY(r[i-30],r[i-29]),c=bY(r[i-30],r[i-29]),u=r[i-32],h=r[i-31];r[i]=AY(s,o,a,l,A,c,u,h),r[i+1]=cY(s,o,a,l,A,c,u,h)}};ko.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],l=this.h[4],A=this.h[5],c=this.h[6],u=this.h[7],h=this.h[8],d=this.h[9],p=this.h[10],f=this.h[11],m=this.h[12],g=this.h[13],v=this.h[14],w=this.h[15];lY(this.k.length===r.length);for(var B=0;B<r.length;B+=2){var C=v,b=w,F=wY(h,d),x=BY(h,d),E=fY(h,d,p,f,m),M=pY(h,d,p,f,m,g),H=this.k[B],O=this.k[B+1],U=r[B],y=r[B+1],I=uY(C,b,F,x,E,M,H,O,U,y),R=dY(C,b,F,x,E,M,H,O,U,y);C=vY(i,s),b=yY(i,s),F=gY(i,s,o,a,l),x=mY(i,s,o,a,l,A);var D=tx(C,b,F,x),k=nx(C,b,F,x);v=m,w=g,m=p,g=f,p=h,f=d,h=tx(c,u,I,R),d=nx(u,u,I,R),c=l,u=A,l=o,A=a,o=i,a=s,i=tx(I,R,D,k),s=nx(I,R,D,k)}Kl(this.h,0,i,s),Kl(this.h,2,o,a),Kl(this.h,4,l,A),Kl(this.h,6,c,u),Kl(this.h,8,h,d),Kl(this.h,10,p,f),Kl(this.h,12,m,g),Kl(this.h,14,v,w)};ko.prototype._digest=function(e){return e==="hex"?Pi.toHex32(this.h,"big"):Pi.split32(this.h,"big")};function fY(n,e,t,r,i){var s=n&t^~n&i;return s<0&&(s+=4294967296),s}function pY(n,e,t,r,i,s){var o=e&r^~e&s;return o<0&&(o+=4294967296),o}function gY(n,e,t,r,i){var s=n&t^n&i^t&i;return s<0&&(s+=4294967296),s}function mY(n,e,t,r,i,s){var o=e&r^e&s^r&s;return o<0&&(o+=4294967296),o}function vY(n,e){var t=ya(n,e,28),r=ya(e,n,2),i=ya(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function yY(n,e){var t=wa(n,e,28),r=wa(e,n,2),i=wa(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function wY(n,e){var t=ya(n,e,14),r=ya(n,e,18),i=ya(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function BY(n,e){var t=wa(n,e,14),r=wa(n,e,18),i=wa(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function CY(n,e){var t=ya(n,e,1),r=ya(n,e,8),i=bP(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function bY(n,e){var t=wa(n,e,1),r=wa(n,e,8),i=xP(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function xY(n,e){var t=ya(n,e,19),r=ya(e,n,29),i=bP(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}function IY(n,e){var t=wa(n,e,19),r=wa(e,n,29),i=xP(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}var rF=Rt,_P=FP;function Rl(){if(!(this instanceof Rl))return new Rl;_P.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}rF.inherits(Rl,_P);var FY=Rl;Rl.blockSize=1024;Rl.outSize=384;Rl.hmacStrength=192;Rl.padLength=128;Rl.prototype._digest=function(e){return e==="hex"?rF.toHex32(this.h.slice(0,12),"big"):rF.split32(this.h.slice(0,12),"big")};Rf.sha1=Y6;Rf.sha224=oY;Rf.sha256=BP;Rf.sha384=FY;Rf.sha512=FP;var EP={},hu=Rt,_Y=Qf,L0=hu.rotl32,WR=hu.sum32,hp=hu.sum32_3,ZR=hu.sum32_4,SP=_Y.BlockHash;function Sa(){if(!(this instanceof Sa))return new Sa;SP.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}hu.inherits(Sa,SP);EP.ripemd160=Sa;Sa.blockSize=512;Sa.outSize=160;Sa.hmacStrength=192;Sa.padLength=64;Sa.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],l=r,A=i,c=s,u=o,h=a,d=0;d<80;d++){var p=WR(L0(ZR(r,GR(d,i,s,o),e[UY[d]+t],EY(d)),RY[d]),a);r=a,a=o,o=L0(s,10),s=i,i=p,p=WR(L0(ZR(l,GR(79-d,A,c,u),e[QY[d]+t],SY(d)),MY[d]),h),l=h,h=u,u=L0(c,10),c=A,A=p}p=hp(this.h[1],s,u),this.h[1]=hp(this.h[2],o,h),this.h[2]=hp(this.h[3],a,l),this.h[3]=hp(this.h[4],r,A),this.h[4]=hp(this.h[0],i,c),this.h[0]=p};Sa.prototype._digest=function(e){return e==="hex"?hu.toHex32(this.h,"little"):hu.split32(this.h,"little")};function GR(n,e,t,r){return n<=15?e^t^r:n<=31?e&t|~e&r:n<=47?(e|~t)^r:n<=63?e&r|t&~r:e^(t|~r)}function EY(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function SY(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var UY=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],QY=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],RY=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],MY=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],TY=Rt,NY=i0;function rf(n,e,t){if(!(this instanceof rf))return new rf(n,e,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(TY.toArray(e,t))}var kY=rf;rf.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),NY(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};rf.prototype.update=function(e,t){return this.inner.update(e,t),this};rf.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(n){var e=n;e.utils=Rt,e.common=Qf,e.sha=Rf,e.ripemd=EP,e.hmac=kY,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(uP);const ta=Zl(uP);function JR(n){return"0x"+ta.sha256().update(At(n)).digest("hex")}const DY="web/5.7.1";var LY=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};function VY(n,e){return LY(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(t.mode=o.mode),o.cache&&(t.cache=o.cache),o.credentials&&(t.credentials=o.credentials),o.redirect&&(t.redirect=o.redirect),o.referrer&&(t.referrer=o.referrer)}const r=yield fetch(n,t),i=yield r.arrayBuffer(),s={};return r.headers.forEach?r.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):r.headers.keys().forEach(o=>{s[o.toLowerCase()]=r.headers.get(o)}),{headers:s,statusCode:r.status,statusMessage:r.statusText,body:At(new Uint8Array(i))}})}var PY=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const Bo=new Be(DY);function HR(n){return new Promise(e=>{setTimeout(e,n)})}function $l(n,e){if(n==null)return null;if(typeof n=="string")return n;if(KE(n)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return r0(n)}catch{}return tt(n)}return n}function OY(n){return Fa(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function WY(n,e,t){const r=typeof n=="object"&&n.throttleLimit!=null?n.throttleLimit:12;Bo.assertArgument(r>0&&r%1===0,"invalid connection throttle limit","connection.throttleLimit",r);const i=typeof n=="object"?n.throttleCallback:null,s=typeof n=="object"&&typeof n.throttleSlotInterval=="number"?n.throttleSlotInterval:100;Bo.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof n=="object"?!!n.errorPassThrough:!1,a={};let l=null;const A={method:"GET"};let c=!1,u=2*60*1e3;if(typeof n=="string")l=n;else if(typeof n=="object"){if((n==null||n.url==null)&&Bo.throwArgumentError("missing URL","connection.url",n),l=n.url,typeof n.timeout=="number"&&n.timeout>0&&(u=n.timeout),n.headers)for(const g in n.headers)a[g.toLowerCase()]={key:g,value:String(n.headers[g])},["if-none-match","if-modified-since"].indexOf(g.toLowerCase())>=0&&(c=!0);if(A.allowGzip=!!n.allowGzip,n.user!=null&&n.password!=null){l.substring(0,6)!=="https:"&&n.allowInsecureAuthentication!==!0&&Bo.throwError("basic authentication requires a secure https url",Be.errors.INVALID_ARGUMENT,{argument:"url",url:l,user:n.user,password:"[REDACTED]"});const g=n.user+":"+n.password;a.authorization={key:"Authorization",value:"Basic "+JV(Fa(g))}}n.skipFetchSetup!=null&&(A.skipFetchSetup=!!n.skipFetchSetup),n.fetchOptions!=null&&(A.fetchOptions=xn(n.fetchOptions))}const h=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),d=l?l.match(h):null;if(d)try{const g={statusCode:200,statusMessage:"OK",headers:{"content-type":d[1]||"text/plain"},body:d[2]?GV(d[3]):OY(d[3])};let v=g.body;return t&&(v=t(g.body,g)),Promise.resolve(v)}catch(g){Bo.throwError("processing response error",Be.errors.SERVER_ERROR,{body:$l(d[1],d[2]),error:g,requestBody:null,requestMethod:"GET",url:l})}e&&(A.method="POST",A.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const p={};Object.keys(a).forEach(g=>{const v=a[g];p[v.key]=v.value}),A.headers=p;const f=function(){let g=null;return{promise:new Promise(function(B,C){u&&(g=setTimeout(()=>{g!=null&&(g=null,C(Bo.makeError("timeout",Be.errors.TIMEOUT,{requestBody:$l(A.body,p["content-type"]),requestMethod:A.method,timeout:u,url:l})))},u))}),cancel:function(){g!=null&&(clearTimeout(g),g=null)}}}(),m=function(){return PY(this,void 0,void 0,function*(){for(let g=0;g<r;g++){let v=null;try{if(v=yield VY(l,A),g<r){if(v.statusCode===301||v.statusCode===302){const B=v.headers.location||"";if(A.method==="GET"&&B.match(/^https:/)){l=v.headers.location;continue}}else if(v.statusCode===429){let B=!0;if(i&&(B=yield i(g,l)),B){let C=0;const b=v.headers["retry-after"];typeof b=="string"&&b.match(/^[1-9][0-9]*$/)?C=parseInt(b)*1e3:C=s*parseInt(String(Math.random()*Math.pow(2,g))),yield HR(C);continue}}}}catch(B){v=B.response,v==null&&(f.cancel(),Bo.throwError("missing response",Be.errors.SERVER_ERROR,{requestBody:$l(A.body,p["content-type"]),requestMethod:A.method,serverError:B,url:l}))}let w=v.body;if(c&&v.statusCode===304?w=null:!o&&(v.statusCode<200||v.statusCode>=300)&&(f.cancel(),Bo.throwError("bad response",Be.errors.SERVER_ERROR,{status:v.statusCode,headers:v.headers,body:$l(w,v.headers?v.headers["content-type"]:null),requestBody:$l(A.body,p["content-type"]),requestMethod:A.method,url:l})),t)try{const B=yield t(w,v);return f.cancel(),B}catch(B){if(B.throttleRetry&&g<r){let C=!0;if(i&&(C=yield i(g,l)),C){const b=s*parseInt(String(Math.random()*Math.pow(2,g)));yield HR(b);continue}}f.cancel(),Bo.throwError("processing response error",Be.errors.SERVER_ERROR,{body:$l(w,v.headers?v.headers["content-type"]:null),error:B,requestBody:$l(A.body,p["content-type"]),requestMethod:A.method,url:l})}return f.cancel(),w}return Bo.throwError("failed response",Be.errors.SERVER_ERROR,{requestBody:$l(A.body,p["content-type"]),requestMethod:A.method,url:l})})}();return Promise.race([f.promise,m])}function _C(n,e,t){let r=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(r0(s))}catch(l){Bo.throwError("invalid JSON",Be.errors.SERVER_ERROR,{body:s,error:l})}return t&&(a=t(a,o)),a},i=null;if(e!=null){i=Fa(e);const s=typeof n=="string"?{url:n}:xn(n);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=xn(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},n=s}return WY(n,i,r)}function oh(n,e){return e||(e={}),e=xn(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,r){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&r(new Error("timeout"))},e.timeout));const a=e.retryLimit;let l=0;function A(){return n().then(function(c){if(c!==void 0)o()&&t(c);else if(e.oncePoll)e.oncePoll.once("poll",A);else if(e.onceBlock)e.onceBlock.once("block",A);else if(!s){if(l++,l>a){o()&&r(new Error("retry limit reached"));return}let u=e.interval*parseInt(String(Math.random()*Math.pow(2,l)));u<e.floor&&(u=e.floor),u>e.ceiling&&(u=e.ceiling),setTimeout(A,u)}return null},function(c){o()&&r(c)})}A()})}var Tw="qpzry9x8gf2tvdw0s3jn54khce6mua7l",iF={};for(var V0=0;V0<Tw.length;V0++){var rx=Tw.charAt(V0);if(iF[rx]!==void 0)throw new TypeError(rx+" is ambiguous");iF[rx]=V0}function Mh(n){var e=n>>25;return(n&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function UP(n){for(var e=1,t=0;t<n.length;++t){var r=n.charCodeAt(t);if(r<33||r>126)return"Invalid prefix ("+n+")";e=Mh(e)^r>>5}for(e=Mh(e),t=0;t<n.length;++t){var i=n.charCodeAt(t);e=Mh(e)^i&31}return e}function ZY(n,e,t){if(t=t||90,n.length+7+e.length>t)throw new TypeError("Exceeds length limit");n=n.toLowerCase();var r=UP(n);if(typeof r=="string")throw new Error(r);for(var i=n+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");r=Mh(r)^o,i+=Tw.charAt(o)}for(s=0;s<6;++s)r=Mh(r);for(r^=1,s=0;s<6;++s){var a=r>>(5-s)*5&31;i+=Tw.charAt(a)}return i}function QP(n,e){if(e=e||90,n.length<8)return n+" too short";if(n.length>e)return"Exceeds length limit";var t=n.toLowerCase(),r=n.toUpperCase();if(n!==t&&n!==r)return"Mixed-case string "+n;n=t;var i=n.lastIndexOf("1");if(i===-1)return"No separator character for "+n;if(i===0)return"Missing prefix for "+n;var s=n.slice(0,i),o=n.slice(i+1);if(o.length<6)return"Data too short";var a=UP(s);if(typeof a=="string")return a;for(var l=[],A=0;A<o.length;++A){var c=o.charAt(A),u=iF[c];if(u===void 0)return"Unknown character "+c;a=Mh(a)^u,!(A+6>=o.length)&&l.push(u)}return a!==1?"Invalid checksum for "+n:{prefix:s,words:l}}function GY(){var n=QP.apply(null,arguments);if(typeof n=="object")return n}function JY(n){var e=QP.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function EC(n,e,t,r){for(var i=0,s=0,o=(1<<t)-1,a=[],l=0;l<n.length;++l)for(i=i<<e|n[l],s+=e;s>=t;)s-=t,a.push(i>>s&o);if(r)s>0&&a.push(i<<t-s&o);else{if(s>=e)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function HY(n){var e=EC(n,8,5,!0);if(Array.isArray(e))return e}function zY(n){var e=EC(n,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function YY(n){var e=EC(n,5,8,!1);if(Array.isArray(e))return e}function XY(n){var e=EC(n,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var jY={decodeUnsafe:GY,decode:JY,encode:ZY,toWordsUnsafe:HY,toWords:zY,fromWordsUnsafe:YY,fromWords:XY};const zR=Zl(jY),ri="providers/5.7.2";function Tf(n,e,t){return t={path:e,exports:{},require:function(r,i){return KY(r,i??t.path)}},n(t,t.exports),t.exports}function KY(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var eS=RP;function RP(n,e){if(!n)throw new Error(e||"Assertion failed")}RP.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var Uo=Tf(function(n,e){var t=e;function r(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var l=[];if(typeof o!="string"){for(var A=0;A<o.length;A++)l[A]=o[A]|0;return l}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var A=0;A<o.length;A+=2)l.push(parseInt(o[A]+o[A+1],16))}else for(var A=0;A<o.length;A++){var c=o.charCodeAt(A),u=c>>8,h=c&255;u?l.push(u,h):l.push(h)}return l}t.toArray=r;function i(o){return o.length===1?"0"+o:o}t.zero2=i;function s(o){for(var a="",l=0;l<o.length;l++)a+=i(o[l].toString(16));return a}t.toHex=s,t.encode=function(a,l){return l==="hex"?s(a):a}}),vs=Tf(function(n,e){var t=e;t.assert=eS,t.toArray=Uo.toArray,t.zero2=Uo.zero2,t.toHex=Uo.toHex,t.encode=Uo.encode;function r(l,A,c){var u=new Array(Math.max(l.bitLength(),c)+1);u.fill(0);for(var h=1<<A+1,d=l.clone(),p=0;p<u.length;p++){var f,m=d.andln(h-1);d.isOdd()?(m>(h>>1)-1?f=(h>>1)-m:f=m,d.isubn(f)):f=0,u[p]=f,d.iushrn(1)}return u}t.getNAF=r;function i(l,A){var c=[[],[]];l=l.clone(),A=A.clone();for(var u=0,h=0,d;l.cmpn(-u)>0||A.cmpn(-h)>0;){var p=l.andln(3)+u&3,f=A.andln(3)+h&3;p===3&&(p=-1),f===3&&(f=-1);var m;p&1?(d=l.andln(7)+u&7,(d===3||d===5)&&f===2?m=-p:m=p):m=0,c[0].push(m);var g;f&1?(d=A.andln(7)+h&7,(d===3||d===5)&&p===2?g=-f:g=f):g=0,c[1].push(g),2*u===m+1&&(u=1-u),2*h===g+1&&(h=1-h),l.iushrn(1),A.iushrn(1)}return c}t.getJSF=i;function s(l,A,c){var u="_"+A;l.prototype[A]=function(){return this[u]!==void 0?this[u]:this[u]=c.call(this)}}t.cachedProperty=s;function o(l){return typeof l=="string"?t.toArray(l,"hex"):l}t.parseBytes=o;function a(l){return new mt(l,"hex","le")}t.intFromLE=a}),Nw=vs.getNAF,$Y=vs.getJSF,kw=vs.assert;function dc(n,e){this.type=n,this.p=new mt(e.p,16),this.red=e.prime?mt.red(e.prime):mt.mont(this.p),this.zero=new mt(0).toRed(this.red),this.one=new mt(1).toRed(this.red),this.two=new mt(2).toRed(this.red),this.n=e.n&&new mt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Eu=dc;dc.prototype.point=function(){throw new Error("Not implemented")};dc.prototype.validate=function(){throw new Error("Not implemented")};dc.prototype._fixedNafMul=function(e,t){kw(e.precomputed);var r=e._getDoubles(),i=Nw(t,1,this._bitLength),s=(1<<r.step+1)-(r.step%2===0?2:1);s/=3;var o=[],a,l;for(a=0;a<i.length;a+=r.step){l=0;for(var A=a+r.step-1;A>=a;A--)l=(l<<1)+i[A];o.push(l)}for(var c=this.jpoint(null,null,null),u=this.jpoint(null,null,null),h=s;h>0;h--){for(a=0;a<o.length;a++)l=o[a],l===h?u=u.mixedAdd(r.points[a]):l===-h&&(u=u.mixedAdd(r.points[a].neg()));c=c.add(u)}return c.toP()};dc.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var s=i.points,o=Nw(t,r,this._bitLength),a=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var A=0;l>=0&&o[l]===0;l--)A++;if(l>=0&&A++,a=a.dblp(A),l<0)break;var c=o[l];kw(c!==0),e.type==="affine"?c>0?a=a.mixedAdd(s[c-1>>1]):a=a.mixedAdd(s[-c-1>>1].neg()):c>0?a=a.add(s[c-1>>1]):a=a.add(s[-c-1>>1].neg())}return e.type==="affine"?a.toP():a};dc.prototype._wnafMulAdd=function(e,t,r,i,s){var o=this._wnafT1,a=this._wnafT2,l=this._wnafT3,A=0,c,u,h;for(c=0;c<i;c++){h=t[c];var d=h._getNAFPoints(e);o[c]=d.wnd,a[c]=d.points}for(c=i-1;c>=1;c-=2){var p=c-1,f=c;if(o[p]!==1||o[f]!==1){l[p]=Nw(r[p],o[p],this._bitLength),l[f]=Nw(r[f],o[f],this._bitLength),A=Math.max(l[p].length,A),A=Math.max(l[f].length,A);continue}var m=[t[p],null,null,t[f]];t[p].y.cmp(t[f].y)===0?(m[1]=t[p].add(t[f]),m[2]=t[p].toJ().mixedAdd(t[f].neg())):t[p].y.cmp(t[f].y.redNeg())===0?(m[1]=t[p].toJ().mixedAdd(t[f]),m[2]=t[p].add(t[f].neg())):(m[1]=t[p].toJ().mixedAdd(t[f]),m[2]=t[p].toJ().mixedAdd(t[f].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],v=$Y(r[p],r[f]);for(A=Math.max(v[0].length,A),l[p]=new Array(A),l[f]=new Array(A),u=0;u<A;u++){var w=v[0][u]|0,B=v[1][u]|0;l[p][u]=g[(w+1)*3+(B+1)],l[f][u]=0,a[p]=m}}var C=this.jpoint(null,null,null),b=this._wnafT4;for(c=A;c>=0;c--){for(var F=0;c>=0;){var x=!0;for(u=0;u<i;u++)b[u]=l[u][c]|0,b[u]!==0&&(x=!1);if(!x)break;F++,c--}if(c>=0&&F++,C=C.dblp(F),c<0)break;for(u=0;u<i;u++){var E=b[u];E!==0&&(E>0?h=a[u][E-1>>1]:E<0&&(h=a[u][-E-1>>1].neg()),h.type==="affine"?C=C.mixedAdd(h):C=C.add(h))}}for(c=0;c<i;c++)a[c]=null;return s?C:C.toP()};function oo(n,e){this.curve=n,this.type=e,this.precomputed=null}dc.BasePoint=oo;oo.prototype.eq=function(){throw new Error("Not implemented")};oo.prototype.validate=function(){return this.curve.validate(this)};dc.prototype.decodePoint=function(e,t){e=vs.toArray(e,t);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*r){e[0]===6?kw(e[e.length-1]%2===0):e[0]===7&&kw(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return i}else if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw new Error("Unknown point format")};oo.prototype.encodeCompressed=function(e){return this.encode(e,!0)};oo.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))};oo.prototype.encode=function(e,t){return vs.encode(this._encode(t),e)};oo.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};oo.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};oo.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,s=0;s<t;s+=e){for(var o=0;o<e;o++)i=i.dbl();r.push(i)}return{step:e,points:r}};oo.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=r===1?null:this.dbl(),s=1;s<r;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};oo.prototype._getBeta=function(){return null};oo.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var tS=Tf(function(n){typeof Object.create=="function"?n.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}}),qY=vs.assert;function ao(n){Eu.call(this,"short",n),this.a=new mt(n.a,16).toRed(this.red),this.b=new mt(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}tS(ao,Eu);var eX=ao;ao.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,r;if(e.beta)t=new mt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)r=new mt(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?r=s[0]:(r=s[1],qY(this.g.mul(r).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new mt(a.a,16),b:new mt(a.b,16)}}):o=this._getEndoBasis(r),{beta:t,lambda:r,basis:o}}};ao.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:mt.mont(e),r=new mt(2).toRed(t).redInvm(),i=r.redNeg(),s=new mt(3).toRed(t).redNeg().redSqrt().redMul(r),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};ao.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=e,i=this.n.clone(),s=new mt(1),o=new mt(0),a=new mt(0),l=new mt(1),A,c,u,h,d,p,f,m=0,g,v;r.cmpn(0)!==0;){var w=i.div(r);g=i.sub(w.mul(r)),v=a.sub(w.mul(s));var B=l.sub(w.mul(o));if(!u&&g.cmp(t)<0)A=f.neg(),c=s,u=g.neg(),h=v;else if(u&&++m===2)break;f=g,i=r,r=g,a=s,s=v,l=o,o=B}d=g.neg(),p=v;var C=u.sqr().add(h.sqr()),b=d.sqr().add(p.sqr());return b.cmp(C)>=0&&(d=A,p=c),u.negative&&(u=u.neg(),h=h.neg()),d.negative&&(d=d.neg(),p=p.neg()),[{a:u,b:h},{a:d,b:p}]};ao.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=s.mul(r.a),l=o.mul(i.a),A=s.mul(r.b),c=o.mul(i.b),u=e.sub(a).sub(l),h=A.add(c).neg();return{k1:u,k2:h}};ao.prototype.pointFromX=function(e,t){e=new mt(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(i.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};ao.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return r.redSqr().redISub(s).cmpn(0)===0};ao.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),l=e[o],A=l._getBeta();a.k1.negative&&(a.k1.ineg(),l=l.neg(!0)),a.k2.negative&&(a.k2.ineg(),A=A.neg(!0)),i[o*2]=l,i[o*2+1]=A,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var c=this._wnafMulAdd(1,i,s,o*2,r),u=0;u<o*2;u++)i[u]=null,s[u]=null;return c};function Ur(n,e,t,r){Eu.BasePoint.call(this,n,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new mt(e,16),this.y=new mt(t,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}tS(Ur,Eu.BasePoint);ao.prototype.point=function(e,t,r){return new Ur(this,e,t,r)};ao.prototype.pointFromJSON=function(e,t){return Ur.fromJSON(this,e,t)};Ur.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(s){return r.point(s.x.redMul(r.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};Ur.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Ur.fromJSON=function(e,t,r){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function s(a){return e.point(a[0],a[1],r)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};Ur.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Ur.prototype.isInfinity=function(){return this.inf};Ur.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)};Ur.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),s=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};Ur.prototype.getX=function(){return this.x.fromRed()};Ur.prototype.getY=function(){return this.y.fromRed()};Ur.prototype.mul=function(e){return e=new mt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Ur.prototype.mulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};Ur.prototype.jmulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};Ur.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Ur.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t};Ur.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Or(n,e,t,r){Eu.BasePoint.call(this,n,"jacobian"),e===null&&t===null&&r===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new mt(0)):(this.x=new mt(e,16),this.y=new mt(t,16),this.z=new mt(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}tS(Or,Eu.BasePoint);ao.prototype.jpoint=function(e,t,r){return new Or(this,e,t,r)};Or.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)};Or.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Or.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),l=i.redSub(s),A=o.redSub(a);if(l.cmpn(0)===0)return A.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=l.redSqr(),u=c.redMul(l),h=i.redMul(c),d=A.redSqr().redIAdd(u).redISub(h).redISub(h),p=A.redMul(h.redISub(d)).redISub(o.redMul(u)),f=this.z.redMul(e.z).redMul(l);return this.curve.jpoint(d,p,f)};Or.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),s=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(i),l=s.redSub(o);if(a.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=a.redSqr(),c=A.redMul(a),u=r.redMul(A),h=l.redSqr().redIAdd(c).redISub(u).redISub(u),d=l.redMul(u.redISub(h)).redISub(s.redMul(c)),p=this.z.redMul(a);return this.curve.jpoint(h,d,p)};Or.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,l=this.z,A=l.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var u=o.redSqr(),h=c.redSqr(),d=h.redSqr(),p=u.redAdd(u).redIAdd(u).redIAdd(i.redMul(A)),f=o.redMul(h),m=p.redSqr().redISub(f.redAdd(f)),g=f.redISub(m),v=p.redMul(g);v=v.redIAdd(v).redISub(d);var w=c.redMul(l);t+1<e&&(A=A.redMul(d)),o=m,l=w,c=v}return this.curve.jpoint(o,c.redMul(s),l)};Or.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Or.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i),A=l.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),e=A,t=l.redMul(a.redISub(A)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),p=this.x.redAdd(h).redSqr().redISub(u).redISub(d);p=p.redIAdd(p);var f=u.redAdd(u).redIAdd(u),m=f.redSqr(),g=d.redIAdd(d);g=g.redIAdd(g),g=g.redIAdd(g),e=m.redISub(p).redISub(p),t=f.redMul(p.redISub(e)).redISub(g),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,t,r)};Or.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),A=l.redSqr().redISub(a).redISub(a);e=A;var c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),t=l.redMul(a.redISub(A)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),h=this.y.redSqr(),d=this.x.redMul(h),p=this.x.redSub(u).redMul(this.x.redAdd(u));p=p.redAdd(p).redIAdd(p);var f=d.redIAdd(d);f=f.redIAdd(f);var m=f.redAdd(f);e=p.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(u);var g=h.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g),t=p.redMul(f.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)};Or.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),l=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),A=t.redAdd(t);A=A.redIAdd(A);var c=A.redMul(a),u=l.redSqr().redISub(c.redAdd(c)),h=c.redISub(u),d=a.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var p=l.redMul(h).redISub(d),f=r.redAdd(r).redMul(i);return this.curve.jpoint(u,p,f)};Or.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var l=a.redSqr(),A=i.redIAdd(i);A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var c=s.redIAdd(a).redSqr().redISub(o).redISub(l).redISub(A),u=t.redMul(c);u=u.redIAdd(u),u=u.redIAdd(u);var h=this.x.redMul(l).redISub(u);h=h.redIAdd(h),h=h.redIAdd(h);var d=this.y.redMul(c.redMul(A.redISub(c)).redISub(a.redMul(l)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var p=this.z.redAdd(a).redSqr().redISub(r).redISub(l);return this.curve.jpoint(h,d,p)};Or.prototype.mul=function(e,t){return e=new mt(e,t),this.curve._wnafMul(this,e)};Or.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=r.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Or.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),this.x.cmp(r)===0)return!0}};Or.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Or.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Oy=Tf(function(n,e){var t=e;t.base=Eu,t.short=eX,t.mont=null,t.edwards=null}),Wy=Tf(function(n,e){var t=e,r=vs.assert;function i(a){a.type==="short"?this.curve=new Oy.short(a):a.type==="edwards"?this.curve=new Oy.edwards(a):this.curve=new Oy.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,r(this.g.validate(),"Invalid curve"),r(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(a,l){Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){var A=new i(l);return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,value:A}),A}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ta.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ta.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:ta.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ta.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ta.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ta.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ta.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:ta.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function ec(n){if(!(this instanceof ec))return new ec(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Uo.toArray(n.entropy,n.entropyEnc||"hex"),t=Uo.toArray(n.nonce,n.nonceEnc||"hex"),r=Uo.toArray(n.pers,n.persEnc||"hex");eS(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,r)}var MP=ec;ec.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};ec.prototype._hmac=function(){return new ta.hmac(this.hash,this.K)};ec.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};ec.prototype.reseed=function(e,t,r,i){typeof t!="string"&&(i=r,r=t,t=null),e=Uo.toArray(e,t),r=Uo.toArray(r,i),eS(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1};ec.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=r,r=t,t=null),r&&(r=Uo.toArray(r,i||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(r),this._reseed++,Uo.encode(o,t)};var sF=vs.assert;function qr(n,e){this.ec=n,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var nS=qr;qr.fromPublic=function(e,t,r){return t instanceof qr?t:new qr(e,{pub:t,pubEnc:r})};qr.fromPrivate=function(e,t,r){return t instanceof qr?t:new qr(e,{priv:t,privEnc:r})};qr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};qr.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};qr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};qr.prototype._importPrivate=function(e,t){this.priv=new mt(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};qr.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?sF(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&sF(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};qr.prototype.derive=function(e){return e.validate()||sF(e.validate(),"public point not validated"),e.mul(this.priv).getX()};qr.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)};qr.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};qr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var tX=vs.assert;function SC(n,e){if(n instanceof SC)return n;this._importDER(n,e)||(tX(n.r&&n.s,"Signature without r or s"),this.r=new mt(n.r,16),this.s=new mt(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var UC=SC;function nX(){this.place=0}function ix(n,e){var t=n[e.place++];if(!(t&128))return t;var r=t&15;if(r===0||r>4)return!1;for(var i=0,s=0,o=e.place;s<r;s++,o++)i<<=8,i|=n[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function YR(n){for(var e=0,t=n.length-1;!n[e]&&!(n[e+1]&128)&&e<t;)e++;return e===0?n:n.slice(e)}SC.prototype._importDER=function(e,t){e=vs.toArray(e,t);var r=new nX;if(e[r.place++]!==48)return!1;var i=ix(e,r);if(i===!1||i+r.place!==e.length||e[r.place++]!==2)return!1;var s=ix(e,r);if(s===!1)return!1;var o=e.slice(r.place,s+r.place);if(r.place+=s,e[r.place++]!==2)return!1;var a=ix(e,r);if(a===!1||e.length!==a+r.place)return!1;var l=e.slice(r.place,a+r.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new mt(o),this.s=new mt(l),this.recoveryParam=null,!0};function sx(n,e){if(e<128){n.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(n.push(t|128);--t;)n.push(e>>>(t<<3)&255);n.push(e)}SC.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),r[0]&128&&(r=[0].concat(r)),t=YR(t),r=YR(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var i=[2];sx(i,t.length),i=i.concat(t),i.push(2),sx(i,r.length);var s=i.concat(r),o=[48];return sx(o,s.length),o=o.concat(s),vs.encode(o,e)};var rX=function(){throw new Error("unsupported")},TP=vs.assert;function eo(n){if(!(this instanceof eo))return new eo(n);typeof n=="string"&&(TP(Object.prototype.hasOwnProperty.call(Wy,n),"Unknown curve "+n),n=Wy[n]),n instanceof Wy.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var iX=eo;eo.prototype.keyPair=function(e){return new nS(this,e)};eo.prototype.keyFromPrivate=function(e,t){return nS.fromPrivate(this,e,t)};eo.prototype.keyFromPublic=function(e,t){return nS.fromPublic(this,e,t)};eo.prototype.genKeyPair=function(e){e||(e={});for(var t=new MP({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||rX(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new mt(2));;){var s=new mt(t.generate(r));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};eo.prototype._truncateToN=function(e,t){var r=e.byteLength()*8-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};eo.prototype.sign=function(e,t,r,i){typeof r=="object"&&(i=r,r=null),i||(i={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new mt(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),a=e.toArray("be",s),l=new MP({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),A=this.n.sub(new mt(1)),c=0;;c++){var u=i.k?i.k(c):new mt(l.generate(this.n.byteLength()));if(u=this._truncateToN(u,!0),!(u.cmpn(1)<=0||u.cmp(A)>=0)){var h=this.g.mul(u);if(!h.isInfinity()){var d=h.getX(),p=d.umod(this.n);if(p.cmpn(0)!==0){var f=u.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(f=f.umod(this.n),f.cmpn(0)!==0){var m=(h.getY().isOdd()?1:0)|(d.cmp(p)!==0?2:0);return i.canonical&&f.cmp(this.nh)>0&&(f=this.n.sub(f),m^=1),new UC({r:p,s:f,recoveryParam:m})}}}}}};eo.prototype.verify=function(e,t,r,i){e=this._truncateToN(new mt(e,16)),r=this.keyFromPublic(r,i),t=new UC(t,"hex");var s=t.r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),l=a.mul(e).umod(this.n),A=a.mul(s).umod(this.n),c;return this.curve._maxwellTrick?(c=this.g.jmulAdd(l,r.getPublic(),A),c.isInfinity()?!1:c.eqXToP(s)):(c=this.g.mulAdd(l,r.getPublic(),A),c.isInfinity()?!1:c.getX().umod(this.n).cmp(s)===0)};eo.prototype.recoverPubKey=function(n,e,t,r){TP((3&t)===t,"The recovery param is more than two bits"),e=new UC(e,r);var i=this.n,s=new mt(n),o=e.r,a=e.s,l=t&1,A=t>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&A)throw new Error("Unable to find sencond key candinate");A?o=this.curve.pointFromX(o.add(this.curve.n),l):o=this.curve.pointFromX(o,l);var c=e.r.invm(i),u=i.sub(s).mul(c).umod(i),h=a.mul(c).umod(i);return this.g.mulAdd(u,o,h)};eo.prototype.getKeyRecoveryParam=function(n,e,t,r){if(e=new UC(e,r),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(n,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var sX=Tf(function(n,e){var t=e;t.version="6.5.4",t.utils=vs,t.rand=function(){throw new Error("unsupported")},t.curve=Oy,t.curves=Wy,t.ec=iX,t.eddsa=null}),oX=sX.ec;const aX="signing-key/5.7.0",oF=new Be(aX);let ox=null;function sa(){return ox||(ox=new oX("secp256k1")),ox}class lX{constructor(e){Re(this,"curve","secp256k1"),Re(this,"privateKey",tt(e)),du(this.privateKey)!==32&&oF.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=sa().keyFromPrivate(At(this.privateKey));Re(this,"publicKey","0x"+t.getPublic(!1,"hex")),Re(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),Re(this,"_isSigningKey",!0)}_addPoint(e){const t=sa().keyFromPublic(At(this.publicKey)),r=sa().keyFromPublic(At(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=sa().keyFromPrivate(At(this.privateKey)),r=At(e);r.length!==32&&oF.throwArgumentError("bad digest length","digest",e);const i=t.sign(r,{canonical:!0});return bC({recoveryParam:i.recoveryParam,r:Pn("0x"+i.r.toString(16),32),s:Pn("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=sa().keyFromPrivate(At(this.privateKey)),r=sa().keyFromPublic(At(NP(e)));return Pn("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function AX(n,e){const t=bC(e),r={r:At(t.r),s:At(t.s)};return"0x"+sa().recoverPubKey(At(n),r,t.recoveryParam).encode("hex",!1)}function NP(n,e){const t=At(n);if(t.length===32){const r=new lX(t);return e?"0x"+sa().keyFromPrivate(t).getPublic(!0,"hex"):r.publicKey}else{if(t.length===33)return e?tt(t):"0x"+sa().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+sa().keyFromPublic(t).getPublic(!0,"hex"):tt(t)}return oF.throwArgumentError("invalid public or private key","key","[REDACTED]")}const cX="transactions/5.7.0",Gl=new Be(cX);var XR;(function(n){n[n.legacy=0]="legacy",n[n.eip2930=1]="eip2930",n[n.eip1559=2]="eip1559"})(XR||(XR={}));function rS(n){return n==="0x"?null:Vr(n)}function Xr(n){return n==="0x"?zV:Ze.from(n)}function uX(n){const e=NP(n);return Vr(zr(ir(zr(e,1)),12))}function kP(n,e){return uX(AX(At(n),e))}function es(n,e){const t=ef(Ze.from(n).toHexString());return t.length>32&&Gl.throwArgumentError("invalid length for "+e,"transaction:"+e,n),t}function ax(n,e){return{address:Vr(n),storageKeys:(e||[]).map((t,r)=>(du(t)!==32&&Gl.throwArgumentError("invalid access list storageKey",`accessList[${n}:${r}]`,t),t.toLowerCase()))}}function Su(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(t.length>2&&Gl.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${r}]`,t),ax(t[0],t[1])):ax(t.address,t.storageKeys));const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return ax(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function DP(n){return Su(n).map(e=>[e.address,e.storageKeys])}function dX(n,e){if(n.gasPrice!=null){const r=Ze.from(n.gasPrice),i=Ze.from(n.maxFeePerGas||0);r.eq(i)||Gl.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:r,maxFeePerGas:i})}const t=[es(n.chainId||0,"chainId"),es(n.nonce||0,"nonce"),es(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),es(n.maxFeePerGas||0,"maxFeePerGas"),es(n.gasLimit||0,"gasLimit"),n.to!=null?Vr(n.to):"0x",es(n.value||0,"value"),n.data||"0x",DP(n.accessList||[])];if(e){const r=bC(e);t.push(es(r.recoveryParam,"recoveryParam")),t.push(ef(r.r)),t.push(ef(r.s))}return Si(["0x02",IC(t)])}function hX(n,e){const t=[es(n.chainId||0,"chainId"),es(n.nonce||0,"nonce"),es(n.gasPrice||0,"gasPrice"),es(n.gasLimit||0,"gasLimit"),n.to!=null?Vr(n.to):"0x",es(n.value||0,"value"),n.data||"0x",DP(n.accessList||[])];if(e){const r=bC(e);t.push(es(r.recoveryParam,"recoveryParam")),t.push(ef(r.r)),t.push(ef(r.s))}return Si(["0x01",IC(t)])}function LP(n,e,t){try{const r=Xr(e[0]).toNumber();if(r!==0&&r!==1)throw new Error("bad recid");n.v=r}catch{Gl.throwArgumentError("invalid v for transaction type: 1","v",e[0])}n.r=Pn(e[1],32),n.s=Pn(e[2],32);try{const r=ir(t(n));n.from=kP(r,{r:n.r,s:n.s,recoveryParam:n.v})}catch{}}function fX(n){const e=$E(n.slice(1));e.length!==9&&e.length!==12&&Gl.throwArgumentError("invalid component count for transaction type: 2","payload",tt(n));const t=Xr(e[2]),r=Xr(e[3]),i={type:2,chainId:Xr(e[0]).toNumber(),nonce:Xr(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:r,gasPrice:null,gasLimit:Xr(e[4]),to:rS(e[5]),value:Xr(e[6]),data:e[7],accessList:Su(e[8])};return e.length===9||(i.hash=ir(n),LP(i,e.slice(9),dX)),i}function pX(n){const e=$E(n.slice(1));e.length!==8&&e.length!==11&&Gl.throwArgumentError("invalid component count for transaction type: 1","payload",tt(n));const t={type:1,chainId:Xr(e[0]).toNumber(),nonce:Xr(e[1]).toNumber(),gasPrice:Xr(e[2]),gasLimit:Xr(e[3]),to:rS(e[4]),value:Xr(e[5]),data:e[6],accessList:Su(e[7])};return e.length===8||(t.hash=ir(n),LP(t,e.slice(8),hX)),t}function gX(n){const e=$E(n);e.length!==9&&e.length!==6&&Gl.throwArgumentError("invalid raw transaction","rawTransaction",n);const t={nonce:Xr(e[0]).toNumber(),gasPrice:Xr(e[1]),gasLimit:Xr(e[2]),to:rS(e[3]),value:Xr(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=Ze.from(e[6]).toNumber()}catch{return t}if(t.r=Pn(e[7],32),t.s=Pn(e[8],32),Ze.from(t.r).isZero()&&Ze.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let r=t.v-27;const i=e.slice(0,6);t.chainId!==0&&(i.push(tt(t.chainId)),i.push("0x"),i.push("0x"),r-=t.chainId*2+8);const s=ir(IC(i));try{t.from=kP(s,{r:tt(t.r),s:tt(t.s),recoveryParam:r})}catch{}t.hash=ir(n)}return t.type=null,t}function mX(n){const e=At(n);if(e[0]>127)return gX(e);switch(e[0]){case 1:return pX(e);case 2:return fX(e)}return Gl.throwError(`unsupported transaction type: ${e[0]}`,Be.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const fp=new Be(ri);let jR=class qe{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),l=this.number.bind(this),A=this.type.bind(this),c=u=>this.data(u,!0);return e.transaction={hash:o,type:A,accessList:qe.allowNull(this.accessList.bind(this),null),blockHash:qe.allowNull(o,null),blockNumber:qe.allowNull(l,null),transactionIndex:qe.allowNull(l,null),confirmations:qe.allowNull(l,null),from:t,gasPrice:qe.allowNull(r),maxPriorityFeePerGas:qe.allowNull(r),maxFeePerGas:qe.allowNull(r),gasLimit:r,to:qe.allowNull(t,null),value:r,nonce:l,data:s,r:qe.allowNull(this.uint256),s:qe.allowNull(this.uint256),v:qe.allowNull(l),creates:qe.allowNull(t,null),raw:qe.allowNull(s)},e.transactionRequest={from:qe.allowNull(t),nonce:qe.allowNull(l),gasLimit:qe.allowNull(r),gasPrice:qe.allowNull(r),maxPriorityFeePerGas:qe.allowNull(r),maxFeePerGas:qe.allowNull(r),to:qe.allowNull(t),value:qe.allowNull(r),data:qe.allowNull(c),type:qe.allowNull(l),accessList:qe.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:o,address:t,topics:qe.arrayOf(o),data:s,logIndex:l,blockHash:o},e.receipt={to:qe.allowNull(this.address,null),from:qe.allowNull(this.address,null),contractAddress:qe.allowNull(t,null),transactionIndex:l,root:qe.allowNull(a),gasUsed:r,logsBloom:qe.allowNull(s),blockHash:o,transactionHash:o,logs:qe.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:qe.allowNull(l,null),cumulativeGasUsed:r,effectiveGasPrice:qe.allowNull(r),status:qe.allowNull(l),type:A},e.block={hash:qe.allowNull(o),parentHash:o,number:l,timestamp:l,nonce:qe.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:qe.allowNull(t),extraData:s,transactions:qe.allowNull(qe.arrayOf(o)),baseFeePerGas:qe.allowNull(r)},e.blockWithTransactions=xn(e.block),e.blockWithTransactions.transactions=qe.allowNull(qe.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:qe.allowNull(i,void 0),toBlock:qe.allowNull(i,void 0),blockHash:qe.allowNull(o,void 0),address:qe.allowNull(t,void 0),topics:qe.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:qe.allowNull(l),blockHash:qe.allowNull(o),transactionIndex:l,removed:qe.allowNull(this.boolean.bind(this)),address:t,data:qe.allowFalsish(s,"0x"),topics:qe.arrayOf(o),transactionHash:o,logIndex:l},e}accessList(e){return Su(e||[])}number(e){return e==="0x"?0:Ze.from(e).toNumber()}type(e){return e==="0x"||e==null?0:Ze.from(e).toNumber()}bigNumber(e){return Ze.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),It(e))?e.toLowerCase():fp.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!==0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return Vr(e)}callAddress(e){if(!It(e,32))return null;const t=Vr(zr(e,12));return t===p9?null:t}contractAddress(e){return aP(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||It(e))return CC(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return du(r)!==32?fp.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(e==null)return null;const t=Ze.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!It(e))throw new Error("invalid uint256");return Pn(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const r=e._difficulty!=null?e._difficulty:e.difficulty,i=qe.check(t,e);return i._difficulty=r==null?null:Ze.from(r),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return qe.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&Ze.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=qe.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;It(r)&&(r=Ze.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;r==null&&t.v==null&&(r=e.chainId),It(r)&&(r=Ze.from(r).toNumber()),typeof r!="number"&&t.v!=null&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),typeof r!="number"&&(r=0),t.chainId=r}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return mX(e)}receiptLog(e){return qe.check(this.formats.receiptLog,e)}receipt(e){const t=qe.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const r=Ze.from(t.root).toNumber();r===0||r===1?(t.status!=null&&t.status!==r&&fp.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=r,delete t.root):fp.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&fp.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return qe.check(this.formats.filter,e)}filterLog(e){return qe.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const i in e)try{const s=e[i](t[i]);s!==void 0&&(r[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=t[i],s}return r}static allowNull(e,t){return function(r){return r==null?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(i){r.push(e(i))}),r}}};function vX(n){return n&&typeof n.isCommunityResource=="function"}function KR(n){return vX(n)&&n.isCommunityResource()}let $R=!1;function QC(){$R||($R=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var pt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const bt=new Be(ri),yX=10;function qR(n){return n==null?"null":(du(n)!==32&&bt.throwArgumentError("invalid topic","topic",n),n.toLowerCase())}function e2(n){for(n=n.slice();n.length>0&&n[n.length-1]==null;)n.pop();return n.map(e=>{if(Array.isArray(e)){const t={};e.forEach(i=>{t[qR(i)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}else return qR(e)}).join("&")}function wX(n){return n===""?[]:n.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(r=>r==="null"?null:r);return t.length===1?t[0]:t})}function Xu(n){if(typeof n=="string"){if(n=n.toLowerCase(),du(n)===32)return"tx:"+n;if(n.indexOf(":")===-1)return n}else{if(Array.isArray(n))return"filter:*:"+e2(n);if(d9.isForkEvent(n))throw bt.warn("not implemented"),new Error("not implemented");if(n&&typeof n=="object")return"filter:"+(n.address||"*")+":"+e2(n.topics||[])}throw new Error("invalid event - "+n)}function pp(){return new Date().getTime()}function t2(n){return new Promise(e=>{setTimeout(e,n)})}const BX=["block","network","pending","poll"];let CX=class{constructor(e,t,r){Re(this,"tag",e),Re(this,"listener",t),Re(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],r=wX(e[2]),i={};return r.length>0&&(i.topics=r),t&&t!=="*"&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||BX.indexOf(this.tag)>=0}};const bX={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function lx(n){return Pn(Ze.from(n).toHexString(),32)}function n2(n){return eF.encode(is([n,zr(JR(JR(n)),0,4)]))}const VP=new RegExp("^(ipfs)://(.*)$","i"),r2=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),VP,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Zy(n,e){try{return r0(tm(n,e))}catch{}return null}function tm(n,e){if(n==="0x")return null;const t=Ze.from(zr(n,e,e+32)).toNumber(),r=Ze.from(zr(n,t,t+32)).toNumber();return zr(n,t+32,t+32+r)}function Ax(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):bt.throwArgumentError("unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}function i2(n){const e=At(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function xX(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}function PP(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(null),t+=32;for(let r=0;r<n.length;r++){const i=At(n[r]);e[r]=i2(t),e.push(i2(i.length)),e.push(xX(i)),t+=32+Math.ceil(i.length/32)*32}return Si(e)}class s2{constructor(e,t,r,i){Re(this,"provider",e),Re(this,"name",r),Re(this,"address",e.formatter.address(t)),Re(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>Ze.from(e).eq(1)).catch(e=>{if(e.code===Be.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return pt(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:Si([e,Py(this.name),t||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,r.data=Si(["0x9061b923",PP([K9(this.name),r.data])]));try{let s=yield this.provider.call(r);return At(s).length%32===4&&bt.throwError("resolver threw error",Be.errors.CALL_EXCEPTION,{transaction:r,data:s}),i&&(s=tm(s,0)),s}catch(s){if(s.code===Be.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,t){return pt(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return r!=null?tm(r,0):null})}_getAddress(e,t){const r=bX[String(e)];if(r==null&&bt.throwError(`unsupported coin type: ${e}`,Be.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),r.ilk==="eth")return this.provider.formatter.address(t);const i=At(t);if(r.p2pkh!=null){const s=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return n2(is([[r.p2pkh],"0x"+s[2]]))}}if(r.p2sh!=null){const s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return n2(is([[r.p2sh],"0x"+s[2]]))}}if(r.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=zR.toWords(i.slice(2));return a.unshift(o),zR.encode(r.prefix,a)}}return null}getAddress(e){return pt(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===y9?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===Be.errors.CALL_EXCEPTION)return null;throw i}const t=yield this._fetchBytes("0xf1cb7e06",lx(e));if(t==null||t==="0x")return null;const r=this._getAddress(e,t);return r==null&&bt.throwError("invalid or unsupported coin data",Be.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return pt(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let r=0;r<r2.length;r++){const i=t.match(r2[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:Ax(t)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const a=this._resolvedAddress||(yield this.getAddress()),l=(i[2]||"").split("/");if(l.length!==2)return null;const A=yield this.provider.formatter.address(l[0]),c=Pn(Ze.from(l[1]).toHexString(),32);if(s==="erc721"){const f=this.provider.formatter.callAddress(yield this.provider.call({to:A,data:Si(["0x6352211e",c])}));if(a!==f)return null;e.push({type:"owner",content:f})}else if(s==="erc1155"){const f=Ze.from(yield this.provider.call({to:A,data:Si(["0x00fdd58e",Pn(a,32),c])}));if(f.isZero())return null;e.push({type:"balance",content:f.toString()})}const u={to:this.provider.formatter.address(l[0]),data:Si([o,c])};let h=Zy(yield this.provider.call(u),0);if(h==null)return null;e.push({type:"metadata-url-base",content:h}),s==="erc1155"&&(h=h.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:h})),h.match(/^ipfs:/i)&&(h=Ax(h)),e.push({type:"metadata-url",content:h});const d=yield _C(h);if(!d)return null;e.push({type:"metadata",content:JSON.stringify(d)});let p=d.image;if(typeof p!="string")return null;if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(VP)==null)return null;e.push({type:"url-ipfs",content:p}),p=Ax(p)}return e.push({type:"url",content:p}),{linkage:e,url:p}}}}}catch{}return null})}getContentHash(){return pt(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const o=parseInt(t[3],16);if(t[4].length===o*2)return"ipfs://"+eF.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipns://"+eF.encode("0x"+r[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+JV("0x"+s[1]).replace(/[=+\/]/g,l=>o[l])}return bt.throwError("invalid or unsupported content hash data",Be.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return pt(this,void 0,void 0,function*(){let t=Fa(e);t=is([lx(64),lx(t.length),t]),t.length%32!==0&&(t=is([t,Pn("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",tt(t));return r==null||r==="0x"?null:r0(r)})}}let cx=null,IX=1;class iS extends n0{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),Re(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=ss(new.target,"getNetwork")(e);t?(Re(this,"_network",t),this.emit("network",t,null)):bt.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return pt(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||bt.throwError("no network detected",Be.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:Re(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return oh(()=>this._ready().then(e=>e,e=>{if(!(e.code===Be.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return cx==null&&(cx=new jR),cx}static getNetwork(e){return ZV(e??"homestead")}ccipReadFetch(e,t,r){return pt(this,void 0,void 0,function*(){if(this.disableCcipRead||r.length===0)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],A=l.replace("{sender}",i).replace("{data}",s),c=l.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),u=yield _C({url:A,errorPassThrough:!0},c,(d,p)=>(d.status=p.statusCode,d));if(u.data)return u.data;const h=u.message||"unknown error";if(u.status>=400&&u.status<500)return bt.throwError(`response not found during CCIP fetch: ${h}`,Be.errors.SERVER_ERROR,{url:l,errorMessage:h});o.push(h)}return bt.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,Be.errors.SERVER_ERROR,{urls:r,errorMessages:o})})}_getInternalBlockNumber(e){return pt(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(pp()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const t=pp(),r=qn({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),s;const o=pp();return i=Ze.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:t,respTime:o}});return this._internalBlockNumber=r,r.catch(i=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return pt(this,void 0,void 0,function*(){const e=IX++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)bt.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",bt.makeError("network block skew detected",Be.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let i=this._emitted.block+1;i<=r;i++)this.emit("block",i);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&r-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=r-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});t.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=r-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=r;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(l=>{i._inflight=!1,l.length!==0&&l.forEach(A=>{A.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=A.blockNumber),this._emitted["b:"+A.blockHash]=A.blockNumber,this._emitted["t:"+A.transactionHash]=A.blockNumber,this.emit(s,A)})}).catch(l=>{this.emit("error",l),i._inflight=!1});t.push(a)}break}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return pt(this,void 0,void 0,function*(){return bt.throwError("provider does not support network detection",Be.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return pt(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield t2(0),this._network;const r=bt.makeError("underlying network changed",Be.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=pp();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=pp(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return pt(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,r||0,null)})}_waitForTransaction(e,t,r,i){return pt(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((o,a)=>{const l=[];let A=!1;const c=function(){return A?!0:(A=!0,l.forEach(h=>{h()}),!1)},u=h=>{h.confirmations<t||c()||o(h)};if(this.on(e,u),l.push(()=>{this.removeListener(e,u)}),i){let h=i.startBlock,d=null;const p=f=>pt(this,void 0,void 0,function*(){A||(yield t2(1e3),this.getTransactionCount(i.from).then(m=>pt(this,void 0,void 0,function*(){if(!A){if(m<=i.nonce)h=f;else{{const g=yield this.getTransaction(e);if(g&&g.blockNumber!=null)return}for(d==null&&(d=h-3,d<i.startBlock&&(d=i.startBlock));d<=f;){if(A)return;const g=yield this.getBlockWithTransactions(d);for(let v=0;v<g.transactions.length;v++){const w=g.transactions[v];if(w.hash===e)return;if(w.from===i.from&&w.nonce===i.nonce){if(A)return;const B=yield this.waitForTransaction(w.hash,t);if(c())return;let C="replaced";w.data===i.data&&w.to===i.to&&w.value.eq(i.value)?C="repriced":w.data==="0x"&&w.from===w.to&&w.value.isZero()&&(C="cancelled"),a(bt.makeError("transaction was replaced",Be.errors.TRANSACTION_REPLACED,{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:this._wrapTransaction(w),hash:e,receipt:B}));return}}d++}}A||this.once("block",p)}}),m=>{A||this.once("block",p)}))});if(A)return;this.once("block",p),l.push(()=>{this.removeListener("block",p)})}if(typeof r=="number"&&r>0){const h=setTimeout(()=>{c()||a(bt.makeError("timeout exceeded",Be.errors.TIMEOUT,{timeout:r}))},r);h.unref&&h.unref(),l.push(()=>{clearTimeout(h)})}})})}getBlockNumber(){return pt(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return Ze.from(e)}catch(t){return bt.throwError("bad result from backend",Be.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield qn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",r);try{return Ze.from(i)}catch(s){return bt.throwError("bad result from backend",Be.errors.SERVER_ERROR,{method:"getBalance",params:r,result:i,error:s})}})}getTransactionCount(e,t){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield qn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",r);try{return Ze.from(i).toNumber()}catch(s){return bt.throwError("bad result from backend",Be.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:i,error:s})}})}getCode(e,t){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield qn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",r);try{return tt(i)}catch(s){return bt.throwError("bad result from backend",Be.errors.SERVER_ERROR,{method:"getCode",params:r,result:i,error:s})}})}getStorageAt(e,t,r){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield qn({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(o=>CC(o))}),s=yield this.perform("getStorageAt",i);try{return tt(s)}catch(o){return bt.throwError("bad result from backend",Be.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,t,r){if(t!=null&&du(t)!==32)throw new Error("invalid response - sendTransaction");const i=e;return t!=null&&e.hash!==t&&bt.throwError("Transaction hash mismatch from Provider.sendTransaction.",Be.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(s,o)=>pt(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&r!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const l=yield this._waitForTransaction(e.hash,s,o,a);return l==null&&s===0?null:(this._emitted["t:"+e.hash]=l.blockNumber,l.status===0&&bt.throwError("transaction failed",Be.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:l}),l)}),i}sendTransaction(e){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(s=>tt(s)),r=this.formatter.transaction(e);r.confirmations==null&&(r.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,s,i)}catch(s){throw s.transaction=r,s.transactionHash=r.hash,s}})}_getTransactionRequest(e){return pt(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?Ze.from(s):null))}),["type"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s??null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?tt(s):null))}),this.formatter.transactionRequest(yield qn(r))})}_getFilter(e){return pt(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{e[r]!=null&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{e[r]!=null&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield qn(t))})}_call(e,t,r){return pt(this,void 0,void 0,function*(){r>=yX&&bt.throwError("CCIP read exceeded maximum redirections",Be.errors.SERVER_ERROR,{redirects:r,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&t==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&du(s)%32===4)try{const o=zr(s,4),a=zr(o,0,32);Ze.from(a).eq(i)||bt.throwError("CCIP Read sender did not match",Be.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const l=[],A=Ze.from(zr(o,32,64)).toNumber(),c=Ze.from(zr(o,A,A+32)).toNumber(),u=zr(o,A+32);for(let g=0;g<c;g++){const v=Zy(u,g*32);v==null&&bt.throwError("CCIP Read contained corrupt URL string",Be.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),l.push(v)}const h=tm(o,64);Ze.from(zr(o,100,128)).isZero()||bt.throwError("CCIP Read callback selector included junk",Be.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const d=zr(o,96,100),p=tm(o,128),f=yield this.ccipReadFetch(e,h,l);f==null&&bt.throwError("CCIP Read disabled or provided no URLs",Be.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const m={to:i,data:Si([d,PP([f,p])])};return this._call(m,t,r+1)}catch(o){if(o.code===Be.errors.SERVER_ERROR)throw o}try{return tt(s)}catch(o){return bt.throwError("bad result from backend",Be.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:o})}})}call(e,t){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield qn({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield qn({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return Ze.from(r)}catch(i){return bt.throwError("bad result from backend",Be.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:i})}})}_getAddress(e){return pt(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&bt.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&bt.throwError("ENS name not configured",Be.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return pt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const i={includeTransactions:!!t};if(It(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),It(i.blockTag)&&(r=parseInt(i.blockTag.substring(2),16))}catch{bt.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return oh(()=>pt(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&r>this._emitted.block?null:void 0;if(t){let o=null;for(let l=0;l<s.transactions.length;l++){const A=s.transactions[l];if(A.blockNumber==null)A.confirmations=0;else if(A.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let c=o-A.blockNumber+1;c<=0&&(c=1),A.confirmations=c}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(l=>this._wrapTransaction(l)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return pt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return oh(()=>pt(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return pt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return oh(()=>pt(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;if(r.blockHash==null)return;const i=this.formatter.receipt(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield qn({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(i=>{i.removed==null&&(i.removed=!1)}),jR.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return pt(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return pt(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&bt.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return pt(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const r=yield this._getResolver(t,"getResolver");if(r!=null){const i=new s2(this,r,e);return t!==e&&!(yield i.supportsWildcard())?null:i}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return pt(this,void 0,void 0,function*(){t==null&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||bt.throwError("network does not support ENS",Be.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const i=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+Py(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return pt(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(r){if(It(e))throw r}typeof e!="string"&&bt.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return pt(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(r==null)return null;const i=Zy(yield this.call({to:r,data:"0x691f3431"+Py(t).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return pt(this,void 0,void 0,function*(){let t=null;if(It(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;t=new s2(this,o,s);try{const a=yield t.getAvatar();if(a)return a.url}catch(a){if(a.code!==Be.errors.CALL_EXCEPTION)throw a}try{const a=Zy(yield this.call({to:o,data:"0x691f3431"+Py(s).substring(2)}),0);t=yield this.getResolver(a)}catch(a){if(a.code!==Be.errors.CALL_EXCEPTION)throw a;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return r==null?null:r.url})}perform(e,t){return bt.throwError(e+" not implemented",Be.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,r){const i=new CX(Xu(e),t,r);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,i=[],s=Xu(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,t)},0),r=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),r}listenerCount(e){if(!e)return this._events.length;let t=Xu(e);return this._events.filter(r=>r.tag===t).length}listeners(e){if(e==null)return this._events.map(r=>r.listener);let t=Xu(e);return this._events.filter(r=>r.tag===t).map(r=>r.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const r=[];let i=!1,s=Xu(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=t||i?!0:(i=!0,r.push(o),!1)),r.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const r=Xu(e);this._events=this._events.filter(i=>i.tag!==r?!0:(t.push(i),!1))}return t.forEach(r=>{this._stopEvent(r)}),this}}const FX="abstract-signer/5.7.0";var fo=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const Us=new Be(FX),_X=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],EX=[Be.errors.INSUFFICIENT_FUNDS,Be.errors.NONCE_EXPIRED,Be.errors.REPLACEMENT_UNDERPRICED];class s0{constructor(){Us.checkAbstract(new.target,s0),Re(this,"_isSigner",!0)}getBalance(e){return fo(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return fo(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return fo(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield qn(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return fo(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield qn(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return fo(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return fo(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return fo(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return fo(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return fo(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const r in e)_X.indexOf(r)===-1&&Us.throwArgumentError("invalid transaction key: "+r,"transaction",e);const t=xn(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(r=>(r[0].toLowerCase()!==r[1].toLowerCase()&&Us.throwArgumentError("from address mismatch","transaction",e),r[0])),t}populateTransaction(e){return fo(this,void 0,void 0,function*(){const t=yield qn(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>fo(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Us.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),t.to.catch(i=>{}));const r=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||r)?Us.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&r&&Us.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(t.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const s=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=s,t.maxPriorityFeePerGas=s}else t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(r&&Us.throwError("network does not support EIP-1559",Be.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=i.gasPrice),t.type=0):Us.throwError("failed to get consistent fee data",Be.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(i=>{if(EX.indexOf(i.code)>=0)throw i;return Us.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Be.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Us.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield qn(t)})}_checkProvider(e){this.provider||Us.throwError("missing provider",Be.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class sS extends s0{constructor(e,t){super(),Re(this,"address",e),Re(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{Us.throwError(e,Be.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new sS(this.address,e)}}var ll=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const er=new Be(ri),SX=["call","estimateGas"];function Qg(n,e){if(n==null)return null;if(typeof n.message=="string"&&n.message.match("reverted")){const t=It(n.data)?n.data:null;if(!e||t)return{message:n.message,data:t}}if(typeof n=="object"){for(const t in n){const r=Qg(n[t],e);if(r)return r}return null}if(typeof n=="string")try{return Qg(JSON.parse(n),e)}catch{}return null}function OP(n,e,t){const r=t.transaction||t.signedTransaction;if(n==="call"){const s=Qg(e,!0);if(s)return s.data;er.throwError("missing revert data in call exception; Transaction reverted without a reason string",Be.errors.CALL_EXCEPTION,{data:"0x",transaction:r,error:e})}if(n==="estimateGas"){let s=Qg(e.body,!1);s==null&&(s=Qg(e,!1)),s&&er.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Be.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:n,transaction:r,error:e})}let i=e.message;throw e.code===Be.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&er.throwError("insufficient funds for intrinsic transaction cost",Be.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:r}),i.match(/nonce (is )?too low/i)&&er.throwError("nonce has already been used",Be.errors.NONCE_EXPIRED,{error:e,method:n,transaction:r}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&er.throwError("replacement fee too low",Be.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:r}),i.match(/only replay-protected/i)&&er.throwError("legacy pre-eip-155 transactions not supported",Be.errors.UNSUPPORTED_OPERATION,{error:e,method:n,transaction:r}),SX.indexOf(n)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&er.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Be.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:r}),e}function o2(n){return new Promise(function(e){setTimeout(e,n)})}function UX(n){if(n.error){const e=new Error(n.error.message);throw e.code=n.error.code,e.data=n.error.data,e}return n.result}function gp(n){return n&&n.toLowerCase()}const aF={};class WP extends s0{constructor(e,t,r){if(super(),e!==aF)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");Re(this,"provider",t),r==null&&(r=0),typeof r=="string"?(Re(this,"_address",this.provider.formatter.address(r)),Re(this,"_index",null)):typeof r=="number"?(Re(this,"_index",r),Re(this,"_address",null)):er.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return er.throwError("cannot alter JSON-RPC Signer connection",Be.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new QX(aF,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&er.throwError("unknown account #"+this._index,Be.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=xn(e);const t=this.getAddress().then(r=>(r&&(r=r.toLowerCase()),r));if(e.gasLimit==null){const r=xn(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(r=>ll(this,void 0,void 0,function*(){if(r==null)return null;const i=yield this.provider.resolveName(r);return i==null&&er.throwArgumentError("provided ENS name resolves to null","tx.to",r),i}))),qn({tx:qn(e),sender:t}).then(({tx:r,sender:i})=>{r.from!=null?r.from.toLowerCase()!==i&&er.throwArgumentError("from address mismatch","transaction",e):r.from=i;const s=this.provider.constructor.hexlifyTransaction(r,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&er.throwError("user rejected transaction",Be.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:r}),OP("sendTransaction",o,s)))})}signTransaction(e){return er.throwError("signing transactions is unsupported",Be.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return ll(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield oh(()=>ll(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(r);if(i!==null)return this.provider._wrapTransaction(i,r,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=r,i}})}signMessage(e){return ll(this,void 0,void 0,function*(){const t=typeof e=="string"?Fa(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[tt(t),r.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&er.throwError("user rejected signing",Be.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),i}})}_legacySignMessage(e){return ll(this,void 0,void 0,function*(){const t=typeof e=="string"?Fa(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),tt(t)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&er.throwError("user rejected signing",Be.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),i}})}_signTypedData(e,t,r){return ll(this,void 0,void 0,function*(){const i=yield ji.resolveNames(e,t,r,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(ji.getPayload(i.domain,t,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&er.throwError("user rejected signing",Be.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:t,value:i.value}}),o}})}unlock(e){return ll(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class QX extends WP{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:r=>this.provider.waitForTransaction(t,r)}))}}const RX={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class nm extends iS{constructor(e,t){let r=t;r==null&&(r=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(r),e||(e=ss(this.constructor,"defaultUrl")()),typeof e=="string"?Re(this,"connection",Object.freeze({url:e})):Re(this,"connection",Object.freeze(xn(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return ll(this,void 0,void 0,function*(){yield o2(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=ss(this.constructor,"getNetwork");try{return t(Ze.from(e).toNumber())}catch(r){return er.throwError("could not detect network",Be.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:r})}}return er.throwError("could not detect network",Be.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new WP(aF,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:ls(r),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=_C(this.connection,JSON.stringify(r),UX).then(o=>(this.emit("debug",{action:"response",request:r,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:r,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[gp(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[gp(t.address),t.blockTag]];case"getCode":return["eth_getCode",[gp(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[gp(t.address),Pn(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[ss(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[ss(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=gp(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return ll(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=t.transaction;if(i&&i.type!=null&&Ze.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=xn(t),t.transaction=xn(i),delete t.transaction.type)}}const r=this.prepareRequest(e,t);r==null&&er.throwError(e+" not implemented",Be.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(i){return OP(e,i,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){function i(){e.send("eth_getFilterChanges",[r]).then(function(s){if(e._pendingFilter!=t)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(l){return e.emit("pending",l),null})})}),o.then(function(){return o2(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[r]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),r}).catch(r=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=xn(RX);if(t)for(const s in t)t[s]&&(r[s]=!0);o9(e,r);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=CC(Ze.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=tt(e[s]))}),e.accessList&&(i.accessList=Su(e.accessList)),i}}let Rg=null;try{if(Rg=WebSocket,Rg==null)throw new Error("inject please")}catch{const e=new Be(ri);Rg=function(){e.throwError("WebSockets not supported in this environment",Be.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var ux=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const P0=new Be(ri);let MX=1;class oS extends nm{constructor(e,t){t==="any"&&P0.throwError("WebSocketProvider does not support 'any' network yet",Be.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,t):super("_websocket",t),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?Re(this,"_websocket",new Rg(this.connection.url)):Re(this,"_websocket",e),Re(this,"_requests",{}),Re(this,"_subs",{}),Re(this,"_subIds",{}),Re(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(i=>{this.websocket.send(this._requests[i].payload)})},this.websocket.onmessage=i=>{const s=i.data,o=JSON.parse(s);if(o.id!=null){const a=String(o.id),l=this._requests[a];if(delete this._requests[a],o.result!==void 0)l.callback(null,o.result),this.emit("debug",{action:"response",request:JSON.parse(l.payload),response:o.result,provider:this});else{let A=null;o.error?(A=new Error(o.error.message||"unknown error"),Re(A,"code",o.error.code||null),Re(A,"response",s)):A=new Error("unknown error"),l.callback(A,void 0),this.emit("debug",{action:"response",error:A,request:JSON.parse(l.payload),provider:this})}}else if(o.method==="eth_subscription"){const a=this._subs[o.params.subscription];a&&a.processFunc(o.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){P0.throwError("cannot reset events block on WebSocketProvider",Be.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){P0.throwError("cannot set polling interval on WebSocketProvider",Be.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return ux(this,void 0,void 0,function*(){return null})}set polling(e){e&&P0.throwError("cannot set polling on WebSocketProvider",Be.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=MX++;return new Promise((i,s)=>{function o(l,A){return l?s(l):i(A)}const a=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(a),provider:this}),this._requests[String(r)]={callback:o,payload:a},this._wsReady&&this.websocket.send(a)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return ux(this,void 0,void 0,function*(){let i=this._subIds[e];i==null&&(i=Promise.all(t).then(o=>this.send("eth_subscribe",o)),this._subIds[e]=i);const s=yield i;this._subs[s]={tag:e,processFunc:r}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],t=>{const r=Ze.from(t.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],t=>{this.emit("pending",t)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{t.removed==null&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{const t=r=>{const i=r.hash;this.getTransactionReceipt(i).then(s=>{s&&this.emit(i,s)})};t(e),this._subscribe("tx",["newHeads"],r=>{this._events.filter(i=>i.type==="tx").forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let t=e.tag;if(e.type==="tx"){if(this._events.filter(i=>i.type==="tx").length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then(i=>{this._subs[i]&&(delete this._subs[i],this.send("eth_unsubscribe",[i]))}))}destroy(){return ux(this,void 0,void 0,function*(){this.websocket.readyState===Rg.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var TX=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const og=new Be(ri);class ZP extends nm{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return TX(this,void 0,void 0,function*(){let t=this.network;return t==null&&(t=yield e.detectNetwork.call(this),t||og.throwError("no network detected",Be.errors.UNKNOWN_ERROR,{}),this._network==null&&(Re(this,"_network",t),this.emit("network",t,null))),t})}}class hc extends ZP{constructor(e,t){og.checkAbstract(new.target,hc),e=ss(new.target,"getNetwork")(e),t=ss(new.target,"getApiKey")(t);const r=ss(new.target,"getUrl")(e,t);super(r,e),typeof t=="string"?Re(this,"apiKey",t):t!=null&&Object.keys(t).forEach(i=>{Re(this,i,t[i])})}_startPending(){og.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return og.throwError("API provider does not support signing",Be.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return og.throwError("not implemented; sub-classes must override getUrl",Be.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const a2=new Be(ri),Gy="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class NX extends oS{constructor(e,t){const r=new GP(e,t),i=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(i,r.network),Re(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===Gy}}class GP extends hc{static getWebSocketProvider(e,t){return new NX(e,t)}static getApiKey(e){return e==null?Gy:(e&&typeof e!="string"&&a2.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;default:a2.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(i,s)=>(t===Gy&&QC(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===Gy}}const kX=new Be(ri),O0="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function DX(n){switch(n){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return kX.throwArgumentError("unsupported network","name",n)}class LX extends hc{isCommunityResource(){return this.apiKey===O0}static getApiKey(e){return e??O0}static getUrl(e,t){t==null&&(t=O0);const r={allowGzip:!0,url:"https://"+DX(e.name)+t,throttleCallback:(i,s)=>(t.apiKey===O0&&QC(),Promise.resolve(!0))};return t.projectSecret!=null&&(r.user="",r.password=t.projectSecret),r}}var VX=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const l2=new Be(ri);class PX extends hc{static getApiKey(e){return e!=null&&l2.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="https://cloudflare-eth.com/";break;default:l2.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return VX(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,e,t)})}}var W0=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const CA=new Be(ri);function A2(n){const e={};for(let t in n){if(n[t]==null)continue;let r=n[t];t==="type"&&r===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[t]?r=CC(tt(r)):t==="accessList"?r="["+Su(r).map(i=>`{address:"${i.address}",storageKeys:["${i.storageKeys.join('","')}"]}`).join(",")+"]":r=tt(r),e[t]=r)}return e}function OX(n){if(n.status==0&&(n.message==="No records found"||n.message==="No transactions found"))return n.result;if(n.status!=1||typeof n.message!="string"||!n.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(n),(n.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return n.result}function c2(n){if(n&&n.status==0&&n.message=="NOTOK"&&(n.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(n),e.throttleRetry=!0,e}if(n.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(n),e}if(n.error){const e=new Error(n.error.message||"unknown error");throw n.error.code&&(e.code=n.error.code),n.error.data&&(e.data=n.error.data),e}return n.result}function u2(n){if(n==="pending")throw new Error("pending not supported");return n==="latest"?n:parseInt(n.substring(2),16)}function dx(n,e,t){if(n==="call"&&e.code===Be.errors.SERVER_ERROR){const i=e.error;if(i&&(i.message.match(/reverted/i)||i.message.match(/VM execution error/i))){let s=i.data;if(s&&(s="0x"+s.replace(/^.*0x/i,"")),It(s))return s;CA.throwError("missing revert data in call exception",Be.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let r=e.message;throw e.code===Be.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?r=e.error.message:typeof e.body=="string"?r=e.body:typeof e.responseText=="string"&&(r=e.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&CA.throwError("insufficient funds for intrinsic transaction cost",Be.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:t}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&CA.throwError("nonce has already been used",Be.errors.NONCE_EXPIRED,{error:e,method:n,transaction:t}),r.match(/another transaction with same nonce/)&&CA.throwError("replacement fee too low",Be.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:t}),r.match(/execution failed due to an exception|execution reverted/)&&CA.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Be.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:t}),e}class WX extends iS{constructor(e,t){super(e),Re(this,"baseUrl",this.getBaseUrl()),Re(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return CA.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const r=Object.keys(t).reduce((s,o)=>{const a=t[o];return a!=null&&(s+=`&${o}=${a}`),s},""),i=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${i}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return W0(this,void 0,void 0,function*(){const i=r?this.getPostUrl():this.getUrl(e,t),s=r?this.getPostData(e,t):null,o=e==="proxy"?c2:OX;this.emit("debug",{action:"request",request:i,provider:this});const a={url:i,throttleSlotInterval:1e3,throttleCallback:(c,u)=>(this.isCommunityResource()&&QC(),Promise.resolve(!0))};let l=null;s&&(a.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},l=Object.keys(s).map(c=>`${c}=${s[c]}`).join("&"));const A=yield _C(a,l,o||c2);return this.emit("debug",{action:"response",request:i,response:ls(A),provider:this}),A})}detectNetwork(){return W0(this,void 0,void 0,function*(){return this.network})}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return W0(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(i=>dx("sendTransaction",i,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if(t.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const i=A2(t.transaction);i.module="proxy",i.action="eth_call";try{return yield this.fetch("proxy",i,!0)}catch(s){return dx("call",s,t.transaction)}}case"estimateGas":{const i=A2(t.transaction);i.module="proxy",i.action="eth_estimateGas";try{return yield this.fetch("proxy",i,!0)}catch(s){return dx("estimateGas",s,t.transaction)}}case"getLogs":{const i={action:"getLogs"};if(t.filter.fromBlock&&(i.fromBlock=u2(t.filter.fromBlock)),t.filter.toBlock&&(i.toBlock=u2(t.filter.toBlock)),t.filter.address&&(i.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&CA.throwError("unsupported topic count",Be.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),t.filter.topics.length===1)){const a=t.filter.topics[0];(typeof a!="string"||a.length!==66)&&CA.throwError("unsupported topic format",Be.errors.UNSUPPORTED_OPERATION,{topic0:a}),i.topic0=a}const s=yield this.fetch("logs",i);let o={};for(let a=0;a<s.length;a++){const l=s[a];if(l.blockHash==null){if(o[l.blockNumber]==null){const A=yield this.getBlock(l.blockNumber);A&&(o[l.blockNumber]=A.hash)}l.blockHash=o[l.blockNumber]}}return s}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)})}getHistory(e,t,r){return W0(this,void 0,void 0,function*(){const i={action:"txlist",address:yield this.resolveName(e),startblock:t??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",i)).map(o=>{["contractAddress","to"].forEach(function(l){o[l]==""&&delete o[l]}),o.creates==null&&o.contractAddress!=null&&(o.creates=o.contractAddress);const a=this.formatter.transactionResponse(o);return o.timeStamp&&(a.timestamp=parseInt(o.timeStamp)),a})})}isCommunityResource(){return this.apiKey==null}}function ZX(n){n=n.slice();for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1)),r=n[e];n[e]=n[t],n[t]=r}return n}var Dw=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const Zc=new Be(ri);function Z0(){return new Date().getTime()}function d2(n){let e=null;for(let t=0;t<n.length;t++){const r=n[t];if(r==null)return null;e?e.name===r.name&&e.chainId===r.chainId&&(e.ensAddress===r.ensAddress||e.ensAddress==null&&r.ensAddress==null)||Zc.throwArgumentError("provider mismatch","networks",n):e=r}return e}function h2(n,e){n=n.slice().sort();const t=Math.floor(n.length/2);if(n.length%2)return n[t];const r=n[t-1],i=n[t];return e!=null&&Math.abs(r-i)>e?null:(r+i)/2}function ah(n){if(n===null)return"null";if(typeof n=="number"||typeof n=="boolean")return JSON.stringify(n);if(typeof n=="string")return n;if(Ze.isBigNumber(n))return n.toString();if(Array.isArray(n))return JSON.stringify(n.map(e=>ah(e)));if(typeof n=="object"){const e=Object.keys(n);return e.sort(),"{"+e.map(t=>{let r=n[t];return typeof r=="function"?r="[function]":r=ah(r),JSON.stringify(t)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof n)}let GX=1;function f2(n){let e=null,t=null,r=new Promise(o=>{e=function(){t&&(clearTimeout(t),t=null),o()},t=setTimeout(e,n)});const i=o=>(r=r.then(o),r);function s(){return r}return{cancel:e,getPromise:s,wait:i}}const JX=[Be.errors.CALL_EXCEPTION,Be.errors.INSUFFICIENT_FUNDS,Be.errors.NONCE_EXPIRED,Be.errors.REPLACEMENT_UNDERPRICED,Be.errors.UNPREDICTABLE_GAS_LIMIT],HX=["address","args","errorArgs","errorSignature","method","transaction"];function G0(n,e){const t={weight:n.weight};return Object.defineProperty(t,"provider",{get:()=>n.provider}),n.start&&(t.start=n.start),e&&(t.duration=e-n.start),n.done&&(n.error?t.error=n.error:t.result=n.result||null),t}function zX(n,e){return function(t){const r={};t.forEach(s=>{const o=n(s.result);r[o]||(r[o]={count:0,result:s.result}),r[o].count++});const i=Object.keys(r);for(let s=0;s<i.length;s++){const o=r[i[s]];if(o.count>=e)return o.result}}}function YX(n,e,t){let r=ah;switch(e){case"getBlockNumber":return function(i){const s=i.map(a=>a.result);let o=h2(i.map(a=>a.result),2);if(o!=null)return o=Math.ceil(o),s.indexOf(o+1)>=0&&o++,o>=n._highestBlockNumber&&(n._highestBlockNumber=o),n._highestBlockNumber};case"getGasPrice":return function(i){const s=i.map(o=>o.result);return s.sort(),s[Math.floor(s.length/2)]};case"getEtherPrice":return function(i){return h2(i.map(s=>s.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(i){return i==null?null:(i=xn(i),i.confirmations=-1,ah(i))};break;case"getBlock":t.includeTransactions?r=function(i){return i==null?null:(i=xn(i),i.transactions=i.transactions.map(s=>(s=xn(s),s.confirmations=-1,s)),ah(i))}:r=function(i){return i==null?null:ah(i)};break;default:throw new Error("unknown method: "+e)}return zX(r,n.quorum)}function mp(n,e){return Dw(this,void 0,void 0,function*(){const t=n.provider;return t.blockNumber!=null&&t.blockNumber>=e||e===-1?t:oh(()=>new Promise((r,i)=>{setTimeout(function(){return t.blockNumber>=e?r(t):n.cancelled?r(null):r(void 0)},0)}),{oncePoll:t})})}function XX(n,e,t,r){return Dw(this,void 0,void 0,function*(){let i=n.provider;switch(t){case"getBlockNumber":case"getGasPrice":return i[t]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&It(r.blockTag)&&(i=yield mp(n,e)),i[t](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&It(r.blockTag)&&(i=yield mp(n,e)),i.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&It(r.blockTag)&&(i=yield mp(n,e)),i[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&It(r.blockTag)&&(i=yield mp(n,e)),t==="call"&&r.blockTag?i[t](r.transaction,r.blockTag):i[t](r.transaction);case"getTransaction":case"getTransactionReceipt":return i[t](r.transactionHash);case"getLogs":{let s=r.filter;return(s.fromBlock&&It(s.fromBlock)||s.toBlock&&It(s.toBlock))&&(i=yield mp(n,e)),i.getLogs(s)}}return Zc.throwError("unknown method error",Be.errors.UNKNOWN_ERROR,{method:t,params:r})})}class jX extends iS{constructor(e,t){e.length===0&&Zc.throwArgumentError("missing providers","providers",e);const r=e.map((o,a)=>{if(n0.isProvider(o)){const c=KR(o)?2e3:750;return Object.freeze({provider:o,weight:1,stallTimeout:c,priority:1})}const l=xn(o);l.priority==null&&(l.priority=1),l.stallTimeout==null&&(l.stallTimeout=KR(o)?2e3:750),l.weight==null&&(l.weight=1);const A=l.weight;return(A%1||A>512||A<1)&&Zc.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${a}].weight`,A),Object.freeze(l)}),i=r.reduce((o,a)=>o+a.weight,0);t==null?t=i/2:t>i&&Zc.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let s=d2(r.map(o=>o.provider.network));s==null&&(s=new Promise((o,a)=>{setTimeout(()=>{this.detectNetwork().then(o,a)},0)})),super(s),Re(this,"providerConfigs",Object.freeze(r)),Re(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return Dw(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(t=>t.provider.getNetwork()));return d2(e)})}perform(e,t){return Dw(this,void 0,void 0,function*(){if(e==="sendTransaction"){const l=yield Promise.all(this.providerConfigs.map(A=>A.provider.sendTransaction(t.signedTransaction).then(c=>c.hash,c=>c)));for(let A=0;A<l.length;A++){const c=l[A];if(typeof c=="string")return c}throw l[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const r=YX(this,e,t),i=ZX(this.providerConfigs.map(xn));i.sort((l,A)=>l.priority-A.priority);const s=this._highestBlockNumber;let o=0,a=!0;for(;;){const l=Z0();let A=i.filter(d=>d.runner&&l-d.start<d.stallTimeout).reduce((d,p)=>d+p.weight,0);for(;A<this.quorum&&o<i.length;){const d=i[o++],p=GX++;d.start=Z0(),d.staller=f2(d.stallTimeout),d.staller.wait(()=>{d.staller=null}),d.runner=XX(d,s,e,t).then(f=>{d.done=!0,d.result=f,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:p,backend:G0(d,Z0()),request:{method:e,params:ls(t)},provider:this})},f=>{d.done=!0,d.error=f,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:p,backend:G0(d,Z0()),request:{method:e,params:ls(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:p,backend:G0(d,null),request:{method:e,params:ls(t)},provider:this}),A+=d.weight}const c=[];i.forEach(d=>{d.done||!d.runner||(c.push(d.runner),d.staller&&c.push(d.staller.getPromise()))}),c.length&&(yield Promise.race(c));const u=i.filter(d=>d.done&&d.error==null);if(u.length>=this.quorum){const d=r(u);if(d!==void 0)return i.forEach(p=>{p.staller&&p.staller.cancel(),p.cancelled=!0}),d;a||(yield f2(100).getPromise()),a=!1}const h=i.reduce((d,p)=>{if(!p.done||p.error==null)return d;const f=p.error.code;return JX.indexOf(f)>=0&&(d[f]||(d[f]={error:p.error,weight:0}),d[f].weight+=p.weight),d},{});if(Object.keys(h).forEach(d=>{const p=h[d];if(p.weight<this.quorum)return;i.forEach(g=>{g.staller&&g.staller.cancel(),g.cancelled=!0});const f=p.error,m={};HX.forEach(g=>{f[g]!=null&&(m[g]=f[g])}),Zc.throwError(f.reason||f.message,d,m)}),i.filter(d=>!d.done).length===0)break}return i.forEach(l=>{l.staller&&l.staller.cancel(),l.cancelled=!0}),Zc.throwError("failed to meet quorum",Be.errors.SERVER_ERROR,{method:e,params:t,results:i.map(l=>G0(l)),provider:this})})}}const KX=null,Jy=new Be(ri),ag="84842078b09946638c03157f83405213";class $X extends oS{constructor(e,t){const r=new JP(e,t),i=r.connection;i.password&&Jy.throwError("INFURA WebSocket project secrets unsupported",Be.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const s=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(s,e),Re(this,"apiKey",r.projectId),Re(this,"projectId",r.projectId),Re(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===ag}}class JP extends hc{static getWebSocketProvider(e,t){return new $X(e,t)}static getApiKey(e){const t={apiKey:ag,projectId:ag,projectSecret:null};return e==null||(typeof e=="string"?t.projectId=e:e.projectSecret!=null?(Jy.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),Jy.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;default:Jy.throwError("unsupported network",Be.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(s,o)=>(t.projectId===ag&&QC(),Promise.resolve(!0))};return t.projectSecret!=null&&(i.user="",i.password=t.projectSecret),i}isCommunityResource(){return this.projectId===ag}}const hx=new Be(ri),qX="ETHERS_JS_SHARED";class e8 extends hc{static getApiKey(e){return e&&typeof e!="string"&&hx.throwArgumentError("invalid apiKey","apiKey",e),e||qX}static getUrl(e,t){hx.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:hx.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const p2=new Be(ri),g2="62e1ad51b37b8e00394bda3b";class t8 extends hc{static getApiKey(e){const t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?t.applicationId=g2:typeof e=="string"?t.applicationId=e:e.applicationSecretKey!=null?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:p2.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:p2.throwError("unsupported network",Be.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i=`https://${r}/v1/lb/${t.applicationId}`,s={headers:{},url:i};return t.applicationSecretKey!=null&&(s.user="",s.password=t.applicationSecretKey),s}isCommunityResource(){return this.applicationId===g2}}const m2=new Be(ri);let n8=1;function v2(n,e){const t="Web3LegacyFetcher";return function(r,i){const s={method:r,params:i,id:n8++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:t,request:ls(s),provider:this}),e(s,(l,A)=>{if(l)return this.emit("debug",{action:"response",fetcher:t,error:l,request:s,provider:this}),a(l);if(this.emit("debug",{action:"response",fetcher:t,request:s,response:A,provider:this}),A.error){const c=new Error(A.error.message);return c.code=A.error.code,c.data=A.error.data,a(c)}o(A.result)})})}}function r8(n){return function(e,t){t==null&&(t=[]);const r={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:ls(r),provider:this}),n.request(r).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,error:i,provider:this}),i})}}class aS extends nm{constructor(e,t){e==null&&m2.throwArgumentError("missing provider","provider",e);let r=null,i=null,s=null;typeof e=="function"?(r="unknown:",i=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),s=e,e.request?(r===""&&(r="eip-1193:"),i=r8(e)):e.sendAsync?i=v2(e,e.sendAsync.bind(e)):e.send?i=v2(e,e.send.bind(e)):m2.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),Re(this,"jsonRpcFetchFunc",i),Re(this,"provider",s)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const y2=new Be(ri);function i8(n,e){if(n==null&&(n="homestead"),typeof n=="string"){const r=n.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new nm(n);case"ws":case"wss":return new oS(n);default:y2.throwArgumentError("unsupported URL scheme","network",n)}}const t=ZV(n);return(!t||!t._defaultProvider)&&y2.throwError("unsupported getDefaultProvider network",Be.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:n}),t._defaultProvider({FallbackProvider:jX,AlchemyProvider:GP,AnkrProvider:LX,CloudflareProvider:PX,EtherscanProvider:WX,InfuraProvider:JP,JsonRpcProvider:nm,NodesmithProvider:e8,PocketProvider:t8,Web3Provider:aS,IpcProvider:KX},e)}var s8=!0,fx="Invariant failed";function vl(n,e){if(!n){if(s8)throw new Error(fx);var t=typeof e=="function"?e():e,r=t?"".concat(fx,": ").concat(t):fx;throw new Error(r)}}var Eo;(function(n){n.Update="Web3ReactUpdate",n.Error="Web3ReactError",n.Deactivate="Web3ReactDeactivate"})(Eo||(Eo={}));function rm(){return rm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rm.apply(this,arguments)}function HP(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,im(n,e)}function lF(n){return lF=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},lF(n)}function im(n,e){return im=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},im(n,e)}function o8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Hy(n,e,t){return o8()?Hy=Reflect.construct:Hy=function(i,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(i,a),A=new l;return o&&im(A,o.prototype),A},Hy.apply(null,arguments)}function a8(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Lw(n){var e=typeof Map=="function"?new Map:void 0;return Lw=function(r){if(r===null||!a8(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Hy(r,arguments,lF(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),im(i,r)},Lw(n)}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function w2(n,e){try{var t=n()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}function zP(n){if(typeof n=="string"){n=n.replace(/^Ox/,"0x");var e=Number.parseInt(n,n.trim().substring(0,2)==="0x"?16:10);return Number.isNaN(e)&&vl(!1),e}else return Number.isInteger(n)||vl(!1),n}function YP(n){typeof n=="string"&&n.match(/^(0x)?[0-9a-fA-F]{40}$/)||vl(!1);for(var e=n.substring(0,2)==="0x"?n:"0x"+n,t=e.toLowerCase().substring(2).split(""),r=new Uint8Array(40),i=0;i<40;i++)r[i]=t[i].charCodeAt(0);for(var s=At(ir(r)),o=0;o<40;o+=2)s[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(s[o>>1]&15)>=8&&(t[o+1]=t[o+1].toUpperCase());var a="0x"+t.join("");return e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==a&&vl(!1),a}var B2=function(e,t){try{var r=function(o){return Promise.resolve(Promise.all([t.chainId===void 0?e.getChainId():t.chainId,t.account===void 0?e.getAccount():t.account])).then(function(a){var l=a[0],A=a[1],c=zP(l);if(e.supportedChainIds&&!e.supportedChainIds.includes(c))throw new XP(c,e.supportedChainIds);var u=A===null?A:YP(A);return{provider:o,chainId:c,account:u}})},i=t.provider===void 0;return Promise.resolve(i?Promise.resolve(e.getProvider()).then(r):r(t.provider))}catch(s){return Promise.reject(s)}},J0=function(n){HP(e,n);function e(){var t;return t=n.call(this)||this,t.name=t.constructor.name,t}return e}(Lw(Error)),XP=function(n){HP(e,n);function e(t,r){var i;return i=n.call(this)||this,i.name=i.constructor.name,i.message="Unsupported chain id: "+t+". Supported chain ids are: "+r+".",i}return e}(Lw(Error)),Cr;(function(n){n[n.ACTIVATE_CONNECTOR=0]="ACTIVATE_CONNECTOR",n[n.UPDATE=1]="UPDATE",n[n.UPDATE_FROM_ERROR=2]="UPDATE_FROM_ERROR",n[n.ERROR=3]="ERROR",n[n.ERROR_FROM_ACTIVATION=4]="ERROR_FROM_ACTIVATION",n[n.DEACTIVATE_CONNECTOR=5]="DEACTIVATE_CONNECTOR"})(Cr||(Cr={}));function l8(n,e){var t=e.type,r=e.payload;switch(t){case Cr.ACTIVATE_CONNECTOR:{var i=r.connector,s=r.provider,o=r.chainId,a=r.account,l=r.onError;return{connector:i,provider:s,chainId:o,account:a,onError:l}}case Cr.UPDATE:{var A=r.provider,c=r.chainId,u=r.account;return rm({},n,A===void 0?{}:{provider:A},c===void 0?{}:{chainId:c},u===void 0?{}:{account:u})}case Cr.UPDATE_FROM_ERROR:{var h=r.provider,d=r.chainId,p=r.account;return rm({},n,h===void 0?{}:{provider:h},d===void 0?{}:{chainId:d},p===void 0?{}:{account:p},{error:void 0})}case Cr.ERROR:{var f=r.error,m=n.connector,g=n.onError;return{connector:m,error:f,onError:g}}case Cr.ERROR_FROM_ACTIVATION:{var v=r.connector,w=r.error;return{connector:v,error:w}}case Cr.DEACTIVATE_CONNECTOR:return{}}}function A8(){var n=Ce.useReducer(l8,{}),e=n[0],t=n[1],r=e.connector,i=e.provider,s=e.chainId,o=e.account,a=e.onError,l=e.error,A=Ce.useRef(-1);A.current+=1;var c=Ce.useCallback(function(m,g,v){v===void 0&&(v=!1);try{var w=A.current,B=!1;return Promise.resolve(w2(function(){return Promise.resolve(m.activate().then(function(C){return B=!0,C})).then(function(C){return Promise.resolve(B2(m,C)).then(function(b){if(A.current>w)throw new J0;t({type:Cr.ACTIVATE_CONNECTOR,payload:rm({connector:m},b,{onError:g})})})})},function(C){if(C instanceof J0)B&&m.deactivate();else{if(v)throw B&&m.deactivate(),C;g?(B&&m.deactivate(),g(C)):t({type:Cr.ERROR_FROM_ACTIVATION,payload:{connector:m,error:C}})}}))}catch(C){return Promise.reject(C)}},[]),u=Ce.useCallback(function(m){t({type:Cr.ERROR,payload:{error:m}})},[]),h=Ce.useCallback(function(){t({type:Cr.DEACTIVATE_CONNECTOR})},[]),d=Ce.useCallback(function(m){try{if(!r)throw Error("This should never happen, it's just so Typescript stops complaining");var g=A.current;return Promise.resolve(function(){if(l)return w2(function(){return Promise.resolve(B2(r,m)).then(function(C){if(A.current>g)throw new J0;t({type:Cr.UPDATE_FROM_ERROR,payload:C})})},function(C){C instanceof J0||(a?a(C):t({type:Cr.ERROR,payload:{error:C}}))});var v=m.chainId===void 0?void 0:zP(m.chainId);if(v!==void 0&&r.supportedChainIds&&!r.supportedChainIds.includes(v)){var w=new XP(v,r.supportedChainIds);a?a(w):t({type:Cr.ERROR,payload:{error:w}})}else{var B=typeof m.account=="string"?YP(m.account):m.account;t({type:Cr.UPDATE,payload:{provider:m.provider,chainId:v,account:B}})}}())}catch(v){return Promise.reject(v)}},[r,l,a]),p=Ce.useCallback(function(m){a?a(m):t({type:Cr.ERROR,payload:{error:m}})},[a]),f=Ce.useCallback(function(){t({type:Cr.DEACTIVATE_CONNECTOR})},[]);return Ce.useEffect(function(){return function(){r&&r.deactivate()}},[r]),Ce.useEffect(function(){return r&&r.on(Eo.Update,d).on(Eo.Error,p).on(Eo.Deactivate,f),function(){r&&r.off(Eo.Update,d).off(Eo.Error,p).off(Eo.Deactivate,f)}},[r,d,p,f]),{connector:r,provider:i,chainId:s,account:o,activate:c,setError:u,deactivate:h,error:l}}var jP="primary",lh={};function c8(n){lh[n]&&vl(!1),lh[n]=Ce.createContext({activate:function(){try{return vl(!1),Promise.resolve()}catch(t){return Promise.reject(t)}},setError:function(){vl(!1)},deactivate:function(){vl(!1)},active:!1}),lh[n].displayName="Web3ReactContext - "+n;var e=lh[n].Provider;return function(r){var i=r.getLibrary,s=r.children,o=A8(),a=o.connector,l=o.provider,A=o.chainId,c=o.account,u=o.activate,h=o.setError,d=o.deactivate,p=o.error,f=a!==void 0&&A!==void 0&&c!==void 0&&!p,m=Ce.useMemo(function(){return f&&A!==void 0&&Number.isInteger(A)&&a?i(l,a):void 0},[f,i,l,a,A]),g={connector:a,library:m,chainId:A,account:c,activate:u,setError:h,deactivate:d,active:f,error:p};return X.createElement(e,{value:g},s)}}var u8=c8(jP);function d8(n){return n===void 0&&(n=jP),Object.keys(lh).includes(n)||vl(!1),lh[n]}function h8(n){return Ce.useContext(d8(n))}var AF={},KP={exports:{}},ys={},$P={exports:{}},qP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(k,V){var Z=k.length;k.push(V);e:for(;0<Z;){var N=Z-1>>>1,_=k[N];if(0<i(_,V))k[N]=V,k[Z]=_,Z=N;else break e}}function t(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var V=k[0],Z=k.pop();if(Z!==V){k[0]=Z;e:for(var N=0,_=k.length,z=_>>>1;N<z;){var ie=2*(N+1)-1,T=k[ie],q=ie+1,ge=k[q];if(0>i(T,Z))q<_&&0>i(ge,T)?(k[N]=ge,k[q]=Z,N=q):(k[N]=T,k[ie]=Z,N=ie);else if(q<_&&0>i(ge,Z))k[N]=ge,k[q]=Z,N=q;else break e}}return V}function i(k,V){var Z=k.sortIndex-V.sortIndex;return Z!==0?Z:k.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],A=[],c=1,u=null,h=3,d=!1,p=!1,f=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(k){for(var V=t(A);V!==null;){if(V.callback===null)r(A);else if(V.startTime<=k)r(A),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(A)}}function B(k){if(f=!1,w(k),!p)if(t(l)!==null)p=!0,R(C);else{var V=t(A);V!==null&&D(B,V.startTime-k)}}function C(k,V){p=!1,f&&(f=!1,g(x),x=-1),d=!0;var Z=h;try{for(w(V),u=t(l);u!==null&&(!(u.expirationTime>V)||k&&!H());){var N=u.callback;if(typeof N=="function"){u.callback=null,h=u.priorityLevel;var _=N(u.expirationTime<=V);V=n.unstable_now(),typeof _=="function"?u.callback=_:u===t(l)&&r(l),w(V)}else r(l);u=t(l)}if(u!==null)var z=!0;else{var ie=t(A);ie!==null&&D(B,ie.startTime-V),z=!1}return z}finally{u=null,h=Z,d=!1}}var b=!1,F=null,x=-1,E=5,M=-1;function H(){return!(n.unstable_now()-M<E)}function O(){if(F!==null){var k=n.unstable_now();M=k;var V=!0;try{V=F(!0,k)}finally{V?U():(b=!1,F=null)}}else b=!1}var U;if(typeof v=="function")U=function(){v(O)};else if(typeof MessageChannel<"u"){var y=new MessageChannel,I=y.port2;y.port1.onmessage=O,U=function(){I.postMessage(null)}}else U=function(){m(O,0)};function R(k){F=k,b||(b=!0,U())}function D(k,V){x=m(function(){k(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){p||d||(p=!0,R(C))},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(k){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var Z=h;h=V;try{return k()}finally{h=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,V){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Z=h;h=k;try{return V()}finally{h=Z}},n.unstable_scheduleCallback=function(k,V,Z){var N=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?N+Z:N):Z=N,k){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=Z+_,k={id:c++,callback:V,priorityLevel:k,startTime:Z,expirationTime:_,sortIndex:-1},Z>N?(k.sortIndex=Z,e(A,k),t(l)===null&&k===t(A)&&(f?(g(x),x=-1):f=!0,D(B,Z-N))):(k.sortIndex=_,e(l,k),p||d||(p=!0,R(C))),k},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(k){var V=h;return function(){var Z=h;h=V;try{return k.apply(this,arguments)}finally{h=Z}}}})(qP);$P.exports=qP;var f8=$P.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eO=Ce,ds=f8;function Ne(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tO=new Set,sm={};function Uu(n,e){sf(n,e),sf(n+"Capture",e)}function sf(n,e){for(sm[n]=e,n=0;n<e.length;n++)tO.add(e[n])}var Ml=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cF=Object.prototype.hasOwnProperty,p8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C2={},b2={};function g8(n){return cF.call(b2,n)?!0:cF.call(C2,n)?!1:p8.test(n)?b2[n]=!0:(C2[n]=!0,!1)}function m8(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function v8(n,e,t,r){if(e===null||typeof e>"u"||m8(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bi(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Pr[n]=new Bi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Pr[e]=new Bi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Pr[n]=new Bi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Pr[n]=new Bi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Pr[n]=new Bi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Pr[n]=new Bi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Pr[n]=new Bi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Pr[n]=new Bi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Pr[n]=new Bi(n,5,!1,n.toLowerCase(),null,!1,!1)});var lS=/[\-:]([a-z])/g;function AS(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(lS,AS);Pr[e]=new Bi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(lS,AS);Pr[e]=new Bi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(lS,AS);Pr[e]=new Bi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Pr[n]=new Bi(n,1,!1,n.toLowerCase(),null,!1,!1)});Pr.xlinkHref=new Bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Pr[n]=new Bi(n,1,!1,n.toLowerCase(),null,!0,!0)});function cS(n,e,t,r){var i=Pr.hasOwnProperty(e)?Pr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(v8(e,t,i,r)&&(t=null),r||i===null?g8(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Jl=eO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H0=Symbol.for("react.element"),Ah=Symbol.for("react.portal"),ch=Symbol.for("react.fragment"),uS=Symbol.for("react.strict_mode"),uF=Symbol.for("react.profiler"),nO=Symbol.for("react.provider"),rO=Symbol.for("react.context"),dS=Symbol.for("react.forward_ref"),dF=Symbol.for("react.suspense"),hF=Symbol.for("react.suspense_list"),hS=Symbol.for("react.memo"),mA=Symbol.for("react.lazy"),iO=Symbol.for("react.offscreen"),x2=Symbol.iterator;function vp(n){return n===null||typeof n!="object"?null:(n=x2&&n[x2]||n["@@iterator"],typeof n=="function"?n:null)}var Rn=Object.assign,px;function lg(n){if(px===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);px=e&&e[1]||""}return`
`+px+n}var gx=!1;function mx(n,e){if(!n||gx)return"";gx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(A){var r=A}Reflect.construct(n,[],e)}else{try{e.call()}catch(A){r=A}n.call(e.prototype)}else{try{throw Error()}catch(A){r=A}n()}}catch(A){if(A&&r&&typeof A.stack=="string"){for(var i=A.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{gx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?lg(n):""}function y8(n){switch(n.tag){case 5:return lg(n.type);case 16:return lg("Lazy");case 13:return lg("Suspense");case 19:return lg("SuspenseList");case 0:case 2:case 15:return n=mx(n.type,!1),n;case 11:return n=mx(n.type.render,!1),n;case 1:return n=mx(n.type,!0),n;default:return""}}function fF(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ch:return"Fragment";case Ah:return"Portal";case uF:return"Profiler";case uS:return"StrictMode";case dF:return"Suspense";case hF:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case rO:return(n.displayName||"Context")+".Consumer";case nO:return(n._context.displayName||"Context")+".Provider";case dS:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case hS:return e=n.displayName||null,e!==null?e:fF(n.type)||"Memo";case mA:e=n._payload,n=n._init;try{return fF(n(e))}catch{}}return null}function w8(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fF(e);case 8:return e===uS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function sO(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function B8(n){var e=sO(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function z0(n){n._valueTracker||(n._valueTracker=B8(n))}function oO(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=sO(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Vw(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function pF(n,e){var t=e.checked;return Rn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function I2(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=tc(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aO(n,e){e=e.checked,e!=null&&cS(n,"checked",e,!1)}function gF(n,e){aO(n,e);var t=tc(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?mF(n,e.type,t):e.hasOwnProperty("defaultValue")&&mF(n,e.type,tc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function F2(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function mF(n,e,t){(e!=="number"||Vw(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ag=Array.isArray;function Th(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+tc(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function vF(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return Rn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function _2(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ne(92));if(Ag(t)){if(1<t.length)throw Error(Ne(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:tc(t)}}function lO(n,e){var t=tc(e.value),r=tc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function E2(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function AO(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yF(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?AO(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Y0,cO=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Y0=Y0||document.createElement("div"),Y0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Y0.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function om(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Mg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},C8=["Webkit","ms","Moz","O"];Object.keys(Mg).forEach(function(n){C8.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Mg[e]=Mg[n]})});function uO(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Mg.hasOwnProperty(n)&&Mg[n]?(""+e).trim():e+"px"}function dO(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=uO(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var b8=Rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wF(n,e){if(e){if(b8[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ne(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ne(62))}}function BF(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CF=null;function fS(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var bF=null,Nh=null,kh=null;function S2(n){if(n=l0(n)){if(typeof bF!="function")throw Error(Ne(280));var e=n.stateNode;e&&(e=kC(e),bF(n.stateNode,n.type,e))}}function hO(n){Nh?kh?kh.push(n):kh=[n]:Nh=n}function fO(){if(Nh){var n=Nh,e=kh;if(kh=Nh=null,S2(n),e)for(n=0;n<e.length;n++)S2(e[n])}}function pO(n,e){return n(e)}function gO(){}var vx=!1;function mO(n,e,t){if(vx)return n(e,t);vx=!0;try{return pO(n,e,t)}finally{vx=!1,(Nh!==null||kh!==null)&&(gO(),fO())}}function am(n,e){var t=n.stateNode;if(t===null)return null;var r=kC(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ne(231,e,typeof t));return t}var xF=!1;if(Ml)try{var yp={};Object.defineProperty(yp,"passive",{get:function(){xF=!0}}),window.addEventListener("test",yp,yp),window.removeEventListener("test",yp,yp)}catch{xF=!1}function x8(n,e,t,r,i,s,o,a,l){var A=Array.prototype.slice.call(arguments,3);try{e.apply(t,A)}catch(c){this.onError(c)}}var Tg=!1,Pw=null,Ow=!1,IF=null,I8={onError:function(n){Tg=!0,Pw=n}};function F8(n,e,t,r,i,s,o,a,l){Tg=!1,Pw=null,x8.apply(I8,arguments)}function _8(n,e,t,r,i,s,o,a,l){if(F8.apply(this,arguments),Tg){if(Tg){var A=Pw;Tg=!1,Pw=null}else throw Error(Ne(198));Ow||(Ow=!0,IF=A)}}function Qu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function vO(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function U2(n){if(Qu(n)!==n)throw Error(Ne(188))}function E8(n){var e=n.alternate;if(!e){if(e=Qu(n),e===null)throw Error(Ne(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return U2(i),n;if(s===r)return U2(i),e;s=s.sibling}throw Error(Ne(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Ne(189))}}if(t.alternate!==r)throw Error(Ne(190))}if(t.tag!==3)throw Error(Ne(188));return t.stateNode.current===t?n:e}function yO(n){return n=E8(n),n!==null?wO(n):null}function wO(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=wO(n);if(e!==null)return e;n=n.sibling}return null}var BO=ds.unstable_scheduleCallback,Q2=ds.unstable_cancelCallback,S8=ds.unstable_shouldYield,U8=ds.unstable_requestPaint,Yn=ds.unstable_now,Q8=ds.unstable_getCurrentPriorityLevel,pS=ds.unstable_ImmediatePriority,CO=ds.unstable_UserBlockingPriority,Ww=ds.unstable_NormalPriority,R8=ds.unstable_LowPriority,bO=ds.unstable_IdlePriority,RC=null,Ba=null;function M8(n){if(Ba&&typeof Ba.onCommitFiberRoot=="function")try{Ba.onCommitFiberRoot(RC,n,void 0,(n.current.flags&128)===128)}catch{}}var Ro=Math.clz32?Math.clz32:k8,T8=Math.log,N8=Math.LN2;function k8(n){return n>>>=0,n===0?32:31-(T8(n)/N8|0)|0}var X0=64,j0=4194304;function cg(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Zw(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=cg(a):(s&=o,s!==0&&(r=cg(s)))}else o=t&~i,o!==0?r=cg(o):s!==0&&(r=cg(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ro(e),i=1<<t,r|=n[t],e&=~i;return r}function D8(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L8(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Ro(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=D8(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function FF(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function xO(){var n=X0;return X0<<=1,!(X0&4194240)&&(X0=64),n}function yx(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function o0(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ro(e),n[e]=t}function V8(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Ro(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function gS(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Ro(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var tn=0;function IO(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var FO,mS,_O,EO,SO,_F=!1,K0=[],LA=null,VA=null,PA=null,lm=new Map,Am=new Map,bA=[],P8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function R2(n,e){switch(n){case"focusin":case"focusout":LA=null;break;case"dragenter":case"dragleave":VA=null;break;case"mouseover":case"mouseout":PA=null;break;case"pointerover":case"pointerout":lm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Am.delete(e.pointerId)}}function wp(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=l0(e),e!==null&&mS(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function O8(n,e,t,r,i){switch(e){case"focusin":return LA=wp(LA,n,e,t,r,i),!0;case"dragenter":return VA=wp(VA,n,e,t,r,i),!0;case"mouseover":return PA=wp(PA,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return lm.set(s,wp(lm.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Am.set(s,wp(Am.get(s)||null,n,e,t,r,i)),!0}return!1}function UO(n){var e=Hc(n.target);if(e!==null){var t=Qu(e);if(t!==null){if(e=t.tag,e===13){if(e=vO(t),e!==null){n.blockedOn=e,SO(n.priority,function(){_O(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function zy(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=EF(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);CF=r,t.target.dispatchEvent(r),CF=null}else return e=l0(t),e!==null&&mS(e),n.blockedOn=t,!1;e.shift()}return!0}function M2(n,e,t){zy(n)&&t.delete(e)}function W8(){_F=!1,LA!==null&&zy(LA)&&(LA=null),VA!==null&&zy(VA)&&(VA=null),PA!==null&&zy(PA)&&(PA=null),lm.forEach(M2),Am.forEach(M2)}function Bp(n,e){n.blockedOn===e&&(n.blockedOn=null,_F||(_F=!0,ds.unstable_scheduleCallback(ds.unstable_NormalPriority,W8)))}function cm(n){function e(i){return Bp(i,n)}if(0<K0.length){Bp(K0[0],n);for(var t=1;t<K0.length;t++){var r=K0[t];r.blockedOn===n&&(r.blockedOn=null)}}for(LA!==null&&Bp(LA,n),VA!==null&&Bp(VA,n),PA!==null&&Bp(PA,n),lm.forEach(e),Am.forEach(e),t=0;t<bA.length;t++)r=bA[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<bA.length&&(t=bA[0],t.blockedOn===null);)UO(t),t.blockedOn===null&&bA.shift()}var Dh=Jl.ReactCurrentBatchConfig,Gw=!0;function Z8(n,e,t,r){var i=tn,s=Dh.transition;Dh.transition=null;try{tn=1,vS(n,e,t,r)}finally{tn=i,Dh.transition=s}}function G8(n,e,t,r){var i=tn,s=Dh.transition;Dh.transition=null;try{tn=4,vS(n,e,t,r)}finally{tn=i,Dh.transition=s}}function vS(n,e,t,r){if(Gw){var i=EF(n,e,t,r);if(i===null)Sx(n,e,r,Jw,t),R2(n,r);else if(O8(i,n,e,t,r))r.stopPropagation();else if(R2(n,r),e&4&&-1<P8.indexOf(n)){for(;i!==null;){var s=l0(i);if(s!==null&&FO(s),s=EF(n,e,t,r),s===null&&Sx(n,e,r,Jw,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Sx(n,e,r,null,t)}}var Jw=null;function EF(n,e,t,r){if(Jw=null,n=fS(r),n=Hc(n),n!==null)if(e=Qu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=vO(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Jw=n,null}function QO(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q8()){case pS:return 1;case CO:return 4;case Ww:case R8:return 16;case bO:return 536870912;default:return 16}default:return 16}}var _A=null,yS=null,Yy=null;function RO(){if(Yy)return Yy;var n,e=yS,t=e.length,r,i="value"in _A?_A.value:_A.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Yy=i.slice(n,1<r?1-r:void 0)}function Xy(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function $0(){return!0}function T2(){return!1}function ws(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$0:T2,this.isPropagationStopped=T2,this}return Rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=$0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=$0)},persist:function(){},isPersistent:$0}),e}var Nf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wS=ws(Nf),a0=Rn({},Nf,{view:0,detail:0}),J8=ws(a0),wx,Bx,Cp,MC=Rn({},a0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:BS,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Cp&&(Cp&&n.type==="mousemove"?(wx=n.screenX-Cp.screenX,Bx=n.screenY-Cp.screenY):Bx=wx=0,Cp=n),wx)},movementY:function(n){return"movementY"in n?n.movementY:Bx}}),N2=ws(MC),H8=Rn({},MC,{dataTransfer:0}),z8=ws(H8),Y8=Rn({},a0,{relatedTarget:0}),Cx=ws(Y8),X8=Rn({},Nf,{animationName:0,elapsedTime:0,pseudoElement:0}),j8=ws(X8),K8=Rn({},Nf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$8=ws(K8),q8=Rn({},Nf,{data:0}),k2=ws(q8),ej={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rj(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=nj[n])?!!e[n]:!1}function BS(){return rj}var ij=Rn({},a0,{key:function(n){if(n.key){var e=ej[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Xy(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tj[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:BS,charCode:function(n){return n.type==="keypress"?Xy(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Xy(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sj=ws(ij),oj=Rn({},MC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D2=ws(oj),aj=Rn({},a0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:BS}),lj=ws(aj),Aj=Rn({},Nf,{propertyName:0,elapsedTime:0,pseudoElement:0}),cj=ws(Aj),uj=Rn({},MC,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dj=ws(uj),hj=[9,13,27,32],CS=Ml&&"CompositionEvent"in window,Ng=null;Ml&&"documentMode"in document&&(Ng=document.documentMode);var fj=Ml&&"TextEvent"in window&&!Ng,MO=Ml&&(!CS||Ng&&8<Ng&&11>=Ng),L2=String.fromCharCode(32),V2=!1;function TO(n,e){switch(n){case"keyup":return hj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NO(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var uh=!1;function pj(n,e){switch(n){case"compositionend":return NO(e);case"keypress":return e.which!==32?null:(V2=!0,L2);case"textInput":return n=e.data,n===L2&&V2?null:n;default:return null}}function gj(n,e){if(uh)return n==="compositionend"||!CS&&TO(n,e)?(n=RO(),Yy=yS=_A=null,uh=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return MO&&e.locale!=="ko"?null:e.data;default:return null}}var mj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!mj[n.type]:e==="textarea"}function kO(n,e,t,r){hO(r),e=Hw(e,"onChange"),0<e.length&&(t=new wS("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var kg=null,um=null;function vj(n){zO(n,0)}function TC(n){var e=fh(n);if(oO(e))return n}function yj(n,e){if(n==="change")return e}var DO=!1;if(Ml){var bx;if(Ml){var xx="oninput"in document;if(!xx){var O2=document.createElement("div");O2.setAttribute("oninput","return;"),xx=typeof O2.oninput=="function"}bx=xx}else bx=!1;DO=bx&&(!document.documentMode||9<document.documentMode)}function W2(){kg&&(kg.detachEvent("onpropertychange",LO),um=kg=null)}function LO(n){if(n.propertyName==="value"&&TC(um)){var e=[];kO(e,um,n,fS(n)),mO(vj,e)}}function wj(n,e,t){n==="focusin"?(W2(),kg=e,um=t,kg.attachEvent("onpropertychange",LO)):n==="focusout"&&W2()}function Bj(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return TC(um)}function Cj(n,e){if(n==="click")return TC(e)}function bj(n,e){if(n==="input"||n==="change")return TC(e)}function xj(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Do=typeof Object.is=="function"?Object.is:xj;function dm(n,e){if(Do(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!cF.call(e,i)||!Do(n[i],e[i]))return!1}return!0}function Z2(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function G2(n,e){var t=Z2(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Z2(t)}}function VO(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?VO(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function PO(){for(var n=window,e=Vw();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Vw(n.document)}return e}function bS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Ij(n){var e=PO(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&VO(t.ownerDocument.documentElement,t)){if(r!==null&&bS(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=G2(t,s);var o=G2(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Fj=Ml&&"documentMode"in document&&11>=document.documentMode,dh=null,SF=null,Dg=null,UF=!1;function J2(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;UF||dh==null||dh!==Vw(r)||(r=dh,"selectionStart"in r&&bS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Dg&&dm(Dg,r)||(Dg=r,r=Hw(SF,"onSelect"),0<r.length&&(e=new wS("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=dh)))}function q0(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var hh={animationend:q0("Animation","AnimationEnd"),animationiteration:q0("Animation","AnimationIteration"),animationstart:q0("Animation","AnimationStart"),transitionend:q0("Transition","TransitionEnd")},Ix={},OO={};Ml&&(OO=document.createElement("div").style,"AnimationEvent"in window||(delete hh.animationend.animation,delete hh.animationiteration.animation,delete hh.animationstart.animation),"TransitionEvent"in window||delete hh.transitionend.transition);function NC(n){if(Ix[n])return Ix[n];if(!hh[n])return n;var e=hh[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in OO)return Ix[n]=e[t];return n}var WO=NC("animationend"),ZO=NC("animationiteration"),GO=NC("animationstart"),JO=NC("transitionend"),HO=new Map,H2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fc(n,e){HO.set(n,e),Uu(e,[n])}for(var Fx=0;Fx<H2.length;Fx++){var _x=H2[Fx],_j=_x.toLowerCase(),Ej=_x[0].toUpperCase()+_x.slice(1);fc(_j,"on"+Ej)}fc(WO,"onAnimationEnd");fc(ZO,"onAnimationIteration");fc(GO,"onAnimationStart");fc("dblclick","onDoubleClick");fc("focusin","onFocus");fc("focusout","onBlur");fc(JO,"onTransitionEnd");sf("onMouseEnter",["mouseout","mouseover"]);sf("onMouseLeave",["mouseout","mouseover"]);sf("onPointerEnter",["pointerout","pointerover"]);sf("onPointerLeave",["pointerout","pointerover"]);Uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ug="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sj=new Set("cancel close invalid load scroll toggle".split(" ").concat(ug));function z2(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,_8(r,e,void 0,n),n.currentTarget=null}function zO(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,A=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;z2(i,a,A),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,A=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;z2(i,a,A),s=l}}}if(Ow)throw n=IF,Ow=!1,IF=null,n}function fn(n,e){var t=e[NF];t===void 0&&(t=e[NF]=new Set);var r=n+"__bubble";t.has(r)||(YO(e,n,2,!1),t.add(r))}function Ex(n,e,t){var r=0;e&&(r|=4),YO(t,n,r,e)}var ev="_reactListening"+Math.random().toString(36).slice(2);function hm(n){if(!n[ev]){n[ev]=!0,tO.forEach(function(t){t!=="selectionchange"&&(Sj.has(t)||Ex(t,!1,n),Ex(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[ev]||(e[ev]=!0,Ex("selectionchange",!1,e))}}function YO(n,e,t,r){switch(QO(e)){case 1:var i=Z8;break;case 4:i=G8;break;default:i=vS}t=i.bind(null,e,t,n),i=void 0,!xF||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Sx(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Hc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}mO(function(){var A=s,c=fS(t),u=[];e:{var h=HO.get(n);if(h!==void 0){var d=wS,p=n;switch(n){case"keypress":if(Xy(t)===0)break e;case"keydown":case"keyup":d=sj;break;case"focusin":p="focus",d=Cx;break;case"focusout":p="blur",d=Cx;break;case"beforeblur":case"afterblur":d=Cx;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=N2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=z8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=lj;break;case WO:case ZO:case GO:d=j8;break;case JO:d=cj;break;case"scroll":d=J8;break;case"wheel":d=dj;break;case"copy":case"cut":case"paste":d=$8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=D2}var f=(e&4)!==0,m=!f&&n==="scroll",g=f?h!==null?h+"Capture":null:h;f=[];for(var v=A,w;v!==null;){w=v;var B=w.stateNode;if(w.tag===5&&B!==null&&(w=B,g!==null&&(B=am(v,g),B!=null&&f.push(fm(v,B,w)))),m)break;v=v.return}0<f.length&&(h=new d(h,p,null,t,c),u.push({event:h,listeners:f}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",d=n==="mouseout"||n==="pointerout",h&&t!==CF&&(p=t.relatedTarget||t.fromElement)&&(Hc(p)||p[Tl]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=t.relatedTarget||t.toElement,d=A,p=p?Hc(p):null,p!==null&&(m=Qu(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=A),d!==p)){if(f=N2,B="onMouseLeave",g="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(f=D2,B="onPointerLeave",g="onPointerEnter",v="pointer"),m=d==null?h:fh(d),w=p==null?h:fh(p),h=new f(B,v+"leave",d,t,c),h.target=m,h.relatedTarget=w,B=null,Hc(c)===A&&(f=new f(g,v+"enter",p,t,c),f.target=w,f.relatedTarget=m,B=f),m=B,d&&p)t:{for(f=d,g=p,v=0,w=f;w;w=ju(w))v++;for(w=0,B=g;B;B=ju(B))w++;for(;0<v-w;)f=ju(f),v--;for(;0<w-v;)g=ju(g),w--;for(;v--;){if(f===g||g!==null&&f===g.alternate)break t;f=ju(f),g=ju(g)}f=null}else f=null;d!==null&&Y2(u,h,d,f,!1),p!==null&&m!==null&&Y2(u,m,p,f,!0)}}e:{if(h=A?fh(A):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var C=yj;else if(P2(h))if(DO)C=bj;else{C=Bj;var b=wj}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=Cj);if(C&&(C=C(n,A))){kO(u,C,t,c);break e}b&&b(n,h,A),n==="focusout"&&(b=h._wrapperState)&&b.controlled&&h.type==="number"&&mF(h,"number",h.value)}switch(b=A?fh(A):window,n){case"focusin":(P2(b)||b.contentEditable==="true")&&(dh=b,SF=A,Dg=null);break;case"focusout":Dg=SF=dh=null;break;case"mousedown":UF=!0;break;case"contextmenu":case"mouseup":case"dragend":UF=!1,J2(u,t,c);break;case"selectionchange":if(Fj)break;case"keydown":case"keyup":J2(u,t,c)}var F;if(CS)e:{switch(n){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else uh?TO(n,t)&&(x="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(x="onCompositionStart");x&&(MO&&t.locale!=="ko"&&(uh||x!=="onCompositionStart"?x==="onCompositionEnd"&&uh&&(F=RO()):(_A=c,yS="value"in _A?_A.value:_A.textContent,uh=!0)),b=Hw(A,x),0<b.length&&(x=new k2(x,n,null,t,c),u.push({event:x,listeners:b}),F?x.data=F:(F=NO(t),F!==null&&(x.data=F)))),(F=fj?pj(n,t):gj(n,t))&&(A=Hw(A,"onBeforeInput"),0<A.length&&(c=new k2("onBeforeInput","beforeinput",null,t,c),u.push({event:c,listeners:A}),c.data=F))}zO(u,e)})}function fm(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Hw(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=am(n,t),s!=null&&r.unshift(fm(n,s,i)),s=am(n,e),s!=null&&r.push(fm(n,s,i))),n=n.return}return r}function ju(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Y2(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,A=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&A!==null&&(a=A,i?(l=am(t,s),l!=null&&o.unshift(fm(t,l,a))):i||(l=am(t,s),l!=null&&o.push(fm(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Uj=/\r\n?/g,Qj=/\u0000|\uFFFD/g;function X2(n){return(typeof n=="string"?n:""+n).replace(Uj,`
`).replace(Qj,"")}function tv(n,e,t){if(e=X2(e),X2(n)!==e&&t)throw Error(Ne(425))}function zw(){}var QF=null,RF=null;function MF(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var TF=typeof setTimeout=="function"?setTimeout:void 0,Rj=typeof clearTimeout=="function"?clearTimeout:void 0,j2=typeof Promise=="function"?Promise:void 0,Mj=typeof queueMicrotask=="function"?queueMicrotask:typeof j2<"u"?function(n){return j2.resolve(null).then(n).catch(Tj)}:TF;function Tj(n){setTimeout(function(){throw n})}function Ux(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),cm(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);cm(e)}function OA(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function K2(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var kf=Math.random().toString(36).slice(2),la="__reactFiber$"+kf,pm="__reactProps$"+kf,Tl="__reactContainer$"+kf,NF="__reactEvents$"+kf,Nj="__reactListeners$"+kf,kj="__reactHandles$"+kf;function Hc(n){var e=n[la];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Tl]||t[la]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=K2(n);n!==null;){if(t=n[la])return t;n=K2(n)}return e}n=t,t=n.parentNode}return null}function l0(n){return n=n[la]||n[Tl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function fh(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ne(33))}function kC(n){return n[pm]||null}var kF=[],ph=-1;function pc(n){return{current:n}}function vn(n){0>ph||(n.current=kF[ph],kF[ph]=null,ph--)}function hn(n,e){ph++,kF[ph]=n.current,n.current=e}var nc={},ni=pc(nc),Mi=pc(!1),fu=nc;function of(n,e){var t=n.type.contextTypes;if(!t)return nc;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ti(n){return n=n.childContextTypes,n!=null}function Yw(){vn(Mi),vn(ni)}function $2(n,e,t){if(ni.current!==nc)throw Error(Ne(168));hn(ni,e),hn(Mi,t)}function XO(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ne(108,w8(n)||"Unknown",i));return Rn({},t,r)}function Xw(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||nc,fu=ni.current,hn(ni,n),hn(Mi,Mi.current),!0}function q2(n,e,t){var r=n.stateNode;if(!r)throw Error(Ne(169));t?(n=XO(n,e,fu),r.__reactInternalMemoizedMergedChildContext=n,vn(Mi),vn(ni),hn(ni,n)):vn(Mi),hn(Mi,t)}var fl=null,DC=!1,Qx=!1;function jO(n){fl===null?fl=[n]:fl.push(n)}function Dj(n){DC=!0,jO(n)}function gc(){if(!Qx&&fl!==null){Qx=!0;var n=0,e=tn;try{var t=fl;for(tn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}fl=null,DC=!1}catch(i){throw fl!==null&&(fl=fl.slice(n+1)),BO(pS,gc),i}finally{tn=e,Qx=!1}}return null}var gh=[],mh=0,jw=null,Kw=0,Ls=[],Vs=0,pu=null,yl=1,wl="";function kc(n,e){gh[mh++]=Kw,gh[mh++]=jw,jw=n,Kw=e}function KO(n,e,t){Ls[Vs++]=yl,Ls[Vs++]=wl,Ls[Vs++]=pu,pu=n;var r=yl;n=wl;var i=32-Ro(r)-1;r&=~(1<<i),t+=1;var s=32-Ro(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,yl=1<<32-Ro(e)+i|t<<i|r,wl=s+n}else yl=1<<s|t<<i|r,wl=n}function xS(n){n.return!==null&&(kc(n,1),KO(n,1,0))}function IS(n){for(;n===jw;)jw=gh[--mh],gh[mh]=null,Kw=gh[--mh],gh[mh]=null;for(;n===pu;)pu=Ls[--Vs],Ls[Vs]=null,wl=Ls[--Vs],Ls[Vs]=null,yl=Ls[--Vs],Ls[Vs]=null}var As=null,os=null,bn=!1,So=null;function $O(n,e){var t=Zs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function eM(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,As=n,os=OA(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,As=n,os=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=pu!==null?{id:yl,overflow:wl}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Zs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,As=n,os=null,!0):!1;default:return!1}}function DF(n){return(n.mode&1)!==0&&(n.flags&128)===0}function LF(n){if(bn){var e=os;if(e){var t=e;if(!eM(n,e)){if(DF(n))throw Error(Ne(418));e=OA(t.nextSibling);var r=As;e&&eM(n,e)?$O(r,t):(n.flags=n.flags&-4097|2,bn=!1,As=n)}}else{if(DF(n))throw Error(Ne(418));n.flags=n.flags&-4097|2,bn=!1,As=n}}}function tM(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;As=n}function nv(n){if(n!==As)return!1;if(!bn)return tM(n),bn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!MF(n.type,n.memoizedProps)),e&&(e=os)){if(DF(n))throw qO(),Error(Ne(418));for(;e;)$O(n,e),e=OA(e.nextSibling)}if(tM(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ne(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){os=OA(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}os=null}}else os=As?OA(n.stateNode.nextSibling):null;return!0}function qO(){for(var n=os;n;)n=OA(n.nextSibling)}function af(){os=As=null,bn=!1}function FS(n){So===null?So=[n]:So.push(n)}var Lj=Jl.ReactCurrentBatchConfig;function Fo(n,e){if(n&&n.defaultProps){e=Rn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var $w=pc(null),qw=null,vh=null,_S=null;function ES(){_S=vh=qw=null}function SS(n){var e=$w.current;vn($w),n._currentValue=e}function VF(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Lh(n,e){qw=n,_S=vh=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Qi=!0),n.firstContext=null)}function to(n){var e=n._currentValue;if(_S!==n)if(n={context:n,memoizedValue:e,next:null},vh===null){if(qw===null)throw Error(Ne(308));vh=n,qw.dependencies={lanes:0,firstContext:n}}else vh=vh.next=n;return e}var zc=null;function US(n){zc===null?zc=[n]:zc.push(n)}function eW(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,US(e)):(t.next=i.next,i.next=t),e.interleaved=t,Nl(n,r)}function Nl(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var vA=!1;function QS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tW(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Il(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function WA(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Gt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Nl(n,t)}return i=r.interleaved,i===null?(e.next=e,US(r)):(e.next=i.next,i.next=e),r.interleaved=e,Nl(n,t)}function jy(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,gS(n,t)}}function nM(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function eB(n,e,t,r){var i=n.updateQueue;vA=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,A=l.next;l.next=null,o===null?s=A:o.next=A,o=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=A:a.next=A,c.lastBaseUpdate=l))}if(s!==null){var u=i.baseState;o=0,c=A=l=null,a=s;do{var h=a.lane,d=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=n,f=a;switch(h=e,d=t,f.tag){case 1:if(p=f.payload,typeof p=="function"){u=p.call(d,u,h);break e}u=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=f.payload,h=typeof p=="function"?p.call(d,u,h):p,h==null)break e;u=Rn({},u,h);break e;case 2:vA=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else d={eventTime:d,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(A=c=d,l=u):c=c.next=d,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=u),i.baseState=l,i.firstBaseUpdate=A,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);mu|=o,n.lanes=o,n.memoizedState=u}}function rM(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Ne(191,i));i.call(r)}}}var nW=new eO.Component().refs;function PF(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Rn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var LC={isMounted:function(n){return(n=n._reactInternals)?Qu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=vi(),i=GA(n),s=Il(r,i);s.payload=e,t!=null&&(s.callback=t),e=WA(n,s,i),e!==null&&(Mo(e,n,i,r),jy(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=vi(),i=GA(n),s=Il(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=WA(n,s,i),e!==null&&(Mo(e,n,i,r),jy(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=vi(),r=GA(n),i=Il(t,r);i.tag=2,e!=null&&(i.callback=e),e=WA(n,i,r),e!==null&&(Mo(e,n,r,t),jy(e,n,r))}};function iM(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!dm(t,r)||!dm(i,s):!0}function rW(n,e,t){var r=!1,i=nc,s=e.contextType;return typeof s=="object"&&s!==null?s=to(s):(i=Ti(e)?fu:ni.current,r=e.contextTypes,s=(r=r!=null)?of(n,i):nc),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=LC,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function sM(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&LC.enqueueReplaceState(e,e.state,null)}function OF(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=nW,QS(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=to(s):(s=Ti(e)?fu:ni.current,i.context=of(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(PF(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&LC.enqueueReplaceState(i,i.state,null),eB(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function bp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ne(309));var r=t.stateNode}if(!r)throw Error(Ne(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===nW&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ne(284));if(!t._owner)throw Error(Ne(290,n))}return n}function rv(n,e){throw n=Object.prototype.toString.call(e),Error(Ne(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function oM(n){var e=n._init;return e(n._payload)}function iW(n){function e(g,v){if(n){var w=g.deletions;w===null?(g.deletions=[v],g.flags|=16):w.push(v)}}function t(g,v){if(!n)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=JA(g,v),g.index=0,g.sibling=null,g}function s(g,v,w){return g.index=w,n?(w=g.alternate,w!==null?(w=w.index,w<v?(g.flags|=2,v):w):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,v,w,B){return v===null||v.tag!==6?(v=Lx(w,g.mode,B),v.return=g,v):(v=i(v,w),v.return=g,v)}function l(g,v,w,B){var C=w.type;return C===ch?c(g,v,w.props.children,B,w.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===mA&&oM(C)===v.type)?(B=i(v,w.props),B.ref=bp(g,v,w),B.return=g,B):(B=nw(w.type,w.key,w.props,null,g.mode,B),B.ref=bp(g,v,w),B.return=g,B)}function A(g,v,w,B){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Vx(w,g.mode,B),v.return=g,v):(v=i(v,w.children||[]),v.return=g,v)}function c(g,v,w,B,C){return v===null||v.tag!==7?(v=iu(w,g.mode,B,C),v.return=g,v):(v=i(v,w),v.return=g,v)}function u(g,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Lx(""+v,g.mode,w),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case H0:return w=nw(v.type,v.key,v.props,null,g.mode,w),w.ref=bp(g,null,v),w.return=g,w;case Ah:return v=Vx(v,g.mode,w),v.return=g,v;case mA:var B=v._init;return u(g,B(v._payload),w)}if(Ag(v)||vp(v))return v=iu(v,g.mode,w,null),v.return=g,v;rv(g,v)}return null}function h(g,v,w,B){var C=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:a(g,v,""+w,B);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case H0:return w.key===C?l(g,v,w,B):null;case Ah:return w.key===C?A(g,v,w,B):null;case mA:return C=w._init,h(g,v,C(w._payload),B)}if(Ag(w)||vp(w))return C!==null?null:c(g,v,w,B,null);rv(g,w)}return null}function d(g,v,w,B,C){if(typeof B=="string"&&B!==""||typeof B=="number")return g=g.get(w)||null,a(v,g,""+B,C);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case H0:return g=g.get(B.key===null?w:B.key)||null,l(v,g,B,C);case Ah:return g=g.get(B.key===null?w:B.key)||null,A(v,g,B,C);case mA:var b=B._init;return d(g,v,w,b(B._payload),C)}if(Ag(B)||vp(B))return g=g.get(w)||null,c(v,g,B,C,null);rv(v,B)}return null}function p(g,v,w,B){for(var C=null,b=null,F=v,x=v=0,E=null;F!==null&&x<w.length;x++){F.index>x?(E=F,F=null):E=F.sibling;var M=h(g,F,w[x],B);if(M===null){F===null&&(F=E);break}n&&F&&M.alternate===null&&e(g,F),v=s(M,v,x),b===null?C=M:b.sibling=M,b=M,F=E}if(x===w.length)return t(g,F),bn&&kc(g,x),C;if(F===null){for(;x<w.length;x++)F=u(g,w[x],B),F!==null&&(v=s(F,v,x),b===null?C=F:b.sibling=F,b=F);return bn&&kc(g,x),C}for(F=r(g,F);x<w.length;x++)E=d(F,g,x,w[x],B),E!==null&&(n&&E.alternate!==null&&F.delete(E.key===null?x:E.key),v=s(E,v,x),b===null?C=E:b.sibling=E,b=E);return n&&F.forEach(function(H){return e(g,H)}),bn&&kc(g,x),C}function f(g,v,w,B){var C=vp(w);if(typeof C!="function")throw Error(Ne(150));if(w=C.call(w),w==null)throw Error(Ne(151));for(var b=C=null,F=v,x=v=0,E=null,M=w.next();F!==null&&!M.done;x++,M=w.next()){F.index>x?(E=F,F=null):E=F.sibling;var H=h(g,F,M.value,B);if(H===null){F===null&&(F=E);break}n&&F&&H.alternate===null&&e(g,F),v=s(H,v,x),b===null?C=H:b.sibling=H,b=H,F=E}if(M.done)return t(g,F),bn&&kc(g,x),C;if(F===null){for(;!M.done;x++,M=w.next())M=u(g,M.value,B),M!==null&&(v=s(M,v,x),b===null?C=M:b.sibling=M,b=M);return bn&&kc(g,x),C}for(F=r(g,F);!M.done;x++,M=w.next())M=d(F,g,x,M.value,B),M!==null&&(n&&M.alternate!==null&&F.delete(M.key===null?x:M.key),v=s(M,v,x),b===null?C=M:b.sibling=M,b=M);return n&&F.forEach(function(O){return e(g,O)}),bn&&kc(g,x),C}function m(g,v,w,B){if(typeof w=="object"&&w!==null&&w.type===ch&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case H0:e:{for(var C=w.key,b=v;b!==null;){if(b.key===C){if(C=w.type,C===ch){if(b.tag===7){t(g,b.sibling),v=i(b,w.props.children),v.return=g,g=v;break e}}else if(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===mA&&oM(C)===b.type){t(g,b.sibling),v=i(b,w.props),v.ref=bp(g,b,w),v.return=g,g=v;break e}t(g,b);break}else e(g,b);b=b.sibling}w.type===ch?(v=iu(w.props.children,g.mode,B,w.key),v.return=g,g=v):(B=nw(w.type,w.key,w.props,null,g.mode,B),B.ref=bp(g,v,w),B.return=g,g=B)}return o(g);case Ah:e:{for(b=w.key;v!==null;){if(v.key===b)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){t(g,v.sibling),v=i(v,w.children||[]),v.return=g,g=v;break e}else{t(g,v);break}else e(g,v);v=v.sibling}v=Vx(w,g.mode,B),v.return=g,g=v}return o(g);case mA:return b=w._init,m(g,v,b(w._payload),B)}if(Ag(w))return p(g,v,w,B);if(vp(w))return f(g,v,w,B);rv(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(t(g,v.sibling),v=i(v,w),v.return=g,g=v):(t(g,v),v=Lx(w,g.mode,B),v.return=g,g=v),o(g)):t(g,v)}return m}var lf=iW(!0),sW=iW(!1),A0={},Ca=pc(A0),gm=pc(A0),mm=pc(A0);function Yc(n){if(n===A0)throw Error(Ne(174));return n}function RS(n,e){switch(hn(mm,e),hn(gm,n),hn(Ca,A0),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yF(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=yF(e,n)}vn(Ca),hn(Ca,e)}function Af(){vn(Ca),vn(gm),vn(mm)}function oW(n){Yc(mm.current);var e=Yc(Ca.current),t=yF(e,n.type);e!==t&&(hn(gm,n),hn(Ca,t))}function MS(n){gm.current===n&&(vn(Ca),vn(gm))}var En=pc(0);function tB(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rx=[];function TS(){for(var n=0;n<Rx.length;n++)Rx[n]._workInProgressVersionPrimary=null;Rx.length=0}var Ky=Jl.ReactCurrentDispatcher,Mx=Jl.ReactCurrentBatchConfig,gu=0,Qn=null,hr=null,br=null,nB=!1,Lg=!1,vm=0,Vj=0;function Gr(){throw Error(Ne(321))}function NS(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Do(n[t],e[t]))return!1;return!0}function kS(n,e,t,r,i,s){if(gu=s,Qn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ky.current=n===null||n.memoizedState===null?Zj:Gj,n=t(r,i),Lg){s=0;do{if(Lg=!1,vm=0,25<=s)throw Error(Ne(301));s+=1,br=hr=null,e.updateQueue=null,Ky.current=Jj,n=t(r,i)}while(Lg)}if(Ky.current=rB,e=hr!==null&&hr.next!==null,gu=0,br=hr=Qn=null,nB=!1,e)throw Error(Ne(300));return n}function DS(){var n=vm!==0;return vm=0,n}function na(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?Qn.memoizedState=br=n:br=br.next=n,br}function no(){if(hr===null){var n=Qn.alternate;n=n!==null?n.memoizedState:null}else n=hr.next;var e=br===null?Qn.memoizedState:br.next;if(e!==null)br=e,hr=n;else{if(n===null)throw Error(Ne(310));hr=n,n={memoizedState:hr.memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},br===null?Qn.memoizedState=br=n:br=br.next=n}return br}function ym(n,e){return typeof e=="function"?e(n):e}function Tx(n){var e=no(),t=e.queue;if(t===null)throw Error(Ne(311));t.lastRenderedReducer=n;var r=hr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,A=s;do{var c=A.lane;if((gu&c)===c)l!==null&&(l=l.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),r=A.hasEagerState?A.eagerState:n(r,A.action);else{var u={lane:c,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};l===null?(a=l=u,o=r):l=l.next=u,Qn.lanes|=c,mu|=c}A=A.next}while(A!==null&&A!==s);l===null?o=r:l.next=a,Do(r,e.memoizedState)||(Qi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Qn.lanes|=s,mu|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Nx(n){var e=no(),t=e.queue;if(t===null)throw Error(Ne(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Do(s,e.memoizedState)||(Qi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function aW(){}function lW(n,e){var t=Qn,r=no(),i=e(),s=!Do(r.memoizedState,i);if(s&&(r.memoizedState=i,Qi=!0),r=r.queue,LS(uW.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||br!==null&&br.memoizedState.tag&1){if(t.flags|=2048,wm(9,cW.bind(null,t,r,i,e),void 0,null),_r===null)throw Error(Ne(349));gu&30||AW(t,e,i)}return i}function AW(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Qn.updateQueue,e===null?(e={lastEffect:null,stores:null},Qn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function cW(n,e,t,r){e.value=t,e.getSnapshot=r,dW(e)&&hW(n)}function uW(n,e,t){return t(function(){dW(e)&&hW(n)})}function dW(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Do(n,t)}catch{return!0}}function hW(n){var e=Nl(n,1);e!==null&&Mo(e,n,1,-1)}function aM(n){var e=na();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ym,lastRenderedState:n},e.queue=n,n=n.dispatch=Wj.bind(null,Qn,n),[e.memoizedState,n]}function wm(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Qn.updateQueue,e===null?(e={lastEffect:null,stores:null},Qn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function fW(){return no().memoizedState}function $y(n,e,t,r){var i=na();Qn.flags|=n,i.memoizedState=wm(1|e,t,void 0,r===void 0?null:r)}function VC(n,e,t,r){var i=no();r=r===void 0?null:r;var s=void 0;if(hr!==null){var o=hr.memoizedState;if(s=o.destroy,r!==null&&NS(r,o.deps)){i.memoizedState=wm(e,t,s,r);return}}Qn.flags|=n,i.memoizedState=wm(1|e,t,s,r)}function lM(n,e){return $y(8390656,8,n,e)}function LS(n,e){return VC(2048,8,n,e)}function pW(n,e){return VC(4,2,n,e)}function gW(n,e){return VC(4,4,n,e)}function mW(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function vW(n,e,t){return t=t!=null?t.concat([n]):null,VC(4,4,mW.bind(null,e,n),t)}function VS(){}function yW(n,e){var t=no();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&NS(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function wW(n,e){var t=no();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&NS(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function BW(n,e,t){return gu&21?(Do(t,e)||(t=xO(),Qn.lanes|=t,mu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Qi=!0),n.memoizedState=t)}function Pj(n,e){var t=tn;tn=t!==0&&4>t?t:4,n(!0);var r=Mx.transition;Mx.transition={};try{n(!1),e()}finally{tn=t,Mx.transition=r}}function CW(){return no().memoizedState}function Oj(n,e,t){var r=GA(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},bW(n))xW(e,t);else if(t=eW(n,e,t,r),t!==null){var i=vi();Mo(t,n,r,i),IW(t,e,r)}}function Wj(n,e,t){var r=GA(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(bW(n))xW(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Do(a,o)){var l=e.interleaved;l===null?(i.next=i,US(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=eW(n,e,i,r),t!==null&&(i=vi(),Mo(t,n,r,i),IW(t,e,r))}}function bW(n){var e=n.alternate;return n===Qn||e!==null&&e===Qn}function xW(n,e){Lg=nB=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function IW(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,gS(n,t)}}var rB={readContext:to,useCallback:Gr,useContext:Gr,useEffect:Gr,useImperativeHandle:Gr,useInsertionEffect:Gr,useLayoutEffect:Gr,useMemo:Gr,useReducer:Gr,useRef:Gr,useState:Gr,useDebugValue:Gr,useDeferredValue:Gr,useTransition:Gr,useMutableSource:Gr,useSyncExternalStore:Gr,useId:Gr,unstable_isNewReconciler:!1},Zj={readContext:to,useCallback:function(n,e){return na().memoizedState=[n,e===void 0?null:e],n},useContext:to,useEffect:lM,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,$y(4194308,4,mW.bind(null,e,n),t)},useLayoutEffect:function(n,e){return $y(4194308,4,n,e)},useInsertionEffect:function(n,e){return $y(4,2,n,e)},useMemo:function(n,e){var t=na();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=na();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Oj.bind(null,Qn,n),[r.memoizedState,n]},useRef:function(n){var e=na();return n={current:n},e.memoizedState=n},useState:aM,useDebugValue:VS,useDeferredValue:function(n){return na().memoizedState=n},useTransition:function(){var n=aM(!1),e=n[0];return n=Pj.bind(null,n[1]),na().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Qn,i=na();if(bn){if(t===void 0)throw Error(Ne(407));t=t()}else{if(t=e(),_r===null)throw Error(Ne(349));gu&30||AW(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,lM(uW.bind(null,r,s,n),[n]),r.flags|=2048,wm(9,cW.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=na(),e=_r.identifierPrefix;if(bn){var t=wl,r=yl;t=(r&~(1<<32-Ro(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=vm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Vj++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Gj={readContext:to,useCallback:yW,useContext:to,useEffect:LS,useImperativeHandle:vW,useInsertionEffect:pW,useLayoutEffect:gW,useMemo:wW,useReducer:Tx,useRef:fW,useState:function(){return Tx(ym)},useDebugValue:VS,useDeferredValue:function(n){var e=no();return BW(e,hr.memoizedState,n)},useTransition:function(){var n=Tx(ym)[0],e=no().memoizedState;return[n,e]},useMutableSource:aW,useSyncExternalStore:lW,useId:CW,unstable_isNewReconciler:!1},Jj={readContext:to,useCallback:yW,useContext:to,useEffect:LS,useImperativeHandle:vW,useInsertionEffect:pW,useLayoutEffect:gW,useMemo:wW,useReducer:Nx,useRef:fW,useState:function(){return Nx(ym)},useDebugValue:VS,useDeferredValue:function(n){var e=no();return hr===null?e.memoizedState=n:BW(e,hr.memoizedState,n)},useTransition:function(){var n=Nx(ym)[0],e=no().memoizedState;return[n,e]},useMutableSource:aW,useSyncExternalStore:lW,useId:CW,unstable_isNewReconciler:!1};function cf(n,e){try{var t="",r=e;do t+=y8(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function kx(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function WF(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Hj=typeof WeakMap=="function"?WeakMap:Map;function FW(n,e,t){t=Il(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){sB||(sB=!0,$F=r),WF(n,e)},t}function _W(n,e,t){t=Il(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){WF(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){WF(n,e),typeof r!="function"&&(ZA===null?ZA=new Set([this]):ZA.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function AM(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Hj;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=oK.bind(null,n,e,t),e.then(n,n))}function cM(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function uM(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Il(-1,1),e.tag=2,WA(t,e,1))),t.lanes|=1),n)}var zj=Jl.ReactCurrentOwner,Qi=!1;function Ai(n,e,t,r){e.child=n===null?sW(e,null,t,r):lf(e,n.child,t,r)}function dM(n,e,t,r,i){t=t.render;var s=e.ref;return Lh(e,i),r=kS(n,e,t,r,s,i),t=DS(),n!==null&&!Qi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,kl(n,e,i)):(bn&&t&&xS(e),e.flags|=1,Ai(n,e,r,i),e.child)}function hM(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!zS(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,EW(n,e,s,r,i)):(n=nw(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:dm,t(o,r)&&n.ref===e.ref)return kl(n,e,i)}return e.flags|=1,n=JA(s,r),n.ref=e.ref,n.return=e,e.child=n}function EW(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(dm(s,r)&&n.ref===e.ref)if(Qi=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Qi=!0);else return e.lanes=n.lanes,kl(n,e,i)}return ZF(n,e,t,r,i)}function SW(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},hn(wh,$i),$i|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,hn(wh,$i),$i|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,hn(wh,$i),$i|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,hn(wh,$i),$i|=r;return Ai(n,e,i,t),e.child}function UW(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function ZF(n,e,t,r,i){var s=Ti(t)?fu:ni.current;return s=of(e,s),Lh(e,i),t=kS(n,e,t,r,s,i),r=DS(),n!==null&&!Qi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,kl(n,e,i)):(bn&&r&&xS(e),e.flags|=1,Ai(n,e,t,i),e.child)}function fM(n,e,t,r,i){if(Ti(t)){var s=!0;Xw(e)}else s=!1;if(Lh(e,i),e.stateNode===null)qy(n,e),rW(e,t,r),OF(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,A=t.contextType;typeof A=="object"&&A!==null?A=to(A):(A=Ti(t)?fu:ni.current,A=of(e,A));var c=t.getDerivedStateFromProps,u=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==A)&&sM(e,o,r,A),vA=!1;var h=e.memoizedState;o.state=h,eB(e,r,o,i),l=e.memoizedState,a!==r||h!==l||Mi.current||vA?(typeof c=="function"&&(PF(e,t,c,r),l=e.memoizedState),(a=vA||iM(e,t,a,r,h,l,A))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=A,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,tW(n,e),a=e.memoizedProps,A=e.type===e.elementType?a:Fo(e.type,a),o.props=A,u=e.pendingProps,h=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=to(l):(l=Ti(t)?fu:ni.current,l=of(e,l));var d=t.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||h!==l)&&sM(e,o,r,l),vA=!1,h=e.memoizedState,o.state=h,eB(e,r,o,i);var p=e.memoizedState;a!==u||h!==p||Mi.current||vA?(typeof d=="function"&&(PF(e,t,d,r),p=e.memoizedState),(A=vA||iM(e,t,A,r,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=A):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),r=!1)}return GF(n,e,t,r,s,i)}function GF(n,e,t,r,i,s){UW(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&q2(e,t,!1),kl(n,e,s);r=e.stateNode,zj.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=lf(e,n.child,null,s),e.child=lf(e,null,a,s)):Ai(n,e,a,s),e.memoizedState=r.state,i&&q2(e,t,!0),e.child}function QW(n){var e=n.stateNode;e.pendingContext?$2(n,e.pendingContext,e.pendingContext!==e.context):e.context&&$2(n,e.context,!1),RS(n,e.containerInfo)}function pM(n,e,t,r,i){return af(),FS(i),e.flags|=256,Ai(n,e,t,r),e.child}var JF={dehydrated:null,treeContext:null,retryLane:0};function HF(n){return{baseLanes:n,cachePool:null,transitions:null}}function RW(n,e,t){var r=e.pendingProps,i=En.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),hn(En,i&1),n===null)return LF(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=WC(o,r,0,null),n=iu(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=HF(t),e.memoizedState=JF,n):PS(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Yj(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=JA(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=JA(a,s):(s=iu(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?HF(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=JF,r}return s=n.child,n=s.sibling,r=JA(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function PS(n,e){return e=WC({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function iv(n,e,t,r){return r!==null&&FS(r),lf(e,n.child,null,t),n=PS(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Yj(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=kx(Error(Ne(422))),iv(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=WC({mode:"visible",children:r.children},i,0,null),s=iu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&lf(e,n.child,null,o),e.child.memoizedState=HF(o),e.memoizedState=JF,s);if(!(e.mode&1))return iv(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ne(419)),r=kx(s,r,void 0),iv(n,e,o,r)}if(a=(o&n.childLanes)!==0,Qi||a){if(r=_r,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Nl(n,i),Mo(r,n,i,-1))}return HS(),r=kx(Error(Ne(421))),iv(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=aK.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,os=OA(i.nextSibling),As=e,bn=!0,So=null,n!==null&&(Ls[Vs++]=yl,Ls[Vs++]=wl,Ls[Vs++]=pu,yl=n.id,wl=n.overflow,pu=e),e=PS(e,r.children),e.flags|=4096,e)}function gM(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),VF(n.return,e,t)}function Dx(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function MW(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ai(n,e,r.children,t),r=En.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&gM(n,t,e);else if(n.tag===19)gM(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(hn(En,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&tB(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Dx(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&tB(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Dx(e,!0,t,null,s);break;case"together":Dx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qy(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function kl(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),mu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ne(153));if(e.child!==null){for(n=e.child,t=JA(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=JA(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Xj(n,e,t){switch(e.tag){case 3:QW(e),af();break;case 5:oW(e);break;case 1:Ti(e.type)&&Xw(e);break;case 4:RS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;hn($w,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(hn(En,En.current&1),e.flags|=128,null):t&e.child.childLanes?RW(n,e,t):(hn(En,En.current&1),n=kl(n,e,t),n!==null?n.sibling:null);hn(En,En.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return MW(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),hn(En,En.current),r)break;return null;case 22:case 23:return e.lanes=0,SW(n,e,t)}return kl(n,e,t)}var TW,zF,NW,kW;TW=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};zF=function(){};NW=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Yc(Ca.current);var s=null;switch(t){case"input":i=pF(n,i),r=pF(n,r),s=[];break;case"select":i=Rn({},i,{value:void 0}),r=Rn({},r,{value:void 0}),s=[];break;case"textarea":i=vF(n,i),r=vF(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=zw)}wF(t,r);var o;t=null;for(A in i)if(!r.hasOwnProperty(A)&&i.hasOwnProperty(A)&&i[A]!=null)if(A==="style"){var a=i[A];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(sm.hasOwnProperty(A)?s||(s=[]):(s=s||[]).push(A,null));for(A in r){var l=r[A];if(a=i!=null?i[A]:void 0,r.hasOwnProperty(A)&&l!==a&&(l!=null||a!=null))if(A==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(A,t)),t=l;else A==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(A,l)):A==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(A,""+l):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(sm.hasOwnProperty(A)?(l!=null&&A==="onScroll"&&fn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(A,l))}t&&(s=s||[]).push("style",t);var A=s;(e.updateQueue=A)&&(e.flags|=4)}};kW=function(n,e,t,r){t!==r&&(e.flags|=4)};function xp(n,e){if(!bn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Jr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function jj(n,e,t){var r=e.pendingProps;switch(IS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jr(e),null;case 1:return Ti(e.type)&&Yw(),Jr(e),null;case 3:return r=e.stateNode,Af(),vn(Mi),vn(ni),TS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(nv(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,So!==null&&(t_(So),So=null))),zF(n,e),Jr(e),null;case 5:MS(e);var i=Yc(mm.current);if(t=e.type,n!==null&&e.stateNode!=null)NW(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ne(166));return Jr(e),null}if(n=Yc(Ca.current),nv(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[la]=e,r[pm]=s,n=(e.mode&1)!==0,t){case"dialog":fn("cancel",r),fn("close",r);break;case"iframe":case"object":case"embed":fn("load",r);break;case"video":case"audio":for(i=0;i<ug.length;i++)fn(ug[i],r);break;case"source":fn("error",r);break;case"img":case"image":case"link":fn("error",r),fn("load",r);break;case"details":fn("toggle",r);break;case"input":I2(r,s),fn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fn("invalid",r);break;case"textarea":_2(r,s),fn("invalid",r)}wF(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&tv(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&tv(r.textContent,a,n),i=["children",""+a]):sm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&fn("scroll",r)}switch(t){case"input":z0(r),F2(r,s,!0);break;case"textarea":z0(r),E2(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=zw)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=AO(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[la]=e,n[pm]=r,TW(n,e,!1,!1),e.stateNode=n;e:{switch(o=BF(t,r),t){case"dialog":fn("cancel",n),fn("close",n),i=r;break;case"iframe":case"object":case"embed":fn("load",n),i=r;break;case"video":case"audio":for(i=0;i<ug.length;i++)fn(ug[i],n);i=r;break;case"source":fn("error",n),i=r;break;case"img":case"image":case"link":fn("error",n),fn("load",n),i=r;break;case"details":fn("toggle",n),i=r;break;case"input":I2(n,r),i=pF(n,r),fn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Rn({},r,{value:void 0}),fn("invalid",n);break;case"textarea":_2(n,r),i=vF(n,r),fn("invalid",n);break;default:i=r}wF(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?dO(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cO(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&om(n,l):typeof l=="number"&&om(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&fn("scroll",n):l!=null&&cS(n,s,l,o))}switch(t){case"input":z0(n),F2(n,r,!1);break;case"textarea":z0(n),E2(n);break;case"option":r.value!=null&&n.setAttribute("value",""+tc(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Th(n,!!r.multiple,s,!1):r.defaultValue!=null&&Th(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=zw)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jr(e),null;case 6:if(n&&e.stateNode!=null)kW(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ne(166));if(t=Yc(mm.current),Yc(Ca.current),nv(e)){if(r=e.stateNode,t=e.memoizedProps,r[la]=e,(s=r.nodeValue!==t)&&(n=As,n!==null))switch(n.tag){case 3:tv(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&tv(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[la]=e,e.stateNode=r}return Jr(e),null;case 13:if(vn(En),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(bn&&os!==null&&e.mode&1&&!(e.flags&128))qO(),af(),e.flags|=98560,s=!1;else if(s=nv(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Ne(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ne(317));s[la]=e}else af(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Jr(e),s=!1}else So!==null&&(t_(So),So=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||En.current&1?mr===0&&(mr=3):HS())),e.updateQueue!==null&&(e.flags|=4),Jr(e),null);case 4:return Af(),zF(n,e),n===null&&hm(e.stateNode.containerInfo),Jr(e),null;case 10:return SS(e.type._context),Jr(e),null;case 17:return Ti(e.type)&&Yw(),Jr(e),null;case 19:if(vn(En),s=e.memoizedState,s===null)return Jr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)xp(s,!1);else{if(mr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=tB(n),o!==null){for(e.flags|=128,xp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return hn(En,En.current&1|2),e.child}n=n.sibling}s.tail!==null&&Yn()>uf&&(e.flags|=128,r=!0,xp(s,!1),e.lanes=4194304)}else{if(!r)if(n=tB(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),xp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!bn)return Jr(e),null}else 2*Yn()-s.renderingStartTime>uf&&t!==1073741824&&(e.flags|=128,r=!0,xp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Yn(),e.sibling=null,t=En.current,hn(En,r?t&1|2:t&1),e):(Jr(e),null);case 22:case 23:return JS(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$i&1073741824&&(Jr(e),e.subtreeFlags&6&&(e.flags|=8192)):Jr(e),null;case 24:return null;case 25:return null}throw Error(Ne(156,e.tag))}function Kj(n,e){switch(IS(e),e.tag){case 1:return Ti(e.type)&&Yw(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Af(),vn(Mi),vn(ni),TS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return MS(e),null;case 13:if(vn(En),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ne(340));af()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return vn(En),null;case 4:return Af(),null;case 10:return SS(e.type._context),null;case 22:case 23:return JS(),null;case 24:return null;default:return null}}var sv=!1,jr=!1,$j=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function yh(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Dn(n,e,r)}else t.current=null}function YF(n,e,t){try{t()}catch(r){Dn(n,e,r)}}var mM=!1;function qj(n,e){if(QF=Gw,n=PO(),bS(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,A=0,c=0,u=n,h=null;t:for(;;){for(var d;u!==t||i!==0&&u.nodeType!==3||(a=o+i),u!==s||r!==0&&u.nodeType!==3||(l=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(d=u.firstChild)!==null;)h=u,u=d;for(;;){if(u===n)break t;if(h===t&&++A===i&&(a=o),h===s&&++c===r&&(l=o),(d=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=d}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(RF={focusedElem:n,selectionRange:t},Gw=!1,Xe=e;Xe!==null;)if(e=Xe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Xe=n;else for(;Xe!==null;){e=Xe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var f=p.memoizedProps,m=p.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?f:Fo(e.type,f),m);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(B){Dn(e,e.return,B)}if(n=e.sibling,n!==null){n.return=e.return,Xe=n;break}Xe=e.return}return p=mM,mM=!1,p}function Vg(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&YF(e,t,s)}i=i.next}while(i!==r)}}function PC(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function XF(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function DW(n){var e=n.alternate;e!==null&&(n.alternate=null,DW(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[la],delete e[pm],delete e[NF],delete e[Nj],delete e[kj])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function LW(n){return n.tag===5||n.tag===3||n.tag===4}function vM(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||LW(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function jF(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=zw));else if(r!==4&&(n=n.child,n!==null))for(jF(n,e,t),n=n.sibling;n!==null;)jF(n,e,t),n=n.sibling}function KF(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(KF(n,e,t),n=n.sibling;n!==null;)KF(n,e,t),n=n.sibling}var Mr=null,_o=!1;function ql(n,e,t){for(t=t.child;t!==null;)VW(n,e,t),t=t.sibling}function VW(n,e,t){if(Ba&&typeof Ba.onCommitFiberUnmount=="function")try{Ba.onCommitFiberUnmount(RC,t)}catch{}switch(t.tag){case 5:jr||yh(t,e);case 6:var r=Mr,i=_o;Mr=null,ql(n,e,t),Mr=r,_o=i,Mr!==null&&(_o?(n=Mr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Mr.removeChild(t.stateNode));break;case 18:Mr!==null&&(_o?(n=Mr,t=t.stateNode,n.nodeType===8?Ux(n.parentNode,t):n.nodeType===1&&Ux(n,t),cm(n)):Ux(Mr,t.stateNode));break;case 4:r=Mr,i=_o,Mr=t.stateNode.containerInfo,_o=!0,ql(n,e,t),Mr=r,_o=i;break;case 0:case 11:case 14:case 15:if(!jr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&YF(t,e,o),i=i.next}while(i!==r)}ql(n,e,t);break;case 1:if(!jr&&(yh(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Dn(t,e,a)}ql(n,e,t);break;case 21:ql(n,e,t);break;case 22:t.mode&1?(jr=(r=jr)||t.memoizedState!==null,ql(n,e,t),jr=r):ql(n,e,t);break;default:ql(n,e,t)}}function yM(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new $j),e.forEach(function(r){var i=lK.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function po(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Mr=a.stateNode,_o=!1;break e;case 3:Mr=a.stateNode.containerInfo,_o=!0;break e;case 4:Mr=a.stateNode.containerInfo,_o=!0;break e}a=a.return}if(Mr===null)throw Error(Ne(160));VW(s,o,i),Mr=null,_o=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(A){Dn(i,e,A)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)PW(e,n),e=e.sibling}function PW(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(po(e,n),Jo(n),r&4){try{Vg(3,n,n.return),PC(3,n)}catch(f){Dn(n,n.return,f)}try{Vg(5,n,n.return)}catch(f){Dn(n,n.return,f)}}break;case 1:po(e,n),Jo(n),r&512&&t!==null&&yh(t,t.return);break;case 5:if(po(e,n),Jo(n),r&512&&t!==null&&yh(t,t.return),n.flags&32){var i=n.stateNode;try{om(i,"")}catch(f){Dn(n,n.return,f)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&aO(i,s),BF(a,o);var A=BF(a,s);for(o=0;o<l.length;o+=2){var c=l[o],u=l[o+1];c==="style"?dO(i,u):c==="dangerouslySetInnerHTML"?cO(i,u):c==="children"?om(i,u):cS(i,c,u,A)}switch(a){case"input":gF(i,s);break;case"textarea":lO(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Th(i,!!s.multiple,d,!1):h!==!!s.multiple&&(s.defaultValue!=null?Th(i,!!s.multiple,s.defaultValue,!0):Th(i,!!s.multiple,s.multiple?[]:"",!1))}i[pm]=s}catch(f){Dn(n,n.return,f)}}break;case 6:if(po(e,n),Jo(n),r&4){if(n.stateNode===null)throw Error(Ne(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(f){Dn(n,n.return,f)}}break;case 3:if(po(e,n),Jo(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{cm(e.containerInfo)}catch(f){Dn(n,n.return,f)}break;case 4:po(e,n),Jo(n);break;case 13:po(e,n),Jo(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ZS=Yn())),r&4&&yM(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(jr=(A=jr)||c,po(e,n),jr=A):po(e,n),Jo(n),r&8192){if(A=n.memoizedState!==null,(n.stateNode.isHidden=A)&&!c&&n.mode&1)for(Xe=n,c=n.child;c!==null;){for(u=Xe=c;Xe!==null;){switch(h=Xe,d=h.child,h.tag){case 0:case 11:case 14:case 15:Vg(4,h,h.return);break;case 1:yh(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,t=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(f){Dn(r,t,f)}}break;case 5:yh(h,h.return);break;case 22:if(h.memoizedState!==null){BM(u);continue}}d!==null?(d.return=h,Xe=d):BM(u)}c=c.sibling}e:for(c=null,u=n;;){if(u.tag===5){if(c===null){c=u;try{i=u.stateNode,A?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=uO("display",o))}catch(f){Dn(n,n.return,f)}}}else if(u.tag===6){if(c===null)try{u.stateNode.nodeValue=A?"":u.memoizedProps}catch(f){Dn(n,n.return,f)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===n)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:po(e,n),Jo(n),r&4&&yM(n);break;case 21:break;default:po(e,n),Jo(n)}}function Jo(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(LW(t)){var r=t;break e}t=t.return}throw Error(Ne(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(om(i,""),r.flags&=-33);var s=vM(n);KF(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=vM(n);jF(n,a,o);break;default:throw Error(Ne(161))}}catch(l){Dn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function eK(n,e,t){Xe=n,OW(n)}function OW(n,e,t){for(var r=(n.mode&1)!==0;Xe!==null;){var i=Xe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||sv;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||jr;a=sv;var A=jr;if(sv=o,(jr=l)&&!A)for(Xe=i;Xe!==null;)o=Xe,l=o.child,o.tag===22&&o.memoizedState!==null?CM(i):l!==null?(l.return=o,Xe=l):CM(i);for(;s!==null;)Xe=s,OW(s),s=s.sibling;Xe=i,sv=a,jr=A}wM(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Xe=s):wM(n)}}function wM(n){for(;Xe!==null;){var e=Xe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jr||PC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Fo(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rM(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}rM(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var A=e.alternate;if(A!==null){var c=A.memoizedState;if(c!==null){var u=c.dehydrated;u!==null&&cm(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ne(163))}jr||e.flags&512&&XF(e)}catch(h){Dn(e,e.return,h)}}if(e===n){Xe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Xe=t;break}Xe=e.return}}function BM(n){for(;Xe!==null;){var e=Xe;if(e===n){Xe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Xe=t;break}Xe=e.return}}function CM(n){for(;Xe!==null;){var e=Xe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{PC(4,e)}catch(l){Dn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Dn(e,i,l)}}var s=e.return;try{XF(e)}catch(l){Dn(e,s,l)}break;case 5:var o=e.return;try{XF(e)}catch(l){Dn(e,o,l)}}}catch(l){Dn(e,e.return,l)}if(e===n){Xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Xe=a;break}Xe=e.return}}var tK=Math.ceil,iB=Jl.ReactCurrentDispatcher,OS=Jl.ReactCurrentOwner,Xs=Jl.ReactCurrentBatchConfig,Gt=0,_r=null,sr=null,Lr=0,$i=0,wh=pc(0),mr=0,Bm=null,mu=0,OC=0,WS=0,Pg=null,Ei=null,ZS=0,uf=1/0,Al=null,sB=!1,$F=null,ZA=null,ov=!1,EA=null,oB=0,Og=0,qF=null,ew=-1,tw=0;function vi(){return Gt&6?Yn():ew!==-1?ew:ew=Yn()}function GA(n){return n.mode&1?Gt&2&&Lr!==0?Lr&-Lr:Lj.transition!==null?(tw===0&&(tw=xO()),tw):(n=tn,n!==0||(n=window.event,n=n===void 0?16:QO(n.type)),n):1}function Mo(n,e,t,r){if(50<Og)throw Og=0,qF=null,Error(Ne(185));o0(n,t,r),(!(Gt&2)||n!==_r)&&(n===_r&&(!(Gt&2)&&(OC|=t),mr===4&&xA(n,Lr)),Ni(n,r),t===1&&Gt===0&&!(e.mode&1)&&(uf=Yn()+500,DC&&gc()))}function Ni(n,e){var t=n.callbackNode;L8(n,e);var r=Zw(n,n===_r?Lr:0);if(r===0)t!==null&&Q2(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Q2(t),e===1)n.tag===0?Dj(bM.bind(null,n)):jO(bM.bind(null,n)),Mj(function(){!(Gt&6)&&gc()}),t=null;else{switch(IO(r)){case 1:t=pS;break;case 4:t=CO;break;case 16:t=Ww;break;case 536870912:t=bO;break;default:t=Ww}t=XW(t,WW.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function WW(n,e){if(ew=-1,tw=0,Gt&6)throw Error(Ne(327));var t=n.callbackNode;if(Vh()&&n.callbackNode!==t)return null;var r=Zw(n,n===_r?Lr:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=aB(n,r);else{e=r;var i=Gt;Gt|=2;var s=GW();(_r!==n||Lr!==e)&&(Al=null,uf=Yn()+500,ru(n,e));do try{iK();break}catch(a){ZW(n,a)}while(1);ES(),iB.current=s,Gt=i,sr!==null?e=0:(_r=null,Lr=0,e=mr)}if(e!==0){if(e===2&&(i=FF(n),i!==0&&(r=i,e=e_(n,i))),e===1)throw t=Bm,ru(n,0),xA(n,r),Ni(n,Yn()),t;if(e===6)xA(n,r);else{if(i=n.current.alternate,!(r&30)&&!nK(i)&&(e=aB(n,r),e===2&&(s=FF(n),s!==0&&(r=s,e=e_(n,s))),e===1))throw t=Bm,ru(n,0),xA(n,r),Ni(n,Yn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Ne(345));case 2:Dc(n,Ei,Al);break;case 3:if(xA(n,r),(r&130023424)===r&&(e=ZS+500-Yn(),10<e)){if(Zw(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){vi(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=TF(Dc.bind(null,n,Ei,Al),e);break}Dc(n,Ei,Al);break;case 4:if(xA(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Ro(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Yn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tK(r/1960))-r,10<r){n.timeoutHandle=TF(Dc.bind(null,n,Ei,Al),r);break}Dc(n,Ei,Al);break;case 5:Dc(n,Ei,Al);break;default:throw Error(Ne(329))}}}return Ni(n,Yn()),n.callbackNode===t?WW.bind(null,n):null}function e_(n,e){var t=Pg;return n.current.memoizedState.isDehydrated&&(ru(n,e).flags|=256),n=aB(n,e),n!==2&&(e=Ei,Ei=t,e!==null&&t_(e)),n}function t_(n){Ei===null?Ei=n:Ei.push.apply(Ei,n)}function nK(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Do(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xA(n,e){for(e&=~WS,e&=~OC,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ro(e),r=1<<t;n[t]=-1,e&=~r}}function bM(n){if(Gt&6)throw Error(Ne(327));Vh();var e=Zw(n,0);if(!(e&1))return Ni(n,Yn()),null;var t=aB(n,e);if(n.tag!==0&&t===2){var r=FF(n);r!==0&&(e=r,t=e_(n,r))}if(t===1)throw t=Bm,ru(n,0),xA(n,e),Ni(n,Yn()),t;if(t===6)throw Error(Ne(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Dc(n,Ei,Al),Ni(n,Yn()),null}function GS(n,e){var t=Gt;Gt|=1;try{return n(e)}finally{Gt=t,Gt===0&&(uf=Yn()+500,DC&&gc())}}function vu(n){EA!==null&&EA.tag===0&&!(Gt&6)&&Vh();var e=Gt;Gt|=1;var t=Xs.transition,r=tn;try{if(Xs.transition=null,tn=1,n)return n()}finally{tn=r,Xs.transition=t,Gt=e,!(Gt&6)&&gc()}}function JS(){$i=wh.current,vn(wh)}function ru(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Rj(t)),sr!==null)for(t=sr.return;t!==null;){var r=t;switch(IS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yw();break;case 3:Af(),vn(Mi),vn(ni),TS();break;case 5:MS(r);break;case 4:Af();break;case 13:vn(En);break;case 19:vn(En);break;case 10:SS(r.type._context);break;case 22:case 23:JS()}t=t.return}if(_r=n,sr=n=JA(n.current,null),Lr=$i=e,mr=0,Bm=null,WS=OC=mu=0,Ei=Pg=null,zc!==null){for(e=0;e<zc.length;e++)if(t=zc[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}zc=null}return n}function ZW(n,e){do{var t=sr;try{if(ES(),Ky.current=rB,nB){for(var r=Qn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}nB=!1}if(gu=0,br=hr=Qn=null,Lg=!1,vm=0,OS.current=null,t===null||t.return===null){mr=1,Bm=e,sr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Lr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var A=l,c=a,u=c.tag;if(!(c.mode&1)&&(u===0||u===11||u===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=cM(o);if(d!==null){d.flags&=-257,uM(d,o,a,s,e),d.mode&1&&AM(s,A,e),e=d,l=A;var p=e.updateQueue;if(p===null){var f=new Set;f.add(l),e.updateQueue=f}else p.add(l);break e}else{if(!(e&1)){AM(s,A,e),HS();break e}l=Error(Ne(426))}}else if(bn&&a.mode&1){var m=cM(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),uM(m,o,a,s,e),FS(cf(l,a));break e}}s=l=cf(l,a),mr!==4&&(mr=2),Pg===null?Pg=[s]:Pg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=FW(s,l,e);nM(s,g);break e;case 1:a=l;var v=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ZA===null||!ZA.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var B=_W(s,a,e);nM(s,B);break e}}s=s.return}while(s!==null)}HW(t)}catch(C){e=C,sr===t&&t!==null&&(sr=t=t.return);continue}break}while(1)}function GW(){var n=iB.current;return iB.current=rB,n===null?rB:n}function HS(){(mr===0||mr===3||mr===2)&&(mr=4),_r===null||!(mu&268435455)&&!(OC&268435455)||xA(_r,Lr)}function aB(n,e){var t=Gt;Gt|=2;var r=GW();(_r!==n||Lr!==e)&&(Al=null,ru(n,e));do try{rK();break}catch(i){ZW(n,i)}while(1);if(ES(),Gt=t,iB.current=r,sr!==null)throw Error(Ne(261));return _r=null,Lr=0,mr}function rK(){for(;sr!==null;)JW(sr)}function iK(){for(;sr!==null&&!S8();)JW(sr)}function JW(n){var e=YW(n.alternate,n,$i);n.memoizedProps=n.pendingProps,e===null?HW(n):sr=e,OS.current=null}function HW(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Kj(t,e),t!==null){t.flags&=32767,sr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{mr=6,sr=null;return}}else if(t=jj(t,e,$i),t!==null){sr=t;return}if(e=e.sibling,e!==null){sr=e;return}sr=e=n}while(e!==null);mr===0&&(mr=5)}function Dc(n,e,t){var r=tn,i=Xs.transition;try{Xs.transition=null,tn=1,sK(n,e,t,r)}finally{Xs.transition=i,tn=r}return null}function sK(n,e,t,r){do Vh();while(EA!==null);if(Gt&6)throw Error(Ne(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ne(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(V8(n,s),n===_r&&(sr=_r=null,Lr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ov||(ov=!0,XW(Ww,function(){return Vh(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Xs.transition,Xs.transition=null;var o=tn;tn=1;var a=Gt;Gt|=4,OS.current=null,qj(n,t),PW(t,n),Ij(RF),Gw=!!QF,RF=QF=null,n.current=t,eK(t),U8(),Gt=a,tn=o,Xs.transition=s}else n.current=t;if(ov&&(ov=!1,EA=n,oB=i),s=n.pendingLanes,s===0&&(ZA=null),M8(t.stateNode),Ni(n,Yn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(sB)throw sB=!1,n=$F,$F=null,n;return oB&1&&n.tag!==0&&Vh(),s=n.pendingLanes,s&1?n===qF?Og++:(Og=0,qF=n):Og=0,gc(),null}function Vh(){if(EA!==null){var n=IO(oB),e=Xs.transition,t=tn;try{if(Xs.transition=null,tn=16>n?16:n,EA===null)var r=!1;else{if(n=EA,EA=null,oB=0,Gt&6)throw Error(Ne(331));var i=Gt;for(Gt|=4,Xe=n.current;Xe!==null;){var s=Xe,o=s.child;if(Xe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var A=a[l];for(Xe=A;Xe!==null;){var c=Xe;switch(c.tag){case 0:case 11:case 15:Vg(8,c,s)}var u=c.child;if(u!==null)u.return=c,Xe=u;else for(;Xe!==null;){c=Xe;var h=c.sibling,d=c.return;if(DW(c),c===A){Xe=null;break}if(h!==null){h.return=d,Xe=h;break}Xe=d}}}var p=s.alternate;if(p!==null){var f=p.child;if(f!==null){p.child=null;do{var m=f.sibling;f.sibling=null,f=m}while(f!==null)}}Xe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Xe=o;else e:for(;Xe!==null;){if(s=Xe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vg(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Xe=g;break e}Xe=s.return}}var v=n.current;for(Xe=v;Xe!==null;){o=Xe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Xe=w;else e:for(o=v;Xe!==null;){if(a=Xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:PC(9,a)}}catch(C){Dn(a,a.return,C)}if(a===o){Xe=null;break e}var B=a.sibling;if(B!==null){B.return=a.return,Xe=B;break e}Xe=a.return}}if(Gt=i,gc(),Ba&&typeof Ba.onPostCommitFiberRoot=="function")try{Ba.onPostCommitFiberRoot(RC,n)}catch{}r=!0}return r}finally{tn=t,Xs.transition=e}}return!1}function xM(n,e,t){e=cf(t,e),e=FW(n,e,1),n=WA(n,e,1),e=vi(),n!==null&&(o0(n,1,e),Ni(n,e))}function Dn(n,e,t){if(n.tag===3)xM(n,n,t);else for(;e!==null;){if(e.tag===3){xM(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ZA===null||!ZA.has(r))){n=cf(t,n),n=_W(e,n,1),e=WA(e,n,1),n=vi(),e!==null&&(o0(e,1,n),Ni(e,n));break}}e=e.return}}function oK(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=vi(),n.pingedLanes|=n.suspendedLanes&t,_r===n&&(Lr&t)===t&&(mr===4||mr===3&&(Lr&130023424)===Lr&&500>Yn()-ZS?ru(n,0):WS|=t),Ni(n,e)}function zW(n,e){e===0&&(n.mode&1?(e=j0,j0<<=1,!(j0&130023424)&&(j0=4194304)):e=1);var t=vi();n=Nl(n,e),n!==null&&(o0(n,e,t),Ni(n,t))}function aK(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),zW(n,t)}function lK(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Ne(314))}r!==null&&r.delete(e),zW(n,t)}var YW;YW=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Mi.current)Qi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Qi=!1,Xj(n,e,t);Qi=!!(n.flags&131072)}else Qi=!1,bn&&e.flags&1048576&&KO(e,Kw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qy(n,e),n=e.pendingProps;var i=of(e,ni.current);Lh(e,t),i=kS(null,e,r,n,i,t);var s=DS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ti(r)?(s=!0,Xw(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,QS(e),i.updater=LC,e.stateNode=i,i._reactInternals=e,OF(e,r,n,t),e=GF(null,e,r,!0,s,t)):(e.tag=0,bn&&s&&xS(e),Ai(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(qy(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=cK(r),n=Fo(r,n),i){case 0:e=ZF(null,e,r,n,t);break e;case 1:e=fM(null,e,r,n,t);break e;case 11:e=dM(null,e,r,n,t);break e;case 14:e=hM(null,e,r,Fo(r.type,n),t);break e}throw Error(Ne(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fo(r,i),ZF(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fo(r,i),fM(n,e,r,i,t);case 3:e:{if(QW(e),n===null)throw Error(Ne(387));r=e.pendingProps,s=e.memoizedState,i=s.element,tW(n,e),eB(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=cf(Error(Ne(423)),e),e=pM(n,e,r,t,i);break e}else if(r!==i){i=cf(Error(Ne(424)),e),e=pM(n,e,r,t,i);break e}else for(os=OA(e.stateNode.containerInfo.firstChild),As=e,bn=!0,So=null,t=sW(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(af(),r===i){e=kl(n,e,t);break e}Ai(n,e,r,t)}e=e.child}return e;case 5:return oW(e),n===null&&LF(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,MF(r,i)?o=null:s!==null&&MF(r,s)&&(e.flags|=32),UW(n,e),Ai(n,e,o,t),e.child;case 6:return n===null&&LF(e),null;case 13:return RW(n,e,t);case 4:return RS(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=lf(e,null,r,t):Ai(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fo(r,i),dM(n,e,r,i,t);case 7:return Ai(n,e,e.pendingProps,t),e.child;case 8:return Ai(n,e,e.pendingProps.children,t),e.child;case 12:return Ai(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,hn($w,r._currentValue),r._currentValue=o,s!==null)if(Do(s.value,o)){if(s.children===i.children&&!Mi.current){e=kl(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Il(-1,t&-t),l.tag=2;var A=s.updateQueue;if(A!==null){A=A.shared;var c=A.pending;c===null?l.next=l:(l.next=c.next,c.next=l),A.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),VF(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ne(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),VF(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ai(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Lh(e,t),i=to(i),r=r(i),e.flags|=1,Ai(n,e,r,t),e.child;case 14:return r=e.type,i=Fo(r,e.pendingProps),i=Fo(r.type,i),hM(n,e,r,i,t);case 15:return EW(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fo(r,i),qy(n,e),e.tag=1,Ti(r)?(n=!0,Xw(e)):n=!1,Lh(e,t),rW(e,r,i),OF(e,r,i,t),GF(null,e,r,!0,n,t);case 19:return MW(n,e,t);case 22:return SW(n,e,t)}throw Error(Ne(156,e.tag))};function XW(n,e){return BO(n,e)}function AK(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zs(n,e,t,r){return new AK(n,e,t,r)}function zS(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cK(n){if(typeof n=="function")return zS(n)?1:0;if(n!=null){if(n=n.$$typeof,n===dS)return 11;if(n===hS)return 14}return 2}function JA(n,e){var t=n.alternate;return t===null?(t=Zs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function nw(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")zS(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case ch:return iu(t.children,i,s,e);case uS:o=8,i|=8;break;case uF:return n=Zs(12,t,e,i|2),n.elementType=uF,n.lanes=s,n;case dF:return n=Zs(13,t,e,i),n.elementType=dF,n.lanes=s,n;case hF:return n=Zs(19,t,e,i),n.elementType=hF,n.lanes=s,n;case iO:return WC(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case nO:o=10;break e;case rO:o=9;break e;case dS:o=11;break e;case hS:o=14;break e;case mA:o=16,r=null;break e}throw Error(Ne(130,n==null?n:typeof n,""))}return e=Zs(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function iu(n,e,t,r){return n=Zs(7,n,r,e),n.lanes=t,n}function WC(n,e,t,r){return n=Zs(22,n,r,e),n.elementType=iO,n.lanes=t,n.stateNode={isHidden:!1},n}function Lx(n,e,t){return n=Zs(6,n,null,e),n.lanes=t,n}function Vx(n,e,t){return e=Zs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function uK(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yx(0),this.expirationTimes=yx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yx(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function YS(n,e,t,r,i,s,o,a,l){return n=new uK(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Zs(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},QS(s),n}function dK(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ah,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function jW(n){if(!n)return nc;n=n._reactInternals;e:{if(Qu(n)!==n||n.tag!==1)throw Error(Ne(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ti(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ne(171))}if(n.tag===1){var t=n.type;if(Ti(t))return XO(n,t,e)}return e}function KW(n,e,t,r,i,s,o,a,l){return n=YS(t,r,!0,n,i,s,o,a,l),n.context=jW(null),t=n.current,r=vi(),i=GA(t),s=Il(r,i),s.callback=e??null,WA(t,s,i),n.current.lanes=i,o0(n,i,r),Ni(n,r),n}function ZC(n,e,t,r){var i=e.current,s=vi(),o=GA(i);return t=jW(t),e.context===null?e.context=t:e.pendingContext=t,e=Il(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=WA(i,e,o),n!==null&&(Mo(n,i,o,s),jy(n,i,o)),o}function lB(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function IM(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function XS(n,e){IM(n,e),(n=n.alternate)&&IM(n,e)}function hK(){return null}var $W=typeof reportError=="function"?reportError:function(n){console.error(n)};function jS(n){this._internalRoot=n}GC.prototype.render=jS.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ne(409));ZC(n,e,null,null)};GC.prototype.unmount=jS.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;vu(function(){ZC(null,n,null,null)}),e[Tl]=null}};function GC(n){this._internalRoot=n}GC.prototype.unstable_scheduleHydration=function(n){if(n){var e=EO();n={blockedOn:null,target:n,priority:e};for(var t=0;t<bA.length&&e!==0&&e<bA[t].priority;t++);bA.splice(t,0,n),t===0&&UO(n)}};function KS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function JC(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function FM(){}function fK(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var A=lB(o);s.call(A)}}var o=KW(e,r,n,0,null,!1,!1,"",FM);return n._reactRootContainer=o,n[Tl]=o.current,hm(n.nodeType===8?n.parentNode:n),vu(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var A=lB(l);a.call(A)}}var l=YS(n,0,!1,null,null,!1,!1,"",FM);return n._reactRootContainer=l,n[Tl]=l.current,hm(n.nodeType===8?n.parentNode:n),vu(function(){ZC(e,l,t,r)}),l}function HC(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=lB(o);a.call(l)}}ZC(e,o,n,i)}else o=fK(t,e,n,i,r);return lB(o)}FO=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=cg(e.pendingLanes);t!==0&&(gS(e,t|1),Ni(e,Yn()),!(Gt&6)&&(uf=Yn()+500,gc()))}break;case 13:vu(function(){var r=Nl(n,1);if(r!==null){var i=vi();Mo(r,n,1,i)}}),XS(n,1)}};mS=function(n){if(n.tag===13){var e=Nl(n,134217728);if(e!==null){var t=vi();Mo(e,n,134217728,t)}XS(n,134217728)}};_O=function(n){if(n.tag===13){var e=GA(n),t=Nl(n,e);if(t!==null){var r=vi();Mo(t,n,e,r)}XS(n,e)}};EO=function(){return tn};SO=function(n,e){var t=tn;try{return tn=n,e()}finally{tn=t}};bF=function(n,e,t){switch(e){case"input":if(gF(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=kC(r);if(!i)throw Error(Ne(90));oO(r),gF(r,i)}}}break;case"textarea":lO(n,t);break;case"select":e=t.value,e!=null&&Th(n,!!t.multiple,e,!1)}};pO=GS;gO=vu;var pK={usingClientEntryPoint:!1,Events:[l0,fh,kC,hO,fO,GS]},Ip={findFiberByHostInstance:Hc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},gK={bundleType:Ip.bundleType,version:Ip.version,rendererPackageName:Ip.rendererPackageName,rendererConfig:Ip.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jl.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=yO(n),n===null?null:n.stateNode},findFiberByHostInstance:Ip.findFiberByHostInstance||hK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var av=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!av.isDisabled&&av.supportsFiber)try{RC=av.inject(gK),Ba=av}catch{}}ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pK;ys.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!KS(e))throw Error(Ne(200));return dK(n,e,null,t)};ys.createRoot=function(n,e){if(!KS(n))throw Error(Ne(299));var t=!1,r="",i=$W;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=YS(n,1,!1,null,null,t,!1,r,i),n[Tl]=e.current,hm(n.nodeType===8?n.parentNode:n),new jS(e)};ys.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ne(188)):(n=Object.keys(n).join(","),Error(Ne(268,n)));return n=yO(e),n=n===null?null:n.stateNode,n};ys.flushSync=function(n){return vu(n)};ys.hydrate=function(n,e,t){if(!JC(e))throw Error(Ne(200));return HC(null,n,e,!0,t)};ys.hydrateRoot=function(n,e,t){if(!KS(n))throw Error(Ne(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=$W;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=KW(e,null,n,1,t??null,i,!1,s,o),n[Tl]=e.current,hm(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new GC(e)};ys.render=function(n,e,t){if(!JC(e))throw Error(Ne(200));return HC(null,n,e,!1,t)};ys.unmountComponentAtNode=function(n){if(!JC(n))throw Error(Ne(40));return n._reactRootContainer?(vu(function(){HC(null,null,n,!1,function(){n._reactRootContainer=null,n[Tl]=null})}),!0):!1};ys.unstable_batchedUpdates=GS;ys.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!JC(t))throw Error(Ne(200));if(n==null||n._reactInternals===void 0)throw Error(Ne(38));return HC(n,e,t,!1,r)};ys.version="18.2.0-next-9e3b772b8-20220608";function qW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qW)}catch(n){console.error(n)}}qW(),KP.exports=ys;var mK=KP.exports,_M=mK;AF.createRoot=_M.createRoot,AF.hydrateRoot=_M.hydrateRoot;const vK="/CharacterStudio/assets/cc_bgm_balanced-f542698c.wav",Bs=Ce.createContext(),yK=({children:n})=>{const[e,t]=Ce.useState(!1),r=X.useRef(null),i=()=>{t(!1);const o=r.current;o.src=vK,o.loop=!0,o.volume=0,o.play();let a=0;const l=5,A=setInterval(()=>{a=Math.max(a+1/(10*l*60),1),a>=1&&clearInterval(A),o.volume=a},1e3/60)},s=()=>{t(!0),r.current.pause()};return L.jsxs(Bs.Provider,{value:{isMute:e,setMute:t,enableAudio:i,disableAudio:s},children:[L.jsx("audio",{ref:r}),n]})},wK=Ce.createContext(),BK=n=>{const[e,t]=Ce.useState(null),[r,i]=Ce.useState(null),[s,o]=Ce.useState(!1),[a,l]=Ce.useState([]);return L.jsx(wK.Provider,{value:{walletAddress:e,setWalletAddress:t,ensName:r,setEnsName:i,connected:s,setConnected:o,OTTokens:a,setOTTokens:l},children:n.children})};function cl(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function eZ(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var cs={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},df={duration:.5,overwrite:!1,delay:0},$S,ei,tr,Gs=1e8,An=1/Gs,n_=Math.PI*2,CK=n_/4,bK=0,tZ=Math.sqrt,xK=Math.cos,IK=Math.sin,Er=function(e){return typeof e=="string"},Vn=function(e){return typeof e=="function"},Dl=function(e){return typeof e=="number"},qS=function(e){return typeof e>"u"},Ua=function(e){return typeof e=="object"},ki=function(e){return e!==!1},nZ=function(){return typeof window<"u"},lv=function(e){return Vn(e)||Er(e)},rZ=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ti=Array.isArray,r_=/(?:-?\.?\d|\.)+/gi,iZ=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Bh=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Px=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,sZ=/[+-]=-?[.\d]+/,oZ=/[^,'"\[\]\s]+/gi,FK=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Sn,Ts,i_,eU,hs={},AB={},aZ,lZ=function(e){return(AB=yu(e,hs))&&fs},tU=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},cB=function(e,t){return!t&&console.warn(e)},AZ=function(e,t){return e&&(hs[e]=t)&&AB&&(AB[e]=t)||hs},Cm=function(){return 0},_K={suppressEvents:!0,isStart:!0,kill:!1},rw={suppressEvents:!0,kill:!1},EK={suppressEvents:!0},nU={},HA=[],s_={},cZ,ts={},Ox={},EM=30,iw=[],rU="",iU=function(e){var t=e[0],r,i;if(Ua(t)||Vn(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=iw.length;i--&&!iw[i].targetTest(t););r=iw[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new RZ(e[i],r)))||e.splice(i,1);return e},su=function(e){return e._gsap||iU(Js(e))[0]._gsap},uZ=function(e,t,r){return(r=e[t])&&Vn(r)?e[t]():qS(r)&&e.getAttribute&&e.getAttribute(t)||r},Di=function(e,t){return(e=e.split(",")).forEach(t)||e},zn=function(e){return Math.round(e*1e5)/1e5||0},Tr=function(e){return Math.round(e*1e7)/1e7||0},Ph=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},SK=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},uB=function(){var e=HA.length,t=HA.slice(0),r,i;for(s_={},HA.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},dZ=function(e,t,r,i){HA.length&&!ei&&uB(),e.render(t,r,i||ei&&t<0&&(e._initted||e._startAt)),HA.length&&!ei&&uB()},hZ=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(oZ).length<2?t:Er(e)?e.trim():e},fZ=function(e){return e},ro=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},UK=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},yu=function(e,t){for(var r in t)e[r]=t[r];return e},SM=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=Ua(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},dB=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},Wg=function(e){var t=e.parent||Sn,r=e.keyframes?UK(ti(e.keyframes)):ro;if(ki(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},QK=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},pZ=function(e,t,r,i,s){r===void 0&&(r="_first"),i===void 0&&(i="_last");var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},zC=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},rc=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},ou=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},RK=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},o_=function(e,t,r,i){return e._startAt&&(ei?e._startAt.revert(rw):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},MK=function n(e){return!e||e._ts&&n(e.parent)},UM=function(e){return e._repeat?hf(e._tTime,e=e.duration()+e._rDelay)*e:0},hf=function(e,t){var r=Math.floor(e/=t);return e&&r===e?r-1:r},hB=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},YC=function(e){return e._end=Tr(e._start+(e._tDur/Math.abs(e._ts||e._rts||An)||0))},XC=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Tr(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),YC(e),r._dirty||ou(r,e)),e},gZ=function(e,t){var r;if((t._time||t._initted&&!t._dur)&&(r=hB(e.rawTime(),t),(!t._dur||c0(0,t.totalDuration(),r)-t._tTime>An)&&t.render(r,!0)),ou(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-An}},Aa=function(e,t,r,i){return t.parent&&rc(t),t._start=Tr((Dl(r)?r:r||e!==Sn?Ms(e,r,t):e._time)+t._delay),t._end=Tr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),pZ(e,t,"_first","_last",e._sort?"_start":0),a_(t)||(e._recent=t),i||gZ(e,t),e._ts<0&&XC(e,e._tTime),e},mZ=function(e,t){return(hs.ScrollTrigger||tU("scrollTrigger",t))&&hs.ScrollTrigger.create(t,e)},vZ=function(e,t,r,i,s){if(oU(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!ei&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&cZ!==ns.frame)return HA.push(e),e._lazy=[s,i],1},TK=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},a_=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},NK=function(e,t,r,i){var s=e.ratio,o=t<0||!t&&(!e._start&&TK(e)&&!(!e._initted&&a_(e))||(e._ts<0||e._dp._ts<0)&&!a_(e))?0:1,a=e._rDelay,l=0,A,c,u;if(a&&e._repeat&&(l=c0(0,e._tDur,t),c=hf(l,a),e._yoyo&&c&1&&(o=1-o),c!==hf(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||ei||i||e._zTime===An||!t&&e._zTime){if(!e._initted&&vZ(e,t,i,r,l))return;for(u=e._zTime,e._zTime=t||(r?An:0),r||(r=t&&!u),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,A=e._pt;A;)A.r(o,A.d),A=A._next;t<0&&o_(e,t,r,!0),e._onUpdate&&!r&&Hs(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&Hs(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&rc(e,1),!r&&!ei&&(Hs(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},kK=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},ff=function(e,t,r,i){var s=e._repeat,o=Tr(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Tr(o*(s+1)+e._rDelay*s):o,a>0&&!i&&XC(e,e._tTime=e._tDur*a),e.parent&&YC(e),r||ou(e.parent,e),e},QM=function(e){return e instanceof Ui?ou(e):ff(e,e._dur)},DK={_start:0,endTime:Cm,totalDuration:Cm},Ms=function n(e,t,r){var i=e.labels,s=e._recent||DK,o=e.duration()>=Gs?s.endTime(!1):e._dur,a,l,A;return Er(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),A=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(A?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),A&&r&&(l=l/100*(ti(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+l:o+l)):t==null?o:+t},Zg=function(e,t,r){var i=Dl(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,l;if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=ki(l.vars.inherit)&&l.parent;o.immediateRender=ki(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new fr(t[0],o,t[s+1])},mc=function(e,t){return e||e===0?t(e):t},c0=function(e,t,r){return r<e?e:r>t?t:r},Kr=function(e,t){return!Er(e)||!(t=FK.exec(e))?"":t[1]},LK=function(e,t,r){return mc(r,function(i){return c0(e,t,i)})},l_=[].slice,yZ=function(e,t){return e&&Ua(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Ua(e[0]))&&!e.nodeType&&e!==Ts},VK=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return Er(i)&&!t||yZ(i,1)?(s=r).push.apply(s,Js(i)):r.push(i)})||r},Js=function(e,t,r){return tr&&!t&&tr.selector?tr.selector(e):Er(e)&&!r&&(i_||!pf())?l_.call((t||eU).querySelectorAll(e),0):ti(e)?VK(e,r):yZ(e)?l_.call(e,0):e?[e]:[]},A_=function(e){return e=Js(e)[0]||cB("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return Js(t,r.querySelectorAll?r:r===e?cB("Invalid scope")||eU.createElement("div"):e)}},wZ=function(e){return e.sort(function(){return .5-Math.random()})},BZ=function(e){if(Vn(e))return e;var t=Ua(e)?e:{each:e},r=au(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,A=t.axis,c=i,u=i;return Er(i)?c=u={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(c=i[0],u=i[1]),function(h,d,p){var f=(p||t).length,m=o[f],g,v,w,B,C,b,F,x,E;if(!m){if(E=t.grid==="auto"?0:(t.grid||[1,Gs])[1],!E){for(F=-Gs;F<(F=p[E++].getBoundingClientRect().left)&&E<f;);E--}for(m=o[f]=[],g=l?Math.min(E,f)*c-.5:i%E,v=E===Gs?0:l?f*u/E-.5:i/E|0,F=0,x=Gs,b=0;b<f;b++)w=b%E-g,B=v-(b/E|0),m[b]=C=A?Math.abs(A==="y"?B:w):tZ(w*w+B*B),C>F&&(F=C),C<x&&(x=C);i==="random"&&wZ(m),m.max=F-x,m.min=x,m.v=f=(parseFloat(t.amount)||parseFloat(t.each)*(E>f?f-1:A?A==="y"?f/E:E:Math.max(E,f/E))||0)*(i==="edges"?-1:1),m.b=f<0?s-f:s,m.u=Kr(t.amount||t.each)||0,r=r&&f<0?SZ(r):r}return f=(m[h]-m.min)/m.max||0,Tr(m.b+(r?r(f):f)*m.v)+m.u}},c_=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=Tr(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(Dl(r)?0:Kr(r))}},CZ=function(e,t){var r=ti(e),i,s;return!r&&Ua(e)&&(i=r=e.radius||Gs,e.values?(e=Js(e.values),(s=!Dl(e[0]))&&(i*=i)):e=c_(e.increment)),mc(t,r?Vn(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),A=Gs,c=0,u=e.length,h,d;u--;)s?(h=e[u].x-a,d=e[u].y-l,h=h*h+d*d):h=Math.abs(e[u]-a),h<A&&(A=h,c=u);return c=!i||A<=i?e[c]:o,s||c===o||Dl(o)?c:c+Kr(o)}:c_(e))},bZ=function(e,t,r,i){return mc(ti(e)?!t:r===!0?!!(r=0):!i,function(){return ti(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},PK=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},OK=function(e,t){return function(r){return e(parseFloat(r))+(t||Kr(r))}},WK=function(e,t,r){return IZ(e,t,0,1,r)},xZ=function(e,t,r){return mc(r,function(i){return e[~~t(i)]})},ZK=function n(e,t,r){var i=t-e;return ti(e)?xZ(e,n(0,e.length),t):mc(r,function(s){return(i+(s-e)%i)%i+e})},GK=function n(e,t,r){var i=t-e,s=i*2;return ti(e)?xZ(e,n(0,e.length-1),t):mc(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},bm=function(e){for(var t=0,r="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?oZ:r_),r+=e.substr(t,i-t)+bZ(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},IZ=function(e,t,r,i,s){var o=t-e,a=i-r;return mc(s,function(l){return r+((l-e)/o*a||0)})},JK=function n(e,t,r,i){var s=isNaN(e+t)?0:function(d){return(1-d)*e+d*t};if(!s){var o=Er(e),a={},l,A,c,u,h;if(r===!0&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(ti(e)&&!ti(t)){for(c=[],u=e.length,h=u-2,A=1;A<u;A++)c.push(n(e[A-1],e[A]));u--,s=function(p){p*=u;var f=Math.min(h,~~p);return c[f](p-f)},r=t}else i||(e=yu(ti(e)?[]:{},e));if(!c){for(l in t)sU.call(a,e,l,"get",t[l]);s=function(p){return AU(p,a)||(o?e.p:e)}}}return mc(r,s)},RM=function(e,t,r){var i=e.labels,s=Gs,o,a,l;for(o in i)a=i[o]-t,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Hs=function(e,t,r){var i=e.vars,s=i[t],o=tr,a=e._ctx,l,A,c;if(s)return l=i[t+"Params"],A=i.callbackScope||e,r&&HA.length&&uB(),a&&(tr=a),c=l?s.apply(A,l):s.call(A),tr=o,c},dg=function(e){return rc(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ei),e.progress()<1&&Hs(e,"onInterrupt"),e},Ch,HK=function(e){e=!e.name&&e.default||e;var t=e.name,r=Vn(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:Cm,render:AU,add:sU,kill:l7,modifier:a7,rawVars:0},o={targetTest:0,get:0,getSetter:lU,aliases:{},register:0};if(pf(),e!==i){if(ts[t])return;ro(i,ro(dB(e,s),o)),yu(i.prototype,yu(s,dB(e,o))),ts[i.prop=t]=i,e.targetTest&&(iw.push(i),nU[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}AZ(t,i),e.register&&e.register(fs,i,Li)},an=255,hg={aqua:[0,an,an],lime:[0,an,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,an],navy:[0,0,128],white:[an,an,an],olive:[128,128,0],yellow:[an,an,0],orange:[an,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[an,0,0],pink:[an,192,203],cyan:[0,an,an],transparent:[an,an,an,0]},Wx=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*an+.5|0},FZ=function(e,t,r){var i=e?Dl(e)?[e>>16,e>>8&an,e&an]:0:hg.black,s,o,a,l,A,c,u,h,d,p;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),hg[e])i=hg[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&an,i&an,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&an,e&an]}else if(e.substr(0,3)==="hsl"){if(i=p=e.match(r_),!t)l=+i[0]%360/360,A=+i[1]/100,c=+i[2]/100,o=c<=.5?c*(A+1):c+A-c*A,s=c*2-o,i.length>3&&(i[3]*=1),i[0]=Wx(l+1/3,s,o),i[1]=Wx(l,s,o),i[2]=Wx(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(iZ),r&&i.length<4&&(i[3]=1),i}else i=e.match(r_)||hg.transparent;i=i.map(Number)}return t&&!p&&(s=i[0]/an,o=i[1]/an,a=i[2]/an,u=Math.max(s,o,a),h=Math.min(s,o,a),c=(u+h)/2,u===h?l=A=0:(d=u-h,A=c>.5?d/(2-u-h):d/(u+h),l=u===s?(o-a)/d+(o<a?6:0):u===o?(a-s)/d+2:(s-o)/d+4,l*=60),i[0]=~~(l+.5),i[1]=~~(A*100+.5),i[2]=~~(c*100+.5)),r&&i.length<4&&(i[3]=1),i},_Z=function(e){var t=[],r=[],i=-1;return e.split(zA).forEach(function(s){var o=s.match(Bh)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},MM=function(e,t,r){var i="",s=(e+i).match(zA),o=t?"hsla(":"rgba(",a=0,l,A,c,u;if(!s)return e;if(s=s.map(function(h){return(h=FZ(h,t,1))&&o+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),r&&(c=_Z(e),l=r.c,l.join(i)!==c.c.join(i)))for(A=e.replace(zA,"1").split(Bh),u=A.length-1;a<u;a++)i+=A[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:r).shift());if(!A)for(A=e.split(zA),u=A.length-1;a<u;a++)i+=A[a]+s[a];return i+A[u]},zA=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in hg)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),zK=/hsl[a]?\(/,EZ=function(e){var t=e.join(" "),r;if(zA.lastIndex=0,zA.test(t))return r=zK.test(t),e[1]=MM(e[1],r),e[0]=MM(e[0],r,_Z(e[1])),!0},xm,ns=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,o=s,a=[],l,A,c,u,h,d,p=function f(m){var g=n()-i,v=m===!0,w,B,C,b;if(g>e&&(r+=g-t),i+=g,C=i-r,w=C-o,(w>0||v)&&(b=++u.frame,h=C-u.time*1e3,u.time=C=C/1e3,o+=w+(w>=s?4:s-w),B=1),v||(l=A(f)),B)for(d=0;d<a.length;d++)a[d](C,h,b,m)};return u={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(m){return h/(1e3/(m||60))},wake:function(){aZ&&(!i_&&nZ()&&(Ts=i_=window,eU=Ts.document||{},hs.gsap=fs,(Ts.gsapVersions||(Ts.gsapVersions=[])).push(fs.version),lZ(AB||Ts.GreenSockGlobals||!Ts.gsap&&Ts||{}),c=Ts.requestAnimationFrame),l&&u.sleep(),A=c||function(m){return setTimeout(m,o-u.time*1e3+1|0)},xm=1,p(2))},sleep:function(){(c?Ts.cancelAnimationFrame:clearTimeout)(l),xm=0,A=Cm},lagSmoothing:function(m,g){e=m||1/0,t=Math.min(g||33,e)},fps:function(m){s=1e3/(m||240),o=u.time*1e3+s},add:function(m,g,v){var w=g?function(B,C,b,F){m(B,C,b,F),u.remove(w)}:m;return u.remove(m),a[v?"unshift":"push"](w),pf(),w},remove:function(m,g){~(g=a.indexOf(m))&&a.splice(g,1)&&d>=g&&d--},_listeners:a},u}(),pf=function(){return!xm&&ns.wake()},Dt={},YK=/^[\d.\-M][\d.\-,\s]/,XK=/["']/g,jK=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,A;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,A=l.substr(0,a),t[i]=isNaN(A)?A.replace(XK,"").trim():+A,i=l.substr(a+1).trim();return t},KK=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},$K=function(e){var t=(e+"").split("("),r=Dt[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[jK(t[1])]:KK(e).split(",").map(hZ)):Dt._CE&&YK.test(e)?Dt._CE("",e):r},SZ=function(e){return function(t){return 1-e(1-t)}},UZ=function n(e,t){for(var r=e._first,i;r;)r instanceof Ui?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},au=function(e,t){return e&&(Vn(e)?e:Dt[e]||$K(e))||t},Ru=function(e,t,r,i){r===void 0&&(r=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},o;return Di(e,function(a){Dt[a]=hs[a]=s,Dt[o=a.toLowerCase()]=r;for(var l in s)Dt[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Dt[a+"."+l]=s[l]}),s},QZ=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Zx=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/n_*(Math.asin(1/i)||0),a=function(c){return c===1?1:i*Math.pow(2,-10*c)*IK((c-o)*s)+1},l=e==="out"?a:e==="in"?function(A){return 1-a(1-A)}:QZ(a);return s=n_/s,l.config=function(A,c){return n(e,A,c)},l},Gx=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:QZ(r);return i.config=function(s){return n(e,s)},i};Di("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Ru(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});Dt.Linear.easeNone=Dt.none=Dt.Linear.easeIn;Ru("Elastic",Zx("in"),Zx("out"),Zx());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(a){return a<t?n*a*a:a<r?n*Math.pow(a-1.5/e,2)+.75:a<i?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Ru("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Ru("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});Ru("Circ",function(n){return-(tZ(1-n*n)-1)});Ru("Sine",function(n){return n===1?1:-xK(n*CK)+1});Ru("Back",Gx("in"),Gx("out"),Gx());Dt.SteppedEase=Dt.steps=hs.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,o=1-An;return function(a){return((i*c0(0,o,a)|0)+s)*r}}};df.ease=Dt["quad.out"];Di("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return rU+=n+","+n+"Params,"});var RZ=function(e,t){this.id=bK++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:uZ,this.set=t?t.getSetter:lU},gf=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ff(this,+t.duration,1,1),this.data=t.data,tr&&(this._ctx=tr,tr.data.push(this)),xm||ns.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,ff(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(pf(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(XC(this,r),!s._dp||s.parent||gZ(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Aa(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===An||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),dZ(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+UM(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+UM(this),i):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?hf(this._tTime,s)+1:1},e.timeScale=function(r){if(!arguments.length)return this._rts===-An?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?hB(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-An?0:this._rts,this.totalTime(c0(-this._delay,this._tDur,i),!0),YC(this),RK(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(pf(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==An&&(this._tTime-=An)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Aa(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(ki(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?hB(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=EK);var i=ei;return ei=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),ei=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(i._ts||1),i=i._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,QM(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,QM(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(Ms(this,r),ki(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,ki(i))},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-An:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-An,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-An)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=Vn(r)?r:fZ,a=function(){var A=i.then;i.then=null,Vn(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=A),s(o),i.then=A};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){dg(this)},n}();ro(gf.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-An,_prom:0,_ps:!1,_rts:1});var Ui=function(n){eZ(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=ki(r.sortChildren),Sn&&Aa(r.parent||Sn,cl(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&mZ(cl(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return Zg(0,arguments,this),this},t.from=function(i,s,o){return Zg(1,arguments,this),this},t.fromTo=function(i,s,o,a){return Zg(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,Wg(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new fr(i,s,Ms(this,o),1),this},t.call=function(i,s,o){return Aa(this,fr.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,A,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=A,o.onCompleteParams=c,o.parent=this,new fr(i,o,Ms(this,l)),this},t.staggerFrom=function(i,s,o,a,l,A,c){return o.runBackwards=1,Wg(o).immediateRender=ki(o.immediateRender),this.staggerTo(i,s,o,a,l,A,c)},t.staggerFromTo=function(i,s,o,a,l,A,c,u){return a.startAt=o,Wg(a).immediateRender=ki(a.immediateRender),this.staggerTo(i,s,a,l,A,c,u)},t.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,A=this._dur,c=i<=0?0:Tr(i),u=this._zTime<0!=i<0&&(this._initted||!A),h,d,p,f,m,g,v,w,B,C,b,F;if(this!==Sn&&c>l&&i>=0&&(c=l),c!==this._tTime||o||u){if(a!==this._time&&A&&(c+=this._time-a,i+=this._time-a),h=c,B=this._start,w=this._ts,g=!w,u&&(A||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(b=this._yoyo,m=A+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(m*100+i,s,o);if(h=Tr(c%m),c===l?(f=this._repeat,h=A):(f=~~(c/m),f&&f===c/m&&(h=A,f--),h>A&&(h=A)),C=hf(this._tTime,m),!a&&this._tTime&&C!==f&&(C=f),b&&f&1&&(h=A-h,F=1),f!==C&&!this._lock){var x=b&&C&1,E=x===(b&&f&1);if(f<C&&(x=!x),a=x?0:A,this._lock=1,this.render(a||(F?0:Tr(f*m)),s,!A)._lock=0,this._tTime=c,!s&&this.parent&&Hs(this,"onRepeat"),this.vars.repeatRefresh&&!F&&(this.invalidate()._lock=1),a&&a!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(A=this._dur,l=this._tDur,E&&(this._lock=2,a=x?A:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!F&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;UZ(this,F)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(v=kK(this,Tr(a),Tr(h)),v&&(c-=h-(h=v._start))),this._tTime=c,this._time=h,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&h&&!s&&(Hs(this,"onStart"),this._tTime!==c))return this;if(h>=a&&i>=0)for(d=this._first;d;){if(p=d._next,(d._act||h>=d._start)&&d._ts&&v!==d){if(d.parent!==this)return this.render(i,s,o);if(d.render(d._ts>0?(h-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(h-d._start)*d._ts,s,o),h!==this._time||!this._ts&&!g){v=0,p&&(c+=this._zTime=-An);break}}d=p}else{d=this._last;for(var M=i<0?i:h;d;){if(p=d._prev,(d._act||M<=d._end)&&d._ts&&v!==d){if(d.parent!==this)return this.render(i,s,o);if(d.render(d._ts>0?(M-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(M-d._start)*d._ts,s,o||ei&&(d._initted||d._startAt)),h!==this._time||!this._ts&&!g){v=0,p&&(c+=this._zTime=M?-An:An);break}}d=p}}if(v&&!s&&(this.pause(),v.render(h>=a?0:-An)._zTime=h>=a?1:-1,this._ts))return this._start=B,YC(this),this.render(i,s,o);this._onUpdate&&!s&&Hs(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(B===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((i||!A)&&(c===l&&this._ts>0||!c&&this._ts<0)&&rc(this,1),!s&&!(i<0&&!a)&&(c||a||!l)&&(Hs(this,c===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(Dl(s)||(s=Ms(this,s,i)),!(i instanceof gf)){if(ti(i))return i.forEach(function(a){return o.add(a,s)}),this;if(Er(i))return this.addLabel(i,s);if(Vn(i))i=fr.delayedCall(0,i);else return this}return this!==i?Aa(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Gs);for(var l=[],A=this._first;A;)A._start>=a&&(A instanceof fr?s&&l.push(A):(o&&l.push(A),i&&l.push.apply(l,A.getChildren(!0,s,o)))),A=A._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return Er(i)?this.removeLabel(i):Vn(i)?this.killTweensOf(i):(zC(this,i),i===this._recent&&(this._recent=this._last),ou(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Tr(ns.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=Ms(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=fr.delayedCall(0,s||Cm,o);return a.data="isPause",this._hasPause=1,Aa(this,a,Ms(this,i))},t.removePause=function(i){var s=this._first;for(i=Ms(this,i);s;)s._start===i&&s.data==="isPause"&&rc(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)SA!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=Js(i),l=this._first,A=Dl(s),c;l;)l instanceof fr?SK(l._targets,a)&&(A?(!SA||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(c=l.getTweensOf(a,s)).length&&o.push.apply(o,c),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=Ms(o,i),l=s,A=l.startAt,c=l.onStart,u=l.onStartParams,h=l.immediateRender,d,p=fr.to(o,ro({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(A&&"time"in A?A.time:o._time))/o.timeScale())||An,onStart:function(){if(o.pause(),!d){var m=s.duration||Math.abs((a-(A&&"time"in A?A.time:o._time))/o.timeScale());p._dur!==m&&ff(p,m,0,1).render(p._time,!0,!0),d=1}c&&c.apply(p,u||[])}},s));return h?p.render(0):p},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,ro({startAt:{time:Ms(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),RM(this,Ms(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),RM(this,Ms(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+An)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,A;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(A in l)l[A]>=o&&(l[A]+=i);return ou(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),ou(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,l=Gs,A,c,u;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(u=o.parent;a;)A=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Aa(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(s-=c,(!u&&!o._dp||u&&u.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=A;ff(o,o===Sn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(Sn._ts&&(dZ(Sn,hB(i,Sn)),cZ=ns.frame),ns.frame>=EM){EM+=cs.autoSleep||120;var s=Sn._first;if((!s||!s._ts)&&cs.autoSleep&&ns._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||ns.sleep()}}},e}(gf);ro(Ui.prototype,{_lock:0,_hasPause:0,_forcing:0});var qK=function(e,t,r,i,s,o,a){var l=new Li(this._pt,e,t,0,1,LZ,null,s),A=0,c=0,u,h,d,p,f,m,g,v;for(l.b=r,l.e=i,r+="",i+="",(g=~i.indexOf("random("))&&(i=bm(i)),o&&(v=[r,i],o(v,e,t),r=v[0],i=v[1]),h=r.match(Px)||[];u=Px.exec(i);)p=u[0],f=i.substring(A,u.index),d?d=(d+1)%5:f.substr(-5)==="rgba("&&(d=1),p!==h[c++]&&(m=parseFloat(h[c-1])||0,l._pt={_next:l._pt,p:f||c===1?f:",",s:m,c:p.charAt(1)==="="?Ph(m,p)-m:parseFloat(p)-m,m:d&&d<4?Math.round:0},A=Px.lastIndex);return l.c=A<i.length?i.substring(A,i.length):"",l.fp=a,(sZ.test(i)||g)&&(l.e=0),this._pt=l,l},sU=function(e,t,r,i,s,o,a,l,A,c){Vn(i)&&(i=i(s||0,e,o));var u=e[t],h=r!=="get"?r:Vn(u)?A?e[t.indexOf("set")||!Vn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](A):e[t]():u,d=Vn(u)?A?i7:kZ:aU,p;if(Er(i)&&(~i.indexOf("random(")&&(i=bm(i)),i.charAt(1)==="="&&(p=Ph(h,i)+(Kr(h)||0),(p||p===0)&&(i=p))),!c||h!==i||u_)return!isNaN(h*i)&&i!==""?(p=new Li(this._pt,e,t,+h||0,i-(h||0),typeof u=="boolean"?o7:DZ,0,d),A&&(p.fp=A),a&&p.modifier(a,this,e),this._pt=p):(!u&&!(t in e)&&tU(t,i),qK.call(this,e,t,h,i,d,l||cs.stringFilter,A))},e7=function(e,t,r,i,s){if(Vn(e)&&(e=Gg(e,s,t,r,i)),!Ua(e)||e.style&&e.nodeType||ti(e)||rZ(e))return Er(e)?Gg(e,s,t,r,i):e;var o={},a;for(a in e)o[a]=Gg(e[a],s,t,r,i);return o},MZ=function(e,t,r,i,s,o){var a,l,A,c;if(ts[e]&&(a=new ts[e]).init(s,a.rawVars?t[e]:e7(t[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new Li(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==Ch))for(A=r._ptLookup[r._targets.indexOf(s)],c=a._props.length;c--;)A[a._props[c]]=l;return a},SA,u_,oU=function n(e,t,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,A=i.onUpdate,c=i.onUpdateParams,u=i.callbackScope,h=i.runBackwards,d=i.yoyoEase,p=i.keyframes,f=i.autoRevert,m=e._dur,g=e._startAt,v=e._targets,w=e.parent,B=w&&w.data==="nested"?w.vars.targets:v,C=e._overwrite==="auto"&&!$S,b=e.timeline,F,x,E,M,H,O,U,y,I,R,D,k,V;if(b&&(!p||!s)&&(s="none"),e._ease=au(s,df.ease),e._yEase=d?SZ(au(d===!0?s:d,df.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!b&&!!i.runBackwards,!b||p&&!i.stagger){if(y=v[0]?su(v[0]).harness:0,k=y&&i[y.prop],F=dB(i,nU),g&&(g._zTime<0&&g.progress(1),t<0&&h&&a&&!f?g.render(-1,!0):g.revert(h&&m?rw:_K),g._lazy=0),o){if(rc(e._startAt=fr.set(v,ro({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!g&&ki(l),startAt:null,delay:0,onUpdate:A,onUpdateParams:c,callbackScope:u,stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ei||!a&&!f)&&e._startAt.revert(rw),a&&m&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(h&&m&&!g){if(t&&(a=!1),E=ro({overwrite:!1,data:"isFromStart",lazy:a&&!g&&ki(l),immediateRender:a,stagger:0,parent:w},F),k&&(E[y.prop]=k),rc(e._startAt=fr.set(v,E)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ei?e._startAt.revert(rw):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,An,An);else if(!t)return}for(e._pt=e._ptCache=0,l=m&&ki(l)||l&&!m,x=0;x<v.length;x++){if(H=v[x],U=H._gsap||iU(v)[x]._gsap,e._ptLookup[x]=R={},s_[U.id]&&HA.length&&uB(),D=B===v?x:B.indexOf(H),y&&(I=new y).init(H,k||F,e,D,B)!==!1&&(e._pt=M=new Li(e._pt,H,I.name,0,1,I.render,I,0,I.priority),I._props.forEach(function(Z){R[Z]=M}),I.priority&&(O=1)),!y||k)for(E in F)ts[E]&&(I=MZ(E,F,e,D,H,B))?I.priority&&(O=1):R[E]=M=sU.call(e,H,E,"get",F[E],D,B,0,i.stringFilter);e._op&&e._op[x]&&e.kill(H,e._op[x]),C&&e._pt&&(SA=e,Sn.killTweensOf(H,R,e.globalTime(t)),V=!e.parent,SA=0),e._pt&&l&&(s_[U.id]=1)}O&&VZ(e),e._onInit&&e._onInit(e)}e._onUpdate=A,e._initted=(!e._op||e._pt)&&!V,p&&t<=0&&b.render(Gs,!0,!0)},t7=function(e,t,r,i,s,o,a){var l=(e._pt&&e._ptCache||(e._ptCache={}))[t],A,c,u,h;if(!l)for(l=e._ptCache[t]=[],u=e._ptLookup,h=e._targets.length;h--;){if(A=u[h][t],A&&A.d&&A.d._pt)for(A=A.d._pt;A&&A.p!==t&&A.fp!==t;)A=A._next;if(!A)return u_=1,e.vars[t]="+=0",oU(e,a),u_=0,1;l.push(A)}for(h=l.length;h--;)c=l[h],A=c._pt||c,A.s=(i||i===0)&&!s?i:A.s+(i||0)+o*A.c,A.c=r-A.s,c.e&&(c.e=zn(r)+Kr(c.e)),c.b&&(c.b=A.s+Kr(c.b))},n7=function(e,t){var r=e[0]?su(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return t;s=yu({},t);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},r7=function(e,t,r,i){var s=t.ease||i||"power1.inOut",o,a;if(ti(t))a=r[e]||(r[e]=[]),t.forEach(function(l,A){return a.push({t:A/(t.length-1)*100,v:l,e:s})});else for(o in t)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Gg=function(e,t,r,i,s){return Vn(e)?e.call(t,r,i,s):Er(e)&&~e.indexOf("random(")?bm(e):e},TZ=rU+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",NZ={};Di(TZ+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return NZ[n]=1});var fr=function(n){eZ(e,n);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=n.call(this,o?i:Wg(i))||this;var l=a.vars,A=l.duration,c=l.delay,u=l.immediateRender,h=l.stagger,d=l.overwrite,p=l.keyframes,f=l.defaults,m=l.scrollTrigger,g=l.yoyoEase,v=i.parent||Sn,w=(ti(r)||rZ(r)?Dl(r[0]):"length"in i)?[r]:Js(r),B,C,b,F,x,E,M,H;if(a._targets=w.length?iU(w):cB("GSAP target "+r+" not found. https://greensock.com",!cs.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=d,p||h||lv(A)||lv(c)){if(i=a.vars,B=a.timeline=new Ui({data:"nested",defaults:f||{},targets:v&&v.data==="nested"?v.vars.targets:w}),B.kill(),B.parent=B._dp=cl(a),B._start=0,h||lv(A)||lv(c)){if(F=w.length,M=h&&BZ(h),Ua(h))for(x in h)~TZ.indexOf(x)&&(H||(H={}),H[x]=h[x]);for(C=0;C<F;C++)b=dB(i,NZ),b.stagger=0,g&&(b.yoyoEase=g),H&&yu(b,H),E=w[C],b.duration=+Gg(A,cl(a),C,E,w),b.delay=(+Gg(c,cl(a),C,E,w)||0)-a._delay,!h&&F===1&&b.delay&&(a._delay=c=b.delay,a._start+=c,b.delay=0),B.to(E,b,M?M(C,E,w):0),B._ease=Dt.none;B.duration()?A=c=0:a.timeline=0}else if(p){Wg(ro(B.vars.defaults,{ease:"none"})),B._ease=au(p.ease||i.ease||"none");var O=0,U,y,I;if(ti(p))p.forEach(function(R){return B.to(w,R,">")}),B.duration();else{b={};for(x in p)x==="ease"||x==="easeEach"||r7(x,p[x],b,p.easeEach);for(x in b)for(U=b[x].sort(function(R,D){return R.t-D.t}),O=0,C=0;C<U.length;C++)y=U[C],I={ease:y.e,duration:(y.t-(C?U[C-1].t:0))/100*A},I[x]=y.v,B.to(w,I,O),O+=I.duration;B.duration()<A&&B.to({},{duration:A-B.duration()})}}A||a.duration(A=B.duration())}else a.timeline=0;return d===!0&&!$S&&(SA=cl(a),Sn.killTweensOf(w),SA=0),Aa(v,cl(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(u||!A&&!p&&a._start===Tr(v._time)&&ki(u)&&MK(cl(a))&&v.data!=="nested")&&(a._tTime=-An,a.render(Math.max(0,-c)||0)),m&&mZ(cl(a),m),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,l=this._tDur,A=this._dur,c=i<0,u=i>l-An&&!c?l:i<An?0:i,h,d,p,f,m,g,v,w,B;if(!A)NK(this,i,s,o);else if(u!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(h=u,w=this.timeline,this._repeat){if(f=A+this._rDelay,this._repeat<-1&&c)return this.totalTime(f*100+i,s,o);if(h=Tr(u%f),u===l?(p=this._repeat,h=A):(p=~~(u/f),p&&p===u/f&&(h=A,p--),h>A&&(h=A)),g=this._yoyo&&p&1,g&&(B=this._yEase,h=A-h),m=hf(this._tTime,f),h===a&&!o&&this._initted)return this._tTime=u,this;p!==m&&(w&&this._yEase&&UZ(w,g),this.vars.repeatRefresh&&!g&&!this._lock&&(this._lock=o=1,this.render(Tr(f*p),!0).invalidate()._lock=0))}if(!this._initted){if(vZ(this,c?i:h,o,s,u))return this._tTime=0,this;if(a!==this._time)return this;if(A!==this._dur)return this.render(i,s,o)}if(this._tTime=u,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=v=(B||this._ease)(h/A),this._from&&(this.ratio=v=1-v),h&&!a&&!s&&(Hs(this,"onStart"),this._tTime!==u))return this;for(d=this._pt;d;)d.r(v,d.d),d=d._next;w&&w.render(i<0?i:!h&&g?-An:w._dur*w._ease(h/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(c&&o_(this,i,s,o),Hs(this,"onUpdate")),this._repeat&&p!==m&&this.vars.onRepeat&&!s&&this.parent&&Hs(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(c&&!this._onUpdate&&o_(this,i,!0,!0),(i||!A)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&rc(this,1),!s&&!(c&&!a)&&(u||a||g)&&(Hs(this,u===l?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a){xm||ns.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),A;return this._initted||oU(this,l),A=this._ease(l/this._dur),t7(this,i,s,o,a,A,l)?this.resetTo(i,s,o,a):(XC(this,0),this.parent||pZ(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?dg(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,SA&&SA.vars.overwrite!==!0)._first||dg(this),this.parent&&o!==this.timeline.totalDuration()&&ff(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?Js(i):a,A=this._ptLookup,c=this._pt,u,h,d,p,f,m,g;if((!s||s==="all")&&QK(a,l))return s==="all"&&(this._pt=0),dg(this);for(u=this._op=this._op||[],s!=="all"&&(Er(s)&&(f={},Di(s,function(v){return f[v]=1}),s=f),s=n7(a,s)),g=a.length;g--;)if(~l.indexOf(a[g])){h=A[g],s==="all"?(u[g]=s,p=h,d={}):(d=u[g]=u[g]||{},p=s);for(f in p)m=h&&h[f],m&&((!("kill"in m.d)||m.d.kill(f)===!0)&&zC(this,m,"_pt"),delete h[f]),d!=="all"&&(d[f]=1)}return this._initted&&!this._pt&&c&&dg(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Zg(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return Zg(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return Sn.killTweensOf(i,s,o)},e}(gf);ro(fr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Di("staggerTo,staggerFrom,staggerFromTo",function(n){fr[n]=function(){var e=new Ui,t=l_.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var aU=function(e,t,r){return e[t]=r},kZ=function(e,t,r){return e[t](r)},i7=function(e,t,r,i){return e[t](i.fp,r)},s7=function(e,t,r){return e.setAttribute(t,r)},lU=function(e,t){return Vn(e[t])?kZ:qS(e[t])&&e.setAttribute?s7:aU},DZ=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},o7=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},LZ=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},AU=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},a7=function(e,t,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},l7=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?zC(this,t,"_pt"):t.dep||(r=1),t=i;return!r},A7=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},VZ=function(e){for(var t=e._pt,r,i,s,o;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},Li=function(){function n(t,r,i,s,o,a,l,A,c){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||DZ,this.d=l||this,this.set=A||aU,this.pr=c||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=A7,this.m=r,this.mt=s,this.tween=i},n}();Di(rU+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return nU[n]=1});hs.TweenMax=hs.TweenLite=fr;hs.TimelineLite=hs.TimelineMax=Ui;Sn=new Ui({sortChildren:!1,defaults:df,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});cs.stringFilter=EZ;var mf=[],sw={},c7=[],TM=0,Jx=function(e){return(sw[e]||c7).map(function(t){return t()})},d_=function(){var e=Date.now(),t=[];e-TM>2&&(Jx("matchMediaInit"),mf.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,A;for(a in i)o=Ts.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,A=1);A&&(r.revert(),l&&t.push(r))}),Jx("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r)}),TM=e,Jx("matchMedia"))},PZ=function(){function n(t,r){this.selector=r&&A_(r),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){Vn(r)&&(s=i,i=r,r=Vn);var o=this,a=function(){var A=tr,c=o.selector,u;return A&&A!==o&&A.data.push(o),s&&(o.selector=A_(s)),tr=o,u=i.apply(o,arguments),Vn(u)&&o._r.push(u),tr=A,o.selector=c,o.isReverted=!1,u};return o.last=a,r===Vn?a(o):r?o[r]=a:a},e.ignore=function(r){var i=tr;tr=null,r(this),tr=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof fr&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r){var o=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(A){return o.splice(o.indexOf(A),1)}))}),o.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,A){return A.g-l.g||-1}).forEach(function(l){return l.t.revert(r)}),this.data.forEach(function(l){return!(l instanceof gf)&&l.revert&&l.revert(r)}),this._r.forEach(function(l){return l(r,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),i){var a=mf.indexOf(this);~a&&mf.splice(a,1)}},e.revert=function(r){this.kill(r||{})},n}(),u7=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(r,i,s){Ua(r)||(r={matches:r});var o=new PZ(0,s||this.scope),a=o.conditions={},l,A,c;this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(A in r)A==="all"?c=1:(l=Ts.matchMedia(r[A]),l&&(mf.indexOf(o)<0&&mf.push(o),(a[A]=l.matches)&&(c=1),l.addListener?l.addListener(d_):l.addEventListener("change",d_)));return c&&i(o),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),fB={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return HK(i)})},timeline:function(e){return new Ui(e)},getTweensOf:function(e,t){return Sn.getTweensOf(e,t)},getProperty:function(e,t,r,i){Er(e)&&(e=Js(e)[0]);var s=su(e||{}).get,o=r?fZ:hZ;return r==="native"&&(r=""),e&&(t?o((ts[t]&&ts[t].get||s)(e,t,r,i)):function(a,l,A){return o((ts[a]&&ts[a].get||s)(e,a,l,A))})},quickSetter:function(e,t,r){if(e=Js(e),e.length>1){var i=e.map(function(c){return fs.quickSetter(c,t,r)}),s=i.length;return function(c){for(var u=s;u--;)i[u](c)}}e=e[0]||{};var o=ts[t],a=su(e),l=a.harness&&(a.harness.aliases||{})[t]||t,A=o?function(c){var u=new o;Ch._pt=0,u.init(e,r?c+r:c,Ch,0,[e]),u.render(1,u),Ch._pt&&AU(1,Ch)}:a.set(e,l);return o?A:function(c){return A(e,l,r?c+r:c,a,1)}},quickTo:function(e,t,r){var i,s=fs.to(e,yu((i={},i[t]="+=0.1",i.paused=!0,i),r||{})),o=function(l,A,c){return s.resetTo(t,l,A,c)};return o.tween=s,o},isTweening:function(e){return Sn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=au(e.ease,df.ease)),SM(df,e||{})},config:function(e){return SM(cs,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!ts[a]&&!hs[a]&&cB(t+" effect requires "+a+" plugin.")}),Ox[t]=function(a,l,A){return r(Js(a),ro(l||{},s),A)},o&&(Ui.prototype[t]=function(a,l,A){return this.add(Ox[t](a,Ua(l)?l:(A=l)&&{},this),A)})},registerEase:function(e,t){Dt[e]=au(t)},parseEase:function(e,t){return arguments.length?au(e,t):Dt},getById:function(e){return Sn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new Ui(e),i,s;for(r.smoothChildTiming=ki(e.smoothChildTiming),Sn.remove(r),r._dp=0,r._time=r._tTime=Sn._time,i=Sn._first;i;)s=i._next,(t||!(!i._dur&&i instanceof fr&&i.vars.onComplete===i._targets[0]))&&Aa(r,i,i._start-i._delay),i=s;return Aa(Sn,r,0),r},context:function(e,t){return e?new PZ(e,t):tr},matchMedia:function(e){return new u7(e)},matchMediaRefresh:function(){return mf.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||d_()},addEventListener:function(e,t){var r=sw[e]||(sw[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=sw[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:ZK,wrapYoyo:GK,distribute:BZ,random:bZ,snap:CZ,normalize:WK,getUnit:Kr,clamp:LK,splitColor:FZ,toArray:Js,selector:A_,mapRange:IZ,pipe:PK,unitize:OK,interpolate:JK,shuffle:wZ},install:lZ,effects:Ox,ticker:ns,updateRoot:Ui.updateRoot,plugins:ts,globalTimeline:Sn,core:{PropTween:Li,globals:AZ,Tween:fr,Timeline:Ui,Animation:gf,getCache:su,_removeLinkedListItem:zC,reverting:function(){return ei},context:function(e){return e&&tr&&(tr.data.push(e),e._ctx=tr),tr},suppressOverwrites:function(e){return $S=e}}};Di("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return fB[n]=fr[n]});ns.add(Ui.updateRoot);Ch=fB.to({},{duration:0});var d7=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},h7=function(e,t){var r=e._targets,i,s,o;for(i in t)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=d7(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))},Hx=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,A;if(Er(s)&&(l={},Di(s,function(c){return l[c]=1}),s=l),t){l={};for(A in s)l[A]=t(s[A]);s=l}h7(a,s)}}}},fs=fB.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,l;this.tween=r;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)ei?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},Hx("roundProps",c_),Hx("modifiers"),Hx("snap",CZ))||fB;fr.version=Ui.version=fs.version="3.11.4";aZ=1;nZ()&&pf();Dt.Power0;Dt.Power1;Dt.Power2;Dt.Power3;Dt.Power4;Dt.Linear;Dt.Quad;Dt.Cubic;Dt.Quart;Dt.Quint;Dt.Strong;Dt.Elastic;Dt.Back;Dt.SteppedEase;Dt.Bounce;Dt.Sine;Dt.Expo;Dt.Circ;/*!
 * CSSPlugin 3.11.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var NM,UA,Oh,cU,Xc,kM,uU,f7=function(){return typeof window<"u"},Ll={},Lc=180/Math.PI,Wh=Math.PI/180,Ku=Math.atan2,DM=1e8,dU=/([A-Z])/g,p7=/(left|right|width|margin|padding|x)/i,g7=/[\s,\(]\S/,Bl={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},h_=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},m7=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},v7=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},y7=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},OZ=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},WZ=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},w7=function(e,t,r){return e.style[t]=r},B7=function(e,t,r){return e.style.setProperty(t,r)},C7=function(e,t,r){return e._gsap[t]=r},b7=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},x7=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},I7=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},Un="transform",To=Un+"Origin",F7=function(e,t){var r=this,i=this.target,s=i.style;if(e in Ll){if(this.tfm=this.tfm||{},e!=="transform"&&(e=Bl[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return r.tfm[o]=pl(i,o)}):this.tfm[e]=i._gsap.x?i._gsap[e]:pl(i,e)),this.props.indexOf(Un)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(To,t,"")),e=Un}(s||t)&&this.props.push(e,t,s[e])},ZZ=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},_7=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].replace(dU,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=uU(),s&&!s.isStart&&!r[Un]&&(ZZ(r),i.uncache=1)}},GZ=function(e,t){var r={target:e,props:[],revert:_7,save:F7};return t&&t.split(",").forEach(function(i){return r.save(i)}),r},JZ,f_=function(e,t){var r=UA.createElementNS?UA.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):UA.createElement(e);return r.style?r:UA.createElement(e)},ba=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(dU,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,vf(t)||t,1)||""},LM="O,Moz,ms,Ms,Webkit".split(","),vf=function(e,t,r){var i=t||Xc,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(LM[o]+e in s););return o<0?null:(o===3?"ms":o>=0?LM[o]:"")+e},p_=function(){f7()&&window.document&&(NM=window,UA=NM.document,Oh=UA.documentElement,Xc=f_("div")||{style:{}},f_("div"),Un=vf(Un),To=Un+"Origin",Xc.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",JZ=!!vf("perspective"),uU=fs.core.reverting,cU=1)},zx=function n(e){var t=f_("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if(Oh.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),Oh.removeChild(t),this.style.cssText=s,o},VM=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},HZ=function(e){var t;try{t=e.getBBox()}catch{t=zx.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===zx||(t=zx.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+VM(e,["x","cx","x1"])||0,y:+VM(e,["y","cy","y1"])||0,width:0,height:0}:t},zZ=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&HZ(e))},Im=function(e,t){if(t){var r=e.style;t in Ll&&t!==To&&(t=Un),r.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(t.replace(dU,"-$1").toLowerCase())):r.removeAttribute(t)}},QA=function(e,t,r,i,s,o){var a=new Li(e._pt,t,r,0,1,o?WZ:OZ);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},PM={deg:1,rad:1,turn:1},E7={grid:1,flex:1},ic=function n(e,t,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=Xc.style,l=p7.test(t),A=e.tagName.toLowerCase()==="svg",c=(A?"client":"offset")+(l?"Width":"Height"),u=100,h=i==="px",d=i==="%",p,f,m,g;return i===o||!s||PM[i]||PM[o]?s:(o!=="px"&&!h&&(s=n(e,t,r,"px")),g=e.getCTM&&zZ(e),(d||o==="%")&&(Ll[t]||~t.indexOf("adius"))?(p=g?e.getBBox()[l?"width":"height"]:e[c],zn(d?s/p*u:s/100*p)):(a[l?"width":"height"]=u+(h?o:i),f=~t.indexOf("adius")||i==="em"&&e.appendChild&&!A?e:e.parentNode,g&&(f=(e.ownerSVGElement||{}).parentNode),(!f||f===UA||!f.appendChild)&&(f=UA.body),m=f._gsap,m&&d&&m.width&&l&&m.time===ns.time&&!m.uncache?zn(s/m.width*u):((d||o==="%")&&!E7[ba(f,"display")]&&(a.position=ba(e,"position")),f===e&&(a.position="static"),f.appendChild(Xc),p=Xc[c],f.removeChild(Xc),a.position="absolute",l&&d&&(m=su(f),m.time=ns.time,m.width=f[c]),zn(h?p*s/u:p&&s?u/p*s:0))))},pl=function(e,t,r,i){var s;return cU||p_(),t in Bl&&t!=="transform"&&(t=Bl[t],~t.indexOf(",")&&(t=t.split(",")[0])),Ll[t]&&t!=="transform"?(s=_m(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:gB(ba(e,To))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=pB[t]&&pB[t](e,t,r)||ba(e,t)||uZ(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?ic(e,t,s,r)+r:s},S7=function(e,t,r,i){if(!r||r==="none"){var s=vf(t,e,1),o=s&&ba(e,s,1);o&&o!==r?(t=s,r=o):t==="borderColor"&&(r=ba(e,"borderTopColor"))}var a=new Li(this._pt,e.style,t,0,1,LZ),l=0,A=0,c,u,h,d,p,f,m,g,v,w,B,C;if(a.b=r,a.e=i,r+="",i+="",i==="auto"&&(e.style[t]=i,i=ba(e,t)||i,e.style[t]=r),c=[r,i],EZ(c),r=c[0],i=c[1],h=r.match(Bh)||[],C=i.match(Bh)||[],C.length){for(;u=Bh.exec(i);)m=u[0],v=i.substring(l,u.index),p?p=(p+1)%5:(v.substr(-5)==="rgba("||v.substr(-5)==="hsla(")&&(p=1),m!==(f=h[A++]||"")&&(d=parseFloat(f)||0,B=f.substr((d+"").length),m.charAt(1)==="="&&(m=Ph(d,m)+B),g=parseFloat(m),w=m.substr((g+"").length),l=Bh.lastIndex-w.length,w||(w=w||cs.units[t]||B,l===i.length&&(i+=w,a.e+=w)),B!==w&&(d=ic(e,t,f,w)||0),a._pt={_next:a._pt,p:v||A===1?v:",",s:d,c:g-d,m:p&&p<4||t==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=t==="display"&&i==="none"?WZ:OZ;return sZ.test(i)&&(a.e=0),this._pt=a,a},OM={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},U7=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=OM[r]||r,t[1]=OM[i]||i,t.join(" ")},Q7=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,o=r._gsap,a,l,A;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),A=s.length;--A>-1;)a=s[A],Ll[a]&&(l=1,a=a==="transformOrigin"?To:Un),Im(r,a);l&&(Im(r,Un),o&&(o.svg&&r.removeAttribute("transform"),_m(r,1),o.uncache=1,ZZ(i)))}},pB={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new Li(e._pt,t,r,0,0,Q7);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},Fm=[1,0,0,1,0,0],YZ={},XZ=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},WM=function(e){var t=ba(e,Un);return XZ(t)?Fm:t.substr(7).match(iZ).map(zn)},hU=function(e,t){var r=e._gsap||su(e),i=e.style,s=WM(e),o,a,l,A;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Fm:s):(s===Fm&&!e.offsetParent&&e!==Oh&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(A=1,a=e.nextElementSibling,Oh.appendChild(e)),s=WM(e),l?i.display=l:Im(e,"display"),A&&(a?o.insertBefore(e,a):o?o.appendChild(e):Oh.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},g_=function(e,t,r,i,s,o){var a=e._gsap,l=s||hU(e,!0),A=a.xOrigin||0,c=a.yOrigin||0,u=a.xOffset||0,h=a.yOffset||0,d=l[0],p=l[1],f=l[2],m=l[3],g=l[4],v=l[5],w=t.split(" "),B=parseFloat(w[0])||0,C=parseFloat(w[1])||0,b,F,x,E;r?l!==Fm&&(F=d*m-p*f)&&(x=B*(m/F)+C*(-f/F)+(f*v-m*g)/F,E=B*(-p/F)+C*(d/F)-(d*v-p*g)/F,B=x,C=E):(b=HZ(e),B=b.x+(~w[0].indexOf("%")?B/100*b.width:B),C=b.y+(~(w[1]||w[0]).indexOf("%")?C/100*b.height:C)),i||i!==!1&&a.smooth?(g=B-A,v=C-c,a.xOffset=u+(g*d+v*f)-g,a.yOffset=h+(g*p+v*m)-v):a.xOffset=a.yOffset=0,a.xOrigin=B,a.yOrigin=C,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[To]="0px 0px",o&&(QA(o,a,"xOrigin",A,B),QA(o,a,"yOrigin",c,C),QA(o,a,"xOffset",u,a.xOffset),QA(o,a,"yOffset",h,a.yOffset)),e.setAttribute("data-svg-origin",B+" "+C)},_m=function(e,t){var r=e._gsap||new RZ(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),A=ba(e,To)||"0",c,u,h,d,p,f,m,g,v,w,B,C,b,F,x,E,M,H,O,U,y,I,R,D,k,V,Z,N,_,z,ie,T;return c=u=h=f=m=g=v=w=B=0,d=p=1,r.svg=!!(e.getCTM&&zZ(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[Un]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Un]!=="none"?l[Un]:"")),i.scale=i.rotate=i.translate="none"),F=hU(e,r.svg),r.svg&&(r.uncache?(k=e.getBBox(),A=r.xOrigin-k.x+"px "+(r.yOrigin-k.y)+"px",D=""):D=!t&&e.getAttribute("data-svg-origin"),g_(e,D||A,!!D||r.originIsAbsolute,r.smooth!==!1,F)),C=r.xOrigin||0,b=r.yOrigin||0,F!==Fm&&(H=F[0],O=F[1],U=F[2],y=F[3],c=I=F[4],u=R=F[5],F.length===6?(d=Math.sqrt(H*H+O*O),p=Math.sqrt(y*y+U*U),f=H||O?Ku(O,H)*Lc:0,v=U||y?Ku(U,y)*Lc+f:0,v&&(p*=Math.abs(Math.cos(v*Wh))),r.svg&&(c-=C-(C*H+b*U),u-=b-(C*O+b*y))):(T=F[6],z=F[7],Z=F[8],N=F[9],_=F[10],ie=F[11],c=F[12],u=F[13],h=F[14],x=Ku(T,_),m=x*Lc,x&&(E=Math.cos(-x),M=Math.sin(-x),D=I*E+Z*M,k=R*E+N*M,V=T*E+_*M,Z=I*-M+Z*E,N=R*-M+N*E,_=T*-M+_*E,ie=z*-M+ie*E,I=D,R=k,T=V),x=Ku(-U,_),g=x*Lc,x&&(E=Math.cos(-x),M=Math.sin(-x),D=H*E-Z*M,k=O*E-N*M,V=U*E-_*M,ie=y*M+ie*E,H=D,O=k,U=V),x=Ku(O,H),f=x*Lc,x&&(E=Math.cos(x),M=Math.sin(x),D=H*E+O*M,k=I*E+R*M,O=O*E-H*M,R=R*E-I*M,H=D,I=k),m&&Math.abs(m)+Math.abs(f)>359.9&&(m=f=0,g=180-g),d=zn(Math.sqrt(H*H+O*O+U*U)),p=zn(Math.sqrt(R*R+T*T)),x=Ku(I,R),v=Math.abs(x)>2e-4?x*Lc:0,B=ie?1/(ie<0?-ie:ie):0),r.svg&&(D=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!XZ(ba(e,Un)),D&&e.setAttribute("transform",D))),Math.abs(v)>90&&Math.abs(v)<270&&(s?(d*=-1,v+=f<=0?180:-180,f+=f<=0?180:-180):(p*=-1,v+=v<=0?180:-180)),t=t||r.uncache,r.x=c-((r.xPercent=c&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=u-((r.yPercent=u&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-u)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=h+o,r.scaleX=zn(d),r.scaleY=zn(p),r.rotation=zn(f)+a,r.rotationX=zn(m)+a,r.rotationY=zn(g)+a,r.skewX=v+a,r.skewY=w+a,r.transformPerspective=B+o,(r.zOrigin=parseFloat(A.split(" ")[2])||0)&&(i[To]=gB(A)),r.xOffset=r.yOffset=0,r.force3D=cs.force3D,r.renderTransform=r.svg?M7:JZ?jZ:R7,r.uncache=0,r},gB=function(e){return(e=e.split(" "))[0]+" "+e[1]},Yx=function(e,t,r){var i=Kr(t);return zn(parseFloat(t)+parseFloat(ic(e,"x",r+"px",i)))+i},R7=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,jZ(e,t)},xc="0deg",Fp="0px",Ic=") ",jZ=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,A=r.rotation,c=r.rotationY,u=r.rotationX,h=r.skewX,d=r.skewY,p=r.scaleX,f=r.scaleY,m=r.transformPerspective,g=r.force3D,v=r.target,w=r.zOrigin,B="",C=g==="auto"&&e&&e!==1||g===!0;if(w&&(u!==xc||c!==xc)){var b=parseFloat(c)*Wh,F=Math.sin(b),x=Math.cos(b),E;b=parseFloat(u)*Wh,E=Math.cos(b),o=Yx(v,o,F*E*-w),a=Yx(v,a,-Math.sin(b)*-w),l=Yx(v,l,x*E*-w+w)}m!==Fp&&(B+="perspective("+m+Ic),(i||s)&&(B+="translate("+i+"%, "+s+"%) "),(C||o!==Fp||a!==Fp||l!==Fp)&&(B+=l!==Fp||C?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Ic),A!==xc&&(B+="rotate("+A+Ic),c!==xc&&(B+="rotateY("+c+Ic),u!==xc&&(B+="rotateX("+u+Ic),(h!==xc||d!==xc)&&(B+="skew("+h+", "+d+Ic),(p!==1||f!==1)&&(B+="scale("+p+", "+f+Ic),v.style[Un]=B||"translate(0, 0)"},M7=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,A=r.skewX,c=r.skewY,u=r.scaleX,h=r.scaleY,d=r.target,p=r.xOrigin,f=r.yOrigin,m=r.xOffset,g=r.yOffset,v=r.forceCSS,w=parseFloat(o),B=parseFloat(a),C,b,F,x,E;l=parseFloat(l),A=parseFloat(A),c=parseFloat(c),c&&(c=parseFloat(c),A+=c,l+=c),l||A?(l*=Wh,A*=Wh,C=Math.cos(l)*u,b=Math.sin(l)*u,F=Math.sin(l-A)*-h,x=Math.cos(l-A)*h,A&&(c*=Wh,E=Math.tan(A-c),E=Math.sqrt(1+E*E),F*=E,x*=E,c&&(E=Math.tan(c),E=Math.sqrt(1+E*E),C*=E,b*=E)),C=zn(C),b=zn(b),F=zn(F),x=zn(x)):(C=u,x=h,b=F=0),(w&&!~(o+"").indexOf("px")||B&&!~(a+"").indexOf("px"))&&(w=ic(d,"x",o,"px"),B=ic(d,"y",a,"px")),(p||f||m||g)&&(w=zn(w+p-(p*C+f*F)+m),B=zn(B+f-(p*b+f*x)+g)),(i||s)&&(E=d.getBBox(),w=zn(w+i/100*E.width),B=zn(B+s/100*E.height)),E="matrix("+C+","+b+","+F+","+x+","+w+","+B+")",d.setAttribute("transform",E),v&&(d.style[Un]=E)},T7=function(e,t,r,i,s){var o=360,a=Er(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Lc:1),A=l-i,c=i+A+"deg",u,h;return a&&(u=s.split("_")[1],u==="short"&&(A%=o,A!==A%(o/2)&&(A+=A<0?o:-o)),u==="cw"&&A<0?A=(A+o*DM)%o-~~(A/o)*o:u==="ccw"&&A>0&&(A=(A-o*DM)%o-~~(A/o)*o)),e._pt=h=new Li(e._pt,t,r,i,A,m7),h.e=c,h.u="deg",e._props.push(r),h},ZM=function(e,t){for(var r in t)e[r]=t[r];return e},N7=function(e,t,r){var i=ZM({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,A,c,u,h,d,p;i.svg?(A=r.getAttribute("transform"),r.setAttribute("transform",""),o[Un]=t,a=_m(r,1),Im(r,Un),r.setAttribute("transform",A)):(A=getComputedStyle(r)[Un],o[Un]=t,a=_m(r,1),o[Un]=A);for(l in Ll)A=i[l],c=a[l],A!==c&&s.indexOf(l)<0&&(d=Kr(A),p=Kr(c),u=d!==p?ic(r,l,A,p):parseFloat(A),h=parseFloat(c),e._pt=new Li(e._pt,a,l,u,h-u,h_),e._pt.u=p||0,e._props.push(l));ZM(a,i)};Di("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});pB[e>1?"border"+n:n]=function(a,l,A,c,u){var h,d;if(arguments.length<4)return h=o.map(function(p){return pl(a,p,A)}),d=h.join(" "),d.split(h[0]).length===5?h[0]:d;h=(c+"").split(" "),d={},o.forEach(function(p,f){return d[p]=h[f]=h[f]||h[(f-1)/2|0]}),a.init(l,d,u)}});var KZ={name:"css",register:p_,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,A,c,u,h,d,p,f,m,g,v,w,B,C,b,F,x;cU||p_(),this.styles=this.styles||GZ(e),x=this.styles.props,this.tween=r;for(f in t)if(f!=="autoRound"&&(c=t[f],!(ts[f]&&MZ(f,t,r,i,e,s)))){if(d=typeof c,p=pB[f],d==="function"&&(c=c.call(r,i,e,s),d=typeof c),d==="string"&&~c.indexOf("random(")&&(c=bm(c)),p)p(this,e,f,c,r)&&(F=1);else if(f.substr(0,2)==="--")A=(getComputedStyle(e).getPropertyValue(f)+"").trim(),c+="",zA.lastIndex=0,zA.test(A)||(m=Kr(A),g=Kr(c)),g?m!==g&&(A=ic(e,f,A,g)+g):m&&(c+=m),this.add(a,"setProperty",A,c,i,s,0,0,f),o.push(f),x.push(f,0,a[f]);else if(d!=="undefined"){if(l&&f in l?(A=typeof l[f]=="function"?l[f].call(r,i,e,s):l[f],Er(A)&&~A.indexOf("random(")&&(A=bm(A)),Kr(A+"")||(A+=cs.units[f]||Kr(pl(e,f))||""),(A+"").charAt(1)==="="&&(A=pl(e,f))):A=pl(e,f),h=parseFloat(A),v=d==="string"&&c.charAt(1)==="="&&c.substr(0,2),v&&(c=c.substr(2)),u=parseFloat(c),f in Bl&&(f==="autoAlpha"&&(h===1&&pl(e,"visibility")==="hidden"&&u&&(h=0),x.push("visibility",0,a.visibility),QA(this,a,"visibility",h?"inherit":"hidden",u?"inherit":"hidden",!u)),f!=="scale"&&f!=="transform"&&(f=Bl[f],~f.indexOf(",")&&(f=f.split(",")[0]))),w=f in Ll,w){if(this.styles.save(f),B||(C=e._gsap,C.renderTransform&&!t.parseTransform||_m(e,t.parseTransform),b=t.smoothOrigin!==!1&&C.smooth,B=this._pt=new Li(this._pt,a,Un,0,1,C.renderTransform,C,0,-1),B.dep=1),f==="scale")this._pt=new Li(this._pt,C,"scaleY",C.scaleY,(v?Ph(C.scaleY,v+u):u)-C.scaleY||0,h_),this._pt.u=0,o.push("scaleY",f),f+="X";else if(f==="transformOrigin"){x.push(To,0,a[To]),c=U7(c),C.svg?g_(e,c,0,b,0,this):(g=parseFloat(c.split(" ")[2])||0,g!==C.zOrigin&&QA(this,C,"zOrigin",C.zOrigin,g),QA(this,a,f,gB(A),gB(c)));continue}else if(f==="svgOrigin"){g_(e,c,1,b,0,this);continue}else if(f in YZ){T7(this,C,f,h,v?Ph(h,v+c):c);continue}else if(f==="smoothOrigin"){QA(this,C,"smooth",C.smooth,c);continue}else if(f==="force3D"){C[f]=c;continue}else if(f==="transform"){N7(this,c,e);continue}}else f in a||(f=vf(f)||f);if(w||(u||u===0)&&(h||h===0)&&!g7.test(c)&&f in a)m=(A+"").substr((h+"").length),u||(u=0),g=Kr(c)||(f in cs.units?cs.units[f]:m),m!==g&&(h=ic(e,f,A,g)),this._pt=new Li(this._pt,w?C:a,f,h,(v?Ph(h,v+u):u)-h,!w&&(g==="px"||f==="zIndex")&&t.autoRound!==!1?y7:h_),this._pt.u=g||0,m!==g&&g!=="%"&&(this._pt.b=A,this._pt.r=v7);else if(f in a)S7.call(this,e,f,A,v?v+c:c);else if(f in e)this.add(e,f,A||e[f],v?v+c:c,i,s);else if(f!=="parseTransform"){tU(f,c);continue}w||(f in a?x.push(f,0,a[f]):x.push(f,1,A||e[f])),o.push(f)}}F&&VZ(this)},render:function(e,t){if(t.tween._time||!uU())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:pl,aliases:Bl,getSetter:function(e,t,r){var i=Bl[t];return i&&i.indexOf(",")<0&&(t=i),t in Ll&&t!==To&&(e._gsap.x||pl(e,"x"))?r&&kM===r?t==="scale"?b7:C7:(kM=r||{})&&(t==="scale"?x7:I7):e.style&&!qS(e.style[t])?w7:~t.indexOf("-")?B7:lU(e,t)},core:{_removeProperty:Im,_getMatrix:hU}};fs.utils.checkPrefix=vf;fs.core.getStyleSaver=GZ;(function(n,e,t,r){var i=Di(n+","+e+","+t,function(s){Ll[s]=1});Di(e,function(s){cs.units[s]="deg",YZ[s]=1}),Bl[i[13]]=n+","+e,Di(r,function(s){var o=s.split(":");Bl[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Di("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){cs.units[n]="px"});fs.registerPlugin(KZ);var m_=fs.registerPlugin(KZ)||fs;m_.core.Tween;function Df(){localStorage&&Object.keys(localStorage).map(n=>{this.setItem(n,localStorage[n],!1)}),Object.defineProperty(this,"length",{get:function(){return Object.keys(this).length},enumerable:!1})}Df.prototype.key=function(n){return Object.keys(this)[n]};Df.prototype.getItem=function(n){try{return JSON.parse(this[n])}catch{}return this[n]};Df.prototype.setItem=function(n,e,t=!0){const r=typeof e=="string"?e:JSON.stringify(e);return t&&localStorage.setItem(n,r),this[n]=r};Df.prototype.removeItem=function(n){delete this[n]};Df.prototype.clear=function(){Object.keys(this).forEach(n=>delete this[n])};let k7=new Df;const D7=n=>({get(e,t){return n.getItem(String(t))},set(e,t,r){return n.setItem(String(t),r),!0}}),L7=(n=k7)=>new Proxy({},D7(n)),De=L7();/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ps="146",$u={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},qu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},V7=0,GM=1,P7=2,$Z=1,O7=2,fg=3,Lo=0,yi=1,mi=2,YA=0,Zh=1,wu=2,JM=3,HM=4,W7=5,Nd=100,Z7=101,G7=102,zM=103,YM=104,J7=200,H7=201,z7=202,Y7=203,qZ=204,eG=205,X7=206,j7=207,K7=208,$7=209,q7=210,e$=0,t$=1,n$=2,v_=3,r$=4,i$=5,s$=6,o$=7,jC=0,a$=1,l$=2,Fl=0,A$=1,c$=2,u$=3,d$=4,h$=5,tG=300,yf=301,wf=302,mB=303,y_=304,KC=306,ps=1e3,fi=1001,Em=1002,nr=1003,vB=1004,yB=1005,ci=1006,fU=1007,Mu=1008,sc=1009,f$=1010,p$=1011,nG=1012,g$=1013,jc=1014,RA=1015,Sm=1016,m$=1017,v$=1018,Gh=1020,y$=1021,w$=1022,Ir=1023,B$=1024,C$=1025,lu=1026,Bf=1027,b$=1028,x$=1029,I$=1030,F$=1031,_$=1033,Xx=33776,jx=33777,Kx=33778,$x=33779,XM=35840,jM=35841,KM=35842,$M=35843,E$=36196,qM=37492,eT=37496,tT=37808,nT=37809,rT=37810,iT=37811,sT=37812,oT=37813,aT=37814,lT=37815,AT=37816,cT=37817,uT=37818,dT=37819,hT=37820,fT=37821,pT=36492,S$=2200,U$=2201,Q$=2202,Cf=2300,Bu=2301,qx=2302,bh=2400,xh=2401,wB=2402,pU=2500,R$=2501,M$=1,rG=2,gs=3e3,gt=3001,T$=3200,N$=3201,Tu=0,k$=1,ul="srgb",Kc="srgb-linear",e1=7680,D$=519,w_=35044,L$=35048,gT="300 es",B_=1035;class vc{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Hr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let mT=1234567;const Jg=Math.PI/180,Um=180/Math.PI;function No(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Hr[n&255]+Hr[n>>8&255]+Hr[n>>16&255]+Hr[n>>24&255]+"-"+Hr[e&255]+Hr[e>>8&255]+"-"+Hr[e>>16&15|64]+Hr[e>>24&255]+"-"+Hr[t&63|128]+Hr[t>>8&255]+"-"+Hr[t>>16&255]+Hr[t>>24&255]+Hr[r&255]+Hr[r>>8&255]+Hr[r>>16&255]+Hr[r>>24&255]).toLowerCase()}function pr(n,e,t){return Math.max(e,Math.min(t,n))}function gU(n,e){return(n%e+e)%e}function V$(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function P$(n,e,t){return n!==e?(t-n)/(e-n):0}function Hg(n,e,t){return(1-t)*n+t*e}function O$(n,e,t,r){return Hg(n,e,1-Math.exp(-t*r))}function W$(n,e=1){return e-Math.abs(gU(n,e*2)-e)}function Z$(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function G$(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function J$(n,e){return n+Math.floor(Math.random()*(e-n+1))}function H$(n,e){return n+Math.random()*(e-n)}function z$(n){return n*(.5-Math.random())}function Y$(n){n!==void 0&&(mT=n);let e=mT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function X$(n){return n*Jg}function j$(n){return n*Um}function C_(n){return(n&n-1)===0&&n!==0}function iG(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function BB(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function K$(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),A=s((e+r)/2),c=o((e+r)/2),u=s((e-r)/2),h=o((e-r)/2),d=s((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":n.set(a*c,l*u,l*h,a*A);break;case"YZY":n.set(l*h,a*c,l*u,a*A);break;case"ZXZ":n.set(l*u,l*h,a*c,a*A);break;case"XZX":n.set(a*c,l*p,l*d,a*A);break;case"YXY":n.set(l*d,a*c,l*p,a*A);break;case"ZYZ":n.set(l*p,l*d,a*c,a*A);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Cl(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ln(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Zt=Object.freeze({__proto__:null,DEG2RAD:Jg,RAD2DEG:Um,generateUUID:No,clamp:pr,euclideanModulo:gU,mapLinear:V$,inverseLerp:P$,lerp:Hg,damp:O$,pingpong:W$,smoothstep:Z$,smootherstep:G$,randInt:J$,randFloat:H$,randFloatSpread:z$,seededRandom:Y$,degToRad:X$,radToDeg:j$,isPowerOfTwo:C_,ceilPowerOfTwo:iG,floorPowerOfTwo:BB,setQuaternionFromProperEuler:K$,normalize:ln,denormalize:Cl});class ze{constructor(e=0,t=0){ze.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ln{constructor(){Ln.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,s,o,a,l,A){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=A,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],A=r[1],c=r[4],u=r[7],h=r[2],d=r[5],p=r[8],f=i[0],m=i[3],g=i[6],v=i[1],w=i[4],B=i[7],C=i[2],b=i[5],F=i[8];return s[0]=o*f+a*v+l*C,s[3]=o*m+a*w+l*b,s[6]=o*g+a*B+l*F,s[1]=A*f+c*v+u*C,s[4]=A*m+c*w+u*b,s[7]=A*g+c*B+u*F,s[2]=h*f+d*v+p*C,s[5]=h*m+d*w+p*b,s[8]=h*g+d*B+p*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],A=e[7],c=e[8];return t*o*c-t*a*A-r*s*c+r*a*l+i*s*A-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],A=e[7],c=e[8],u=c*o-a*A,h=a*l-c*s,d=A*s-o*l,p=t*u+r*h+i*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(i*A-c*r)*f,e[2]=(a*r-i*o)*f,e[3]=h*f,e[4]=(c*t-i*l)*f,e[5]=(i*s-a*t)*f,e[6]=d*f,e[7]=(r*l-A*t)*f,e[8]=(o*t-r*s)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),A=Math.sin(s);return this.set(r*l,r*A,-r*(l*o+A*a)+o+e,-i*A,i*l,-i*(-A*o+l*a)+a+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,s=i[0],o=i[3],a=i[6],l=i[1],A=i[4],c=i[7];return i[0]=t*s+r*l,i[3]=t*o+r*A,i[6]=t*a+r*c,i[1]=-r*s+t*l,i[4]=-r*o+t*A,i[7]=-r*a+t*c,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function sG(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Qm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Au(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function ow(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const t1={[ul]:{[Kc]:Au},[Kc]:{[ul]:ow}},go={legacyMode:!0,get workingColorSpace(){return Kc},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(t1[e]&&t1[e][t]!==void 0){const r=t1[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},oG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ur={r:0,g:0,b:0},mo={h:0,s:0,l:0},Av={h:0,s:0,l:0};function n1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function cv(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Ve{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ul){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,go.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Kc){return this.r=e,this.g=t,this.b=r,go.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Kc){if(e=gU(e,1),t=pr(t,0,1),r=pr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=n1(o,s,e+1/3),this.g=n1(o,s,e),this.b=n1(o,s,e-1/3)}return go.toWorkingColorSpace(this,i),this}setStyle(e,t=ul){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,go.toWorkingColorSpace(this,t),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,go.toWorkingColorSpace(this,t),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,A=parseFloat(s[2])/100,c=parseFloat(s[3])/100;return r(s[4]),this.setHSL(l,A,c,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,go.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,go.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=ul){const r=oG[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Au(e.r),this.g=Au(e.g),this.b=Au(e.b),this}copyLinearToSRGB(e){return this.r=ow(e.r),this.g=ow(e.g),this.b=ow(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ul){return go.fromWorkingColorSpace(cv(this,ur),e),pr(ur.r*255,0,255)<<16^pr(ur.g*255,0,255)<<8^pr(ur.b*255,0,255)<<0}getHexString(e=ul){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Kc){go.fromWorkingColorSpace(cv(this,ur),t);const r=ur.r,i=ur.g,s=ur.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,A;const c=(a+o)/2;if(a===o)l=0,A=0;else{const u=o-a;switch(A=c<=.5?u/(o+a):u/(2-o-a),o){case r:l=(i-s)/u+(i<s?6:0);break;case i:l=(s-r)/u+2;break;case s:l=(r-i)/u+4;break}l/=6}return e.h=l,e.s=A,e.l=c,e}getRGB(e,t=Kc){return go.fromWorkingColorSpace(cv(this,ur),t),e.r=ur.r,e.g=ur.g,e.b=ur.b,e}getStyle(e=ul){return go.fromWorkingColorSpace(cv(this,ur),e),e!==ul?`color(${e} ${ur.r} ${ur.g} ${ur.b})`:`rgb(${ur.r*255|0},${ur.g*255|0},${ur.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(mo),mo.h+=e,mo.s+=t,mo.l+=r,this.setHSL(mo.h,mo.s,mo.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(mo),e.getHSL(Av);const r=Hg(mo.h,Av.h,t),i=Hg(mo.s,Av.s,t),s=Hg(mo.l,Av.l,t);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Ve.NAMES=oG;let ed;class aG{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ed===void 0&&(ed=Qm("canvas")),ed.width=e.width,ed.height=e.height;const r=ed.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=ed}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Qm("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Au(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Au(t[r]/255)*255):t[r]=Au(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class mU{constructor(e=null){this.isSource=!0,this.uuid=No(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(r1(i[o].image)):s.push(r1(i[o]))}else s=r1(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function r1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?aG.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let $$=0;class or extends vc{constructor(e=or.DEFAULT_IMAGE,t=or.DEFAULT_MAPPING,r=fi,i=fi,s=ci,o=Mu,a=Ir,l=sc,A=1,c=gs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:$$++}),this.uuid=No(),this.name="",this.source=new mU(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=A,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ze(0,0),this.repeat=new ze(1,1),this.center=new ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ln,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==tG)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ps:e.x=e.x-Math.floor(e.x);break;case fi:e.x=e.x<0?0:1;break;case Em:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ps:e.y=e.y-Math.floor(e.y);break;case fi:e.y=e.y<0?0:1;break;case Em:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}or.DEFAULT_IMAGE=null;or.DEFAULT_MAPPING=tG;class Nt{constructor(e=0,t=0,r=0,i=1){Nt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,A=l[0],c=l[4],u=l[8],h=l[1],d=l[5],p=l[9],f=l[2],m=l[6],g=l[10];if(Math.abs(c-h)<.01&&Math.abs(u-f)<.01&&Math.abs(p-m)<.01){if(Math.abs(c+h)<.1&&Math.abs(u+f)<.1&&Math.abs(p+m)<.1&&Math.abs(A+d+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(A+1)/2,B=(d+1)/2,C=(g+1)/2,b=(c+h)/4,F=(u+f)/4,x=(p+m)/4;return w>B&&w>C?w<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(w),i=b/r,s=F/r):B>C?B<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(B),r=b/i,s=x/i):C<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(C),r=F/s,i=x/s),this.set(r,i,s,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(h-c)/v,this.w=Math.acos((A+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Qa extends vc{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Nt(0,0,e,t),this.scissorTest=!1,this.viewport=new Nt(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new or(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:ci,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new mU(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class lG extends or{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=nr,this.minFilter=nr,this.wrapR=fi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class q$ extends or{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=nr,this.minFilter=nr,this.wrapR=fi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rt{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],A=r[i+1],c=r[i+2],u=r[i+3];const h=s[o+0],d=s[o+1],p=s[o+2],f=s[o+3];if(a===0){e[t+0]=l,e[t+1]=A,e[t+2]=c,e[t+3]=u;return}if(a===1){e[t+0]=h,e[t+1]=d,e[t+2]=p,e[t+3]=f;return}if(u!==f||l!==h||A!==d||c!==p){let m=1-a;const g=l*h+A*d+c*p+u*f,v=g>=0?1:-1,w=1-g*g;if(w>Number.EPSILON){const C=Math.sqrt(w),b=Math.atan2(C,g*v);m=Math.sin(m*b)/C,a=Math.sin(a*b)/C}const B=a*v;if(l=l*m+h*B,A=A*m+d*B,c=c*m+p*B,u=u*m+f*B,m===1-a){const C=1/Math.sqrt(l*l+A*A+c*c+u*u);l*=C,A*=C,c*=C,u*=C}}e[t]=l,e[t+1]=A,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],A=r[i+2],c=r[i+3],u=s[o],h=s[o+1],d=s[o+2],p=s[o+3];return e[t]=a*p+c*u+l*d-A*h,e[t+1]=l*p+c*h+A*u-a*d,e[t+2]=A*p+c*d+a*h-l*u,e[t+3]=c*p-a*u-l*h-A*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,A=a(r/2),c=a(i/2),u=a(s/2),h=l(r/2),d=l(i/2),p=l(s/2);switch(o){case"XYZ":this._x=h*c*u+A*d*p,this._y=A*d*u-h*c*p,this._z=A*c*p+h*d*u,this._w=A*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+A*d*p,this._y=A*d*u-h*c*p,this._z=A*c*p-h*d*u,this._w=A*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-A*d*p,this._y=A*d*u+h*c*p,this._z=A*c*p+h*d*u,this._w=A*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-A*d*p,this._y=A*d*u+h*c*p,this._z=A*c*p-h*d*u,this._w=A*c*u+h*d*p;break;case"YZX":this._x=h*c*u+A*d*p,this._y=A*d*u+h*c*p,this._z=A*c*p-h*d*u,this._w=A*c*u-h*d*p;break;case"XZY":this._x=h*c*u-A*d*p,this._y=A*d*u-h*c*p,this._z=A*c*p+h*d*u,this._w=A*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],A=t[2],c=t[6],u=t[10],h=r+a+u;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(c-l)*d,this._y=(s-A)*d,this._z=(o-i)*d}else if(r>a&&r>u){const d=2*Math.sqrt(1+r-a-u);this._w=(c-l)/d,this._x=.25*d,this._y=(i+o)/d,this._z=(s+A)/d}else if(a>u){const d=2*Math.sqrt(1+a-r-u);this._w=(s-A)/d,this._x=(i+o)/d,this._y=.25*d,this._z=(l+c)/d}else{const d=2*Math.sqrt(1+u-r-a);this._w=(o-i)/d,this._x=(s+A)/d,this._y=(l+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(pr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,A=t._z,c=t._w;return this._x=r*c+o*a+i*A-s*l,this._y=i*c+o*l+s*a-r*A,this._z=s*c+o*A+r*l-i*a,this._w=o*c-r*a-i*l-s*A,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-t;return this._w=d*o+t*this._w,this._x=d*r+t*this._x,this._y=d*i+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const A=Math.sqrt(l),c=Math.atan2(A,a),u=Math.sin((1-t)*c)/A,h=Math.sin(t*c)/A;return this._w=o*u+this._w*h,this._x=r*u+this._x*h,this._y=i*u+this._y*h,this._z=s*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,t=0,r=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(vT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(vT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,A=l*t+o*i-a*r,c=l*r+a*t-s*i,u=l*i+s*r-o*t,h=-s*t-o*r-a*i;return this.x=A*l+h*-s+c*-a-u*-o,this.y=c*l+h*-o+u*-s-A*-a,this.z=u*l+h*-a+A*-o-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return i1.copy(this).projectOnVector(e),this.sub(i1)}reflect(e){return this.sub(i1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(pr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const i1=new j,vT=new rt;class Cs{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,A=e.length;l<A;l+=3){const c=e[l],u=e[l+1],h=e[l+2];c<t&&(t=c),u<r&&(r=u),h<i&&(i=h),c>s&&(s=c),u>o&&(o=u),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,A=e.count;l<A;l++){const c=e.getX(l),u=e.getY(l),h=e.getZ(l);c<t&&(t=c),u<r&&(r=u),h<i&&(i=h),c>s&&(s=c),u>o&&(o=u),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Fc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Fc.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Fc)}else r.boundingBox===null&&r.computeBoundingBox(),s1.copy(r.boundingBox),s1.applyMatrix4(e.matrixWorld),this.union(s1);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Fc),Fc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_p),uv.subVectors(this.max,_p),td.subVectors(e.a,_p),nd.subVectors(e.b,_p),rd.subVectors(e.c,_p),eA.subVectors(nd,td),tA.subVectors(rd,nd),_c.subVectors(td,rd);let t=[0,-eA.z,eA.y,0,-tA.z,tA.y,0,-_c.z,_c.y,eA.z,0,-eA.x,tA.z,0,-tA.x,_c.z,0,-_c.x,-eA.y,eA.x,0,-tA.y,tA.x,0,-_c.y,_c.x,0];return!o1(t,td,nd,rd,uv)||(t=[1,0,0,0,1,0,0,0,1],!o1(t,td,nd,rd,uv))?!1:(dv.crossVectors(eA,tA),t=[dv.x,dv.y,dv.z],o1(t,td,nd,rd,uv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Fc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Fc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ja[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ja[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ja[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ja[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ja[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ja[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ja[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ja[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ja),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ja=[new j,new j,new j,new j,new j,new j,new j,new j],Fc=new j,s1=new Cs,td=new j,nd=new j,rd=new j,eA=new j,tA=new j,_c=new j,_p=new j,uv=new j,dv=new j,Ec=new j;function o1(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Ec.fromArray(n,s);const a=i.x*Math.abs(Ec.x)+i.y*Math.abs(Ec.y)+i.z*Math.abs(Ec.z),l=e.dot(Ec),A=t.dot(Ec),c=r.dot(Ec);if(Math.max(-Math.max(l,A,c),Math.min(l,A,c))>a)return!1}return!0}const eq=new Cs,Ep=new j,a1=new j;class Nu{constructor(e=new j,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):eq.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ep.subVectors(e,this.center);const t=Ep.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Ep,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(a1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ep.copy(e.center).add(a1)),this.expandByPoint(Ep.copy(e.center).sub(a1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ha=new j,l1=new j,hv=new j,nA=new j,A1=new j,fv=new j,c1=new j;class u0{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ha)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ha.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ha.copy(this.direction).multiplyScalar(t).add(this.origin),Ha.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){l1.copy(e).add(t).multiplyScalar(.5),hv.copy(t).sub(e).normalize(),nA.copy(this.origin).sub(l1);const s=e.distanceTo(t)*.5,o=-this.direction.dot(hv),a=nA.dot(this.direction),l=-nA.dot(hv),A=nA.lengthSq(),c=Math.abs(1-o*o);let u,h,d,p;if(c>0)if(u=o*l-a,h=o*a-l,p=s*c,u>=0)if(h>=-p)if(h<=p){const f=1/c;u*=f,h*=f,d=u*(u+o*h+2*a)+h*(o*u+h+2*l)+A}else h=s,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*l)+A;else h=-s,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*l)+A;else h<=-p?(u=Math.max(0,-(-o*s+a)),h=u>0?-s:Math.min(Math.max(-s,-l),s),d=-u*u+h*(h+2*l)+A):h<=p?(u=0,h=Math.min(Math.max(-s,-l),s),d=h*(h+2*l)+A):(u=Math.max(0,-(o*s+a)),h=u>0?s:Math.min(Math.max(-s,-l),s),d=-u*u+h*(h+2*l)+A);else h=o>0?-s:s,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*l)+A;return r&&r.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(hv).multiplyScalar(h).add(l1),d}intersectSphere(e,t){Ha.subVectors(e.center,this.origin);const r=Ha.dot(this.direction),i=Ha.dot(Ha)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const A=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return A>=0?(r=(e.min.x-h.x)*A,i=(e.max.x-h.x)*A):(r=(e.max.x-h.x)*A,i=(e.min.x-h.x)*A),c>=0?(s=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(s=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),u>=0?(a=(e.min.z-h.z)*u,l=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,l=(e.min.z-h.z)*u),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Ha)!==null}intersectTriangle(e,t,r,i,s){A1.subVectors(t,e),fv.subVectors(r,e),c1.crossVectors(A1,fv);let o=this.direction.dot(c1),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;nA.subVectors(this.origin,e);const l=a*this.direction.dot(fv.crossVectors(nA,fv));if(l<0)return null;const A=a*this.direction.dot(A1.cross(nA));if(A<0||l+A>o)return null;const c=-a*nA.dot(c1);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Je{constructor(){Je.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,s,o,a,l,A,c,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=A,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Je().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/id.setFromMatrixColumn(e,0).length(),s=1/id.setFromMatrixColumn(e,1).length(),o=1/id.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),A=Math.sin(i),c=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const h=o*c,d=o*u,p=a*c,f=a*u;t[0]=l*c,t[4]=-l*u,t[8]=A,t[1]=d+p*A,t[5]=h-f*A,t[9]=-a*l,t[2]=f-h*A,t[6]=p+d*A,t[10]=o*l}else if(e.order==="YXZ"){const h=l*c,d=l*u,p=A*c,f=A*u;t[0]=h+f*a,t[4]=p*a-d,t[8]=o*A,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=d*a-p,t[6]=f+h*a,t[10]=o*l}else if(e.order==="ZXY"){const h=l*c,d=l*u,p=A*c,f=A*u;t[0]=h-f*a,t[4]=-o*u,t[8]=p+d*a,t[1]=d+p*a,t[5]=o*c,t[9]=f-h*a,t[2]=-o*A,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const h=o*c,d=o*u,p=a*c,f=a*u;t[0]=l*c,t[4]=p*A-d,t[8]=h*A+f,t[1]=l*u,t[5]=f*A+h,t[9]=d*A-p,t[2]=-A,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const h=o*l,d=o*A,p=a*l,f=a*A;t[0]=l*c,t[4]=f-h*u,t[8]=p*u+d,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-A*c,t[6]=d*u+p,t[10]=h-f*u}else if(e.order==="XZY"){const h=o*l,d=o*A,p=a*l,f=a*A;t[0]=l*c,t[4]=-u,t[8]=A*c,t[1]=h*u+f,t[5]=o*c,t[9]=d*u-p,t[2]=p*u-d,t[6]=a*c,t[10]=f*u+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(tq,e,nq)}lookAt(e,t,r){const i=this.elements;return Zi.subVectors(e,t),Zi.lengthSq()===0&&(Zi.z=1),Zi.normalize(),rA.crossVectors(r,Zi),rA.lengthSq()===0&&(Math.abs(r.z)===1?Zi.x+=1e-4:Zi.z+=1e-4,Zi.normalize(),rA.crossVectors(r,Zi)),rA.normalize(),pv.crossVectors(Zi,rA),i[0]=rA.x,i[4]=pv.x,i[8]=Zi.x,i[1]=rA.y,i[5]=pv.y,i[9]=Zi.y,i[2]=rA.z,i[6]=pv.z,i[10]=Zi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],A=r[12],c=r[1],u=r[5],h=r[9],d=r[13],p=r[2],f=r[6],m=r[10],g=r[14],v=r[3],w=r[7],B=r[11],C=r[15],b=i[0],F=i[4],x=i[8],E=i[12],M=i[1],H=i[5],O=i[9],U=i[13],y=i[2],I=i[6],R=i[10],D=i[14],k=i[3],V=i[7],Z=i[11],N=i[15];return s[0]=o*b+a*M+l*y+A*k,s[4]=o*F+a*H+l*I+A*V,s[8]=o*x+a*O+l*R+A*Z,s[12]=o*E+a*U+l*D+A*N,s[1]=c*b+u*M+h*y+d*k,s[5]=c*F+u*H+h*I+d*V,s[9]=c*x+u*O+h*R+d*Z,s[13]=c*E+u*U+h*D+d*N,s[2]=p*b+f*M+m*y+g*k,s[6]=p*F+f*H+m*I+g*V,s[10]=p*x+f*O+m*R+g*Z,s[14]=p*E+f*U+m*D+g*N,s[3]=v*b+w*M+B*y+C*k,s[7]=v*F+w*H+B*I+C*V,s[11]=v*x+w*O+B*R+C*Z,s[15]=v*E+w*U+B*D+C*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],A=e[13],c=e[2],u=e[6],h=e[10],d=e[14],p=e[3],f=e[7],m=e[11],g=e[15];return p*(+s*l*u-i*A*u-s*a*h+r*A*h+i*a*d-r*l*d)+f*(+t*l*d-t*A*h+s*o*h-i*o*d+i*A*c-s*l*c)+m*(+t*A*u-t*a*d-s*o*u+r*o*d+s*a*c-r*A*c)+g*(-i*a*c-t*l*u+t*a*h+i*o*u-r*o*h+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],A=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*A-f*h*A+f*l*d-a*m*d-u*l*g+a*h*g,w=p*h*A-c*m*A-p*l*d+o*m*d+c*l*g-o*h*g,B=c*f*A-p*u*A+p*a*d-o*f*d-c*a*g+o*u*g,C=p*u*l-c*f*l-p*a*h+o*f*h+c*a*m-o*u*m,b=t*v+r*w+i*B+s*C;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/b;return e[0]=v*F,e[1]=(f*h*s-u*m*s-f*i*d+r*m*d+u*i*g-r*h*g)*F,e[2]=(a*m*s-f*l*s+f*i*A-r*m*A-a*i*g+r*l*g)*F,e[3]=(u*l*s-a*h*s-u*i*A+r*h*A+a*i*d-r*l*d)*F,e[4]=w*F,e[5]=(c*m*s-p*h*s+p*i*d-t*m*d-c*i*g+t*h*g)*F,e[6]=(p*l*s-o*m*s-p*i*A+t*m*A+o*i*g-t*l*g)*F,e[7]=(o*h*s-c*l*s+c*i*A-t*h*A-o*i*d+t*l*d)*F,e[8]=B*F,e[9]=(p*u*s-c*f*s-p*r*d+t*f*d+c*r*g-t*u*g)*F,e[10]=(o*f*s-p*a*s+p*r*A-t*f*A-o*r*g+t*a*g)*F,e[11]=(c*a*s-o*u*s-c*r*A+t*u*A+o*r*d-t*a*d)*F,e[12]=C*F,e[13]=(c*f*i-p*u*i+p*r*h-t*f*h-c*r*m+t*u*m)*F,e[14]=(p*a*i-o*f*i-p*r*l+t*f*l+o*r*m-t*a*m)*F,e[15]=(o*u*i-c*a*i+c*r*l-t*u*l-o*r*h+t*a*h)*F,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,A=s*o,c=s*a;return this.set(A*o+r,A*a-i*l,A*l+i*a,0,A*a+i*l,c*a+r,c*l-i*o,0,A*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,A=s+s,c=o+o,u=a+a,h=s*A,d=s*c,p=s*u,f=o*c,m=o*u,g=a*u,v=l*A,w=l*c,B=l*u,C=r.x,b=r.y,F=r.z;return i[0]=(1-(f+g))*C,i[1]=(d+B)*C,i[2]=(p-w)*C,i[3]=0,i[4]=(d-B)*b,i[5]=(1-(h+g))*b,i[6]=(m+v)*b,i[7]=0,i[8]=(p+w)*F,i[9]=(m-v)*F,i[10]=(1-(h+f))*F,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=id.set(i[0],i[1],i[2]).length();const o=id.set(i[4],i[5],i[6]).length(),a=id.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],vo.copy(this);const A=1/s,c=1/o,u=1/a;return vo.elements[0]*=A,vo.elements[1]*=A,vo.elements[2]*=A,vo.elements[4]*=c,vo.elements[5]*=c,vo.elements[6]*=c,vo.elements[8]*=u,vo.elements[9]*=u,vo.elements[10]*=u,t.setFromRotationMatrix(vo),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){const a=this.elements,l=2*s/(t-e),A=2*s/(r-i),c=(t+e)/(t-e),u=(r+i)/(r-i),h=-(o+s)/(o-s),d=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=A,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,l=1/(t-e),A=1/(r-i),c=1/(o-s),u=(t+e)*l,h=(r+i)*A,d=(o+s)*c;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*A,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const id=new j,vo=new Je,tq=new j(0,0,0),nq=new j(1,1,1),rA=new j,pv=new j,Zi=new j,yT=new Je,wT=new rt;class $r{constructor(e=0,t=0,r=0,i=$r.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],A=i[5],c=i[9],u=i[2],h=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(pr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,A),this._z=0);break;case"YXZ":this._x=Math.asin(-pr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,A)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(pr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,A)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-pr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,A));break;case"YZX":this._z=Math.asin(pr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,A),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-pr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,A),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return yT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(yT,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return wT.setFromEuler(this),this.setFromQuaternion(wT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}$r.DefaultOrder="XYZ";$r.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class vU{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let rq=0;const BT=new j,sd=new rt,za=new Je,gv=new j,Sp=new j,iq=new j,sq=new rt,CT=new j(1,0,0),bT=new j(0,1,0),xT=new j(0,0,1),oq={type:"added"},IT={type:"removed"};class Lt extends vc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:rq++}),this.uuid=No(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Lt.DefaultUp.clone();const e=new j,t=new $r,r=new rt,i=new j(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Je},normalMatrix:{value:new Ln}}),this.matrix=new Je,this.matrixWorld=new Je,this.matrixAutoUpdate=Lt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Lt.DefaultMatrixWorldAutoUpdate,this.layers=new vU,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return sd.setFromAxisAngle(e,t),this.quaternion.multiply(sd),this}rotateOnWorldAxis(e,t){return sd.setFromAxisAngle(e,t),this.quaternion.premultiply(sd),this}rotateX(e){return this.rotateOnAxis(CT,e)}rotateY(e){return this.rotateOnAxis(bT,e)}rotateZ(e){return this.rotateOnAxis(xT,e)}translateOnAxis(e,t){return BT.copy(e).applyQuaternion(this.quaternion),this.position.add(BT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(CT,e)}translateY(e){return this.translateOnAxis(bT,e)}translateZ(e){return this.translateOnAxis(xT,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(za.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?gv.copy(e):gv.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Sp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?za.lookAt(Sp,gv,this.up):za.lookAt(gv,Sp,this.up),this.quaternion.setFromRotationMatrix(za),i&&(za.extractRotation(i.matrixWorld),sd.setFromRotationMatrix(za),this.quaternion.premultiply(sd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(oq)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(IT)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(IT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),za.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),za.multiply(e.parent.matrixWorld)),e.applyMatrix4(za),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sp,e,iq),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sp,sq,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let A=0,c=l.length;A<c;A++){const u=l[A];s(e.shapes,u)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,A=this.material.length;l<A;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),A=o(e.textures),c=o(e.images),u=o(e.shapes),h=o(e.skeletons),d=o(e.animations),p=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),A.length>0&&(r.textures=A),c.length>0&&(r.images=c),u.length>0&&(r.shapes=u),h.length>0&&(r.skeletons=h),d.length>0&&(r.animations=d),p.length>0&&(r.nodes=p)}return r.object=i,r;function o(a){const l=[];for(const A in a){const c=a[A];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Lt.DefaultUp=new j(0,1,0);Lt.DefaultMatrixAutoUpdate=!0;Lt.DefaultMatrixWorldAutoUpdate=!0;const yo=new j,Ya=new j,u1=new j,Xa=new j,od=new j,ad=new j,FT=new j,d1=new j,h1=new j,f1=new j;class rs{constructor(e=new j,t=new j,r=new j){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),yo.subVectors(e,t),i.cross(yo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){yo.subVectors(i,t),Ya.subVectors(r,t),u1.subVectors(e,t);const o=yo.dot(yo),a=yo.dot(Ya),l=yo.dot(u1),A=Ya.dot(Ya),c=Ya.dot(u1),u=o*A-a*a;if(u===0)return s.set(-2,-1,-1);const h=1/u,d=(A*l-a*c)*h,p=(o*c-a*l)*h;return s.set(1-d-p,p,d)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Xa),Xa.x>=0&&Xa.y>=0&&Xa.x+Xa.y<=1}static getUV(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Xa),l.set(0,0),l.addScaledVector(s,Xa.x),l.addScaledVector(o,Xa.y),l.addScaledVector(a,Xa.z),l}static isFrontFacing(e,t,r,i){return yo.subVectors(r,t),Ya.subVectors(e,t),yo.cross(Ya).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return yo.subVectors(this.c,this.b),Ya.subVectors(this.a,this.b),yo.cross(Ya).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return rs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return rs.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return rs.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return rs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return rs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;od.subVectors(i,r),ad.subVectors(s,r),d1.subVectors(e,r);const l=od.dot(d1),A=ad.dot(d1);if(l<=0&&A<=0)return t.copy(r);h1.subVectors(e,i);const c=od.dot(h1),u=ad.dot(h1);if(c>=0&&u<=c)return t.copy(i);const h=l*u-c*A;if(h<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(r).addScaledVector(od,o);f1.subVectors(e,s);const d=od.dot(f1),p=ad.dot(f1);if(p>=0&&d<=p)return t.copy(s);const f=d*A-l*p;if(f<=0&&A>=0&&p<=0)return a=A/(A-p),t.copy(r).addScaledVector(ad,a);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return FT.subVectors(s,i),a=(u-c)/(u-c+(d-p)),t.copy(i).addScaledVector(FT,a);const g=1/(m+f+h);return o=f*g,a=h*g,t.copy(r).addScaledVector(od,o).addScaledVector(ad,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let aq=0,us=class extends vc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:aq++}),this.uuid=No(),this.name="",this.type="Material",this.blending=Zh,this.side=Lo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=qZ,this.blendDst=eG,this.blendEquation=Nd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=v_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=D$,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=e1,this.stencilZFail=e1,this.stencilZPass=e1,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Zh&&(r.blending=this.blending),this.side!==Lo&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}};class Ri extends us{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=jC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const jn=new j,mv=new ze;class ut{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=w_,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)mv.fromBufferAttribute(this,t),mv.applyMatrix3(e),this.setXY(t,mv.x,mv.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)jn.fromBufferAttribute(this,t),jn.applyMatrix3(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)jn.fromBufferAttribute(this,t),jn.applyMatrix4(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)jn.fromBufferAttribute(this,t),jn.applyNormalMatrix(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)jn.fromBufferAttribute(this,t),jn.transformDirection(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Cl(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Cl(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Cl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Cl(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==w_&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class $C extends ut{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class AG extends ut{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class rn extends ut{constructor(e,t,r){super(new Float32Array(e),t,r)}}let lq=0;const Es=new Je,p1=new Lt,ld=new j,Gi=new Cs,Up=new Cs,wr=new j;class zt extends vc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:lq++}),this.uuid=No(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(sG(e)?AG:$C)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Ln().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Es.makeRotationFromQuaternion(e),this.applyMatrix4(Es),this}rotateX(e){return Es.makeRotationX(e),this.applyMatrix4(Es),this}rotateY(e){return Es.makeRotationY(e),this.applyMatrix4(Es),this}rotateZ(e){return Es.makeRotationZ(e),this.applyMatrix4(Es),this}translate(e,t,r){return Es.makeTranslation(e,t,r),this.applyMatrix4(Es),this}scale(e,t,r){return Es.makeScale(e,t,r),this.applyMatrix4(Es),this}lookAt(e){return p1.lookAt(e),p1.updateMatrix(),this.applyMatrix4(p1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ld).negate(),this.translate(ld.x,ld.y,ld.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new rn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Cs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Gi.setFromBufferAttribute(s),this.morphTargetsRelative?(wr.addVectors(this.boundingBox.min,Gi.min),this.boundingBox.expandByPoint(wr),wr.addVectors(this.boundingBox.max,Gi.max),this.boundingBox.expandByPoint(wr)):(this.boundingBox.expandByPoint(Gi.min),this.boundingBox.expandByPoint(Gi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Nu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new j,1/0);return}if(e){const r=this.boundingSphere.center;if(Gi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Up.setFromBufferAttribute(a),this.morphTargetsRelative?(wr.addVectors(Gi.min,Up.min),Gi.expandByPoint(wr),wr.addVectors(Gi.max,Up.max),Gi.expandByPoint(wr)):(Gi.expandByPoint(Up.min),Gi.expandByPoint(Up.max))}Gi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)wr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(wr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let A=0,c=a.count;A<c;A++)wr.fromBufferAttribute(a,A),l&&(ld.fromBufferAttribute(e,A),wr.add(ld)),i=Math.max(i,r.distanceToSquared(wr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ut(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,A=[],c=[];for(let M=0;M<a;M++)A[M]=new j,c[M]=new j;const u=new j,h=new j,d=new j,p=new ze,f=new ze,m=new ze,g=new j,v=new j;function w(M,H,O){u.fromArray(i,M*3),h.fromArray(i,H*3),d.fromArray(i,O*3),p.fromArray(o,M*2),f.fromArray(o,H*2),m.fromArray(o,O*2),h.sub(u),d.sub(u),f.sub(p),m.sub(p);const U=1/(f.x*m.y-m.x*f.y);isFinite(U)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(U),v.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(U),A[M].add(g),A[H].add(g),A[O].add(g),c[M].add(v),c[H].add(v),c[O].add(v))}let B=this.groups;B.length===0&&(B=[{start:0,count:r.length}]);for(let M=0,H=B.length;M<H;++M){const O=B[M],U=O.start,y=O.count;for(let I=U,R=U+y;I<R;I+=3)w(r[I+0],r[I+1],r[I+2])}const C=new j,b=new j,F=new j,x=new j;function E(M){F.fromArray(s,M*3),x.copy(F);const H=A[M];C.copy(H),C.sub(F.multiplyScalar(F.dot(H))).normalize(),b.crossVectors(x,H);const U=b.dot(c[M])<0?-1:1;l[M*4]=C.x,l[M*4+1]=C.y,l[M*4+2]=C.z,l[M*4+3]=U}for(let M=0,H=B.length;M<H;++M){const O=B[M],U=O.start,y=O.count;for(let I=U,R=U+y;I<R;I+=3)E(r[I+0]),E(r[I+1]),E(r[I+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new ut(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let h=0,d=r.count;h<d;h++)r.setXYZ(h,0,0,0);const i=new j,s=new j,o=new j,a=new j,l=new j,A=new j,c=new j,u=new j;if(e)for(let h=0,d=e.count;h<d;h+=3){const p=e.getX(h+0),f=e.getX(h+1),m=e.getX(h+2);i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,f),o.fromBufferAttribute(t,m),c.subVectors(o,s),u.subVectors(i,s),c.cross(u),a.fromBufferAttribute(r,p),l.fromBufferAttribute(r,f),A.fromBufferAttribute(r,m),a.add(c),l.add(c),A.add(c),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(f,l.x,l.y,l.z),r.setXYZ(m,A.x,A.y,A.z)}else for(let h=0,d=t.count;h<d;h+=3)i.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),c.subVectors(o,s),u.subVectors(i,s),c.cross(u),r.setXYZ(h+0,c.x,c.y,c.z),r.setXYZ(h+1,c.x,c.y,c.z),r.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)wr.fromBufferAttribute(e,t),wr.normalize(),e.setXYZ(t,wr.x,wr.y,wr.z)}toNonIndexed(){function e(a,l){const A=a.array,c=a.itemSize,u=a.normalized,h=new A.constructor(l.length*c);let d=0,p=0;for(let f=0,m=l.length;f<m;f++){a.isInterleavedBufferAttribute?d=l[f]*a.data.stride+a.offset:d=l[f]*c;for(let g=0;g<c;g++)h[p++]=A[d++]}return new ut(h,c,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new zt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],A=e(l,r);t.setAttribute(a,A)}const s=this.morphAttributes;for(const a in s){const l=[],A=s[a];for(let c=0,u=A.length;c<u;c++){const h=A[c],d=e(h,r);l.push(d)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const A=o[a];t.addGroup(A.start,A.count,A.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const A in l)l[A]!==void 0&&(e[A]=l[A]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const A=r[l];e.data.attributes[l]=A.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const A=this.morphAttributes[l],c=[];for(let u=0,h=A.length;u<h;u++){const d=A[u];c.push(d.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const A in i){const c=i[A];this.setAttribute(A,c.clone(t))}const s=e.morphAttributes;for(const A in s){const c=[],u=s[A];for(let h=0,d=u.length;h<d;h++)c.push(u[h].clone(t));this.morphAttributes[A]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let A=0,c=o.length;A<c;A++){const u=o[A];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const _T=new Je,Ad=new u0,g1=new Nu,iA=new j,sA=new j,oA=new j,m1=new j,v1=new j,y1=new j,vv=new j,yv=new j,wv=new j,Bv=new ze,Cv=new ze,bv=new ze,w1=new j,xv=new j;class In extends Lt{constructor(e=new zt,t=new Ri){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),g1.copy(r.boundingSphere),g1.applyMatrix4(s),e.ray.intersectsSphere(g1)===!1)||(_T.copy(s).invert(),Ad.copy(e.ray).applyMatrix4(_T),r.boundingBox!==null&&Ad.intersectsBox(r.boundingBox)===!1))return;let o;const a=r.index,l=r.attributes.position,A=r.morphAttributes.position,c=r.morphTargetsRelative,u=r.attributes.uv,h=r.attributes.uv2,d=r.groups,p=r.drawRange;if(a!==null)if(Array.isArray(i))for(let f=0,m=d.length;f<m;f++){const g=d[f],v=i[g.materialIndex],w=Math.max(g.start,p.start),B=Math.min(a.count,Math.min(g.start+g.count,p.start+p.count));for(let C=w,b=B;C<b;C+=3){const F=a.getX(C),x=a.getX(C+1),E=a.getX(C+2);o=Iv(this,v,e,Ad,l,A,c,u,h,F,x,E),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{const f=Math.max(0,p.start),m=Math.min(a.count,p.start+p.count);for(let g=f,v=m;g<v;g+=3){const w=a.getX(g),B=a.getX(g+1),C=a.getX(g+2);o=Iv(this,i,e,Ad,l,A,c,u,h,w,B,C),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let f=0,m=d.length;f<m;f++){const g=d[f],v=i[g.materialIndex],w=Math.max(g.start,p.start),B=Math.min(l.count,Math.min(g.start+g.count,p.start+p.count));for(let C=w,b=B;C<b;C+=3){const F=C,x=C+1,E=C+2;o=Iv(this,v,e,Ad,l,A,c,u,h,F,x,E),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{const f=Math.max(0,p.start),m=Math.min(l.count,p.start+p.count);for(let g=f,v=m;g<v;g+=3){const w=g,B=g+1,C=g+2;o=Iv(this,i,e,Ad,l,A,c,u,h,w,B,C),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}}}function Aq(n,e,t,r,i,s,o,a){let l;if(e.side===yi?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side!==mi,a),l===null)return null;xv.copy(a),xv.applyMatrix4(n.matrixWorld);const A=t.ray.origin.distanceTo(xv);return A<t.near||A>t.far?null:{distance:A,point:xv.clone(),object:n}}function Iv(n,e,t,r,i,s,o,a,l,A,c,u){iA.fromBufferAttribute(i,A),sA.fromBufferAttribute(i,c),oA.fromBufferAttribute(i,u);const h=n.morphTargetInfluences;if(s&&h){vv.set(0,0,0),yv.set(0,0,0),wv.set(0,0,0);for(let p=0,f=s.length;p<f;p++){const m=h[p],g=s[p];m!==0&&(m1.fromBufferAttribute(g,A),v1.fromBufferAttribute(g,c),y1.fromBufferAttribute(g,u),o?(vv.addScaledVector(m1,m),yv.addScaledVector(v1,m),wv.addScaledVector(y1,m)):(vv.addScaledVector(m1.sub(iA),m),yv.addScaledVector(v1.sub(sA),m),wv.addScaledVector(y1.sub(oA),m)))}iA.add(vv),sA.add(yv),oA.add(wv)}n.isSkinnedMesh&&(n.boneTransform(A,iA),n.boneTransform(c,sA),n.boneTransform(u,oA));const d=Aq(n,e,t,r,iA,sA,oA,w1);if(d){a&&(Bv.fromBufferAttribute(a,A),Cv.fromBufferAttribute(a,c),bv.fromBufferAttribute(a,u),d.uv=rs.getUV(w1,iA,sA,oA,Bv,Cv,bv,new ze)),l&&(Bv.fromBufferAttribute(l,A),Cv.fromBufferAttribute(l,c),bv.fromBufferAttribute(l,u),d.uv2=rs.getUV(w1,iA,sA,oA,Bv,Cv,bv,new ze));const p={a:A,b:c,c:u,normal:new j,materialIndex:0};rs.getNormal(iA,sA,oA,p.normal),d.face=p}return d}class d0 extends zt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],A=[],c=[],u=[];let h=0,d=0;p("z","y","x",-1,-1,r,t,e,o,s,0),p("z","y","x",1,-1,r,t,-e,o,s,1),p("x","z","y",1,1,e,r,t,i,o,2),p("x","z","y",1,-1,e,r,-t,i,o,3),p("x","y","z",1,-1,e,t,r,i,s,4),p("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new rn(A,3)),this.setAttribute("normal",new rn(c,3)),this.setAttribute("uv",new rn(u,2));function p(f,m,g,v,w,B,C,b,F,x,E){const M=B/F,H=C/x,O=B/2,U=C/2,y=b/2,I=F+1,R=x+1;let D=0,k=0;const V=new j;for(let Z=0;Z<R;Z++){const N=Z*H-U;for(let _=0;_<I;_++){const z=_*M-O;V[f]=z*v,V[m]=N*w,V[g]=y,A.push(V.x,V.y,V.z),V[f]=0,V[m]=0,V[g]=b>0?1:-1,c.push(V.x,V.y,V.z),u.push(_/F),u.push(1-Z/x),D+=1}}for(let Z=0;Z<x;Z++)for(let N=0;N<F;N++){const _=h+N+I*Z,z=h+N+I*(Z+1),ie=h+(N+1)+I*(Z+1),T=h+(N+1)+I*Z;l.push(_,z,T),l.push(z,ie,T),k+=6}a.addGroup(d,k,E),d+=k,h+=D}}static fromJSON(e){return new d0(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function bf(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function li(n){const e={};for(let t=0;t<n.length;t++){const r=bf(n[t]);for(const i in r)e[i]=r[i]}return e}function cq(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const yU={clone:bf,merge:li};var uq=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,dq=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Sr extends us{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=uq,this.fragmentShader=dq,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=bf(e.uniforms),this.uniformsGroups=cq(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class cG extends Lt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Je,this.projectionMatrix=new Je,this.projectionMatrixInverse=new Je}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Nr extends cG{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Um*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Jg*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Um*2*Math.atan(Math.tan(Jg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Jg*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,A=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/A,i*=o.width/l,r*=o.height/A}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const cd=90,ud=1;class hq extends Lt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new Nr(cd,ud,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new j(1,0,0)),this.add(i);const s=new Nr(cd,ud,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new j(-1,0,0)),this.add(s);const o=new Nr(cd,ud,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new j(0,1,0)),this.add(o);const a=new Nr(cd,ud,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new j(0,-1,0)),this.add(a);const l=new Nr(cd,ud,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new j(0,0,1)),this.add(l);const A=new Nr(cd,ud,e,t);A.layers=this.layers,A.up.set(0,-1,0),A.lookAt(new j(0,0,-1)),this.add(A)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,A]=this.children,c=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=Fl,e.xr.enabled=!1;const d=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=d,e.setRenderTarget(r,5),e.render(t,A),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}}class uG extends or{constructor(e,t,r,i,s,o,a,l,A,c){e=e!==void 0?e:[],t=t!==void 0?t:yf,super(e,t,r,i,s,o,a,l,A,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class fq extends Qa{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new uG(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ci}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new d0(5,5,5),s=new Sr({name:"CubemapFromEquirect",uniforms:bf(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:yi,blending:YA});s.uniforms.tEquirect.value=t;const o=new In(i,s),a=t.minFilter;return t.minFilter===Mu&&(t.minFilter=ci),new hq(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const B1=new j,pq=new j,gq=new Ln;class gl{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=B1.subVectors(r,t).cross(pq.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(B1),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||gq.getNormalMatrix(e),i=this.coplanarPoint(B1).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const dd=new Nu,Fv=new j;class wU{constructor(e=new gl,t=new gl,r=new gl,i=new gl,s=new gl,o=new gl){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],A=r[5],c=r[6],u=r[7],h=r[8],d=r[9],p=r[10],f=r[11],m=r[12],g=r[13],v=r[14],w=r[15];return t[0].setComponents(a-i,u-l,f-h,w-m).normalize(),t[1].setComponents(a+i,u+l,f+h,w+m).normalize(),t[2].setComponents(a+s,u+A,f+d,w+g).normalize(),t[3].setComponents(a-s,u-A,f-d,w-g).normalize(),t[4].setComponents(a-o,u-c,f-p,w-v).normalize(),t[5].setComponents(a+o,u+c,f+p,w+v).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),dd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(dd)}intersectsSprite(e){return dd.center.set(0,0,0),dd.radius=.7071067811865476,dd.applyMatrix4(e.matrixWorld),this.intersectsSphere(dd)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Fv.x=i.normal.x>0?e.max.x:e.min.x,Fv.y=i.normal.y>0?e.max.y:e.min.y,Fv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Fv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function dG(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function mq(n,e){const t=e.isWebGL2,r=new WeakMap;function i(A,c){const u=A.array,h=A.usage,d=n.createBuffer();n.bindBuffer(c,d),n.bufferData(c,u,h),A.onUploadCallback();let p;if(u instanceof Float32Array)p=5126;else if(u instanceof Uint16Array)if(A.isFloat16BufferAttribute)if(t)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(u instanceof Int16Array)p=5122;else if(u instanceof Uint32Array)p=5125;else if(u instanceof Int32Array)p=5124;else if(u instanceof Int8Array)p=5120;else if(u instanceof Uint8Array)p=5121;else if(u instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:d,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:A.version}}function s(A,c,u){const h=c.array,d=c.updateRange;n.bindBuffer(u,A),d.count===-1?n.bufferSubData(u,0,h):(t?n.bufferSubData(u,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):n.bufferSubData(u,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1)}function o(A){return A.isInterleavedBufferAttribute&&(A=A.data),r.get(A)}function a(A){A.isInterleavedBufferAttribute&&(A=A.data);const c=r.get(A);c&&(n.deleteBuffer(c.buffer),r.delete(A))}function l(A,c){if(A.isGLBufferAttribute){const h=r.get(A);(!h||h.version<A.version)&&r.set(A,{buffer:A.buffer,type:A.type,bytesPerElement:A.elementSize,version:A.version});return}A.isInterleavedBufferAttribute&&(A=A.data);const u=r.get(A);u===void 0?r.set(A,i(A,c)):u.version<A.version&&(s(u.buffer,A,c),u.version=A.version)}return{get:o,remove:a,update:l}}class ku extends zt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),A=a+1,c=l+1,u=e/a,h=t/l,d=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const v=g*h-o;for(let w=0;w<A;w++){const B=w*u-s;p.push(B,-v,0),f.push(0,0,1),m.push(w/a),m.push(1-g/l)}}for(let g=0;g<l;g++)for(let v=0;v<a;v++){const w=v+A*g,B=v+A*(g+1),C=v+1+A*(g+1),b=v+1+A*g;d.push(w,B,b),d.push(B,C,b)}this.setIndex(d),this.setAttribute("position",new rn(p,3)),this.setAttribute("normal",new rn(f,3)),this.setAttribute("uv",new rn(m,2))}static fromJSON(e){return new ku(e.width,e.height,e.widthSegments,e.heightSegments)}}var vq=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,yq=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wq=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Bq=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Cq=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,bq=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,xq="vec3 transformed = vec3( position );",Iq=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Fq=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,_q=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Eq=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Sq=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Uq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Qq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Rq=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Mq=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Tq=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Nq=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,kq=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Dq=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Lq=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Vq=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Pq=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Oq=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Wq=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Zq=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Gq="gl_FragColor = linearToOutputTexel( gl_FragColor );",Jq=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Hq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,zq=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Yq=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Xq=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,jq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Kq=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,$q=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,qq=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,eee=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,tee=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,nee=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,ree=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,iee=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,see=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,oee=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,aee=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,lee=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Aee=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,cee=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,uee=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,dee=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,hee=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,fee=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,pee=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,gee=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,mee=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,vee=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yee=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,wee=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Bee=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Cee=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,bee=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,xee=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Iee=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Fee=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,_ee=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Eee=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,See=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Uee=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Qee=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Ree=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Mee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Tee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Nee=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,kee=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Dee=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Lee=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Vee=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Pee=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Oee=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Wee=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Zee=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Gee=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Jee=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Hee=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,zee=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Yee=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Xee=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,jee=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Kee=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,$ee=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,qee=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ete=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,tte=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,nte=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,rte=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ite=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ste=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ote=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,ate=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,lte=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Ate=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,cte=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,ute=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,dte=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,hte=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,fte=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,pte=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const gte=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,mte=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yte=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,wte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Bte=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Cte=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,bte=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,xte=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Ite=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Fte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,_te=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Ete=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ste=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ute=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Qte=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rte=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Mte=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tte=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Nte=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kte=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Dte=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Lte=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Vte=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Pte=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Ote=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wte=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zte=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gte=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Jte=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Hte=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zte=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Yte=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Xte=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Bt={alphamap_fragment:vq,alphamap_pars_fragment:yq,alphatest_fragment:wq,alphatest_pars_fragment:Bq,aomap_fragment:Cq,aomap_pars_fragment:bq,begin_vertex:xq,beginnormal_vertex:Iq,bsdfs:Fq,iridescence_fragment:_q,bumpmap_pars_fragment:Eq,clipping_planes_fragment:Sq,clipping_planes_pars_fragment:Uq,clipping_planes_pars_vertex:Qq,clipping_planes_vertex:Rq,color_fragment:Mq,color_pars_fragment:Tq,color_pars_vertex:Nq,color_vertex:kq,common:Dq,cube_uv_reflection_fragment:Lq,defaultnormal_vertex:Vq,displacementmap_pars_vertex:Pq,displacementmap_vertex:Oq,emissivemap_fragment:Wq,emissivemap_pars_fragment:Zq,encodings_fragment:Gq,encodings_pars_fragment:Jq,envmap_fragment:Hq,envmap_common_pars_fragment:zq,envmap_pars_fragment:Yq,envmap_pars_vertex:Xq,envmap_physical_pars_fragment:aee,envmap_vertex:jq,fog_vertex:Kq,fog_pars_vertex:$q,fog_fragment:qq,fog_pars_fragment:eee,gradientmap_pars_fragment:tee,lightmap_fragment:nee,lightmap_pars_fragment:ree,lights_lambert_fragment:iee,lights_lambert_pars_fragment:see,lights_pars_begin:oee,lights_toon_fragment:lee,lights_toon_pars_fragment:Aee,lights_phong_fragment:cee,lights_phong_pars_fragment:uee,lights_physical_fragment:dee,lights_physical_pars_fragment:hee,lights_fragment_begin:fee,lights_fragment_maps:pee,lights_fragment_end:gee,logdepthbuf_fragment:mee,logdepthbuf_pars_fragment:vee,logdepthbuf_pars_vertex:yee,logdepthbuf_vertex:wee,map_fragment:Bee,map_pars_fragment:Cee,map_particle_fragment:bee,map_particle_pars_fragment:xee,metalnessmap_fragment:Iee,metalnessmap_pars_fragment:Fee,morphcolor_vertex:_ee,morphnormal_vertex:Eee,morphtarget_pars_vertex:See,morphtarget_vertex:Uee,normal_fragment_begin:Qee,normal_fragment_maps:Ree,normal_pars_fragment:Mee,normal_pars_vertex:Tee,normal_vertex:Nee,normalmap_pars_fragment:kee,clearcoat_normal_fragment_begin:Dee,clearcoat_normal_fragment_maps:Lee,clearcoat_pars_fragment:Vee,iridescence_pars_fragment:Pee,output_fragment:Oee,packing:Wee,premultiplied_alpha_fragment:Zee,project_vertex:Gee,dithering_fragment:Jee,dithering_pars_fragment:Hee,roughnessmap_fragment:zee,roughnessmap_pars_fragment:Yee,shadowmap_pars_fragment:Xee,shadowmap_pars_vertex:jee,shadowmap_vertex:Kee,shadowmask_pars_fragment:$ee,skinbase_vertex:qee,skinning_pars_vertex:ete,skinning_vertex:tte,skinnormal_vertex:nte,specularmap_fragment:rte,specularmap_pars_fragment:ite,tonemapping_fragment:ste,tonemapping_pars_fragment:ote,transmission_fragment:ate,transmission_pars_fragment:lte,uv_pars_fragment:Ate,uv_pars_vertex:cte,uv_vertex:ute,uv2_pars_fragment:dte,uv2_pars_vertex:hte,uv2_vertex:fte,worldpos_vertex:pte,background_vert:gte,background_frag:mte,backgroundCube_vert:vte,backgroundCube_frag:yte,cube_vert:wte,cube_frag:Bte,depth_vert:Cte,depth_frag:bte,distanceRGBA_vert:xte,distanceRGBA_frag:Ite,equirect_vert:Fte,equirect_frag:_te,linedashed_vert:Ete,linedashed_frag:Ste,meshbasic_vert:Ute,meshbasic_frag:Qte,meshlambert_vert:Rte,meshlambert_frag:Mte,meshmatcap_vert:Tte,meshmatcap_frag:Nte,meshnormal_vert:kte,meshnormal_frag:Dte,meshphong_vert:Lte,meshphong_frag:Vte,meshphysical_vert:Pte,meshphysical_frag:Ote,meshtoon_vert:Wte,meshtoon_frag:Zte,points_vert:Gte,points_frag:Jte,shadow_vert:Hte,shadow_frag:zte,sprite_vert:Yte,sprite_frag:Xte},Pe={common:{diffuse:{value:new Ve(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ln},uv2Transform:{value:new Ln},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ve(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ve(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ln}},sprite:{diffuse:{value:new Ve(16777215)},opacity:{value:1},center:{value:new ze(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ln}}},oa={basic:{uniforms:li([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.fog]),vertexShader:Bt.meshbasic_vert,fragmentShader:Bt.meshbasic_frag},lambert:{uniforms:li([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new Ve(0)}}]),vertexShader:Bt.meshlambert_vert,fragmentShader:Bt.meshlambert_frag},phong:{uniforms:li([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new Ve(0)},specular:{value:new Ve(1118481)},shininess:{value:30}}]),vertexShader:Bt.meshphong_vert,fragmentShader:Bt.meshphong_frag},standard:{uniforms:li([Pe.common,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.roughnessmap,Pe.metalnessmap,Pe.fog,Pe.lights,{emissive:{value:new Ve(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag},toon:{uniforms:li([Pe.common,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.gradientmap,Pe.fog,Pe.lights,{emissive:{value:new Ve(0)}}]),vertexShader:Bt.meshtoon_vert,fragmentShader:Bt.meshtoon_frag},matcap:{uniforms:li([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,{matcap:{value:null}}]),vertexShader:Bt.meshmatcap_vert,fragmentShader:Bt.meshmatcap_frag},points:{uniforms:li([Pe.points,Pe.fog]),vertexShader:Bt.points_vert,fragmentShader:Bt.points_frag},dashed:{uniforms:li([Pe.common,Pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Bt.linedashed_vert,fragmentShader:Bt.linedashed_frag},depth:{uniforms:li([Pe.common,Pe.displacementmap]),vertexShader:Bt.depth_vert,fragmentShader:Bt.depth_frag},normal:{uniforms:li([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,{opacity:{value:1}}]),vertexShader:Bt.meshnormal_vert,fragmentShader:Bt.meshnormal_frag},sprite:{uniforms:li([Pe.sprite,Pe.fog]),vertexShader:Bt.sprite_vert,fragmentShader:Bt.sprite_frag},background:{uniforms:{uvTransform:{value:new Ln},t2D:{value:null}},vertexShader:Bt.background_vert,fragmentShader:Bt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:Bt.backgroundCube_vert,fragmentShader:Bt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Bt.cube_vert,fragmentShader:Bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Bt.equirect_vert,fragmentShader:Bt.equirect_frag},distanceRGBA:{uniforms:li([Pe.common,Pe.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Bt.distanceRGBA_vert,fragmentShader:Bt.distanceRGBA_frag},shadow:{uniforms:li([Pe.lights,Pe.fog,{color:{value:new Ve(0)},opacity:{value:1}}]),vertexShader:Bt.shadow_vert,fragmentShader:Bt.shadow_frag}};oa.physical={uniforms:li([oa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ze(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Ve(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ve(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ve(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag};function jte(n,e,t,r,i,s,o){const a=new Ve(0);let l=s===!0?0:1,A,c,u=null,h=0,d=null;function p(m,g){let v=!1,w=g.isScene===!0?g.background:null;w&&w.isTexture&&(w=(g.backgroundBlurriness>0?t:e).get(w));const B=n.xr,C=B.getSession&&B.getSession();C&&C.environmentBlendMode==="additive"&&(w=null),w===null?f(a,l):w&&w.isColor&&(f(w,1),v=!0),(n.autoClear||v)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),w&&(w.isCubeTexture||w.mapping===KC)?(c===void 0&&(c=new In(new d0(1,1,1),new Sr({name:"BackgroundCubeMaterial",uniforms:bf(oa.backgroundCube.uniforms),vertexShader:oa.backgroundCube.vertexShader,fragmentShader:oa.backgroundCube.fragmentShader,side:yi,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(b,F,x){this.matrixWorld.copyPosition(x.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=w,c.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,(u!==w||h!==w.version||d!==n.toneMapping)&&(c.material.needsUpdate=!0,u=w,h=w.version,d=n.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):w&&w.isTexture&&(A===void 0&&(A=new In(new ku(2,2),new Sr({name:"BackgroundMaterial",uniforms:bf(oa.background.uniforms),vertexShader:oa.background.vertexShader,fragmentShader:oa.background.fragmentShader,side:Lo,depthTest:!1,depthWrite:!1,fog:!1})),A.geometry.deleteAttribute("normal"),Object.defineProperty(A.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(A)),A.material.uniforms.t2D.value=w,w.matrixAutoUpdate===!0&&w.updateMatrix(),A.material.uniforms.uvTransform.value.copy(w.matrix),(u!==w||h!==w.version||d!==n.toneMapping)&&(A.material.needsUpdate=!0,u=w,h=w.version,d=n.toneMapping),A.layers.enableAll(),m.unshift(A,A.geometry,A.material,0,0,null))}function f(m,g){r.buffers.color.setClear(m.r,m.g,m.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(m,g=1){a.set(m),l=g,f(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,f(a,l)},render:p}}function Kte(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=m(null);let A=l,c=!1;function u(y,I,R,D,k){let V=!1;if(o){const Z=f(D,R,I);A!==Z&&(A=Z,d(A.object)),V=g(y,D,R,k),V&&v(y,D,R,k)}else{const Z=I.wireframe===!0;(A.geometry!==D.id||A.program!==R.id||A.wireframe!==Z)&&(A.geometry=D.id,A.program=R.id,A.wireframe=Z,V=!0)}k!==null&&t.update(k,34963),(V||c)&&(c=!1,x(y,I,R,D),k!==null&&n.bindBuffer(34963,t.get(k).buffer))}function h(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function d(y){return r.isWebGL2?n.bindVertexArray(y):s.bindVertexArrayOES(y)}function p(y){return r.isWebGL2?n.deleteVertexArray(y):s.deleteVertexArrayOES(y)}function f(y,I,R){const D=R.wireframe===!0;let k=a[y.id];k===void 0&&(k={},a[y.id]=k);let V=k[I.id];V===void 0&&(V={},k[I.id]=V);let Z=V[D];return Z===void 0&&(Z=m(h()),V[D]=Z),Z}function m(y){const I=[],R=[],D=[];for(let k=0;k<i;k++)I[k]=0,R[k]=0,D[k]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:R,attributeDivisors:D,object:y,attributes:{},index:null}}function g(y,I,R,D){const k=A.attributes,V=I.attributes;let Z=0;const N=R.getAttributes();for(const _ in N)if(N[_].location>=0){const ie=k[_];let T=V[_];if(T===void 0&&(_==="instanceMatrix"&&y.instanceMatrix&&(T=y.instanceMatrix),_==="instanceColor"&&y.instanceColor&&(T=y.instanceColor)),ie===void 0||ie.attribute!==T||T&&ie.data!==T.data)return!0;Z++}return A.attributesNum!==Z||A.index!==D}function v(y,I,R,D){const k={},V=I.attributes;let Z=0;const N=R.getAttributes();for(const _ in N)if(N[_].location>=0){let ie=V[_];ie===void 0&&(_==="instanceMatrix"&&y.instanceMatrix&&(ie=y.instanceMatrix),_==="instanceColor"&&y.instanceColor&&(ie=y.instanceColor));const T={};T.attribute=ie,ie&&ie.data&&(T.data=ie.data),k[_]=T,Z++}A.attributes=k,A.attributesNum=Z,A.index=D}function w(){const y=A.newAttributes;for(let I=0,R=y.length;I<R;I++)y[I]=0}function B(y){C(y,0)}function C(y,I){const R=A.newAttributes,D=A.enabledAttributes,k=A.attributeDivisors;R[y]=1,D[y]===0&&(n.enableVertexAttribArray(y),D[y]=1),k[y]!==I&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](y,I),k[y]=I)}function b(){const y=A.newAttributes,I=A.enabledAttributes;for(let R=0,D=I.length;R<D;R++)I[R]!==y[R]&&(n.disableVertexAttribArray(R),I[R]=0)}function F(y,I,R,D,k,V){r.isWebGL2===!0&&(R===5124||R===5125)?n.vertexAttribIPointer(y,I,R,k,V):n.vertexAttribPointer(y,I,R,D,k,V)}function x(y,I,R,D){if(r.isWebGL2===!1&&(y.isInstancedMesh||D.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;w();const k=D.attributes,V=R.getAttributes(),Z=I.defaultAttributeValues;for(const N in V){const _=V[N];if(_.location>=0){let z=k[N];if(z===void 0&&(N==="instanceMatrix"&&y.instanceMatrix&&(z=y.instanceMatrix),N==="instanceColor"&&y.instanceColor&&(z=y.instanceColor)),z!==void 0){const ie=z.normalized,T=z.itemSize,q=t.get(z);if(q===void 0)continue;const ge=q.buffer,he=q.type,Ae=q.bytesPerElement;if(z.isInterleavedBufferAttribute){const $=z.data,ce=$.stride,me=z.offset;if($.isInstancedInterleavedBuffer){for(let _e=0;_e<_.locationSize;_e++)C(_.location+_e,$.meshPerAttribute);y.isInstancedMesh!==!0&&D._maxInstanceCount===void 0&&(D._maxInstanceCount=$.meshPerAttribute*$.count)}else for(let _e=0;_e<_.locationSize;_e++)B(_.location+_e);n.bindBuffer(34962,ge);for(let _e=0;_e<_.locationSize;_e++)F(_.location+_e,T/_.locationSize,he,ie,ce*Ae,(me+T/_.locationSize*_e)*Ae)}else{if(z.isInstancedBufferAttribute){for(let $=0;$<_.locationSize;$++)C(_.location+$,z.meshPerAttribute);y.isInstancedMesh!==!0&&D._maxInstanceCount===void 0&&(D._maxInstanceCount=z.meshPerAttribute*z.count)}else for(let $=0;$<_.locationSize;$++)B(_.location+$);n.bindBuffer(34962,ge);for(let $=0;$<_.locationSize;$++)F(_.location+$,T/_.locationSize,he,ie,T*Ae,T/_.locationSize*$*Ae)}}else if(Z!==void 0){const ie=Z[N];if(ie!==void 0)switch(ie.length){case 2:n.vertexAttrib2fv(_.location,ie);break;case 3:n.vertexAttrib3fv(_.location,ie);break;case 4:n.vertexAttrib4fv(_.location,ie);break;default:n.vertexAttrib1fv(_.location,ie)}}}}b()}function E(){O();for(const y in a){const I=a[y];for(const R in I){const D=I[R];for(const k in D)p(D[k].object),delete D[k];delete I[R]}delete a[y]}}function M(y){if(a[y.id]===void 0)return;const I=a[y.id];for(const R in I){const D=I[R];for(const k in D)p(D[k].object),delete D[k];delete I[R]}delete a[y.id]}function H(y){for(const I in a){const R=a[I];if(R[y.id]===void 0)continue;const D=R[y.id];for(const k in D)p(D[k].object),delete D[k];delete R[y.id]}}function O(){U(),c=!0,A!==l&&(A=l,d(A.object))}function U(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:O,resetDefaultState:U,dispose:E,releaseStatesOfGeometry:M,releaseStatesOfProgram:H,initAttributes:w,enableAttribute:B,disableUnusedAttributes:b}}function $te(n,e,t,r){const i=r.isWebGL2;let s;function o(A){s=A}function a(A,c){n.drawArrays(s,A,c),t.update(c,s,1)}function l(A,c,u){if(u===0)return;let h,d;if(i)h=n,d="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[d](s,A,c,u),t.update(c,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function qte(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(F){if(F==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";F="mediump"}return F==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const A=o||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,u=n.getParameter(34930),h=n.getParameter(35660),d=n.getParameter(3379),p=n.getParameter(34076),f=n.getParameter(34921),m=n.getParameter(36347),g=n.getParameter(36348),v=n.getParameter(36349),w=h>0,B=o||e.has("OES_texture_float"),C=w&&B,b=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:A,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:w,floatFragmentTextures:B,floatVertexTextures:C,maxSamples:b}}function ene(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new gl,a=new Ln,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h,d){const p=u.length!==0||h||r!==0||i;return i=h,t=c(u,d,0),r=u.length,p},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,A()},this.setState=function(u,h,d){const p=u.clippingPlanes,f=u.clipIntersection,m=u.clipShadows,g=n.get(u);if(!i||p===null||p.length===0||s&&!m)s?c(null):A();else{const v=s?0:r,w=v*4;let B=g.clippingState||null;l.value=B,B=c(p,h,w,d);for(let C=0;C!==w;++C)B[C]=t[C];g.clippingState=B,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=v}};function A(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(u,h,d,p){const f=u!==null?u.length:0;let m=null;if(f!==0){if(m=l.value,p!==!0||m===null){const g=d+f*4,v=h.matrixWorldInverse;a.getNormalMatrix(v),(m===null||m.length<g)&&(m=new Float32Array(g));for(let w=0,B=d;w!==f;++w,B+=4)o.copy(u[w]).applyMatrix4(v,a),o.normal.toArray(m,B),m[B+3]=o.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=f,e.numIntersection=0,m}}function tne(n){let e=new WeakMap;function t(o,a){return a===mB?o.mapping=yf:a===y_&&(o.mapping=wf),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===mB||a===y_)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const A=new fq(l.height/2);return A.fromEquirectangularTexture(n,o),e.set(o,A),o.addEventListener("dispose",i),t(A.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Du extends cG{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const A=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=A*this.view.offsetX,o=s+A*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Ih=4,ET=[.125,.215,.35,.446,.526,.582],Gc=20,C1=new Du,ST=new Ve;let b1=null;const Vc=(1+Math.sqrt(5))/2,hd=1/Vc,UT=[new j(1,1,1),new j(-1,1,1),new j(1,1,-1),new j(-1,1,-1),new j(0,Vc,hd),new j(0,Vc,-hd),new j(hd,0,Vc),new j(-hd,0,Vc),new j(Vc,hd,0),new j(-Vc,hd,0)];class QT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){b1=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=TT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=MT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(b1),e.scissorTest=!1,_v(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===yf||e.mapping===wf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),b1=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:ci,minFilter:ci,generateMipmaps:!1,type:Sm,format:Ir,encoding:gs,depthBuffer:!1},i=RT(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=RT(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=nne(s)),this._blurMaterial=rne(s,e,t)}return i}_compileMaterial(e){const t=new In(this._lodPlanes[0],e);this._renderer.compile(t,C1)}_sceneToCubeUV(e,t,r,i){const a=new Nr(90,1,t,r),l=[1,-1,1,1,1,1],A=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear,h=c.toneMapping;c.getClearColor(ST),c.toneMapping=Fl,c.autoClear=!1;const d=new Ri({name:"PMREM.Background",side:yi,depthWrite:!1,depthTest:!1}),p=new In(new d0,d);let f=!1;const m=e.background;m?m.isColor&&(d.color.copy(m),e.background=null,f=!0):(d.color.copy(ST),f=!0);for(let g=0;g<6;g++){const v=g%3;v===0?(a.up.set(0,l[g],0),a.lookAt(A[g],0,0)):v===1?(a.up.set(0,0,l[g]),a.lookAt(0,A[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,A[g]));const w=this._cubeSize;_v(i,v*w,g>2?w:0,w,w),c.setRenderTarget(i),f&&c.render(p,a),c.render(e,a)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=h,c.autoClear=u,e.background=m}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===yf||e.mapping===wf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=TT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=MT());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new In(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;_v(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,C1)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=UT[(i-1)%UT.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,A=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,u=new In(this._lodPlanes[i],A),h=A.uniforms,d=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*Gc-1),f=s/p,m=isFinite(s)?1+Math.floor(c*f):Gc;m>Gc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Gc}`);const g=[];let v=0;for(let F=0;F<Gc;++F){const x=F/f,E=Math.exp(-x*x/2);g.push(E),F===0?v+=E:F<m&&(v+=2*E)}for(let F=0;F<g.length;F++)g[F]=g[F]/v;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=g,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:w}=this;h.dTheta.value=p,h.mipInt.value=w-r;const B=this._sizeLods[i],C=3*B*(i>w-Ih?i-w+Ih:0),b=4*(this._cubeSize-B);_v(t,C,b,3*B,2*B),l.setRenderTarget(t),l.render(u,C1)}}function nne(n){const e=[],t=[],r=[];let i=n;const s=n-Ih+1+ET.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Ih?l=ET[o-n+Ih-1]:o===0&&(l=0),r.push(l);const A=1/(a-2),c=-A,u=1+A,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),w=new Float32Array(m*p*d),B=new Float32Array(g*p*d);for(let b=0;b<d;b++){const F=b%3*2/3-1,x=b>2?0:-1,E=[F,x,0,F+2/3,x,0,F+2/3,x+1,0,F,x,0,F+2/3,x+1,0,F,x+1,0];v.set(E,f*p*b),w.set(h,m*p*b);const M=[b,b,b,b,b,b];B.set(M,g*p*b)}const C=new zt;C.setAttribute("position",new ut(v,f)),C.setAttribute("uv",new ut(w,m)),C.setAttribute("faceIndex",new ut(B,g)),e.push(C),i>Ih&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function RT(n,e,t){const r=new Qa(n,e,t);return r.texture.mapping=KC,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function _v(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function rne(n,e,t){const r=new Float32Array(Gc),i=new j(0,1,0);return new Sr({name:"SphericalGaussianBlur",defines:{n:Gc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:BU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:YA,depthTest:!1,depthWrite:!1})}function MT(){return new Sr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:BU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:YA,depthTest:!1,depthWrite:!1})}function TT(){return new Sr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:BU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:YA,depthTest:!1,depthWrite:!1})}function BU(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ine(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,A=l===mB||l===y_,c=l===yf||l===wf;if(A||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=e.get(a);return t===null&&(t=new QT(n)),u=A?t.fromEquirectangular(a,u):t.fromCubemap(a,u),e.set(a,u),u.texture}else{if(e.has(a))return e.get(a).texture;{const u=a.image;if(A&&u&&u.height>0||c&&u&&i(u)){t===null&&(t=new QT(n));const h=A?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}else return null}}}return a}function i(a){let l=0;const A=6;for(let c=0;c<A;c++)a[c]!==void 0&&l++;return l===A}function s(a){const l=a.target;l.removeEventListener("dispose",s);const A=e.get(l);A!==void 0&&(e.delete(l),A.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function sne(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function one(n,e,t,r){const i={},s=new WeakMap;function o(u){const h=u.target;h.index!==null&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete i[h.id];const d=s.get(h);d&&(e.remove(d),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(u,h){return i[h.id]===!0||(h.addEventListener("dispose",o),i[h.id]=!0,t.memory.geometries++),h}function l(u){const h=u.attributes;for(const p in h)e.update(h[p],34962);const d=u.morphAttributes;for(const p in d){const f=d[p];for(let m=0,g=f.length;m<g;m++)e.update(f[m],34962)}}function A(u){const h=[],d=u.index,p=u.attributes.position;let f=0;if(d!==null){const v=d.array;f=d.version;for(let w=0,B=v.length;w<B;w+=3){const C=v[w+0],b=v[w+1],F=v[w+2];h.push(C,b,b,F,F,C)}}else{const v=p.array;f=p.version;for(let w=0,B=v.length/3-1;w<B;w+=3){const C=w+0,b=w+1,F=w+2;h.push(C,b,b,F,F,C)}}const m=new(sG(h)?AG:$C)(h,1);m.version=f;const g=s.get(u);g&&e.remove(g),s.set(u,m)}function c(u){const h=s.get(u);if(h){const d=u.index;d!==null&&h.version<d.version&&A(u)}else A(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:c}}function ane(n,e,t,r){const i=r.isWebGL2;let s;function o(h){s=h}let a,l;function A(h){a=h.type,l=h.bytesPerElement}function c(h,d){n.drawElements(s,d,a,h*l),t.update(d,s,1)}function u(h,d,p){if(p===0)return;let f,m;if(i)f=n,m="drawElementsInstanced";else if(f=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",f===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[m](s,d,a,h*l,p),t.update(d,s,p)}this.setMode=o,this.setIndex=A,this.render=c,this.renderInstances=u}function lne(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Ane(n,e){return n[0]-e[0]}function cne(n,e){return Math.abs(e[1])-Math.abs(n[1])}function une(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new Nt,a=[];for(let A=0;A<8;A++)a[A]=[A,0];function l(A,c,u,h){const d=A.morphTargetInfluences;if(e.isWebGL2===!0){const p=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,f=p!==void 0?p.length:0;let m=s.get(c);if(m===void 0||m.count!==f){let I=function(){U.dispose(),s.delete(c),c.removeEventListener("dispose",I)};m!==void 0&&m.texture.dispose();const w=c.morphAttributes.position!==void 0,B=c.morphAttributes.normal!==void 0,C=c.morphAttributes.color!==void 0,b=c.morphAttributes.position||[],F=c.morphAttributes.normal||[],x=c.morphAttributes.color||[];let E=0;w===!0&&(E=1),B===!0&&(E=2),C===!0&&(E=3);let M=c.attributes.position.count*E,H=1;M>e.maxTextureSize&&(H=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const O=new Float32Array(M*H*4*f),U=new lG(O,M,H,f);U.type=RA,U.needsUpdate=!0;const y=E*4;for(let R=0;R<f;R++){const D=b[R],k=F[R],V=x[R],Z=M*H*4*R;for(let N=0;N<D.count;N++){const _=N*y;w===!0&&(o.fromBufferAttribute(D,N),O[Z+_+0]=o.x,O[Z+_+1]=o.y,O[Z+_+2]=o.z,O[Z+_+3]=0),B===!0&&(o.fromBufferAttribute(k,N),O[Z+_+4]=o.x,O[Z+_+5]=o.y,O[Z+_+6]=o.z,O[Z+_+7]=0),C===!0&&(o.fromBufferAttribute(V,N),O[Z+_+8]=o.x,O[Z+_+9]=o.y,O[Z+_+10]=o.z,O[Z+_+11]=V.itemSize===4?o.w:1)}}m={count:f,texture:U,size:new ze(M,H)},s.set(c,m),c.addEventListener("dispose",I)}let g=0;for(let w=0;w<d.length;w++)g+=d[w];const v=c.morphTargetsRelative?1:1-g;h.getUniforms().setValue(n,"morphTargetBaseInfluence",v),h.getUniforms().setValue(n,"morphTargetInfluences",d),h.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}else{const p=d===void 0?0:d.length;let f=r[c.id];if(f===void 0||f.length!==p){f=[];for(let B=0;B<p;B++)f[B]=[B,0];r[c.id]=f}for(let B=0;B<p;B++){const C=f[B];C[0]=B,C[1]=d[B]}f.sort(cne);for(let B=0;B<8;B++)B<p&&f[B][1]?(a[B][0]=f[B][0],a[B][1]=f[B][1]):(a[B][0]=Number.MAX_SAFE_INTEGER,a[B][1]=0);a.sort(Ane);const m=c.morphAttributes.position,g=c.morphAttributes.normal;let v=0;for(let B=0;B<8;B++){const C=a[B],b=C[0],F=C[1];b!==Number.MAX_SAFE_INTEGER&&F?(m&&c.getAttribute("morphTarget"+B)!==m[b]&&c.setAttribute("morphTarget"+B,m[b]),g&&c.getAttribute("morphNormal"+B)!==g[b]&&c.setAttribute("morphNormal"+B,g[b]),i[B]=F,v+=F):(m&&c.hasAttribute("morphTarget"+B)===!0&&c.deleteAttribute("morphTarget"+B),g&&c.hasAttribute("morphNormal"+B)===!0&&c.deleteAttribute("morphNormal"+B),i[B]=0)}const w=c.morphTargetsRelative?1:1-v;h.getUniforms().setValue(n,"morphTargetBaseInfluence",w),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function dne(n,e,t,r){let i=new WeakMap;function s(l){const A=r.render.frame,c=l.geometry,u=e.get(l,c);return i.get(u)!==A&&(e.update(u),i.set(u,A)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),u}function o(){i=new WeakMap}function a(l){const A=l.target;A.removeEventListener("dispose",a),t.remove(A.instanceMatrix),A.instanceColor!==null&&t.remove(A.instanceColor)}return{update:s,dispose:o}}const hG=new or,fG=new lG,pG=new q$,gG=new uG,NT=[],kT=[],DT=new Float32Array(16),LT=new Float32Array(9),VT=new Float32Array(4);function Lf(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=NT[i];if(s===void 0&&(s=new Float32Array(i),NT[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function vr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function yr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function qC(n,e){let t=kT[e];t===void 0&&(t=new Int32Array(e),kT[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function hne(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function fne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vr(t,e))return;n.uniform2fv(this.addr,e),yr(t,e)}}function pne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(vr(t,e))return;n.uniform3fv(this.addr,e),yr(t,e)}}function gne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vr(t,e))return;n.uniform4fv(this.addr,e),yr(t,e)}}function mne(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(vr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),yr(t,e)}else{if(vr(t,r))return;VT.set(r),n.uniformMatrix2fv(this.addr,!1,VT),yr(t,r)}}function vne(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(vr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),yr(t,e)}else{if(vr(t,r))return;LT.set(r),n.uniformMatrix3fv(this.addr,!1,LT),yr(t,r)}}function yne(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(vr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),yr(t,e)}else{if(vr(t,r))return;DT.set(r),n.uniformMatrix4fv(this.addr,!1,DT),yr(t,r)}}function wne(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Bne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vr(t,e))return;n.uniform2iv(this.addr,e),yr(t,e)}}function Cne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(vr(t,e))return;n.uniform3iv(this.addr,e),yr(t,e)}}function bne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vr(t,e))return;n.uniform4iv(this.addr,e),yr(t,e)}}function xne(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Ine(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vr(t,e))return;n.uniform2uiv(this.addr,e),yr(t,e)}}function Fne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(vr(t,e))return;n.uniform3uiv(this.addr,e),yr(t,e)}}function _ne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vr(t,e))return;n.uniform4uiv(this.addr,e),yr(t,e)}}function Ene(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||hG,i)}function Sne(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||pG,i)}function Une(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||gG,i)}function Qne(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||fG,i)}function Rne(n){switch(n){case 5126:return hne;case 35664:return fne;case 35665:return pne;case 35666:return gne;case 35674:return mne;case 35675:return vne;case 35676:return yne;case 5124:case 35670:return wne;case 35667:case 35671:return Bne;case 35668:case 35672:return Cne;case 35669:case 35673:return bne;case 5125:return xne;case 36294:return Ine;case 36295:return Fne;case 36296:return _ne;case 35678:case 36198:case 36298:case 36306:case 35682:return Ene;case 35679:case 36299:case 36307:return Sne;case 35680:case 36300:case 36308:case 36293:return Une;case 36289:case 36303:case 36311:case 36292:return Qne}}function Mne(n,e){n.uniform1fv(this.addr,e)}function Tne(n,e){const t=Lf(e,this.size,2);n.uniform2fv(this.addr,t)}function Nne(n,e){const t=Lf(e,this.size,3);n.uniform3fv(this.addr,t)}function kne(n,e){const t=Lf(e,this.size,4);n.uniform4fv(this.addr,t)}function Dne(n,e){const t=Lf(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Lne(n,e){const t=Lf(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Vne(n,e){const t=Lf(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Pne(n,e){n.uniform1iv(this.addr,e)}function One(n,e){n.uniform2iv(this.addr,e)}function Wne(n,e){n.uniform3iv(this.addr,e)}function Zne(n,e){n.uniform4iv(this.addr,e)}function Gne(n,e){n.uniform1uiv(this.addr,e)}function Jne(n,e){n.uniform2uiv(this.addr,e)}function Hne(n,e){n.uniform3uiv(this.addr,e)}function zne(n,e){n.uniform4uiv(this.addr,e)}function Yne(n,e,t){const r=this.cache,i=e.length,s=qC(t,i);vr(r,s)||(n.uniform1iv(this.addr,s),yr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||hG,s[o])}function Xne(n,e,t){const r=this.cache,i=e.length,s=qC(t,i);vr(r,s)||(n.uniform1iv(this.addr,s),yr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||pG,s[o])}function jne(n,e,t){const r=this.cache,i=e.length,s=qC(t,i);vr(r,s)||(n.uniform1iv(this.addr,s),yr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||gG,s[o])}function Kne(n,e,t){const r=this.cache,i=e.length,s=qC(t,i);vr(r,s)||(n.uniform1iv(this.addr,s),yr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||fG,s[o])}function $ne(n){switch(n){case 5126:return Mne;case 35664:return Tne;case 35665:return Nne;case 35666:return kne;case 35674:return Dne;case 35675:return Lne;case 35676:return Vne;case 5124:case 35670:return Pne;case 35667:case 35671:return One;case 35668:case 35672:return Wne;case 35669:case 35673:return Zne;case 5125:return Gne;case 36294:return Jne;case 36295:return Hne;case 36296:return zne;case 35678:case 36198:case 36298:case 36306:case 35682:return Yne;case 35679:case 36299:case 36307:return Xne;case 35680:case 36300:case 36308:case 36293:return jne;case 36289:case 36303:case 36311:case 36292:return Kne}}class qne{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=Rne(t.type)}}class ere{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=$ne(t.type)}}class tre{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const x1=/(\w+)(\])?(\[|\.)?/g;function PT(n,e){n.seq.push(e),n.map[e.id]=e}function nre(n,e,t){const r=n.name,i=r.length;for(x1.lastIndex=0;;){const s=x1.exec(r),o=x1.lastIndex;let a=s[1];const l=s[2]==="]",A=s[3];if(l&&(a=a|0),A===void 0||A==="["&&o+2===i){PT(t,A===void 0?new qne(a,n,e):new ere(a,n,e));break}else{let u=t.map[a];u===void 0&&(u=new tre(a),PT(t,u)),t=u}}}class aw{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);nre(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function OT(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let rre=0;function ire(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function sre(n){switch(n){case gs:return["Linear","( value )"];case gt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function WT(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+ire(n.getShaderSource(e),o)}else return i}function ore(n,e){const t=sre(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function are(n,e){let t;switch(e){case A$:t="Linear";break;case c$:t="Reinhard";break;case u$:t="OptimizedCineon";break;case d$:t="ACESFilmic";break;case h$:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function lre(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(pg).join(`
`)}function Are(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function cre(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function pg(n){return n!==""}function ZT(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function GT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ure=/^[ \t]*#include +<([\w\d./]+)>/gm;function b_(n){return n.replace(ure,dre)}function dre(n,e){const t=Bt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return b_(t)}const hre=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function JT(n){return n.replace(hre,fre)}function fre(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function HT(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function pre(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===$Z?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===O7?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===fg&&(e="SHADOWMAP_TYPE_VSM"),e}function gre(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case yf:case wf:e="ENVMAP_TYPE_CUBE";break;case KC:e="ENVMAP_TYPE_CUBE_UV";break}return e}function mre(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case wf:e="ENVMAP_MODE_REFRACTION";break}return e}function vre(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case jC:e="ENVMAP_BLENDING_MULTIPLY";break;case a$:e="ENVMAP_BLENDING_MIX";break;case l$:e="ENVMAP_BLENDING_ADD";break}return e}function yre(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function wre(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=pre(t),A=gre(t),c=mre(t),u=vre(t),h=yre(t),d=t.isWebGL2?"":lre(t),p=Are(s),f=i.createProgram();let m,g,v=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(m=[p].filter(pg).join(`
`),m.length>0&&(m+=`
`),g=[d,p].filter(pg).join(`
`),g.length>0&&(g+=`
`)):(m=[HT(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(pg).join(`
`),g=[d,HT(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+A:"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Fl?"#define TONE_MAPPING":"",t.toneMapping!==Fl?Bt.tonemapping_pars_fragment:"",t.toneMapping!==Fl?are("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Bt.encodings_pars_fragment,ore("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(pg).join(`
`)),o=b_(o),o=ZT(o,t),o=GT(o,t),a=b_(a),a=ZT(a,t),a=GT(a,t),o=JT(o),a=JT(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,g=["#define varying in",t.glslVersion===gT?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===gT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const w=v+m+o,B=v+g+a,C=OT(i,35633,w),b=OT(i,35632,B);if(i.attachShader(f,C),i.attachShader(f,b),t.index0AttributeName!==void 0?i.bindAttribLocation(f,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(f,0,"position"),i.linkProgram(f),n.debug.checkShaderErrors){const E=i.getProgramInfoLog(f).trim(),M=i.getShaderInfoLog(C).trim(),H=i.getShaderInfoLog(b).trim();let O=!0,U=!0;if(i.getProgramParameter(f,35714)===!1){O=!1;const y=WT(i,C,"vertex"),I=WT(i,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(f,35715)+`

Program Info Log: `+E+`
`+y+`
`+I)}else E!==""?console.warn("THREE.WebGLProgram: Program Info Log:",E):(M===""||H==="")&&(U=!1);U&&(this.diagnostics={runnable:O,programLog:E,vertexShader:{log:M,prefix:m},fragmentShader:{log:H,prefix:g}})}i.deleteShader(C),i.deleteShader(b);let F;this.getUniforms=function(){return F===void 0&&(F=new aw(i,f)),F};let x;return this.getAttributes=function(){return x===void 0&&(x=cre(i,f)),x},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(f),this.program=void 0},this.name=t.shaderName,this.id=rre++,this.cacheKey=e,this.usedTimes=1,this.program=f,this.vertexShader=C,this.fragmentShader=b,this}let Bre=0;class Cre{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new bre(e),t.set(e,r)),r}}class bre{constructor(e){this.id=Bre++,this.code=e,this.usedTimes=0}}function xre(n,e,t,r,i,s,o){const a=new vU,l=new Cre,A=[],c=i.isWebGL2,u=i.logarithmicDepthBuffer,h=i.vertexTextures;let d=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function f(x,E,M,H,O){const U=H.fog,y=O.geometry,I=x.isMeshStandardMaterial?H.environment:null,R=(x.isMeshStandardMaterial?t:e).get(x.envMap||I),D=R&&R.mapping===KC?R.image.height:null,k=p[x.type];x.precision!==null&&(d=i.getMaxPrecision(x.precision),d!==x.precision&&console.warn("THREE.WebGLProgram.getParameters:",x.precision,"not supported, using",d,"instead."));const V=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,Z=V!==void 0?V.length:0;let N=0;y.morphAttributes.position!==void 0&&(N=1),y.morphAttributes.normal!==void 0&&(N=2),y.morphAttributes.color!==void 0&&(N=3);let _,z,ie,T;if(k){const ce=oa[k];_=ce.vertexShader,z=ce.fragmentShader}else _=x.vertexShader,z=x.fragmentShader,l.update(x),ie=l.getVertexShaderID(x),T=l.getFragmentShaderID(x);const q=n.getRenderTarget(),ge=x.alphaTest>0,he=x.clearcoat>0,Ae=x.iridescence>0;return{isWebGL2:c,shaderID:k,shaderName:x.type,vertexShader:_,fragmentShader:z,defines:x.defines,customVertexShaderID:ie,customFragmentShaderID:T,isRawShaderMaterial:x.isRawShaderMaterial===!0,glslVersion:x.glslVersion,precision:d,instancing:O.isInstancedMesh===!0,instancingColor:O.isInstancedMesh===!0&&O.instanceColor!==null,supportsVertexTextures:h,outputEncoding:q===null?n.outputEncoding:q.isXRRenderTarget===!0?q.texture.encoding:gs,map:!!x.map,matcap:!!x.matcap,envMap:!!R,envMapMode:R&&R.mapping,envMapCubeUVHeight:D,lightMap:!!x.lightMap,aoMap:!!x.aoMap,emissiveMap:!!x.emissiveMap,bumpMap:!!x.bumpMap,normalMap:!!x.normalMap,objectSpaceNormalMap:x.normalMapType===k$,tangentSpaceNormalMap:x.normalMapType===Tu,decodeVideoTexture:!!x.map&&x.map.isVideoTexture===!0&&x.map.encoding===gt,clearcoat:he,clearcoatMap:he&&!!x.clearcoatMap,clearcoatRoughnessMap:he&&!!x.clearcoatRoughnessMap,clearcoatNormalMap:he&&!!x.clearcoatNormalMap,iridescence:Ae,iridescenceMap:Ae&&!!x.iridescenceMap,iridescenceThicknessMap:Ae&&!!x.iridescenceThicknessMap,displacementMap:!!x.displacementMap,roughnessMap:!!x.roughnessMap,metalnessMap:!!x.metalnessMap,specularMap:!!x.specularMap,specularIntensityMap:!!x.specularIntensityMap,specularColorMap:!!x.specularColorMap,opaque:x.transparent===!1&&x.blending===Zh,alphaMap:!!x.alphaMap,alphaTest:ge,gradientMap:!!x.gradientMap,sheen:x.sheen>0,sheenColorMap:!!x.sheenColorMap,sheenRoughnessMap:!!x.sheenRoughnessMap,transmission:x.transmission>0,transmissionMap:!!x.transmissionMap,thicknessMap:!!x.thicknessMap,combine:x.combine,vertexTangents:!!x.normalMap&&!!y.attributes.tangent,vertexColors:x.vertexColors,vertexAlphas:x.vertexColors===!0&&!!y.attributes.color&&y.attributes.color.itemSize===4,vertexUvs:!!x.map||!!x.bumpMap||!!x.normalMap||!!x.specularMap||!!x.alphaMap||!!x.emissiveMap||!!x.roughnessMap||!!x.metalnessMap||!!x.clearcoatMap||!!x.clearcoatRoughnessMap||!!x.clearcoatNormalMap||!!x.iridescenceMap||!!x.iridescenceThicknessMap||!!x.displacementMap||!!x.transmissionMap||!!x.thicknessMap||!!x.specularIntensityMap||!!x.specularColorMap||!!x.sheenColorMap||!!x.sheenRoughnessMap,uvsVertexOnly:!(x.map||x.bumpMap||x.normalMap||x.specularMap||x.alphaMap||x.emissiveMap||x.roughnessMap||x.metalnessMap||x.clearcoatNormalMap||x.iridescenceMap||x.iridescenceThicknessMap||x.transmission>0||x.transmissionMap||x.thicknessMap||x.specularIntensityMap||x.specularColorMap||x.sheen>0||x.sheenColorMap||x.sheenRoughnessMap)&&!!x.displacementMap,fog:!!U,useFog:x.fog===!0,fogExp2:U&&U.isFogExp2,flatShading:!!x.flatShading,sizeAttenuation:x.sizeAttenuation,logarithmicDepthBuffer:u,skinning:O.isSkinnedMesh===!0,morphTargets:y.morphAttributes.position!==void 0,morphNormals:y.morphAttributes.normal!==void 0,morphColors:y.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:N,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:x.dithering,shadowMapEnabled:n.shadowMap.enabled&&M.length>0,shadowMapType:n.shadowMap.type,toneMapping:x.toneMapped?n.toneMapping:Fl,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:x.premultipliedAlpha,doubleSided:x.side===mi,flipSided:x.side===yi,useDepthPacking:!!x.depthPacking,depthPacking:x.depthPacking||0,index0AttributeName:x.index0AttributeName,extensionDerivatives:x.extensions&&x.extensions.derivatives,extensionFragDepth:x.extensions&&x.extensions.fragDepth,extensionDrawBuffers:x.extensions&&x.extensions.drawBuffers,extensionShaderTextureLOD:x.extensions&&x.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:x.customProgramCacheKey()}}function m(x){const E=[];if(x.shaderID?E.push(x.shaderID):(E.push(x.customVertexShaderID),E.push(x.customFragmentShaderID)),x.defines!==void 0)for(const M in x.defines)E.push(M),E.push(x.defines[M]);return x.isRawShaderMaterial===!1&&(g(E,x),v(E,x),E.push(n.outputEncoding)),E.push(x.customProgramCacheKey),E.join()}function g(x,E){x.push(E.precision),x.push(E.outputEncoding),x.push(E.envMapMode),x.push(E.envMapCubeUVHeight),x.push(E.combine),x.push(E.vertexUvs),x.push(E.fogExp2),x.push(E.sizeAttenuation),x.push(E.morphTargetsCount),x.push(E.morphAttributeCount),x.push(E.numDirLights),x.push(E.numPointLights),x.push(E.numSpotLights),x.push(E.numSpotLightMaps),x.push(E.numHemiLights),x.push(E.numRectAreaLights),x.push(E.numDirLightShadows),x.push(E.numPointLightShadows),x.push(E.numSpotLightShadows),x.push(E.numSpotLightShadowsWithMaps),x.push(E.shadowMapType),x.push(E.toneMapping),x.push(E.numClippingPlanes),x.push(E.numClipIntersection),x.push(E.depthPacking)}function v(x,E){a.disableAll(),E.isWebGL2&&a.enable(0),E.supportsVertexTextures&&a.enable(1),E.instancing&&a.enable(2),E.instancingColor&&a.enable(3),E.map&&a.enable(4),E.matcap&&a.enable(5),E.envMap&&a.enable(6),E.lightMap&&a.enable(7),E.aoMap&&a.enable(8),E.emissiveMap&&a.enable(9),E.bumpMap&&a.enable(10),E.normalMap&&a.enable(11),E.objectSpaceNormalMap&&a.enable(12),E.tangentSpaceNormalMap&&a.enable(13),E.clearcoat&&a.enable(14),E.clearcoatMap&&a.enable(15),E.clearcoatRoughnessMap&&a.enable(16),E.clearcoatNormalMap&&a.enable(17),E.iridescence&&a.enable(18),E.iridescenceMap&&a.enable(19),E.iridescenceThicknessMap&&a.enable(20),E.displacementMap&&a.enable(21),E.specularMap&&a.enable(22),E.roughnessMap&&a.enable(23),E.metalnessMap&&a.enable(24),E.gradientMap&&a.enable(25),E.alphaMap&&a.enable(26),E.alphaTest&&a.enable(27),E.vertexColors&&a.enable(28),E.vertexAlphas&&a.enable(29),E.vertexUvs&&a.enable(30),E.vertexTangents&&a.enable(31),E.uvsVertexOnly&&a.enable(32),x.push(a.mask),a.disableAll(),E.fog&&a.enable(0),E.useFog&&a.enable(1),E.flatShading&&a.enable(2),E.logarithmicDepthBuffer&&a.enable(3),E.skinning&&a.enable(4),E.morphTargets&&a.enable(5),E.morphNormals&&a.enable(6),E.morphColors&&a.enable(7),E.premultipliedAlpha&&a.enable(8),E.shadowMapEnabled&&a.enable(9),E.physicallyCorrectLights&&a.enable(10),E.doubleSided&&a.enable(11),E.flipSided&&a.enable(12),E.useDepthPacking&&a.enable(13),E.dithering&&a.enable(14),E.specularIntensityMap&&a.enable(15),E.specularColorMap&&a.enable(16),E.transmission&&a.enable(17),E.transmissionMap&&a.enable(18),E.thicknessMap&&a.enable(19),E.sheen&&a.enable(20),E.sheenColorMap&&a.enable(21),E.sheenRoughnessMap&&a.enable(22),E.decodeVideoTexture&&a.enable(23),E.opaque&&a.enable(24),x.push(a.mask)}function w(x){const E=p[x.type];let M;if(E){const H=oa[E];M=yU.clone(H.uniforms)}else M=x.uniforms;return M}function B(x,E){let M;for(let H=0,O=A.length;H<O;H++){const U=A[H];if(U.cacheKey===E){M=U,++M.usedTimes;break}}return M===void 0&&(M=new wre(n,E,x,s),A.push(M)),M}function C(x){if(--x.usedTimes===0){const E=A.indexOf(x);A[E]=A[A.length-1],A.pop(),x.destroy()}}function b(x){l.remove(x)}function F(){l.dispose()}return{getParameters:f,getProgramCacheKey:m,getUniforms:w,acquireProgram:B,releaseProgram:C,releaseShaderCache:b,programs:A,dispose:F}}function Ire(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function Fre(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function zT(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function YT(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(u,h,d,p,f,m){let g=n[e];return g===void 0?(g={id:u.id,object:u,geometry:h,material:d,groupOrder:p,renderOrder:u.renderOrder,z:f,group:m},n[e]=g):(g.id=u.id,g.object=u,g.geometry=h,g.material=d,g.groupOrder=p,g.renderOrder=u.renderOrder,g.z=f,g.group=m),e++,g}function a(u,h,d,p,f,m){const g=o(u,h,d,p,f,m);d.transmission>0?r.push(g):d.transparent===!0?i.push(g):t.push(g)}function l(u,h,d,p,f,m){const g=o(u,h,d,p,f,m);d.transmission>0?r.unshift(g):d.transparent===!0?i.unshift(g):t.unshift(g)}function A(u,h){t.length>1&&t.sort(u||Fre),r.length>1&&r.sort(h||zT),i.length>1&&i.sort(h||zT)}function c(){for(let u=e,h=n.length;u<h;u++){const d=n[u];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:c,sort:A}}function _re(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new YT,n.set(r,[o])):i>=s.length?(o=new YT,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Ere(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new j,color:new Ve};break;case"SpotLight":t={position:new j,direction:new j,color:new Ve,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new j,color:new Ve,distance:0,decay:0};break;case"HemisphereLight":t={direction:new j,skyColor:new Ve,groundColor:new Ve};break;case"RectAreaLight":t={color:new Ve,position:new j,halfWidth:new j,halfHeight:new j};break}return n[e.id]=t,t}}}function Sre(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Ure=0;function Qre(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Rre(n,e){const t=new Ere,r=Sre(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new j);const s=new j,o=new Je,a=new Je;function l(c,u){let h=0,d=0,p=0;for(let H=0;H<9;H++)i.probe[H].set(0,0,0);let f=0,m=0,g=0,v=0,w=0,B=0,C=0,b=0,F=0,x=0;c.sort(Qre);const E=u!==!0?Math.PI:1;for(let H=0,O=c.length;H<O;H++){const U=c[H],y=U.color,I=U.intensity,R=U.distance,D=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)h+=y.r*I*E,d+=y.g*I*E,p+=y.b*I*E;else if(U.isLightProbe)for(let k=0;k<9;k++)i.probe[k].addScaledVector(U.sh.coefficients[k],I);else if(U.isDirectionalLight){const k=t.get(U);if(k.color.copy(U.color).multiplyScalar(U.intensity*E),U.castShadow){const V=U.shadow,Z=r.get(U);Z.shadowBias=V.bias,Z.shadowNormalBias=V.normalBias,Z.shadowRadius=V.radius,Z.shadowMapSize=V.mapSize,i.directionalShadow[f]=Z,i.directionalShadowMap[f]=D,i.directionalShadowMatrix[f]=U.shadow.matrix,B++}i.directional[f]=k,f++}else if(U.isSpotLight){const k=t.get(U);k.position.setFromMatrixPosition(U.matrixWorld),k.color.copy(y).multiplyScalar(I*E),k.distance=R,k.coneCos=Math.cos(U.angle),k.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),k.decay=U.decay,i.spot[g]=k;const V=U.shadow;if(U.map&&(i.spotLightMap[F]=U.map,F++,V.updateMatrices(U),U.castShadow&&x++),i.spotLightMatrix[g]=V.matrix,U.castShadow){const Z=r.get(U);Z.shadowBias=V.bias,Z.shadowNormalBias=V.normalBias,Z.shadowRadius=V.radius,Z.shadowMapSize=V.mapSize,i.spotShadow[g]=Z,i.spotShadowMap[g]=D,b++}g++}else if(U.isRectAreaLight){const k=t.get(U);k.color.copy(y).multiplyScalar(I),k.halfWidth.set(U.width*.5,0,0),k.halfHeight.set(0,U.height*.5,0),i.rectArea[v]=k,v++}else if(U.isPointLight){const k=t.get(U);if(k.color.copy(U.color).multiplyScalar(U.intensity*E),k.distance=U.distance,k.decay=U.decay,U.castShadow){const V=U.shadow,Z=r.get(U);Z.shadowBias=V.bias,Z.shadowNormalBias=V.normalBias,Z.shadowRadius=V.radius,Z.shadowMapSize=V.mapSize,Z.shadowCameraNear=V.camera.near,Z.shadowCameraFar=V.camera.far,i.pointShadow[m]=Z,i.pointShadowMap[m]=D,i.pointShadowMatrix[m]=U.shadow.matrix,C++}i.point[m]=k,m++}else if(U.isHemisphereLight){const k=t.get(U);k.skyColor.copy(U.color).multiplyScalar(I*E),k.groundColor.copy(U.groundColor).multiplyScalar(I*E),i.hemi[w]=k,w++}}v>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Pe.LTC_FLOAT_1,i.rectAreaLTC2=Pe.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Pe.LTC_HALF_1,i.rectAreaLTC2=Pe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=d,i.ambient[2]=p;const M=i.hash;(M.directionalLength!==f||M.pointLength!==m||M.spotLength!==g||M.rectAreaLength!==v||M.hemiLength!==w||M.numDirectionalShadows!==B||M.numPointShadows!==C||M.numSpotShadows!==b||M.numSpotMaps!==F)&&(i.directional.length=f,i.spot.length=g,i.rectArea.length=v,i.point.length=m,i.hemi.length=w,i.directionalShadow.length=B,i.directionalShadowMap.length=B,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=b,i.spotShadowMap.length=b,i.directionalShadowMatrix.length=B,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=b+F-x,i.spotLightMap.length=F,i.numSpotLightShadowsWithMaps=x,M.directionalLength=f,M.pointLength=m,M.spotLength=g,M.rectAreaLength=v,M.hemiLength=w,M.numDirectionalShadows=B,M.numPointShadows=C,M.numSpotShadows=b,M.numSpotMaps=F,i.version=Ure++)}function A(c,u){let h=0,d=0,p=0,f=0,m=0;const g=u.matrixWorldInverse;for(let v=0,w=c.length;v<w;v++){const B=c[v];if(B.isDirectionalLight){const C=i.directional[h];C.direction.setFromMatrixPosition(B.matrixWorld),s.setFromMatrixPosition(B.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),h++}else if(B.isSpotLight){const C=i.spot[p];C.position.setFromMatrixPosition(B.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(B.matrixWorld),s.setFromMatrixPosition(B.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),p++}else if(B.isRectAreaLight){const C=i.rectArea[f];C.position.setFromMatrixPosition(B.matrixWorld),C.position.applyMatrix4(g),a.identity(),o.copy(B.matrixWorld),o.premultiply(g),a.extractRotation(o),C.halfWidth.set(B.width*.5,0,0),C.halfHeight.set(0,B.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),f++}else if(B.isPointLight){const C=i.point[d];C.position.setFromMatrixPosition(B.matrixWorld),C.position.applyMatrix4(g),d++}else if(B.isHemisphereLight){const C=i.hemi[m];C.direction.setFromMatrixPosition(B.matrixWorld),C.direction.transformDirection(g),m++}}}return{setup:l,setupView:A,state:i}}function XT(n,e){const t=new Rre(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(u){r.push(u)}function a(u){i.push(u)}function l(u){t.setup(r,u)}function A(u){t.setupView(r,u)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:A,pushLight:o,pushShadow:a}}function Mre(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new XT(n,e),t.set(s,[l])):o>=a.length?(l=new XT(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class Tre extends us{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=T$,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Nre extends us{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new j,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const kre=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Dre=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Lre(n,e,t){let r=new wU;const i=new ze,s=new ze,o=new Nt,a=new Tre({depthPacking:N$}),l=new Nre,A={},c=t.maxTextureSize,u={0:yi,1:Lo,2:mi},h=new Sr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ze},radius:{value:4}},vertexShader:kre,fragmentShader:Dre}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const p=new zt;p.setAttribute("position",new ut(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new In(p,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=$Z,this.render=function(B,C,b){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||B.length===0)return;const F=n.getRenderTarget(),x=n.getActiveCubeFace(),E=n.getActiveMipmapLevel(),M=n.state;M.setBlending(YA),M.buffers.color.setClear(1,1,1,1),M.buffers.depth.setTest(!0),M.setScissorTest(!1);for(let H=0,O=B.length;H<O;H++){const U=B[H],y=U.shadow;if(y===void 0){console.warn("THREE.WebGLShadowMap:",U,"has no shadow.");continue}if(y.autoUpdate===!1&&y.needsUpdate===!1)continue;i.copy(y.mapSize);const I=y.getFrameExtents();if(i.multiply(I),s.copy(y.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/I.x),i.x=s.x*I.x,y.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/I.y),i.y=s.y*I.y,y.mapSize.y=s.y)),y.map===null){const D=this.type!==fg?{minFilter:nr,magFilter:nr}:{};y.map=new Qa(i.x,i.y,D),y.map.texture.name=U.name+".shadowMap",y.camera.updateProjectionMatrix()}n.setRenderTarget(y.map),n.clear();const R=y.getViewportCount();for(let D=0;D<R;D++){const k=y.getViewport(D);o.set(s.x*k.x,s.y*k.y,s.x*k.z,s.y*k.w),M.viewport(o),y.updateMatrices(U,D),r=y.getFrustum(),w(C,b,y.camera,U,this.type)}y.isPointLightShadow!==!0&&this.type===fg&&g(y,b),y.needsUpdate=!1}m.needsUpdate=!1,n.setRenderTarget(F,x,E)};function g(B,C){const b=e.update(f);h.defines.VSM_SAMPLES!==B.blurSamples&&(h.defines.VSM_SAMPLES=B.blurSamples,d.defines.VSM_SAMPLES=B.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new Qa(i.x,i.y)),h.uniforms.shadow_pass.value=B.map.texture,h.uniforms.resolution.value=B.mapSize,h.uniforms.radius.value=B.radius,n.setRenderTarget(B.mapPass),n.clear(),n.renderBufferDirect(C,null,b,h,f,null),d.uniforms.shadow_pass.value=B.mapPass.texture,d.uniforms.resolution.value=B.mapSize,d.uniforms.radius.value=B.radius,n.setRenderTarget(B.map),n.clear(),n.renderBufferDirect(C,null,b,d,f,null)}function v(B,C,b,F,x,E){let M=null;const H=b.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(H!==void 0?M=H:M=b.isPointLight===!0?l:a,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0){const O=M.uuid,U=C.uuid;let y=A[O];y===void 0&&(y={},A[O]=y);let I=y[U];I===void 0&&(I=M.clone(),y[U]=I),M=I}return M.visible=C.visible,M.wireframe=C.wireframe,E===fg?M.side=C.shadowSide!==null?C.shadowSide:C.side:M.side=C.shadowSide!==null?C.shadowSide:u[C.side],M.alphaMap=C.alphaMap,M.alphaTest=C.alphaTest,M.clipShadows=C.clipShadows,M.clippingPlanes=C.clippingPlanes,M.clipIntersection=C.clipIntersection,M.displacementMap=C.displacementMap,M.displacementScale=C.displacementScale,M.displacementBias=C.displacementBias,M.wireframeLinewidth=C.wireframeLinewidth,M.linewidth=C.linewidth,b.isPointLight===!0&&M.isMeshDistanceMaterial===!0&&(M.referencePosition.setFromMatrixPosition(b.matrixWorld),M.nearDistance=F,M.farDistance=x),M}function w(B,C,b,F,x){if(B.visible===!1)return;if(B.layers.test(C.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&x===fg)&&(!B.frustumCulled||r.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,B.matrixWorld);const H=e.update(B),O=B.material;if(Array.isArray(O)){const U=H.groups;for(let y=0,I=U.length;y<I;y++){const R=U[y],D=O[R.materialIndex];if(D&&D.visible){const k=v(B,D,F,b.near,b.far,x);n.renderBufferDirect(b,null,H,k,B,R)}}}else if(O.visible){const U=v(B,O,F,b.near,b.far,x);n.renderBufferDirect(b,null,H,U,B,null)}}const M=B.children;for(let H=0,O=M.length;H<O;H++)w(M[H],C,b,F,x)}}function Vre(n,e,t){const r=t.isWebGL2;function i(){let pe=!1;const Fe=new Nt;let Ue=null;const Te=new Nt(0,0,0,0);return{setMask:function(Ye){Ue!==Ye&&!pe&&(n.colorMask(Ye,Ye,Ye,Ye),Ue=Ye)},setLocked:function(Ye){pe=Ye},setClear:function(Ye,nt,dt,cn,Ft){Ft===!0&&(Ye*=cn,nt*=cn,dt*=cn),Fe.set(Ye,nt,dt,cn),Te.equals(Fe)===!1&&(n.clearColor(Ye,nt,dt,cn),Te.copy(Fe))},reset:function(){pe=!1,Ue=null,Te.set(-1,0,0,0)}}}function s(){let pe=!1,Fe=null,Ue=null,Te=null;return{setTest:function(Ye){Ye?ge(2929):he(2929)},setMask:function(Ye){Fe!==Ye&&!pe&&(n.depthMask(Ye),Fe=Ye)},setFunc:function(Ye){if(Ue!==Ye){switch(Ye){case e$:n.depthFunc(512);break;case t$:n.depthFunc(519);break;case n$:n.depthFunc(513);break;case v_:n.depthFunc(515);break;case r$:n.depthFunc(514);break;case i$:n.depthFunc(518);break;case s$:n.depthFunc(516);break;case o$:n.depthFunc(517);break;default:n.depthFunc(515)}Ue=Ye}},setLocked:function(Ye){pe=Ye},setClear:function(Ye){Te!==Ye&&(n.clearDepth(Ye),Te=Ye)},reset:function(){pe=!1,Fe=null,Ue=null,Te=null}}}function o(){let pe=!1,Fe=null,Ue=null,Te=null,Ye=null,nt=null,dt=null,cn=null,Ft=null;return{setTest:function(ot){pe||(ot?ge(2960):he(2960))},setMask:function(ot){Fe!==ot&&!pe&&(n.stencilMask(ot),Fe=ot)},setFunc:function(ot,Ar,yt){(Ue!==ot||Te!==Ar||Ye!==yt)&&(n.stencilFunc(ot,Ar,yt),Ue=ot,Te=Ar,Ye=yt)},setOp:function(ot,Ar,yt){(nt!==ot||dt!==Ar||cn!==yt)&&(n.stencilOp(ot,Ar,yt),nt=ot,dt=Ar,cn=yt)},setLocked:function(ot){pe=ot},setClear:function(ot){Ft!==ot&&(n.clearStencil(ot),Ft=ot)},reset:function(){pe=!1,Fe=null,Ue=null,Te=null,Ye=null,nt=null,dt=null,cn=null,Ft=null}}}const a=new i,l=new s,A=new o,c=new WeakMap,u=new WeakMap;let h={},d={},p=new WeakMap,f=[],m=null,g=!1,v=null,w=null,B=null,C=null,b=null,F=null,x=null,E=!1,M=null,H=null,O=null,U=null,y=null;const I=n.getParameter(35661);let R=!1,D=0;const k=n.getParameter(7938);k.indexOf("WebGL")!==-1?(D=parseFloat(/^WebGL (\d)/.exec(k)[1]),R=D>=1):k.indexOf("OpenGL ES")!==-1&&(D=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),R=D>=2);let V=null,Z={};const N=n.getParameter(3088),_=n.getParameter(2978),z=new Nt().fromArray(N),ie=new Nt().fromArray(_);function T(pe,Fe,Ue){const Te=new Uint8Array(4),Ye=n.createTexture();n.bindTexture(pe,Ye),n.texParameteri(pe,10241,9728),n.texParameteri(pe,10240,9728);for(let nt=0;nt<Ue;nt++)n.texImage2D(Fe+nt,0,6408,1,1,0,6408,5121,Te);return Ye}const q={};q[3553]=T(3553,3553,1),q[34067]=T(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),A.setClear(0),ge(2929),l.setFunc(v_),de(!1),ee(GM),ge(2884),P(YA);function ge(pe){h[pe]!==!0&&(n.enable(pe),h[pe]=!0)}function he(pe){h[pe]!==!1&&(n.disable(pe),h[pe]=!1)}function Ae(pe,Fe){return d[pe]!==Fe?(n.bindFramebuffer(pe,Fe),d[pe]=Fe,r&&(pe===36009&&(d[36160]=Fe),pe===36160&&(d[36009]=Fe)),!0):!1}function $(pe,Fe){let Ue=f,Te=!1;if(pe)if(Ue=p.get(Fe),Ue===void 0&&(Ue=[],p.set(Fe,Ue)),pe.isWebGLMultipleRenderTargets){const Ye=pe.texture;if(Ue.length!==Ye.length||Ue[0]!==36064){for(let nt=0,dt=Ye.length;nt<dt;nt++)Ue[nt]=36064+nt;Ue.length=Ye.length,Te=!0}}else Ue[0]!==36064&&(Ue[0]=36064,Te=!0);else Ue[0]!==1029&&(Ue[0]=1029,Te=!0);Te&&(t.isWebGL2?n.drawBuffers(Ue):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ue))}function ce(pe){return m!==pe?(n.useProgram(pe),m=pe,!0):!1}const me={[Nd]:32774,[Z7]:32778,[G7]:32779};if(r)me[zM]=32775,me[YM]=32776;else{const pe=e.get("EXT_blend_minmax");pe!==null&&(me[zM]=pe.MIN_EXT,me[YM]=pe.MAX_EXT)}const _e={[J7]:0,[H7]:1,[z7]:768,[qZ]:770,[q7]:776,[K7]:774,[X7]:772,[Y7]:769,[eG]:771,[$7]:775,[j7]:773};function P(pe,Fe,Ue,Te,Ye,nt,dt,cn){if(pe===YA){g===!0&&(he(3042),g=!1);return}if(g===!1&&(ge(3042),g=!0),pe!==W7){if(pe!==v||cn!==E){if((w!==Nd||b!==Nd)&&(n.blendEquation(32774),w=Nd,b=Nd),cn)switch(pe){case Zh:n.blendFuncSeparate(1,771,1,771);break;case wu:n.blendFunc(1,1);break;case JM:n.blendFuncSeparate(0,769,0,1);break;case HM:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}else switch(pe){case Zh:n.blendFuncSeparate(770,771,1,771);break;case wu:n.blendFunc(770,1);break;case JM:n.blendFuncSeparate(0,769,0,1);break;case HM:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}B=null,C=null,F=null,x=null,v=pe,E=cn}return}Ye=Ye||Fe,nt=nt||Ue,dt=dt||Te,(Fe!==w||Ye!==b)&&(n.blendEquationSeparate(me[Fe],me[Ye]),w=Fe,b=Ye),(Ue!==B||Te!==C||nt!==F||dt!==x)&&(n.blendFuncSeparate(_e[Ue],_e[Te],_e[nt],_e[dt]),B=Ue,C=Te,F=nt,x=dt),v=pe,E=null}function fe(pe,Fe){pe.side===mi?he(2884):ge(2884);let Ue=pe.side===yi;Fe&&(Ue=!Ue),de(Ue),pe.blending===Zh&&pe.transparent===!1?P(YA):P(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.premultipliedAlpha),l.setFunc(pe.depthFunc),l.setTest(pe.depthTest),l.setMask(pe.depthWrite),a.setMask(pe.colorWrite);const Te=pe.stencilWrite;A.setTest(Te),Te&&(A.setMask(pe.stencilWriteMask),A.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),A.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),se(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits),pe.alphaToCoverage===!0?ge(32926):he(32926)}function de(pe){M!==pe&&(pe?n.frontFace(2304):n.frontFace(2305),M=pe)}function ee(pe){pe!==V7?(ge(2884),pe!==H&&(pe===GM?n.cullFace(1029):pe===P7?n.cullFace(1028):n.cullFace(1032))):he(2884),H=pe}function K(pe){pe!==O&&(R&&n.lineWidth(pe),O=pe)}function se(pe,Fe,Ue){pe?(ge(32823),(U!==Fe||y!==Ue)&&(n.polygonOffset(Fe,Ue),U=Fe,y=Ue)):he(32823)}function ye(pe){pe?ge(3089):he(3089)}function ne(pe){pe===void 0&&(pe=33984+I-1),V!==pe&&(n.activeTexture(pe),V=pe)}function J(pe,Fe,Ue){Ue===void 0&&(V===null?Ue=33984+I-1:Ue=V);let Te=Z[Ue];Te===void 0&&(Te={type:void 0,texture:void 0},Z[Ue]=Te),(Te.type!==pe||Te.texture!==Fe)&&(V!==Ue&&(n.activeTexture(Ue),V=Ue),n.bindTexture(pe,Fe||q[pe]),Te.type=pe,Te.texture=Fe)}function Y(){const pe=Z[V];pe!==void 0&&pe.type!==void 0&&(n.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)}function ue(){try{n.compressedTexImage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function le(){try{n.compressedTexImage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function we(){try{n.texSubImage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function G(){try{n.texSubImage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Q(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function S(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function W(){try{n.texStorage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function te(){try{n.texStorage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function oe(){try{n.texImage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function ae(){try{n.texImage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Se(pe){z.equals(pe)===!1&&(n.scissor(pe.x,pe.y,pe.z,pe.w),z.copy(pe))}function Ee(pe){ie.equals(pe)===!1&&(n.viewport(pe.x,pe.y,pe.z,pe.w),ie.copy(pe))}function Me(pe,Fe){let Ue=u.get(Fe);Ue===void 0&&(Ue=new WeakMap,u.set(Fe,Ue));let Te=Ue.get(pe);Te===void 0&&(Te=n.getUniformBlockIndex(Fe,pe.name),Ue.set(pe,Te))}function Le(pe,Fe){const Te=u.get(Fe).get(pe);c.get(pe)!==Te&&(n.uniformBlockBinding(Fe,Te,pe.__bindingPointIndex),c.set(pe,Te))}function ke(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},V=null,Z={},d={},p=new WeakMap,f=[],m=null,g=!1,v=null,w=null,B=null,C=null,b=null,F=null,x=null,E=!1,M=null,H=null,O=null,U=null,y=null,z.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),A.reset()}return{buffers:{color:a,depth:l,stencil:A},enable:ge,disable:he,bindFramebuffer:Ae,drawBuffers:$,useProgram:ce,setBlending:P,setMaterial:fe,setFlipSided:de,setCullFace:ee,setLineWidth:K,setPolygonOffset:se,setScissorTest:ye,activeTexture:ne,bindTexture:J,unbindTexture:Y,compressedTexImage2D:ue,compressedTexImage3D:le,texImage2D:oe,texImage3D:ae,updateUBOMapping:Me,uniformBlockBinding:Le,texStorage2D:W,texStorage3D:te,texSubImage2D:we,texSubImage3D:G,compressedTexSubImage2D:Q,compressedTexSubImage3D:S,scissor:Se,viewport:Ee,reset:ke}}function Pre(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,A=i.maxCubemapSize,c=i.maxTextureSize,u=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),p=new WeakMap;let f;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(J,Y){return g?new OffscreenCanvas(J,Y):Qm("canvas")}function w(J,Y,ue,le){let we=1;if((J.width>le||J.height>le)&&(we=le/Math.max(J.width,J.height)),we<1||Y===!0)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap){const G=Y?BB:Math.floor,Q=G(we*J.width),S=G(we*J.height);f===void 0&&(f=v(Q,S));const W=ue?v(Q,S):f;return W.width=Q,W.height=S,W.getContext("2d").drawImage(J,0,0,Q,S),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+J.width+"x"+J.height+") to ("+Q+"x"+S+")."),W}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+J.width+"x"+J.height+")."),J;return J}function B(J){return C_(J.width)&&C_(J.height)}function C(J){return a?!1:J.wrapS!==fi||J.wrapT!==fi||J.minFilter!==nr&&J.minFilter!==ci}function b(J,Y){return J.generateMipmaps&&Y&&J.minFilter!==nr&&J.minFilter!==ci}function F(J){n.generateMipmap(J)}function x(J,Y,ue,le,we=!1){if(a===!1)return Y;if(J!==null){if(n[J]!==void 0)return n[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let G=Y;return Y===6403&&(ue===5126&&(G=33326),ue===5131&&(G=33325),ue===5121&&(G=33321)),Y===33319&&(ue===5126&&(G=33328),ue===5131&&(G=33327),ue===5121&&(G=33323)),Y===6408&&(ue===5126&&(G=34836),ue===5131&&(G=34842),ue===5121&&(G=le===gt&&we===!1?35907:32856),ue===32819&&(G=32854),ue===32820&&(G=32855)),(G===33325||G===33326||G===33327||G===33328||G===34842||G===34836)&&e.get("EXT_color_buffer_float"),G}function E(J,Y,ue){return b(J,ue)===!0||J.isFramebufferTexture&&J.minFilter!==nr&&J.minFilter!==ci?Math.log2(Math.max(Y.width,Y.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?Y.mipmaps.length:1}function M(J){return J===nr||J===vB||J===yB?9728:9729}function H(J){const Y=J.target;Y.removeEventListener("dispose",H),U(Y),Y.isVideoTexture&&p.delete(Y)}function O(J){const Y=J.target;Y.removeEventListener("dispose",O),I(Y)}function U(J){const Y=r.get(J);if(Y.__webglInit===void 0)return;const ue=J.source,le=m.get(ue);if(le){const we=le[Y.__cacheKey];we.usedTimes--,we.usedTimes===0&&y(J),Object.keys(le).length===0&&m.delete(ue)}r.remove(J)}function y(J){const Y=r.get(J);n.deleteTexture(Y.__webglTexture);const ue=J.source,le=m.get(ue);delete le[Y.__cacheKey],o.memory.textures--}function I(J){const Y=J.texture,ue=r.get(J),le=r.get(Y);if(le.__webglTexture!==void 0&&(n.deleteTexture(le.__webglTexture),o.memory.textures--),J.depthTexture&&J.depthTexture.dispose(),J.isWebGLCubeRenderTarget)for(let we=0;we<6;we++)n.deleteFramebuffer(ue.__webglFramebuffer[we]),ue.__webglDepthbuffer&&n.deleteRenderbuffer(ue.__webglDepthbuffer[we]);else{if(n.deleteFramebuffer(ue.__webglFramebuffer),ue.__webglDepthbuffer&&n.deleteRenderbuffer(ue.__webglDepthbuffer),ue.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ue.__webglMultisampledFramebuffer),ue.__webglColorRenderbuffer)for(let we=0;we<ue.__webglColorRenderbuffer.length;we++)ue.__webglColorRenderbuffer[we]&&n.deleteRenderbuffer(ue.__webglColorRenderbuffer[we]);ue.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ue.__webglDepthRenderbuffer)}if(J.isWebGLMultipleRenderTargets)for(let we=0,G=Y.length;we<G;we++){const Q=r.get(Y[we]);Q.__webglTexture&&(n.deleteTexture(Q.__webglTexture),o.memory.textures--),r.remove(Y[we])}r.remove(Y),r.remove(J)}let R=0;function D(){R=0}function k(){const J=R;return J>=l&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+l),R+=1,J}function V(J){const Y=[];return Y.push(J.wrapS),Y.push(J.wrapT),Y.push(J.wrapR||0),Y.push(J.magFilter),Y.push(J.minFilter),Y.push(J.anisotropy),Y.push(J.internalFormat),Y.push(J.format),Y.push(J.type),Y.push(J.generateMipmaps),Y.push(J.premultiplyAlpha),Y.push(J.flipY),Y.push(J.unpackAlignment),Y.push(J.encoding),Y.join()}function Z(J,Y){const ue=r.get(J);if(J.isVideoTexture&&ye(J),J.isRenderTargetTexture===!1&&J.version>0&&ue.__version!==J.version){const le=J.image;if(le===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(le.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{he(ue,J,Y);return}}t.bindTexture(3553,ue.__webglTexture,33984+Y)}function N(J,Y){const ue=r.get(J);if(J.version>0&&ue.__version!==J.version){he(ue,J,Y);return}t.bindTexture(35866,ue.__webglTexture,33984+Y)}function _(J,Y){const ue=r.get(J);if(J.version>0&&ue.__version!==J.version){he(ue,J,Y);return}t.bindTexture(32879,ue.__webglTexture,33984+Y)}function z(J,Y){const ue=r.get(J);if(J.version>0&&ue.__version!==J.version){Ae(ue,J,Y);return}t.bindTexture(34067,ue.__webglTexture,33984+Y)}const ie={[ps]:10497,[fi]:33071,[Em]:33648},T={[nr]:9728,[vB]:9984,[yB]:9986,[ci]:9729,[fU]:9985,[Mu]:9987};function q(J,Y,ue){if(ue?(n.texParameteri(J,10242,ie[Y.wrapS]),n.texParameteri(J,10243,ie[Y.wrapT]),(J===32879||J===35866)&&n.texParameteri(J,32882,ie[Y.wrapR]),n.texParameteri(J,10240,T[Y.magFilter]),n.texParameteri(J,10241,T[Y.minFilter])):(n.texParameteri(J,10242,33071),n.texParameteri(J,10243,33071),(J===32879||J===35866)&&n.texParameteri(J,32882,33071),(Y.wrapS!==fi||Y.wrapT!==fi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(J,10240,M(Y.magFilter)),n.texParameteri(J,10241,M(Y.minFilter)),Y.minFilter!==nr&&Y.minFilter!==ci&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const le=e.get("EXT_texture_filter_anisotropic");if(Y.type===RA&&e.has("OES_texture_float_linear")===!1||a===!1&&Y.type===Sm&&e.has("OES_texture_half_float_linear")===!1)return;(Y.anisotropy>1||r.get(Y).__currentAnisotropy)&&(n.texParameterf(J,le.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,i.getMaxAnisotropy())),r.get(Y).__currentAnisotropy=Y.anisotropy)}}function ge(J,Y){let ue=!1;J.__webglInit===void 0&&(J.__webglInit=!0,Y.addEventListener("dispose",H));const le=Y.source;let we=m.get(le);we===void 0&&(we={},m.set(le,we));const G=V(Y);if(G!==J.__cacheKey){we[G]===void 0&&(we[G]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ue=!0),we[G].usedTimes++;const Q=we[J.__cacheKey];Q!==void 0&&(we[J.__cacheKey].usedTimes--,Q.usedTimes===0&&y(Y)),J.__cacheKey=G,J.__webglTexture=we[G].texture}return ue}function he(J,Y,ue){let le=3553;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(le=35866),Y.isData3DTexture&&(le=32879);const we=ge(J,Y),G=Y.source;t.bindTexture(le,J.__webglTexture,33984+ue);const Q=r.get(G);if(G.version!==Q.__version||we===!0){t.activeTexture(33984+ue),n.pixelStorei(37440,Y.flipY),n.pixelStorei(37441,Y.premultiplyAlpha),n.pixelStorei(3317,Y.unpackAlignment),n.pixelStorei(37443,0);const S=C(Y)&&B(Y.image)===!1;let W=w(Y.image,S,!1,c);W=ne(Y,W);const te=B(W)||a,oe=s.convert(Y.format,Y.encoding);let ae=s.convert(Y.type),Se=x(Y.internalFormat,oe,ae,Y.encoding,Y.isVideoTexture);q(le,Y,te);let Ee;const Me=Y.mipmaps,Le=a&&Y.isVideoTexture!==!0,ke=Q.__version===void 0||we===!0,pe=E(Y,W,te);if(Y.isDepthTexture)Se=6402,a?Y.type===RA?Se=36012:Y.type===jc?Se=33190:Y.type===Gh?Se=35056:Se=33189:Y.type===RA&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Y.format===lu&&Se===6402&&Y.type!==nG&&Y.type!==jc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Y.type=jc,ae=s.convert(Y.type)),Y.format===Bf&&Se===6402&&(Se=34041,Y.type!==Gh&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Y.type=Gh,ae=s.convert(Y.type))),ke&&(Le?t.texStorage2D(3553,1,Se,W.width,W.height):t.texImage2D(3553,0,Se,W.width,W.height,0,oe,ae,null));else if(Y.isDataTexture)if(Me.length>0&&te){Le&&ke&&t.texStorage2D(3553,pe,Se,Me[0].width,Me[0].height);for(let Fe=0,Ue=Me.length;Fe<Ue;Fe++)Ee=Me[Fe],Le?t.texSubImage2D(3553,Fe,0,0,Ee.width,Ee.height,oe,ae,Ee.data):t.texImage2D(3553,Fe,Se,Ee.width,Ee.height,0,oe,ae,Ee.data);Y.generateMipmaps=!1}else Le?(ke&&t.texStorage2D(3553,pe,Se,W.width,W.height),t.texSubImage2D(3553,0,0,0,W.width,W.height,oe,ae,W.data)):t.texImage2D(3553,0,Se,W.width,W.height,0,oe,ae,W.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){Le&&ke&&t.texStorage3D(35866,pe,Se,Me[0].width,Me[0].height,W.depth);for(let Fe=0,Ue=Me.length;Fe<Ue;Fe++)Ee=Me[Fe],Y.format!==Ir?oe!==null?Le?t.compressedTexSubImage3D(35866,Fe,0,0,0,Ee.width,Ee.height,W.depth,oe,Ee.data,0,0):t.compressedTexImage3D(35866,Fe,Se,Ee.width,Ee.height,W.depth,0,Ee.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?t.texSubImage3D(35866,Fe,0,0,0,Ee.width,Ee.height,W.depth,oe,ae,Ee.data):t.texImage3D(35866,Fe,Se,Ee.width,Ee.height,W.depth,0,oe,ae,Ee.data)}else{Le&&ke&&t.texStorage2D(3553,pe,Se,Me[0].width,Me[0].height);for(let Fe=0,Ue=Me.length;Fe<Ue;Fe++)Ee=Me[Fe],Y.format!==Ir?oe!==null?Le?t.compressedTexSubImage2D(3553,Fe,0,0,Ee.width,Ee.height,oe,Ee.data):t.compressedTexImage2D(3553,Fe,Se,Ee.width,Ee.height,0,Ee.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?t.texSubImage2D(3553,Fe,0,0,Ee.width,Ee.height,oe,ae,Ee.data):t.texImage2D(3553,Fe,Se,Ee.width,Ee.height,0,oe,ae,Ee.data)}else if(Y.isDataArrayTexture)Le?(ke&&t.texStorage3D(35866,pe,Se,W.width,W.height,W.depth),t.texSubImage3D(35866,0,0,0,0,W.width,W.height,W.depth,oe,ae,W.data)):t.texImage3D(35866,0,Se,W.width,W.height,W.depth,0,oe,ae,W.data);else if(Y.isData3DTexture)Le?(ke&&t.texStorage3D(32879,pe,Se,W.width,W.height,W.depth),t.texSubImage3D(32879,0,0,0,0,W.width,W.height,W.depth,oe,ae,W.data)):t.texImage3D(32879,0,Se,W.width,W.height,W.depth,0,oe,ae,W.data);else if(Y.isFramebufferTexture){if(ke)if(Le)t.texStorage2D(3553,pe,Se,W.width,W.height);else{let Fe=W.width,Ue=W.height;for(let Te=0;Te<pe;Te++)t.texImage2D(3553,Te,Se,Fe,Ue,0,oe,ae,null),Fe>>=1,Ue>>=1}}else if(Me.length>0&&te){Le&&ke&&t.texStorage2D(3553,pe,Se,Me[0].width,Me[0].height);for(let Fe=0,Ue=Me.length;Fe<Ue;Fe++)Ee=Me[Fe],Le?t.texSubImage2D(3553,Fe,0,0,oe,ae,Ee):t.texImage2D(3553,Fe,Se,oe,ae,Ee);Y.generateMipmaps=!1}else Le?(ke&&t.texStorage2D(3553,pe,Se,W.width,W.height),t.texSubImage2D(3553,0,0,0,oe,ae,W)):t.texImage2D(3553,0,Se,oe,ae,W);b(Y,te)&&F(le),Q.__version=G.version,Y.onUpdate&&Y.onUpdate(Y)}J.__version=Y.version}function Ae(J,Y,ue){if(Y.image.length!==6)return;const le=ge(J,Y),we=Y.source;t.bindTexture(34067,J.__webglTexture,33984+ue);const G=r.get(we);if(we.version!==G.__version||le===!0){t.activeTexture(33984+ue),n.pixelStorei(37440,Y.flipY),n.pixelStorei(37441,Y.premultiplyAlpha),n.pixelStorei(3317,Y.unpackAlignment),n.pixelStorei(37443,0);const Q=Y.isCompressedTexture||Y.image[0].isCompressedTexture,S=Y.image[0]&&Y.image[0].isDataTexture,W=[];for(let Fe=0;Fe<6;Fe++)!Q&&!S?W[Fe]=w(Y.image[Fe],!1,!0,A):W[Fe]=S?Y.image[Fe].image:Y.image[Fe],W[Fe]=ne(Y,W[Fe]);const te=W[0],oe=B(te)||a,ae=s.convert(Y.format,Y.encoding),Se=s.convert(Y.type),Ee=x(Y.internalFormat,ae,Se,Y.encoding),Me=a&&Y.isVideoTexture!==!0,Le=G.__version===void 0||le===!0;let ke=E(Y,te,oe);q(34067,Y,oe);let pe;if(Q){Me&&Le&&t.texStorage2D(34067,ke,Ee,te.width,te.height);for(let Fe=0;Fe<6;Fe++){pe=W[Fe].mipmaps;for(let Ue=0;Ue<pe.length;Ue++){const Te=pe[Ue];Y.format!==Ir?ae!==null?Me?t.compressedTexSubImage2D(34069+Fe,Ue,0,0,Te.width,Te.height,ae,Te.data):t.compressedTexImage2D(34069+Fe,Ue,Ee,Te.width,Te.height,0,Te.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Me?t.texSubImage2D(34069+Fe,Ue,0,0,Te.width,Te.height,ae,Se,Te.data):t.texImage2D(34069+Fe,Ue,Ee,Te.width,Te.height,0,ae,Se,Te.data)}}}else{pe=Y.mipmaps,Me&&Le&&(pe.length>0&&ke++,t.texStorage2D(34067,ke,Ee,W[0].width,W[0].height));for(let Fe=0;Fe<6;Fe++)if(S){Me?t.texSubImage2D(34069+Fe,0,0,0,W[Fe].width,W[Fe].height,ae,Se,W[Fe].data):t.texImage2D(34069+Fe,0,Ee,W[Fe].width,W[Fe].height,0,ae,Se,W[Fe].data);for(let Ue=0;Ue<pe.length;Ue++){const Ye=pe[Ue].image[Fe].image;Me?t.texSubImage2D(34069+Fe,Ue+1,0,0,Ye.width,Ye.height,ae,Se,Ye.data):t.texImage2D(34069+Fe,Ue+1,Ee,Ye.width,Ye.height,0,ae,Se,Ye.data)}}else{Me?t.texSubImage2D(34069+Fe,0,0,0,ae,Se,W[Fe]):t.texImage2D(34069+Fe,0,Ee,ae,Se,W[Fe]);for(let Ue=0;Ue<pe.length;Ue++){const Te=pe[Ue];Me?t.texSubImage2D(34069+Fe,Ue+1,0,0,ae,Se,Te.image[Fe]):t.texImage2D(34069+Fe,Ue+1,Ee,ae,Se,Te.image[Fe])}}}b(Y,oe)&&F(34067),G.__version=we.version,Y.onUpdate&&Y.onUpdate(Y)}J.__version=Y.version}function $(J,Y,ue,le,we){const G=s.convert(ue.format,ue.encoding),Q=s.convert(ue.type),S=x(ue.internalFormat,G,Q,ue.encoding);r.get(Y).__hasExternalTextures||(we===32879||we===35866?t.texImage3D(we,0,S,Y.width,Y.height,Y.depth,0,G,Q,null):t.texImage2D(we,0,S,Y.width,Y.height,0,G,Q,null)),t.bindFramebuffer(36160,J),se(Y)?h.framebufferTexture2DMultisampleEXT(36160,le,we,r.get(ue).__webglTexture,0,K(Y)):(we===3553||we>=34069&&we<=34074)&&n.framebufferTexture2D(36160,le,we,r.get(ue).__webglTexture,0),t.bindFramebuffer(36160,null)}function ce(J,Y,ue){if(n.bindRenderbuffer(36161,J),Y.depthBuffer&&!Y.stencilBuffer){let le=33189;if(ue||se(Y)){const we=Y.depthTexture;we&&we.isDepthTexture&&(we.type===RA?le=36012:we.type===jc&&(le=33190));const G=K(Y);se(Y)?h.renderbufferStorageMultisampleEXT(36161,G,le,Y.width,Y.height):n.renderbufferStorageMultisample(36161,G,le,Y.width,Y.height)}else n.renderbufferStorage(36161,le,Y.width,Y.height);n.framebufferRenderbuffer(36160,36096,36161,J)}else if(Y.depthBuffer&&Y.stencilBuffer){const le=K(Y);ue&&se(Y)===!1?n.renderbufferStorageMultisample(36161,le,35056,Y.width,Y.height):se(Y)?h.renderbufferStorageMultisampleEXT(36161,le,35056,Y.width,Y.height):n.renderbufferStorage(36161,34041,Y.width,Y.height),n.framebufferRenderbuffer(36160,33306,36161,J)}else{const le=Y.isWebGLMultipleRenderTargets===!0?Y.texture:[Y.texture];for(let we=0;we<le.length;we++){const G=le[we],Q=s.convert(G.format,G.encoding),S=s.convert(G.type),W=x(G.internalFormat,Q,S,G.encoding),te=K(Y);ue&&se(Y)===!1?n.renderbufferStorageMultisample(36161,te,W,Y.width,Y.height):se(Y)?h.renderbufferStorageMultisampleEXT(36161,te,W,Y.width,Y.height):n.renderbufferStorage(36161,W,Y.width,Y.height)}}n.bindRenderbuffer(36161,null)}function me(J,Y){if(Y&&Y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,J),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(Y.depthTexture).__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),Z(Y.depthTexture,0);const le=r.get(Y.depthTexture).__webglTexture,we=K(Y);if(Y.depthTexture.format===lu)se(Y)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,le,0,we):n.framebufferTexture2D(36160,36096,3553,le,0);else if(Y.depthTexture.format===Bf)se(Y)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,le,0,we):n.framebufferTexture2D(36160,33306,3553,le,0);else throw new Error("Unknown depthTexture format")}function _e(J){const Y=r.get(J),ue=J.isWebGLCubeRenderTarget===!0;if(J.depthTexture&&!Y.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");me(Y.__webglFramebuffer,J)}else if(ue){Y.__webglDepthbuffer=[];for(let le=0;le<6;le++)t.bindFramebuffer(36160,Y.__webglFramebuffer[le]),Y.__webglDepthbuffer[le]=n.createRenderbuffer(),ce(Y.__webglDepthbuffer[le],J,!1)}else t.bindFramebuffer(36160,Y.__webglFramebuffer),Y.__webglDepthbuffer=n.createRenderbuffer(),ce(Y.__webglDepthbuffer,J,!1);t.bindFramebuffer(36160,null)}function P(J,Y,ue){const le=r.get(J);Y!==void 0&&$(le.__webglFramebuffer,J,J.texture,36064,3553),ue!==void 0&&_e(J)}function fe(J){const Y=J.texture,ue=r.get(J),le=r.get(Y);J.addEventListener("dispose",O),J.isWebGLMultipleRenderTargets!==!0&&(le.__webglTexture===void 0&&(le.__webglTexture=n.createTexture()),le.__version=Y.version,o.memory.textures++);const we=J.isWebGLCubeRenderTarget===!0,G=J.isWebGLMultipleRenderTargets===!0,Q=B(J)||a;if(we){ue.__webglFramebuffer=[];for(let S=0;S<6;S++)ue.__webglFramebuffer[S]=n.createFramebuffer()}else{if(ue.__webglFramebuffer=n.createFramebuffer(),G)if(i.drawBuffers){const S=J.texture;for(let W=0,te=S.length;W<te;W++){const oe=r.get(S[W]);oe.__webglTexture===void 0&&(oe.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&J.samples>0&&se(J)===!1){const S=G?Y:[Y];ue.__webglMultisampledFramebuffer=n.createFramebuffer(),ue.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ue.__webglMultisampledFramebuffer);for(let W=0;W<S.length;W++){const te=S[W];ue.__webglColorRenderbuffer[W]=n.createRenderbuffer(),n.bindRenderbuffer(36161,ue.__webglColorRenderbuffer[W]);const oe=s.convert(te.format,te.encoding),ae=s.convert(te.type),Se=x(te.internalFormat,oe,ae,te.encoding,J.isXRRenderTarget===!0),Ee=K(J);n.renderbufferStorageMultisample(36161,Ee,Se,J.width,J.height),n.framebufferRenderbuffer(36160,36064+W,36161,ue.__webglColorRenderbuffer[W])}n.bindRenderbuffer(36161,null),J.depthBuffer&&(ue.__webglDepthRenderbuffer=n.createRenderbuffer(),ce(ue.__webglDepthRenderbuffer,J,!0)),t.bindFramebuffer(36160,null)}}if(we){t.bindTexture(34067,le.__webglTexture),q(34067,Y,Q);for(let S=0;S<6;S++)$(ue.__webglFramebuffer[S],J,Y,36064,34069+S);b(Y,Q)&&F(34067),t.unbindTexture()}else if(G){const S=J.texture;for(let W=0,te=S.length;W<te;W++){const oe=S[W],ae=r.get(oe);t.bindTexture(3553,ae.__webglTexture),q(3553,oe,Q),$(ue.__webglFramebuffer,J,oe,36064+W,3553),b(oe,Q)&&F(3553)}t.unbindTexture()}else{let S=3553;(J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(a?S=J.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(S,le.__webglTexture),q(S,Y,Q),$(ue.__webglFramebuffer,J,Y,36064,S),b(Y,Q)&&F(S),t.unbindTexture()}J.depthBuffer&&_e(J)}function de(J){const Y=B(J)||a,ue=J.isWebGLMultipleRenderTargets===!0?J.texture:[J.texture];for(let le=0,we=ue.length;le<we;le++){const G=ue[le];if(b(G,Y)){const Q=J.isWebGLCubeRenderTarget?34067:3553,S=r.get(G).__webglTexture;t.bindTexture(Q,S),F(Q),t.unbindTexture()}}}function ee(J){if(a&&J.samples>0&&se(J)===!1){const Y=J.isWebGLMultipleRenderTargets?J.texture:[J.texture],ue=J.width,le=J.height;let we=16384;const G=[],Q=J.stencilBuffer?33306:36096,S=r.get(J),W=J.isWebGLMultipleRenderTargets===!0;if(W)for(let te=0;te<Y.length;te++)t.bindFramebuffer(36160,S.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+te,36161,null),t.bindFramebuffer(36160,S.__webglFramebuffer),n.framebufferTexture2D(36009,36064+te,3553,null,0);t.bindFramebuffer(36008,S.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,S.__webglFramebuffer);for(let te=0;te<Y.length;te++){G.push(36064+te),J.depthBuffer&&G.push(Q);const oe=S.__ignoreDepthValues!==void 0?S.__ignoreDepthValues:!1;if(oe===!1&&(J.depthBuffer&&(we|=256),J.stencilBuffer&&(we|=1024)),W&&n.framebufferRenderbuffer(36008,36064,36161,S.__webglColorRenderbuffer[te]),oe===!0&&(n.invalidateFramebuffer(36008,[Q]),n.invalidateFramebuffer(36009,[Q])),W){const ae=r.get(Y[te]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,ae,0)}n.blitFramebuffer(0,0,ue,le,0,0,ue,le,we,9728),d&&n.invalidateFramebuffer(36008,G)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),W)for(let te=0;te<Y.length;te++){t.bindFramebuffer(36160,S.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+te,36161,S.__webglColorRenderbuffer[te]);const oe=r.get(Y[te]).__webglTexture;t.bindFramebuffer(36160,S.__webglFramebuffer),n.framebufferTexture2D(36009,36064+te,3553,oe,0)}t.bindFramebuffer(36009,S.__webglMultisampledFramebuffer)}}function K(J){return Math.min(u,J.samples)}function se(J){const Y=r.get(J);return a&&J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function ye(J){const Y=o.render.frame;p.get(J)!==Y&&(p.set(J,Y),J.update())}function ne(J,Y){const ue=J.encoding,le=J.format,we=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||J.format===B_||ue!==gs&&(ue===gt?a===!1?e.has("EXT_sRGB")===!0&&le===Ir?(J.format=B_,J.minFilter=ci,J.generateMipmaps=!1):Y=aG.sRGBToLinear(Y):(le!==Ir||we!==sc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ue)),Y}this.allocateTextureUnit=k,this.resetTextureUnits=D,this.setTexture2D=Z,this.setTexture2DArray=N,this.setTexture3D=_,this.setTextureCube=z,this.rebindTextures=P,this.setupRenderTarget=fe,this.updateRenderTargetMipmap=de,this.updateMultisampleRenderTarget=ee,this.setupDepthRenderbuffer=_e,this.setupFrameBufferTexture=$,this.useMultisampledRTT=se}function Ore(n,e,t){const r=t.isWebGL2;function i(s,o=null){let a;if(s===sc)return 5121;if(s===m$)return 32819;if(s===v$)return 32820;if(s===f$)return 5120;if(s===p$)return 5122;if(s===nG)return 5123;if(s===g$)return 5124;if(s===jc)return 5125;if(s===RA)return 5126;if(s===Sm)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===y$)return 6406;if(s===Ir)return 6408;if(s===B$)return 6409;if(s===C$)return 6410;if(s===lu)return 6402;if(s===Bf)return 34041;if(s===b$)return 6403;if(s===w$)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===B_)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===x$)return 36244;if(s===I$)return 33319;if(s===F$)return 33320;if(s===_$)return 36249;if(s===Xx||s===jx||s===Kx||s===$x)if(o===gt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Xx)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===jx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Kx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===$x)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Xx)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===jx)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Kx)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===$x)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===XM||s===jM||s===KM||s===$M)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===XM)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===jM)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===KM)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===$M)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===E$)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===qM||s===eT)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===qM)return o===gt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===eT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===tT||s===nT||s===rT||s===iT||s===sT||s===oT||s===aT||s===lT||s===AT||s===cT||s===uT||s===dT||s===hT||s===fT)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===tT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===nT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===rT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===iT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===sT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===oT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===aT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===lT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===AT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===cT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===uT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===dT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===hT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===fT)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===pT)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===pT)return o===gt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Gh?r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class Wre extends Nr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class kr extends Lt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Zre={type:"move"};class I1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new kr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new kr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new kr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,A=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(A&&e.hand){o=!0;for(const f of e.hand.values()){const m=t.getJointPose(f,r);if(A.joints[f.jointName]===void 0){const v=new kr;v.matrixAutoUpdate=!1,v.visible=!1,A.joints[f.jointName]=v,A.add(v)}const g=A.joints[f.jointName];m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=m.radius),g.visible=m!==null}const c=A.joints["index-finger-tip"],u=A.joints["thumb-tip"],h=c.position.distanceTo(u.position),d=.02,p=.005;A.inputState.pinching&&h>d+p?(A.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!A.inputState.pinching&&h<=d-p&&(A.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Zre)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),A!==null&&(A.visible=o!==null),this}}class mG extends or{constructor(e,t,r,i,s,o,a,l,A,c){if(c=c!==void 0?c:lu,c!==lu&&c!==Bf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===lu&&(r=jc),r===void 0&&c===Bf&&(r=Gh),super(null,i,s,o,a,l,c,r,A),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:nr,this.minFilter=l!==void 0?l:nr,this.flipY=!1,this.generateMipmaps=!1}}class Gre extends vc{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=null,A=null,c=null,u=null,h=null,d=null;const p=t.getContextAttributes();let f=null,m=null;const g=[],v=[],w=new Nr;w.layers.enable(1),w.viewport=new Nt;const B=new Nr;B.layers.enable(2),B.viewport=new Nt;const C=[w,B],b=new Wre;b.layers.enable(1),b.layers.enable(2);let F=null,x=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(V){let Z=g[V];return Z===void 0&&(Z=new I1,g[V]=Z),Z.getTargetRaySpace()},this.getControllerGrip=function(V){let Z=g[V];return Z===void 0&&(Z=new I1,g[V]=Z),Z.getGripSpace()},this.getHand=function(V){let Z=g[V];return Z===void 0&&(Z=new I1,g[V]=Z),Z.getHandSpace()};function E(V){const Z=v.indexOf(V.inputSource);if(Z===-1)return;const N=g[Z];N!==void 0&&N.dispatchEvent({type:V.type,data:V.inputSource})}function M(){i.removeEventListener("select",E),i.removeEventListener("selectstart",E),i.removeEventListener("selectend",E),i.removeEventListener("squeeze",E),i.removeEventListener("squeezestart",E),i.removeEventListener("squeezeend",E),i.removeEventListener("end",M),i.removeEventListener("inputsourceschange",H);for(let V=0;V<g.length;V++){const Z=v[V];Z!==null&&(v[V]=null,g[V].disconnect(Z))}F=null,x=null,e.setRenderTarget(f),h=null,u=null,c=null,i=null,m=null,k.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(V){s=V,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(V){a=V,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(V){l=V},this.getBaseLayer=function(){return u!==null?u:h},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return i},this.setSession=async function(V){if(i=V,i!==null){if(f=e.getRenderTarget(),i.addEventListener("select",E),i.addEventListener("selectstart",E),i.addEventListener("selectend",E),i.addEventListener("squeeze",E),i.addEventListener("squeezestart",E),i.addEventListener("squeezeend",E),i.addEventListener("end",M),i.addEventListener("inputsourceschange",H),p.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Z={antialias:i.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(i,t,Z),i.updateRenderState({baseLayer:h}),m=new Qa(h.framebufferWidth,h.framebufferHeight,{format:Ir,type:sc,encoding:e.outputEncoding,stencilBuffer:p.stencil})}else{let Z=null,N=null,_=null;p.depth&&(_=p.stencil?35056:33190,Z=p.stencil?Bf:lu,N=p.stencil?Gh:jc);const z={colorFormat:32856,depthFormat:_,scaleFactor:s};c=new XRWebGLBinding(i,t),u=c.createProjectionLayer(z),i.updateRenderState({layers:[u]}),m=new Qa(u.textureWidth,u.textureHeight,{format:Ir,type:sc,depthTexture:new mG(u.textureWidth,u.textureHeight,N,void 0,void 0,void 0,void 0,void 0,void 0,Z),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});const ie=e.properties.get(m);ie.__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=await i.requestReferenceSpace(a),k.setContext(i),k.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function H(V){for(let Z=0;Z<V.removed.length;Z++){const N=V.removed[Z],_=v.indexOf(N);_>=0&&(v[_]=null,g[_].dispatchEvent({type:"disconnected",data:N}))}for(let Z=0;Z<V.added.length;Z++){const N=V.added[Z];let _=v.indexOf(N);if(_===-1){for(let ie=0;ie<g.length;ie++)if(ie>=v.length){v.push(N),_=ie;break}else if(v[ie]===null){v[ie]=N,_=ie;break}if(_===-1)break}const z=g[_];z&&z.dispatchEvent({type:"connected",data:N})}}const O=new j,U=new j;function y(V,Z,N){O.setFromMatrixPosition(Z.matrixWorld),U.setFromMatrixPosition(N.matrixWorld);const _=O.distanceTo(U),z=Z.projectionMatrix.elements,ie=N.projectionMatrix.elements,T=z[14]/(z[10]-1),q=z[14]/(z[10]+1),ge=(z[9]+1)/z[5],he=(z[9]-1)/z[5],Ae=(z[8]-1)/z[0],$=(ie[8]+1)/ie[0],ce=T*Ae,me=T*$,_e=_/(-Ae+$),P=_e*-Ae;Z.matrixWorld.decompose(V.position,V.quaternion,V.scale),V.translateX(P),V.translateZ(_e),V.matrixWorld.compose(V.position,V.quaternion,V.scale),V.matrixWorldInverse.copy(V.matrixWorld).invert();const fe=T+_e,de=q+_e,ee=ce-P,K=me+(_-P),se=ge*q/de*fe,ye=he*q/de*fe;V.projectionMatrix.makePerspective(ee,K,se,ye,fe,de)}function I(V,Z){Z===null?V.matrixWorld.copy(V.matrix):V.matrixWorld.multiplyMatrices(Z.matrixWorld,V.matrix),V.matrixWorldInverse.copy(V.matrixWorld).invert()}this.updateCamera=function(V){if(i===null)return;b.near=B.near=w.near=V.near,b.far=B.far=w.far=V.far,(F!==b.near||x!==b.far)&&(i.updateRenderState({depthNear:b.near,depthFar:b.far}),F=b.near,x=b.far);const Z=V.parent,N=b.cameras;I(b,Z);for(let z=0;z<N.length;z++)I(N[z],Z);b.matrixWorld.decompose(b.position,b.quaternion,b.scale),V.matrix.copy(b.matrix),V.matrix.decompose(V.position,V.quaternion,V.scale);const _=V.children;for(let z=0,ie=_.length;z<ie;z++)_[z].updateMatrixWorld(!0);N.length===2?y(b,w,B):b.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return b},this.getFoveation=function(){if(u!==null)return u.fixedFoveation;if(h!==null)return h.fixedFoveation},this.setFoveation=function(V){u!==null&&(u.fixedFoveation=V),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=V)};let R=null;function D(V,Z){if(A=Z.getViewerPose(l||o),d=Z,A!==null){const N=A.views;h!==null&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let _=!1;N.length!==b.cameras.length&&(b.cameras.length=0,_=!0);for(let z=0;z<N.length;z++){const ie=N[z];let T=null;if(h!==null)T=h.getViewport(ie);else{const ge=c.getViewSubImage(u,ie);T=ge.viewport,z===0&&(e.setRenderTargetTextures(m,ge.colorTexture,u.ignoreDepthValues?void 0:ge.depthStencilTexture),e.setRenderTarget(m))}let q=C[z];q===void 0&&(q=new Nr,q.layers.enable(z),q.viewport=new Nt,C[z]=q),q.matrix.fromArray(ie.transform.matrix),q.projectionMatrix.fromArray(ie.projectionMatrix),q.viewport.set(T.x,T.y,T.width,T.height),z===0&&b.matrix.copy(q.matrix),_===!0&&b.cameras.push(q)}}for(let N=0;N<g.length;N++){const _=v[N],z=g[N];_!==null&&z!==void 0&&z.update(_,Z,l||o)}R&&R(V,Z),d=null}const k=new dG;k.setAnimationLoop(D),this.setAnimationLoop=function(V){R=V},this.dispose=function(){}}}function Jre(n,e){function t(f,m){f.fogColor.value.copy(m.color),m.isFog?(f.fogNear.value=m.near,f.fogFar.value=m.far):m.isFogExp2&&(f.fogDensity.value=m.density)}function r(f,m,g,v,w){m.isMeshBasicMaterial||m.isMeshLambertMaterial?i(f,m):m.isMeshToonMaterial?(i(f,m),c(f,m)):m.isMeshPhongMaterial?(i(f,m),A(f,m)):m.isMeshStandardMaterial?(i(f,m),u(f,m),m.isMeshPhysicalMaterial&&h(f,m,w)):m.isMeshMatcapMaterial?(i(f,m),d(f,m)):m.isMeshDepthMaterial?i(f,m):m.isMeshDistanceMaterial?(i(f,m),p(f,m)):m.isMeshNormalMaterial?i(f,m):m.isLineBasicMaterial?(s(f,m),m.isLineDashedMaterial&&o(f,m)):m.isPointsMaterial?a(f,m,g,v):m.isSpriteMaterial?l(f,m):m.isShadowMaterial?(f.color.value.copy(m.color),f.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function i(f,m){f.opacity.value=m.opacity,m.color&&f.diffuse.value.copy(m.color),m.emissive&&f.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(f.map.value=m.map),m.alphaMap&&(f.alphaMap.value=m.alphaMap),m.bumpMap&&(f.bumpMap.value=m.bumpMap,f.bumpScale.value=m.bumpScale,m.side===yi&&(f.bumpScale.value*=-1)),m.displacementMap&&(f.displacementMap.value=m.displacementMap,f.displacementScale.value=m.displacementScale,f.displacementBias.value=m.displacementBias),m.emissiveMap&&(f.emissiveMap.value=m.emissiveMap),m.normalMap&&(f.normalMap.value=m.normalMap,f.normalScale.value.copy(m.normalScale),m.side===yi&&f.normalScale.value.negate()),m.specularMap&&(f.specularMap.value=m.specularMap),m.alphaTest>0&&(f.alphaTest.value=m.alphaTest);const g=e.get(m).envMap;if(g&&(f.envMap.value=g,f.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,f.reflectivity.value=m.reflectivity,f.ior.value=m.ior,f.refractionRatio.value=m.refractionRatio),m.lightMap){f.lightMap.value=m.lightMap;const B=n.physicallyCorrectLights!==!0?Math.PI:1;f.lightMapIntensity.value=m.lightMapIntensity*B}m.aoMap&&(f.aoMap.value=m.aoMap,f.aoMapIntensity.value=m.aoMapIntensity);let v;m.map?v=m.map:m.specularMap?v=m.specularMap:m.displacementMap?v=m.displacementMap:m.normalMap?v=m.normalMap:m.bumpMap?v=m.bumpMap:m.roughnessMap?v=m.roughnessMap:m.metalnessMap?v=m.metalnessMap:m.alphaMap?v=m.alphaMap:m.emissiveMap?v=m.emissiveMap:m.clearcoatMap?v=m.clearcoatMap:m.clearcoatNormalMap?v=m.clearcoatNormalMap:m.clearcoatRoughnessMap?v=m.clearcoatRoughnessMap:m.iridescenceMap?v=m.iridescenceMap:m.iridescenceThicknessMap?v=m.iridescenceThicknessMap:m.specularIntensityMap?v=m.specularIntensityMap:m.specularColorMap?v=m.specularColorMap:m.transmissionMap?v=m.transmissionMap:m.thicknessMap?v=m.thicknessMap:m.sheenColorMap?v=m.sheenColorMap:m.sheenRoughnessMap&&(v=m.sheenRoughnessMap),v!==void 0&&(v.isWebGLRenderTarget&&(v=v.texture),v.matrixAutoUpdate===!0&&v.updateMatrix(),f.uvTransform.value.copy(v.matrix));let w;m.aoMap?w=m.aoMap:m.lightMap&&(w=m.lightMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),f.uv2Transform.value.copy(w.matrix))}function s(f,m){f.diffuse.value.copy(m.color),f.opacity.value=m.opacity}function o(f,m){f.dashSize.value=m.dashSize,f.totalSize.value=m.dashSize+m.gapSize,f.scale.value=m.scale}function a(f,m,g,v){f.diffuse.value.copy(m.color),f.opacity.value=m.opacity,f.size.value=m.size*g,f.scale.value=v*.5,m.map&&(f.map.value=m.map),m.alphaMap&&(f.alphaMap.value=m.alphaMap),m.alphaTest>0&&(f.alphaTest.value=m.alphaTest);let w;m.map?w=m.map:m.alphaMap&&(w=m.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),f.uvTransform.value.copy(w.matrix))}function l(f,m){f.diffuse.value.copy(m.color),f.opacity.value=m.opacity,f.rotation.value=m.rotation,m.map&&(f.map.value=m.map),m.alphaMap&&(f.alphaMap.value=m.alphaMap),m.alphaTest>0&&(f.alphaTest.value=m.alphaTest);let g;m.map?g=m.map:m.alphaMap&&(g=m.alphaMap),g!==void 0&&(g.matrixAutoUpdate===!0&&g.updateMatrix(),f.uvTransform.value.copy(g.matrix))}function A(f,m){f.specular.value.copy(m.specular),f.shininess.value=Math.max(m.shininess,1e-4)}function c(f,m){m.gradientMap&&(f.gradientMap.value=m.gradientMap)}function u(f,m){f.roughness.value=m.roughness,f.metalness.value=m.metalness,m.roughnessMap&&(f.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(f.metalnessMap.value=m.metalnessMap),e.get(m).envMap&&(f.envMapIntensity.value=m.envMapIntensity)}function h(f,m,g){f.ior.value=m.ior,m.sheen>0&&(f.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),f.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(f.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(f.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(f.clearcoat.value=m.clearcoat,f.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(f.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(f.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(f.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),f.clearcoatNormalMap.value=m.clearcoatNormalMap,m.side===yi&&f.clearcoatNormalScale.value.negate())),m.iridescence>0&&(f.iridescence.value=m.iridescence,f.iridescenceIOR.value=m.iridescenceIOR,f.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],f.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(f.iridescenceMap.value=m.iridescenceMap),m.iridescenceThicknessMap&&(f.iridescenceThicknessMap.value=m.iridescenceThicknessMap)),m.transmission>0&&(f.transmission.value=m.transmission,f.transmissionSamplerMap.value=g.texture,f.transmissionSamplerSize.value.set(g.width,g.height),m.transmissionMap&&(f.transmissionMap.value=m.transmissionMap),f.thickness.value=m.thickness,m.thicknessMap&&(f.thicknessMap.value=m.thicknessMap),f.attenuationDistance.value=m.attenuationDistance,f.attenuationColor.value.copy(m.attenuationColor)),f.specularIntensity.value=m.specularIntensity,f.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(f.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(f.specularColorMap.value=m.specularColorMap)}function d(f,m){m.matcap&&(f.matcap.value=m.matcap)}function p(f,m){f.referencePosition.value.copy(m.referencePosition),f.nearDistance.value=m.nearDistance,f.farDistance.value=m.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function Hre(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function l(v,w){const B=w.program;r.uniformBlockBinding(v,B)}function A(v,w){let B=i[v.id];B===void 0&&(p(v),B=c(v),i[v.id]=B,v.addEventListener("dispose",m));const C=w.program;r.updateUBOMapping(v,C);const b=e.render.frame;s[v.id]!==b&&(h(v),s[v.id]=b)}function c(v){const w=u();v.__bindingPointIndex=w;const B=n.createBuffer(),C=v.__size,b=v.usage;return n.bindBuffer(35345,B),n.bufferData(35345,C,b),n.bindBuffer(35345,null),n.bindBufferBase(35345,w,B),B}function u(){for(let v=0;v<a;v++)if(o.indexOf(v)===-1)return o.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(v){const w=i[v.id],B=v.uniforms,C=v.__cache;n.bindBuffer(35345,w);for(let b=0,F=B.length;b<F;b++){const x=B[b];if(d(x,b,C)===!0){const E=x.value,M=x.__offset;typeof E=="number"?(x.__data[0]=E,n.bufferSubData(35345,M,x.__data)):(x.value.isMatrix3?(x.__data[0]=x.value.elements[0],x.__data[1]=x.value.elements[1],x.__data[2]=x.value.elements[2],x.__data[3]=x.value.elements[0],x.__data[4]=x.value.elements[3],x.__data[5]=x.value.elements[4],x.__data[6]=x.value.elements[5],x.__data[7]=x.value.elements[0],x.__data[8]=x.value.elements[6],x.__data[9]=x.value.elements[7],x.__data[10]=x.value.elements[8],x.__data[11]=x.value.elements[0]):E.toArray(x.__data),n.bufferSubData(35345,M,x.__data))}}n.bindBuffer(35345,null)}function d(v,w,B){const C=v.value;if(B[w]===void 0)return typeof C=="number"?B[w]=C:B[w]=C.clone(),!0;if(typeof C=="number"){if(B[w]!==C)return B[w]=C,!0}else{const b=B[w];if(b.equals(C)===!1)return b.copy(C),!0}return!1}function p(v){const w=v.uniforms;let B=0;const C=16;let b=0;for(let F=0,x=w.length;F<x;F++){const E=w[F],M=f(E);if(E.__data=new Float32Array(M.storage/Float32Array.BYTES_PER_ELEMENT),E.__offset=B,F>0){b=B%C;const H=C-b;b!==0&&H-M.boundary<0&&(B+=C-b,E.__offset=B)}B+=M.storage}return b=B%C,b>0&&(B+=C-b),v.__size=B,v.__cache={},this}function f(v){const w=v.value,B={boundary:0,storage:0};return typeof w=="number"?(B.boundary=4,B.storage=4):w.isVector2?(B.boundary=8,B.storage=8):w.isVector3||w.isColor?(B.boundary=16,B.storage=12):w.isVector4?(B.boundary=16,B.storage=16):w.isMatrix3?(B.boundary=48,B.storage=48):w.isMatrix4?(B.boundary=64,B.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),B}function m(v){const w=v.target;w.removeEventListener("dispose",m);const B=o.indexOf(w.__bindingPointIndex);o.splice(B,1),n.deleteBuffer(i[w.id]),delete i[w.id],delete s[w.id]}function g(){for(const v in i)n.deleteBuffer(i[v]);o=[],i={},s={}}return{bind:l,update:A,dispose:g}}function zre(){const n=Qm("canvas");return n.style.display="block",n}function h0(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:zre(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",A=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let c;t!==null?c=t.getContextAttributes().alpha:c=n.alpha!==void 0?n.alpha:!1;let u=null,h=null;const d=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=gs,this.physicallyCorrectLights=!1,this.toneMapping=Fl,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const f=this;let m=!1,g=0,v=0,w=null,B=-1,C=null;const b=new Nt,F=new Nt;let x=null,E=e.width,M=e.height,H=1,O=null,U=null;const y=new Nt(0,0,E,M),I=new Nt(0,0,E,M);let R=!1;const D=new wU;let k=!1,V=!1,Z=null;const N=new Je,_=new ze,z=new j,ie={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function T(){return w===null?H:1}let q=t;function ge(re,ve){for(let xe=0;xe<re.length;xe++){const be=re[xe],Ie=e.getContext(be,ve);if(Ie!==null)return Ie}return null}try{const re={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:A};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Ps}`),e.addEventListener("webglcontextlost",Se,!1),e.addEventListener("webglcontextrestored",Ee,!1),e.addEventListener("webglcontextcreationerror",Me,!1),q===null){const ve=["webgl2","webgl","experimental-webgl"];if(f.isWebGL1Renderer===!0&&ve.shift(),q=ge(ve,re),q===null)throw ge(ve)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}q.getShaderPrecisionFormat===void 0&&(q.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(re){throw console.error("THREE.WebGLRenderer: "+re.message),re}let he,Ae,$,ce,me,_e,P,fe,de,ee,K,se,ye,ne,J,Y,ue,le,we,G,Q,S,W,te;function oe(){he=new sne(q),Ae=new qte(q,he,n),he.init(Ae),S=new Ore(q,he,Ae),$=new Vre(q,he,Ae),ce=new lne,me=new Ire,_e=new Pre(q,he,$,me,Ae,S,ce),P=new tne(f),fe=new ine(f),de=new mq(q,Ae),W=new Kte(q,he,de,Ae),ee=new one(q,de,ce,W),K=new dne(q,ee,de,ce),we=new une(q,Ae,_e),Y=new ene(me),se=new xre(f,P,fe,he,Ae,W,Y),ye=new Jre(f,me),ne=new _re,J=new Mre(he,Ae),le=new jte(f,P,fe,$,K,c,o),ue=new Lre(f,K,Ae),te=new Hre(q,ce,Ae,$),G=new $te(q,he,ce,Ae),Q=new ane(q,he,ce,Ae),ce.programs=se.programs,f.capabilities=Ae,f.extensions=he,f.properties=me,f.renderLists=ne,f.shadowMap=ue,f.state=$,f.info=ce}oe();const ae=new Gre(f,q);this.xr=ae,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const re=he.get("WEBGL_lose_context");re&&re.loseContext()},this.forceContextRestore=function(){const re=he.get("WEBGL_lose_context");re&&re.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(re){re!==void 0&&(H=re,this.setSize(E,M,!1))},this.getSize=function(re){return re.set(E,M)},this.setSize=function(re,ve,xe){if(ae.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}E=re,M=ve,e.width=Math.floor(re*H),e.height=Math.floor(ve*H),xe!==!1&&(e.style.width=re+"px",e.style.height=ve+"px"),this.setViewport(0,0,re,ve)},this.getDrawingBufferSize=function(re){return re.set(E*H,M*H).floor()},this.setDrawingBufferSize=function(re,ve,xe){E=re,M=ve,H=xe,e.width=Math.floor(re*xe),e.height=Math.floor(ve*xe),this.setViewport(0,0,re,ve)},this.getCurrentViewport=function(re){return re.copy(b)},this.getViewport=function(re){return re.copy(y)},this.setViewport=function(re,ve,xe,be){re.isVector4?y.set(re.x,re.y,re.z,re.w):y.set(re,ve,xe,be),$.viewport(b.copy(y).multiplyScalar(H).floor())},this.getScissor=function(re){return re.copy(I)},this.setScissor=function(re,ve,xe,be){re.isVector4?I.set(re.x,re.y,re.z,re.w):I.set(re,ve,xe,be),$.scissor(F.copy(I).multiplyScalar(H).floor())},this.getScissorTest=function(){return R},this.setScissorTest=function(re){$.setScissorTest(R=re)},this.setOpaqueSort=function(re){O=re},this.setTransparentSort=function(re){U=re},this.getClearColor=function(re){return re.copy(le.getClearColor())},this.setClearColor=function(){le.setClearColor.apply(le,arguments)},this.getClearAlpha=function(){return le.getClearAlpha()},this.setClearAlpha=function(){le.setClearAlpha.apply(le,arguments)},this.clear=function(re=!0,ve=!0,xe=!0){let be=0;re&&(be|=16384),ve&&(be|=256),xe&&(be|=1024),q.clear(be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Se,!1),e.removeEventListener("webglcontextrestored",Ee,!1),e.removeEventListener("webglcontextcreationerror",Me,!1),ne.dispose(),J.dispose(),me.dispose(),P.dispose(),fe.dispose(),K.dispose(),W.dispose(),te.dispose(),se.dispose(),ae.dispose(),ae.removeEventListener("sessionstart",Te),ae.removeEventListener("sessionend",Ye),Z&&(Z.dispose(),Z=null),nt.stop()};function Se(re){re.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function Ee(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const re=ce.autoReset,ve=ue.enabled,xe=ue.autoUpdate,be=ue.needsUpdate,Ie=ue.type;oe(),ce.autoReset=re,ue.enabled=ve,ue.autoUpdate=xe,ue.needsUpdate=be,ue.type=Ie}function Me(re){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",re.statusMessage)}function Le(re){const ve=re.target;ve.removeEventListener("dispose",Le),ke(ve)}function ke(re){pe(re),me.remove(re)}function pe(re){const ve=me.get(re).programs;ve!==void 0&&(ve.forEach(function(xe){se.releaseProgram(xe)}),re.isShaderMaterial&&se.releaseShaderCache(re))}this.renderBufferDirect=function(re,ve,xe,be,Ie,We){ve===null&&(ve=ie);const lt=Ie.isMesh&&Ie.matrixWorld.determinant()<0,$e=co(re,ve,xe,be,Ie);$.setMaterial(be,lt);let je=xe.index;const wt=xe.attributes.position;if(je===null){if(wt===void 0||wt.count===0)return}else if(je.count===0)return;let ft=1;be.wireframe===!0&&(je=ee.getWireframeAttribute(xe),ft=2),W.setup(Ie,be,$e,xe,je);let vt,Yt=G;je!==null&&(vt=de.get(je),Yt=Q,Yt.setIndex(vt));const Wr=je!==null?je.count:wt.count,Wo=xe.drawRange.start*ft,Zo=xe.drawRange.count*ft,bi=We!==null?We.start*ft:0,Vt=We!==null?We.count*ft:1/0,Go=Math.max(Wo,bi),yn=Math.min(Wr,Wo+Zo,bi+Vt)-1,Zr=Math.max(0,yn-Go+1);if(Zr!==0){if(Ie.isMesh)be.wireframe===!0?($.setLineWidth(be.wireframeLinewidth*T()),Yt.setMode(1)):Yt.setMode(4);else if(Ie.isLine){let Is=be.linewidth;Is===void 0&&(Is=1),$.setLineWidth(Is*T()),Ie.isLineSegments?Yt.setMode(1):Ie.isLineLoop?Yt.setMode(2):Yt.setMode(3)}else Ie.isPoints?Yt.setMode(0):Ie.isSprite&&Yt.setMode(4);if(Ie.isInstancedMesh)Yt.renderInstances(Go,Zr,Ie.count);else if(xe.isInstancedBufferGeometry){const Is=Math.min(xe.instanceCount,xe._maxInstanceCount);Yt.renderInstances(Go,Zr,Is)}else Yt.render(Go,Zr)}},this.compile=function(re,ve){function xe(be,Ie,We){be.transparent===!0&&be.side===mi?(be.side=yi,be.needsUpdate=!0,yt(be,Ie,We),be.side=Lo,be.needsUpdate=!0,yt(be,Ie,We),be.side=mi):yt(be,Ie,We)}h=J.get(re),h.init(),p.push(h),re.traverseVisible(function(be){be.isLight&&be.layers.test(ve.layers)&&(h.pushLight(be),be.castShadow&&h.pushShadow(be))}),h.setupLights(f.physicallyCorrectLights),re.traverse(function(be){const Ie=be.material;if(Ie)if(Array.isArray(Ie))for(let We=0;We<Ie.length;We++){const lt=Ie[We];xe(lt,re,be)}else xe(Ie,re,be)}),p.pop(),h=null};let Fe=null;function Ue(re){Fe&&Fe(re)}function Te(){nt.stop()}function Ye(){nt.start()}const nt=new dG;nt.setAnimationLoop(Ue),typeof self<"u"&&nt.setContext(self),this.setAnimationLoop=function(re){Fe=re,ae.setAnimationLoop(re),re===null?nt.stop():nt.start()},ae.addEventListener("sessionstart",Te),ae.addEventListener("sessionend",Ye),this.render=function(re,ve){if(ve!==void 0&&ve.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),ve.parent===null&&ve.matrixWorldAutoUpdate===!0&&ve.updateMatrixWorld(),ae.enabled===!0&&ae.isPresenting===!0&&(ae.cameraAutoUpdate===!0&&ae.updateCamera(ve),ve=ae.getCamera()),re.isScene===!0&&re.onBeforeRender(f,re,ve,w),h=J.get(re,p.length),h.init(),p.push(h),N.multiplyMatrices(ve.projectionMatrix,ve.matrixWorldInverse),D.setFromProjectionMatrix(N),V=this.localClippingEnabled,k=Y.init(this.clippingPlanes,V,ve),u=ne.get(re,d.length),u.init(),d.push(u),dt(re,ve,0,f.sortObjects),u.finish(),f.sortObjects===!0&&u.sort(O,U),k===!0&&Y.beginShadows();const xe=h.state.shadowsArray;if(ue.render(xe,re,ve),k===!0&&Y.endShadows(),this.info.autoReset===!0&&this.info.reset(),le.render(u,re),h.setupLights(f.physicallyCorrectLights),ve.isArrayCamera){const be=ve.cameras;for(let Ie=0,We=be.length;Ie<We;Ie++){const lt=be[Ie];cn(u,re,lt,lt.viewport)}}else cn(u,re,ve);w!==null&&(_e.updateMultisampleRenderTarget(w),_e.updateRenderTargetMipmap(w)),re.isScene===!0&&re.onAfterRender(f,re,ve),W.resetDefaultState(),B=-1,C=null,p.pop(),p.length>0?h=p[p.length-1]:h=null,d.pop(),d.length>0?u=d[d.length-1]:u=null};function dt(re,ve,xe,be){if(re.visible===!1)return;if(re.layers.test(ve.layers)){if(re.isGroup)xe=re.renderOrder;else if(re.isLOD)re.autoUpdate===!0&&re.update(ve);else if(re.isLight)h.pushLight(re),re.castShadow&&h.pushShadow(re);else if(re.isSprite){if(!re.frustumCulled||D.intersectsSprite(re)){be&&z.setFromMatrixPosition(re.matrixWorld).applyMatrix4(N);const lt=K.update(re),$e=re.material;$e.visible&&u.push(re,lt,$e,xe,z.z,null)}}else if((re.isMesh||re.isLine||re.isPoints)&&(re.isSkinnedMesh&&re.skeleton.frame!==ce.render.frame&&(re.skeleton.update(),re.skeleton.frame=ce.render.frame),!re.frustumCulled||D.intersectsObject(re))){be&&z.setFromMatrixPosition(re.matrixWorld).applyMatrix4(N);const lt=K.update(re),$e=re.material;if(Array.isArray($e)){const je=lt.groups;for(let wt=0,ft=je.length;wt<ft;wt++){const vt=je[wt],Yt=$e[vt.materialIndex];Yt&&Yt.visible&&u.push(re,lt,Yt,xe,z.z,vt)}}else $e.visible&&u.push(re,lt,$e,xe,z.z,null)}}const We=re.children;for(let lt=0,$e=We.length;lt<$e;lt++)dt(We[lt],ve,xe,be)}function cn(re,ve,xe,be){const Ie=re.opaque,We=re.transmissive,lt=re.transparent;h.setupLightsView(xe),We.length>0&&Ft(Ie,ve,xe),be&&$.viewport(b.copy(be)),Ie.length>0&&ot(Ie,ve,xe),We.length>0&&ot(We,ve,xe),lt.length>0&&ot(lt,ve,xe),$.buffers.depth.setTest(!0),$.buffers.depth.setMask(!0),$.buffers.color.setMask(!0),$.setPolygonOffset(!1)}function Ft(re,ve,xe){const be=Ae.isWebGL2;Z===null&&(Z=new Qa(1,1,{generateMipmaps:!0,type:he.has("EXT_color_buffer_half_float")?Sm:sc,minFilter:Mu,samples:be&&s===!0?4:0})),f.getDrawingBufferSize(_),be?Z.setSize(_.x,_.y):Z.setSize(BB(_.x),BB(_.y));const Ie=f.getRenderTarget();f.setRenderTarget(Z),f.clear();const We=f.toneMapping;f.toneMapping=Fl,ot(re,ve,xe),f.toneMapping=We,_e.updateMultisampleRenderTarget(Z),_e.updateRenderTargetMipmap(Z),f.setRenderTarget(Ie)}function ot(re,ve,xe){const be=ve.isScene===!0?ve.overrideMaterial:null;for(let Ie=0,We=re.length;Ie<We;Ie++){const lt=re[Ie],$e=lt.object,je=lt.geometry,wt=be===null?lt.material:be,ft=lt.group;$e.layers.test(xe.layers)&&Ar($e,ve,xe,je,wt,ft)}}function Ar(re,ve,xe,be,Ie,We){re.onBeforeRender(f,ve,xe,be,Ie,We),re.modelViewMatrix.multiplyMatrices(xe.matrixWorldInverse,re.matrixWorld),re.normalMatrix.getNormalMatrix(re.modelViewMatrix),Ie.onBeforeRender(f,ve,xe,be,re,We),Ie.transparent===!0&&Ie.side===mi?(Ie.side=yi,Ie.needsUpdate=!0,f.renderBufferDirect(xe,ve,be,Ie,re,We),Ie.side=Lo,Ie.needsUpdate=!0,f.renderBufferDirect(xe,ve,be,Ie,re,We),Ie.side=mi):f.renderBufferDirect(xe,ve,be,Ie,re,We),re.onAfterRender(f,ve,xe,be,Ie,We)}function yt(re,ve,xe){ve.isScene!==!0&&(ve=ie);const be=me.get(re),Ie=h.state.lights,We=h.state.shadowsArray,lt=Ie.state.version,$e=se.getParameters(re,Ie.state,We,ve,xe),je=se.getProgramCacheKey($e);let wt=be.programs;be.environment=re.isMeshStandardMaterial?ve.environment:null,be.fog=ve.fog,be.envMap=(re.isMeshStandardMaterial?fe:P).get(re.envMap||be.environment),wt===void 0&&(re.addEventListener("dispose",Le),wt=new Map,be.programs=wt);let ft=wt.get(je);if(ft!==void 0){if(be.currentProgram===ft&&be.lightsStateVersion===lt)return qt(re,$e),ft}else $e.uniforms=se.getUniforms(re),re.onBuild(xe,$e,f),re.onBeforeCompile($e,f),ft=se.acquireProgram($e,je),wt.set(je,ft),be.uniforms=$e.uniforms;const vt=be.uniforms;(!re.isShaderMaterial&&!re.isRawShaderMaterial||re.clipping===!0)&&(vt.clippingPlanes=Y.uniform),qt(re,$e),be.needsLights=en(re),be.lightsStateVersion=lt,be.needsLights&&(vt.ambientLightColor.value=Ie.state.ambient,vt.lightProbe.value=Ie.state.probe,vt.directionalLights.value=Ie.state.directional,vt.directionalLightShadows.value=Ie.state.directionalShadow,vt.spotLights.value=Ie.state.spot,vt.spotLightShadows.value=Ie.state.spotShadow,vt.rectAreaLights.value=Ie.state.rectArea,vt.ltc_1.value=Ie.state.rectAreaLTC1,vt.ltc_2.value=Ie.state.rectAreaLTC2,vt.pointLights.value=Ie.state.point,vt.pointLightShadows.value=Ie.state.pointShadow,vt.hemisphereLights.value=Ie.state.hemi,vt.directionalShadowMap.value=Ie.state.directionalShadowMap,vt.directionalShadowMatrix.value=Ie.state.directionalShadowMatrix,vt.spotShadowMap.value=Ie.state.spotShadowMap,vt.spotLightMatrix.value=Ie.state.spotLightMatrix,vt.spotLightMap.value=Ie.state.spotLightMap,vt.pointShadowMap.value=Ie.state.pointShadowMap,vt.pointShadowMatrix.value=Ie.state.pointShadowMatrix);const Yt=ft.getUniforms(),Wr=aw.seqWithValue(Yt.seq,vt);return be.currentProgram=ft,be.uniformsList=Wr,ft}function qt(re,ve){const xe=me.get(re);xe.outputEncoding=ve.outputEncoding,xe.instancing=ve.instancing,xe.skinning=ve.skinning,xe.morphTargets=ve.morphTargets,xe.morphNormals=ve.morphNormals,xe.morphColors=ve.morphColors,xe.morphTargetsCount=ve.morphTargetsCount,xe.numClippingPlanes=ve.numClippingPlanes,xe.numIntersection=ve.numClipIntersection,xe.vertexAlphas=ve.vertexAlphas,xe.vertexTangents=ve.vertexTangents,xe.toneMapping=ve.toneMapping}function co(re,ve,xe,be,Ie){ve.isScene!==!0&&(ve=ie),_e.resetTextureUnits();const We=ve.fog,lt=be.isMeshStandardMaterial?ve.environment:null,$e=w===null?f.outputEncoding:w.isXRRenderTarget===!0?w.texture.encoding:gs,je=(be.isMeshStandardMaterial?fe:P).get(be.envMap||lt),wt=be.vertexColors===!0&&!!xe.attributes.color&&xe.attributes.color.itemSize===4,ft=!!be.normalMap&&!!xe.attributes.tangent,vt=!!xe.morphAttributes.position,Yt=!!xe.morphAttributes.normal,Wr=!!xe.morphAttributes.color,Wo=be.toneMapped?f.toneMapping:Fl,Zo=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,bi=Zo!==void 0?Zo.length:0,Vt=me.get(be),Go=h.state.lights;if(k===!0&&(V===!0||re!==C)){const Qr=re===C&&be.id===B;Y.setState(be,re,Qr)}let yn=!1;be.version===Vt.__version?(Vt.needsLights&&Vt.lightsStateVersion!==Go.state.version||Vt.outputEncoding!==$e||Ie.isInstancedMesh&&Vt.instancing===!1||!Ie.isInstancedMesh&&Vt.instancing===!0||Ie.isSkinnedMesh&&Vt.skinning===!1||!Ie.isSkinnedMesh&&Vt.skinning===!0||Vt.envMap!==je||be.fog===!0&&Vt.fog!==We||Vt.numClippingPlanes!==void 0&&(Vt.numClippingPlanes!==Y.numPlanes||Vt.numIntersection!==Y.numIntersection)||Vt.vertexAlphas!==wt||Vt.vertexTangents!==ft||Vt.morphTargets!==vt||Vt.morphNormals!==Yt||Vt.morphColors!==Wr||Vt.toneMapping!==Wo||Ae.isWebGL2===!0&&Vt.morphTargetsCount!==bi)&&(yn=!0):(yn=!0,Vt.__version=be.version);let Zr=Vt.currentProgram;yn===!0&&(Zr=yt(be,ve,Ie));let Is=!1,Ga=!1,Cc=!1;const cr=Zr.getUniforms(),uo=Vt.uniforms;if($.useProgram(Zr.program)&&(Is=!0,Ga=!0,Cc=!0),be.id!==B&&(B=be.id,Ga=!0),Is||C!==re){if(cr.setValue(q,"projectionMatrix",re.projectionMatrix),Ae.logarithmicDepthBuffer&&cr.setValue(q,"logDepthBufFC",2/(Math.log(re.far+1)/Math.LN2)),C!==re&&(C=re,Ga=!0,Cc=!0),be.isShaderMaterial||be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshStandardMaterial||be.envMap){const Qr=cr.map.cameraPosition;Qr!==void 0&&Qr.setValue(q,z.setFromMatrixPosition(re.matrixWorld))}(be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshLambertMaterial||be.isMeshBasicMaterial||be.isMeshStandardMaterial||be.isShaderMaterial)&&cr.setValue(q,"isOrthographic",re.isOrthographicCamera===!0),(be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshLambertMaterial||be.isMeshBasicMaterial||be.isMeshStandardMaterial||be.isShaderMaterial||be.isShadowMaterial||Ie.isSkinnedMesh)&&cr.setValue(q,"viewMatrix",re.matrixWorldInverse)}if(Ie.isSkinnedMesh){cr.setOptional(q,Ie,"bindMatrix"),cr.setOptional(q,Ie,"bindMatrixInverse");const Qr=Ie.skeleton;Qr&&(Ae.floatVertexTextures?(Qr.boneTexture===null&&Qr.computeBoneTexture(),cr.setValue(q,"boneTexture",Qr.boneTexture,_e),cr.setValue(q,"boneTextureSize",Qr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const bc=xe.morphAttributes;if((bc.position!==void 0||bc.normal!==void 0||bc.color!==void 0&&Ae.isWebGL2===!0)&&we.update(Ie,xe,be,Zr),(Ga||Vt.receiveShadow!==Ie.receiveShadow)&&(Vt.receiveShadow=Ie.receiveShadow,cr.setValue(q,"receiveShadow",Ie.receiveShadow)),be.isMeshGouraudMaterial&&be.envMap!==null&&(uo.envMap.value=je,uo.flipEnvMap.value=je.isCubeTexture&&je.isRenderTargetTexture===!1?-1:1),Ga&&(cr.setValue(q,"toneMappingExposure",f.toneMappingExposure),Vt.needsLights&&Xt(uo,Cc),We&&be.fog===!0&&ye.refreshFogUniforms(uo,We),ye.refreshMaterialUniforms(uo,be,H,M,Z),aw.upload(q,Vt.uniformsList,uo,_e)),be.isShaderMaterial&&be.uniformsNeedUpdate===!0&&(aw.upload(q,Vt.uniformsList,uo,_e),be.uniformsNeedUpdate=!1),be.isSpriteMaterial&&cr.setValue(q,"center",Ie.center),cr.setValue(q,"modelViewMatrix",Ie.modelViewMatrix),cr.setValue(q,"normalMatrix",Ie.normalMatrix),cr.setValue(q,"modelMatrix",Ie.matrixWorld),be.isShaderMaterial||be.isRawShaderMaterial){const Qr=be.uniformsGroups;for(let Jb=0,Cz=Qr.length;Jb<Cz;Jb++)if(Ae.isWebGL2){const dR=Qr[Jb];te.update(dR,Zr),te.bind(dR,Zr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Zr}function Xt(re,ve){re.ambientLightColor.needsUpdate=ve,re.lightProbe.needsUpdate=ve,re.directionalLights.needsUpdate=ve,re.directionalLightShadows.needsUpdate=ve,re.pointLights.needsUpdate=ve,re.pointLightShadows.needsUpdate=ve,re.spotLights.needsUpdate=ve,re.spotLightShadows.needsUpdate=ve,re.rectAreaLights.needsUpdate=ve,re.hemisphereLights.needsUpdate=ve}function en(re){return re.isMeshLambertMaterial||re.isMeshToonMaterial||re.isMeshPhongMaterial||re.isMeshStandardMaterial||re.isShadowMaterial||re.isShaderMaterial&&re.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(re,ve,xe){me.get(re.texture).__webglTexture=ve,me.get(re.depthTexture).__webglTexture=xe;const be=me.get(re);be.__hasExternalTextures=!0,be.__hasExternalTextures&&(be.__autoAllocateDepthBuffer=xe===void 0,be.__autoAllocateDepthBuffer||he.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),be.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(re,ve){const xe=me.get(re);xe.__webglFramebuffer=ve,xe.__useDefaultFramebuffer=ve===void 0},this.setRenderTarget=function(re,ve=0,xe=0){w=re,g=ve,v=xe;let be=!0,Ie=null,We=!1,lt=!1;if(re){const je=me.get(re);je.__useDefaultFramebuffer!==void 0?($.bindFramebuffer(36160,null),be=!1):je.__webglFramebuffer===void 0?_e.setupRenderTarget(re):je.__hasExternalTextures&&_e.rebindTextures(re,me.get(re.texture).__webglTexture,me.get(re.depthTexture).__webglTexture);const wt=re.texture;(wt.isData3DTexture||wt.isDataArrayTexture||wt.isCompressedArrayTexture)&&(lt=!0);const ft=me.get(re).__webglFramebuffer;re.isWebGLCubeRenderTarget?(Ie=ft[ve],We=!0):Ae.isWebGL2&&re.samples>0&&_e.useMultisampledRTT(re)===!1?Ie=me.get(re).__webglMultisampledFramebuffer:Ie=ft,b.copy(re.viewport),F.copy(re.scissor),x=re.scissorTest}else b.copy(y).multiplyScalar(H).floor(),F.copy(I).multiplyScalar(H).floor(),x=R;if($.bindFramebuffer(36160,Ie)&&Ae.drawBuffers&&be&&$.drawBuffers(re,Ie),$.viewport(b),$.scissor(F),$.setScissorTest(x),We){const je=me.get(re.texture);q.framebufferTexture2D(36160,36064,34069+ve,je.__webglTexture,xe)}else if(lt){const je=me.get(re.texture),wt=ve||0;q.framebufferTextureLayer(36160,36064,je.__webglTexture,xe||0,wt)}B=-1},this.readRenderTargetPixels=function(re,ve,xe,be,Ie,We,lt){if(!(re&&re.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let $e=me.get(re).__webglFramebuffer;if(re.isWebGLCubeRenderTarget&&lt!==void 0&&($e=$e[lt]),$e){$.bindFramebuffer(36160,$e);try{const je=re.texture,wt=je.format,ft=je.type;if(wt!==Ir&&S.convert(wt)!==q.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const vt=ft===Sm&&(he.has("EXT_color_buffer_half_float")||Ae.isWebGL2&&he.has("EXT_color_buffer_float"));if(ft!==sc&&S.convert(ft)!==q.getParameter(35738)&&!(ft===RA&&(Ae.isWebGL2||he.has("OES_texture_float")||he.has("WEBGL_color_buffer_float")))&&!vt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ve>=0&&ve<=re.width-be&&xe>=0&&xe<=re.height-Ie&&q.readPixels(ve,xe,be,Ie,S.convert(wt),S.convert(ft),We)}finally{const je=w!==null?me.get(w).__webglFramebuffer:null;$.bindFramebuffer(36160,je)}}},this.copyFramebufferToTexture=function(re,ve,xe=0){const be=Math.pow(2,-xe),Ie=Math.floor(ve.image.width*be),We=Math.floor(ve.image.height*be);_e.setTexture2D(ve,0),q.copyTexSubImage2D(3553,xe,0,0,re.x,re.y,Ie,We),$.unbindTexture()},this.copyTextureToTexture=function(re,ve,xe,be=0){const Ie=ve.image.width,We=ve.image.height,lt=S.convert(xe.format),$e=S.convert(xe.type);_e.setTexture2D(xe,0),q.pixelStorei(37440,xe.flipY),q.pixelStorei(37441,xe.premultiplyAlpha),q.pixelStorei(3317,xe.unpackAlignment),ve.isDataTexture?q.texSubImage2D(3553,be,re.x,re.y,Ie,We,lt,$e,ve.image.data):ve.isCompressedTexture?q.compressedTexSubImage2D(3553,be,re.x,re.y,ve.mipmaps[0].width,ve.mipmaps[0].height,lt,ve.mipmaps[0].data):q.texSubImage2D(3553,be,re.x,re.y,lt,$e,ve.image),be===0&&xe.generateMipmaps&&q.generateMipmap(3553),$.unbindTexture()},this.copyTextureToTexture3D=function(re,ve,xe,be,Ie=0){if(f.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const We=re.max.x-re.min.x+1,lt=re.max.y-re.min.y+1,$e=re.max.z-re.min.z+1,je=S.convert(be.format),wt=S.convert(be.type);let ft;if(be.isData3DTexture)_e.setTexture3D(be,0),ft=32879;else if(be.isDataArrayTexture)_e.setTexture2DArray(be,0),ft=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}q.pixelStorei(37440,be.flipY),q.pixelStorei(37441,be.premultiplyAlpha),q.pixelStorei(3317,be.unpackAlignment);const vt=q.getParameter(3314),Yt=q.getParameter(32878),Wr=q.getParameter(3316),Wo=q.getParameter(3315),Zo=q.getParameter(32877),bi=xe.isCompressedTexture?xe.mipmaps[0]:xe.image;q.pixelStorei(3314,bi.width),q.pixelStorei(32878,bi.height),q.pixelStorei(3316,re.min.x),q.pixelStorei(3315,re.min.y),q.pixelStorei(32877,re.min.z),xe.isDataTexture||xe.isData3DTexture?q.texSubImage3D(ft,Ie,ve.x,ve.y,ve.z,We,lt,$e,je,wt,bi.data):xe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),q.compressedTexSubImage3D(ft,Ie,ve.x,ve.y,ve.z,We,lt,$e,je,bi.data)):q.texSubImage3D(ft,Ie,ve.x,ve.y,ve.z,We,lt,$e,je,wt,bi),q.pixelStorei(3314,vt),q.pixelStorei(32878,Yt),q.pixelStorei(3316,Wr),q.pixelStorei(3315,Wo),q.pixelStorei(32877,Zo),Ie===0&&be.generateMipmaps&&q.generateMipmap(ft),$.unbindTexture()},this.initTexture=function(re){re.isCubeTexture?_e.setTextureCube(re,0):re.isData3DTexture?_e.setTexture3D(re,0):re.isDataArrayTexture||re.isCompressedArrayTexture?_e.setTexture2DArray(re,0):_e.setTexture2D(re,0),$.unbindTexture()},this.resetState=function(){g=0,v=0,w=null,$.reset(),W.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Yre extends h0{}Yre.prototype.isWebGL1Renderer=!0;class CB extends Lt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Xre{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=w_,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=No()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=No()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=No()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const si=new j;class CU{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)si.fromBufferAttribute(this,t),si.applyMatrix4(e),this.setXYZ(t,si.x,si.y,si.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)si.fromBufferAttribute(this,t),si.applyNormalMatrix(e),this.setXYZ(t,si.x,si.y,si.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)si.fromBufferAttribute(this,t),si.transformDirection(e),this.setXYZ(t,si.x,si.y,si.z);return this}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Cl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Cl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Cl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Cl(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new ut(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new CU(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const jT=new j,KT=new Nt,$T=new Nt,jre=new j,qT=new Je;class _l extends In{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Je,this.bindMatrixInverse=new Je}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Nt,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;KT.fromBufferAttribute(i.attributes.skinIndex,e),$T.fromBufferAttribute(i.attributes.skinWeight,e),jT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=$T.getComponent(s);if(o!==0){const a=KT.getComponent(s);qT.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(jre.copy(jT).applyMatrix4(qT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class bB extends Lt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class vG extends or{constructor(e=null,t=1,r=1,i,s,o,a,l,A=nr,c=nr,u,h){super(null,o,a,l,A,c,i,s,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const eN=new Je,Kre=new Je;class yc{constructor(e=[],t=[]){this.uuid=No(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Je)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Je;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Kre;eN.multiplyMatrices(a,t[s]),eN.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new yc(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=iG(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new vG(t,e,e,Ir,RA);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new bB),this.bones.push(o),this.boneInverses.push(new Je().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class xB extends ut{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const tN=new Je,nN=new Je,Ev=[],$re=new Je,Qp=new In;class eb extends In{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new xB(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1;for(let i=0;i<r;i++)this.setMatrixAt(i,$re)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Qp.geometry=this.geometry,Qp.material=this.material,Qp.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,tN),nN.multiplyMatrices(r,tN),Qp.matrixWorld=nN,Qp.raycast(e,Ev);for(let o=0,a=Ev.length;o<a;o++){const l=Ev[o];l.instanceId=s,l.object=this,t.push(l)}Ev.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new xB(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Hl extends us{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ve(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const rN=new j,iN=new j,sN=new Je,F1=new u0,Sv=new Nu;class Vf extends Lt{constructor(e=new zt,t=new Hl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)rN.fromBufferAttribute(t,i-1),iN.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=rN.distanceTo(iN);e.setAttribute("lineDistance",new rn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Sv.copy(r.boundingSphere),Sv.applyMatrix4(i),Sv.radius+=s,e.ray.intersectsSphere(Sv)===!1)return;sN.copy(i).invert(),F1.copy(e.ray).applyMatrix4(sN);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,A=new j,c=new j,u=new j,h=new j,d=this.isLineSegments?2:1,p=r.index,m=r.attributes.position;if(p!==null){const g=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let w=g,B=v-1;w<B;w+=d){const C=p.getX(w),b=p.getX(w+1);if(A.fromBufferAttribute(m,C),c.fromBufferAttribute(m,b),F1.distanceSqToSegment(A,c,h,u)>l)continue;h.applyMatrix4(this.matrixWorld);const x=e.ray.origin.distanceTo(h);x<e.near||x>e.far||t.push({distance:x,point:u.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),v=Math.min(m.count,o.start+o.count);for(let w=g,B=v-1;w<B;w+=d){if(A.fromBufferAttribute(m,w),c.fromBufferAttribute(m,w+1),F1.distanceSqToSegment(A,c,h,u)>l)continue;h.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(h);b<e.near||b>e.far||t.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const oN=new j,aN=new j;class f0 extends Vf{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)oN.fromBufferAttribute(t,i),aN.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+oN.distanceTo(aN);e.setAttribute("lineDistance",new rn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class qre extends Vf{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class yG extends us{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ve(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const lN=new Je,x_=new u0,Uv=new Nu,Qv=new j;class eie extends Lt{constructor(e=new zt,t=new yG){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Uv.copy(r.boundingSphere),Uv.applyMatrix4(i),Uv.radius+=s,e.ray.intersectsSphere(Uv)===!1)return;lN.copy(i).invert(),x_.copy(e.ray).applyMatrix4(lN);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,A=r.index,u=r.attributes.position;if(A!==null){const h=Math.max(0,o.start),d=Math.min(A.count,o.start+o.count);for(let p=h,f=d;p<f;p++){const m=A.getX(p);Qv.fromBufferAttribute(u,m),AN(Qv,m,l,i,e,t,this)}}else{const h=Math.max(0,o.start),d=Math.min(u.count,o.start+o.count);for(let p=h,f=d;p<f;p++)Qv.fromBufferAttribute(u,p),AN(Qv,p,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function AN(n,e,t,r,i,s,o){const a=x_.distanceSqToPoint(n);if(a<t){const l=new j;x_.closestPointToPoint(n,l),l.applyMatrix4(r);const A=i.ray.origin.distanceTo(l);if(A<i.near||A>i.far)return;s.push({distance:A,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class tie{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,A;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),A=r[i]-o,A<0)a=i+1;else if(A>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],h=r[i+1]-c,d=(o-c)/h;return(i+d)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new ze:new j);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new j,i=[],s=[],o=[],a=new j,l=new Je;for(let d=0;d<=e;d++){const p=d/e;i[d]=this.getTangentAt(p,new j)}s[0]=new j,o[0]=new j;let A=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=A&&(A=c,r.set(1,0,0)),u<=A&&(A=u,r.set(0,1,0)),h<=A&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(pr(i[d-1].dot(i[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(a,p))}o[d].crossVectors(i[d],s[d])}if(t===!0){let d=Math.acos(pr(s[0].dot(s[e]),-1,1));d/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(i[p],d*p)),o[p].crossVectors(i[p],s[p])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class tb extends zt{constructor(e=1,t=1,r=1,i=8,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const A=this;i=Math.floor(i),s=Math.floor(s);const c=[],u=[],h=[],d=[];let p=0;const f=[],m=r/2;let g=0;v(),o===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(c),this.setAttribute("position",new rn(u,3)),this.setAttribute("normal",new rn(h,3)),this.setAttribute("uv",new rn(d,2));function v(){const B=new j,C=new j;let b=0;const F=(t-e)/r;for(let x=0;x<=s;x++){const E=[],M=x/s,H=M*(t-e)+e;for(let O=0;O<=i;O++){const U=O/i,y=U*l+a,I=Math.sin(y),R=Math.cos(y);C.x=H*I,C.y=-M*r+m,C.z=H*R,u.push(C.x,C.y,C.z),B.set(I,F,R).normalize(),h.push(B.x,B.y,B.z),d.push(U,1-M),E.push(p++)}f.push(E)}for(let x=0;x<i;x++)for(let E=0;E<s;E++){const M=f[E][x],H=f[E+1][x],O=f[E+1][x+1],U=f[E][x+1];c.push(M,H,U),c.push(H,O,U),b+=6}A.addGroup(g,b,0),g+=b}function w(B){const C=p,b=new ze,F=new j;let x=0;const E=B===!0?e:t,M=B===!0?1:-1;for(let O=1;O<=i;O++)u.push(0,m*M,0),h.push(0,M,0),d.push(.5,.5),p++;const H=p;for(let O=0;O<=i;O++){const y=O/i*l+a,I=Math.cos(y),R=Math.sin(y);F.x=E*R,F.y=m*M,F.z=E*I,u.push(F.x,F.y,F.z),h.push(0,M,0),b.x=I*.5+.5,b.y=R*.5*M+.5,d.push(b.x,b.y),p++}for(let O=0;O<i;O++){const U=C+O,y=H+O;B===!0?c.push(y,y+1,U):c.push(y+1,y,U),x+=3}A.addGroup(g,x,B===!0?1:2),g+=x}}static fromJSON(e){return new tb(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class bU extends zt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let A=0;const c=[],u=new j,h=new j,d=[],p=[],f=[],m=[];for(let g=0;g<=r;g++){const v=[],w=g/r;let B=0;g==0&&o==0?B=.5/t:g==r&&l==Math.PI&&(B=-.5/t);for(let C=0;C<=t;C++){const b=C/t;u.x=-e*Math.cos(i+b*s)*Math.sin(o+w*a),u.y=e*Math.cos(o+w*a),u.z=e*Math.sin(i+b*s)*Math.sin(o+w*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(b+B,1-w),v.push(A++)}c.push(v)}for(let g=0;g<r;g++)for(let v=0;v<t;v++){const w=c[g][v+1],B=c[g][v],C=c[g+1][v],b=c[g+1][v+1];(g!==0||o>0)&&d.push(w,B,b),(g!==r-1||l<Math.PI)&&d.push(B,C,b)}this.setIndex(d),this.setAttribute("position",new rn(p,3)),this.setAttribute("normal",new rn(f,3)),this.setAttribute("uv",new rn(m,2))}static fromJSON(e){return new bU(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Cu extends us{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ve(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Lu extends Cu{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ve(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ve(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ve(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class _1 extends us{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ve(16777215),this.specular=new Ve(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=jC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nie extends us{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class rie extends us{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=jC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function aA(n,e,t){return wG(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Rv(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function wG(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function iie(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function cN(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function BG(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}class p0{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class sie extends p0{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:bh,endingEnd:bh}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case xh:s=e,a=2*t-r;break;case wB:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case xh:o=e,l=2*r-t;break;case wB:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const A=(r-t)*.5,c=this.valueSize;this._weightPrev=A/(t-a),this._weightNext=A/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,A=l-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(r-t)/(i-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,w=(-1-d)*m+(1.5+d)*f+.5*p,B=d*m-d*f;for(let C=0;C!==a;++C)s[C]=g*o[c+C]+v*o[A+C]+w*o[l+C]+B*o[u+C];return s}}class CG extends p0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,A=l-a,c=(r-t)/(i-t),u=1-c;for(let h=0;h!==a;++h)s[h]=o[A+h]*u+o[l+h]*c;return s}}class oie extends p0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class La{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Rv(t,this.TimeBufferType),this.values=Rv(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Rv(e.times,Array),values:Rv(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new oie(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new CG(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new sie(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Cf:t=this.InterpolantFactoryMethodDiscrete;break;case Bu:t=this.InterpolantFactoryMethodLinear;break;case qx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Cf;case this.InterpolantFactoryMethodLinear:return Bu;case this.InterpolantFactoryMethodSmooth:return qx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=aA(r,s,o),this.values=aA(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&wG(i))for(let a=0,l=i.length;a!==l;++a){const A=i[a];if(isNaN(A)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,A),e=!1;break}}return e}optimize(){const e=aA(this.times),t=aA(this.values),r=this.getValueSize(),i=this.getInterpolation()===qx,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const A=e[a],c=e[a+1];if(A!==c&&(a!==1||A!==e[0]))if(i)l=!0;else{const u=a*r,h=u-r,d=u+r;for(let p=0;p!==r;++p){const f=t[u+p];if(f!==t[h+p]||f!==t[d+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const u=a*r,h=o*r;for(let d=0;d!==r;++d)t[h+d]=t[u+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,A=0;A!==r;++A)t[l+A]=t[a+A];++o}return o!==e.length?(this.times=aA(e,0,o),this.values=aA(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=aA(this.times,0),t=aA(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}La.prototype.TimeBufferType=Float32Array;La.prototype.ValueBufferType=Float32Array;La.prototype.DefaultInterpolation=Bu;class Pf extends La{}Pf.prototype.ValueTypeName="bool";Pf.prototype.ValueBufferType=Array;Pf.prototype.DefaultInterpolation=Cf;Pf.prototype.InterpolantFactoryMethodLinear=void 0;Pf.prototype.InterpolantFactoryMethodSmooth=void 0;class bG extends La{}bG.prototype.ValueTypeName="color";class xf extends La{}xf.prototype.ValueTypeName="number";class aie extends p0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let A=e*a;for(let c=A+a;A!==c;A+=4)rt.slerpFlat(s,0,o,A-a,o,A,l);return s}}class Ra extends La{InterpolantFactoryMethodLinear(e){return new aie(this.times,this.values,this.getValueSize(),e)}}Ra.prototype.ValueTypeName="quaternion";Ra.prototype.DefaultInterpolation=Bu;Ra.prototype.InterpolantFactoryMethodSmooth=void 0;class Of extends La{}Of.prototype.ValueTypeName="string";Of.prototype.ValueBufferType=Array;Of.prototype.DefaultInterpolation=Cf;Of.prototype.InterpolantFactoryMethodLinear=void 0;Of.prototype.InterpolantFactoryMethodSmooth=void 0;class oc extends La{}oc.prototype.ValueTypeName="vector";class bu{constructor(e,t=-1,r,i=pU){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=No(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(Aie(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(La.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],A=[];l.push((a+s-1)%s,a,(a+1)%s),A.push(0,1,0);const c=iie(l);l=cN(l,1,c),A=cN(A,1,c),!i&&l[0]===0&&(l.push(s),A.push(A[0])),o.push(new xf(".morphTargetInfluences["+t[a].name+"]",l,A).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const A=e[a],c=A.name.match(s);if(c&&c.length>1){const u=c[1];let h=i[u];h||(i[u]=h=[]),h.push(A)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(u,h,d,p,f){if(d.length!==0){const m=[],g=[];BG(d,m,g,p),m.length!==0&&f.push(new u(h,m,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const A=e.hierarchy||[];for(let u=0;u<A.length;u++){const h=A[u].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let f=0;f<h[p].morphTargets.length;f++)d[h[p].morphTargets[f]]=-1;for(const f in d){const m=[],g=[];for(let v=0;v!==h[p].morphTargets.length;++v){const w=h[p];m.push(w.time),g.push(w.morphTarget===f?1:0)}i.push(new xf(".morphTargetInfluence["+f+"]",m,g))}l=d.length*o}else{const d=".bones["+t[u].name+"]";r(oc,d+".position",h,"pos",i),r(Ra,d+".quaternion",h,"rot",i),r(oc,d+".scale",h,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function lie(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return xf;case"vector":case"vector2":case"vector3":case"vector4":return oc;case"color":return bG;case"quaternion":return Ra;case"bool":case"boolean":return Pf;case"string":return Of}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Aie(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=lie(n.type);if(n.times===void 0){const t=[],r=[];BG(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const If={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class xG{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const A=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,u){return A.push(c,u),this},this.removeHandler=function(c){const u=A.indexOf(c);return u!==-1&&A.splice(u,2),this},this.getHandler=function(c){for(let u=0,h=A.length;u<h;u+=2){const d=A[u],p=A[u+1];if(d.global&&(d.lastIndex=0),d.test(c))return p}return null}}}const cie=new xG;class Wf{constructor(e){this.manager=e!==void 0?e:cie,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ja={};class uie extends Error{constructor(e,t){super(e),this.response=t}}class xU extends Wf{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=If.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(ja[e]!==void 0){ja[e].push({onLoad:t,onProgress:r,onError:i});return}ja[e]=[],ja[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(A=>{if(A.status===200||A.status===0){if(A.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||A.body===void 0||A.body.getReader===void 0)return A;const c=ja[e],u=A.body.getReader(),h=A.headers.get("Content-Length"),d=h?parseInt(h):0,p=d!==0;let f=0;const m=new ReadableStream({start(g){v();function v(){u.read().then(({done:w,value:B})=>{if(w)g.close();else{f+=B.byteLength;const C=new ProgressEvent("progress",{lengthComputable:p,loaded:f,total:d});for(let b=0,F=c.length;b<F;b++){const x=c[b];x.onProgress&&x.onProgress(C)}g.enqueue(B),v()}})}}});return new Response(m)}else throw new uie(`fetch for "${A.url}" responded with ${A.status}: ${A.statusText}`,A)}).then(A=>{switch(l){case"arraybuffer":return A.arrayBuffer();case"blob":return A.blob();case"document":return A.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return A.json();default:if(a===void 0)return A.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,d=new TextDecoder(h);return A.arrayBuffer().then(p=>d.decode(p))}}}).then(A=>{If.add(e,A);const c=ja[e];delete ja[e];for(let u=0,h=c.length;u<h;u++){const d=c[u];d.onLoad&&d.onLoad(A)}}).catch(A=>{const c=ja[e];if(c===void 0)throw this.manager.itemError(e),A;delete ja[e];for(let u=0,h=c.length;u<h;u++){const d=c[u];d.onError&&d.onError(A)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class IG extends Wf{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=If.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Qm("img");function l(){c(),If.add(e,this),t&&t(this),s.manager.itemEnd(e)}function A(u){c(),i&&i(u),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",A,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",A,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Vu extends Wf{constructor(e){super(e)}load(e,t,r,i){const s=new or,o=new IG(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class nb extends Lt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ve(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const E1=new Je,uN=new j,dN=new j;class IU{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ze(512,512),this.map=null,this.mapPass=null,this.matrix=new Je,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wU,this._frameExtents=new ze(1,1),this._viewportCount=1,this._viewports=[new Nt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;uN.setFromMatrixPosition(e.matrixWorld),t.position.copy(uN),dN.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(dN),t.updateMatrixWorld(),E1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(E1),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(E1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class die extends IU{constructor(){super(new Nr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Um*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class FG extends nb{constructor(e,t,r=0,i=Math.PI/3,s=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Lt.DefaultUp),this.updateMatrix(),this.target=new Lt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new die}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const hN=new Je,Rp=new j,S1=new j;class hie extends IU{constructor(){super(new Nr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ze(4,2),this._viewportCount=6,this._viewports=[new Nt(2,1,1,1),new Nt(0,1,1,1),new Nt(3,1,1,1),new Nt(1,1,1,1),new Nt(3,0,1,1),new Nt(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Rp.setFromMatrixPosition(e.matrixWorld),r.position.copy(Rp),S1.copy(r.position),S1.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(S1),r.updateMatrixWorld(),i.makeTranslation(-Rp.x,-Rp.y,-Rp.z),hN.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hN)}}class I_ extends nb{constructor(e,t,r=0,i=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new hie}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class fie extends IU{constructor(){super(new Du(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class FU extends nb{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Lt.DefaultUp),this.updateMatrix(),this.target=new Lt,this.shadow=new fie}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class _G extends nb{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class xa{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class pie extends Wf{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=If.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){If.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class EG{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=fN(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=fN();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function fN(){return(typeof performance>"u"?Date:performance).now()}class gie{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,A=t+t;l!==A;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){rt.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;rt.multiplyQuaternionsFlat(e,o,e,t,e,r),rt.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const _U="\\[\\]\\.:\\/",mie=new RegExp("["+_U+"]","g"),EU="[^"+_U+"]",vie="[^"+_U.replace("\\.","")+"]",yie=/((?:WC+[\/:])*)/.source.replace("WC",EU),wie=/(WCOD+)?/.source.replace("WCOD",vie),Bie=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",EU),Cie=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",EU),bie=new RegExp("^"+yie+wie+Bie+Cie+"$"),xie=["material","materials","bones","map"];class Iie{constructor(e,t,r){const i=r||Ct.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Ct{constructor(e,t,r){this.path=t,this.parsedPath=r||Ct.parseTrackName(t),this.node=Ct.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Ct.Composite(e,t,r):new Ct(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(mie,"")}static parseTrackName(e){const t=bie.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);xie.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Ct.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let A=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===A){A=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(A!==void 0){if(e[A]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[A]}}const o=e[i];if(o===void 0){const A=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+A+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ct.Composite=Iie;Ct.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ct.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ct.prototype.GetterByBindingType=[Ct.prototype._getValue_direct,Ct.prototype._getValue_array,Ct.prototype._getValue_arrayElement,Ct.prototype._getValue_toArray];Ct.prototype.SetterByBindingTypeAndVersioning=[[Ct.prototype._setValue_direct,Ct.prototype._setValue_direct_setNeedsUpdate,Ct.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ct.prototype._setValue_array,Ct.prototype._setValue_array_setNeedsUpdate,Ct.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ct.prototype._setValue_arrayElement,Ct.prototype._setValue_arrayElement_setNeedsUpdate,Ct.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ct.prototype._setValue_fromArray,Ct.prototype._setValue_fromArray_setNeedsUpdate,Ct.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Fie{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:bh,endingEnd:bh};for(let A=0;A!==o;++A){const c=s[A].createInterpolant(null);a[A]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=U$,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,A=a.sampleValues;return l[0]=s,l[1]=s+r,A[0]=e/o,A[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,A=this._propertyBindings;switch(this.blendMode){case R$:for(let c=0,u=l.length;c!==u;++c)l[c].evaluate(o),A[c].accumulateAdditive(a);break;case pU:default:for(let c=0,u=l.length;c!==u;++c)l[c].evaluate(o),A[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===Q$;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===S$){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const A=e<0;this._setEndings(A,!A,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=xh,i.endingEnd=xh):(e?i.endingStart=this.zeroSlopeAtStart?xh:bh:i.endingStart=wB,t?i.endingEnd=this.zeroSlopeAtEnd?xh:bh:i.endingEnd=wB)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const _ie=new Float32Array(1);class Eie extends vc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,A=this._bindingsByRootAndName;let c=A[l];c===void 0&&(c={},A[l]=c);for(let u=0;u!==s;++u){const h=i[u],d=h.name;let p=c[d];if(p!==void 0)++p.referenceCount,o[u]=p;else{if(p=o[u],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,d));continue}const f=t&&t._propertyBindings[u].binding.parsedPath;p=new gie(Ct.create(r,d,f),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,d),o[u]=p}a[u].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,A=l[l.length-1],c=e._byClipCacheIndex;A._byClipCacheIndex=c,l[c]=A,l.pop(),e._byClipCacheIndex=null;const u=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],A=e._cacheIndex;l._cacheIndex=A,t[A]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new CG(new Float32Array(2),new Float32Array(2),1,_ie),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?bu.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let A=null;if(r===void 0&&(o!==null?r=o.blendMode:r=pU),l!==void 0){const u=l.actionByRoot[s];if(u!==void 0&&u.blendMode===r)return u;A=l.knownActions[0],o===null&&(o=A._clip)}if(o===null)return null;const c=new Fie(this,o,t,r);return this._bindAction(c,A),this._addInactiveAction(c,a,s),c}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?bu.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let A=0;A!==r;++A)t[A]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let A=0;A!==l;++A)a[A].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const A=o[a];this._deactivateAction(A);const c=A._cacheIndex,u=t[t.length-1];A._cacheIndex=null,A._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(A)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class pN{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class SG{constructor(e,t,r=0,i=1/0){this.ray=new u0(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new vU,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return F_(e,this,r,t),r.sort(gN),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)F_(e[i],this,r,t);return r.sort(gN),r}}function gN(n,e){return n.distance-e.distance}function F_(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)F_(i[s],e,t,!0)}}class mN{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(pr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const vN=new j,Mv=new j;class El{constructor(e=new j,t=new j){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){vN.subVectors(e,this.start),Mv.subVectors(this.end,this.start);const r=Mv.dot(Mv);let s=Mv.dot(vN)/r;return t&&(s=pr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class Sie extends f0{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new zt;i.setAttribute("position",new rn(t,3)),i.setAttribute("color",new rn(r,3));const s=new Hl({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new Ve,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ps}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ps);const yN={type:"change"},U1={type:"start"},wN={type:"end"};class Uie extends vc{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new j,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:$u.ROTATE,MIDDLE:$u.DOLLY,RIGHT:$u.PAN},this.touches={ONE:qu.ROTATE,TWO:qu.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(S){S.addEventListener("keydown",ne),this._domElementKeyEvents=S},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(yN),r.update(),s=i.NONE},this.update=function(){const S=new j,W=new rt().setFromUnitVectors(e.up,new j(0,1,0)),te=W.clone().invert(),oe=new j,ae=new rt,Se=2*Math.PI;return function(){const Me=r.object.position;S.copy(Me).sub(r.target),S.applyQuaternion(W),a.setFromVector3(S),r.autoRotate&&s===i.NONE&&E(F()),r.enableDamping?(a.theta+=l.theta*r.dampingFactor,a.phi+=l.phi*r.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Le=r.minAzimuthAngle,ke=r.maxAzimuthAngle;return isFinite(Le)&&isFinite(ke)&&(Le<-Math.PI?Le+=Se:Le>Math.PI&&(Le-=Se),ke<-Math.PI?ke+=Se:ke>Math.PI&&(ke-=Se),Le<=ke?a.theta=Math.max(Le,Math.min(ke,a.theta)):a.theta=a.theta>(Le+ke)/2?Math.max(Le,a.theta):Math.min(ke,a.theta)),a.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=A,a.radius=Math.max(r.minDistance,Math.min(r.maxDistance,a.radius)),r.enableDamping===!0?r.target.addScaledVector(c,r.dampingFactor):r.target.add(c),S.setFromSpherical(a),S.applyQuaternion(te),Me.copy(r.target).add(S),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,c.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),c.set(0,0,0)),A=1,u||oe.distanceToSquared(r.object.position)>o||8*(1-ae.dot(r.object.quaternion))>o?(r.dispatchEvent(yN),oe.copy(r.object.position),ae.copy(r.object.quaternion),u=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",ue),r.domElement.removeEventListener("pointerdown",P),r.domElement.removeEventListener("pointercancel",ee),r.domElement.removeEventListener("wheel",ye),r.domElement.removeEventListener("pointermove",fe),r.domElement.removeEventListener("pointerup",de),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",ne)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=i.NONE;const o=1e-6,a=new mN,l=new mN;let A=1;const c=new j;let u=!1;const h=new ze,d=new ze,p=new ze,f=new ze,m=new ze,g=new ze,v=new ze,w=new ze,B=new ze,C=[],b={};function F(){return 2*Math.PI/60/60*r.autoRotateSpeed}function x(){return Math.pow(.95,r.zoomSpeed)}function E(S){l.theta-=S}function M(S){l.phi-=S}const H=function(){const S=new j;return function(te,oe){S.setFromMatrixColumn(oe,0),S.multiplyScalar(-te),c.add(S)}}(),O=function(){const S=new j;return function(te,oe){r.screenSpacePanning===!0?S.setFromMatrixColumn(oe,1):(S.setFromMatrixColumn(oe,0),S.crossVectors(r.object.up,S)),S.multiplyScalar(te),c.add(S)}}(),U=function(){const S=new j;return function(te,oe){const ae=r.domElement;if(r.object.isPerspectiveCamera){const Se=r.object.position;S.copy(Se).sub(r.target);let Ee=S.length();Ee*=Math.tan(r.object.fov/2*Math.PI/180),H(2*te*Ee/ae.clientHeight,r.object.matrix),O(2*oe*Ee/ae.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(H(te*(r.object.right-r.object.left)/r.object.zoom/ae.clientWidth,r.object.matrix),O(oe*(r.object.top-r.object.bottom)/r.object.zoom/ae.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function y(S){r.object.isPerspectiveCamera?A/=S:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*S)),r.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function I(S){r.object.isPerspectiveCamera?A*=S:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/S)),r.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function R(S){h.set(S.clientX,S.clientY)}function D(S){v.set(S.clientX,S.clientY)}function k(S){f.set(S.clientX,S.clientY)}function V(S){d.set(S.clientX,S.clientY),p.subVectors(d,h).multiplyScalar(r.rotateSpeed);const W=r.domElement;E(2*Math.PI*p.x/W.clientHeight),M(2*Math.PI*p.y/W.clientHeight),h.copy(d),r.update()}function Z(S){w.set(S.clientX,S.clientY),B.subVectors(w,v),B.y>0?y(x()):B.y<0&&I(x()),v.copy(w),r.update()}function N(S){m.set(S.clientX,S.clientY),g.subVectors(m,f).multiplyScalar(r.panSpeed),U(g.x,g.y),f.copy(m),r.update()}function _(S){S.deltaY<0?I(x()):S.deltaY>0&&y(x()),r.update()}function z(S){let W=!1;switch(S.code){case r.keys.UP:U(0,r.keyPanSpeed),W=!0;break;case r.keys.BOTTOM:U(0,-r.keyPanSpeed),W=!0;break;case r.keys.LEFT:U(r.keyPanSpeed,0),W=!0;break;case r.keys.RIGHT:U(-r.keyPanSpeed,0),W=!0;break}W&&(S.preventDefault(),r.update())}function ie(){if(C.length===1)h.set(C[0].pageX,C[0].pageY);else{const S=.5*(C[0].pageX+C[1].pageX),W=.5*(C[0].pageY+C[1].pageY);h.set(S,W)}}function T(){if(C.length===1)f.set(C[0].pageX,C[0].pageY);else{const S=.5*(C[0].pageX+C[1].pageX),W=.5*(C[0].pageY+C[1].pageY);f.set(S,W)}}function q(){const S=C[0].pageX-C[1].pageX,W=C[0].pageY-C[1].pageY,te=Math.sqrt(S*S+W*W);v.set(0,te)}function ge(){r.enableZoom&&q(),r.enablePan&&T()}function he(){r.enableZoom&&q(),r.enableRotate&&ie()}function Ae(S){if(C.length==1)d.set(S.pageX,S.pageY);else{const te=Q(S),oe=.5*(S.pageX+te.x),ae=.5*(S.pageY+te.y);d.set(oe,ae)}p.subVectors(d,h).multiplyScalar(r.rotateSpeed);const W=r.domElement;E(2*Math.PI*p.x/W.clientHeight),M(2*Math.PI*p.y/W.clientHeight),h.copy(d)}function $(S){if(C.length===1)m.set(S.pageX,S.pageY);else{const W=Q(S),te=.5*(S.pageX+W.x),oe=.5*(S.pageY+W.y);m.set(te,oe)}g.subVectors(m,f).multiplyScalar(r.panSpeed),U(g.x,g.y),f.copy(m)}function ce(S){const W=Q(S),te=S.pageX-W.x,oe=S.pageY-W.y,ae=Math.sqrt(te*te+oe*oe);w.set(0,ae),B.set(0,Math.pow(w.y/v.y,r.zoomSpeed)),y(B.y),v.copy(w)}function me(S){r.enableZoom&&ce(S),r.enablePan&&$(S)}function _e(S){r.enableZoom&&ce(S),r.enableRotate&&Ae(S)}function P(S){r.enabled!==!1&&(C.length===0&&(r.domElement.setPointerCapture(S.pointerId),r.domElement.addEventListener("pointermove",fe),r.domElement.addEventListener("pointerup",de)),le(S),S.pointerType==="touch"?J(S):K(S))}function fe(S){r.enabled!==!1&&(S.pointerType==="touch"?Y(S):se(S))}function de(S){we(S),C.length===0&&(r.domElement.releasePointerCapture(S.pointerId),r.domElement.removeEventListener("pointermove",fe),r.domElement.removeEventListener("pointerup",de)),r.dispatchEvent(wN),s=i.NONE}function ee(S){we(S)}function K(S){let W;switch(S.button){case 0:W=r.mouseButtons.LEFT;break;case 1:W=r.mouseButtons.MIDDLE;break;case 2:W=r.mouseButtons.RIGHT;break;default:W=-1}switch(W){case $u.DOLLY:if(r.enableZoom===!1)return;D(S),s=i.DOLLY;break;case $u.ROTATE:if(S.ctrlKey||S.metaKey||S.shiftKey){if(r.enablePan===!1)return;k(S),s=i.PAN}else{if(r.enableRotate===!1)return;R(S),s=i.ROTATE}break;case $u.PAN:if(S.ctrlKey||S.metaKey||S.shiftKey){if(r.enableRotate===!1)return;R(S),s=i.ROTATE}else{if(r.enablePan===!1)return;k(S),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(U1)}function se(S){switch(s){case i.ROTATE:if(r.enableRotate===!1)return;V(S);break;case i.DOLLY:if(r.enableZoom===!1)return;Z(S);break;case i.PAN:if(r.enablePan===!1)return;N(S);break}}function ye(S){r.enabled===!1||r.enableZoom===!1||s!==i.NONE||(S.preventDefault(),r.dispatchEvent(U1),_(S),r.dispatchEvent(wN))}function ne(S){r.enabled===!1||r.enablePan===!1||z(S)}function J(S){switch(G(S),C.length){case 1:switch(r.touches.ONE){case qu.ROTATE:if(r.enableRotate===!1)return;ie(),s=i.TOUCH_ROTATE;break;case qu.PAN:if(r.enablePan===!1)return;T(),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(r.touches.TWO){case qu.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ge(),s=i.TOUCH_DOLLY_PAN;break;case qu.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;he(),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(U1)}function Y(S){switch(G(S),s){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ae(S),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;$(S),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;me(S),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;_e(S),r.update();break;default:s=i.NONE}}function ue(S){r.enabled!==!1&&S.preventDefault()}function le(S){C.push(S)}function we(S){delete b[S.pointerId];for(let W=0;W<C.length;W++)if(C[W].pointerId==S.pointerId){C.splice(W,1);return}}function G(S){let W=b[S.pointerId];W===void 0&&(W=new ze,b[S.pointerId]=W),W.set(S.pageX,S.pageY)}function Q(S){const W=S.pointerId===C[0].pointerId?C[1]:C[0];return b[W.pointerId]}r.domElement.addEventListener("contextmenu",ue),r.domElement.addEventListener("pointerdown",P),r.domElement.addEventListener("pointercancel",ee),r.domElement.addEventListener("wheel",ye,{passive:!1}),this.update()}}class SU extends Wf{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Nie(t)}),this.register(function(t){return new Wie(t)}),this.register(function(t){return new Zie(t)}),this.register(function(t){return new Die(t)}),this.register(function(t){return new Lie(t)}),this.register(function(t){return new Vie(t)}),this.register(function(t){return new Pie(t)}),this.register(function(t){return new Tie(t)}),this.register(function(t){return new Oie(t)}),this.register(function(t){return new kie(t)}),this.register(function(t){return new Rie(t)}),this.register(function(t){return new Gie(t)}),this.register(function(t){return new Jie(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=xa.extractUrlBase(e),this.manager.itemStart(e);const a=function(A){i?i(A):console.error(A),s.manager.itemError(e),s.manager.itemEnd(e)},l=new xU(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(A){try{s.parse(A,o,function(c){t(c),s.manager.itemEnd(e)},a)}catch(c){a(c)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(xa.decodeText(new Uint8Array(e,0,4))===UG){try{o[xt.KHR_BINARY_GLTF]=new Hie(e)}catch(c){i&&i(c);return}s=JSON.parse(o[xt.KHR_BINARY_GLTF].content)}else s=JSON.parse(xa.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new sse(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let A=0;A<this.pluginCallbacks.length;A++){const c=this.pluginCallbacks[A](l);a[c.name]=c,o[c.name]=!0}if(s.extensionsUsed)for(let A=0;A<s.extensionsUsed.length;++A){const c=s.extensionsUsed[A],u=s.extensionsRequired||[];switch(c){case xt.KHR_MATERIALS_UNLIT:o[c]=new Mie;break;case xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[c]=new Xie;break;case xt.KHR_DRACO_MESH_COMPRESSION:o[c]=new zie(s,this.dracoLoader);break;case xt.KHR_TEXTURE_TRANSFORM:o[c]=new Yie;break;case xt.KHR_MESH_QUANTIZATION:o[c]=new jie;break;default:u.indexOf(c)>=0&&a[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function Qie(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const xt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Rie{constructor(e){this.parser=e,this.name=xt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let A;const c=new Ve(16777215);l.color!==void 0&&c.fromArray(l.color);const u=l.range!==void 0?l.range:0;switch(l.type){case"directional":A=new FU(c),A.target.position.set(0,0,-1),A.add(A.target);break;case"point":A=new I_(c),A.distance=u;break;case"spot":A=new FG(c),A.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,A.angle=l.spot.outerConeAngle,A.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,A.target.position.set(0,0,-1),A.add(A.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return A.position.set(0,0,0),A.decay=2,l.intensity!==void 0&&(A.intensity=l.intensity),A.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(A),t.cache.add(r,i),i}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}let Mie=class{constructor(){this.name=xt.KHR_MATERIALS_UNLIT}getMaterialType(){return Ri}extendParams(e,t,r){const i=[];e.color=new Ve(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,gt))}return Promise.all(i)}};class Tie{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}let Nie=class{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lu}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ze(a,a)}return Promise.all(s)}},kie=class{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lu}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}};class Die{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lu}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ve(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,gt)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}let Lie=class{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lu}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}},Vie=class{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lu}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ve(a[0],a[1],a[2]),Promise.all(s)}};class Pie{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lu}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Oie{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Lu}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ve(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,gt)),Promise.all(s)}}class Wie{constructor(e){this.parser=e,this.name=xt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Zie{constructor(e){this.parser=e,this.name=xt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const A=r.options.manager.getHandler(a.uri);A!==null&&(l=A)}return this.detectSupport().then(function(A){if(A)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Gie{constructor(e){this.name=xt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,A=i.byteLength||0,c=i.count,u=i.byteStride,h=new Uint8Array(a,l,A);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,u,h,i.mode,i.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(c*u);return o.decodeGltfBuffer(new Uint8Array(d),c,u,h,i.mode,i.filter),d})})}else return null}}class Jie{constructor(e){this.name=xt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const A of i.primitives)if(A.mode!==Ns.TRIANGLES&&A.mode!==Ns.TRIANGLE_STRIP&&A.mode!==Ns.TRIANGLE_FAN&&A.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const A in o)a.push(this.parser.getDependency("accessor",o[A]).then(c=>(l[A]=c,l[A])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(A=>{const c=A.pop(),u=c.isGroup?c.children:[c],h=A[0].count,d=[];for(const p of u){const f=new Je,m=new j,g=new rt,v=new j(1,1,1),w=new eb(p.geometry,p.material,h);for(let B=0;B<h;B++)l.TRANSLATION&&m.fromBufferAttribute(l.TRANSLATION,B),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,B),l.SCALE&&v.fromBufferAttribute(l.SCALE,B),w.setMatrixAt(B,f.compose(m,g,v));for(const B in l)B!=="TRANSLATION"&&B!=="ROTATION"&&B!=="SCALE"&&p.geometry.setAttribute(B,l[B]);Lt.prototype.copy.call(w,p),w.frustumCulled=!1,this.parser.assignFinalMaterial(w),d.push(w)}return c.isGroup?(c.clear(),c.add(...d),c):d[0]}))}}const UG="glTF",Mp=12,BN={JSON:1313821514,BIN:5130562};class Hie{constructor(e){this.name=xt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Mp);if(this.header={magic:xa.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==UG)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Mp,i=new DataView(e,Mp);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===BN.JSON){const l=new Uint8Array(e,Mp+s,o);this.content=xa.decodeText(l)}else if(a===BN.BIN){const l=Mp+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class zie{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=xt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},A={};for(const c in o){const u=E_[c]||c.toLowerCase();a[u]=o[c]}for(const c in e.attributes){const u=E_[c]||c.toLowerCase();if(o[c]!==void 0){const h=r.accessors[e.attributes[c]],d=Rm[h.componentType];A[u]=d.name,l[u]=h.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(u){i.decodeDracoFile(c,function(h){for(const d in h.attributes){const p=h.attributes[d],f=l[d];f!==void 0&&(p.normalized=f)}u(h)},a,A)})})}}class Yie{constructor(){this.name=xt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class __ extends Cu{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),r=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new Ve().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const A in a)l.uniforms[A]=a[A];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Xie{constructor(){this.name=xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return __}extendParams(e,t,r){const i=t.extensions[this.name];e.color=new Ve(1,1,1),e.opacity=1;const s=[];if(Array.isArray(i.diffuseFactor)){const o=i.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(i.diffuseTexture!==void 0&&s.push(r.assignTexture(e,"map",i.diffuseTexture,gt)),e.emissive=new Ve(0,0,0),e.glossiness=i.glossinessFactor!==void 0?i.glossinessFactor:1,e.specular=new Ve(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),i.specularGlossinessTexture!==void 0){const o=i.specularGlossinessTexture;s.push(r.assignTexture(e,"glossinessMap",o)),s.push(r.assignTexture(e,"specularMap",o,gt))}return Promise.all(s)}createMaterial(e){const t=new __(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=Tu,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t}}class jie{constructor(){this.name=xt.KHR_MESH_QUANTIZATION}}class QG extends p0{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,A=a*3,c=i-t,u=(r-t)/c,h=u*u,d=h*u,p=e*A,f=p-A,m=-2*d+3*h,g=d-h,v=1-m,w=g-h+u;for(let B=0;B!==a;B++){const C=o[f+B+a],b=o[f+B+l]*c,F=o[p+B+a],x=o[p+B]*c;s[B]=v*C+w*b+m*F+g*x}return s}}const Kie=new rt;class $ie extends QG{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return Kie.fromArray(s).normalize().toArray(s),s}}const Ns={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Rm={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},CN={9728:nr,9729:ci,9984:vB,9985:fU,9986:yB,9987:Mu},bN={33071:fi,33648:Em,10497:ps},xN={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},E_={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},lA={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},qie={CUBICSPLINE:void 0,LINEAR:Bu,STEP:Cf},Q1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function ese(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Cu({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Lo})),n.DefaultMaterial}function Tp(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Pc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function tse(n,e,t){let r=!1,i=!1,s=!1;for(let A=0,c=e.length;A<c;A++){const u=e[A];if(u.POSITION!==void 0&&(r=!0),u.NORMAL!==void 0&&(i=!0),u.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let A=0,c=e.length;A<c;A++){const u=e[A];if(r){const h=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):n.attributes.position;o.push(h)}if(i){const h=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):n.attributes.normal;a.push(h)}if(s){const h=u.COLOR_0!==void 0?t.getDependency("accessor",u.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(A){const c=A[0],u=A[1],h=A[2];return r&&(n.morphAttributes.position=c),i&&(n.morphAttributes.normal=u),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function nse(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function rse(n){const e=n.extensions&&n.extensions[xt.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+IN(e.attributes):t=n.indices+":"+IN(n.attributes)+":"+n.mode,t}function IN(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function S_(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function ise(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class sse{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Qie,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new Vu(this.options.manager):this.textureLoader=new pie(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new xU(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};Tp(s,a,i),Pc(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[A,c]of o.children.entries())s(c,a.children[A])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[xt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(xa.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0)return Promise.resolve(null);const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=xN[i.type],A=Rm[i.componentType],c=A.BYTES_PER_ELEMENT,u=c*l,h=i.byteOffset||0,d=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,p=i.normalized===!0;let f,m;if(d&&d!==u){const g=Math.floor(h/d),v="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let w=t.cache.get(v);w||(f=new A(a,g*d,i.count*d/c),w=new Xre(f,d/c),t.cache.add(v,w)),m=new CU(w,l,h%d/c,p)}else a===null?f=new A(i.count*l):f=new A(a,h,i.count*l),m=new ut(f,l,p);if(i.sparse!==void 0){const g=xN.SCALAR,v=Rm[i.sparse.indices.componentType],w=i.sparse.indices.byteOffset||0,B=i.sparse.values.byteOffset||0,C=new v(o[1],w,i.sparse.count*g),b=new A(o[2],B,i.sparse.count*l);a!==null&&(m=new ut(m.array.slice(),m.itemSize,m.normalized));for(let F=0,x=C.length;F<x;F++){const E=C[F];if(m.setX(E,b[F*l]),l>=2&&m.setY(E,b[F*l+1]),l>=3&&m.setZ(E,b[F*l+2]),l>=4&&m.setW(E,b[F*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const A=this.loadImageSource(t,r).then(function(c){c.flipY=!1,c.name=o.name||a.name||"";const h=(s.samplers||{})[o.sampler]||{};return c.magFilter=CN[h.magFilter]||ci,c.minFilter=CN[h.minFilter]||Mu,c.wrapS=bN[h.wrapS]||ps,c.wrapT=bN[h.wrapT]||ps,i.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=A,A}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",A=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(u){A=!0;const h=new Blob([u],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(u){return new Promise(function(h,d){let p=h;t.isImageBitmapLoader===!0&&(p=function(f){const m=new or(f);m.needsUpdate=!0,h(m)}),t.load(xa.resolveURL(u,s.path),p,void 0,d)})}).then(function(u){return A===!0&&a.revokeObjectURL(l),u.userData.mimeType=o.mimeType||ise(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[e]=c,c}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(r.texCoord!==void 0&&r.texCoord!=0&&!(t==="aoMap"&&r.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),s.extensions[xt.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[xt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[xt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(o.encoding=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new yG,us.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Hl,us.prototype.copy.call(l,r),l.color.copy(r.color),this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}r.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return Cu}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},A=[];if(l[xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const u=i[xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=u.getMaterialType(),A.push(u.extendParams(a,s,t))}else if(l[xt.KHR_MATERIALS_UNLIT]){const u=i[xt.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),A.push(u.extendParams(a,s,t))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new Ve(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const h=u.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}u.baseColorTexture!==void 0&&A.push(t.assignTexture(a,"map",u.baseColorTexture,gt)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(A.push(t.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),A.push(t.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),A.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=mi);const c=s.alphaMode||Q1.OPAQUE;if(c===Q1.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===Q1.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Ri&&(A.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ze(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}return s.occlusionTexture!==void 0&&o!==Ri&&(A.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Ri&&(a.emissive=new Ve().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==Ri&&A.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,gt)),Promise.all(A).then(function(){let u;return o===__?u=i[xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):u=new o(a),s.name&&(u.name=s.name),Pc(u,s),t.associations.set(u,{materials:e}),s.extensions&&Tp(i,u,s),u})}createUniqueName(e){const t=Ct.sanitizeNodeName(e||"");let r=t;for(let i=1;this.nodeNamesUsed[r];++i)r=t+"_"+i;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[xt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return FN(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const A=e[a],c=rse(A),u=i[c];if(u)o.push(u.promise);else{let h;A.extensions&&A.extensions[xt.KHR_DRACO_MESH_COMPRESSION]?h=s(A):h=FN(new zt,A,t),i[c]={primitive:A,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,A=o.length;l<A;l++){const c=o[l].material===void 0?ese(this.cache):this.getDependency("material",o[l].material);a.push(c)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const A=l.slice(0,l.length-1),c=l[l.length-1],u=[];for(let d=0,p=c.length;d<p;d++){const f=c[d],m=o[d];let g;const v=A[d];if(m.mode===Ns.TRIANGLES||m.mode===Ns.TRIANGLE_STRIP||m.mode===Ns.TRIANGLE_FAN||m.mode===void 0)g=s.isSkinnedMesh===!0?new _l(f,v):new In(f,v),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),m.mode===Ns.TRIANGLE_STRIP?g.geometry=_N(g.geometry,M$):m.mode===Ns.TRIANGLE_FAN&&(g.geometry=_N(g.geometry,rG));else if(m.mode===Ns.LINES)g=new f0(f,v);else if(m.mode===Ns.LINE_STRIP)g=new Vf(f,v);else if(m.mode===Ns.LINE_LOOP)g=new qre(f,v);else if(m.mode===Ns.POINTS)g=new eie(f,v);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(g.geometry.morphAttributes).length>0&&nse(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Pc(g,s),m.extensions&&Tp(i,g,m),t.assignFinalMaterial(g),u.push(g)}for(let d=0,p=u.length;d<p;d++)t.associations.set(u[d],{meshes:e,primitives:d});if(u.length===1)return u[0];const h=new kr;t.associations.set(h,{meshes:e});for(let d=0,p=u.length;d<p;d++)h.add(u[d]);return h})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new Nr(Zt.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Du(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Pc(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(i){return r.inverseBindMatrices=i,r})}loadAnimation(e){const r=this.json.animations[e],i=[],s=[],o=[],a=[],l=[];for(let A=0,c=r.channels.length;A<c;A++){const u=r.channels[A],h=r.samplers[u.sampler],d=u.target,p=d.node,f=r.parameters!==void 0?r.parameters[h.input]:h.input,m=r.parameters!==void 0?r.parameters[h.output]:h.output;i.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",f)),o.push(this.getDependency("accessor",m)),a.push(h),l.push(d)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(A){const c=A[0],u=A[1],h=A[2],d=A[3],p=A[4],f=[];for(let g=0,v=c.length;g<v;g++){const w=c[g],B=u[g],C=h[g],b=d[g],F=p[g];if(w===void 0)continue;w.updateMatrix();let x;switch(lA[F.path]){case lA.weights:x=xf;break;case lA.rotation:x=Ra;break;case lA.position:case lA.scale:default:x=oc;break}const E=w.name?w.name:w.uuid,M=b.interpolation!==void 0?qie[b.interpolation]:Bu,H=[];lA[F.path]===lA.weights?w.traverse(function(U){U.morphTargetInfluences&&H.push(U.name?U.name:U.uuid)}):H.push(E);let O=C.array;if(C.normalized){const U=S_(O.constructor),y=new Float32Array(O.length);for(let I=0,R=O.length;I<R;I++)y[I]=O[I]*U;O=y}for(let U=0,y=H.length;U<y;U++){const I=new x(H[U]+"."+lA[F.path],B.array,O,M);b.interpolation==="CUBICSPLINE"&&(I.createInterpolant=function(D){const k=this instanceof Ra?$ie:QG;return new k(this.times,this.values,this.getValueSize()/3,D)},I.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),f.push(I)}}const m=r.name?r.name:"animation_"+e;return new bu(m,void 0,f)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,A=i.weights.length;l<A;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this.extensions,i=this,s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"";return function(){const a=[],l=i._invokeOne(function(A){return A.createNodeMesh&&A.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(A){return i._getNodeRef(i.cameraCache,s.camera,A)})),i._invokeAll(function(A){return A.createNodeAttachment&&A.createNodeAttachment(e)}).forEach(function(A){a.push(A)}),Promise.all(a)}().then(function(a){let l;if(s.isBone===!0?l=new bB:a.length>1?l=new kr:a.length===1?l=a[0]:l=new Lt,l!==a[0])for(let A=0,c=a.length;A<c;A++)l.add(a[A]);if(s.name&&(l.userData.name=s.name,l.name=o),Pc(l,s),s.extensions&&Tp(r,l,s),s.matrix!==void 0){const A=new Je;A.fromArray(s.matrix),l.applyMatrix4(A)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return i.associations.has(l)||i.associations.set(l,{}),i.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,r=this.extensions,i=this.json.scenes[e],s=this,o=new kr;i.name&&(o.name=s.createUniqueName(i.name)),Pc(o,i),i.extensions&&Tp(r,o,i);const a=i.nodes||[],l=[];for(let A=0,c=a.length;A<c;A++)l.push(RG(a[A],o,t,s));return Promise.all(l).then(function(){const A=c=>{const u=new Map;for(const[h,d]of s.associations)(h instanceof us||h instanceof or)&&u.set(h,d);return c.traverse(h=>{const d=s.associations.get(h);d!=null&&u.set(h,d)}),u};return s.associations=A(o),o})}}function RG(n,e,t,r){const i=t.nodes[n];return r.getDependency("node",n).then(function(s){if(i.skin===void 0)return s;let o;return r.getDependency("skin",i.skin).then(function(a){o=a;const l=[];for(let A=0,c=o.joints.length;A<c;A++)l.push(r.getDependency("node",o.joints[A]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const A=[],c=[];for(let u=0,h=a.length;u<h;u++){const d=a[u];if(d){A.push(d);const p=new Je;o.inverseBindMatrices!==void 0&&p.fromArray(o.inverseBindMatrices.array,u*16),c.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[u])}l.bind(new yc(A,c),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(i.children){const a=i.children;for(let l=0,A=a.length;l<A;l++){const c=a[l];o.push(RG(c,s,t,r))}}return Promise.all(o)})}function ose(n,e,t){const r=e.attributes,i=new Cs;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,A=a.max;if(l!==void 0&&A!==void 0){if(i.set(new j(l[0],l[1],l[2]),new j(A[0],A[1],A[2])),a.normalized){const c=S_(Rm[a.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new j,l=new j;for(let A=0,c=s.length;A<c;A++){const u=s[A];if(u.POSITION!==void 0){const h=t.json.accessors[u.POSITION],d=h.min,p=h.max;if(d!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(p[2]))),h.normalized){const f=S_(Rm[h.componentType]);l.multiplyScalar(f)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new Nu;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function FN(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=E_[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Pc(n,e),ose(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?tse(n,e.targets,t):n})}function _N(n,e){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(e===rG)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var EN={},U_=function(n){return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},MG=function(n){return new Worker(n)};try{URL.revokeObjectURL(U_(""))}catch{U_=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},MG=function(e){return new Worker(e,{type:"module"})}}var ase=function(n,e,t,r,i){var s=MG(EN[e]||(EN[e]=U_(n)));return s.onerror=function(o){return i(o.error,null)},s.onmessage=function(o){return i(null,o.data)},s.postMessage(t,r),s},Ut=Uint8Array,Fr=Uint16Array,Vl=Uint32Array,Zf=new Ut([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Gf=new Ut([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Mm=new Ut([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),TG=function(n,e){for(var t=new Fr(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Vl(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},NG=TG(Zf,2),UU=NG[0],IB=NG[1];UU[28]=258,IB[258]=28;var kG=TG(Gf,0),DG=kG[0],Q_=kG[1],Tm=new Fr(32768);for(var mn=0;mn<32768;++mn){var AA=(mn&43690)>>>1|(mn&21845)<<1;AA=(AA&52428)>>>2|(AA&13107)<<2,AA=(AA&61680)>>>4|(AA&3855)<<4,Tm[mn]=((AA&65280)>>>8|(AA&255)<<8)>>>1}var js=function(n,e,t){for(var r=n.length,i=0,s=new Fr(e);i<r;++i)++s[n[i]-1];var o=new Fr(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new Fr(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var A=i<<4|n[i],c=e-n[i],u=o[n[i]-1]++<<c,h=u|(1<<c)-1;u<=h;++u)a[Tm[u]>>>l]=A}else for(a=new Fr(r),i=0;i<r;++i)n[i]&&(a[i]=Tm[o[n[i]-1]++]>>>15-n[i]);return a},Pl=new Ut(288);for(var mn=0;mn<144;++mn)Pl[mn]=8;for(var mn=144;mn<256;++mn)Pl[mn]=9;for(var mn=256;mn<280;++mn)Pl[mn]=7;for(var mn=280;mn<288;++mn)Pl[mn]=8;var Ff=new Ut(32);for(var mn=0;mn<32;++mn)Ff[mn]=5;var LG=js(Pl,9,0),VG=js(Pl,9,1),PG=js(Ff,5,0),OG=js(Ff,5,1),lw=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Qs=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Aw=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},g0=function(n){return(n/8|0)+(n&7&&1)},Ks=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof Fr?Fr:n instanceof Vl?Vl:Ut)(t-e);return r.set(n.subarray(e,t)),r},m0=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Ut(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Ut(r*3));var o=function(q){var ge=e.length;if(q>ge){var he=new Ut(Math.max(ge*2,q));he.set(e),e=he}},a=t.f||0,l=t.p||0,A=t.b||0,c=t.l,u=t.d,h=t.m,d=t.n,p=r*8;do{if(!c){t.f=a=Qs(n,l,1);var f=Qs(n,l+1,3);if(l+=3,f)if(f==1)c=VG,u=OG,h=9,d=5;else if(f==2){var w=Qs(n,l,31)+257,B=Qs(n,l+10,15)+4,C=w+Qs(n,l+5,31)+1;l+=14;for(var b=new Ut(C),F=new Ut(19),x=0;x<B;++x)F[Mm[x]]=Qs(n,l+x*3,7);l+=B*3;for(var E=lw(F),M=(1<<E)-1,H=js(F,E,1),x=0;x<C;){var O=H[Qs(n,l,M)];l+=O&15;var m=O>>>4;if(m<16)b[x++]=m;else{var U=0,y=0;for(m==16?(y=3+Qs(n,l,3),l+=2,U=b[x-1]):m==17?(y=3+Qs(n,l,7),l+=3):m==18&&(y=11+Qs(n,l,127),l+=7);y--;)b[x++]=U}}var I=b.subarray(0,w),R=b.subarray(w);h=lw(I),d=lw(R),c=js(I,h,1),u=js(R,d,1)}else throw"invalid block type";else{var m=g0(l)+4,g=n[m-4]|n[m-3]<<8,v=m+g;if(v>r){if(s)throw"unexpected EOF";break}i&&o(A+g),e.set(n.subarray(m,v),A),t.b=A+=g,t.p=l=v*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}i&&o(A+131072);for(var D=(1<<h)-1,k=(1<<d)-1,V=l;;V=l){var U=c[Aw(n,l)&D],Z=U>>>4;if(l+=U&15,l>p){if(s)throw"unexpected EOF";break}if(!U)throw"invalid length/literal";if(Z<256)e[A++]=Z;else if(Z==256){V=l,c=null;break}else{var N=Z-254;if(Z>264){var x=Z-257,_=Zf[x];N=Qs(n,l,(1<<_)-1)+UU[x],l+=_}var z=u[Aw(n,l)&k],ie=z>>>4;if(!z)throw"invalid distance";l+=z&15;var R=DG[ie];if(ie>3){var _=Gf[ie];R+=Aw(n,l)&(1<<_)-1,l+=_}if(l>p){if(s)throw"unexpected EOF";break}i&&o(A+131072);for(var T=A+N;A<T;A+=4)e[A]=e[A-R],e[A+1]=e[A+1-R],e[A+2]=e[A+2-R],e[A+3]=e[A+3-R];A=T}}t.l=c,t.p=V,t.b=A,c&&(a=1,t.m=h,t.d=u,t.n=d)}while(!a);return A==e.length?e:Ks(e,0,A)},ea=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>>8},kd=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>>8,n[r+2]|=t>>>16},cw=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return[bl,0];if(i==1){var o=new Ut(t[0].s+1);return o[t[0].s]=1,[o,1]}t.sort(function(C,b){return C.f-b.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],A=0,c=1,u=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=t[t[A].f<t[u].f?A++:u++],l=t[A!=c&&t[A].f<t[u].f?A++:u++],t[c++]={s:-1,f:a.f+l.f,l:a,r:l};for(var h=s[0].s,r=1;r<i;++r)s[r].s>h&&(h=s[r].s);var d=new Fr(h+1),p=FB(t[c-1],d,0);if(p>e){var r=0,f=0,m=p-e,g=1<<m;for(s.sort(function(b,F){return d[F.s]-d[b.s]||b.f-F.f});r<i;++r){var v=s[r].s;if(d[v]>e)f+=g-(1<<p-d[v]),d[v]=e;else break}for(f>>>=m;f>0;){var w=s[r].s;d[w]<e?f-=1<<e-d[w]++-1:++r}for(;r>=0&&f;--r){var B=s[r].s;d[B]==e&&(--d[B],++f)}p=e}return[new Ut(d),p]},FB=function(n,e,t){return n.s==-1?Math.max(FB(n.l,e,t+1),FB(n.r,e,t+1)):e[n.s]=t},R_=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Fr(++e),r=0,i=n[0],s=1,o=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return[t.subarray(0,r),e]},Dd=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},zg=function(n,e,t){var r=t.length,i=g0(e+2);n[i]=r&255,n[i+1]=r>>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},M_=function(n,e,t,r,i,s,o,a,l,A,c){ea(e,c++,t),++i[256];for(var u=cw(i,15),h=u[0],d=u[1],p=cw(s,15),f=p[0],m=p[1],g=R_(h),v=g[0],w=g[1],B=R_(f),C=B[0],b=B[1],F=new Fr(19),x=0;x<v.length;++x)F[v[x]&31]++;for(var x=0;x<C.length;++x)F[C[x]&31]++;for(var E=cw(F,7),M=E[0],H=E[1],O=19;O>4&&!M[Mm[O-1]];--O);var U=A+5<<3,y=Dd(i,Pl)+Dd(s,Ff)+o,I=Dd(i,h)+Dd(s,f)+o+14+3*O+Dd(F,M)+(2*F[16]+3*F[17]+7*F[18]);if(U<=y&&U<=I)return zg(e,c,n.subarray(l,l+A));var R,D,k,V;if(ea(e,c,1+(I<y)),c+=2,I<y){R=js(h,d,0),D=h,k=js(f,m,0),V=f;var Z=js(M,H,0);ea(e,c,w-257),ea(e,c+5,b-1),ea(e,c+10,O-4),c+=14;for(var x=0;x<O;++x)ea(e,c+3*x,M[Mm[x]]);c+=3*O;for(var N=[v,C],_=0;_<2;++_)for(var z=N[_],x=0;x<z.length;++x){var ie=z[x]&31;ea(e,c,Z[ie]),c+=M[ie],ie>15&&(ea(e,c,z[x]>>>5&127),c+=z[x]>>>12)}}else R=LG,D=Pl,k=PG,V=Ff;for(var x=0;x<a;++x)if(r[x]>255){var ie=r[x]>>>18&31;kd(e,c,R[ie+257]),c+=D[ie+257],ie>7&&(ea(e,c,r[x]>>>23&31),c+=Zf[ie]);var T=r[x]&31;kd(e,c,k[T]),c+=V[T],T>3&&(kd(e,c,r[x]>>>5&8191),c+=Gf[T])}else kd(e,c,R[r[x]]),c+=D[r[x]];return kd(e,c,R[256]),c+D[256]},WG=new Vl([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),bl=new Ut(0),ZG=function(n,e,t,r,i,s){var o=n.length,a=new Ut(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),A=0;if(!e||o<8)for(var c=0;c<=o;c+=65535){var u=c+65535;u<o?A=zg(l,A,n.subarray(c,u)):(l[c]=s,A=zg(l,A,n.subarray(c,o)))}else{for(var h=WG[e-1],d=h>>>13,p=h&8191,f=(1<<t)-1,m=new Fr(32768),g=new Fr(f+1),v=Math.ceil(t/3),w=2*v,B=function(P){return(n[P]^n[P+1]<<v^n[P+2]<<w)&f},C=new Vl(25e3),b=new Fr(288),F=new Fr(32),x=0,E=0,c=0,M=0,H=0,O=0;c<o;++c){var U=B(c),y=c&32767,I=g[U];if(m[y]=I,g[U]=y,H<=c){var R=o-c;if((x>7e3||M>24576)&&R>423){A=M_(n,l,0,C,b,F,E,M,O,c-O,A),M=x=E=0,O=c;for(var D=0;D<286;++D)b[D]=0;for(var D=0;D<30;++D)F[D]=0}var k=2,V=0,Z=p,N=y-I&32767;if(R>2&&U==B(c-N))for(var _=Math.min(d,R)-1,z=Math.min(32767,c),ie=Math.min(258,R);N<=z&&--Z&&y!=I;){if(n[c+k]==n[c+k-N]){for(var T=0;T<ie&&n[c+T]==n[c+T-N];++T);if(T>k){if(k=T,V=N,T>_)break;for(var q=Math.min(N,T-2),ge=0,D=0;D<q;++D){var he=c-N+D+32768&32767,Ae=m[he],$=he-Ae+32768&32767;$>ge&&(ge=$,I=he)}}}y=I,I=m[y],N+=y-I+32768&32767}if(V){C[M++]=268435456|IB[k]<<18|Q_[V];var ce=IB[k]&31,me=Q_[V]&31;E+=Zf[ce]+Gf[me],++b[257+ce],++F[me],H=c+k,++x}else C[M++]=n[c],++b[n[c]]}}A=M_(n,l,s,C,b,F,E,M,O,c-O,A),!s&&A&7&&(A=zg(l,A+1,bl))}return Ks(a,0,r+g0(A)+i)},GG=function(){for(var n=new Vl(256),e=0;e<256;++e){for(var t=e,r=9;--r;)t=(t&1&&3988292384)^t>>>1;n[e]=t}return n}(),Jf=function(){var n=-1;return{p:function(e){for(var t=n,r=0;r<e.length;++r)t=GG[t&255^e[r]]^t>>>8;n=t},d:function(){return~n}}},QU=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|n>>>8<<16|(e&255)<<8|e>>>8}}},Pu=function(n,e,t,r,i){return ZG(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,r,!i)},v0=function(n,e){var t={};for(var r in n)t[r]=n[r];for(var r in e)t[r]=e[r];return t},SN=function(n,e,t){for(var r=n(),i=n.toString(),s=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/ /g,"").split(","),o=0;o<r.length;++o){var a=r[o],l=s[o];if(typeof a=="function"){e+=";"+l+"=";var A=a.toString();if(a.prototype)if(A.indexOf("[native code]")!=-1){var c=A.indexOf(" ",8)+1;e+=A.slice(c,A.indexOf("(",c))}else{e+=A;for(var u in a.prototype)e+=";"+l+".prototype."+u+"="+a.prototype[u].toString()}else e+=A}else t[l]=a}return[e,t]},Tv=[],lse=function(n){var e=[];for(var t in n)(n[t]instanceof Ut||n[t]instanceof Fr||n[t]instanceof Vl)&&e.push((n[t]=new n[t].constructor(n[t])).buffer);return e},JG=function(n,e,t,r){var i;if(!Tv[t]){for(var s="",o={},a=n.length-1,l=0;l<a;++l)i=SN(n[l],s,o),s=i[0],o=i[1];Tv[t]=SN(n[a],s,o)}var A=v0({},Tv[t][1]);return ase(Tv[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,A,lse(A),r)},Hf=function(){return[Ut,Fr,Vl,Zf,Gf,Mm,UU,DG,VG,OG,Tm,js,lw,Qs,Aw,g0,Ks,m0,jf,wc,RU]},zf=function(){return[Ut,Fr,Vl,Zf,Gf,Mm,IB,Q_,LG,Pl,PG,Ff,Tm,WG,bl,js,ea,kd,cw,FB,R_,Dd,zg,M_,g0,Ks,ZG,Pu,y0,wc]},HG=function(){return[MU,NU,$t,Jf,GG]},zG=function(){return[TU,jG]},YG=function(){return[kU,$t,QU]},XG=function(){return[KG]},wc=function(n){return postMessage(n,[n.buffer])},RU=function(n){return n&&n.size&&new Ut(n.size)},Yf=function(n,e,t,r,i,s){var o=JG(t,r,i,function(a,l){o.terminate(),s(a,l)});return o.postMessage([n,e],e.consume?[n.buffer]:[]),function(){o.terminate()}},io=function(n){return n.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return n.push(e.data[0],e.data[1])}},Xf=function(n,e,t,r,i){var s,o=JG(n,r,i,function(a,l){a?(o.terminate(),e.ondata.call(e,a)):(l[1]&&o.terminate(),e.ondata.call(e,a,l[0],l[1]))});o.postMessage(t),e.push=function(a,l){if(s)throw"stream finished";if(!e.ondata)throw"no stream handler";o.postMessage([a,s=l],[a.buffer])},e.terminate=function(){o.terminate()}},pi=function(n,e){return n[e]|n[e+1]<<8},Xn=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},R1=function(n,e){return Xn(n,e)+Xn(n,e+4)*4294967296},$t=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},MU=function(n,e){var t=e.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=e.level<2?4:e.level==9?2:0,n[9]=3,e.mtime!=0&&$t(n,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){n[3]=8;for(var r=0;r<=t.length;++r)n[r+10]=t.charCodeAt(r)}},TU=function(n){if(n[0]!=31||n[1]!=139||n[2]!=8)throw"invalid gzip data";var e=n[3],t=10;e&4&&(t+=n[10]|(n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},jG=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},NU=function(n){return 10+(n.filename&&n.filename.length+1||0)},kU=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=r<<6|(r?32-2*r:1)},KG=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function DU(n,e){return!e&&typeof n=="function"&&(e=n,n={}),this.ondata=e,n}var Ma=function(){function n(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return n.prototype.p=function(e,t){this.ondata(Pu(e,this.o,0,0,!t),t)},n.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},n}(),$G=function(){function n(e,t){Xf([zf,function(){return[io,Ma]}],this,DU.call(this,e,t),function(r){var i=new Ma(r.data);onmessage=io(i)},6)}return n}();function qG(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Yf(n,e,[zf],function(r){return wc(y0(r.data[0],r.data[1]))},0,t)}function y0(n,e){return Pu(n,e||{},0,0)}var Vi=function(){function n(e){this.s={},this.p=new Ut(0),this.ondata=e}return n.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,r=new Ut(t+e.length);r.set(this.p),r.set(e,t),this.p=r},n.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,r=m0(this.p,this.o,this.s);this.ondata(Ks(r,t,this.s.b),this.d),this.o=Ks(r,this.s.b-32768),this.s.b=this.o.length,this.p=Ks(this.p,this.s.p/8|0),this.s.p&=7},n.prototype.push=function(e,t){this.e(e),this.c(t)},n}(),LU=function(){function n(e){this.ondata=e,Xf([Hf,function(){return[io,Vi]}],this,0,function(){var t=new Vi;onmessage=io(t)},7)}return n}();function VU(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Yf(n,e,[Hf],function(r){return wc(jf(r.data[0],RU(r.data[1])))},1,t)}function jf(n,e){return m0(n,e)}var _B=function(){function n(e,t){this.c=Jf(),this.l=0,this.v=1,Ma.call(this,e,t)}return n.prototype.push=function(e,t){Ma.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var r=Pu(e,this.o,this.v&&NU(this.o),t&&8,!t);this.v&&(MU(r,this.o),this.v=0),t&&($t(r,r.length-8,this.c.d()),$t(r,r.length-4,this.l)),this.ondata(r,t)},n}(),UN=function(){function n(e,t){Xf([zf,HG,function(){return[io,Ma,_B]}],this,DU.call(this,e,t),function(r){var i=new _B(r.data);onmessage=io(i)},8)}return n}();function QN(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Yf(n,e,[zf,HG,function(){return[EB]}],function(r){return wc(EB(r.data[0],r.data[1]))},2,t)}function EB(n,e){e||(e={});var t=Jf(),r=n.length;t.p(n);var i=Pu(n,e,NU(e),8),s=i.length;return MU(i,e),$t(i,s-8,t.d()),$t(i,s-4,r),i}var SB=function(){function n(e){this.v=1,Vi.call(this,e)}return n.prototype.push=function(e,t){if(Vi.prototype.e.call(this,e),this.v){var r=this.p.length>3?TU(this.p):4;if(r>=this.p.length&&!t)return;this.p=this.p.subarray(r),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Vi.prototype.c.call(this,t)},n}(),e4=function(){function n(e){this.ondata=e,Xf([Hf,zG,function(){return[io,Vi,SB]}],this,0,function(){var t=new SB;onmessage=io(t)},9)}return n}();function t4(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Yf(n,e,[Hf,zG,function(){return[UB]}],function(r){return wc(UB(r.data[0]))},3,t)}function UB(n,e){return m0(n.subarray(TU(n),-8),e||new Ut(jG(n)))}var T_=function(){function n(e,t){this.c=QU(),this.v=1,Ma.call(this,e,t)}return n.prototype.push=function(e,t){Ma.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e);var r=Pu(e,this.o,this.v&&2,t&&4,!t);this.v&&(kU(r,this.o),this.v=0),t&&$t(r,r.length-4,this.c.d()),this.ondata(r,t)},n}(),Ase=function(){function n(e,t){Xf([zf,YG,function(){return[io,Ma,T_]}],this,DU.call(this,e,t),function(r){var i=new T_(r.data);onmessage=io(i)},10)}return n}();function cse(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Yf(n,e,[zf,YG,function(){return[N_]}],function(r){return wc(N_(r.data[0],r.data[1]))},4,t)}function N_(n,e){e||(e={});var t=QU();t.p(n);var r=Pu(n,e,2,4);return kU(r,e),$t(r,r.length-4,t.d()),r}var QB=function(){function n(e){this.v=1,Vi.call(this,e)}return n.prototype.push=function(e,t){if(Vi.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Vi.prototype.c.call(this,t)},n}(),n4=function(){function n(e){this.ondata=e,Xf([Hf,XG,function(){return[io,Vi,QB]}],this,0,function(){var t=new QB;onmessage=io(t)},11)}return n}();function r4(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Yf(n,e,[Hf,XG,function(){return[Nm]}],function(r){return wc(Nm(r.data[0],RU(r.data[1])))},5,t)}function Nm(n,e){return m0((KG(n),n.subarray(2,-4)),e)}var i4=function(){function n(e){this.G=SB,this.I=Vi,this.Z=QB,this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var r=new Ut(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var i=this,s=function(){i.ondata.apply(i,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(s):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(s):new this.Z(s),this.s.push(this.p,t),this.p=null}}},n}(),use=function(){function n(e){this.G=e4,this.I=LU,this.Z=n4,this.ondata=e}return n.prototype.push=function(e,t){i4.prototype.push.call(this,e,t)},n}();function dse(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return n[0]==31&&n[1]==139&&n[2]==8?t4(n,e,t):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?VU(n,e,t):r4(n,e,t)}function hse(n,e){return n[0]==31&&n[1]==139&&n[2]==8?UB(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?jf(n,e):Nm(n,e)}var PU=function(n,e,t,r){for(var i in n){var s=n[i],o=e+i;s instanceof Ut?t[o]=[s,r]:Array.isArray(s)?t[o]=[s[0],v0(r,s[1])]:PU(s,o+"/",t,r)}},RN=typeof TextEncoder<"u"&&new TextEncoder,k_=typeof TextDecoder<"u"&&new TextDecoder,s4=0;try{k_.decode(bl,{stream:!0}),s4=1}catch{}var o4=function(n){for(var e="",t=0;;){var r=n[t++],i=(r>127)+(r>223)+(r>239);if(t+i>n.length)return[e,Ks(n,t-1)];i?i==3?(r=((r&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):i&1?e+=String.fromCharCode((r&31)<<6|n[t++]&63):e+=String.fromCharCode((r&15)<<12|(n[t++]&63)<<6|n[t++]&63):e+=String.fromCharCode(r)}},fse=function(){function n(e){this.ondata=e,s4?this.t=new TextDecoder:this.p=bl}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var r=new Ut(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var i=o4(r),s=i[0],o=i[1];if(t){if(o.length)throw"invalid utf-8 data";this.p=null}else this.p=o;this.ondata(s,t)},n}(),pse=function(){function n(e){this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(ac(e),this.d=t||!1)},n}();function ac(n,e){if(e){for(var t=new Ut(n.length),r=0;r<n.length;++r)t[r]=n.charCodeAt(r);return t}if(RN)return RN.encode(n);for(var i=n.length,s=new Ut(n.length+(n.length>>1)),o=0,a=function(c){s[o++]=c},r=0;r<i;++r){if(o+5>s.length){var l=new Ut(o+8+(i-r<<1));l.set(s),s=l}var A=n.charCodeAt(r);A<128||e?a(A):A<2048?(a(192|A>>6),a(128|A&63)):A>55295&&A<57344?(A=65536+(A&1047552)|n.charCodeAt(++r)&1023,a(240|A>>18),a(128|A>>12&63),a(128|A>>6&63),a(128|A&63)):(a(224|A>>12),a(128|A>>6&63),a(128|A&63))}return Ks(s,0,o)}function OU(n,e){if(e){for(var t="",r=0;r<n.length;r+=16384)t+=String.fromCharCode.apply(null,n.subarray(r,r+16384));return t}else{if(k_)return k_.decode(n);var i=o4(n),s=i[0],o=i[1];if(o.length)throw"invalid utf-8 data";return s}}var a4=function(n){return n==1?3:n<6?2:n==9?1:0},l4=function(n,e){return e+30+pi(n,e+26)+pi(n,e+28)},A4=function(n,e,t){var r=pi(n,e+28),i=OU(n.subarray(e+46,e+46+r),!(pi(n,e+8)&2048)),s=e+46+r,o=Xn(n,e+20),a=t&&o==4294967295?c4(n,s):[o,Xn(n,e+24),Xn(n,e+42)],l=a[0],A=a[1],c=a[2];return[pi(n,e+10),l,A,i,s+pi(n,e+30)+pi(n,e+32),c]},c4=function(n,e){for(;pi(n,e)!=1;e+=4+pi(n,e+2));return[R1(n,e+12),R1(n,e+4),R1(n,e+20)]},XA=function(n){var e=0;if(n)for(var t in n){var r=n[t].length;if(r>65535)throw"extra field too long";e+=r+4}return e},_f=function(n,e,t,r,i,s,o,a){var l=r.length,A=t.extra,c=a&&a.length,u=XA(A);$t(n,e,o!=null?33639248:67324752),e+=4,o!=null&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(s==null&&8),n[e++]=i&&8,n[e++]=t.compression&255,n[e++]=t.compression>>8;var h=new Date(t.mtime==null?Date.now():t.mtime),d=h.getFullYear()-1980;if(d<0||d>119)throw"date not in range 1980-2099";if($t(n,e,d<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>>1),e+=4,s!=null&&($t(n,e,t.crc),$t(n,e+4,s),$t(n,e+8,t.size)),$t(n,e+12,l),$t(n,e+14,u),e+=16,o!=null&&($t(n,e,c),$t(n,e+6,t.attrs),$t(n,e+10,o),e+=14),n.set(r,e),e+=l,u)for(var p in A){var f=A[p],m=f.length;$t(n,e,+p),$t(n,e+2,m),n.set(f,e+4),e+=4+m}return c&&(n.set(a,e),e+=c),e},WU=function(n,e,t,r,i){$t(n,e,101010256),$t(n,e+8,t),$t(n,e+10,t),$t(n,e+12,r),$t(n,e+16,i)},km=function(){function n(e){this.filename=e,this.c=Jf(),this.size=0,this.compression=0}return n.prototype.process=function(e,t){this.ondata(null,e,t)},n.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},n}(),gse=function(){function n(e,t){var r=this;t||(t={}),km.call(this,e),this.d=new Ma(t,function(i,s){r.ondata(null,i,s)}),this.compression=8,this.flag=a4(t.level)}return n.prototype.process=function(e,t){try{this.d.push(e,t)}catch(r){this.ondata(r,null,t)}},n.prototype.push=function(e,t){km.prototype.push.call(this,e,t)},n}(),mse=function(){function n(e,t){var r=this;t||(t={}),km.call(this,e),this.d=new $G(t,function(i,s,o){r.ondata(i,s,o)}),this.compression=8,this.flag=a4(t.level),this.terminate=this.d.terminate}return n.prototype.process=function(e,t){this.d.push(e,t)},n.prototype.push=function(e,t){km.prototype.push.call(this,e,t)},n}(),vse=function(){function n(e){this.ondata=e,this.u=[],this.d=1}return n.prototype.add=function(e){var t=this;if(this.d&2)throw"stream finished";var r=ac(e.filename),i=r.length,s=e.comment,o=s&&ac(s),a=i!=e.filename.length||o&&s.length!=o.length,l=i+XA(e.extra)+30;if(i>65535)throw"filename too long";var A=new Ut(l);_f(A,0,e,r,a);var c=[A],u=function(){for(var m=0,g=c;m<g.length;m++){var v=g[m];t.ondata(null,v,!1)}c=[]},h=this.d;this.d=0;var d=this.u.length,p=v0(e,{f:r,u:a,o,t:function(){e.terminate&&e.terminate()},r:function(){if(u(),h){var m=t.u[d+1];m?m.r():t.d=1}h=1}}),f=0;e.ondata=function(m,g,v){if(m)t.ondata(m,g,v),t.terminate();else if(f+=g.length,c.push(g),v){var w=new Ut(16);$t(w,0,134695760),$t(w,4,e.crc),$t(w,8,f),$t(w,12,e.size),c.push(w),p.c=f,p.b=l+f+16,p.crc=e.crc,p.size=e.size,h&&p.r(),h=1}else h&&u()},this.u.push(p)},n.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},n.prototype.e=function(){for(var e=0,t=0,r=0,i=0,s=this.u;i<s.length;i++){var o=s[i];r+=46+o.f.length+XA(o.extra)+(o.o?o.o.length:0)}for(var a=new Ut(r+22),l=0,A=this.u;l<A.length;l++){var o=A[l];_f(a,e,o,o.f,o.u,o.c,t,o.o),e+=46+o.f.length+XA(o.extra)+(o.o?o.o.length:0),t+=o.b}WU(a,e,this.u.length,r,t),this.ondata(null,a,!0),this.d=2},n.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var r=t[e];r.t()}this.d=2},n}();function yse(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";var r={};PU(n,"",r,e);var i=Object.keys(r),s=i.length,o=0,a=0,l=s,A=new Array(s),c=[],u=function(){for(var f=0;f<c.length;++f)c[f]()},h=function(){var f=new Ut(a+22),m=o,g=a-o;a=0;for(var v=0;v<l;++v){var w=A[v];try{var B=w.c.length;_f(f,a,w,w.f,w.u,B);var C=30+w.f.length+XA(w.extra),b=a+C;f.set(w.c,b),_f(f,o,w,w.f,w.u,B,a,w.m),o+=16+C+(w.m?w.m.length:0),a=b+B}catch(F){return t(F,null)}}WU(f,o,A.length,g,m),t(null,f)};s||h();for(var d=function(f){var m=i[f],g=r[m],v=g[0],w=g[1],B=Jf(),C=v.length;B.p(v);var b=ac(m),F=b.length,x=w.comment,E=x&&ac(x),M=E&&E.length,H=XA(w.extra),O=w.level==0?0:8,U=function(y,I){if(y)u(),t(y,null);else{var R=I.length;A[f]=v0(w,{size:C,crc:B.d(),c:I,f:b,m:E,u:F!=m.length||E&&x.length!=M,compression:O}),o+=30+F+H+R,a+=76+2*(F+H)+(M||0)+R,--s||h()}};if(F>65535&&U("filename too long",null),!O)U(null,v);else if(C<16e4)try{U(null,y0(v,w))}catch(y){U(y,null)}else c.push(qG(v,w,U))},p=0;p<l;++p)d(p);return u}function wse(n,e){e||(e={});var t={},r=[];PU(n,"",t,e);var i=0,s=0;for(var o in t){var a=t[o],l=a[0],A=a[1],c=A.level==0?0:8,u=ac(o),h=u.length,d=A.comment,p=d&&ac(d),f=p&&p.length,m=XA(A.extra);if(h>65535)throw"filename too long";var g=c?y0(l,A):l,v=g.length,w=Jf();w.p(l),r.push(v0(A,{size:l.length,crc:w.d(),c:g,f:u,m:p,u:h!=o.length||p&&d.length!=f,o:i,compression:c})),i+=30+h+m+v,s+=76+2*(h+m)+(f||0)+v}for(var B=new Ut(s+22),C=i,b=s-i,F=0;F<r.length;++F){var u=r[F];_f(B,u.o,u,u.f,u.u,u.c.length);var x=30+u.f.length+XA(u.extra);B.set(u.c,u.o+x),_f(B,i,u,u.f,u.u,u.c.length,u.o,u.m),i+=16+x+(u.m?u.m.length:0)}return WU(B,i,r.length,b,C),B}var u4=function(){function n(){}return n.prototype.push=function(e,t){this.ondata(null,e,t)},n.compression=0,n}(),Bse=function(){function n(){var e=this;this.i=new Vi(function(t,r){e.ondata(null,t,r)})}return n.prototype.push=function(e,t){try{this.i.push(e,t)}catch(r){this.ondata(r,e,t)}},n.compression=8,n}(),Cse=function(){function n(e,t){var r=this;t<32e4?this.i=new Vi(function(i,s){r.ondata(null,i,s)}):(this.i=new LU(function(i,s,o){r.ondata(i,s,o)}),this.terminate=this.i.terminate)}return n.prototype.push=function(e,t){this.i.terminate&&(e=Ks(e,0)),this.i.push(e,t)},n.compression=8,n}(),bse=function(){function n(e){this.onfile=e,this.k=[],this.o={0:u4},this.p=bl}return n.prototype.push=function(e,t){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var i=Math.min(this.c,e.length),s=e.subarray(0,i);if(this.c-=i,this.d?this.d.push(s,!this.c):this.k[0].push(s),e=e.subarray(i),e.length)return this.push(e,t)}else{var o=0,a=0,l=void 0,A=void 0;this.p.length?e.length?(A=new Ut(this.p.length+e.length),A.set(this.p),A.set(e,this.p.length)):A=this.p:A=e;for(var c=A.length,u=this.c,h=u&&this.d,d=function(){var g,v=Xn(A,a);if(v==67324752){o=1,l=a,p.d=null,p.c=0;var w=pi(A,a+6),B=pi(A,a+8),C=w&2048,b=w&8,F=pi(A,a+26),x=pi(A,a+28);if(c>a+30+F+x){var E=[];p.k.unshift(E),o=2;var M=Xn(A,a+18),H=Xn(A,a+22),O=OU(A.subarray(a+30,a+=30+F),!C);M==4294967295?(g=b?[-2]:c4(A,a),M=g[0],H=g[1]):b&&(M=-1),a+=x,p.c=M;var U,y={name:O,compression:B,start:function(){if(!y.ondata)throw"no callback";if(!M)y.ondata(null,bl,!0);else{var I=r.o[B];if(!I)throw"unknown compression type "+B;U=M<0?new I(O):new I(O,M,H),U.ondata=function(V,Z,N){y.ondata(V,Z,N)};for(var R=0,D=E;R<D.length;R++){var k=D[R];U.push(k,!1)}r.k[0]==E&&r.c?r.d=U:U.push(bl,!0)}},terminate:function(){U&&U.terminate&&U.terminate()}};M>=0&&(y.size=M,y.originalSize=H),p.onfile(y)}return"break"}else if(u){if(v==134695760)return l=a+=12+(u==-2&&8),o=3,p.c=0,"break";if(v==33639248)return l=a-=4,o=3,p.c=0,"break"}},p=this;a<c-4;++a){var f=d();if(f==="break")break}if(this.p=bl,u<0){var m=o?A.subarray(0,l-12-(u==-2&&8)-(Xn(A,l-16)==134695760&&4)):A.subarray(0,a);h?h.push(m,!!o):this.k[+(o==2)].push(m)}if(o&2)return this.push(A.subarray(a),t);this.p=A.subarray(a)}if(t){if(this.c)throw"invalid zip file";this.p=null}},n.prototype.register=function(e){this.o[e.compression]=e},n}();function xse(n,e){if(typeof e!="function")throw"no callback";for(var t=[],r=function(){for(var h=0;h<t.length;++h)t[h]()},i={},s=n.length-22;Xn(n,s)!=101010256;--s)if(!s||n.length-s>65558){e("invalid zip file",null);return}var o=pi(n,s+8);o||e(null,{});var a=o,l=Xn(n,s+16),A=l==4294967295;if(A){if(s=Xn(n,s-12),Xn(n,s)!=101075792){e("invalid zip file",null);return}a=o=Xn(n,s+32),l=Xn(n,s+48)}for(var c=function(h){var d=A4(n,l,A),p=d[0],f=d[1],m=d[2],g=d[3],v=d[4],w=d[5],B=l4(n,w);l=v;var C=function(F,x){F?(r(),e(F,null)):(i[g]=x,--o||e(null,i))};if(!p)C(null,Ks(n,B,B+f));else if(p==8){var b=n.subarray(B,B+f);if(f<32e4)try{C(null,jf(b,new Ut(m)))}catch(F){C(F,null)}else t.push(VU(b,{size:m},C))}else C("unknown compression type "+p,null)},u=0;u<a;++u)c();return r}function Ise(n){for(var e={},t=n.length-22;Xn(n,t)!=101010256;--t)if(!t||n.length-t>65558)throw"invalid zip file";var r=pi(n,t+8);if(!r)return{};var i=Xn(n,t+16),s=i==4294967295;if(s){if(t=Xn(n,t-12),Xn(n,t)!=101075792)throw"invalid zip file";r=Xn(n,t+32),i=Xn(n,t+48)}for(var o=0;o<r;++o){var a=A4(n,i,s),l=a[0],A=a[1],c=a[2],u=a[3],h=a[4],d=a[5],p=l4(n,d);if(i=h,!l)e[u]=Ks(n,p,p+A);else if(l==8)e[u]=jf(n.subarray(p,p+A),new Ut(c));else throw"unknown compression type "+l}return e}const Fse=Object.freeze(Object.defineProperty({__proto__:null,AsyncCompress:UN,AsyncDecompress:use,AsyncDeflate:$G,AsyncGunzip:e4,AsyncGzip:UN,AsyncInflate:LU,AsyncUnzipInflate:Cse,AsyncUnzlib:n4,AsyncZipDeflate:mse,AsyncZlib:Ase,Compress:_B,DecodeUTF8:fse,Decompress:i4,Deflate:Ma,EncodeUTF8:pse,Gunzip:SB,Gzip:_B,Inflate:Vi,Unzip:bse,UnzipInflate:Bse,UnzipPassThrough:u4,Unzlib:QB,Zip:vse,ZipDeflate:gse,ZipPassThrough:km,Zlib:T_,compress:QN,compressSync:EB,decompress:dse,decompressSync:hse,deflate:qG,deflateSync:y0,gunzip:t4,gunzipSync:UB,gzip:QN,gzipSync:EB,inflate:VU,inflateSync:jf,strFromU8:OU,strToU8:ac,unzip:xse,unzipSync:Ise,unzlib:r4,unzlibSync:Nm,zip:yse,zipSync:wse,zlib:cse,zlibSync:N_},Symbol.toStringTag,{value:"Module"}));function d4(n,e,t){const r=t.length-n-1;if(e>=t[r])return r-1;if(e<=t[n])return n;let i=n,s=r,o=Math.floor((i+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:i=o,o=Math.floor((i+s)/2);return o}function _se(n,e,t,r){const i=[],s=[],o=[];i[0]=1;for(let a=1;a<=t;++a){s[a]=e-r[n+1-a],o[a]=r[n+a]-e;let l=0;for(let A=0;A<a;++A){const c=o[A+1],u=s[a-A],h=i[A]/(c+u);i[A]=l+c*h,l=u*h}i[a]=l}return i}function Ese(n,e,t,r){const i=d4(n,r,e),s=_se(i,r,n,e),o=new Nt(0,0,0,0);for(let a=0;a<=n;++a){const l=t[i-n+a],A=s[a],c=l.w*A;o.x+=l.x*c,o.y+=l.y*c,o.z+=l.z*c,o.w+=l.w*A}return o}function Sse(n,e,t,r,i){const s=[];for(let u=0;u<=t;++u)s[u]=0;const o=[];for(let u=0;u<=r;++u)o[u]=s.slice(0);const a=[];for(let u=0;u<=t;++u)a[u]=s.slice(0);a[0][0]=1;const l=s.slice(0),A=s.slice(0);for(let u=1;u<=t;++u){l[u]=e-i[n+1-u],A[u]=i[n+u]-e;let h=0;for(let d=0;d<u;++d){const p=A[d+1],f=l[u-d];a[u][d]=p+f;const m=a[d][u-1]/a[u][d];a[d][u]=h+p*m,h=f*m}a[u][u]=h}for(let u=0;u<=t;++u)o[0][u]=a[u][t];for(let u=0;u<=t;++u){let h=0,d=1;const p=[];for(let f=0;f<=t;++f)p[f]=s.slice(0);p[0][0]=1;for(let f=1;f<=r;++f){let m=0;const g=u-f,v=t-f;u>=f&&(p[d][0]=p[h][0]/a[v+1][g],m=p[d][0]*a[g][v]);const w=g>=-1?1:-g,B=u-1<=v?f-1:t-u;for(let b=w;b<=B;++b)p[d][b]=(p[h][b]-p[h][b-1])/a[v+1][g+b],m+=p[d][b]*a[g+b][v];u<=v&&(p[d][f]=-p[h][f-1]/a[v+1][u],m+=p[d][f]*a[u][v]),o[f][u]=m;const C=h;h=d,d=C}}let c=t;for(let u=1;u<=r;++u){for(let h=0;h<=t;++h)o[u][h]*=c;c*=t-u}return o}function Use(n,e,t,r,i){const s=i<n?i:n,o=[],a=d4(n,r,e),l=Sse(a,r,n,s,e),A=[];for(let c=0;c<t.length;++c){const u=t[c].clone(),h=u.w;u.x*=h,u.y*=h,u.z*=h,A[c]=u}for(let c=0;c<=s;++c){const u=A[a-n].clone().multiplyScalar(l[c][0]);for(let h=1;h<=n;++h)u.add(A[a-n+h].clone().multiplyScalar(l[c][h]));o[c]=u}for(let c=s+1;c<=i+1;++c)o[c]=new Nt(0,0,0);return o}function Qse(n,e){let t=1;for(let i=2;i<=n;++i)t*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=n-e;++i)r*=i;return t/r}function Rse(n){const e=n.length,t=[],r=[];for(let s=0;s<e;++s){const o=n[s];t[s]=new j(o.x,o.y,o.z),r[s]=o.w}const i=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(i[s-a].clone().multiplyScalar(Qse(s,a)*r[a]));i[s]=o.divideScalar(r[0])}return i}function Mse(n,e,t,r,i){const s=Use(n,e,t,r,i);return Rse(s)}class MN extends tie{constructor(e,t,r,i,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<r.length;++o){const a=r[o];this.controlPoints[o]=new Nt(a.x,a.y,a.z,a.w)}}getPoint(e,t=new j){const r=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=Ese(this.degree,this.knots,this.controlPoints,i);return s.w!==1&&s.divideScalar(s.w),r.set(s.x,s.y,s.z)}getTangent(e,t=new j){const r=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=Mse(this.degree,this.knots,this.controlPoints,i,1);return r.copy(s[1]).normalize(),r}}let _t,Jn,Ii;class Tse extends Wf{constructor(e){super(e)}load(e,t,r,i){const s=this,o=s.path===""?xa.extractUrlBase(e):s.path,a=new xU(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(A){i?i(A):console.error(A),s.manager.itemError(e)}},r,i)}parse(e,t){if(Pse(e))_t=new Vse().parse(e);else{const i=g4(e);if(!Ose(i))throw new Error("THREE.FBXLoader: Unknown format.");if(NN(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+NN(i));_t=new Lse().parse(i)}const r=new Vu(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Nse(r,this.manager).parse(_t)}}class Nse{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Jn=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),i=this.parseDeformers(),s=new kse().parse(i);return this.parseScene(i,s,r),Ii}parseConnections(){const e=new Map;return"Connections"in _t&&_t.Connections.connections.forEach(function(r){const i=r[0],s=r[1],o=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(i).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:i,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in _t.Objects){const r=_t.Objects.Video;for(const i in r){const s=r[i],o=parseInt(i);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const A=this.parseImage(r[i]);t[s.RelativeFilename||s.Filename]=A}}}}for(const r in e){const i=e[r];t[i]!==void 0?e[r]=t[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let s;switch(i){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in _t.Objects){const r=_t.Objects.Texture;for(const i in r){const s=this.parseTexture(r[i],e);t.set(parseInt(i),s)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,o=i!==void 0?i.value:0,a=s!==void 0?s.value:0;if(r.wrapS=o===0?ps:fi,r.wrapT=a===0?ps:fi,"Scaling"in e){const l=e.Scaling.value;r.repeat.x=l[0],r.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;r.offset.x=l[0],r.offset.y=l[1]}return r}loadTexture(e,t){let r;const i=this.textureLoader.path,s=Jn.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(r=t[s[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new or):(l.setPath(this.textureLoader.path),o=l.load(r))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new or):o=this.textureLoader.load(r);return this.textureLoader.setPath(i),o}parseMaterials(e){const t=new Map;if("Material"in _t.Objects){const r=_t.Objects.Material;for(const i in r){const s=this.parseMaterial(r[i],e);s!==null&&t.set(parseInt(i),s)}}return t}parseMaterial(e,t){const r=e.id,i=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Jn.has(r))return null;const o=this.parseParameters(e,t,r);let a;switch(s.toLowerCase()){case"phong":a=new _1;break;case"lambert":a=new rie;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new _1;break}return a.setValues(o),a.name=i,a}parseParameters(e,t,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new Ve().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new Ve().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new Ve().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new Ve().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new Ve().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new Ve().fromArray(e.SpecularColor.value));const s=this;return Jn.get(r).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":i.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,o.ID),i.map!==void 0&&(i.map.encoding=gt);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,o.ID),i.emissiveMap!==void 0&&(i.emissiveMap.encoding=gt);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,o.ID),i.envMap!==void 0&&(i.envMap.mapping=mB,i.envMap.encoding=gt);break;case"SpecularColor":i.specularMap=s.getTexture(t,o.ID),i.specularMap!==void 0&&(i.specularMap.encoding=gt);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,o.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),i}getTexture(e,t){return"LayeredTexture"in _t.Objects&&t in _t.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Jn.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in _t.Objects){const r=_t.Objects.Deformer;for(const i in r){const s=r[i],o=Jn.get(parseInt(i));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,r);a.ID=i,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[i]=a}else if(s.attrType==="BlendShape"){const a={id:i};a.rawTargets=this.parseMorphTargets(o,r),a.id=i,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach(function(i){const s=t[i.ID];if(s.attrType!=="Cluster")return;const o={ID:i.ID,indices:[],weights:[],transformLink:new Je().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),r.push(o)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let i=0;i<e.children.length;i++){const s=e.children[i],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=Jn.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,r.push(a)}return r}parseScene(e,t,r){Ii=new kr;const i=this.parseModels(e.skeletons,t,r),s=_t.Objects.Model,o=this;i.forEach(function(l){const A=s[l.ID];o.setLookAtProperties(l,A),Jn.get(l.ID).parents.forEach(function(u){const h=i.get(u.ID);h!==void 0&&h.add(l)}),l.parent===null&&Ii.add(l)}),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),Ii.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const A=f4(l.userData.transformData);l.applyMatrix4(A),l.updateWorldMatrix()}});const a=new Dse().parse();Ii.children.length===1&&Ii.children[0].isGroup&&(Ii.children[0].animations=a,Ii=Ii.children[0]),Ii.animations=a}parseModels(e,t,r){const i=new Map,s=_t.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],A=Jn.get(a);let c=this.buildSkeleton(A,e,a,l.attrName);if(!c){switch(l.attrType){case"Camera":c=this.createCamera(A);break;case"Light":c=this.createLight(A);break;case"Mesh":c=this.createMesh(A,t,r);break;case"NurbsCurve":c=this.createCurve(A,t);break;case"LimbNode":case"Root":c=new bB;break;case"Null":default:c=new kr;break}c.name=l.attrName?Ct.sanitizeNodeName(l.attrName):"",c.ID=a}this.getTransformData(c,l),i.set(a,c)}return i}buildSkeleton(e,t,r,i){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(A,c){if(A.ID===o.ID){const u=s;s=new bB,s.matrixWorld.copy(A.transformLink),s.name=i?Ct.sanitizeNodeName(i):"",s.ID=r,l.bones[c]=s,u!==null&&s.add(u)}})}}),s}createCamera(e){let t,r;if(e.children.forEach(function(i){const s=_t.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new Lt;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let s=1;r.NearPlane!==void 0&&(s=r.NearPlane.value/1e3);let o=1e3;r.FarPlane!==void 0&&(o=r.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(a=r.AspectWidth.value,l=r.AspectHeight.value);const A=a/l;let c=45;r.FieldOfView!==void 0&&(c=r.FieldOfView.value);const u=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:t=new Nr(c,A,s,o),u!==null&&t.setFocalLength(u);break;case 1:t=new Du(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new Lt;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(i){const s=_t.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new Lt;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let s=16777215;r.Color!==void 0&&(s=new Ve().fromArray(r.Color.value));let o=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(o=0);let a=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?a=0:a=r.FarAttenuationEnd.value);const l=1;switch(i){case 0:t=new I_(s,o,a,l);break;case 1:t=new FU(s,o);break;case 2:let A=Math.PI/3;r.InnerAngle!==void 0&&(A=Zt.degToRad(r.InnerAngle.value));let c=0;r.OuterAngle!==void 0&&(c=Zt.degToRad(r.OuterAngle.value),c=Math.max(c,1)),t=new FG(s,o,a,A,c,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new I_(s,o);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let i,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),r.has(l.ID)&&a.push(r.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new _1({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(i=new _l(s,o),i.normalizeSkinWeights()):i=new In(s,o),i}createCurve(e,t){const r=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),i=new Hl({color:3342591,linewidth:1});return new Vf(r,i)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=p4(t.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&Jn.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const s=_t.Objects.Model[i.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),Ii.add(e.target)):e.lookAt(new j().fromArray(o))}}})}bindSkeleton(e,t,r){const i=this.parsePoseNodes();for(const s in e){const o=e[s];Jn.get(parseInt(o.ID)).parents.forEach(function(l){if(t.has(l.ID)){const A=l.ID;Jn.get(A).parents.forEach(function(u){r.has(u.ID)&&r.get(u.ID).bind(new yc(o.bones),i[u.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in _t.Objects){const t=_t.Objects.Pose;for(const r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){const i=t[r].PoseNode;Array.isArray(i)?i.forEach(function(s){e[s.Node]=new Je().fromArray(s.Matrix.a)}):e[i.Node]=new Je().fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in _t&&"AmbientColor"in _t.GlobalSettings){const e=_t.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],i=e[2];if(t!==0||r!==0||i!==0){const s=new Ve(t,r,i);Ii.add(new _G(s,1))}}}}class kse{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in _t.Objects){const r=_t.Objects.Geometry;for(const i in r){const s=Jn.get(parseInt(i)),o=this.parseGeometry(s,r[i],e);t.set(parseInt(i),o)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const i=r.skeletons,s=[],o=e.parents.map(function(u){return _t.Objects.Model[u.ID]});if(o.length===0)return;const a=e.children.reduce(function(u,h){return i[h.ID]!==void 0&&(u=i[h.ID]),u},null);e.children.forEach(function(u){r.morphTargets[u.ID]!==void 0&&s.push(r.morphTargets[u.ID])});const l=o[0],A={};"RotationOrder"in l&&(A.eulerOrder=p4(l.RotationOrder.value)),"InheritType"in l&&(A.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(A.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(A.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(A.scale=l.GeometricScaling.value);const c=f4(A);return this.genGeometry(t,a,s,c)}genGeometry(e,t,r,i){const s=new zt;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new rn(a.vertex,3);if(l.applyMatrix4(i),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new rn(a.colors,3)),t&&(s.setAttribute("skinIndex",new $C(a.weightsIndices,4)),s.setAttribute("skinWeight",new rn(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const A=new Ln().getNormalMatrix(i),c=new rn(a.normal,3);c.applyNormalMatrix(A),s.setAttribute("normal",c)}if(a.uvs.forEach(function(A,c){let u="uv"+(c+1).toString();c===0&&(u="uv"),s.setAttribute(u,new rn(a.uvs[c],2))}),o.material&&o.material.mappingType!=="AllSame"){let A=a.materialIndex[0],c=0;if(a.materialIndex.forEach(function(u,h){u!==A&&(s.addGroup(c,h-c,A),A=u,c=h)}),s.groups.length>0){const u=s.groups[s.groups.length-1],h=u.start+u.count;h!==a.materialIndex.length&&s.addGroup(h,a.materialIndex.length-h,A)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,r,i),s}parseGeoNode(e,t){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(i,s){i.indices.forEach(function(o,a){r.weightTable[o]===void 0&&(r.weightTable[o]=[]),r.weightTable[o].push({id:s,weight:i.weights[a]})})})),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,s=!1,o=[],a=[],l=[],A=[],c=[],u=[];const h=this;return e.vertexIndices.forEach(function(d,p){let f,m=!1;d<0&&(d=d^-1,m=!0);let g=[],v=[];if(o.push(d*3,d*3+1,d*3+2),e.color){const w=Nv(p,r,d,e.color);l.push(w[0],w[1],w[2])}if(e.skeleton){if(e.weightTable[d]!==void 0&&e.weightTable[d].forEach(function(w){v.push(w.weight),g.push(w.id)}),v.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const w=[0,0,0,0],B=[0,0,0,0];v.forEach(function(C,b){let F=C,x=g[b];B.forEach(function(E,M,H){if(F>E){H[M]=F,F=E;const O=w[M];w[M]=x,x=O}})}),g=w,v=B}for(;v.length<4;)v.push(0),g.push(0);for(let w=0;w<4;++w)c.push(v[w]),u.push(g[w])}if(e.normal){const w=Nv(p,r,d,e.normal);a.push(w[0],w[1],w[2])}e.material&&e.material.mappingType!=="AllSame"&&(f=Nv(p,r,d,e.material)[0],f<0&&(h.negativeMaterialIndices=!0,f=0)),e.uv&&e.uv.forEach(function(w,B){const C=Nv(p,r,d,w);A[B]===void 0&&(A[B]=[]),A[B].push(C[0]),A[B].push(C[1])}),i++,m&&(h.genFace(t,e,o,f,a,l,A,c,u,i),r++,i=0,o=[],a=[],l=[],A=[],c=[],u=[])}),t}genFace(e,t,r,i,s,o,a,l,A,c){for(let u=2;u<c;u++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[(u-1)*3]]),e.vertex.push(t.vertexPositions[r[(u-1)*3+1]]),e.vertex.push(t.vertexPositions[r[(u-1)*3+2]]),e.vertex.push(t.vertexPositions[r[u*3]]),e.vertex.push(t.vertexPositions[r[u*3+1]]),e.vertex.push(t.vertexPositions[r[u*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(u-1)*4]),e.vertexWeights.push(l[(u-1)*4+1]),e.vertexWeights.push(l[(u-1)*4+2]),e.vertexWeights.push(l[(u-1)*4+3]),e.vertexWeights.push(l[u*4]),e.vertexWeights.push(l[u*4+1]),e.vertexWeights.push(l[u*4+2]),e.vertexWeights.push(l[u*4+3]),e.weightsIndices.push(A[0]),e.weightsIndices.push(A[1]),e.weightsIndices.push(A[2]),e.weightsIndices.push(A[3]),e.weightsIndices.push(A[(u-1)*4]),e.weightsIndices.push(A[(u-1)*4+1]),e.weightsIndices.push(A[(u-1)*4+2]),e.weightsIndices.push(A[(u-1)*4+3]),e.weightsIndices.push(A[u*4]),e.weightsIndices.push(A[u*4+1]),e.weightsIndices.push(A[u*4+2]),e.weightsIndices.push(A[u*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(u-1)*3]),e.colors.push(o[(u-1)*3+1]),e.colors.push(o[(u-1)*3+2]),e.colors.push(o[u*3]),e.colors.push(o[u*3+1]),e.colors.push(o[u*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(u-1)*3]),e.normal.push(s[(u-1)*3+1]),e.normal.push(s[(u-1)*3+2]),e.normal.push(s[u*3]),e.normal.push(s[u*3+1]),e.normal.push(s[u*3+2])),t.uv&&t.uv.forEach(function(h,d){e.uvs[d]===void 0&&(e.uvs[d]=[]),e.uvs[d].push(a[d][0]),e.uvs[d].push(a[d][1]),e.uvs[d].push(a[d][(u-1)*2]),e.uvs[d].push(a[d][(u-1)*2+1]),e.uvs[d].push(a[d][u*2]),e.uvs[d].push(a[d][u*2+1])})}addMorphTargets(e,t,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;r.forEach(function(o){o.rawTargets.forEach(function(a){const l=_t.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,i,a.name)})})}genMorphGeometry(e,t,r,i,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=r.Vertices!==void 0?r.Vertices.a:[],l=r.Indexes!==void 0?r.Indexes.a:[],A=e.attributes.position.count*3,c=new Float32Array(A);for(let p=0;p<l.length;p++){const f=l[p]*3;c[f]=a[p*3],c[f+1]=a[p*3+1],c[f+2]=a[p*3+2]}const u={vertexIndices:o,vertexPositions:c},h=this.genBuffers(u),d=new rn(h.vertex,3);d.name=s||r.attrName,d.applyMatrix4(i),e.morphAttributes.position.push(d)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let s=[];return r==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:s,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let s=[];return r==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:i,indices:s,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let s=[];return r==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,s=[];for(let o=0;o<i.length;++o)s.push(o);return{dataSize:1,buffer:i,indices:s,mappingType:t,referenceType:r}}parseNurbsGeometry(e){if(MN===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new zt;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new zt;const r=t-1,i=e.KnotVector.a,s=[],o=e.Points.a;for(let u=0,h=o.length;u<h;u+=4)s.push(new Nt().fromArray(o,u));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=r,l=i.length-1-a;for(let u=0;u<r;++u)s.push(s[u])}const c=new MN(r,i,s,a,l).getPoints(s.length*12);return new zt().setFromPoints(c)}}class Dse{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const r in t){const i=t[r],s=this.addClip(i);e.push(s)}return e}parseClips(){if(_t.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=_t.Objects.AnimationCurveNode,t=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:i.id,attr:i.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=_t.Objects.AnimationCurve;for(const r in t){const i={id:t[r].id,times:t[r].KeyTime.a.map(Wse),values:t[r].KeyValueFloat.a},s=Jn.get(i.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=i:a.match(/Y/)?e.get(o).curves.y=i:a.match(/Z/)?e.get(o).curves.z=i:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=i)}}}parseAnimationLayers(e){const t=_t.Objects.AnimationLayer,r=new Map;for(const i in t){const s=[],o=Jn.get(parseInt(i));o!==void 0&&(o.children.forEach(function(l,A){if(e.has(l.ID)){const c=e.get(l.ID);if(c.curves.x!==void 0||c.curves.y!==void 0||c.curves.z!==void 0){if(s[A]===void 0){const u=Jn.get(l.ID).parents.filter(function(h){return h.relationship!==void 0})[0].ID;if(u!==void 0){const h=_t.Objects.Model[u.toString()];if(h===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const d={modelName:h.attrName?Ct.sanitizeNodeName(h.attrName):"",ID:h.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Ii.traverse(function(p){p.ID===h.id&&(d.transform=p.matrix,p.userData.transformData&&(d.eulerOrder=p.userData.transformData.eulerOrder))}),d.transform||(d.transform=new Je),"PreRotation"in h&&(d.preRotation=h.PreRotation.value),"PostRotation"in h&&(d.postRotation=h.PostRotation.value),s[A]=d}}s[A]&&(s[A][c.attr]=c)}else if(c.curves.morph!==void 0){if(s[A]===void 0){const u=Jn.get(l.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,h=Jn.get(u).parents[0].ID,d=Jn.get(h).parents[0].ID,p=Jn.get(d).parents[0].ID,f=_t.Objects.Model[p],m={modelName:f.attrName?Ct.sanitizeNodeName(f.attrName):"",morphName:_t.Objects.Deformer[u].attrName};s[A]=m}s[A][c.attr]=c}}}),r.set(parseInt(i),s))}return r}parseAnimStacks(e){const t=_t.Objects.AnimationStack,r={};for(const i in t){const s=Jn.get(parseInt(i)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);r[i]={name:t[i].attrName,layer:o}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach(function(i){t=t.concat(r.generateTracks(i))}),new bu(e.name,-1,t)}generateTracks(e){const t=[];let r=new j,i=new rt,s=new j;if(e.transform&&e.transform.decompose(r,i,s),r=r.toArray(),i=new $r().setFromQuaternion(i,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,r,i){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,r);return new oc(e+"."+i,s,o)}generateRotationTrack(e,t,r,i,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Zt.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Zt.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Zt.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,r);i!==void 0&&(i=i.map(Zt.degToRad),i.push(o),i=new $r().fromArray(i),i=new rt().setFromEuler(i)),s!==void 0&&(s=s.map(Zt.degToRad),s.push(o),s=new $r().fromArray(s),s=new rt().setFromEuler(s).invert());const A=new rt,c=new $r,u=[];for(let h=0;h<l.length;h+=3)c.set(l[h],l[h+1],l[h+2],o),A.setFromEuler(c),i!==void 0&&A.premultiply(i),s!==void 0&&A.multiply(s),A.toArray(u,h/3*4);return new Ra(e+".quaternion",a,u)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map(function(s){return s/100}),i=Ii.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new xf(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,i){return r-i}),t.length>1){let r=1,i=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==i&&(t[r]=o,i=o,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){const i=r,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(A){if(t.x&&(o=t.x.times.indexOf(A)),t.y&&(a=t.y.times.indexOf(A)),t.z&&(l=t.z.times.indexOf(A)),o!==-1){const c=t.x.values[o];s.push(c),i[0]=c}else s.push(i[0]);if(a!==-1){const c=t.y.values[a];s.push(c),i[1]=c}else s.push(i[1]);if(l!==-1){const c=t.z.values[l];s.push(c),i[2]=c}else s.push(i[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const r=e.values[t-1],i=e.values[t]-r,s=Math.abs(i);if(s>=180){const o=s/180,a=i/o;let l=r+a;const A=e.times[t-1],u=(e.times[t]-A)/o;let h=A+u;const d=[],p=[];for(;h<e.times[t];)d.push(h),h+=u,p.push(l),l+=a;e.times=kN(e.times,t,d),e.values=kN(e.values,t,p)}}}}class Lse{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new h4,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,s){const o=i.match(/^[\s\t]*;/),a=i.match(/^[\s\t]*$/);if(o||a)return;const l=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),A=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=i.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(i,l):A?t.parseNodeProperty(i,A,r[++s]):c?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:r},o=this.parseNodeAttr(i),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,s):r in a?(r==="PoseNode"?a.PoseNode.push(s):a[r].id!==void 0&&(a[r]={},a[r][a[r].id]=a[r]),o.id!==""&&(a[r][o.id]=s)):typeof o.id=="number"?(a[r]={},a[r][o.id]=s):r!=="Properties70"&&(r==="PoseNode"?a[r]=[s]:a[r]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:r,type:i}}parseNodeProperty(e,t,r){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&s===","&&(s=r.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,i,s);return}if(i==="C"){const l=s.split(",").slice(1),A=parseInt(l[0]),c=parseInt(l[1]);let u=s.split(",").slice(3);u=u.map(function(h){return h.trim().replace(/^"/,"")}),i="connections",s=[A,c],Gse(s,u),o[i]===void 0&&(o[i]=[])}i==="Node"&&(o.id=s),i in o&&Array.isArray(o[i])?o[i].push(s):i!=="a"?o[i]=s:o.a=s,this.setCurrentProp(o,i),i==="a"&&s.slice(-1)!==","&&(o.a=T1(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=T1(t.a))}parseNodeSpecialProperty(e,t,r){const i=r.split('",').map(function(c){return c.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=i[0],o=i[1],a=i[2],l=i[3];let A=i[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":A=parseFloat(A);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":A=T1(A);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:A},this.setCurrentProp(this.getPrevNode(),s)}}class Vse{parse(e){const t=new TN(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new h4;for(;!this.endOfContent(t);){const s=this.parseNode(t,r);s!==null&&i.add(s.name,s)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},i=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(i===0)return null;const l=[];for(let h=0;h<s;h++)l.push(this.parseProperty(e));const A=l.length>0?l[0]:"",c=l.length>1?l[1]:"",u=l.length>2?l[2]:"";for(r.singleProperty=s===1&&e.getOffset()===i;i>e.getOffset();){const h=this.parseNode(e,t);h!==null&&this.parseSubNode(a,r,h)}return r.propertyList=l,typeof A=="number"&&(r.id=A),c!==""&&(r.attrName=c),u!==""&&(r.attrType=u),a!==""&&(r.name=a),r}parseSubNode(e,t,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(t[r.name]=r,r.a=i):t[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(s,o){o!==0&&i.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(s){t[s]=r[s]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],s=r.propertyList[1];const o=r.propertyList[2],a=r.propertyList[3];let l;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:l=r.propertyList[4],t[i]={type:s,type2:o,flag:a,value:l}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}typeof Fse>"u"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const a=Nm(new Uint8Array(e.getArrayBuffer(o))),l=new TN(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class TN{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let i=0;i<e;i++)t[i]=this.getUint8();const r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),xa.decodeText(new Uint8Array(t))}}class h4{add(e,t){this[e]=t}}function Pse(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===g4(n,0,e.length)}function Ose(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function r(i){const s=n[i-1];return n=n.slice(t+i),t++,s}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function NN(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Wse(n){return n/46186158e3}const Zse=[];function Nv(n,e,t,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=n;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const s=i*r.dataSize,o=s+r.dataSize;return Jse(Zse,r.buffer,s,o)}const M1=new $r,fd=new j;function f4(n){const e=new Je,t=new Je,r=new Je,i=new Je,s=new Je,o=new Je,a=new Je,l=new Je,A=new Je,c=new Je,u=new Je,h=new Je,d=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(fd.fromArray(n.translation)),n.preRotation){const M=n.preRotation.map(Zt.degToRad);M.push(n.eulerOrder||$r.DefaultOrder),t.makeRotationFromEuler(M1.fromArray(M))}if(n.rotation){const M=n.rotation.map(Zt.degToRad);M.push(n.eulerOrder||$r.DefaultOrder),r.makeRotationFromEuler(M1.fromArray(M))}if(n.postRotation){const M=n.postRotation.map(Zt.degToRad);M.push(n.eulerOrder||$r.DefaultOrder),i.makeRotationFromEuler(M1.fromArray(M)),i.invert()}n.scale&&s.scale(fd.fromArray(n.scale)),n.scalingOffset&&a.setPosition(fd.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition(fd.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(fd.fromArray(n.rotationOffset)),n.rotationPivot&&A.setPosition(fd.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(u.copy(n.parentMatrix),c.copy(n.parentMatrixWorld));const p=t.clone().multiply(r).multiply(i),f=new Je;f.extractRotation(c);const m=new Je;m.copyPosition(c);const g=m.clone().invert().multiply(c),v=f.clone().invert().multiply(g),w=s,B=new Je;if(d===0)B.copy(f).multiply(p).multiply(v).multiply(w);else if(d===1)B.copy(f).multiply(v).multiply(p).multiply(w);else{const H=new Je().scale(new j().setFromMatrixScale(u)).clone().invert(),O=v.clone().multiply(H);B.copy(f).multiply(p).multiply(O).multiply(w)}const C=A.clone().invert(),b=o.clone().invert();let F=e.clone().multiply(l).multiply(A).multiply(t).multiply(r).multiply(i).multiply(C).multiply(a).multiply(o).multiply(s).multiply(b);const x=new Je().copyPosition(F),E=c.clone().multiply(x);return h.copyPosition(E),F=h.clone().multiply(B),F.premultiply(c.invert()),F}function p4(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function T1(n){return n.split(",").map(function(t){return parseFloat(t)})}function g4(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),xa.decodeText(new Uint8Array(n,e,t))}function Gse(n,e){for(let t=0,r=n.length,i=e.length;t<i;t++,r++)n[r]=e[t]}function Jse(n,e,t,r){for(let i=t,s=0;i<r;i++,s++)n[s]=e[i];return n}function kN(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}class ZU{constructor(){this.pluginCallbacks=[],this.register(function(e){return new eoe(e)}),this.register(function(e){return new toe(e)}),this.register(function(e){return new noe(e)}),this.register(function(e){return new soe(e)}),this.register(function(e){return new ooe(e)}),this.register(function(e){return new roe(e)}),this.register(function(e){return new ioe(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){const s=new qse,o=[];for(let a=0,l=this.pluginCallbacks.length;a<l;a++)o.push(this.pluginCallbacks[a](s));s.setPlugins(o),s.write(e,t,i).catch(r)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,i,s,t)})}}const nn={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},as={};as[nr]=nn.NEAREST;as[vB]=nn.NEAREST_MIPMAP_NEAREST;as[yB]=nn.NEAREST_MIPMAP_LINEAR;as[ci]=nn.LINEAR;as[fU]=nn.LINEAR_MIPMAP_NEAREST;as[Mu]=nn.LINEAR_MIPMAP_LINEAR;as[fi]=nn.CLAMP_TO_EDGE;as[ps]=nn.REPEAT;as[Em]=nn.MIRRORED_REPEAT;const DN={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},LN=12,Hse=1179937895,zse=2,VN=8,Yse=1313821514,Xse=5130562;function gg(n,e){return n.length===e.length&&n.every(function(t,r){return t===e[r]})}function jse(n){return new TextEncoder().encode(n).buffer}function Kse(n){return gg(n.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function $se(n,e,t){const r={min:new Array(n.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(n.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+t;i++)for(let s=0;s<n.itemSize;s++){let o;n.itemSize>4?o=n.array[i*n.itemSize+s]:s===0?o=n.getX(i):s===1?o=n.getY(i):s===2?o=n.getZ(i):s===3&&(o=n.getW(i)),r.min[s]=Math.min(r.min[s],o),r.max[s]=Math.max(r.max[s],o)}return r}function m4(n){return Math.ceil(n/4)*4}function N1(n,e=0){const t=m4(n.byteLength);if(t!==n.byteLength){const r=new Uint8Array(t);if(r.set(new Uint8Array(n)),e!==0)for(let i=n.byteLength;i<t;i++)r[i]=e;return r.buffer}return n}function PN(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function ON(n,e){if(n.toBlob!==void 0)return new Promise(r=>n.toBlob(r,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),n.convertToBlob({type:e,quality:t})}class qse{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,r){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const i=this,s=i.buffers,o=i.json;r=i.options;const a=i.extensionsUsed,l=new Blob(s,{type:"application/octet-stream"}),A=Object.keys(a);if(A.length>0&&(o.extensionsUsed=A),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=l.size),r.binary===!0){const c=new FileReader;c.readAsArrayBuffer(l),c.onloadend=function(){const u=N1(c.result),h=new DataView(new ArrayBuffer(VN));h.setUint32(0,u.byteLength,!0),h.setUint32(4,Xse,!0);const d=N1(jse(JSON.stringify(o)),32),p=new DataView(new ArrayBuffer(VN));p.setUint32(0,d.byteLength,!0),p.setUint32(4,Yse,!0);const f=new ArrayBuffer(LN),m=new DataView(f);m.setUint32(0,Hse,!0),m.setUint32(4,zse,!0);const g=LN+p.byteLength+d.byteLength+h.byteLength+u.byteLength;m.setUint32(8,g,!0);const v=new Blob([f,p,d,h,u],{type:"application/octet-stream"}),w=new FileReader;w.readAsArrayBuffer(v),w.onloadend=function(){t(w.result)}}}else if(o.buffers&&o.buffers.length>0){const c=new FileReader;c.readAsDataURL(l),c.onloadend=function(){const u=c.result;o.buffers[0].uri=u,t(o)}}else t(o)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const r=this.options,i=this.extensionsUsed;try{const s=JSON.parse(JSON.stringify(e.userData));if(r.includeCustomExtensions&&s.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const o in s.gltfExtensions)t.extensions[o]=s.gltfExtensions[o],i[o]=!0;delete s.gltfExtensions}Object.keys(s).length>0&&(t.extras=s)}catch(s){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+s.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const i=new Map;i.set(!0,this.uid++),i.set(!1,this.uid++),this.uids.set(e,i)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const r=new j;for(let i=0,s=e.count;i<s;i++)if(Math.abs(r.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const r=e.clone(),i=new j;for(let s=0,o=r.count;s<o;s++)i.fromBufferAttribute(r,s),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),r.setXYZ(s,i.x,i.y,i.z);return t.attributesNormalized.set(e,r),r}applyTextureTransform(e,t){let r=!1;const i={};(t.offset.x!==0||t.offset.y!==0)&&(i.offset=t.offset.toArray(),r=!0),t.rotation!==0&&(i.rotation=t.rotation,r=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(i.scale=t.repeat.toArray(),r=!0),r&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function r(d){return d.encoding===gt?function(f){return f<.04045?f*.0773993808:Math.pow(f*.9478672986+.0521327014,2.4)}:function(f){return f}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const i=e==null?void 0:e.image,s=t==null?void 0:t.image,o=Math.max((i==null?void 0:i.width)||0,(s==null?void 0:s.width)||0),a=Math.max((i==null?void 0:i.height)||0,(s==null?void 0:s.height)||0),l=PN();l.width=o,l.height=a;const A=l.getContext("2d");A.fillStyle="#00ffff",A.fillRect(0,0,o,a);const c=A.getImageData(0,0,o,a);if(i){A.drawImage(i,0,0,o,a);const d=r(e),p=A.getImageData(0,0,o,a).data;for(let f=2;f<p.length;f+=4)c.data[f]=d(p[f]/256)*256}if(s){A.drawImage(s,0,0,o,a);const d=r(t),p=A.getImageData(0,0,o,a).data;for(let f=1;f<p.length;f+=4)c.data[f]=d(p[f]/256)*256}A.putImageData(c,0,0);const h=(e||t).clone();return h.source=new mU(l),h.encoding=gs,h}processBuffer(e){const t=this.json,r=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),r.push(e),0}processBufferView(e,t,r,i,s){const o=this.json;o.bufferViews||(o.bufferViews=[]);let a;t===nn.UNSIGNED_BYTE?a=1:t===nn.UNSIGNED_SHORT?a=2:a=4;const l=m4(i*e.itemSize*a),A=new DataView(new ArrayBuffer(l));let c=0;for(let d=r;d<r+i;d++)for(let p=0;p<e.itemSize;p++){let f;e.itemSize>4?f=e.array[d*e.itemSize+p]:p===0?f=e.getX(d):p===1?f=e.getY(d):p===2?f=e.getZ(d):p===3&&(f=e.getW(d)),t===nn.FLOAT?A.setFloat32(c,f,!0):t===nn.UNSIGNED_INT?A.setUint32(c,f,!0):t===nn.UNSIGNED_SHORT?A.setUint16(c,f,!0):t===nn.UNSIGNED_BYTE&&A.setUint8(c,f),c+=a}const u={buffer:this.processBuffer(A.buffer),byteOffset:this.byteOffset,byteLength:l};return s!==void 0&&(u.target=s),s===nn.ARRAY_BUFFER&&(u.byteStride=e.itemSize*a),this.byteOffset+=l,o.bufferViews.push(u),{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,r=t.json;return r.bufferViews||(r.bufferViews=[]),new Promise(function(i){const s=new FileReader;s.readAsArrayBuffer(e),s.onloadend=function(){const o=N1(s.result),a={buffer:t.processBuffer(o),byteOffset:t.byteOffset,byteLength:o.byteLength};t.byteOffset+=o.byteLength,i(r.bufferViews.push(a)-1)}})}processAccessor(e,t,r,i){const s=this.json,o={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};let a;if(e.array.constructor===Float32Array)a=nn.FLOAT;else if(e.array.constructor===Uint32Array)a=nn.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)a=nn.UNSIGNED_SHORT;else if(e.array.constructor===Uint8Array)a=nn.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(r===void 0&&(r=0),i===void 0&&(i=e.count),i===0)return null;const l=$se(e,r,i);let A;t!==void 0&&(A=e===t.index?nn.ELEMENT_ARRAY_BUFFER:nn.ARRAY_BUFFER);const c=this.processBufferView(e,a,r,i,A),u={bufferView:c.id,byteOffset:c.byteOffset,componentType:a,count:i,max:l.max,min:l.min,type:o[e.itemSize]};return e.normalized===!0&&(u.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(u)-1}processImage(e,t,r,i="image/png"){const s=this,o=s.cache,a=s.json,l=s.options,A=s.pending;o.images.has(e)||o.images.set(e,{});const c=o.images.get(e),u=i+":flipY/"+r.toString();if(c[u]!==void 0)return c[u];a.images||(a.images=[]);const h={mimeType:i},d=PN();d.width=Math.min(e.width,l.maxTextureSize),d.height=Math.min(e.height,l.maxTextureSize);const p=d.getContext("2d");if(r===!0&&(p.translate(0,d.height),p.scale(1,-1)),e.data!==void 0){t!==Ir&&console.error("GLTFExporter: Only RGBAFormat is supported."),(e.width>l.maxTextureSize||e.height>l.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const m=new Uint8ClampedArray(e.height*e.width*4);for(let g=0;g<m.length;g+=4)m[g+0]=e.data[g+0],m[g+1]=e.data[g+1],m[g+2]=e.data[g+2],m[g+3]=e.data[g+3];p.putImageData(new ImageData(m,e.width,e.height),0,0)}else p.drawImage(e,0,0,d.width,d.height);l.binary===!0?A.push(ON(d,i).then(m=>s.processBufferViewImage(m)).then(m=>{h.bufferView=m})):d.toDataURL!==void 0?h.uri=d.toDataURL(i):A.push(ON(d,i).then(m=>new FileReader().readAsDataURL(m)).then(m=>{h.uri=m}));const f=a.images.push(h)-1;return c[u]=f,f}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const r={magFilter:as[e.magFilter],minFilter:as[e.minFilter],wrapS:as[e.wrapS],wrapT:as[e.wrapT]};return t.samplers.push(r)-1}processTexture(e){const t=this.cache,r=this.json;if(t.textures.has(e))return t.textures.get(e);r.textures||(r.textures=[]);let i=e.userData.mimeType;i==="image/webp"&&(i="image/png");const s={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,i)};e.name&&(s.name=e.name),this._invokeAll(function(a){a.writeTexture&&a.writeTexture(e,s)});const o=r.textures.push(s)-1;return t.textures.set(e,o),o}processMaterial(e){const t=this.cache,r=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;r.materials||(r.materials=[]);const i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const s=e.color.toArray().concat([e.opacity]);if(gg(s,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=s),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const a=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),l={index:this.processTexture(a)};this.applyTextureTransform(l,a),i.pbrMetallicRoughness.metallicRoughnessTexture=l}if(e.map){const a={index:this.processTexture(e.map)};this.applyTextureTransform(a,e.map),i.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){const a=e.emissive.clone().multiplyScalar(e.emissiveIntensity),l=Math.max(a.r,a.g,a.b);if(l>1&&(a.multiplyScalar(1/l),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),l>0&&(i.emissiveFactor=a.toArray()),e.emissiveMap){const A={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(A,e.emissiveMap),i.emissiveTexture=A}}if(e.normalMap){const a={index:this.processTexture(e.normalMap)};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),i.normalTexture=a}if(e.aoMap){const a={index:this.processTexture(e.aoMap),texCoord:1};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),i.occlusionTexture=a}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===mi&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(a){a.writeMaterial&&a.writeMaterial(e,i)});const o=r.materials.push(i)-1;return t.materials.set(e,o),o}processMesh(e){const t=this.cache,r=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let w=0,B=e.material.length;w<B;w++)i.push(e.material[w].uuid);else i.push(e.material.uuid);const s=i.join(":");if(t.meshes.has(s))return t.meshes.get(s);const o=e.geometry;let a;e.isLineSegments?a=nn.LINES:e.isLineLoop?a=nn.LINE_LOOP:e.isLine?a=nn.LINE_STRIP:e.isPoints?a=nn.POINTS:a=e.material.wireframe?nn.LINES:nn.TRIANGLES;const l={},A={},c=[],u=[],h={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},d=o.getAttribute("normal");d!==void 0&&!this.isNormalizedNormalAttribute(d)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(d)));let p=null;for(let w in o.attributes){if(w.slice(0,5)==="morph")continue;const B=o.attributes[w];if(w=h[w]||w.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(w)||(w="_"+w),t.attributes.has(this.getUID(B))){A[w]=t.attributes.get(this.getUID(B));continue}p=null;const b=B.array;w==="JOINTS_0"&&!(b instanceof Uint16Array)&&!(b instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),p=new ut(new Uint16Array(b),B.itemSize,B.normalized));const F=this.processAccessor(p||B,o);F!==null&&(A[w]=F,t.attributes.set(this.getUID(B),F))}if(d!==void 0&&o.setAttribute("normal",d),Object.keys(A).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const w=[],B=[],C={};if(e.morphTargetDictionary!==void 0)for(const b in e.morphTargetDictionary)C[e.morphTargetDictionary[b]]=b;for(let b=0;b<e.morphTargetInfluences.length;++b){const F={};let x=!1;for(const E in o.morphAttributes){if(E!=="position"&&E!=="normal"){x||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),x=!0);continue}const M=o.morphAttributes[E][b],H=E.toUpperCase(),O=o.attributes[E];if(t.attributes.has(this.getUID(M,!0))){F[H]=t.attributes.get(this.getUID(M,!0));continue}const U=M.clone();if(!o.morphTargetsRelative)for(let y=0,I=M.count;y<I;y++)U.setXYZ(y,M.getX(y)-O.getX(y),M.getY(y)-O.getY(y),M.getZ(y)-O.getZ(y));F[H]=this.processAccessor(U,o),t.attributes.set(this.getUID(O,!0),F[H])}u.push(F),w.push(e.morphTargetInfluences[b]),e.morphTargetDictionary!==void 0&&B.push(C[b])}l.weights=w,B.length>0&&(l.extras={},l.extras.targetNames=B)}const f=Array.isArray(e.material);if(f&&o.groups.length===0)return null;const m=f?e.material:[e.material],g=f?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let w=0,B=g.length;w<B;w++){const C={mode:a,attributes:A};if(this.serializeUserData(o,C),u.length>0&&(C.targets=u),o.index!==null){let F=this.getUID(o.index);(g[w].start!==void 0||g[w].count!==void 0)&&(F+=":"+g[w].start+":"+g[w].count),t.attributes.has(F)?C.indices=t.attributes.get(F):(C.indices=this.processAccessor(o.index,o,g[w].start,g[w].count),t.attributes.set(F,C.indices)),C.indices===null&&delete C.indices}const b=this.processMaterial(m[g[w].materialIndex]);b!==null&&(C.material=b),c.push(C)}l.primitives=c,r.meshes||(r.meshes=[]),this._invokeAll(function(w){w.writeMesh&&w.writeMesh(e,l)});const v=r.meshes.push(l)-1;return t.meshes.set(s,v),v}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const r=e.isOrthographicCamera,i={type:r?"orthographic":"perspective"};return r?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:Zt.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){const r=this.json,i=this.nodeMap;r.animations||(r.animations=[]),e=ZU.Utils.mergeMorphTargetTracks(e.clone(),t);const s=e.tracks,o=[],a=[];for(let l=0;l<s.length;++l){const A=s[l],c=Ct.parseTrackName(A.name);let u=Ct.findNode(t,c.nodeName);const h=DN[c.propertyName];if(c.objectName==="bones"&&(u.isSkinnedMesh===!0?u=u.skeleton.getBoneByName(c.objectIndex):u=void 0),!u||!h)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',A.name),null;const d=1;let p=A.values.length/A.times.length;h===DN.morphTargetInfluences&&(p/=u.morphTargetInfluences.length);let f;A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(f="CUBICSPLINE",p/=3):A.getInterpolation()===Cf?f="STEP":f="LINEAR",a.push({input:this.processAccessor(new ut(A.times,d)),output:this.processAccessor(new ut(A.values,p)),interpolation:f}),o.push({sampler:a.length-1,target:{node:i.get(u),path:h}})}return r.animations.push({name:e.name||"clip_"+r.animations.length,samplers:a,channels:o}),r.animations.length-1}processSkin(e){const t=this.json,r=this.nodeMap,i=t.nodes[r.get(e)],s=e.skeleton;if(s===void 0)return null;const o=e.skeleton.bones[0];if(o===void 0)return null;const a=[],l=new Float32Array(s.bones.length*16),A=new Je;for(let u=0;u<s.bones.length;++u)a.push(r.get(s.bones[u])),A.copy(s.boneInverses[u]),A.multiply(e.bindMatrix).toArray(l,u*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new ut(l,16)),joints:a,skeleton:r.get(o)}),i.skin=t.skins.length-1}processNode(e){const t=this.json,r=this.options,i=this.nodeMap;t.nodes||(t.nodes=[]);const s={};if(r.trs){const a=e.quaternion.toArray(),l=e.position.toArray(),A=e.scale.toArray();gg(a,[0,0,0,1])||(s.rotation=a),gg(l,[0,0,0])||(s.translation=l),gg(A,[1,1,1])||(s.scale=A)}else e.matrixAutoUpdate&&e.updateMatrix(),Kse(e.matrix)===!1&&(s.matrix=e.matrix.elements);if(e.name!==""&&(s.name=String(e.name)),this.serializeUserData(e,s),e.isMesh||e.isLine||e.isPoints){const a=this.processMesh(e);a!==null&&(s.mesh=a)}else e.isCamera&&(s.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const a=[];for(let l=0,A=e.children.length;l<A;l++){const c=e.children[l];if(c.visible||r.onlyVisible===!1){const u=this.processNode(c);u!==null&&a.push(u)}}a.length>0&&(s.children=a)}this._invokeAll(function(a){a.writeNode&&a.writeNode(e,s)});const o=t.nodes.push(s)-1;return i.set(e,o),o}processScene(e){const t=this.json,r=this.options;t.scenes||(t.scenes=[],t.scene=0);const i={};e.name!==""&&(i.name=e.name),t.scenes.push(i);const s=[];for(let o=0,a=e.children.length;o<a;o++){const l=e.children[o];if(l.visible||r.onlyVisible===!1){const A=this.processNode(l);A!==null&&s.push(A)}}s.length>0&&(i.nodes=s),this.serializeUserData(e,i)}processObjects(e){const t=new CB;t.name="AuxScene";for(let r=0;r<e.length;r++)t.children.push(e[r]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});const r=[];for(let i=0;i<e.length;i++)e[i]instanceof CB?this.processScene(e[i]):r.push(e[i]);r.length>0&&this.processObjects(r);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let t=0,r=this.plugins.length;t<r;t++)e(this.plugins[t])}}class eoe{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const r=this.writer,i=r.json,s=r.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,o.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),s[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},s[this.name]=!0);const a=i.extensions[this.name].lights;a.push(o),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}class toe{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class noe{constructor(e){this.writer=e,this.name="KHR_materials_pbrSpecularGlossiness"}writeMaterial(e,t){if(!e.isGLTFSpecularGlossinessMaterial)return;const r=this.writer,i=r.extensionsUsed,s={};t.pbrMetallicRoughness.baseColorFactor&&(s.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);const o=[1,1,1];if(e.specular.toArray(o,0),s.specularFactor=o,s.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(s.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){const a={index:r.processTexture(e.specularMap)};r.applyTextureTransform(a,e.specularMap),s.specularGlossinessTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class roe{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.clearcoatFactor=e.clearcoat,e.clearcoatMap){const o={index:r.processTexture(e.clearcoatMap)};r.applyTextureTransform(o,e.clearcoatMap),s.clearcoatTexture=o}if(s.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const o={index:r.processTexture(e.clearcoatRoughnessMap)};r.applyTextureTransform(o,e.clearcoatRoughnessMap),s.clearcoatRoughnessTexture=o}if(e.clearcoatNormalMap){const o={index:r.processTexture(e.clearcoatNormalMap)};r.applyTextureTransform(o,e.clearcoatNormalMap),s.clearcoatNormalTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class ioe{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.iridescenceFactor=e.iridescence,e.iridescenceMap){const o={index:r.processTexture(e.iridescenceMap)};r.applyTextureTransform(o,e.iridescenceMap),s.iridescenceTexture=o}if(s.iridescenceIor=e.iridescenceIOR,s.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],s.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const o={index:r.processTexture(e.iridescenceThicknessMap)};r.applyTextureTransform(o,e.iridescenceThicknessMap),s.iridescenceThicknessTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class soe{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.transmissionFactor=e.transmission,e.transmissionMap){const o={index:r.processTexture(e.transmissionMap)};r.applyTextureTransform(o,e.transmissionMap),s.transmissionTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class ooe{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.thicknessFactor=e.thickness,e.thicknessMap){const o={index:r.processTexture(e.thicknessMap)};r.applyTextureTransform(o,e.thicknessMap),s.thicknessTexture=o}s.attenuationDistance=e.attenuationDistance,s.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}ZU.Utils={insertKeyframe:function(n,e){const r=n.getValueSize(),i=new n.TimeBufferType(n.times.length+1),s=new n.ValueBufferType(n.values.length+r),o=n.createInterpolant(new n.ValueBufferType(r));let a;if(n.times.length===0){i[0]=e;for(let l=0;l<r;l++)s[l]=0;a=0}else if(e<n.times[0]){if(Math.abs(n.times[0]-e)<.001)return 0;i[0]=e,i.set(n.times,1),s.set(o.evaluate(e),0),s.set(n.values,r),a=0}else if(e>n.times[n.times.length-1]){if(Math.abs(n.times[n.times.length-1]-e)<.001)return n.times.length-1;i[i.length-1]=e,i.set(n.times,0),s.set(n.values,0),s.set(o.evaluate(e),n.values.length),a=i.length-1}else for(let l=0;l<n.times.length;l++){if(Math.abs(n.times[l]-e)<.001)return l;if(n.times[l]<e&&n.times[l+1]>e){i.set(n.times.slice(0,l+1),0),i[l+1]=e,i.set(n.times.slice(l+1),l+2),s.set(n.values.slice(0,(l+1)*r),0),s.set(o.evaluate(e),(l+1)*r),s.set(n.values.slice((l+1)*r),(l+2)*r),a=l+1;break}}return n.times=i,n.values=s,a},mergeMorphTargetTracks:function(n,e){const t=[],r={},i=n.tracks;for(let s=0;s<i.length;++s){let o=i[s];const a=Ct.parseTrackName(o.name),l=Ct.findNode(e,a.nodeName);if(a.propertyName!=="morphTargetInfluences"||a.propertyIndex===void 0){t.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),o=o.clone(),o.setInterpolation(Bu)}const A=l.morphTargetInfluences.length,c=l.morphTargetDictionary[a.propertyIndex];if(c===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let u;if(r[l.uuid]===void 0){u=o.clone();const d=new u.ValueBufferType(A*u.times.length);for(let p=0;p<u.times.length;p++)d[p*A+c]=u.values[p];u.name=(a.nodeName||"")+".morphTargetInfluences",u.values=d,r[l.uuid]=u,t.push(u);continue}const h=o.createInterpolant(new o.ValueBufferType(1));u=r[l.uuid];for(let d=0;d<u.times.length;d++)u.values[d*A+c]=h.evaluate(u.times[d]);for(let d=0;d<o.times.length;d++){const p=this.insertKeyframe(u,o.times[d]);u.values[p*A+c]=o.values[d]}}return n.tracks=t,n}};var v4={},rb={};rb.byteLength=Aoe;rb.toByteArray=uoe;rb.fromByteArray=foe;var ca=[],ks=[],aoe=typeof Uint8Array<"u"?Uint8Array:Array,k1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var pd=0,loe=k1.length;pd<loe;++pd)ca[pd]=k1[pd],ks[k1.charCodeAt(pd)]=pd;ks["-".charCodeAt(0)]=62;ks["_".charCodeAt(0)]=63;function y4(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function Aoe(n){var e=y4(n),t=e[0],r=e[1];return(t+r)*3/4-r}function coe(n,e,t){return(e+t)*3/4-t}function uoe(n){var e,t=y4(n),r=t[0],i=t[1],s=new aoe(coe(n,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=ks[n.charCodeAt(l)]<<18|ks[n.charCodeAt(l+1)]<<12|ks[n.charCodeAt(l+2)]<<6|ks[n.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=ks[n.charCodeAt(l)]<<2|ks[n.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=ks[n.charCodeAt(l)]<<10|ks[n.charCodeAt(l+1)]<<4|ks[n.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function doe(n){return ca[n>>18&63]+ca[n>>12&63]+ca[n>>6&63]+ca[n&63]}function hoe(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(doe(r));return i.join("")}function foe(n){for(var e,t=n.length,r=t%3,i=[],s=16383,o=0,a=t-r;o<a;o+=s)i.push(hoe(n,o,o+s>a?a:o+s));return r===1?(e=n[t-1],i.push(ca[e>>2]+ca[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(ca[e>>10]+ca[e>>4&63]+ca[e<<2&63]+"=")),i.join("")}var GU={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */GU.read=function(n,e,t,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,A=l>>1,c=-7,u=t?i-1:0,h=t?-1:1,d=n[e+u];for(u+=h,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=s*256+n[e+u],u+=h,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=o*256+n[e+u],u+=h,c-=8);if(s===0)s=1-A;else{if(s===l)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-A}return(d?-1:1)*o*Math.pow(2,s-r)};GU.write=function(n,e,t,r,i,s){var o,a,l,A=s*8-i-1,c=(1<<A)-1,u=c>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,f=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+u>=1?e+=h/l:e+=h*Math.pow(2,1-u),e*l>=2&&(o++,l/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*l-1)*Math.pow(2,i),o=o+u):(a=e*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;n[t+d]=a&255,d+=p,a/=256,i-=8);for(o=o<<i|a,A+=i;A>0;n[t+d]=o&255,d+=p,o/=256,A-=8);n[t+d-p]|=f*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=rb,t=GU,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=v,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const G=new Uint8Array(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,Uint8Array.prototype),Object.setPrototypeOf(G,Q),G.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(G){if(G>i)throw new RangeError('The value "'+G+'" is invalid for option "size"');const Q=new Uint8Array(G);return Object.setPrototypeOf(Q,a.prototype),Q}function a(G,Q,S){if(typeof G=="number"){if(typeof Q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(G)}return l(G,Q,S)}a.poolSize=8192;function l(G,Q,S){if(typeof G=="string")return h(G,Q);if(ArrayBuffer.isView(G))return p(G);if(G==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(J(G,ArrayBuffer)||G&&J(G.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(J(G,SharedArrayBuffer)||G&&J(G.buffer,SharedArrayBuffer)))return f(G,Q,S);if(typeof G=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const W=G.valueOf&&G.valueOf();if(W!=null&&W!==G)return a.from(W,Q,S);const te=m(G);if(te)return te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof G[Symbol.toPrimitive]=="function")return a.from(G[Symbol.toPrimitive]("string"),Q,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}a.from=function(G,Q,S){return l(G,Q,S)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function A(G){if(typeof G!="number")throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function c(G,Q,S){return A(G),G<=0?o(G):Q!==void 0?typeof S=="string"?o(G).fill(Q,S):o(G).fill(Q):o(G)}a.alloc=function(G,Q,S){return c(G,Q,S)};function u(G){return A(G),o(G<0?0:g(G)|0)}a.allocUnsafe=function(G){return u(G)},a.allocUnsafeSlow=function(G){return u(G)};function h(G,Q){if((typeof Q!="string"||Q==="")&&(Q="utf8"),!a.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);const S=w(G,Q)|0;let W=o(S);const te=W.write(G,Q);return te!==S&&(W=W.slice(0,te)),W}function d(G){const Q=G.length<0?0:g(G.length)|0,S=o(Q);for(let W=0;W<Q;W+=1)S[W]=G[W]&255;return S}function p(G){if(J(G,Uint8Array)){const Q=new Uint8Array(G);return f(Q.buffer,Q.byteOffset,Q.byteLength)}return d(G)}function f(G,Q,S){if(Q<0||G.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(G.byteLength<Q+(S||0))throw new RangeError('"length" is outside of buffer bounds');let W;return Q===void 0&&S===void 0?W=new Uint8Array(G):S===void 0?W=new Uint8Array(G,Q):W=new Uint8Array(G,Q,S),Object.setPrototypeOf(W,a.prototype),W}function m(G){if(a.isBuffer(G)){const Q=g(G.length)|0,S=o(Q);return S.length===0||G.copy(S,0,0,Q),S}if(G.length!==void 0)return typeof G.length!="number"||Y(G.length)?o(0):d(G);if(G.type==="Buffer"&&Array.isArray(G.data))return d(G.data)}function g(G){if(G>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return G|0}function v(G){return+G!=G&&(G=0),a.alloc(+G)}a.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==a.prototype},a.compare=function(Q,S){if(J(Q,Uint8Array)&&(Q=a.from(Q,Q.offset,Q.byteLength)),J(S,Uint8Array)&&(S=a.from(S,S.offset,S.byteLength)),!a.isBuffer(Q)||!a.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===S)return 0;let W=Q.length,te=S.length;for(let oe=0,ae=Math.min(W,te);oe<ae;++oe)if(Q[oe]!==S[oe]){W=Q[oe],te=S[oe];break}return W<te?-1:te<W?1:0},a.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(Q,S){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return a.alloc(0);let W;if(S===void 0)for(S=0,W=0;W<Q.length;++W)S+=Q[W].length;const te=a.allocUnsafe(S);let oe=0;for(W=0;W<Q.length;++W){let ae=Q[W];if(J(ae,Uint8Array))oe+ae.length>te.length?(a.isBuffer(ae)||(ae=a.from(ae)),ae.copy(te,oe)):Uint8Array.prototype.set.call(te,ae,oe);else if(a.isBuffer(ae))ae.copy(te,oe);else throw new TypeError('"list" argument must be an Array of Buffers');oe+=ae.length}return te};function w(G,Q){if(a.isBuffer(G))return G.length;if(ArrayBuffer.isView(G)||J(G,ArrayBuffer))return G.byteLength;if(typeof G!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);const S=G.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&S===0)return 0;let te=!1;for(;;)switch(Q){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return ee(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S*2;case"hex":return S>>>1;case"base64":return ye(G).length;default:if(te)return W?-1:ee(G).length;Q=(""+Q).toLowerCase(),te=!0}}a.byteLength=w;function B(G,Q,S){let W=!1;if((Q===void 0||Q<0)&&(Q=0),Q>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0,Q>>>=0,S<=Q))return"";for(G||(G="utf8");;)switch(G){case"hex":return V(this,Q,S);case"utf8":case"utf-8":return y(this,Q,S);case"ascii":return D(this,Q,S);case"latin1":case"binary":return k(this,Q,S);case"base64":return U(this,Q,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,Q,S);default:if(W)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),W=!0}}a.prototype._isBuffer=!0;function C(G,Q,S){const W=G[Q];G[Q]=G[S],G[S]=W}a.prototype.swap16=function(){const Q=this.length;if(Q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<Q;S+=2)C(this,S,S+1);return this},a.prototype.swap32=function(){const Q=this.length;if(Q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<Q;S+=4)C(this,S,S+3),C(this,S+1,S+2);return this},a.prototype.swap64=function(){const Q=this.length;if(Q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<Q;S+=8)C(this,S,S+7),C(this,S+1,S+6),C(this,S+2,S+5),C(this,S+3,S+4);return this},a.prototype.toString=function(){const Q=this.length;return Q===0?"":arguments.length===0?y(this,0,Q):B.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(Q){if(!a.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q?!0:a.compare(this,Q)===0},a.prototype.inspect=function(){let Q="";const S=n.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(Q+=" ... "),"<Buffer "+Q+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(Q,S,W,te,oe){if(J(Q,Uint8Array)&&(Q=a.from(Q,Q.offset,Q.byteLength)),!a.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(S===void 0&&(S=0),W===void 0&&(W=Q?Q.length:0),te===void 0&&(te=0),oe===void 0&&(oe=this.length),S<0||W>Q.length||te<0||oe>this.length)throw new RangeError("out of range index");if(te>=oe&&S>=W)return 0;if(te>=oe)return-1;if(S>=W)return 1;if(S>>>=0,W>>>=0,te>>>=0,oe>>>=0,this===Q)return 0;let ae=oe-te,Se=W-S;const Ee=Math.min(ae,Se),Me=this.slice(te,oe),Le=Q.slice(S,W);for(let ke=0;ke<Ee;++ke)if(Me[ke]!==Le[ke]){ae=Me[ke],Se=Le[ke];break}return ae<Se?-1:Se<ae?1:0};function b(G,Q,S,W,te){if(G.length===0)return-1;if(typeof S=="string"?(W=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),S=+S,Y(S)&&(S=te?0:G.length-1),S<0&&(S=G.length+S),S>=G.length){if(te)return-1;S=G.length-1}else if(S<0)if(te)S=0;else return-1;if(typeof Q=="string"&&(Q=a.from(Q,W)),a.isBuffer(Q))return Q.length===0?-1:F(G,Q,S,W,te);if(typeof Q=="number")return Q=Q&255,typeof Uint8Array.prototype.indexOf=="function"?te?Uint8Array.prototype.indexOf.call(G,Q,S):Uint8Array.prototype.lastIndexOf.call(G,Q,S):F(G,[Q],S,W,te);throw new TypeError("val must be string, number or Buffer")}function F(G,Q,S,W,te){let oe=1,ae=G.length,Se=Q.length;if(W!==void 0&&(W=String(W).toLowerCase(),W==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(G.length<2||Q.length<2)return-1;oe=2,ae/=2,Se/=2,S/=2}function Ee(Le,ke){return oe===1?Le[ke]:Le.readUInt16BE(ke*oe)}let Me;if(te){let Le=-1;for(Me=S;Me<ae;Me++)if(Ee(G,Me)===Ee(Q,Le===-1?0:Me-Le)){if(Le===-1&&(Le=Me),Me-Le+1===Se)return Le*oe}else Le!==-1&&(Me-=Me-Le),Le=-1}else for(S+Se>ae&&(S=ae-Se),Me=S;Me>=0;Me--){let Le=!0;for(let ke=0;ke<Se;ke++)if(Ee(G,Me+ke)!==Ee(Q,ke)){Le=!1;break}if(Le)return Me}return-1}a.prototype.includes=function(Q,S,W){return this.indexOf(Q,S,W)!==-1},a.prototype.indexOf=function(Q,S,W){return b(this,Q,S,W,!0)},a.prototype.lastIndexOf=function(Q,S,W){return b(this,Q,S,W,!1)};function x(G,Q,S,W){S=Number(S)||0;const te=G.length-S;W?(W=Number(W),W>te&&(W=te)):W=te;const oe=Q.length;W>oe/2&&(W=oe/2);let ae;for(ae=0;ae<W;++ae){const Se=parseInt(Q.substr(ae*2,2),16);if(Y(Se))return ae;G[S+ae]=Se}return ae}function E(G,Q,S,W){return ne(ee(Q,G.length-S),G,S,W)}function M(G,Q,S,W){return ne(K(Q),G,S,W)}function H(G,Q,S,W){return ne(ye(Q),G,S,W)}function O(G,Q,S,W){return ne(se(Q,G.length-S),G,S,W)}a.prototype.write=function(Q,S,W,te){if(S===void 0)te="utf8",W=this.length,S=0;else if(W===void 0&&typeof S=="string")te=S,W=this.length,S=0;else if(isFinite(S))S=S>>>0,isFinite(W)?(W=W>>>0,te===void 0&&(te="utf8")):(te=W,W=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const oe=this.length-S;if((W===void 0||W>oe)&&(W=oe),Q.length>0&&(W<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");let ae=!1;for(;;)switch(te){case"hex":return x(this,Q,S,W);case"utf8":case"utf-8":return E(this,Q,S,W);case"ascii":case"latin1":case"binary":return M(this,Q,S,W);case"base64":return H(this,Q,S,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,Q,S,W);default:if(ae)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),ae=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(G,Q,S){return Q===0&&S===G.length?e.fromByteArray(G):e.fromByteArray(G.slice(Q,S))}function y(G,Q,S){S=Math.min(G.length,S);const W=[];let te=Q;for(;te<S;){const oe=G[te];let ae=null,Se=oe>239?4:oe>223?3:oe>191?2:1;if(te+Se<=S){let Ee,Me,Le,ke;switch(Se){case 1:oe<128&&(ae=oe);break;case 2:Ee=G[te+1],(Ee&192)===128&&(ke=(oe&31)<<6|Ee&63,ke>127&&(ae=ke));break;case 3:Ee=G[te+1],Me=G[te+2],(Ee&192)===128&&(Me&192)===128&&(ke=(oe&15)<<12|(Ee&63)<<6|Me&63,ke>2047&&(ke<55296||ke>57343)&&(ae=ke));break;case 4:Ee=G[te+1],Me=G[te+2],Le=G[te+3],(Ee&192)===128&&(Me&192)===128&&(Le&192)===128&&(ke=(oe&15)<<18|(Ee&63)<<12|(Me&63)<<6|Le&63,ke>65535&&ke<1114112&&(ae=ke))}}ae===null?(ae=65533,Se=1):ae>65535&&(ae-=65536,W.push(ae>>>10&1023|55296),ae=56320|ae&1023),W.push(ae),te+=Se}return R(W)}const I=4096;function R(G){const Q=G.length;if(Q<=I)return String.fromCharCode.apply(String,G);let S="",W=0;for(;W<Q;)S+=String.fromCharCode.apply(String,G.slice(W,W+=I));return S}function D(G,Q,S){let W="";S=Math.min(G.length,S);for(let te=Q;te<S;++te)W+=String.fromCharCode(G[te]&127);return W}function k(G,Q,S){let W="";S=Math.min(G.length,S);for(let te=Q;te<S;++te)W+=String.fromCharCode(G[te]);return W}function V(G,Q,S){const W=G.length;(!Q||Q<0)&&(Q=0),(!S||S<0||S>W)&&(S=W);let te="";for(let oe=Q;oe<S;++oe)te+=ue[G[oe]];return te}function Z(G,Q,S){const W=G.slice(Q,S);let te="";for(let oe=0;oe<W.length-1;oe+=2)te+=String.fromCharCode(W[oe]+W[oe+1]*256);return te}a.prototype.slice=function(Q,S){const W=this.length;Q=~~Q,S=S===void 0?W:~~S,Q<0?(Q+=W,Q<0&&(Q=0)):Q>W&&(Q=W),S<0?(S+=W,S<0&&(S=0)):S>W&&(S=W),S<Q&&(S=Q);const te=this.subarray(Q,S);return Object.setPrototypeOf(te,a.prototype),te};function N(G,Q,S){if(G%1!==0||G<0)throw new RangeError("offset is not uint");if(G+Q>S)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(Q,S,W){Q=Q>>>0,S=S>>>0,W||N(Q,S,this.length);let te=this[Q],oe=1,ae=0;for(;++ae<S&&(oe*=256);)te+=this[Q+ae]*oe;return te},a.prototype.readUintBE=a.prototype.readUIntBE=function(Q,S,W){Q=Q>>>0,S=S>>>0,W||N(Q,S,this.length);let te=this[Q+--S],oe=1;for(;S>0&&(oe*=256);)te+=this[Q+--S]*oe;return te},a.prototype.readUint8=a.prototype.readUInt8=function(Q,S){return Q=Q>>>0,S||N(Q,1,this.length),this[Q]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(Q,S){return Q=Q>>>0,S||N(Q,2,this.length),this[Q]|this[Q+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(Q,S){return Q=Q>>>0,S||N(Q,2,this.length),this[Q]<<8|this[Q+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(Q,S){return Q=Q>>>0,S||N(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+this[Q+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(Q,S){return Q=Q>>>0,S||N(Q,4,this.length),this[Q]*16777216+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},a.prototype.readBigUInt64LE=le(function(Q){Q=Q>>>0,_e(Q,"offset");const S=this[Q],W=this[Q+7];(S===void 0||W===void 0)&&P(Q,this.length-8);const te=S+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24,oe=this[++Q]+this[++Q]*2**8+this[++Q]*2**16+W*2**24;return BigInt(te)+(BigInt(oe)<<BigInt(32))}),a.prototype.readBigUInt64BE=le(function(Q){Q=Q>>>0,_e(Q,"offset");const S=this[Q],W=this[Q+7];(S===void 0||W===void 0)&&P(Q,this.length-8);const te=S*2**24+this[++Q]*2**16+this[++Q]*2**8+this[++Q],oe=this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+W;return(BigInt(te)<<BigInt(32))+BigInt(oe)}),a.prototype.readIntLE=function(Q,S,W){Q=Q>>>0,S=S>>>0,W||N(Q,S,this.length);let te=this[Q],oe=1,ae=0;for(;++ae<S&&(oe*=256);)te+=this[Q+ae]*oe;return oe*=128,te>=oe&&(te-=Math.pow(2,8*S)),te},a.prototype.readIntBE=function(Q,S,W){Q=Q>>>0,S=S>>>0,W||N(Q,S,this.length);let te=S,oe=1,ae=this[Q+--te];for(;te>0&&(oe*=256);)ae+=this[Q+--te]*oe;return oe*=128,ae>=oe&&(ae-=Math.pow(2,8*S)),ae},a.prototype.readInt8=function(Q,S){return Q=Q>>>0,S||N(Q,1,this.length),this[Q]&128?(255-this[Q]+1)*-1:this[Q]},a.prototype.readInt16LE=function(Q,S){Q=Q>>>0,S||N(Q,2,this.length);const W=this[Q]|this[Q+1]<<8;return W&32768?W|4294901760:W},a.prototype.readInt16BE=function(Q,S){Q=Q>>>0,S||N(Q,2,this.length);const W=this[Q+1]|this[Q]<<8;return W&32768?W|4294901760:W},a.prototype.readInt32LE=function(Q,S){return Q=Q>>>0,S||N(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},a.prototype.readInt32BE=function(Q,S){return Q=Q>>>0,S||N(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},a.prototype.readBigInt64LE=le(function(Q){Q=Q>>>0,_e(Q,"offset");const S=this[Q],W=this[Q+7];(S===void 0||W===void 0)&&P(Q,this.length-8);const te=this[Q+4]+this[Q+5]*2**8+this[Q+6]*2**16+(W<<24);return(BigInt(te)<<BigInt(32))+BigInt(S+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24)}),a.prototype.readBigInt64BE=le(function(Q){Q=Q>>>0,_e(Q,"offset");const S=this[Q],W=this[Q+7];(S===void 0||W===void 0)&&P(Q,this.length-8);const te=(S<<24)+this[++Q]*2**16+this[++Q]*2**8+this[++Q];return(BigInt(te)<<BigInt(32))+BigInt(this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+W)}),a.prototype.readFloatLE=function(Q,S){return Q=Q>>>0,S||N(Q,4,this.length),t.read(this,Q,!0,23,4)},a.prototype.readFloatBE=function(Q,S){return Q=Q>>>0,S||N(Q,4,this.length),t.read(this,Q,!1,23,4)},a.prototype.readDoubleLE=function(Q,S){return Q=Q>>>0,S||N(Q,8,this.length),t.read(this,Q,!0,52,8)},a.prototype.readDoubleBE=function(Q,S){return Q=Q>>>0,S||N(Q,8,this.length),t.read(this,Q,!1,52,8)};function _(G,Q,S,W,te,oe){if(!a.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>te||Q<oe)throw new RangeError('"value" argument is out of bounds');if(S+W>G.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(Q,S,W,te){if(Q=+Q,S=S>>>0,W=W>>>0,!te){const Se=Math.pow(2,8*W)-1;_(this,Q,S,W,Se,0)}let oe=1,ae=0;for(this[S]=Q&255;++ae<W&&(oe*=256);)this[S+ae]=Q/oe&255;return S+W},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(Q,S,W,te){if(Q=+Q,S=S>>>0,W=W>>>0,!te){const Se=Math.pow(2,8*W)-1;_(this,Q,S,W,Se,0)}let oe=W-1,ae=1;for(this[S+oe]=Q&255;--oe>=0&&(ae*=256);)this[S+oe]=Q/ae&255;return S+W},a.prototype.writeUint8=a.prototype.writeUInt8=function(Q,S,W){return Q=+Q,S=S>>>0,W||_(this,Q,S,1,255,0),this[S]=Q&255,S+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(Q,S,W){return Q=+Q,S=S>>>0,W||_(this,Q,S,2,65535,0),this[S]=Q&255,this[S+1]=Q>>>8,S+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(Q,S,W){return Q=+Q,S=S>>>0,W||_(this,Q,S,2,65535,0),this[S]=Q>>>8,this[S+1]=Q&255,S+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(Q,S,W){return Q=+Q,S=S>>>0,W||_(this,Q,S,4,4294967295,0),this[S+3]=Q>>>24,this[S+2]=Q>>>16,this[S+1]=Q>>>8,this[S]=Q&255,S+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(Q,S,W){return Q=+Q,S=S>>>0,W||_(this,Q,S,4,4294967295,0),this[S]=Q>>>24,this[S+1]=Q>>>16,this[S+2]=Q>>>8,this[S+3]=Q&255,S+4};function z(G,Q,S,W,te){me(Q,W,te,G,S,7);let oe=Number(Q&BigInt(4294967295));G[S++]=oe,oe=oe>>8,G[S++]=oe,oe=oe>>8,G[S++]=oe,oe=oe>>8,G[S++]=oe;let ae=Number(Q>>BigInt(32)&BigInt(4294967295));return G[S++]=ae,ae=ae>>8,G[S++]=ae,ae=ae>>8,G[S++]=ae,ae=ae>>8,G[S++]=ae,S}function ie(G,Q,S,W,te){me(Q,W,te,G,S,7);let oe=Number(Q&BigInt(4294967295));G[S+7]=oe,oe=oe>>8,G[S+6]=oe,oe=oe>>8,G[S+5]=oe,oe=oe>>8,G[S+4]=oe;let ae=Number(Q>>BigInt(32)&BigInt(4294967295));return G[S+3]=ae,ae=ae>>8,G[S+2]=ae,ae=ae>>8,G[S+1]=ae,ae=ae>>8,G[S]=ae,S+8}a.prototype.writeBigUInt64LE=le(function(Q,S=0){return z(this,Q,S,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=le(function(Q,S=0){return ie(this,Q,S,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(Q,S,W,te){if(Q=+Q,S=S>>>0,!te){const Ee=Math.pow(2,8*W-1);_(this,Q,S,W,Ee-1,-Ee)}let oe=0,ae=1,Se=0;for(this[S]=Q&255;++oe<W&&(ae*=256);)Q<0&&Se===0&&this[S+oe-1]!==0&&(Se=1),this[S+oe]=(Q/ae>>0)-Se&255;return S+W},a.prototype.writeIntBE=function(Q,S,W,te){if(Q=+Q,S=S>>>0,!te){const Ee=Math.pow(2,8*W-1);_(this,Q,S,W,Ee-1,-Ee)}let oe=W-1,ae=1,Se=0;for(this[S+oe]=Q&255;--oe>=0&&(ae*=256);)Q<0&&Se===0&&this[S+oe+1]!==0&&(Se=1),this[S+oe]=(Q/ae>>0)-Se&255;return S+W},a.prototype.writeInt8=function(Q,S,W){return Q=+Q,S=S>>>0,W||_(this,Q,S,1,127,-128),Q<0&&(Q=255+Q+1),this[S]=Q&255,S+1},a.prototype.writeInt16LE=function(Q,S,W){return Q=+Q,S=S>>>0,W||_(this,Q,S,2,32767,-32768),this[S]=Q&255,this[S+1]=Q>>>8,S+2},a.prototype.writeInt16BE=function(Q,S,W){return Q=+Q,S=S>>>0,W||_(this,Q,S,2,32767,-32768),this[S]=Q>>>8,this[S+1]=Q&255,S+2},a.prototype.writeInt32LE=function(Q,S,W){return Q=+Q,S=S>>>0,W||_(this,Q,S,4,2147483647,-2147483648),this[S]=Q&255,this[S+1]=Q>>>8,this[S+2]=Q>>>16,this[S+3]=Q>>>24,S+4},a.prototype.writeInt32BE=function(Q,S,W){return Q=+Q,S=S>>>0,W||_(this,Q,S,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[S]=Q>>>24,this[S+1]=Q>>>16,this[S+2]=Q>>>8,this[S+3]=Q&255,S+4},a.prototype.writeBigInt64LE=le(function(Q,S=0){return z(this,Q,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=le(function(Q,S=0){return ie(this,Q,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function T(G,Q,S,W,te,oe){if(S+W>G.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function q(G,Q,S,W,te){return Q=+Q,S=S>>>0,te||T(G,Q,S,4),t.write(G,Q,S,W,23,4),S+4}a.prototype.writeFloatLE=function(Q,S,W){return q(this,Q,S,!0,W)},a.prototype.writeFloatBE=function(Q,S,W){return q(this,Q,S,!1,W)};function ge(G,Q,S,W,te){return Q=+Q,S=S>>>0,te||T(G,Q,S,8),t.write(G,Q,S,W,52,8),S+8}a.prototype.writeDoubleLE=function(Q,S,W){return ge(this,Q,S,!0,W)},a.prototype.writeDoubleBE=function(Q,S,W){return ge(this,Q,S,!1,W)},a.prototype.copy=function(Q,S,W,te){if(!a.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(W||(W=0),!te&&te!==0&&(te=this.length),S>=Q.length&&(S=Q.length),S||(S=0),te>0&&te<W&&(te=W),te===W||Q.length===0||this.length===0)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),Q.length-S<te-W&&(te=Q.length-S+W);const oe=te-W;return this===Q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(S,W,te):Uint8Array.prototype.set.call(Q,this.subarray(W,te),S),oe},a.prototype.fill=function(Q,S,W,te){if(typeof Q=="string"){if(typeof S=="string"?(te=S,S=0,W=this.length):typeof W=="string"&&(te=W,W=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!a.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(Q.length===1){const ae=Q.charCodeAt(0);(te==="utf8"&&ae<128||te==="latin1")&&(Q=ae)}}else typeof Q=="number"?Q=Q&255:typeof Q=="boolean"&&(Q=Number(Q));if(S<0||this.length<S||this.length<W)throw new RangeError("Out of range index");if(W<=S)return this;S=S>>>0,W=W===void 0?this.length:W>>>0,Q||(Q=0);let oe;if(typeof Q=="number")for(oe=S;oe<W;++oe)this[oe]=Q;else{const ae=a.isBuffer(Q)?Q:a.from(Q,te),Se=ae.length;if(Se===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(oe=0;oe<W-S;++oe)this[oe+S]=ae[oe%Se]}return this};const he={};function Ae(G,Q,S){he[G]=class extends S{constructor(){super(),Object.defineProperty(this,"message",{value:Q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${G}]`,this.stack,delete this.name}get code(){return G}set code(te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:te,writable:!0})}toString(){return`${this.name} [${G}]: ${this.message}`}}}Ae("ERR_BUFFER_OUT_OF_BOUNDS",function(G){return G?`${G} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ae("ERR_INVALID_ARG_TYPE",function(G,Q){return`The "${G}" argument must be of type number. Received type ${typeof Q}`},TypeError),Ae("ERR_OUT_OF_RANGE",function(G,Q,S){let W=`The value of "${G}" is out of range.`,te=S;return Number.isInteger(S)&&Math.abs(S)>2**32?te=$(String(S)):typeof S=="bigint"&&(te=String(S),(S>BigInt(2)**BigInt(32)||S<-(BigInt(2)**BigInt(32)))&&(te=$(te)),te+="n"),W+=` It must be ${Q}. Received ${te}`,W},RangeError);function $(G){let Q="",S=G.length;const W=G[0]==="-"?1:0;for(;S>=W+4;S-=3)Q=`_${G.slice(S-3,S)}${Q}`;return`${G.slice(0,S)}${Q}`}function ce(G,Q,S){_e(Q,"offset"),(G[Q]===void 0||G[Q+S]===void 0)&&P(Q,G.length-(S+1))}function me(G,Q,S,W,te,oe){if(G>S||G<Q){const ae=typeof Q=="bigint"?"n":"";let Se;throw oe>3?Q===0||Q===BigInt(0)?Se=`>= 0${ae} and < 2${ae} ** ${(oe+1)*8}${ae}`:Se=`>= -(2${ae} ** ${(oe+1)*8-1}${ae}) and < 2 ** ${(oe+1)*8-1}${ae}`:Se=`>= ${Q}${ae} and <= ${S}${ae}`,new he.ERR_OUT_OF_RANGE("value",Se,G)}ce(W,te,oe)}function _e(G,Q){if(typeof G!="number")throw new he.ERR_INVALID_ARG_TYPE(Q,"number",G)}function P(G,Q,S){throw Math.floor(G)!==G?(_e(G,S),new he.ERR_OUT_OF_RANGE(S||"offset","an integer",G)):Q<0?new he.ERR_BUFFER_OUT_OF_BOUNDS:new he.ERR_OUT_OF_RANGE(S||"offset",`>= ${S?1:0} and <= ${Q}`,G)}const fe=/[^+/0-9A-Za-z-_]/g;function de(G){if(G=G.split("=")[0],G=G.trim().replace(fe,""),G.length<2)return"";for(;G.length%4!==0;)G=G+"=";return G}function ee(G,Q){Q=Q||1/0;let S;const W=G.length;let te=null;const oe=[];for(let ae=0;ae<W;++ae){if(S=G.charCodeAt(ae),S>55295&&S<57344){if(!te){if(S>56319){(Q-=3)>-1&&oe.push(239,191,189);continue}else if(ae+1===W){(Q-=3)>-1&&oe.push(239,191,189);continue}te=S;continue}if(S<56320){(Q-=3)>-1&&oe.push(239,191,189),te=S;continue}S=(te-55296<<10|S-56320)+65536}else te&&(Q-=3)>-1&&oe.push(239,191,189);if(te=null,S<128){if((Q-=1)<0)break;oe.push(S)}else if(S<2048){if((Q-=2)<0)break;oe.push(S>>6|192,S&63|128)}else if(S<65536){if((Q-=3)<0)break;oe.push(S>>12|224,S>>6&63|128,S&63|128)}else if(S<1114112){if((Q-=4)<0)break;oe.push(S>>18|240,S>>12&63|128,S>>6&63|128,S&63|128)}else throw new Error("Invalid code point")}return oe}function K(G){const Q=[];for(let S=0;S<G.length;++S)Q.push(G.charCodeAt(S)&255);return Q}function se(G,Q){let S,W,te;const oe=[];for(let ae=0;ae<G.length&&!((Q-=2)<0);++ae)S=G.charCodeAt(ae),W=S>>8,te=S%256,oe.push(te),oe.push(W);return oe}function ye(G){return e.toByteArray(de(G))}function ne(G,Q,S,W){let te;for(te=0;te<W&&!(te+S>=Q.length||te>=G.length);++te)Q[te+S]=G[te];return te}function J(G,Q){return G instanceof Q||G!=null&&G.constructor!=null&&G.constructor.name!=null&&G.constructor.name===Q.name}function Y(G){return G!==G}const ue=function(){const G="0123456789abcdef",Q=new Array(256);for(let S=0;S<16;++S){const W=S*16;for(let te=0;te<16;++te)Q[W+te]=G[S]+G[te]}return Q}();function le(G){return typeof BigInt>"u"?we:G}function we(){throw new Error("BigInt not supported")}})(v4);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var D_=function(n,e){return D_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},D_(n,e)};function Vo(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");D_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Rs(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}function Hi(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(A){return function(c){return l([A,c])}}function l(A){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=A[0]&2?i.return:A[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,A[1])).done)return s;switch(i=0,s&&(A=[A[0]&2,s.value]),A[0]){case 0:case 1:s=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,i=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!s||A[1]>s[0]&&A[1]<s[3])){t.label=A[1];break}if(A[0]===6&&t.label<s[1]){t.label=s[1],s=A;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(A);break}s[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(n,t)}catch(c){A=[6,c],i=0}finally{r=s=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}var xu=function(){function n(e,t,r,i){this.left=e,this.top=t,this.width=r,this.height=i}return n.prototype.add=function(e,t,r,i){return new n(this.left+e,this.top+t,this.width+r,this.height+i)},n.fromClientRect=function(e,t){return new n(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},n.fromDOMRectList=function(e,t){var r=Array.from(t).find(function(i){return i.width!==0});return r?new n(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),JU=function(n,e){return xu.fromClientRect(n,e.getBoundingClientRect())},ib=function(n){for(var e=[],t=0,r=n.length;t<r;){var i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},Gn=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],i=-1,s="";++i<t;){var o=n[i];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(i+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},WN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",poe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var kv=0;kv<WN.length;kv++)poe[WN.charCodeAt(kv)]=kv;var ZN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Dv=0;Dv<ZN.length;Dv++)mg[ZN.charCodeAt(Dv)]=Dv;var goe=function(n){var e=n.length*.75,t=n.length,r,i=0,s,o,a,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(A)?A:new Uint8Array(A);for(r=0;r<t;r+=4)s=mg[n.charCodeAt(r)],o=mg[n.charCodeAt(r+1)],a=mg[n.charCodeAt(r+2)],l=mg[n.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|a>>2,c[i++]=(a&3)<<6|l&63;return A},moe=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},voe=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},cu=5,HU=6+5,D1=2,yoe=HU-cu,w4=65536>>cu,woe=1<<cu,L1=woe-1,Boe=1024>>cu,Coe=w4+Boe,boe=Coe,xoe=32,Ioe=boe+xoe,Foe=65536>>HU,_oe=1<<yoe,Eoe=_oe-1,GN=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},Soe=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},Uoe=function(n,e){var t=goe(n),r=Array.isArray(t)?voe(t):new Uint32Array(t),i=Array.isArray(t)?moe(t):new Uint16Array(t),s=24,o=GN(i,s/2,r[4]/2),a=r[5]===2?GN(i,(s+r[4])/2):Soe(r,Math.ceil((s+r[4])/4));return new Qoe(r[0],r[1],r[2],r[3],o,a)},Qoe=function(){function n(e,t,r,i,s,o){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=i,this.index=s,this.data=o}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>cu],t=(t<<D1)+(e&L1),this.data[t];if(e<=65535)return t=this.index[w4+(e-55296>>cu)],t=(t<<D1)+(e&L1),this.data[t];if(e<this.highStart)return t=Ioe-Foe+(e>>HU),t=this.index[t],t+=e>>cu&Eoe,t=this.index[t],t=(t<<D1)+(e&L1),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),JN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Roe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Lv=0;Lv<JN.length;Lv++)Roe[JN.charCodeAt(Lv)]=Lv;var Moe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",HN=50,Toe=1,B4=2,C4=3,Noe=4,koe=5,zN=7,b4=8,YN=9,MA=10,L_=11,XN=12,V_=13,Doe=14,vg=15,P_=16,Vv=17,Np=18,Loe=19,jN=20,O_=21,kp=22,V1=23,gd=24,zi=25,yg=26,wg=27,md=28,Voe=29,Jc=30,Poe=31,Pv=32,Ov=33,W_=34,Z_=35,G_=36,Dm=37,J_=38,uw=39,dw=40,P1=41,x4=42,Ooe=43,Woe=[9001,65288],I4="!",St="×",Wv="÷",H_=Uoe(Moe),Ka=[Jc,G_],z_=[Toe,B4,C4,koe],F4=[MA,b4],KN=[wg,yg],Zoe=z_.concat(F4),$N=[J_,uw,dw,W_,Z_],Goe=[vg,V_],Joe=function(n,e){e===void 0&&(e="strict");var t=[],r=[],i=[];return n.forEach(function(s,o){var a=H_.get(s);if(a>HN?(i.push(!0),a-=HN):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(o),t.push(P_);if(a===Noe||a===L_){if(o===0)return r.push(o),t.push(Jc);var l=t[o-1];return Zoe.indexOf(l)===-1?(r.push(r[o-1]),t.push(l)):(r.push(o),t.push(Jc))}if(r.push(o),a===Poe)return t.push(e==="strict"?O_:Dm);if(a===x4||a===Voe)return t.push(Jc);if(a===Ooe)return s>=131072&&s<=196605||s>=196608&&s<=262141?t.push(Dm):t.push(Jc);t.push(a)}),[r,t,i]},O1=function(n,e,t,r){var i=r[t];if(Array.isArray(n)?n.indexOf(i)!==-1:n===i)for(var s=t;s<=r.length;){s++;var o=r[s];if(o===e)return!0;if(o!==MA)break}if(i===MA)for(var s=t;s>0;){s--;var a=r[s];if(Array.isArray(n)?n.indexOf(a)!==-1:n===a)for(var l=t;l<=r.length;){l++;var o=r[l];if(o===e)return!0;if(o!==MA)break}if(a!==MA)break}return!1},qN=function(n,e){for(var t=n;t>=0;){var r=e[t];if(r===MA)t--;else return r}return 0},Hoe=function(n,e,t,r,i){if(t[r]===0)return St;var s=r-1;if(Array.isArray(i)&&i[s]===!0)return St;var o=s-1,a=s+1,l=e[s],A=o>=0?e[o]:0,c=e[a];if(l===B4&&c===C4)return St;if(z_.indexOf(l)!==-1)return I4;if(z_.indexOf(c)!==-1||F4.indexOf(c)!==-1)return St;if(qN(s,e)===b4)return Wv;if(H_.get(n[s])===L_||(l===Pv||l===Ov)&&H_.get(n[a])===L_||l===zN||c===zN||l===YN||[MA,V_,vg].indexOf(l)===-1&&c===YN||[Vv,Np,Loe,gd,md].indexOf(c)!==-1||qN(s,e)===kp||O1(V1,kp,s,e)||O1([Vv,Np],O_,s,e)||O1(XN,XN,s,e))return St;if(l===MA)return Wv;if(l===V1||c===V1)return St;if(c===P_||l===P_)return Wv;if([V_,vg,O_].indexOf(c)!==-1||l===Doe||A===G_&&Goe.indexOf(l)!==-1||l===md&&c===G_||c===jN||Ka.indexOf(c)!==-1&&l===zi||Ka.indexOf(l)!==-1&&c===zi||l===wg&&[Dm,Pv,Ov].indexOf(c)!==-1||[Dm,Pv,Ov].indexOf(l)!==-1&&c===yg||Ka.indexOf(l)!==-1&&KN.indexOf(c)!==-1||KN.indexOf(l)!==-1&&Ka.indexOf(c)!==-1||[wg,yg].indexOf(l)!==-1&&(c===zi||[kp,vg].indexOf(c)!==-1&&e[a+1]===zi)||[kp,vg].indexOf(l)!==-1&&c===zi||l===zi&&[zi,md,gd].indexOf(c)!==-1)return St;if([zi,md,gd,Vv,Np].indexOf(c)!==-1)for(var u=s;u>=0;){var h=e[u];if(h===zi)return St;if([md,gd].indexOf(h)!==-1)u--;else break}if([wg,yg].indexOf(c)!==-1)for(var u=[Vv,Np].indexOf(l)!==-1?o:s;u>=0;){var h=e[u];if(h===zi)return St;if([md,gd].indexOf(h)!==-1)u--;else break}if(J_===l&&[J_,uw,W_,Z_].indexOf(c)!==-1||[uw,W_].indexOf(l)!==-1&&[uw,dw].indexOf(c)!==-1||[dw,Z_].indexOf(l)!==-1&&c===dw||$N.indexOf(l)!==-1&&[jN,yg].indexOf(c)!==-1||$N.indexOf(c)!==-1&&l===wg||Ka.indexOf(l)!==-1&&Ka.indexOf(c)!==-1||l===gd&&Ka.indexOf(c)!==-1||Ka.concat(zi).indexOf(l)!==-1&&c===kp&&Woe.indexOf(n[a])===-1||Ka.concat(zi).indexOf(c)!==-1&&l===Np)return St;if(l===P1&&c===P1){for(var d=t[s],p=1;d>0&&(d--,e[d]===P1);)p++;if(p%2!==0)return St}return l===Pv&&c===Ov?St:Wv},zoe=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=Joe(n,e.lineBreak),r=t[0],i=t[1],s=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(a){return[zi,Jc,x4].indexOf(a)!==-1?Dm:a}));var o=e.wordBreak==="keep-all"?s.map(function(a,l){return a&&n[l]>=19968&&n[l]<=40959}):void 0;return[r,i,o]},Yoe=function(){function n(e,t,r,i){this.codePoints=e,this.required=t===I4,this.start=r,this.end=i}return n.prototype.slice=function(){return Gn.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),Xoe=function(n,e){var t=ib(n),r=zoe(t,e),i=r[0],s=r[1],o=r[2],a=t.length,l=0,A=0;return{next:function(){if(A>=a)return{done:!0,value:null};for(var c=St;A<a&&(c=Hoe(t,s,i,++A,o))===St;);if(c!==St||A===a){var u=new Yoe(t,c,l,A);return l=A,{value:u,done:!1}}return{done:!0,value:null}}}},joe=1,Koe=2,w0=4,ek=8,RB=10,tk=47,Yg=92,$oe=9,qoe=32,Zv=34,Dp=61,eae=35,tae=36,nae=37,Gv=39,Jv=40,Lp=41,rae=95,_i=45,iae=33,sae=60,oae=62,aae=64,lae=91,Aae=93,cae=61,uae=123,Hv=63,dae=125,nk=124,hae=126,fae=128,rk=65533,W1=42,$c=43,pae=44,gae=58,mae=59,Lm=46,vae=0,yae=8,wae=11,Bae=14,Cae=31,bae=127,Ho=-1,_4=48,E4=97,S4=101,xae=102,Iae=117,Fae=122,U4=65,Q4=69,R4=70,_ae=85,Eae=90,Yr=function(n){return n>=_4&&n<=57},Sae=function(n){return n>=55296&&n<=57343},vd=function(n){return Yr(n)||n>=U4&&n<=R4||n>=E4&&n<=xae},Uae=function(n){return n>=E4&&n<=Fae},Qae=function(n){return n>=U4&&n<=Eae},Rae=function(n){return Uae(n)||Qae(n)},Mae=function(n){return n>=fae},zv=function(n){return n===RB||n===$oe||n===qoe},MB=function(n){return Rae(n)||Mae(n)||n===rae},ik=function(n){return MB(n)||Yr(n)||n===_i},Tae=function(n){return n>=vae&&n<=yae||n===wae||n>=Bae&&n<=Cae||n===bae},yA=function(n,e){return n!==Yg?!1:e!==RB},Yv=function(n,e,t){return n===_i?MB(e)||yA(e,t):MB(n)?!0:!!(n===Yg&&yA(n,e))},Z1=function(n,e,t){return n===$c||n===_i?Yr(e)?!0:e===Lm&&Yr(t):Yr(n===Lm?e:n)},Nae=function(n){var e=0,t=1;(n[e]===$c||n[e]===_i)&&(n[e]===_i&&(t=-1),e++);for(var r=[];Yr(n[e]);)r.push(n[e++]);var i=r.length?parseInt(Gn.apply(void 0,r),10):0;n[e]===Lm&&e++;for(var s=[];Yr(n[e]);)s.push(n[e++]);var o=s.length,a=o?parseInt(Gn.apply(void 0,s),10):0;(n[e]===Q4||n[e]===S4)&&e++;var l=1;(n[e]===$c||n[e]===_i)&&(n[e]===_i&&(l=-1),e++);for(var A=[];Yr(n[e]);)A.push(n[e++]);var c=A.length?parseInt(Gn.apply(void 0,A),10):0;return t*(i+a*Math.pow(10,-o))*Math.pow(10,l*c)},kae={type:2},Dae={type:3},Lae={type:4},Vae={type:13},Pae={type:8},Oae={type:21},Wae={type:9},Zae={type:10},Gae={type:11},Jae={type:12},Hae={type:14},Xv={type:23},zae={type:1},Yae={type:25},Xae={type:24},jae={type:26},Kae={type:27},$ae={type:28},qae={type:29},ele={type:31},Y_={type:32},M4=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(ib(e))},n.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Y_;)e.push(t),t=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Zv:return this.consumeStringToken(Zv);case eae:var t=this.peekCodePoint(0),r=this.peekCodePoint(1),i=this.peekCodePoint(2);if(ik(t)||yA(r,i)){var s=Yv(t,r,i)?Koe:joe,o=this.consumeName();return{type:5,value:o,flags:s}}break;case tae:if(this.peekCodePoint(0)===Dp)return this.consumeCodePoint(),Vae;break;case Gv:return this.consumeStringToken(Gv);case Jv:return kae;case Lp:return Dae;case W1:if(this.peekCodePoint(0)===Dp)return this.consumeCodePoint(),Hae;break;case $c:if(Z1(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case pae:return Lae;case _i:var a=e,l=this.peekCodePoint(0),A=this.peekCodePoint(1);if(Z1(a,l,A))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Yv(a,l,A))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===_i&&A===oae)return this.consumeCodePoint(),this.consumeCodePoint(),Xae;break;case Lm:if(Z1(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case tk:if(this.peekCodePoint(0)===W1)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===W1&&(c=this.consumeCodePoint(),c===tk))return this.consumeToken();if(c===Ho)return this.consumeToken()}break;case gae:return jae;case mae:return Kae;case sae:if(this.peekCodePoint(0)===iae&&this.peekCodePoint(1)===_i&&this.peekCodePoint(2)===_i)return this.consumeCodePoint(),this.consumeCodePoint(),Yae;break;case aae:var u=this.peekCodePoint(0),h=this.peekCodePoint(1),d=this.peekCodePoint(2);if(Yv(u,h,d)){var o=this.consumeName();return{type:7,value:o}}break;case lae:return $ae;case Yg:if(yA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Aae:return qae;case cae:if(this.peekCodePoint(0)===Dp)return this.consumeCodePoint(),Pae;break;case uae:return Gae;case dae:return Jae;case Iae:case _ae:var p=this.peekCodePoint(0),f=this.peekCodePoint(1);return p===$c&&(vd(f)||f===Hv)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case nk:if(this.peekCodePoint(0)===Dp)return this.consumeCodePoint(),Wae;if(this.peekCodePoint(0)===nk)return this.consumeCodePoint(),Oae;break;case hae:if(this.peekCodePoint(0)===Dp)return this.consumeCodePoint(),Zae;break;case Ho:return Y_}return zv(e)?(this.consumeWhiteSpace(),ele):Yr(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):MB(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Gn(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();vd(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var r=!1;t===Hv&&e.length<6;)e.push(t),t=this.consumeCodePoint(),r=!0;if(r){var i=parseInt(Gn.apply(void 0,e.map(function(l){return l===Hv?_4:l})),16),s=parseInt(Gn.apply(void 0,e.map(function(l){return l===Hv?R4:l})),16);return{type:30,start:i,end:s}}var o=parseInt(Gn.apply(void 0,e),16);if(this.peekCodePoint(0)===_i&&vd(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];vd(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();var s=parseInt(Gn.apply(void 0,a),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Jv?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Jv?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ho)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===Gv||t===Zv){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ho||this.peekCodePoint(0)===Lp)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Xv)}for(;;){var i=this.consumeCodePoint();if(i===Ho||i===Lp)return{type:22,value:Gn.apply(void 0,e)};if(zv(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ho||this.peekCodePoint(0)===Lp?(this.consumeCodePoint(),{type:22,value:Gn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Xv);if(i===Zv||i===Gv||i===Jv||Tae(i))return this.consumeBadUrlRemnants(),Xv;if(i===Yg)if(yA(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Xv;else e.push(i)}},n.prototype.consumeWhiteSpace=function(){for(;zv(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Lp||e===Ho)return;yA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var t=5e4,r="";e>0;){var i=Math.min(t,e);r+=Gn.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),r},n.prototype.consumeStringToken=function(e){var t="",r=0;do{var i=this._value[r];if(i===Ho||i===void 0||i===e)return t+=this.consumeStringSlice(r),{type:0,value:t};if(i===RB)return this._value.splice(0,r),zae;if(i===Yg){var s=this._value[r+1];s!==Ho&&s!==void 0&&(s===RB?(t+=this.consumeStringSlice(r),r=-1,this._value.shift()):yA(i,s)&&(t+=this.consumeStringSlice(r),t+=Gn(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},n.prototype.consumeNumber=function(){var e=[],t=w0,r=this.peekCodePoint(0);for((r===$c||r===_i)&&e.push(this.consumeCodePoint());Yr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(r===Lm&&Yr(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=ek;Yr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===Q4||r===S4)&&((i===$c||i===_i)&&Yr(s)||Yr(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=ek;Yr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Nae(e),t]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],r=e[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(Yv(i,s,o)){var a=this.consumeName();return{type:15,number:t,flags:r,unit:a}}return i===nae?(this.consumeCodePoint(),{type:16,number:t,flags:r}):{type:17,number:t,flags:r}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(vd(e)){for(var t=Gn(e);vd(this.peekCodePoint(0))&&t.length<6;)t+=Gn(this.consumeCodePoint());zv(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return r===0||Sae(r)||r>1114111?rk:r}return e===Ho?rk:e},n.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(ik(t))e+=Gn(t);else if(yA(t,this.peekCodePoint(0)))e+=Gn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},n}(),T4=function(){function n(e){this._tokens=e}return n.create=function(e){var t=new M4;return t.write(e),new n(t.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||tle(r,e))return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue()),r=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Y_:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),B0=function(n){return n.type===15},sb=function(n){return n.type===17},On=function(n){return n.type===20},X_=function(n,e){return On(n)&&n.value===e},ob=function(n){return n.type!==31&&n.type!==4},Va=function(n){var e=[],t=[];return n.forEach(function(r){if(r.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}r.type!==31&&t.push(r)}),t.length&&e.push(t),e},tle=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},lc=function(n){return n.type===17||n.type===15},rr=function(n){return n.type===16||lc(n)},N4=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},Dr={type:17,number:0,flags:w0},zU={type:16,number:50,flags:w0},TA={type:16,number:100,flags:w0},Bg=function(n,e,t){var r=n[0],i=n[1];return[dn(r,e),dn(typeof i<"u"?i:r,t)]},dn=function(n,e){if(n.type===16)return n.number/100*e;if(B0(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},k4="deg",D4="grad",L4="rad",V4="turn",ab={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case k4:return Math.PI*e.number/180;case D4:return Math.PI/200*e.number;case L4:return e.number;case V4:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},P4=function(n){return n.type===15&&(n.unit===k4||n.unit===D4||n.unit===L4||n.unit===V4)},O4=function(n){var e=n.filter(On).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Dr,Dr];case"to top":case"bottom":return zs(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Dr,TA];case"to right":case"left":return zs(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[TA,TA];case"to bottom":case"top":return zs(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[TA,Dr];case"to left":case"right":return zs(270)}return 0},zs=function(n){return Math.PI*n/180},jA={name:"color",parse:function(n,e){if(e.type===18){var t=nle[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(n,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3);return NA(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3),o=e.value.substring(3,4);return NA(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6);return NA(parseInt(r,16),parseInt(i,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6),o=e.value.substring(6,8);return NA(parseInt(r,16),parseInt(i,16),parseInt(s,16),parseInt(o,16)/255)}}if(e.type===20){var a=Vm[e.value.toUpperCase()];if(typeof a<"u")return a}return Vm.TRANSPARENT}},Jh=function(n){return(255&n)===0},Br=function(n){var e=255&n,t=255&n>>8,r=255&n>>16,i=255&n>>24;return e<255?"rgba("+i+","+r+","+t+","+e/255+")":"rgb("+i+","+r+","+t+")"},NA=function(n,e,t,r){return(n<<24|e<<16|t<<8|Math.round(r*255)<<0)>>>0},sk=function(n,e){if(n.type===17)return n.number;if(n.type===16){var t=e===3?1:255;return e===3?n.number/100*t:Math.round(n.number/100*t)}return 0},ok=function(n,e){var t=e.filter(ob);if(t.length===3){var r=t.map(sk),i=r[0],s=r[1],o=r[2];return NA(i,s,o,1)}if(t.length===4){var a=t.map(sk),i=a[0],s=a[1],o=a[2],l=a[3];return NA(i,s,o,l)}return 0};function G1(n,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-n)*t*6+n:t<1/2?e:t<2/3?(e-n)*6*(2/3-t)+n:n}var ak=function(n,e){var t=e.filter(ob),r=t[0],i=t[1],s=t[2],o=t[3],a=(r.type===17?zs(r.number):ab.parse(n,r))/(Math.PI*2),l=rr(i)?i.number/100:0,A=rr(s)?s.number/100:0,c=typeof o<"u"&&rr(o)?dn(o,1):1;if(l===0)return NA(A*255,A*255,A*255,1);var u=A<=.5?A*(l+1):A+l-A*l,h=A*2-u,d=G1(h,u,a+1/3),p=G1(h,u,a),f=G1(h,u,a-1/3);return NA(d*255,p*255,f*255,c)},nle={hsl:ak,hsla:ak,rgb:ok,rgba:ok},lk=function(n,e){return jA.parse(n,T4.create(e).parseComponentValue())},Vm={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},rle={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(On(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ile={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},lb=function(n,e){var t=jA.parse(n,e[0]),r=e[1];return r&&rr(r)?{color:t,stop:r}:{color:t,stop:null}},Ak=function(n,e){var t=n[0],r=n[n.length-1];t.stop===null&&(t.stop=Dr),r.stop===null&&(r.stop=TA);for(var i=[],s=0,o=0;o<n.length;o++){var a=n[o].stop;if(a!==null){var l=dn(a,e);l>s?i.push(l):i.push(s),s=l}else i.push(null)}for(var A=null,o=0;o<i.length;o++){var c=i[o];if(c===null)A===null&&(A=o);else if(A!==null){for(var u=o-A,h=i[A-1],d=(c-h)/(u+1),p=1;p<=u;p++)i[A+p-1]=d*p;A=null}}return n.map(function(f,m){var g=f.color;return{color:g,stop:Math.max(Math.min(1,i[m]/e),0)}})},sle=function(n,e,t){var r=e/2,i=t/2,s=dn(n[0],e)-r,o=i-dn(n[1],t);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},ole=function(n,e,t){var r=typeof n=="number"?n:sle(n,e,t),i=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),s=e/2,o=t/2,a=i/2,l=Math.sin(r-Math.PI/2)*a,A=Math.cos(r-Math.PI/2)*a;return[i,s-A,s+A,o-l,o+l]},Co=function(n,e){return Math.sqrt(n*n+e*e)},ck=function(n,e,t,r,i){var s=[[0,0],[0,e],[n,0],[n,e]];return s.reduce(function(o,a){var l=a[0],A=a[1],c=Co(t-l,r-A);return(i?c<o.optimumDistance:c>o.optimumDistance)?{optimumCorner:a,optimumDistance:c}:o},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},ale=function(n,e,t,r,i){var s=0,o=0;switch(n.size){case 0:n.shape===0?s=o=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-i)):n.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),o=Math.min(Math.abs(t),Math.abs(t-i)));break;case 2:if(n.shape===0)s=o=Math.min(Co(e,t),Co(e,t-i),Co(e-r,t),Co(e-r,t-i));else if(n.shape===1){var a=Math.min(Math.abs(t),Math.abs(t-i))/Math.min(Math.abs(e),Math.abs(e-r)),l=ck(r,i,e,t,!0),A=l[0],c=l[1];s=Co(A-e,(c-t)/a),o=a*s}break;case 1:n.shape===0?s=o=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-i)):n.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),o=Math.max(Math.abs(t),Math.abs(t-i)));break;case 3:if(n.shape===0)s=o=Math.max(Co(e,t),Co(e,t-i),Co(e-r,t),Co(e-r,t-i));else if(n.shape===1){var a=Math.max(Math.abs(t),Math.abs(t-i))/Math.max(Math.abs(e),Math.abs(e-r)),u=ck(r,i,e,t,!1),A=u[0],c=u[1];s=Co(A-e,(c-t)/a),o=a*s}break}return Array.isArray(n.size)&&(s=dn(n.size[0],r),o=n.size.length===2?dn(n.size[1],i):s),[s,o]},lle=function(n,e){var t=zs(180),r=[];return Va(e).forEach(function(i,s){if(s===0){var o=i[0];if(o.type===20&&o.value==="to"){t=O4(i);return}else if(P4(o)){t=ab.parse(n,o);return}}var a=lb(n,i);r.push(a)}),{angle:t,stops:r,type:1}},jv=function(n,e){var t=zs(180),r=[];return Va(e).forEach(function(i,s){if(s===0){var o=i[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){t=O4(i);return}else if(P4(o)){t=(ab.parse(n,o)+zs(270))%zs(360);return}}var a=lb(n,i);r.push(a)}),{angle:t,stops:r,type:1}},Ale=function(n,e){var t=zs(180),r=[],i=1,s=0,o=3,a=[];return Va(e).forEach(function(l,A){var c=l[0];if(A===0){if(On(c)&&c.value==="linear"){i=1;return}else if(On(c)&&c.value==="radial"){i=2;return}}if(c.type===18){if(c.name==="from"){var u=jA.parse(n,c.values[0]);r.push({stop:Dr,color:u})}else if(c.name==="to"){var u=jA.parse(n,c.values[0]);r.push({stop:TA,color:u})}else if(c.name==="color-stop"){var h=c.values.filter(ob);if(h.length===2){var u=jA.parse(n,h[1]),d=h[0];sb(d)&&r.push({stop:{type:16,number:d.number*100,flags:d.flags},color:u})}}}}),i===1?{angle:(t+zs(180))%zs(360),stops:r,type:i}:{size:o,shape:s,stops:r,position:a,type:i}},W4="closest-side",Z4="farthest-side",G4="closest-corner",J4="farthest-corner",H4="circle",z4="ellipse",Y4="cover",X4="contain",cle=function(n,e){var t=0,r=3,i=[],s=[];return Va(e).forEach(function(o,a){var l=!0;if(a===0){var A=!1;l=o.reduce(function(u,h){if(A)if(On(h))switch(h.value){case"center":return s.push(zU),u;case"top":case"left":return s.push(Dr),u;case"right":case"bottom":return s.push(TA),u}else(rr(h)||lc(h))&&s.push(h);else if(On(h))switch(h.value){case H4:return t=0,!1;case z4:return t=1,!1;case"at":return A=!0,!1;case W4:return r=0,!1;case Y4:case Z4:return r=1,!1;case X4:case G4:return r=2,!1;case J4:return r=3,!1}else if(lc(h)||rr(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return u},l)}if(l){var c=lb(n,o);i.push(c)}}),{size:r,shape:t,stops:i,position:s,type:2}},Kv=function(n,e){var t=0,r=3,i=[],s=[];return Va(e).forEach(function(o,a){var l=!0;if(a===0?l=o.reduce(function(c,u){if(On(u))switch(u.value){case"center":return s.push(zU),!1;case"top":case"left":return s.push(Dr),!1;case"right":case"bottom":return s.push(TA),!1}else if(rr(u)||lc(u))return s.push(u),!1;return c},l):a===1&&(l=o.reduce(function(c,u){if(On(u))switch(u.value){case H4:return t=0,!1;case z4:return t=1,!1;case X4:case W4:return r=0,!1;case Z4:return r=1,!1;case G4:return r=2,!1;case Y4:case J4:return r=3,!1}else if(lc(u)||rr(u))return Array.isArray(r)||(r=[]),r.push(u),!1;return c},l)),l){var A=lb(n,o);i.push(A)}}),{size:r,shape:t,stops:i,position:s,type:2}},ule=function(n){return n.type===1},dle=function(n){return n.type===2},YU={name:"image",parse:function(n,e){if(e.type===22){var t={url:e.value,type:0};return n.cache.addImage(e.value),t}if(e.type===18){var r=j4[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(n,e.values)}throw new Error("Unsupported image type "+e.type)}};function hle(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!j4[n.name])}var j4={"linear-gradient":lle,"-moz-linear-gradient":jv,"-ms-linear-gradient":jv,"-o-linear-gradient":jv,"-webkit-linear-gradient":jv,"radial-gradient":cle,"-moz-radial-gradient":Kv,"-ms-radial-gradient":Kv,"-o-radial-gradient":Kv,"-webkit-radial-gradient":Kv,"-webkit-gradient":Ale},fle={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(r){return ob(r)&&hle(r)}).map(function(r){return YU.parse(n,r)})}},ple={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(On(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},gle={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return Va(e).map(function(t){return t.filter(rr)}).map(N4)}},mle={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return Va(e).map(function(t){return t.filter(On).map(function(r){return r.value}).join(" ")}).map(vle)}},vle=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Hh;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(Hh||(Hh={}));var yle={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return Va(e).map(function(t){return t.filter(wle)})}},wle=function(n){return On(n)||rr(n)},Ab=function(n){return{name:"border-"+n+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Ble=Ab("top"),Cle=Ab("right"),ble=Ab("bottom"),xle=Ab("left"),cb=function(n){return{name:"border-radius-"+n,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return N4(t.filter(rr))}}},Ile=cb("top-left"),Fle=cb("top-right"),_le=cb("bottom-right"),Ele=cb("bottom-left"),ub=function(n){return{name:"border-"+n+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Sle=ub("top"),Ule=ub("right"),Qle=ub("bottom"),Rle=ub("left"),db=function(n){return{name:"border-"+n+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return B0(t)?t.number:0}}},Mle=db("top"),Tle=db("right"),Nle=db("bottom"),kle=db("left"),Dle={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Lle={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Vle={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(On).reduce(function(t,r){return t|Ple(r.value)},0)}},Ple=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Ole={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Wle={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},TB;(function(n){n.NORMAL="normal",n.STRICT="strict"})(TB||(TB={}));var Zle={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return TB.STRICT;case"normal":default:return TB.NORMAL}}},Gle={name:"line-height",initialValue:"normal",prefix:!1,type:4},uk=function(n,e){return On(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:rr(n)?dn(n,e):e},Jle={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:YU.parse(n,e)}},Hle={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},zle={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},hb=function(n){return{name:"margin-"+n,initialValue:"0",prefix:!1,type:4}},Yle=hb("top"),Xle=hb("right"),jle=hb("bottom"),Kle=hb("left"),$le={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(On).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},qle={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},fb=function(n){return{name:"padding-"+n,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},eAe=fb("top"),tAe=fb("right"),nAe=fb("bottom"),rAe=fb("left"),iAe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},sAe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},oAe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&X_(e[0],"none")?[]:Va(e).map(function(t){for(var r={color:Vm.TRANSPARENT,offsetX:Dr,offsetY:Dr,blur:Dr},i=0,s=0;s<t.length;s++){var o=t[s];lc(o)?(i===0?r.offsetX=o:i===1?r.offsetY=o:r.blur=o,i++):r.color=jA.parse(n,o)}return r})}},aAe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},lAe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=uAe[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},AAe=function(n){var e=n.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},cAe=function(n){var e=n.filter(function(l){return l.type===17}).map(function(l){return l.number}),t=e[0],r=e[1];e[2],e[3];var i=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],a=e[13];return e[14],e[15],e.length===16?[t,r,i,s,o,a]:null},uAe={matrix:AAe,matrix3d:cAe},dk={type:16,number:50,flags:w0},dAe=[dk,dk],hAe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var t=e.filter(rr);return t.length!==2?dAe:[t[0],t[1]]}},fAe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Xg;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(Xg||(Xg={}));var pAe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return Xg.BREAK_ALL;case"keep-all":return Xg.KEEP_ALL;case"normal":default:return Xg.NORMAL}}},gAe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if(sb(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},K4={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},mAe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return sb(e)?e.number:1}},vAe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},yAe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(On).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},wAe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var t=[],r=[];return e.forEach(function(i){switch(i.type){case 20:case 0:t.push(i.value);break;case 17:t.push(i.number.toString());break;case 4:r.push(t.join(" ")),t.length=0;break}}),t.length&&r.push(t.join(" ")),r.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},BAe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},CAe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if(sb(e))return e.number;if(On(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},bAe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(On).map(function(t){return t.value})}},xAe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},gr=function(n,e){return(n&e)!==0},IAe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(B0).map(function(t){return K4.parse(n,t)})}},FAe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&X_(e[0],"none")?[]:Va(e).map(function(t){for(var r={color:255,offsetX:Dr,offsetY:Dr,blur:Dr,spread:Dr,inset:!1},i=0,s=0;s<t.length;s++){var o=t[s];X_(o,"inset")?r.inset=!0:lc(o)?(i===0?r.offsetX=o:i===1?r.offsetY=o:i===2?r.blur=o:r.spread=o,i++):r.color=jA.parse(n,o)}return r})}},_Ae={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var t=[0,1,2],r=[];return e.filter(On).forEach(function(i){switch(i.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),t.forEach(function(i){r.indexOf(i)===-1&&r.push(i)}),r}},EAe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},SAe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return B0(e)?e.number:0}},UAe=function(){function n(e,t){var r,i;this.animationDuration=Ke(e,IAe,t.animationDuration),this.backgroundClip=Ke(e,rle,t.backgroundClip),this.backgroundColor=Ke(e,ile,t.backgroundColor),this.backgroundImage=Ke(e,fle,t.backgroundImage),this.backgroundOrigin=Ke(e,ple,t.backgroundOrigin),this.backgroundPosition=Ke(e,gle,t.backgroundPosition),this.backgroundRepeat=Ke(e,mle,t.backgroundRepeat),this.backgroundSize=Ke(e,yle,t.backgroundSize),this.borderTopColor=Ke(e,Ble,t.borderTopColor),this.borderRightColor=Ke(e,Cle,t.borderRightColor),this.borderBottomColor=Ke(e,ble,t.borderBottomColor),this.borderLeftColor=Ke(e,xle,t.borderLeftColor),this.borderTopLeftRadius=Ke(e,Ile,t.borderTopLeftRadius),this.borderTopRightRadius=Ke(e,Fle,t.borderTopRightRadius),this.borderBottomRightRadius=Ke(e,_le,t.borderBottomRightRadius),this.borderBottomLeftRadius=Ke(e,Ele,t.borderBottomLeftRadius),this.borderTopStyle=Ke(e,Sle,t.borderTopStyle),this.borderRightStyle=Ke(e,Ule,t.borderRightStyle),this.borderBottomStyle=Ke(e,Qle,t.borderBottomStyle),this.borderLeftStyle=Ke(e,Rle,t.borderLeftStyle),this.borderTopWidth=Ke(e,Mle,t.borderTopWidth),this.borderRightWidth=Ke(e,Tle,t.borderRightWidth),this.borderBottomWidth=Ke(e,Nle,t.borderBottomWidth),this.borderLeftWidth=Ke(e,kle,t.borderLeftWidth),this.boxShadow=Ke(e,FAe,t.boxShadow),this.color=Ke(e,Dle,t.color),this.direction=Ke(e,Lle,t.direction),this.display=Ke(e,Vle,t.display),this.float=Ke(e,Ole,t.cssFloat),this.fontFamily=Ke(e,wAe,t.fontFamily),this.fontSize=Ke(e,BAe,t.fontSize),this.fontStyle=Ke(e,xAe,t.fontStyle),this.fontVariant=Ke(e,bAe,t.fontVariant),this.fontWeight=Ke(e,CAe,t.fontWeight),this.letterSpacing=Ke(e,Wle,t.letterSpacing),this.lineBreak=Ke(e,Zle,t.lineBreak),this.lineHeight=Ke(e,Gle,t.lineHeight),this.listStyleImage=Ke(e,Jle,t.listStyleImage),this.listStylePosition=Ke(e,Hle,t.listStylePosition),this.listStyleType=Ke(e,zle,t.listStyleType),this.marginTop=Ke(e,Yle,t.marginTop),this.marginRight=Ke(e,Xle,t.marginRight),this.marginBottom=Ke(e,jle,t.marginBottom),this.marginLeft=Ke(e,Kle,t.marginLeft),this.opacity=Ke(e,mAe,t.opacity);var s=Ke(e,$le,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Ke(e,qle,t.overflowWrap),this.paddingTop=Ke(e,eAe,t.paddingTop),this.paddingRight=Ke(e,tAe,t.paddingRight),this.paddingBottom=Ke(e,nAe,t.paddingBottom),this.paddingLeft=Ke(e,rAe,t.paddingLeft),this.paintOrder=Ke(e,_Ae,t.paintOrder),this.position=Ke(e,sAe,t.position),this.textAlign=Ke(e,iAe,t.textAlign),this.textDecorationColor=Ke(e,vAe,(r=t.textDecorationColor)!==null&&r!==void 0?r:t.color),this.textDecorationLine=Ke(e,yAe,(i=t.textDecorationLine)!==null&&i!==void 0?i:t.textDecoration),this.textShadow=Ke(e,oAe,t.textShadow),this.textTransform=Ke(e,aAe,t.textTransform),this.transform=Ke(e,lAe,t.transform),this.transformOrigin=Ke(e,hAe,t.transformOrigin),this.visibility=Ke(e,fAe,t.visibility),this.webkitTextStrokeColor=Ke(e,EAe,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ke(e,SAe,t.webkitTextStrokeWidth),this.wordBreak=Ke(e,pAe,t.wordBreak),this.zIndex=Ke(e,gAe,t.zIndex)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return Jh(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return gr(this.display,4)||gr(this.display,33554432)||gr(this.display,268435456)||gr(this.display,536870912)||gr(this.display,67108864)||gr(this.display,134217728)},n}(),Ke=function(n,e,t){var r=new M4,i=t!==null&&typeof t<"u"?t.toString():e.initialValue;r.write(i);var s=new T4(r.read());switch(e.type){case 2:var o=s.parseComponentValue();return e.parse(n,On(o)?o.value:e.initialValue);case 0:return e.parse(n,s.parseComponentValue());case 1:return e.parse(n,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return ab.parse(n,s.parseComponentValue());case"color":return jA.parse(n,s.parseComponentValue());case"image":return YU.parse(n,s.parseComponentValue());case"length":var a=s.parseComponentValue();return lc(a)?a:Dr;case"length-percentage":var l=s.parseComponentValue();return rr(l)?l:Dr;case"time":return K4.parse(n,s.parseComponentValue())}break}},QAe="data-html2canvas-debug",RAe=function(n){var e=n.getAttribute(QAe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},hk=function(n,e){var t=RAe(n);return t===1||e===t},Pa=function(){function n(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,hk(t,3))debugger;this.styles=new UAe(e,window.getComputedStyle(t,null)),Rce(t)&&(this.styles.animationDuration.some(function(r){return r>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=JU(this.context,t),hk(t,4)&&(this.flags|=16)}return n}(),MAe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",fk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $v=0;$v<fk.length;$v++)Cg[fk.charCodeAt($v)]=$v;var TAe=function(n){var e=n.length*.75,t=n.length,r,i=0,s,o,a,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(A)?A:new Uint8Array(A);for(r=0;r<t;r+=4)s=Cg[n.charCodeAt(r)],o=Cg[n.charCodeAt(r+1)],a=Cg[n.charCodeAt(r+2)],l=Cg[n.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|a>>2,c[i++]=(a&3)<<6|l&63;return A},NAe=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},kAe=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},uu=5,XU=6+5,J1=2,DAe=XU-uu,$4=65536>>uu,LAe=1<<uu,H1=LAe-1,VAe=1024>>uu,PAe=$4+VAe,OAe=PAe,WAe=32,ZAe=OAe+WAe,GAe=65536>>XU,JAe=1<<DAe,HAe=JAe-1,pk=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},zAe=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},YAe=function(n,e){var t=TAe(n),r=Array.isArray(t)?kAe(t):new Uint32Array(t),i=Array.isArray(t)?NAe(t):new Uint16Array(t),s=24,o=pk(i,s/2,r[4]/2),a=r[5]===2?pk(i,(s+r[4])/2):zAe(r,Math.ceil((s+r[4])/4));return new XAe(r[0],r[1],r[2],r[3],o,a)},XAe=function(){function n(e,t,r,i,s,o){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=i,this.index=s,this.data=o}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>uu],t=(t<<J1)+(e&H1),this.data[t];if(e<=65535)return t=this.index[$4+(e-55296>>uu)],t=(t<<J1)+(e&H1),this.data[t];if(e<this.highStart)return t=ZAe-GAe+(e>>XU),t=this.index[t],t+=e>>uu&HAe,t=this.index[t],t=(t<<J1)+(e&H1),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),gk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jAe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qv=0;qv<gk.length;qv++)jAe[gk.charCodeAt(qv)]=qv;var KAe=1,z1=2,Y1=3,mk=4,vk=5,$Ae=7,yk=8,X1=9,j1=10,wk=11,Bk=12,Ck=13,bk=14,K1=15,qAe=function(n){for(var e=[],t=0,r=n.length;t<r;){var i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},ece=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],i=-1,s="";++i<t;){var o=n[i];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(i+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},tce=YAe(MAe),Ds="×",$1="÷",nce=function(n){return tce.get(n)},rce=function(n,e,t){var r=t-2,i=e[r],s=e[t-1],o=e[t];if(s===z1&&o===Y1)return Ds;if(s===z1||s===Y1||s===mk||o===z1||o===Y1||o===mk)return $1;if(s===yk&&[yk,X1,wk,Bk].indexOf(o)!==-1||(s===wk||s===X1)&&(o===X1||o===j1)||(s===Bk||s===j1)&&o===j1||o===Ck||o===vk||o===$Ae||s===KAe)return Ds;if(s===Ck&&o===bk){for(;i===vk;)i=e[--r];if(i===bk)return Ds}if(s===K1&&o===K1){for(var a=0;i===K1;)a++,i=e[--r];if(a%2===0)return Ds}return $1},ice=function(n){var e=qAe(n),t=e.length,r=0,i=0,s=e.map(nce);return{next:function(){if(r>=t)return{done:!0,value:null};for(var o=Ds;r<t&&(o=rce(e,s,++r))===Ds;);if(o!==Ds||r===t){var a=ece.apply(null,e.slice(i,r));return i=r,{value:a,done:!1}}return{done:!0,value:null}}}},sce=function(n){for(var e=ice(n),t=[],r;!(r=e.next()).done;)r.value&&t.push(r.value.slice());return t},oce=function(n){var e=123;if(n.createRange){var t=n.createRange();if(t.getBoundingClientRect){var r=n.createElement("boundtest");r.style.height=e+"px",r.style.display="block",n.body.appendChild(r),t.selectNode(r);var i=t.getBoundingClientRect(),s=Math.round(i.height);if(n.body.removeChild(r),s===e)return!0}}return!1},ace=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var t=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,i=ib(r.data).map(function(l){return Gn(l)}),s=0,o={},a=i.every(function(l,A){t.setStart(r,s),t.setEnd(r,s+l.length);var c=t.getBoundingClientRect();s+=l.length;var u=c.x>o.x||c.y>o.y;return o=c,A===0?!0:u});return n.body.removeChild(e),a},lce=function(){return typeof new Image().crossOrigin<"u"},Ace=function(){return typeof new XMLHttpRequest().responseType=="string"},cce=function(n){var e=new Image,t=n.createElement("canvas"),r=t.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},xk=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},uce=function(n){var e=n.createElement("canvas"),t=100;e.width=t,e.height=t;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,t,t);var i=new Image,s=e.toDataURL();i.src=s;var o=j_(t,t,0,0,i);return r.fillStyle="red",r.fillRect(0,0,t,t),Ik(o).then(function(a){r.drawImage(a,0,0);var l=r.getImageData(0,0,t,t).data;r.fillStyle="red",r.fillRect(0,0,t,t);var A=n.createElement("div");return A.style.backgroundImage="url("+s+")",A.style.height=t+"px",xk(l)?Ik(j_(t,t,0,0,A)):Promise.reject(!1)}).then(function(a){return r.drawImage(a,0,0),xk(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})},j_=function(n,e,t,r,i){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",n.toString()),o.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(a),a.appendChild(i),o},Ik=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},Ki={get SUPPORT_RANGE_BOUNDS(){var n=oce(document);return Object.defineProperty(Ki,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=Ki.SUPPORT_RANGE_BOUNDS&&ace(document);return Object.defineProperty(Ki,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=cce(document);return Object.defineProperty(Ki,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?uce(document):Promise.resolve(!1);return Object.defineProperty(Ki,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=lce();return Object.defineProperty(Ki,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=Ace();return Object.defineProperty(Ki,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ki,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ki,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},jg=function(){function n(e,t){this.text=e,this.bounds=t}return n}(),dce=function(n,e,t,r){var i=pce(e,t),s=[],o=0;return i.forEach(function(a){if(t.textDecorationLine.length||a.trim().length>0)if(Ki.SUPPORT_RANGE_BOUNDS){var l=Fk(r,o,a.length).getClientRects();if(l.length>1){var A=jU(a),c=0;A.forEach(function(h){s.push(new jg(h,xu.fromDOMRectList(n,Fk(r,c+o,h.length).getClientRects()))),c+=h.length})}else s.push(new jg(a,xu.fromDOMRectList(n,l)))}else{var u=r.splitText(a.length);s.push(new jg(a,hce(n,r))),r=u}else Ki.SUPPORT_RANGE_BOUNDS||(r=r.splitText(a.length));o+=a.length}),s},hce=function(n,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(r,e);var s=JU(n,r);return r.firstChild&&i.replaceChild(r.firstChild,r),s}}return xu.EMPTY},Fk=function(n,e,t){var r=n.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(n,e),i.setEnd(n,e+t),i},jU=function(n){if(Ki.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(t){return t.segment})}return sce(n)},fce=function(n,e){if(Ki.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(n)).map(function(r){return r.segment})}return mce(n,e)},pce=function(n,e){return e.letterSpacing!==0?jU(n):fce(n,e)},gce=[32,160,4961,65792,65793,4153,4241],mce=function(n,e){for(var t=Xoe(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],i,s=function(){if(i.value){var o=i.value.slice(),a=ib(o),l="";a.forEach(function(A){gce.indexOf(A)===-1?l+=Gn(A):(l.length&&r.push(l),r.push(Gn(A)),l="")}),l.length&&r.push(l)}};!(i=t.next()).done;)s();return r},vce=function(){function n(e,t,r){this.text=yce(t.data,r.textTransform),this.textBounds=dce(e,this.text,r,t)}return n}(),yce=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(wce,Bce);case 2:return n.toUpperCase();default:return n}},wce=/(^|\s|:|-|\(|\))([a-z])/g,Bce=function(n,e,t){return n.length>0?e+t.toUpperCase():n},q4=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.src=r.currentSrc||r.src,i.intrinsicWidth=r.naturalWidth,i.intrinsicHeight=r.naturalHeight,i.context.cache.addImage(i.src),i}return e}(Pa),eJ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.canvas=r,i.intrinsicWidth=r.width,i.intrinsicHeight=r.height,i}return e}(Pa),tJ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this,s=new XMLSerializer,o=JU(t,r);return r.setAttribute("width",o.width+"px"),r.setAttribute("height",o.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),i.intrinsicWidth=r.width.baseVal.value,i.intrinsicHeight=r.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e}(Pa),nJ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.value=r.value,i}return e}(Pa),K_=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.start=r.start,i.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,i}return e}(Pa),Cce=[{type:15,flags:0,unit:"px",number:3}],bce=[{type:16,flags:0,number:50}],xce=function(n){return n.width>n.height?new xu(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new xu(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},Ice=function(n){var e=n.type===Fce?new Array(n.value.length+1).join("•"):n.value;return e.length===0?n.placeholder||"":e},NB="checkbox",kB="radio",Fce="password",_k=707406591,KU=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;switch(i.type=r.type.toLowerCase(),i.checked=r.checked,i.value=Ice(r),(i.type===NB||i.type===kB)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=xce(i.bounds)),i.type){case NB:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Cce;break;case kB:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=bce;break}return i}return e}(Pa),rJ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this,s=r.options[r.selectedIndex||0];return i.value=s&&s.text||"",i}return e}(Pa),iJ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.value=r.value,i}return e}(Pa),sJ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;i.src=r.src,i.width=parseInt(r.width,10)||0,i.height=parseInt(r.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){i.tree=Ece(t,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?lk(t,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Vm.TRANSPARENT,o=r.contentWindow.document.body?lk(t,getComputedStyle(r.contentWindow.document.body).backgroundColor):Vm.TRANSPARENT;i.backgroundColor=Jh(s)?Jh(o)?i.styles.backgroundColor:o:s}}catch{}return i}return e}(Pa),_ce=["OL","UL","MENU"],hw=function(n,e,t,r){for(var i=e.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,Qce(i)&&i.data.trim().length>0)t.textNodes.push(new vce(n,i,t.styles));else if(aJ(i))if(Oce(i)&&i.assignedNodes)i.assignedNodes().forEach(function(a){return hw(n,a,t,r)});else{var o=oJ(n,i);o.styles.isVisible()&&(Sce(i,o,r)?o.flags|=4:Uce(o.styles)&&(o.flags|=2),_ce.indexOf(i.tagName)!==-1&&(o.flags|=8),t.elements.push(o),i.slot,i.shadowRoot?hw(n,i.shadowRoot,o,r):!AJ(i)&&!lJ(i)&&!cJ(i)&&hw(n,i,o,r))}},oJ=function(n,e){return Vce(e)?new q4(n,e):Lce(e)?new eJ(n,e):lJ(e)?new tJ(n,e):Tce(e)?new nJ(n,e):Nce(e)?new K_(n,e):kce(e)?new KU(n,e):cJ(e)?new rJ(n,e):AJ(e)?new iJ(n,e):Pce(e)?new sJ(n,e):new Pa(n,e)},Ece=function(n,e){var t=oJ(n,e);return t.flags|=4,hw(n,e,t,t),t},Sce=function(n,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Dce(n)&&t.styles.isTransparent()},Uce=function(n){return n.isPositioned()||n.isFloating()},Qce=function(n){return n.nodeType===Node.TEXT_NODE},aJ=function(n){return n.nodeType===Node.ELEMENT_NODE},Rce=function(n){return aJ(n)&&typeof n.style<"u"&&!Mce(n)},Mce=function(n){return typeof n.className=="object"},Tce=function(n){return n.tagName==="LI"},Nce=function(n){return n.tagName==="OL"},kce=function(n){return n.tagName==="INPUT"},lJ=function(n){return n.tagName==="svg"},Dce=function(n){return n.tagName==="BODY"},Lce=function(n){return n.tagName==="CANVAS"},Vce=function(n){return n.tagName==="IMG"},Pce=function(n){return n.tagName==="IFRAME"},AJ=function(n){return n.tagName==="TEXTAREA"},cJ=function(n){return n.tagName==="SELECT"},Oce=function(n){return n.tagName==="SLOT"},Ek={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Sk={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Wce={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Zce={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},yd=function(n,e,t,r,i,s){return n<e||n>t?$U(n,i,s.length>0):r.integers.reduce(function(o,a,l){for(;n>=a;)n-=a,o+=r.values[l];return o},"")+s},uJ=function(n,e,t,r){var i="";do t||n--,i=r(n)+i,n/=e;while(n*e>=e);return i},Wn=function(n,e,t,r,i){var s=t-e+1;return(n<0?"-":"")+(uJ(Math.abs(n),s,r,function(o){return Gn(Math.floor(o%s)+e)})+i)},Sc=function(n,e,t){t===void 0&&(t=". ");var r=e.length;return uJ(Math.abs(n),r,!1,function(i){return e[Math.floor(i%r)]})+t},Ld=1,pA=2,gA=4,bg=8,$a=function(n,e,t,r,i,s){if(n<-9999||n>9999)return $U(n,4,i.length>0);var o=Math.abs(n),a=i;if(o===0)return e[0]+a;for(var l=0;o>0&&l<=4;l++){var A=o%10;A===0&&gr(s,Ld)&&a!==""?a=e[A]+a:A>1||A===1&&l===0||A===1&&l===1&&gr(s,pA)||A===1&&l===1&&gr(s,gA)&&n>100||A===1&&l>1&&gr(s,bg)?a=e[A]+(l>0?t[l-1]:"")+a:A===1&&l>0&&(a=t[l-1]+a),o=Math.floor(o/10)}return(n<0?r:"")+a},Uk="十百千萬",Qk="拾佰仟萬",Rk="マイナス",q1="마이너스",$U=function(n,e,t){var r=t?". ":"",i=t?"、":"",s=t?", ":"",o=t?" ":"";switch(e){case 0:return"•"+o;case 1:return"◦"+o;case 2:return"◾"+o;case 5:var a=Wn(n,48,57,!0,r);return a.length<4?"0"+a:a;case 4:return Sc(n,"〇一二三四五六七八九",i);case 6:return yd(n,1,3999,Ek,3,r).toLowerCase();case 7:return yd(n,1,3999,Ek,3,r);case 8:return Wn(n,945,969,!1,r);case 9:return Wn(n,97,122,!1,r);case 10:return Wn(n,65,90,!1,r);case 11:return Wn(n,1632,1641,!0,r);case 12:case 49:return yd(n,1,9999,Sk,3,r);case 35:return yd(n,1,9999,Sk,3,r).toLowerCase();case 13:return Wn(n,2534,2543,!0,r);case 14:case 30:return Wn(n,6112,6121,!0,r);case 15:return Sc(n,"子丑寅卯辰巳午未申酉戌亥",i);case 16:return Sc(n,"甲乙丙丁戊己庚辛壬癸",i);case 17:case 48:return $a(n,"零一二三四五六七八九",Uk,"負",i,pA|gA|bg);case 47:return $a(n,"零壹貳參肆伍陸柒捌玖",Qk,"負",i,Ld|pA|gA|bg);case 42:return $a(n,"零一二三四五六七八九",Uk,"负",i,pA|gA|bg);case 41:return $a(n,"零壹贰叁肆伍陆柒捌玖",Qk,"负",i,Ld|pA|gA|bg);case 26:return $a(n,"〇一二三四五六七八九","十百千万",Rk,i,0);case 25:return $a(n,"零壱弐参四伍六七八九","拾百千万",Rk,i,Ld|pA|gA);case 31:return $a(n,"영일이삼사오육칠팔구","십백천만",q1,s,Ld|pA|gA);case 33:return $a(n,"零一二三四五六七八九","十百千萬",q1,s,0);case 32:return $a(n,"零壹貳參四五六七八九","拾百千",q1,s,Ld|pA|gA);case 18:return Wn(n,2406,2415,!0,r);case 20:return yd(n,1,19999,Zce,3,r);case 21:return Wn(n,2790,2799,!0,r);case 22:return Wn(n,2662,2671,!0,r);case 22:return yd(n,1,10999,Wce,3,r);case 23:return Sc(n,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Sc(n,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Wn(n,3302,3311,!0,r);case 28:return Sc(n,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",i);case 29:return Sc(n,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",i);case 34:return Wn(n,3792,3801,!0,r);case 37:return Wn(n,6160,6169,!0,r);case 38:return Wn(n,4160,4169,!0,r);case 39:return Wn(n,2918,2927,!0,r);case 40:return Wn(n,1776,1785,!0,r);case 43:return Wn(n,3046,3055,!0,r);case 44:return Wn(n,3174,3183,!0,r);case 45:return Wn(n,3664,3673,!0,r);case 46:return Wn(n,3872,3881,!0,r);case 3:default:return Wn(n,48,57,!0,r)}},Mk;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(Mk||(Mk={}));var Gce=function(){function n(){}return n.getOrigin=function(e){var t=n._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),He=function(){function n(e,t){this.type=0,this.x=e,this.y=t}return n.prototype.add=function(e,t){return new n(this.x+e,this.y+t)},n}(),wd=function(n,e,t){return new He(n.x+(e.x-n.x)*t,n.y+(e.y-n.y)*t)},ey=function(){function n(e,t,r,i){this.type=1,this.start=e,this.startControl=t,this.endControl=r,this.end=i}return n.prototype.subdivide=function(e,t){var r=wd(this.start,this.startControl,e),i=wd(this.startControl,this.endControl,e),s=wd(this.endControl,this.end,e),o=wd(r,i,e),a=wd(i,s,e),l=wd(o,a,e);return t?new n(this.start,r,o,l):new n(l,a,s,this.end)},n.prototype.add=function(e,t){return new n(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),Os=function(n){return n.type===1},Jce=function(){function n(e){var t=e.styles,r=e.bounds,i=Bg(t.borderTopLeftRadius,r.width,r.height),s=i[0],o=i[1],a=Bg(t.borderTopRightRadius,r.width,r.height),l=a[0],A=a[1],c=Bg(t.borderBottomRightRadius,r.width,r.height),u=c[0],h=c[1],d=Bg(t.borderBottomLeftRadius,r.width,r.height),p=d[0],f=d[1],m=[];m.push((s+l)/r.width),m.push((p+u)/r.width),m.push((o+f)/r.height),m.push((A+h)/r.height);var g=Math.max.apply(Math,m);g>1&&(s/=g,o/=g,l/=g,A/=g,u/=g,h/=g,p/=g,f/=g);var v=r.width-l,w=r.height-h,B=r.width-u,C=r.height-f,b=t.borderTopWidth,F=t.borderRightWidth,x=t.borderBottomWidth,E=t.borderLeftWidth,M=dn(t.paddingTop,e.bounds.width),H=dn(t.paddingRight,e.bounds.width),O=dn(t.paddingBottom,e.bounds.width),U=dn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?wn(r.left+E/3,r.top+b/3,s-E/3,o-b/3,jt.TOP_LEFT):new He(r.left+E/3,r.top+b/3),this.topRightBorderDoubleOuterBox=s>0||o>0?wn(r.left+v,r.top+b/3,l-F/3,A-b/3,jt.TOP_RIGHT):new He(r.left+r.width-F/3,r.top+b/3),this.bottomRightBorderDoubleOuterBox=u>0||h>0?wn(r.left+B,r.top+w,u-F/3,h-x/3,jt.BOTTOM_RIGHT):new He(r.left+r.width-F/3,r.top+r.height-x/3),this.bottomLeftBorderDoubleOuterBox=p>0||f>0?wn(r.left+E/3,r.top+C,p-E/3,f-x/3,jt.BOTTOM_LEFT):new He(r.left+E/3,r.top+r.height-x/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?wn(r.left+E*2/3,r.top+b*2/3,s-E*2/3,o-b*2/3,jt.TOP_LEFT):new He(r.left+E*2/3,r.top+b*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?wn(r.left+v,r.top+b*2/3,l-F*2/3,A-b*2/3,jt.TOP_RIGHT):new He(r.left+r.width-F*2/3,r.top+b*2/3),this.bottomRightBorderDoubleInnerBox=u>0||h>0?wn(r.left+B,r.top+w,u-F*2/3,h-x*2/3,jt.BOTTOM_RIGHT):new He(r.left+r.width-F*2/3,r.top+r.height-x*2/3),this.bottomLeftBorderDoubleInnerBox=p>0||f>0?wn(r.left+E*2/3,r.top+C,p-E*2/3,f-x*2/3,jt.BOTTOM_LEFT):new He(r.left+E*2/3,r.top+r.height-x*2/3),this.topLeftBorderStroke=s>0||o>0?wn(r.left+E/2,r.top+b/2,s-E/2,o-b/2,jt.TOP_LEFT):new He(r.left+E/2,r.top+b/2),this.topRightBorderStroke=s>0||o>0?wn(r.left+v,r.top+b/2,l-F/2,A-b/2,jt.TOP_RIGHT):new He(r.left+r.width-F/2,r.top+b/2),this.bottomRightBorderStroke=u>0||h>0?wn(r.left+B,r.top+w,u-F/2,h-x/2,jt.BOTTOM_RIGHT):new He(r.left+r.width-F/2,r.top+r.height-x/2),this.bottomLeftBorderStroke=p>0||f>0?wn(r.left+E/2,r.top+C,p-E/2,f-x/2,jt.BOTTOM_LEFT):new He(r.left+E/2,r.top+r.height-x/2),this.topLeftBorderBox=s>0||o>0?wn(r.left,r.top,s,o,jt.TOP_LEFT):new He(r.left,r.top),this.topRightBorderBox=l>0||A>0?wn(r.left+v,r.top,l,A,jt.TOP_RIGHT):new He(r.left+r.width,r.top),this.bottomRightBorderBox=u>0||h>0?wn(r.left+B,r.top+w,u,h,jt.BOTTOM_RIGHT):new He(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=p>0||f>0?wn(r.left,r.top+C,p,f,jt.BOTTOM_LEFT):new He(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||o>0?wn(r.left+E,r.top+b,Math.max(0,s-E),Math.max(0,o-b),jt.TOP_LEFT):new He(r.left+E,r.top+b),this.topRightPaddingBox=l>0||A>0?wn(r.left+Math.min(v,r.width-F),r.top+b,v>r.width+F?0:Math.max(0,l-F),Math.max(0,A-b),jt.TOP_RIGHT):new He(r.left+r.width-F,r.top+b),this.bottomRightPaddingBox=u>0||h>0?wn(r.left+Math.min(B,r.width-E),r.top+Math.min(w,r.height-x),Math.max(0,u-F),Math.max(0,h-x),jt.BOTTOM_RIGHT):new He(r.left+r.width-F,r.top+r.height-x),this.bottomLeftPaddingBox=p>0||f>0?wn(r.left+E,r.top+Math.min(C,r.height-x),Math.max(0,p-E),Math.max(0,f-x),jt.BOTTOM_LEFT):new He(r.left+E,r.top+r.height-x),this.topLeftContentBox=s>0||o>0?wn(r.left+E+U,r.top+b+M,Math.max(0,s-(E+U)),Math.max(0,o-(b+M)),jt.TOP_LEFT):new He(r.left+E+U,r.top+b+M),this.topRightContentBox=l>0||A>0?wn(r.left+Math.min(v,r.width+E+U),r.top+b+M,v>r.width+E+U?0:l-E+U,A-(b+M),jt.TOP_RIGHT):new He(r.left+r.width-(F+H),r.top+b+M),this.bottomRightContentBox=u>0||h>0?wn(r.left+Math.min(B,r.width-(E+U)),r.top+Math.min(w,r.height+b+M),Math.max(0,u-(F+H)),h-(x+O),jt.BOTTOM_RIGHT):new He(r.left+r.width-(F+H),r.top+r.height-(x+O)),this.bottomLeftContentBox=p>0||f>0?wn(r.left+E+U,r.top+C,Math.max(0,p-(E+U)),f-(x+O),jt.BOTTOM_LEFT):new He(r.left+E+U,r.top+r.height-(x+O))}return n}(),jt;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(jt||(jt={}));var wn=function(n,e,t,r,i){var s=4*((Math.sqrt(2)-1)/3),o=t*s,a=r*s,l=n+t,A=e+r;switch(i){case jt.TOP_LEFT:return new ey(new He(n,A),new He(n,A-a),new He(l-o,e),new He(l,e));case jt.TOP_RIGHT:return new ey(new He(n,e),new He(n+o,e),new He(l,A-a),new He(l,A));case jt.BOTTOM_RIGHT:return new ey(new He(l,e),new He(l,e+a),new He(n+o,A),new He(n,A));case jt.BOTTOM_LEFT:default:return new ey(new He(l,A),new He(l-o,A),new He(n,e+a),new He(n,e))}},DB=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},Hce=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},LB=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},zce=function(){function n(e,t,r){this.offsetX=e,this.offsetY=t,this.matrix=r,this.type=0,this.target=6}return n}(),ty=function(){function n(e,t){this.path=e,this.target=t,this.type=1}return n}(),Yce=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),Xce=function(n){return n.type===0},dJ=function(n){return n.type===1},jce=function(n){return n.type===2},Tk=function(n,e){return n.length===e.length?n.some(function(t,r){return t===e[r]}):!1},Kce=function(n,e,t,r,i){return n.map(function(s,o){switch(o){case 0:return s.add(e,t);case 1:return s.add(e+r,t);case 2:return s.add(e+r,t+i);case 3:return s.add(e,t+i)}return s})},hJ=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),fJ=function(){function n(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Jce(this.container),this.container.styles.opacity<1&&this.effects.push(new Yce(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new zce(r,i,s))}if(this.container.styles.overflowX!==0){var o=DB(this.curves),a=LB(this.curves);Tk(o,a)?this.effects.push(new ty(o,6)):(this.effects.push(new ty(o,2)),this.effects.push(new ty(a,4)))}}return n.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,i=this.effects.slice(0);r;){var s=r.effects.filter(function(l){return!dJ(l)});if(t||r.container.styles.position!==0||!r.parent){if(i.unshift.apply(i,s),t=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var o=DB(r.curves),a=LB(r.curves);Tk(o,a)||i.unshift(new ty(a,6))}}else i.unshift.apply(i,s);r=r.parent}return i.filter(function(l){return gr(l.target,e)})},n}(),$_=function(n,e,t,r){n.container.elements.forEach(function(i){var s=gr(i.flags,4),o=gr(i.flags,2),a=new fJ(i,n);gr(i.styles.display,2048)&&r.push(a);var l=gr(i.flags,8)?[]:r;if(s||o){var A=s||i.styles.isPositioned()?t:e,c=new hJ(a);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var h=0;A.negativeZIndex.some(function(p,f){return u>p.element.container.styles.zIndex.order?(h=f,!1):h>0}),A.negativeZIndex.splice(h,0,c)}else if(u>0){var d=0;A.positiveZIndex.some(function(p,f){return u>=p.element.container.styles.zIndex.order?(d=f+1,!1):d>0}),A.positiveZIndex.splice(d,0,c)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?A.nonPositionedFloats.push(c):A.nonPositionedInlineLevel.push(c);$_(a,c,s?c:t,l)}else i.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),$_(a,e,t,l);gr(i.flags,8)&&pJ(i,l)})},pJ=function(n,e){for(var t=n instanceof K_?n.start:1,r=n instanceof K_?n.reversed:!1,i=0;i<e.length;i++){var s=e[i];s.container instanceof nJ&&typeof s.container.value=="number"&&s.container.value!==0&&(t=s.container.value),s.listValue=$U(t,s.container.styles.listStyleType,!0),t+=r?-1:1}},$ce=function(n){var e=new fJ(n,null),t=new hJ(e),r=[];return $_(e,t,t,r),pJ(e.container,r),t},Nk=function(n,e){switch(e){case 0:return Ys(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return Ys(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return Ys(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return Ys(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},qce=function(n,e){switch(e){case 0:return Ys(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return Ys(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return Ys(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return Ys(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},eue=function(n,e){switch(e){case 0:return Ys(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return Ys(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return Ys(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return Ys(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},tue=function(n,e){switch(e){case 0:return ny(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return ny(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return ny(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return ny(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},ny=function(n,e){var t=[];return Os(n)?t.push(n.subdivide(.5,!1)):t.push(n),Os(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Ys=function(n,e,t,r){var i=[];return Os(n)?i.push(n.subdivide(.5,!1)):i.push(n),Os(t)?i.push(t.subdivide(.5,!0)):i.push(t),Os(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),Os(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},gJ=function(n){var e=n.bounds,t=n.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},VB=function(n){var e=n.styles,t=n.bounds,r=dn(e.paddingLeft,t.width),i=dn(e.paddingRight,t.width),s=dn(e.paddingTop,t.width),o=dn(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+i),-(e.borderTopWidth+e.borderBottomWidth+s+o))},nue=function(n,e){return n===0?e.bounds:n===2?VB(e):gJ(e)},rue=function(n,e){return n===0?e.bounds:n===2?VB(e):gJ(e)},eI=function(n,e,t){var r=nue(Vd(n.styles.backgroundOrigin,e),n),i=rue(Vd(n.styles.backgroundClip,e),n),s=iue(Vd(n.styles.backgroundSize,e),t,r),o=s[0],a=s[1],l=Bg(Vd(n.styles.backgroundPosition,e),r.width-o,r.height-a),A=sue(Vd(n.styles.backgroundRepeat,e),l,s,r,i),c=Math.round(r.left+l[0]),u=Math.round(r.top+l[1]);return[A,c,u,o,a]},Bd=function(n){return On(n)&&n.value===Hh.AUTO},ry=function(n){return typeof n=="number"},iue=function(n,e,t){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1];if(!o)return[0,0];if(rr(o)&&a&&rr(a))return[dn(o,t.width),dn(a,t.height)];var l=ry(s);if(On(o)&&(o.value===Hh.CONTAIN||o.value===Hh.COVER)){if(ry(s)){var A=t.width/t.height;return A<s!=(o.value===Hh.COVER)?[t.width,t.width/s]:[t.height*s,t.height]}return[t.width,t.height]}var c=ry(r),u=ry(i),h=c||u;if(Bd(o)&&(!a||Bd(a))){if(c&&u)return[r,i];if(!l&&!h)return[t.width,t.height];if(h&&l){var d=c?r:i*s,p=u?i:r/s;return[d,p]}var f=c?r:t.width,m=u?i:t.height;return[f,m]}if(l){var g=0,v=0;return rr(o)?g=dn(o,t.width):rr(a)&&(v=dn(a,t.height)),Bd(o)?g=v*s:(!a||Bd(a))&&(v=g/s),[g,v]}var w=null,B=null;if(rr(o)?w=dn(o,t.width):a&&rr(a)&&(B=dn(a,t.height)),w!==null&&(!a||Bd(a))&&(B=c&&u?w/r*i:t.height),B!==null&&Bd(o)&&(w=c&&u?B/i*r:t.width),w!==null&&B!==null)return[w,B];throw new Error("Unable to calculate background-size for element")},Vd=function(n,e){var t=n[e];return typeof t>"u"?n[0]:t},sue=function(n,e,t,r,i){var s=e[0],o=e[1],a=t[0],l=t[1];switch(n){case 2:return[new He(Math.round(r.left),Math.round(r.top+o)),new He(Math.round(r.left+r.width),Math.round(r.top+o)),new He(Math.round(r.left+r.width),Math.round(l+r.top+o)),new He(Math.round(r.left),Math.round(l+r.top+o))];case 3:return[new He(Math.round(r.left+s),Math.round(r.top)),new He(Math.round(r.left+s+a),Math.round(r.top)),new He(Math.round(r.left+s+a),Math.round(r.height+r.top)),new He(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new He(Math.round(r.left+s),Math.round(r.top+o)),new He(Math.round(r.left+s+a),Math.round(r.top+o)),new He(Math.round(r.left+s+a),Math.round(r.top+o+l)),new He(Math.round(r.left+s),Math.round(r.top+o+l))];default:return[new He(Math.round(i.left),Math.round(i.top)),new He(Math.round(i.left+i.width),Math.round(i.top)),new He(Math.round(i.left+i.width),Math.round(i.height+i.top)),new He(Math.round(i.left),Math.round(i.height+i.top))]}},oue="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",kk="Hidden Text",aue=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,t){var r=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",o.appendChild(r),i.src=oue,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(kk)),r.appendChild(s),r.appendChild(i);var a=i.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(kk)),r.style.lineHeight="normal",i.style.verticalAlign="super";var l=i.offsetTop-r.offsetTop+2;return o.removeChild(r),{baseline:a,middle:l}},n.prototype.getMetrics=function(e,t){var r=e+" "+t;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,t)),this._data[r]},n}(),mJ=function(){function n(e,t){this.context=e,this.options=t}return n}(),lue=1e4;(function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i._activeEffects=[],i.canvas=r.canvas?r.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),r.canvas||(i.canvas.width=Math.floor(r.width*r.scale),i.canvas.height=Math.floor(r.height*r.scale),i.canvas.style.width=r.width+"px",i.canvas.style.height=r.height+"px"),i.fontMetrics=new aue(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-r.x,-r.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),i}return e.prototype.applyEffects=function(t){for(var r=this;this._activeEffects.length;)this.popEffect();t.forEach(function(i){return r.applyEffect(i)})},e.prototype.applyEffect=function(t){this.ctx.save(),jce(t)&&(this.ctx.globalAlpha=t.opacity),Xce(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),dJ(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return Rs(this,void 0,void 0,function(){var r;return Hi(this,function(i){switch(i.label){case 0:return r=t.element.container.styles,r.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return Rs(this,void 0,void 0,function(){return Hi(this,function(r){switch(r.label){case 0:if(gr(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,r,i){var s=this;if(r===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i);else{var o=jU(t.text);o.reduce(function(a,l){return s.ctx.fillText(l,a,t.bounds.top+i),a+s.ctx.measureText(l).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var r=t.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),i=hue(t.fontFamily).join(", "),s=B0(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,r,t.fontWeight,s,i].join(" "),i,s]},e.prototype.renderTextNode=function(t,r){return Rs(this,void 0,void 0,function(){var i,s,o,a,l,A,c,u,h=this;return Hi(this,function(d){return i=this.createFontStyle(r),s=i[0],o=i[1],a=i[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(o,a),A=l.baseline,c=l.middle,u=r.paintOrder,t.textBounds.forEach(function(p){u.forEach(function(f){switch(f){case 0:h.ctx.fillStyle=Br(r.color),h.renderTextWithLetterSpacing(p,r.letterSpacing,A);var m=r.textShadow;m.length&&p.text.trim().length&&(m.slice(0).reverse().forEach(function(g){h.ctx.shadowColor=Br(g.color),h.ctx.shadowOffsetX=g.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=g.offsetY.number*h.options.scale,h.ctx.shadowBlur=g.blur.number,h.renderTextWithLetterSpacing(p,r.letterSpacing,A)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),r.textDecorationLine.length&&(h.ctx.fillStyle=Br(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(g){switch(g){case 1:h.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top+A),p.bounds.width,1);break;case 2:h.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top),p.bounds.width,1);break;case 3:h.ctx.fillRect(p.bounds.left,Math.ceil(p.bounds.top+c),p.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&p.text.trim().length&&(h.ctx.strokeStyle=Br(r.webkitTextStrokeColor),h.ctx.lineWidth=r.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(p.text,p.bounds.left,p.bounds.top+A)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,r,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var s=VB(t),o=LB(r);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return Rs(this,void 0,void 0,function(){var r,i,s,o,a,l,v,v,A,c,u,h,B,d,p,C,f,m,g,v,w,B,C;return Hi(this,function(b){switch(b.label){case 0:this.applyEffects(t.getEffects(4)),r=t.container,i=t.curves,s=r.styles,o=0,a=r.textNodes,b.label=1;case 1:return o<a.length?(l=a[o],[4,this.renderTextNode(l,s)]):[3,4];case 2:b.sent(),b.label=3;case 3:return o++,[3,1];case 4:if(!(r instanceof q4))return[3,8];b.label=5;case 5:return b.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return v=b.sent(),this.renderReplacedElement(r,i,v),[3,8];case 7:return b.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof eJ&&this.renderReplacedElement(r,i,r.canvas),!(r instanceof tJ))return[3,12];b.label=9;case 9:return b.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return v=b.sent(),this.renderReplacedElement(r,i,v),[3,12];case 11:return b.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof sJ&&r.tree?(A=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,A.render(r.tree)]):[3,14];case 13:c=b.sent(),r.width&&r.height&&this.ctx.drawImage(c,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),b.label=14;case 14:if(r instanceof KU&&(u=Math.min(r.bounds.width,r.bounds.height),r.type===NB?r.checked&&(this.ctx.save(),this.path([new He(r.bounds.left+u*.39363,r.bounds.top+u*.79),new He(r.bounds.left+u*.16,r.bounds.top+u*.5549),new He(r.bounds.left+u*.27347,r.bounds.top+u*.44071),new He(r.bounds.left+u*.39694,r.bounds.top+u*.5649),new He(r.bounds.left+u*.72983,r.bounds.top+u*.23),new He(r.bounds.left+u*.84,r.bounds.top+u*.34085),new He(r.bounds.left+u*.39363,r.bounds.top+u*.79)]),this.ctx.fillStyle=Br(_k),this.ctx.fill(),this.ctx.restore()):r.type===kB&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+u/2,r.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=Br(_k),this.ctx.fill(),this.ctx.restore())),Aue(r)&&r.value.length){switch(h=this.createFontStyle(s),B=h[0],d=h[1],p=this.fontMetrics.getMetrics(B,d).baseline,this.ctx.font=B,this.ctx.fillStyle=Br(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=uue(r.styles.textAlign),C=VB(r),f=0,r.styles.textAlign){case 1:f+=C.width/2;break;case 2:f+=C.width;break}m=C.add(f,0,0,-C.height/2+1),this.ctx.save(),this.path([new He(C.left,C.top),new He(C.left+C.width,C.top),new He(C.left+C.width,C.top+C.height),new He(C.left,C.top+C.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new jg(r.value,m),s.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!gr(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(g=r.styles.listStyleImage,g.type!==0)return[3,18];v=void 0,w=g.url,b.label=15;case 15:return b.trys.push([15,17,,18]),[4,this.context.cache.match(w)];case 16:return v=b.sent(),this.ctx.drawImage(v,r.bounds.left-(v.width+10),r.bounds.top),[3,18];case 17:return b.sent(),this.context.logger.error("Error loading list-style-image "+w),[3,18];case 18:return[3,20];case 19:t.listValue&&r.styles.listStyleType!==-1&&(B=this.createFontStyle(s)[0],this.ctx.font=B,this.ctx.fillStyle=Br(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",C=new xu(r.bounds.left,r.bounds.top+dn(r.styles.paddingTop,r.bounds.width),r.bounds.width,uk(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new jg(t.listValue,C),s.letterSpacing,uk(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),b.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return Rs(this,void 0,void 0,function(){var r,i,g,s,o,g,a,l,g,A,c,g,u,h,g,d,p,g,f,m,g;return Hi(this,function(v){switch(v.label){case 0:if(gr(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:v.sent(),r=0,i=t.negativeZIndex,v.label=2;case 2:return r<i.length?(g=i[r],[4,this.renderStack(g)]):[3,5];case 3:v.sent(),v.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:v.sent(),s=0,o=t.nonInlineLevel,v.label=7;case 7:return s<o.length?(g=o[s],[4,this.renderNode(g)]):[3,10];case 8:v.sent(),v.label=9;case 9:return s++,[3,7];case 10:a=0,l=t.nonPositionedFloats,v.label=11;case 11:return a<l.length?(g=l[a],[4,this.renderStack(g)]):[3,14];case 12:v.sent(),v.label=13;case 13:return a++,[3,11];case 14:A=0,c=t.nonPositionedInlineLevel,v.label=15;case 15:return A<c.length?(g=c[A],[4,this.renderStack(g)]):[3,18];case 16:v.sent(),v.label=17;case 17:return A++,[3,15];case 18:u=0,h=t.inlineLevel,v.label=19;case 19:return u<h.length?(g=h[u],[4,this.renderNode(g)]):[3,22];case 20:v.sent(),v.label=21;case 21:return u++,[3,19];case 22:d=0,p=t.zeroOrAutoZIndexOrTransformedOrOpacity,v.label=23;case 23:return d<p.length?(g=p[d],[4,this.renderStack(g)]):[3,26];case 24:v.sent(),v.label=25;case 25:return d++,[3,23];case 26:f=0,m=t.positiveZIndex,v.label=27;case 27:return f<m.length?(g=m[f],[4,this.renderStack(g)]):[3,30];case 28:v.sent(),v.label=29;case 29:return f++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var r=this;t.forEach(function(i,s){var o=Os(i)?i.start:i;s===0?r.ctx.moveTo(o.x,o.y):r.ctx.lineTo(o.x,o.y),Os(i)&&r.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(t,r,i,s){this.path(t),this.ctx.fillStyle=r,this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},e.prototype.resizeImage=function(t,r,i){var s;if(t.width===r&&t.height===i)return t;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,a=o.createElement("canvas");a.width=Math.max(1,r),a.height=Math.max(1,i);var l=a.getContext("2d");return l.drawImage(t,0,0,t.width,t.height,0,0,r,i),a},e.prototype.renderBackgroundImage=function(t){return Rs(this,void 0,void 0,function(){var r,i,s,o,a,l;return Hi(this,function(A){switch(A.label){case 0:r=t.styles.backgroundImage.length-1,i=function(c){var u,h,d,M,R,D,U,y,x,p,M,R,D,U,y,f,m,g,v,w,B,C,b,F,x,E,M,H,O,U,y,I,R,D,k,V,Z,N,_,z,ie,T;return Hi(this,function(q){switch(q.label){case 0:if(c.type!==0)return[3,5];u=void 0,h=c.url,q.label=1;case 1:return q.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return u=q.sent(),[3,4];case 3:return q.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return u&&(d=eI(t,r,[u.width,u.height,u.width/u.height]),M=d[0],R=d[1],D=d[2],U=d[3],y=d[4],x=s.ctx.createPattern(s.resizeImage(u,U,y),"repeat"),s.renderRepeat(M,x,R,D)),[3,6];case 5:ule(c)?(p=eI(t,r,[null,null,null]),M=p[0],R=p[1],D=p[2],U=p[3],y=p[4],f=ole(c.angle,U,y),m=f[0],g=f[1],v=f[2],w=f[3],B=f[4],C=document.createElement("canvas"),C.width=U,C.height=y,b=C.getContext("2d"),F=b.createLinearGradient(g,w,v,B),Ak(c.stops,m).forEach(function(ge){return F.addColorStop(ge.stop,Br(ge.color))}),b.fillStyle=F,b.fillRect(0,0,U,y),U>0&&y>0&&(x=s.ctx.createPattern(C,"repeat"),s.renderRepeat(M,x,R,D))):dle(c)&&(E=eI(t,r,[null,null,null]),M=E[0],H=E[1],O=E[2],U=E[3],y=E[4],I=c.position.length===0?[zU]:c.position,R=dn(I[0],U),D=dn(I[I.length-1],y),k=ale(c,R,D,U,y),V=k[0],Z=k[1],V>0&&Z>0&&(N=s.ctx.createRadialGradient(H+R,O+D,0,H+R,O+D,V),Ak(c.stops,V*2).forEach(function(ge){return N.addColorStop(ge.stop,Br(ge.color))}),s.path(M),s.ctx.fillStyle=N,V!==Z?(_=t.bounds.left+.5*t.bounds.width,z=t.bounds.top+.5*t.bounds.height,ie=Z/V,T=1/ie,s.ctx.save(),s.ctx.translate(_,z),s.ctx.transform(1,0,0,ie,0,0),s.ctx.translate(-_,-z),s.ctx.fillRect(H,T*(O-z)+z,U,y*T),s.ctx.restore()):s.ctx.fill())),q.label=6;case 6:return r--,[2]}})},s=this,o=0,a=t.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return o<a.length?(l=a[o],[5,i(l)]):[3,4];case 2:A.sent(),A.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,r,i){return Rs(this,void 0,void 0,function(){return Hi(this,function(s){return this.path(Nk(i,r)),this.ctx.fillStyle=Br(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,r,i,s){return Rs(this,void 0,void 0,function(){var o,a;return Hi(this,function(l){switch(l.label){case 0:return r<3?[4,this.renderSolidBorder(t,i,s)]:[3,2];case 1:return l.sent(),[2];case 2:return o=qce(s,i),this.path(o),this.ctx.fillStyle=Br(t),this.ctx.fill(),a=eue(s,i),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return Rs(this,void 0,void 0,function(){var r,i,s,o,a,l,A,c,u=this;return Hi(this,function(h){switch(h.label){case 0:return this.applyEffects(t.getEffects(2)),r=t.container.styles,i=!Jh(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],o=cue(Vd(r.backgroundClip,0),t.curves),i||r.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Jh(r.backgroundColor)||(this.ctx.fillStyle=Br(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(d){u.ctx.save();var p=DB(t.curves),f=d.inset?0:lue,m=Kce(p,-f+(d.inset?1:-1)*d.spread.number,(d.inset?1:-1)*d.spread.number,d.spread.number*(d.inset?-2:2),d.spread.number*(d.inset?-2:2));d.inset?(u.path(p),u.ctx.clip(),u.mask(m)):(u.mask(p),u.ctx.clip(),u.path(m)),u.ctx.shadowOffsetX=d.offsetX.number+f,u.ctx.shadowOffsetY=d.offsetY.number,u.ctx.shadowColor=Br(d.color),u.ctx.shadowBlur=d.blur.number,u.ctx.fillStyle=d.inset?Br(d.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),h.label=2;case 2:a=0,l=0,A=s,h.label=3;case 3:return l<A.length?(c=A[l],c.style!==0&&!Jh(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,3)];case 6:return h.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,a,t.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,a,t.curves)];case 10:h.sent(),h.label=11;case 11:a++,h.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,r,i,s,o){return Rs(this,void 0,void 0,function(){var a,l,A,c,u,h,d,p,f,m,g,v,w,B,C,b,C,b;return Hi(this,function(F){return this.ctx.save(),a=tue(s,i),l=Nk(s,i),o===2&&(this.path(l),this.ctx.clip()),Os(l[0])?(A=l[0].start.x,c=l[0].start.y):(A=l[0].x,c=l[0].y),Os(l[1])?(u=l[1].end.x,h=l[1].end.y):(u=l[1].x,h=l[1].y),i===0||i===2?d=Math.abs(A-u):d=Math.abs(c-h),this.ctx.beginPath(),o===3?this.formatPath(a):this.formatPath(l.slice(0,2)),p=r<3?r*3:r*2,f=r<3?r*2:r,o===3&&(p=r,f=r),m=!0,d<=p*2?m=!1:d<=p*2+f?(g=d/(2*p+f),p*=g,f*=g):(v=Math.floor((d+f)/(p+f)),w=(d-v*p)/(v-1),B=(d-(v+1)*p)/v,f=B<=0||Math.abs(f-w)<Math.abs(f-B)?w:B),m&&(o===3?this.ctx.setLineDash([0,p+f]):this.ctx.setLineDash([p,f])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Br(t),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Os(l[0])&&(C=l[3],b=l[0],this.ctx.beginPath(),this.formatPath([new He(C.end.x,C.end.y),new He(b.start.x,b.start.y)]),this.ctx.stroke()),Os(l[1])&&(C=l[1],b=l[2],this.ctx.beginPath(),this.formatPath([new He(C.end.x,C.end.y),new He(b.start.x,b.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return Rs(this,void 0,void 0,function(){var r;return Hi(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Br(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=$ce(t),[4,this.renderStack(r)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(mJ);var Aue=function(n){return n instanceof iJ||n instanceof rJ?!0:n instanceof KU&&n.type!==kB&&n.type!==NB},cue=function(n,e){switch(n){case 0:return DB(e);case 2:return Hce(e);case 1:default:return LB(e)}},uue=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},due=["-apple-system","system-ui"],hue=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return due.indexOf(e)===-1}):n};(function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.canvas=r.canvas?r.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=r,i.canvas.width=Math.floor(r.width*r.scale),i.canvas.height=Math.floor(r.height*r.scale),i.canvas.style.width=r.width+"px",i.canvas.style.height=r.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-r.x,-r.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),i}return e.prototype.render=function(t){return Rs(this,void 0,void 0,function(){var r,i;return Hi(this,function(s){switch(s.label){case 0:return r=j_(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,fue(r)];case 1:return i=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Br(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(mJ);var fue=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})};typeof window<"u"&&Gce.setContext(window);/*!
 * @pixiv/three-vrm v1.0.9
 * VRM file loader for three.js.
 *
 * Copyright (c) 2019-2023 pixiv Inc.
 * @pixiv/three-vrm is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-core v1.0.9
 * The implementation of core features of VRM, for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-core is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */class Dk extends Lt{constructor(e){super(),this.weight=0,this.isBinary=!1,this.overrideBlink="none",this.overrideLookAt="none",this.overrideMouth="none",this._binds=[],this.name=`VRMExpression_${e}`,this.expressionName=e,this.type="VRMExpression",this.visible=!1}get overrideBlinkAmount(){return this.overrideBlink==="block"?0<this.weight?1:0:this.overrideBlink==="blend"?this.weight:0}get overrideLookAtAmount(){return this.overrideLookAt==="block"?0<this.weight?1:0:this.overrideLookAt==="blend"?this.weight:0}get overrideMouthAmount(){return this.overrideMouth==="block"?0<this.weight?1:0:this.overrideMouth==="blend"?this.weight:0}addBind(e){this._binds.push(e)}applyWeight(e){var t;let r=this.isBinary?this.weight<=.5?0:1:this.weight;r*=(t=e==null?void 0:e.multiplier)!==null&&t!==void 0?t:1,this._binds.forEach(i=>i.applyWeight(r))}clearAppliedWeight(){this._binds.forEach(e=>e.clearAppliedWeight())}}function Jt(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}function vJ(n,e,t){var r,i;const s=n.parser.json,o=(r=s.nodes)===null||r===void 0?void 0:r[e];if(o==null)return console.warn(`extractPrimitivesInternal: Attempt to use nodes[${e}] of glTF but the node doesn't exist`),null;const a=o.mesh;if(a==null)return null;const l=(i=s.meshes)===null||i===void 0?void 0:i[a];if(l==null)return console.warn(`extractPrimitivesInternal: Attempt to use meshes[${a}] of glTF but the mesh doesn't exist`),null;const A=l.primitives.length,c=[];return t.traverse(u=>{c.length<A&&u.isMesh&&c.push(u)}),c}function Lk(n,e){return Jt(this,void 0,void 0,function*(){const t=yield n.parser.getDependency("node",e);return vJ(n,e,t)})}function Vk(n){return Jt(this,void 0,void 0,function*(){const e=yield n.parser.getDependencies("node"),t=new Map;return e.forEach((r,i)=>{const s=vJ(n,i,r);s!=null&&t.set(i,s)}),t})}function Pk(n,e){var t,r;const i=parseInt(Ps,10);let s=null;if(i>=133)s=(r=(t=n.associations.get(e))===null||t===void 0?void 0:t.materials)!==null&&r!==void 0?r:null;else{const a=n.associations.get(e);(a==null?void 0:a.type)==="materials"&&(s=a.index)}return s}const ui={Aa:"aa",Ih:"ih",Ou:"ou",Ee:"ee",Oh:"oh",Blink:"blink",Happy:"happy",Angry:"angry",Sad:"sad",Relaxed:"relaxed",LookUp:"lookUp",Surprised:"surprised",LookDown:"lookDown",LookLeft:"lookLeft",LookRight:"lookRight",BlinkLeft:"blinkLeft",BlinkRight:"blinkRight",Neutral:"neutral"};function yJ(n){return Math.max(Math.min(n,1),0)}class PB{constructor(){this.blinkExpressionNames=["blink","blinkLeft","blinkRight"],this.lookAtExpressionNames=["lookLeft","lookRight","lookUp","lookDown"],this.mouthExpressionNames=["aa","ee","ih","oh","ou"],this._expressions=[],this._expressionMap={}}get expressions(){return this._expressions.concat()}get expressionMap(){return Object.assign({},this._expressionMap)}get presetExpressionMap(){const e={},t=new Set(Object.values(ui));return Object.entries(this._expressionMap).forEach(([r,i])=>{t.has(r)&&(e[r]=i)}),e}get customExpressionMap(){const e={},t=new Set(Object.values(ui));return Object.entries(this._expressionMap).forEach(([r,i])=>{t.has(r)||(e[r]=i)}),e}copy(e){return this._expressions.concat().forEach(r=>{this.unregisterExpression(r)}),e._expressions.forEach(r=>{this.registerExpression(r)}),this.blinkExpressionNames=e.blinkExpressionNames.concat(),this.lookAtExpressionNames=e.lookAtExpressionNames.concat(),this.mouthExpressionNames=e.mouthExpressionNames.concat(),this}clone(){return new PB().copy(this)}getExpression(e){var t;return(t=this._expressionMap[e])!==null&&t!==void 0?t:null}registerExpression(e){this._expressions.push(e),this._expressionMap[e.expressionName]=e}unregisterExpression(e){const t=this._expressions.indexOf(e);t===-1&&console.warn("VRMExpressionManager: The specified expressions is not registered"),this._expressions.splice(t,1),delete this._expressionMap[e.expressionName]}getValue(e){var t;const r=this.getExpression(e);return(t=r==null?void 0:r.weight)!==null&&t!==void 0?t:null}setValue(e,t){const r=this.getExpression(e);r&&(r.weight=yJ(t))}getExpressionTrackName(e){const t=this.getExpression(e);return t?`${t.name}.weight`:null}update(){const e=this._calculateWeightMultipliers();this._expressions.forEach(t=>{t.clearAppliedWeight()}),this._expressions.forEach(t=>{let r=1;const i=t.expressionName;this.blinkExpressionNames.indexOf(i)!==-1&&(r*=e.blink),this.lookAtExpressionNames.indexOf(i)!==-1&&(r*=e.lookAt),this.mouthExpressionNames.indexOf(i)!==-1&&(r*=e.mouth),t.applyWeight({multiplier:r})})}_calculateWeightMultipliers(){let e=1,t=1,r=1;return this._expressions.forEach(i=>{e-=i.overrideBlinkAmount,t-=i.overrideLookAtAmount,r-=i.overrideMouthAmount}),e=Math.max(0,e),t=Math.max(0,t),r=Math.max(0,r),{blink:e,lookAt:t,mouth:r}}}const Vp={Color:"color",EmissionColor:"emissionColor",ShadeColor:"shadeColor",MatcapColor:"matcapColor",RimColor:"rimColor",OutlineColor:"outlineColor"},pue={_Color:Vp.Color,_EmissionColor:Vp.EmissionColor,_ShadeColor:Vp.ShadeColor,_RimColor:Vp.RimColor,_OutlineColor:Vp.OutlineColor},gue=new Ve;class Pm{constructor({material:e,type:t,targetValue:r}){var i,s,o;this.material=e,this.type=t,this.targetValue=r;const a=(i=Object.entries(Pm._propertyNameMapMap).find(([A])=>e[A]===!0))===null||i===void 0?void 0:i[1],l=(s=a==null?void 0:a[t])!==null&&s!==void 0?s:null;if(l==null)console.warn(`Tried to add a material color bind to the material ${(o=e.name)!==null&&o!==void 0?o:"(no name)"}, the type ${t} but the material or the type is not supported.`),this._state=null;else{const c=e[l].clone(),u=new Ve(r.r-c.r,r.g-c.g,r.b-c.b);this._state={propertyName:l,initialValue:c,deltaValue:u}}}applyWeight(e){if(this._state==null)return;const{propertyName:t,deltaValue:r}=this._state,i=this.material[t];i!==void 0&&(i.add(gue.copy(r).multiplyScalar(e)),typeof this.material.shouldApplyUniforms=="boolean"&&(this.material.shouldApplyUniforms=!0))}clearAppliedWeight(){if(this._state==null)return;const{propertyName:e,initialValue:t}=this._state,r=this.material[e];r!==void 0&&(r.copy(t),typeof this.material.shouldApplyUniforms=="boolean"&&(this.material.shouldApplyUniforms=!0))}}Pm._propertyNameMapMap={isMeshStandardMaterial:{color:"color",emissionColor:"emissive"},isMeshBasicMaterial:{color:"color"},isMToonMaterial:{color:"color",emissionColor:"emissive",outlineColor:"outlineColorFactor",matcapColor:"matcapFactor",rimColor:"parametricRimColorFactor",shadeColor:"shadeColorFactor"}};class Ok{constructor({primitives:e,index:t,weight:r}){this.primitives=e,this.index=t,this.weight=r}applyWeight(e){this.primitives.forEach(t=>{var r;((r=t.morphTargetInfluences)===null||r===void 0?void 0:r[this.index])!=null&&(t.morphTargetInfluences[this.index]+=this.weight*e)})}clearAppliedWeight(){this.primitives.forEach(e=>{var t;((t=e.morphTargetInfluences)===null||t===void 0?void 0:t[this.index])!=null&&(e.morphTargetInfluences[this.index]=0)})}}const Wk=new ze;class Om{constructor({material:e,scale:t,offset:r}){var i,s;this.material=e,this.scale=t,this.offset=r;const o=(i=Object.entries(Om._propertyNamesMap).find(([a])=>e[a]===!0))===null||i===void 0?void 0:i[1];o==null?(console.warn(`Tried to add a texture transform bind to the material ${(s=e.name)!==null&&s!==void 0?s:"(no name)"} but the material is not supported.`),this._properties=[]):(this._properties=[],o.forEach(a=>{var l;const A=(l=e[a])===null||l===void 0?void 0:l.clone();if(!A)return null;e[a]=A;const c=A.offset.clone(),u=A.repeat.clone(),h=r.clone().sub(c),d=t.clone().sub(u);this._properties.push({name:a,initialOffset:c,deltaOffset:h,initialScale:u,deltaScale:d})}))}applyWeight(e){this._properties.forEach(t=>{const r=this.material[t.name];r!==void 0&&(r.offset.add(Wk.copy(t.deltaOffset).multiplyScalar(e)),r.repeat.add(Wk.copy(t.deltaScale).multiplyScalar(e)),r.needsUpdate=!0)})}clearAppliedWeight(){this._properties.forEach(e=>{const t=this.material[e.name];t!==void 0&&(t.offset.copy(e.initialOffset),t.repeat.copy(e.initialScale),t.needsUpdate=!0)})}}Om._propertyNamesMap={isMeshStandardMaterial:["map","emissiveMap","bumpMap","normalMap","displacementMap","roughnessMap","metalnessMap","alphaMap"],isMeshBasicMaterial:["map","specularMap","alphaMap"],isMToonMaterial:["map","normalMap","emissiveMap","shadeMultiplyTexture","rimMultiplyTexture","outlineWidthMultiplyTexture","uvAnimationMaskTexture"]};const mue=new Set(["1.0","1.0-beta"]);class pb{constructor(e){this.parser=e}get name(){return"VRMExpressionLoaderPlugin"}afterRoot(e){return Jt(this,void 0,void 0,function*(){e.userData.vrmExpressionManager=yield this._import(e)})}_import(e){return Jt(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t)return t;const r=yield this._v0Import(e);return r||null})}_v1Import(e){var t,r;return Jt(this,void 0,void 0,function*(){const i=this.parser.json;if(!(((t=i.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const o=(r=i.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(!o)return null;const a=o.specVersion;if(!mue.has(a))return console.warn(`VRMExpressionLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const l=o.expressions;if(!l)return null;const A=new Set(Object.values(ui)),c=new Map;l.preset!=null&&Object.entries(l.preset).forEach(([h,d])=>{if(d!=null){if(!A.has(h)){console.warn(`VRMExpressionLoaderPlugin: Unknown preset name "${h}" detected. Ignoring the expression`);return}c.set(h,d)}}),l.custom!=null&&Object.entries(l.custom).forEach(([h,d])=>{if(A.has(h)){console.warn(`VRMExpressionLoaderPlugin: Custom expression cannot have preset name "${h}". Ignoring the expression`);return}c.set(h,d)});const u=new PB;return yield Promise.all(Array.from(c.entries()).map(([h,d])=>Jt(this,void 0,void 0,function*(){var p,f,m,g,v,w,B;const C=new Dk(h);if(e.scene.add(C),C.isBinary=(p=d.isBinary)!==null&&p!==void 0?p:!1,C.overrideBlink=(f=d.overrideBlink)!==null&&f!==void 0?f:"none",C.overrideLookAt=(m=d.overrideLookAt)!==null&&m!==void 0?m:"none",C.overrideMouth=(g=d.overrideMouth)!==null&&g!==void 0?g:"none",(v=d.morphTargetBinds)===null||v===void 0||v.forEach(b=>Jt(this,void 0,void 0,function*(){var F;if(b.node===void 0||b.index===void 0)return;const x=yield Lk(e,b.node),E=b.index;if(!x.every(M=>Array.isArray(M.morphTargetInfluences)&&E<M.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${d.name} attempts to index morph #${E} but not found.`);return}C.addBind(new Ok({primitives:x,index:E,weight:(F=b.weight)!==null&&F!==void 0?F:1}))})),d.materialColorBinds||d.textureTransformBinds){const b=[];e.scene.traverse(F=>{const x=F.material;x&&b.push(x)}),(w=d.materialColorBinds)===null||w===void 0||w.forEach(F=>Jt(this,void 0,void 0,function*(){b.filter(E=>{const M=Pk(this.parser,E);return F.material===M}).forEach(E=>{C.addBind(new Pm({material:E,type:F.type,targetValue:new Ve().fromArray(F.targetValue)}))})})),(B=d.textureTransformBinds)===null||B===void 0||B.forEach(F=>Jt(this,void 0,void 0,function*(){b.filter(E=>{const M=Pk(this.parser,E);return F.material===M}).forEach(E=>{var M,H;C.addBind(new Om({material:E,offset:new ze().fromArray((M=F.offset)!==null&&M!==void 0?M:[0,0]),scale:new ze().fromArray((H=F.scale)!==null&&H!==void 0?H:[1,1])}))})}))}u.registerExpression(C)}))),u})}_v0Import(e){var t;return Jt(this,void 0,void 0,function*(){const r=this.parser.json,i=(t=r.extensions)===null||t===void 0?void 0:t.VRM;if(!i)return null;const s=i.blendShapeMaster;if(!s)return null;const o=new PB,a=s.blendShapeGroups;if(!a)return o;const l=new Set;return yield Promise.all(a.map(A=>Jt(this,void 0,void 0,function*(){var c;const u=A.presetName,h=u!=null&&pb.v0v1PresetNameMap[u]||null,d=h??A.name;if(d==null){console.warn("VRMExpressionLoaderPlugin: One of custom expressions has no name. Ignoring the expression");return}if(l.has(d)){console.warn(`VRMExpressionLoaderPlugin: An expression preset ${u} has duplicated entries. Ignoring the expression`);return}l.add(d);const p=new Dk(d);e.scene.add(p),p.isBinary=(c=A.isBinary)!==null&&c!==void 0?c:!1,A.binds&&A.binds.forEach(m=>Jt(this,void 0,void 0,function*(){var g;if(m.mesh===void 0||m.index===void 0)return;const v=[];(g=r.nodes)===null||g===void 0||g.forEach((B,C)=>{B.mesh===m.mesh&&v.push(C)});const w=m.index;yield Promise.all(v.map(B=>Jt(this,void 0,void 0,function*(){var C;const b=yield Lk(e,B);if(!b.every(F=>Array.isArray(F.morphTargetInfluences)&&w<F.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${A.name} attempts to index ${w}th morph but not found.`);return}p.addBind(new Ok({primitives:b,index:w,weight:.01*((C=m.weight)!==null&&C!==void 0?C:100)}))})))}));const f=A.materialValues;f&&f.length!==0&&f.forEach(m=>{if(m.materialName===void 0||m.propertyName===void 0||m.targetValue===void 0)return;const g=[];e.scene.traverse(w=>{if(w.material){const B=w.material;Array.isArray(B)?g.push(...B.filter(C=>(C.name===m.materialName||C.name===m.materialName+" (Outline)")&&g.indexOf(C)===-1)):B.name===m.materialName&&g.indexOf(B)===-1&&g.push(B)}});const v=m.propertyName;g.forEach(w=>{if(v==="_MainTex_ST"){const C=new ze(m.targetValue[0],m.targetValue[1]),b=new ze(m.targetValue[2],m.targetValue[3]);p.addBind(new Om({material:w,scale:C,offset:b}));return}const B=pue[v];if(B){p.addBind(new Pm({material:w,type:B,targetValue:new Ve(...m.targetValue.slice(0,3))}));return}console.warn(v+" is not supported")})}),o.registerExpression(p)}))),o})}}pb.v0v1PresetNameMap={a:"aa",e:"ee",i:"ih",o:"oh",u:"ou",blink:"blink",joy:"happy",angry:"angry",sorrow:"sad",fun:"relaxed",lookup:"lookUp",lookdown:"lookDown",lookleft:"lookLeft",lookright:"lookRight",blink_l:"blinkLeft",blink_r:"blinkRight",neutral:"neutral"};class ua{constructor(e,t){this._firstPersonOnlyLayer=ua.DEFAULT_FIRSTPERSON_ONLY_LAYER,this._thirdPersonOnlyLayer=ua.DEFAULT_THIRDPERSON_ONLY_LAYER,this._initializedLayers=!1,this.humanoid=e,this.meshAnnotations=t}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMFirstPerson: humanoid must be same in order to copy");return this.meshAnnotations=e.meshAnnotations.map(t=>({meshes:t.meshes.concat(),type:t.type})),this}clone(){return new ua(this.humanoid,this.meshAnnotations).copy(this)}get firstPersonOnlyLayer(){return this._firstPersonOnlyLayer}get thirdPersonOnlyLayer(){return this._thirdPersonOnlyLayer}setup({firstPersonOnlyLayer:e=ua.DEFAULT_FIRSTPERSON_ONLY_LAYER,thirdPersonOnlyLayer:t=ua.DEFAULT_THIRDPERSON_ONLY_LAYER}={}){this._initializedLayers||(this._firstPersonOnlyLayer=e,this._thirdPersonOnlyLayer=t,this.meshAnnotations.forEach(r=>{r.meshes.forEach(i=>{r.type==="firstPersonOnly"?(i.layers.set(this._firstPersonOnlyLayer),i.traverse(s=>s.layers.set(this._firstPersonOnlyLayer))):r.type==="thirdPersonOnly"?(i.layers.set(this._thirdPersonOnlyLayer),i.traverse(s=>s.layers.set(this._thirdPersonOnlyLayer))):r.type==="auto"&&this._createHeadlessModel(i)})}),this._initializedLayers=!0)}_excludeTriangles(e,t,r,i){let s=0;if(t!=null&&t.length>0)for(let o=0;o<e.length;o+=3){const a=e[o],l=e[o+1],A=e[o+2],c=t[a],u=r[a];if(c[0]>0&&i.includes(u[0])||c[1]>0&&i.includes(u[1])||c[2]>0&&i.includes(u[2])||c[3]>0&&i.includes(u[3]))continue;const h=t[l],d=r[l];if(h[0]>0&&i.includes(d[0])||h[1]>0&&i.includes(d[1])||h[2]>0&&i.includes(d[2])||h[3]>0&&i.includes(d[3]))continue;const p=t[A],f=r[A];p[0]>0&&i.includes(f[0])||p[1]>0&&i.includes(f[1])||p[2]>0&&i.includes(f[2])||p[3]>0&&i.includes(f[3])||(e[s++]=a,e[s++]=l,e[s++]=A)}return s}_createErasedMesh(e,t){const r=new _l(e.geometry.clone(),e.material);r.name=`${e.name}(erase)`,r.frustumCulled=e.frustumCulled,r.layers.set(this._firstPersonOnlyLayer);const i=r.geometry,s=i.getAttribute("skinIndex"),o=s instanceof pN?[]:s.array,a=[];for(let f=0;f<o.length;f+=4)a.push([o[f],o[f+1],o[f+2],o[f+3]]);const l=i.getAttribute("skinWeight"),A=l instanceof pN?[]:l.array,c=[];for(let f=0;f<A.length;f+=4)c.push([A[f],A[f+1],A[f+2],A[f+3]]);const u=i.getIndex();if(!u)throw new Error("The geometry doesn't have an index buffer");const h=Array.from(u.array),d=this._excludeTriangles(h,c,a,t),p=[];for(let f=0;f<d;f++)p[f]=h[f];return i.setIndex(p),e.onBeforeRender&&(r.onBeforeRender=e.onBeforeRender),r.bind(new yc(e.skeleton.bones,e.skeleton.boneInverses),new Je),r}_createHeadlessModelForSkinnedMesh(e,t){const r=[];if(t.skeleton.bones.forEach((s,o)=>{this._isEraseTarget(s)&&r.push(o)}),!r.length){t.layers.enable(this._thirdPersonOnlyLayer),t.layers.enable(this._firstPersonOnlyLayer);return}t.layers.set(this._thirdPersonOnlyLayer);const i=this._createErasedMesh(t,r);e.add(i)}_createHeadlessModel(e){if(e.type==="Group")if(e.layers.set(this._thirdPersonOnlyLayer),this._isEraseTarget(e))e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer));else{const t=new kr;t.name=`_headless_${e.name}`,t.layers.set(this._firstPersonOnlyLayer),e.parent.add(t),e.children.filter(r=>r.type==="SkinnedMesh").forEach(r=>{const i=r;this._createHeadlessModelForSkinnedMesh(t,i)})}else if(e.type==="SkinnedMesh"){const t=e;this._createHeadlessModelForSkinnedMesh(e.parent,t)}else this._isEraseTarget(e)&&(e.layers.set(this._thirdPersonOnlyLayer),e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer)))}_isEraseTarget(e){return e===this.humanoid.getRawBoneNode("head")?!0:e.parent?this._isEraseTarget(e.parent):!1}}ua.DEFAULT_FIRSTPERSON_ONLY_LAYER=9;ua.DEFAULT_THIRDPERSON_ONLY_LAYER=10;const vue=new Set(["1.0","1.0-beta"]);class yue{constructor(e){this.parser=e}get name(){return"VRMFirstPersonLoaderPlugin"}afterRoot(e){return Jt(this,void 0,void 0,function*(){const t=e.userData.vrmHumanoid;if(t!==null){if(t===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");e.userData.vrmFirstPerson=yield this._import(e,t)}})}_import(e,t){return Jt(this,void 0,void 0,function*(){if(t==null)return null;const r=yield this._v1Import(e,t);if(r)return r;const i=yield this._v0Import(e,t);return i||null})}_v1Import(e,t){var r,i;return Jt(this,void 0,void 0,function*(){const s=this.parser.json;if(!(((r=s.extensionsUsed)===null||r===void 0?void 0:r.indexOf("VRMC_vrm"))!==-1))return null;const a=(i=s.extensions)===null||i===void 0?void 0:i.VRMC_vrm;if(!a)return null;const l=a.specVersion;if(!vue.has(l))return console.warn(`VRMFirstPersonLoaderPlugin: Unknown VRMC_vrm specVersion "${l}"`),null;const A=a.firstPerson;if(!A)return null;const c=[],u=yield Vk(e);return Array.from(u.entries()).forEach(([h,d])=>{var p;const f=A.meshAnnotations?A.meshAnnotations.find(m=>m.node===h):void 0;c.push({meshes:d,type:(p=f==null?void 0:f.type)!==null&&p!==void 0?p:"both"})}),new ua(t,c)})}_v0Import(e,t){var r;return Jt(this,void 0,void 0,function*(){const i=this.parser.json,s=(r=i.extensions)===null||r===void 0?void 0:r.VRM;if(!s)return null;const o=s.firstPerson;if(!o)return null;const a=[],l=yield Vk(e);return Array.from(l.entries()).forEach(([A,c])=>{const u=i.nodes[A],h=o.meshAnnotations?o.meshAnnotations.find(d=>d.mesh===u.mesh):void 0;a.push({meshes:c,type:this._convertV0FlagToV1Type(h==null?void 0:h.firstPersonFlag)})}),new ua(t,a)})}_convertV0FlagToV1Type(e){return e==="FirstPersonOnly"?"firstPersonOnly":e==="ThirdPersonOnly"?"thirdPersonOnly":e==="Auto"?"auto":"both"}}const Zk=new j,Gk=new j,wue=new rt;class Jk extends kr{constructor(e){super(),this.vrmHumanoid=e,this._boneAxesMap=new Map,Object.values(e.humanBones).forEach(t=>{const r=new Sie(1);r.matrixAutoUpdate=!1,r.material.depthTest=!1,r.material.depthWrite=!1,this.add(r),this._boneAxesMap.set(t,r)})}dispose(){Array.from(this._boneAxesMap.values()).forEach(e=>{e.geometry.dispose(),e.material.dispose()})}updateMatrixWorld(e){Array.from(this._boneAxesMap.entries()).forEach(([t,r])=>{t.node.updateWorldMatrix(!0,!1),t.node.matrixWorld.decompose(Zk,wue,Gk);const i=Zk.set(.1,.1,.1).divide(Gk);r.matrix.copy(t.node.matrixWorld).scale(i)}),super.updateMatrixWorld(e)}}const tI=["hips","spine","chest","upperChest","neck","head","leftEye","rightEye","jaw","leftUpperLeg","leftLowerLeg","leftFoot","leftToes","rightUpperLeg","rightLowerLeg","rightFoot","rightToes","leftShoulder","leftUpperArm","leftLowerArm","leftHand","rightShoulder","rightUpperArm","rightLowerArm","rightHand","leftThumbMetacarpal","leftThumbProximal","leftThumbDistal","leftIndexProximal","leftIndexIntermediate","leftIndexDistal","leftMiddleProximal","leftMiddleIntermediate","leftMiddleDistal","leftRingProximal","leftRingIntermediate","leftRingDistal","leftLittleProximal","leftLittleIntermediate","leftLittleDistal","rightThumbMetacarpal","rightThumbProximal","rightThumbDistal","rightIndexProximal","rightIndexIntermediate","rightIndexDistal","rightMiddleProximal","rightMiddleIntermediate","rightMiddleDistal","rightRingProximal","rightRingIntermediate","rightRingDistal","rightLittleProximal","rightLittleIntermediate","rightLittleDistal"],Wm={Hips:"hips",Spine:"spine",Chest:"chest",UpperChest:"upperChest",Neck:"neck",Head:"head",LeftEye:"leftEye",RightEye:"rightEye",Jaw:"jaw",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",LeftToes:"leftToes",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",RightToes:"rightToes",LeftShoulder:"leftShoulder",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightShoulder:"rightShoulder",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand",LeftThumbMetacarpal:"leftThumbMetacarpal",LeftThumbProximal:"leftThumbProximal",LeftThumbDistal:"leftThumbDistal",LeftIndexProximal:"leftIndexProximal",LeftIndexIntermediate:"leftIndexIntermediate",LeftIndexDistal:"leftIndexDistal",LeftMiddleProximal:"leftMiddleProximal",LeftMiddleIntermediate:"leftMiddleIntermediate",LeftMiddleDistal:"leftMiddleDistal",LeftRingProximal:"leftRingProximal",LeftRingIntermediate:"leftRingIntermediate",LeftRingDistal:"leftRingDistal",LeftLittleProximal:"leftLittleProximal",LeftLittleIntermediate:"leftLittleIntermediate",LeftLittleDistal:"leftLittleDistal",RightThumbMetacarpal:"rightThumbMetacarpal",RightThumbProximal:"rightThumbProximal",RightThumbDistal:"rightThumbDistal",RightIndexProximal:"rightIndexProximal",RightIndexIntermediate:"rightIndexIntermediate",RightIndexDistal:"rightIndexDistal",RightMiddleProximal:"rightMiddleProximal",RightMiddleIntermediate:"rightMiddleIntermediate",RightMiddleDistal:"rightMiddleDistal",RightRingProximal:"rightRingProximal",RightRingIntermediate:"rightRingIntermediate",RightRingDistal:"rightRingDistal",RightLittleProximal:"rightLittleProximal",RightLittleIntermediate:"rightLittleIntermediate",RightLittleDistal:"rightLittleDistal"},Bue={hips:null,spine:"hips",chest:"spine",upperChest:"chest",neck:"upperChest",head:"neck",leftEye:"head",rightEye:"head",jaw:"head",leftUpperLeg:"hips",leftLowerLeg:"leftUpperLeg",leftFoot:"leftLowerLeg",leftToes:"leftFoot",rightUpperLeg:"hips",rightLowerLeg:"rightUpperLeg",rightFoot:"rightLowerLeg",rightToes:"rightFoot",leftShoulder:"upperChest",leftUpperArm:"leftShoulder",leftLowerArm:"leftUpperArm",leftHand:"leftLowerArm",rightShoulder:"upperChest",rightUpperArm:"rightShoulder",rightLowerArm:"rightUpperArm",rightHand:"rightLowerArm",leftThumbMetacarpal:"leftHand",leftThumbProximal:"leftThumbMetacarpal",leftThumbDistal:"leftThumbProximal",leftIndexProximal:"leftHand",leftIndexIntermediate:"leftIndexProximal",leftIndexDistal:"leftIndexIntermediate",leftMiddleProximal:"leftHand",leftMiddleIntermediate:"leftMiddleProximal",leftMiddleDistal:"leftMiddleIntermediate",leftRingProximal:"leftHand",leftRingIntermediate:"leftRingProximal",leftRingDistal:"leftRingIntermediate",leftLittleProximal:"leftHand",leftLittleIntermediate:"leftLittleProximal",leftLittleDistal:"leftLittleIntermediate",rightThumbMetacarpal:"rightHand",rightThumbProximal:"rightThumbMetacarpal",rightThumbDistal:"rightThumbProximal",rightIndexProximal:"rightHand",rightIndexIntermediate:"rightIndexProximal",rightIndexDistal:"rightIndexIntermediate",rightMiddleProximal:"rightHand",rightMiddleIntermediate:"rightMiddleProximal",rightMiddleDistal:"rightMiddleIntermediate",rightRingProximal:"rightHand",rightRingIntermediate:"rightRingProximal",rightRingDistal:"rightRingIntermediate",rightLittleProximal:"rightHand",rightLittleIntermediate:"rightLittleProximal",rightLittleDistal:"rightLittleIntermediate"};function wJ(n){return n.invert?n.invert():n.inverse(),n}const Uc=new j,Qc=new rt;class q_{constructor(e){this.humanBones=e,this.restPose=this.getAbsolutePose()}getAbsolutePose(){const e={};return Object.keys(this.humanBones).forEach(t=>{const r=t,i=this.getBoneNode(r);i&&(Uc.copy(i.position),Qc.copy(i.quaternion),e[r]={position:Uc.toArray(),rotation:Qc.toArray()})}),e}getPose(){const e={};return Object.keys(this.humanBones).forEach(t=>{const r=t,i=this.getBoneNode(r);if(!i)return;Uc.set(0,0,0),Qc.identity();const s=this.restPose[r];s!=null&&s.position&&Uc.fromArray(s.position).negate(),s!=null&&s.rotation&&wJ(Qc.fromArray(s.rotation)),Uc.add(i.position),Qc.premultiply(i.quaternion),e[r]={position:Uc.toArray(),rotation:Qc.toArray()}}),e}setPose(e){Object.entries(e).forEach(([t,r])=>{const i=t,s=this.getBoneNode(i);if(!s)return;const o=this.restPose[i];o&&(r!=null&&r.position&&(s.position.fromArray(r.position),o.position&&s.position.add(Uc.fromArray(o.position))),r!=null&&r.rotation&&(s.quaternion.fromArray(r.rotation),o.rotation&&s.quaternion.multiply(Qc.fromArray(o.rotation))))})}resetPose(){Object.entries(this.restPose).forEach(([e,t])=>{const r=this.getBoneNode(e);r&&(t!=null&&t.position&&r.position.fromArray(t.position),t!=null&&t.rotation&&r.quaternion.fromArray(t.rotation))})}getBone(e){var t;return(t=this.humanBones[e])!==null&&t!==void 0?t:void 0}getBoneNode(e){var t,r;return(r=(t=this.humanBones[e])===null||t===void 0?void 0:t.node)!==null&&r!==void 0?r:null}}const Cue=new j,bue=new rt,xue=new j;class OB extends q_{constructor(e){const{rigBones:t,root:r,parentWorldRotations:i,boneRotations:s}=OB._setupTransforms(e);super(t),this.original=e,this.root=r,this._parentWorldRotations=i,this._boneRotations=s}static _setupTransforms(e){const t=new Lt;t.name="VRMHumanoidRig";const r={},i={},s={};tI.forEach(l=>{const A=e.getBoneNode(l);if(A){const c=new j,u=new rt;A.updateWorldMatrix(!0,!1),A.matrixWorld.decompose(c,u,Cue),r[l]=c,i[l]=u,s[l]=A.quaternion.clone()}});const o={},a={};return tI.forEach(l=>{var A;const c=e.getBoneNode(l);if(c){const u=r[l];let h=l,d,p;for(;d==null&&(h=Bue[h],h!=null);)d=r[h],p=i[h];const f=new Lt;f.name="Normalized_"+c.name,(h?(A=a[h])===null||A===void 0?void 0:A.node:t).add(f),f.position.copy(u),d&&f.position.sub(d),a[l]={node:f},o[l]=p??new rt}}),{rigBones:a,root:t,parentWorldRotations:o,boneRotations:s}}update(){tI.forEach(e=>{const t=this.original.getBoneNode(e);if(t!=null){const r=this.getBoneNode(e),i=this._parentWorldRotations[e],s=bue.copy(i).invert(),o=this._boneRotations[e];if(t.quaternion.copy(r.quaternion).multiply(i).premultiply(s).multiply(o),e==="hips"){const a=r.getWorldPosition(xue);t.parent.updateWorldMatrix(!0,!1);const l=t.parent.matrixWorld,A=a.applyMatrix4(l.invert());t.position.copy(A)}}})}}class WB{constructor(e,t){var r;this.autoUpdateHumanBones=(r=t==null?void 0:t.autoUpdateHumanBones)!==null&&r!==void 0?r:!0,this._rawHumanBones=new q_(e),this._normalizedHumanBones=new OB(this._rawHumanBones)}get restPose(){return console.warn("VRMHumanoid: restPose is deprecated. Use either rawRestPose or normalizedRestPose instead."),this.rawRestPose}get rawRestPose(){return this._rawHumanBones.restPose}get normalizedRestPose(){return this._normalizedHumanBones.restPose}get humanBones(){return this._rawHumanBones.humanBones}get rawHumanBones(){return this._rawHumanBones.humanBones}get normalizedHumanBones(){return this._normalizedHumanBones.humanBones}get normalizedHumanBonesRoot(){return this._normalizedHumanBones.root}copy(e){return this.autoUpdateHumanBones=e.autoUpdateHumanBones,this._rawHumanBones=new q_(e.humanBones),this._normalizedHumanBones=new OB(this._rawHumanBones),this}clone(){return new WB(this.humanBones,{autoUpdateHumanBones:this.autoUpdateHumanBones}).copy(this)}getAbsolutePose(){return console.warn("VRMHumanoid: getAbsolutePose() is deprecated. Use either getRawAbsolutePose() or getNormalizedAbsolutePose() instead."),this.getRawAbsolutePose()}getRawAbsolutePose(){return this._rawHumanBones.getAbsolutePose()}getNormalizedAbsolutePose(){return this._normalizedHumanBones.getAbsolutePose()}getPose(){return console.warn("VRMHumanoid: getPose() is deprecated. Use either getRawPose() or getNormalizedPose() instead."),this.getRawPose()}getRawPose(){return this._rawHumanBones.getPose()}getNormalizedPose(){return this._normalizedHumanBones.getPose()}setPose(e){return console.warn("VRMHumanoid: setPose() is deprecated. Use either setRawPose() or setNormalizedPose() instead."),this.setRawPose(e)}setRawPose(e){return this._rawHumanBones.setPose(e)}setNormalizedPose(e){return this._normalizedHumanBones.setPose(e)}resetPose(){return console.warn("VRMHumanoid: resetPose() is deprecated. Use either resetRawPose() or resetNormalizedPose() instead."),this.resetRawPose()}resetRawPose(){return this._rawHumanBones.resetPose()}resetNormalizedPose(){return this._normalizedHumanBones.resetPose()}getBone(e){return console.warn("VRMHumanoid: getBone() is deprecated. Use either getRawBone() or getNormalizedBone() instead."),this.getRawBone(e)}getRawBone(e){return this._rawHumanBones.getBone(e)}getNormalizedBone(e){return this._normalizedHumanBones.getBone(e)}getBoneNode(e){return console.warn("VRMHumanoid: getBoneNode() is deprecated. Use either getRawBoneNode() or getNormalizedBoneNode() instead."),this.getRawBoneNode(e)}getRawBoneNode(e){return this._rawHumanBones.getBoneNode(e)}getNormalizedBoneNode(e){return this._normalizedHumanBones.getBoneNode(e)}update(){this.autoUpdateHumanBones&&this._normalizedHumanBones.update()}}const Iue={Hips:"hips",Spine:"spine",Head:"head",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand"},Fue=new Set(["1.0","1.0-beta"]),Hk={leftThumbProximal:"leftThumbMetacarpal",leftThumbIntermediate:"leftThumbProximal",rightThumbProximal:"rightThumbMetacarpal",rightThumbIntermediate:"rightThumbProximal"};class _ue{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot,this.autoUpdateHumanBones=t==null?void 0:t.autoUpdateHumanBones}get name(){return"VRMHumanoidLoaderPlugin"}afterRoot(e){return Jt(this,void 0,void 0,function*(){e.userData.vrmHumanoid=yield this._import(e)})}_import(e){return Jt(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t)return t;const r=yield this._v0Import(e);return r||null})}_v1Import(e){var t,r;return Jt(this,void 0,void 0,function*(){const i=this.parser.json;if(!(((t=i.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const o=(r=i.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(!o)return null;const a=o.specVersion;if(!Fue.has(a))return console.warn(`VRMHumanoidLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const l=o.humanoid;if(!l)return null;const A=l.humanBones.leftThumbIntermediate!=null||l.humanBones.rightThumbIntermediate!=null,c={};l.humanBones!=null&&(yield Promise.all(Object.entries(l.humanBones).map(([h,d])=>Jt(this,void 0,void 0,function*(){let p=h;const f=d.node;if(A){const g=Hk[p];g!=null&&(p=g)}const m=yield this.parser.getDependency("node",f);if(m==null){console.warn(`A glTF node bound to the humanoid bone ${p} (index = ${f}) does not exist`);return}c[p]={node:m}}))));const u=new WB(this._ensureRequiredBonesExist(c),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(e.scene.add(u.normalizedHumanBonesRoot),this.helperRoot){const h=new Jk(u);this.helperRoot.add(h),h.renderOrder=this.helperRoot.renderOrder}return u})}_v0Import(e){var t;return Jt(this,void 0,void 0,function*(){const i=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!i)return null;const s=i.humanoid;if(!s)return null;const o={};s.humanBones!=null&&(yield Promise.all(s.humanBones.map(l=>Jt(this,void 0,void 0,function*(){const A=l.bone,c=l.node;if(A==null||c==null)return;const u=yield this.parser.getDependency("node",c);if(u==null){console.warn(`A glTF node bound to the humanoid bone ${A} (index = ${c}) does not exist`);return}const h=Hk[A],d=h??A;if(o[d]!=null){console.warn(`Multiple bone entries for ${d} detected (index = ${c}), ignoring duplicated entries.`);return}o[d]={node:u}}))));const a=new WB(this._ensureRequiredBonesExist(o),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(e.scene.add(a.normalizedHumanBonesRoot),this.helperRoot){const l=new Jk(a);this.helperRoot.add(l),l.renderOrder=this.helperRoot.renderOrder}return a})}_ensureRequiredBonesExist(e){const t=Object.values(Iue).filter(r=>e[r]==null);if(t.length>0)throw new Error(`VRMHumanoidLoaderPlugin: These humanoid bones are required but not exist: ${t.join(", ")}`);return e}}class zk extends zt{constructor(){super(),this._currentTheta=0,this._currentRadius=0,this.theta=0,this.radius=0,this._currentTheta=0,this._currentRadius=0,this._attrPos=new ut(new Float32Array(65*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new ut(new Uint16Array(3*63),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentTheta!==this.theta&&(this._currentTheta=this.theta,e=!0),this._currentRadius!==this.radius&&(this._currentRadius=this.radius,e=!0),e&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,0,0,0);for(let e=0;e<64;e++){const t=e/63*this._currentTheta;this._attrPos.setXYZ(e+1,this._currentRadius*Math.sin(t),0,this._currentRadius*Math.cos(t))}this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<63;e++)this._attrIndex.setXYZ(e*3,0,e+1,e+2);this._attrIndex.needsUpdate=!0}}class Eue extends zt{constructor(){super(),this.radius=0,this._currentRadius=0,this.tail=new j,this._currentTail=new j,this._attrPos=new ut(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new ut(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this.radius&&(this._currentRadius=this.radius,e=!0),this._currentTail.equals(this.tail)||(this._currentTail.copy(this.tail),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}}const iy=new rt,Yk=new rt,Pp=new j,Xk=new j,jk=Math.sqrt(2)/2,Sue=new rt(0,0,-jk,jk),Uue=new j(0,1,0);class Que extends kr{constructor(e){super(),this.matrixAutoUpdate=!1,this.vrmLookAt=e;{const t=new zk;t.radius=.5;const r=new Ri({color:65280,transparent:!0,opacity:.5,side:mi,depthTest:!1,depthWrite:!1});this._meshPitch=new In(t,r),this.add(this._meshPitch)}{const t=new zk;t.radius=.5;const r=new Ri({color:16711680,transparent:!0,opacity:.5,side:mi,depthTest:!1,depthWrite:!1});this._meshYaw=new In(t,r),this.add(this._meshYaw)}{const t=new Eue;t.radius=.1;const r=new Hl({color:16777215,depthTest:!1,depthWrite:!1});this._lineTarget=new f0(t,r),this._lineTarget.frustumCulled=!1,this.add(this._lineTarget)}}dispose(){this._meshYaw.geometry.dispose(),this._meshYaw.material.dispose(),this._meshPitch.geometry.dispose(),this._meshPitch.material.dispose(),this._lineTarget.geometry.dispose(),this._lineTarget.material.dispose()}updateMatrixWorld(e){const t=Zt.DEG2RAD*this.vrmLookAt.yaw;this._meshYaw.geometry.theta=t,this._meshYaw.geometry.update();const r=Zt.DEG2RAD*this.vrmLookAt.pitch;this._meshPitch.geometry.theta=r,this._meshPitch.geometry.update(),this.vrmLookAt.getLookAtWorldPosition(Pp),this.vrmLookAt.getLookAtWorldQuaternion(iy),iy.multiply(this.vrmLookAt.getFaceFrontQuaternion(Yk)),this._meshYaw.position.copy(Pp),this._meshYaw.quaternion.copy(iy),this._meshPitch.position.copy(Pp),this._meshPitch.quaternion.copy(iy),this._meshPitch.quaternion.multiply(Yk.setFromAxisAngle(Uue,t)),this._meshPitch.quaternion.multiply(Sue);const{target:i,autoUpdate:s}=this.vrmLookAt;i!=null&&s&&(i.getWorldPosition(Xk).sub(Pp),this._lineTarget.geometry.tail.copy(Xk),this._lineTarget.geometry.update(),this._lineTarget.position.copy(Pp)),super.updateMatrixWorld(e)}}const Rue=new j,Mue=new j;function eE(n,e){return n.matrixWorld.decompose(Rue,e,Mue),e}function fw(n){return[Math.atan2(-n.z,n.x),Math.atan2(n.y,Math.sqrt(n.x*n.x+n.z*n.z))]}function Kk(n){const e=Math.round(n/2/Math.PI);return n-2*Math.PI*e}const $k=new j(0,0,1),Tue=new j,Nue=new j,kue=new j,Due=new rt,nI=new rt,qk=new rt,Lue=new rt,rI=new $r;class gb{constructor(e,t){this.offsetFromHeadBone=new j,this.autoUpdate=!0,this.faceFront=new j(0,0,1),this.humanoid=e,this.applier=t,this._yaw=0,this._pitch=0,this._needsUpdate=!0,this._restHeadWorldQuaternion=this.getLookAtWorldQuaternion(new rt)}get yaw(){return this._yaw}set yaw(e){this._yaw=e,this._needsUpdate=!0}get pitch(){return this._pitch}set pitch(e){this._pitch=e,this._needsUpdate=!0}get euler(){return console.warn("VRMLookAt: euler is deprecated. use getEuler() instead."),this.getEuler(new $r)}getEuler(e){return e.set(Zt.DEG2RAD*this._pitch,Zt.DEG2RAD*this._yaw,0,"YXZ")}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMLookAt: humanoid must be same in order to copy");return this.offsetFromHeadBone.copy(e.offsetFromHeadBone),this.applier=e.applier,this.autoUpdate=e.autoUpdate,this.target=e.target,this.faceFront.copy(e.faceFront),this}clone(){return new gb(this.humanoid,this.applier).copy(this)}reset(){this._yaw=0,this._pitch=0,this._needsUpdate=!0}getLookAtWorldPosition(e){const t=this.humanoid.getRawBoneNode("head");return e.copy(this.offsetFromHeadBone).applyMatrix4(t.matrixWorld)}getLookAtWorldQuaternion(e){const t=this.humanoid.getRawBoneNode("head");return eE(t,e)}getFaceFrontQuaternion(e){if(this.faceFront.distanceToSquared($k)<.01)return e.copy(this._restHeadWorldQuaternion).invert();const[t,r]=fw(this.faceFront);return rI.set(0,.5*Math.PI+t,r,"YZX"),e.setFromEuler(rI).premultiply(Lue.copy(this._restHeadWorldQuaternion).invert())}getLookAtWorldDirection(e){return this.getLookAtWorldQuaternion(nI),this.getFaceFrontQuaternion(qk),e.copy($k).applyQuaternion(nI).applyQuaternion(qk).applyEuler(this.getEuler(rI))}lookAt(e){const t=Due.copy(this._restHeadWorldQuaternion).multiply(wJ(this.getLookAtWorldQuaternion(nI))),r=this.getLookAtWorldPosition(Nue),i=kue.copy(e).sub(r).applyQuaternion(t).normalize(),[s,o]=fw(this.faceFront),[a,l]=fw(i),A=Kk(a-s),c=Kk(o-l);this._yaw=Zt.RAD2DEG*A,this._pitch=Zt.RAD2DEG*c,this._needsUpdate=!0}update(e){this.target!=null&&this.autoUpdate&&this.lookAt(this.target.getWorldPosition(Tue)),this._needsUpdate&&(this._needsUpdate=!1,this.applier.applyYawPitch(this._yaw,this._pitch))}}gb.EULER_ORDER="YXZ";const Vue=new j(0,0,1),zo=new rt,Cd=new rt,Ss=new $r(0,0,0,"YXZ");class pw{constructor(e,t,r,i,s){this.humanoid=e,this.rangeMapHorizontalInner=t,this.rangeMapHorizontalOuter=r,this.rangeMapVerticalDown=i,this.rangeMapVerticalUp=s,this.faceFront=new j(0,0,1),this._restQuatLeftEye=new rt,this._restQuatRightEye=new rt,this._restLeftEyeParentWorldQuat=new rt,this._restRightEyeParentWorldQuat=new rt;const o=this.humanoid.getRawBoneNode("leftEye"),a=this.humanoid.getRawBoneNode("rightEye");o&&(this._restQuatLeftEye.copy(o.quaternion),eE(o.parent,this._restLeftEyeParentWorldQuat)),a&&(this._restQuatRightEye.copy(a.quaternion),eE(a.parent,this._restRightEyeParentWorldQuat))}applyYawPitch(e,t){const r=this.humanoid.getRawBoneNode("leftEye"),i=this.humanoid.getRawBoneNode("rightEye"),s=this.humanoid.getNormalizedBoneNode("leftEye"),o=this.humanoid.getNormalizedBoneNode("rightEye");r&&(t<0?Ss.x=-Zt.DEG2RAD*this.rangeMapVerticalDown.map(-t):Ss.x=Zt.DEG2RAD*this.rangeMapVerticalUp.map(t),e<0?Ss.y=-Zt.DEG2RAD*this.rangeMapHorizontalInner.map(-e):Ss.y=Zt.DEG2RAD*this.rangeMapHorizontalOuter.map(e),zo.setFromEuler(Ss),this._getWorldFaceFrontQuat(Cd),s.quaternion.copy(Cd).multiply(zo).multiply(Cd.invert()),zo.copy(this._restLeftEyeParentWorldQuat),r.quaternion.copy(s.quaternion).multiply(zo).premultiply(zo.invert()).multiply(this._restQuatLeftEye)),i&&(t<0?Ss.x=-Zt.DEG2RAD*this.rangeMapVerticalDown.map(-t):Ss.x=Zt.DEG2RAD*this.rangeMapVerticalUp.map(t),e<0?Ss.y=-Zt.DEG2RAD*this.rangeMapHorizontalOuter.map(-e):Ss.y=Zt.DEG2RAD*this.rangeMapHorizontalInner.map(e),zo.setFromEuler(Ss),this._getWorldFaceFrontQuat(Cd),o.quaternion.copy(Cd).multiply(zo).multiply(Cd.invert()),zo.copy(this._restRightEyeParentWorldQuat),i.quaternion.copy(o.quaternion).multiply(zo).premultiply(zo.invert()).multiply(this._restQuatRightEye))}lookAt(e){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const t=Zt.RAD2DEG*e.y,r=Zt.RAD2DEG*e.x;this.applyYawPitch(t,r)}_getWorldFaceFrontQuat(e){if(this.faceFront.distanceToSquared(Vue)<.01)return e.identity();const[t,r]=fw(this.faceFront);return Ss.set(0,.5*Math.PI+t,r,"YZX"),e.setFromEuler(Ss)}}pw.type="bone";class tE{constructor(e,t,r,i,s){this.expressions=e,this.rangeMapHorizontalInner=t,this.rangeMapHorizontalOuter=r,this.rangeMapVerticalDown=i,this.rangeMapVerticalUp=s}applyYawPitch(e,t){t<0?(this.expressions.setValue("lookDown",0),this.expressions.setValue("lookUp",this.rangeMapVerticalUp.map(-t))):(this.expressions.setValue("lookUp",0),this.expressions.setValue("lookDown",this.rangeMapVerticalDown.map(t))),e<0?(this.expressions.setValue("lookLeft",0),this.expressions.setValue("lookRight",this.rangeMapHorizontalOuter.map(-e))):(this.expressions.setValue("lookRight",0),this.expressions.setValue("lookLeft",this.rangeMapHorizontalOuter.map(e)))}lookAt(e){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const t=Zt.RAD2DEG*e.y,r=Zt.RAD2DEG*e.x;this.applyYawPitch(t,r)}}tE.type="expression";class eD{constructor(e,t){this.inputMaxValue=e,this.outputScale=t}map(e){return this.outputScale*yJ(e/this.inputMaxValue)}}const Pue=new Set(["1.0","1.0-beta"]);class Oue{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}get name(){return"VRMLookAtLoaderPlugin"}afterRoot(e){return Jt(this,void 0,void 0,function*(){const t=e.userData.vrmHumanoid;if(t===null)return;if(t===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");const r=e.userData.vrmExpressionManager;if(r!==null){if(r===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmExpressionManager is undefined. VRMExpressionLoaderPlugin have to be used first");e.userData.vrmLookAt=yield this._import(e,t,r)}})}_import(e,t,r){return Jt(this,void 0,void 0,function*(){if(t==null||r==null)return null;const i=yield this._v1Import(e,t,r);if(i)return i;const s=yield this._v0Import(e,t,r);return s||null})}_v1Import(e,t,r){var i,s,o;return Jt(this,void 0,void 0,function*(){const a=this.parser.json;if(!(((i=a.extensionsUsed)===null||i===void 0?void 0:i.indexOf("VRMC_vrm"))!==-1))return null;const A=(s=a.extensions)===null||s===void 0?void 0:s.VRMC_vrm;if(!A)return null;const c=A.specVersion;if(!Pue.has(c))return console.warn(`VRMLookAtLoaderPlugin: Unknown VRMC_vrm specVersion "${c}"`),null;const u=A.lookAt;if(!u)return null;const h=u.type==="expression"?1:10,d=this._v1ImportRangeMap(u.rangeMapHorizontalInner,h),p=this._v1ImportRangeMap(u.rangeMapHorizontalOuter,h),f=this._v1ImportRangeMap(u.rangeMapVerticalDown,h),m=this._v1ImportRangeMap(u.rangeMapVerticalUp,h);let g;u.type==="expression"?g=new tE(r,d,p,f,m):g=new pw(t,d,p,f,m);const v=this._importLookAt(t,g);return v.offsetFromHeadBone.fromArray((o=u.offsetFromHeadBone)!==null&&o!==void 0?o:[0,.06,0]),v})}_v1ImportRangeMap(e,t){var r,i;return new eD((r=e==null?void 0:e.inputMaxValue)!==null&&r!==void 0?r:90,(i=e==null?void 0:e.outputScale)!==null&&i!==void 0?i:t)}_v0Import(e,t,r){var i,s,o,a;return Jt(this,void 0,void 0,function*(){const A=(i=this.parser.json.extensions)===null||i===void 0?void 0:i.VRM;if(!A)return null;const c=A.firstPerson;if(!c)return null;const u=c.lookAtTypeName==="BlendShape"?1:10,h=this._v0ImportDegreeMap(c.lookAtHorizontalInner,u),d=this._v0ImportDegreeMap(c.lookAtHorizontalOuter,u),p=this._v0ImportDegreeMap(c.lookAtVerticalDown,u),f=this._v0ImportDegreeMap(c.lookAtVerticalUp,u);let m;c.lookAtTypeName==="BlendShape"?m=new tE(r,h,d,p,f):m=new pw(t,h,d,p,f);const g=this._importLookAt(t,m);return c.firstPersonBoneOffset?g.offsetFromHeadBone.set((s=c.firstPersonBoneOffset.x)!==null&&s!==void 0?s:0,(o=c.firstPersonBoneOffset.y)!==null&&o!==void 0?o:.06,-((a=c.firstPersonBoneOffset.z)!==null&&a!==void 0?a:0)):g.offsetFromHeadBone.set(0,.06,0),g.faceFront.set(0,0,-1),m instanceof pw&&m.faceFront.set(0,0,-1),g})}_v0ImportDegreeMap(e,t){var r,i;const s=e==null?void 0:e.curve;return JSON.stringify(s)!=="[0,0,0,1,1,1,1,0]"&&console.warn("Curves of LookAtDegreeMap defined in VRM 0.0 are not supported"),new eD((r=e==null?void 0:e.xRange)!==null&&r!==void 0?r:90,(i=e==null?void 0:e.yRange)!==null&&i!==void 0?i:t)}_importLookAt(e,t){const r=new gb(e,t);if(this.helperRoot){const i=new Que(r);this.helperRoot.add(i),i.renderOrder=this.helperRoot.renderOrder}return r}}function Wue(n,e){return typeof n!="string"||n===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(n)&&(e=e.replace(/(^https?:\/\/[^/]+).*/i,"$1")),/^(https?:)?\/\//i.test(n)||/^data:.*,.*$/i.test(n)||/^blob:.*$/i.test(n)?n:e+n)}const Zue=new Set(["1.0","1.0-beta"]);class Gue{constructor(e,t){var r,i,s;this.parser=e,this.needThumbnailImage=(r=t==null?void 0:t.needThumbnailImage)!==null&&r!==void 0?r:!0,this.acceptLicenseUrls=(i=t==null?void 0:t.acceptLicenseUrls)!==null&&i!==void 0?i:["https://vrm.dev/licenses/1.0/"],this.acceptV0Meta=(s=t==null?void 0:t.acceptV0Meta)!==null&&s!==void 0?s:!0}get name(){return"VRMMetaLoaderPlugin"}afterRoot(e){return Jt(this,void 0,void 0,function*(){e.userData.vrmMeta=yield this._import(e)})}_import(e){return Jt(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const r=yield this._v0Import(e);return r??null})}_v1Import(e){var t,r,i;return Jt(this,void 0,void 0,function*(){const s=this.parser.json;if(!(((t=s.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const a=(r=s.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(a==null)return null;const l=a.specVersion;if(!Zue.has(l))return console.warn(`VRMMetaLoaderPlugin: Unknown VRMC_vrm specVersion "${l}"`),null;const A=a.meta;if(!A)return null;const c=A.licenseUrl;if(!new Set(this.acceptLicenseUrls).has(c))throw new Error(`VRMMetaLoaderPlugin: The license url "${c}" is not accepted`);let h;return this.needThumbnailImage&&A.thumbnailImage!=null&&(h=(i=yield this._extractGLTFImage(A.thumbnailImage))!==null&&i!==void 0?i:void 0),{metaVersion:"1",name:A.name,version:A.version,authors:A.authors,copyrightInformation:A.copyrightInformation,contactInformation:A.contactInformation,references:A.references,thirdPartyLicenses:A.thirdPartyLicenses,thumbnailImage:h,licenseUrl:A.licenseUrl,avatarPermission:A.avatarPermission,allowExcessivelyViolentUsage:A.allowExcessivelyViolentUsage,allowExcessivelySexualUsage:A.allowExcessivelySexualUsage,commercialUsage:A.commercialUsage,allowPoliticalOrReligiousUsage:A.allowPoliticalOrReligiousUsage,allowAntisocialOrHateUsage:A.allowAntisocialOrHateUsage,creditNotation:A.creditNotation,allowRedistribution:A.allowRedistribution,modification:A.modification,otherLicenseUrl:A.otherLicenseUrl}})}_v0Import(e){var t;return Jt(this,void 0,void 0,function*(){const i=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!i)return null;const s=i.meta;if(!s)return null;if(!this.acceptV0Meta)throw new Error("VRMMetaLoaderPlugin: Attempted to load VRM0.0 meta but acceptV0Meta is false");let o;return this.needThumbnailImage&&s.texture!=null&&s.texture!==-1&&(o=yield this.parser.getDependency("texture",s.texture)),{metaVersion:"0",allowedUserName:s.allowedUserName,author:s.author,commercialUssageName:s.commercialUssageName,contactInformation:s.contactInformation,licenseName:s.licenseName,otherLicenseUrl:s.otherLicenseUrl,otherPermissionUrl:s.otherPermissionUrl,reference:s.reference,sexualUssageName:s.sexualUssageName,texture:o??void 0,title:s.title,version:s.version,violentUssageName:s.violentUssageName}})}_extractGLTFImage(e){var t;return Jt(this,void 0,void 0,function*(){const i=(t=this.parser.json.images)===null||t===void 0?void 0:t[e];if(i==null)return console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${e}] of glTF as a thumbnail but the image doesn't exist`),null;let s=i.uri;if(i.bufferView!=null){const a=yield this.parser.getDependency("bufferView",i.bufferView),l=new Blob([a],{type:i.mimeType});s=URL.createObjectURL(l)}return s==null?(console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${e}] of glTF as a thumbnail but the image couldn't load properly`),null):yield new IG().loadAsync(Wue(s,this.parser.options.path)).catch(a=>(console.error(a),console.warn("VRMMetaLoaderPlugin: Failed to load a thumbnail image"),null))})}}class Jue{constructor(e){this.scene=e.scene,this.meta=e.meta,this.humanoid=e.humanoid,this.expressionManager=e.expressionManager,this.firstPerson=e.firstPerson,this.lookAt=e.lookAt}update(e){this.humanoid.update(),this.lookAt&&this.lookAt.update(e),this.expressionManager&&this.expressionManager.update()}}class Hue extends Jue{constructor(e){super(e),this.materials=e.materials,this.springBoneManager=e.springBoneManager,this.nodeConstraintManager=e.nodeConstraintManager}update(e){super.update(e),this.nodeConstraintManager&&this.nodeConstraintManager.update(),this.springBoneManager&&this.springBoneManager.update(e),this.materials&&this.materials.forEach(t=>{t.update&&t.update(e)})}}function sy(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}/*!
 * @pixiv/three-vrm-materials-mtoon v1.0.9
 * MToon (toon material) module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-materials-mtoon is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */function qc(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}var zue=`// #define PHONG

varying vec3 vViewPosition;

#ifndef FLAT_SHADED
  varying vec3 vNormal;
#endif

#include <common>

// #include <uv_pars_vertex>
#ifdef MTOON_USE_UV
  varying vec2 vUv;
  uniform mat3 uvTransform;
#endif

#include <uv2_pars_vertex>
// #include <displacementmap_pars_vertex>
// #include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

#ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
  uniform sampler2D outlineWidthMultiplyTexture;
  uniform mat3 outlineWidthMultiplyTextureUvTransform;
#endif

uniform float outlineWidthFactor;

void main() {

  // #include <uv_vertex>
  #ifdef MTOON_USE_UV
    vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
  #endif

  #include <uv2_vertex>
  #include <color_vertex>

  #include <beginnormal_vertex>
  #include <morphnormal_vertex>
  #include <skinbase_vertex>
  #include <skinnormal_vertex>

  // we need this to compute the outline properly
  objectNormal = normalize( objectNormal );

  #include <defaultnormal_vertex>

  #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED
    vNormal = normalize( transformedNormal );
  #endif

  #include <begin_vertex>

  #include <morphtarget_vertex>
  #include <skinning_vertex>
  // #include <displacementmap_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>
  #include <clipping_planes_vertex>

  vViewPosition = - mvPosition.xyz;

  float outlineTex = 1.0;

  #ifdef OUTLINE
    #ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
      vec2 outlineWidthMultiplyTextureUv = ( outlineWidthMultiplyTextureUvTransform * vec3( vUv, 1 ) ).xy;
      outlineTex = texture2D( outlineWidthMultiplyTexture, outlineWidthMultiplyTextureUv ).g;
    #endif

    #ifdef OUTLINE_WIDTH_WORLD
      float worldNormalLength = length( transformedNormal );
      vec3 outlineOffset = outlineWidthFactor * outlineTex * worldNormalLength * objectNormal;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( outlineOffset + transformed, 1.0 );
    #endif

    #ifdef OUTLINE_WIDTH_SCREEN
      vec3 clipNormal = ( projectionMatrix * modelViewMatrix * vec4( objectNormal, 0.0 ) ).xyz;
      vec2 projectedNormal = normalize( clipNormal.xy );
      projectedNormal.x *= projectionMatrix[ 0 ].x / projectionMatrix[ 1 ].y;
      gl_Position.xy += 2.0 * outlineWidthFactor * outlineTex * projectedNormal.xy;
    #endif

    gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic
  #endif

  #include <worldpos_vertex>
  // #include <envmap_vertex>
  #include <shadowmap_vertex>
  #include <fog_vertex>

}`,Yue=`// #define PHONG

uniform vec3 litFactor;

uniform float opacity;

uniform vec3 shadeColorFactor;
#ifdef USE_SHADEMULTIPLYTEXTURE
  uniform sampler2D shadeMultiplyTexture;
  uniform mat3 shadeMultiplyTextureUvTransform;
#endif

uniform float shadingShiftFactor;
uniform float shadingToonyFactor;

#ifdef USE_SHADINGSHIFTTEXTURE
  uniform sampler2D shadingShiftTexture;
  uniform mat3 shadingShiftTextureUvTransform;
  uniform float shadingShiftTextureScale;
#endif

uniform float giEqualizationFactor;

uniform vec3 parametricRimColorFactor;
#ifdef USE_RIMMULTIPLYTEXTURE
  uniform sampler2D rimMultiplyTexture;
  uniform mat3 rimMultiplyTextureUvTransform;
#endif
uniform float rimLightingMixFactor;
uniform float parametricRimFresnelPowerFactor;
uniform float parametricRimLiftFactor;

#ifdef USE_MATCAPTEXTURE
  uniform vec3 matcapFactor;
  uniform sampler2D matcapTexture;
  uniform mat3 matcapTextureUvTransform;
#endif

uniform vec3 emissive;
uniform float emissiveIntensity;

uniform vec3 outlineColorFactor;
uniform float outlineLightingMixFactor;

#ifdef USE_UVANIMATIONMASKTEXTURE
  uniform sampler2D uvAnimationMaskTexture;
  uniform mat3 uvAnimationMaskTextureUvTransform;
#endif

uniform float uvAnimationScrollXOffset;
uniform float uvAnimationScrollYOffset;
uniform float uvAnimationRotationPhase;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>

// #include <uv_pars_fragment>
#if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
  varying vec2 vUv;
#endif

#include <uv2_pars_fragment>
#include <map_pars_fragment>

#ifdef USE_MAP
  uniform mat3 mapUvTransform;
#endif

// #include <alphamap_pars_fragment>

#if THREE_VRM_THREE_REVISION >= 132
  #include <alphatest_pars_fragment>
#endif

#include <aomap_pars_fragment>
// #include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>

#ifdef USE_EMISSIVEMAP
  uniform mat3 emissiveMapUvTransform;
#endif

// #include <envmap_common_pars_fragment>
// #include <envmap_pars_fragment>
// #include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>

// #include <bsdfs>
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
  return RECIPROCAL_PI * diffuseColor;
}

#include <lights_pars_begin>

#if THREE_VRM_THREE_REVISION >= 132
  #include <normal_pars_fragment>
#endif

// #include <lights_phong_pars_fragment>
varying vec3 vViewPosition;

#if THREE_VRM_THREE_REVISION < 132
  #ifndef FLAT_SHADED
    varying vec3 vNormal;
  #endif
#endif

struct MToonMaterial {
  vec3 diffuseColor;
  vec3 shadeColor;
  float shadingShift;
};

float linearstep( float a, float b, float t ) {
  return clamp( ( t - a ) / ( b - a ), 0.0, 1.0 );
}

/**
 * Convert NdotL into toon shading factor using shadingShift and shadingToony
 */
float getShading(
  const in float dotNL,
  const in float shadow,
  const in float shadingShift
) {
  float shading = dotNL;
  shading = shading + shadingShift;
  shading = linearstep( -1.0 + shadingToonyFactor, 1.0 - shadingToonyFactor, shading );
  shading *= shadow;
  return shading;
}

/**
 * Mix diffuseColor and shadeColor using shading factor and light color
 */
vec3 getDiffuse(
  const in MToonMaterial material,
  const in float shading,
  in vec3 lightColor
) {
  #ifdef DEBUG_LITSHADERATE
    return vec3( BRDF_Lambert( shading * lightColor ) );
  #endif

  #if THREE_VRM_THREE_REVISION < 132
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      lightColor *= PI;
    #endif
  #endif

  vec3 col = lightColor * BRDF_Lambert( mix( material.shadeColor, material.diffuseColor, shading ) );

  // The "comment out if you want to PBR absolutely" line
  #ifdef V0_COMPAT_SHADE
    col = min( col, material.diffuseColor );
  #endif

  return col;
}

void RE_Direct_MToon( const in IncidentLight directLight, const in GeometricContext geometry, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
  float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
  vec3 irradiance = directLight.color;

  #if THREE_VRM_THREE_REVISION < 132
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      irradiance *= PI;
    #endif
  #endif

  // directSpecular will be used for rim lighting, not an actual specular
  reflectedLight.directSpecular += irradiance;

  irradiance *= dotNL;

  float shading = getShading( dotNL, shadow, material.shadingShift );

  // toon shaded diffuse
  reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
}

void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in GeometricContext geometry, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
  // indirect diffuse will use diffuseColor, no shadeColor involved
  reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

  // directSpecular will be used for rim lighting, not an actual specular
  reflectedLight.directSpecular += irradiance;
}

#define RE_Direct RE_Direct_MToon
#define RE_IndirectDiffuse RE_IndirectDiffuse_MToon
#define Material_LightProbeLOD( material ) (0)

#include <shadowmap_pars_fragment>
// #include <bumpmap_pars_fragment>

// #include <normalmap_pars_fragment>
#ifdef USE_NORMALMAP

  uniform sampler2D normalMap;
  uniform mat3 normalMapUvTransform;
  uniform vec2 normalScale;

#endif

#ifdef OBJECTSPACE_NORMALMAP

  uniform mat3 normalMatrix;

#endif

#if ! defined ( USE_TANGENT ) && defined ( TANGENTSPACE_NORMALMAP )

  // Per-Pixel Tangent Space Normal Mapping
  // http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html

  // three-vrm specific change: it requires \`uv\` as an input in order to support uv scrolls

  // Temporary compat against shader change @ Three.js r126
  // See: #21205, #21307, #21299
  #if THREE_VRM_THREE_REVISION >= 126

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = normalize( surf_norm );

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?
      if ( length( T ) == 0.0 || length( B ) == 0.0 ) {
        return surf_norm;
      }

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );

      return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );

    }

  #else

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {

      // Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      float scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude

      vec3 S = ( q0 * st1.t - q1 * st0.t ) * scale;
      vec3 T = ( - q0 * st1.s + q1 * st0.s ) * scale;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?

      if ( length( S ) == 0.0 || length( T ) == 0.0 ) {
        return surf_norm;
      }

      S = normalize( S );
      T = normalize( T );
      vec3 N = normalize( surf_norm );

      #ifdef DOUBLE_SIDED

        // Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331

        bool frontFacing = dot( cross( S, T ), N ) > 0.0;

        mapN.xy *= ( float( frontFacing ) * 2.0 - 1.0 );

      #else

        mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );

      #endif

      mat3 tsn = mat3( S, T, N );
      return normalize( tsn * mapN );

    }

  #endif

#endif

// #include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

// == post correction ==========================================================
void postCorrection() {
  #include <tonemapping_fragment>
  #include <encodings_fragment>
  #include <fog_fragment>
  #include <premultiplied_alpha_fragment>
  #include <dithering_fragment>
}

// == main procedure ===========================================================
void main() {
  #include <clipping_planes_fragment>

  vec2 uv = vec2(0.5, 0.5);

  #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
    uv = vUv;

    float uvAnimMask = 1.0;
    #ifdef USE_UVANIMATIONMASKTEXTURE
      vec2 uvAnimationMaskTextureUv = ( uvAnimationMaskTextureUvTransform * vec3( uv, 1 ) ).xy;
      uvAnimMask = texture2D( uvAnimationMaskTexture, uvAnimationMaskTextureUv ).b;
    #endif

    uv = uv + vec2( uvAnimationScrollXOffset, uvAnimationScrollYOffset ) * uvAnimMask;
    float uvRotCos = cos( uvAnimationRotationPhase * uvAnimMask );
    float uvRotSin = sin( uvAnimationRotationPhase * uvAnimMask );
    uv = mat2( uvRotCos, -uvRotSin, uvRotSin, uvRotCos ) * ( uv - 0.5 ) + 0.5;
  #endif

  #ifdef DEBUG_UV
    gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
      gl_FragColor = vec4( uv, 0.0, 1.0 );
    #endif
    return;
  #endif

  vec4 diffuseColor = vec4( litFactor, opacity );
  ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
  vec3 totalEmissiveRadiance = emissive * emissiveIntensity;

  #include <logdepthbuf_fragment>

  // #include <map_fragment>
  #ifdef USE_MAP
    vec2 mapUv = ( mapUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      vec4 sampledDiffuseColor = texture2D( map, mapUv );
      #ifdef DECODE_VIDEO_TEXTURE
        sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
      #endif
      diffuseColor *= sampledDiffuseColor;
    #else
      // COMPAT: pre-r137
      vec4 texelColor = texture2D( map, mapUv );
      texelColor = mapTexelToLinear( texelColor );
      diffuseColor *= texelColor;
    #endif
  #endif

  // #include <color_fragment>
  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    diffuseColor.rgb *= vColor;
  #endif

  // #include <alphamap_fragment>

  #include <alphatest_fragment>

  // #include <specularmap_fragment>
  #include <normal_fragment_begin>

  #ifdef OUTLINE
    normal *= -1.0;
  #endif

  // #include <normal_fragment_maps>

  #ifdef OBJECTSPACE_NORMALMAP

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;
    normal = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals

    #ifdef FLIP_SIDED

      normal = - normal;

    #endif

    #ifdef DOUBLE_SIDED

      // Temporary compat against shader change @ Three.js r126
      // See: #21205, #21307, #21299
      #if THREE_VRM_THREE_REVISION >= 126

        normal = normal * faceDirection;

      #else

        normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );

      #endif

    #endif

    normal = normalize( normalMatrix * normal );

  #elif defined( TANGENTSPACE_NORMALMAP )

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;
    vec3 mapN = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;

    #ifdef USE_TANGENT

      normal = normalize( vTBN * mapN );

    #else

      // Temporary compat against shader change @ Three.js r126
      // See: #21205, #21307, #21299
      #if THREE_VRM_THREE_REVISION >= 126

        normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN, faceDirection );

      #else

        normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN );

      #endif

    #endif

  #endif

  // #include <emissivemap_fragment>
  #ifdef USE_EMISSIVEMAP
    vec2 emissiveMapUv = ( emissiveMapUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      totalEmissiveRadiance *= texture2D( emissiveMap, emissiveMapUv ).rgb;
    #else
      // COMPAT: pre-r137
      totalEmissiveRadiance *= emissiveMapTexelToLinear( texture2D( emissiveMap, emissiveMapUv ) ).rgb;
    #endif
  #endif

  #ifdef DEBUG_NORMAL
    gl_FragColor = vec4( 0.5 + 0.5 * normal, 1.0 );
    return;
  #endif

  // -- MToon: lighting --------------------------------------------------------
  // accumulation
  // #include <lights_phong_fragment>
  MToonMaterial material;

  material.diffuseColor = diffuseColor.rgb;

  material.shadeColor = shadeColorFactor;
  #ifdef USE_SHADEMULTIPLYTEXTURE
    vec2 shadeMultiplyTextureUv = ( shadeMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      material.shadeColor *= texture2D( shadeMultiplyTexture, shadeMultiplyTextureUv ).rgb;
    #else
      // COMPAT: pre-r137
      material.shadeColor *= shadeMultiplyTextureTexelToLinear( texture2D( shadeMultiplyTexture, shadeMultiplyTextureUv) ).rgb;
    #endif
  #endif

  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    material.shadeColor.rgb *= vColor;
  #endif

  material.shadingShift = shadingShiftFactor;
  #ifdef USE_SHADINGSHIFTTEXTURE
    vec2 shadingShiftTextureUv = ( shadingShiftTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadingShift += texture2D( shadingShiftTexture, shadingShiftTextureUv ).r * shadingShiftTextureScale;
  #endif

  // #include <lights_fragment_begin>

  // MToon Specific changes:
  // Since we want to take shadows into account of shading instead of irradiance,
  // we had to modify the codes that multiplies the results of shadowmap into color of direct lights.

  GeometricContext geometry;

  geometry.position = - vViewPosition;
  geometry.normal = normal;
  geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

  #ifdef CLEARCOAT

    geometry.clearcoatNormal = clearcoatNormal;

  #endif

  IncidentLight directLight;

  // since these variables will be used in unrolled loop, we have to define in prior
  float shadow;

  #if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

    PointLight pointLight;
    #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
    PointLightShadow pointLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

      pointLight = pointLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getPointLightInfo( pointLight, geometry, directLight );
      #else
        getPointDirectLightIrradiance( pointLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
      pointLightShadow = pointLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

    SpotLight spotLight;
    #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
    SpotLightShadow spotLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

      spotLight = spotLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getSpotLightInfo( spotLight, geometry, directLight );
      #else
        getSpotDirectLightIrradiance( spotLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
      spotLightShadow = spotLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )

    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
    DirectionalLightShadow directionalLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

      directionalLight = directionalLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getDirectionalLightInfo( directionalLight, geometry, directLight );
      #else
        getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
      directionalLightShadow = directionalLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  // #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

  //   RectAreaLight rectAreaLight;

  //   #pragma unroll_loop_start
  //   for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

  //     rectAreaLight = rectAreaLights[ i ];
  //     RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );

  //   }
  //   #pragma unroll_loop_end

  // #endif

  #if defined( RE_IndirectDiffuse )

    vec3 iblIrradiance = vec3( 0.0 );

    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

    #if THREE_VRM_THREE_REVISION >= 133
      irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
    #else
      irradiance += getLightProbeIrradiance( lightProbe, geometry );
    #endif

    #if ( NUM_HEMI_LIGHTS > 0 )

      #pragma unroll_loop_start
      for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

        #if THREE_VRM_THREE_REVISION >= 133
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
        #else
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
        #endif

      }
      #pragma unroll_loop_end

    #endif

  #endif

  // #if defined( RE_IndirectSpecular )

  //   vec3 radiance = vec3( 0.0 );
  //   vec3 clearcoatRadiance = vec3( 0.0 );

  // #endif

  #include <lights_fragment_maps>
  #include <lights_fragment_end>

  // modulation
  #include <aomap_fragment>

  vec3 col = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;

  #ifdef DEBUG_LITSHADERATE
    gl_FragColor = vec4( col, diffuseColor.a );
    postCorrection();
    return;
  #endif

  // -- MToon: rim lighting -----------------------------------------
  vec3 viewDir = normalize( vViewPosition );

  #ifndef PHYSICALLY_CORRECT_LIGHTS
    reflectedLight.directSpecular /= PI;
  #endif
  vec3 rimMix = mix( vec3( 1.0 ), reflectedLight.directSpecular, 1.0 );

  vec3 rim = parametricRimColorFactor * pow( saturate( 1.0 - dot( viewDir, normal ) + parametricRimLiftFactor ), parametricRimFresnelPowerFactor );

  #ifdef USE_MATCAPTEXTURE
    {
      vec3 x = normalize( vec3( viewDir.z, 0.0, -viewDir.x ) );
      vec3 y = cross( viewDir, x ); // guaranteed to be normalized
      vec2 sphereUv = 0.5 + 0.5 * vec2( dot( x, normal ), -dot( y, normal ) );
      sphereUv = ( matcapTextureUvTransform * vec3( sphereUv, 1 ) ).xy;
      #if THREE_VRM_THREE_REVISION >= 137
        vec3 matcap = texture2D( matcapTexture, sphereUv ).rgb;
      #else
        // COMPAT: pre-r137
        vec3 matcap = matcapTextureTexelToLinear( texture2D( matcapTexture, sphereUv ) ).rgb;
      #endif
      rim += matcapFactor * matcap;
    }
  #endif

  #ifdef USE_RIMMULTIPLYTEXTURE
    vec2 rimMultiplyTextureUv = ( rimMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      rim *= texture2D( rimMultiplyTexture, rimMultiplyTextureUv ).rgb;
    #else
      // COMPAT: pre-r137
      rim *= rimMultiplyTextureTexelToLinear( texture2D( rimMultiplyTexture, rimMultiplyTextureUv ) ).rgb;
    #endif
  #endif

  col += rimMix * rim;

  // -- MToon: Emission --------------------------------------------------------
  col += totalEmissiveRadiance;

  // #include <envmap_fragment>

  // -- Almost done! -----------------------------------------------------------
  #if defined( OUTLINE )
    col = outlineColorFactor.rgb * mix( vec3( 1.0 ), col, outlineLightingMixFactor );
  #endif

  gl_FragColor = vec4( col, diffuseColor.a );
  postCorrection();
}
`;const Xue={None:"none",Normal:"normal",LitShadeRate:"litShadeRate",UV:"uv"},iI={None:"none",WorldCoordinates:"worldCoordinates",ScreenCoordinates:"screenCoordinates"},jue=3002,Kue=3004,$ue=3005,que=3006,ede=3007,tde=n=>{if(parseInt(Ps,10)>=136)switch(n){case gs:return["Linear","( value )"];case gt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}else switch(n){case gs:return["Linear","( value )"];case gt:return["sRGB","( value )"];case jue:return["RGBE","( value )"];case Kue:return["RGBM","( value, 7.0 )"];case $ue:return["RGBM","( value, 16.0 )"];case que:return["RGBD","( value, 256.0 )"];case ede:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+n)}},sI=(n,e)=>{const t=tde(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"};function oI(n,e){let t;return n&&n.isTexture?t=n.encoding:t=gs,parseInt(Ps,10)>=133&&e&&n&&n.isTexture&&n.format===Ir&&n.type===sc&&n.encoding===gt&&(t=gs),t}class gw extends Sr{constructor(e={}){super({vertexShader:zue,fragmentShader:Yue}),this.uvAnimationScrollXSpeedFactor=0,this.uvAnimationScrollYSpeedFactor=0,this.uvAnimationRotationSpeedFactor=0,this.fog=!0,this.normalMapType=Tu,this._ignoreVertexColor=!0,this._v0CompatShade=!1,this._debugMode=Xue.None,this._outlineWidthMode=iI.None,this._isOutline=!1,e.transparentWithZWrite&&(e.depthWrite=!0),delete e.transparentWithZWrite,e.fog=!0,e.lights=!0,e.clipping=!0,parseInt(Ps,10)<129&&(e.skinning=e.skinning||!1),parseInt(Ps,10)<131&&(e.morphTargets=e.morphTargets||!1,e.morphNormals=e.morphNormals||!1),this.uniforms=yU.merge([Pe.common,Pe.normalmap,Pe.emissivemap,Pe.fog,Pe.lights,{litFactor:{value:new Ve(1,1,1)},mapUvTransform:{value:new Ln},colorAlpha:{value:1},normalMapUvTransform:{value:new Ln},shadeColorFactor:{value:new Ve(.97,.81,.86)},shadeMultiplyTexture:{value:null},shadeMultiplyTextureUvTransform:{value:new Ln},shadingShiftFactor:{value:0},shadingShiftTexture:{value:null},shadingShiftTextureUvTransform:{value:new Ln},shadingShiftTextureScale:{value:null},shadingToonyFactor:{value:.9},giEqualizationFactor:{value:.9},matcapFactor:{value:new Ve(0,0,0)},matcapTexture:{value:null},matcapTextureUvTransform:{value:new Ln},parametricRimColorFactor:{value:new Ve(0,0,0)},rimMultiplyTexture:{value:null},rimMultiplyTextureUvTransform:{value:new Ln},rimLightingMixFactor:{value:0},parametricRimFresnelPowerFactor:{value:1},parametricRimLiftFactor:{value:0},emissive:{value:new Ve(0,0,0)},emissiveIntensity:{value:1},emissiveMapUvTransform:{value:new Ln},outlineWidthMultiplyTexture:{value:null},outlineWidthMultiplyTextureUvTransform:{value:new Ln},outlineWidthFactor:{value:.5},outlineColorFactor:{value:new Ve(0,0,0)},outlineLightingMixFactor:{value:1},uvAnimationMaskTexture:{value:null},uvAnimationMaskTextureUvTransform:{value:new Ln},uvAnimationScrollXOffset:{value:0},uvAnimationScrollYOffset:{value:0},uvAnimationRotationPhase:{value:0}},e.uniforms]),this.setValues(e),this._uploadUniformsWorkaround(),this.customProgramCacheKey=()=>[...Object.entries(this._generateDefines()).map(([t,r])=>`${t}:${r}`),this.matcapTexture?`matcapTextureEncoding:${this.matcapTexture.encoding}`:"",this.shadeMultiplyTexture?`shadeMultiplyTextureEncoding:${this.shadeMultiplyTexture.encoding}`:"",this.rimMultiplyTexture?`rimMultiplyTextureEncoding:${this.rimMultiplyTexture.encoding}`:""].join(","),this.onBeforeCompile=(t,r)=>{const i=r.capabilities.isWebGL2,s=parseInt(Ps,10),o=Object.entries(Object.assign(Object.assign({},this._generateDefines()),this.defines)).filter(([l,A])=>!!A).map(([l,A])=>`#define ${l} ${A}`).join(`
`)+`
`;let a="";parseInt(Ps,10)<137&&(a=(this.matcapTexture!==null?sI("matcapTextureTexelToLinear",oI(this.matcapTexture,i))+`
`:"")+(this.shadeMultiplyTexture!==null?sI("shadeMultiplyTextureTexelToLinear",oI(this.shadeMultiplyTexture,i))+`
`:"")+(this.rimMultiplyTexture!==null?sI("rimMultiplyTextureTexelToLinear",oI(this.rimMultiplyTexture,i))+`
`:"")),t.vertexShader=o+t.vertexShader,t.fragmentShader=o+a+t.fragmentShader,s<132&&(t.fragmentShader=t.fragmentShader.replace("#include <normal_pars_fragment>",""),t.fragmentShader=t.fragmentShader.replace("#include <alphatest_pars_fragment>",""))}}get color(){return this.uniforms.litFactor.value}set color(e){this.uniforms.litFactor.value=e}get map(){return this.uniforms.map.value}set map(e){this.uniforms.map.value=e}get normalMap(){return this.uniforms.normalMap.value}set normalMap(e){this.uniforms.normalMap.value=e}get normalScale(){return this.uniforms.normalScale.value}set normalScale(e){this.uniforms.normalScale.value=e}get emissive(){return this.uniforms.emissive.value}set emissive(e){this.uniforms.emissive.value=e}get emissiveIntensity(){return this.uniforms.emissiveIntensity.value}set emissiveIntensity(e){this.uniforms.emissiveIntensity.value=e}get emissiveMap(){return this.uniforms.emissiveMap.value}set emissiveMap(e){this.uniforms.emissiveMap.value=e}get shadeColorFactor(){return this.uniforms.shadeColorFactor.value}set shadeColorFactor(e){this.uniforms.shadeColorFactor.value=e}get shadeMultiplyTexture(){return this.uniforms.shadeMultiplyTexture.value}set shadeMultiplyTexture(e){this.uniforms.shadeMultiplyTexture.value=e}get shadingShiftFactor(){return this.uniforms.shadingShiftFactor.value}set shadingShiftFactor(e){this.uniforms.shadingShiftFactor.value=e}get shadingShiftTexture(){return this.uniforms.shadingShiftTexture.value}set shadingShiftTexture(e){this.uniforms.shadingShiftTexture.value=e}get shadingShiftTextureScale(){return this.uniforms.shadingShiftTextureScale.value}set shadingShiftTextureScale(e){this.uniforms.shadingShiftTextureScale.value=e}get shadingToonyFactor(){return this.uniforms.shadingToonyFactor.value}set shadingToonyFactor(e){this.uniforms.shadingToonyFactor.value=e}get giEqualizationFactor(){return this.uniforms.giEqualizationFactor.value}set giEqualizationFactor(e){this.uniforms.giEqualizationFactor.value=e}get matcapFactor(){return this.uniforms.matcapFactor.value}set matcapFactor(e){this.uniforms.matcapFactor.value=e}get matcapTexture(){return this.uniforms.matcapTexture.value}set matcapTexture(e){this.uniforms.matcapTexture.value=e}get parametricRimColorFactor(){return this.uniforms.parametricRimColorFactor.value}set parametricRimColorFactor(e){this.uniforms.parametricRimColorFactor.value=e}get rimMultiplyTexture(){return this.uniforms.rimMultiplyTexture.value}set rimMultiplyTexture(e){this.uniforms.rimMultiplyTexture.value=e}get rimLightingMixFactor(){return this.uniforms.rimLightingMixFactor.value}set rimLightingMixFactor(e){this.uniforms.rimLightingMixFactor.value=e}get parametricRimFresnelPowerFactor(){return this.uniforms.parametricRimFresnelPowerFactor.value}set parametricRimFresnelPowerFactor(e){this.uniforms.parametricRimFresnelPowerFactor.value=e}get parametricRimLiftFactor(){return this.uniforms.parametricRimLiftFactor.value}set parametricRimLiftFactor(e){this.uniforms.parametricRimLiftFactor.value=e}get outlineWidthMultiplyTexture(){return this.uniforms.outlineWidthMultiplyTexture.value}set outlineWidthMultiplyTexture(e){this.uniforms.outlineWidthMultiplyTexture.value=e}get outlineWidthFactor(){return this.uniforms.outlineWidthFactor.value}set outlineWidthFactor(e){this.uniforms.outlineWidthFactor.value=e}get outlineColorFactor(){return this.uniforms.outlineColorFactor.value}set outlineColorFactor(e){this.uniforms.outlineColorFactor.value=e}get outlineLightingMixFactor(){return this.uniforms.outlineLightingMixFactor.value}set outlineLightingMixFactor(e){this.uniforms.outlineLightingMixFactor.value=e}get uvAnimationMaskTexture(){return this.uniforms.uvAnimationMaskTexture.value}set uvAnimationMaskTexture(e){this.uniforms.uvAnimationMaskTexture.value=e}get uvAnimationScrollXOffset(){return this.uniforms.uvAnimationScrollXOffset.value}set uvAnimationScrollXOffset(e){this.uniforms.uvAnimationScrollXOffset.value=e}get uvAnimationScrollYOffset(){return this.uniforms.uvAnimationScrollYOffset.value}set uvAnimationScrollYOffset(e){this.uniforms.uvAnimationScrollYOffset.value=e}get uvAnimationRotationPhase(){return this.uniforms.uvAnimationRotationPhase.value}set uvAnimationRotationPhase(e){this.uniforms.uvAnimationRotationPhase.value=e}get ignoreVertexColor(){return this._ignoreVertexColor}set ignoreVertexColor(e){this._ignoreVertexColor=e,this.needsUpdate=!0}get v0CompatShade(){return this._v0CompatShade}set v0CompatShade(e){this._v0CompatShade=e,this.needsUpdate=!0}get debugMode(){return this._debugMode}set debugMode(e){this._debugMode=e,this.needsUpdate=!0}get outlineWidthMode(){return this._outlineWidthMode}set outlineWidthMode(e){this._outlineWidthMode=e,this.needsUpdate=!0}get isOutline(){return this._isOutline}set isOutline(e){this._isOutline=e,this.needsUpdate=!0}get isMToonMaterial(){return!0}update(e){this._uploadUniformsWorkaround(),this._updateUVAnimation(e)}copy(e){return super.copy(e),this.map=e.map,this.normalMap=e.normalMap,this.emissiveMap=e.emissiveMap,this.shadeMultiplyTexture=e.shadeMultiplyTexture,this.shadingShiftTexture=e.shadingShiftTexture,this.matcapTexture=e.matcapTexture,this.rimMultiplyTexture=e.rimMultiplyTexture,this.outlineWidthMultiplyTexture=e.outlineWidthMultiplyTexture,this.uvAnimationMaskTexture=e.uvAnimationMaskTexture,this.normalMapType=e.normalMapType,this.uvAnimationScrollXSpeedFactor=e.uvAnimationScrollXSpeedFactor,this.uvAnimationScrollYSpeedFactor=e.uvAnimationScrollYSpeedFactor,this.uvAnimationRotationSpeedFactor=e.uvAnimationRotationSpeedFactor,this.ignoreVertexColor=e.ignoreVertexColor,this.v0CompatShade=e.v0CompatShade,this.debugMode=e.debugMode,this.outlineWidthMode=e.outlineWidthMode,this.isOutline=e.isOutline,this.needsUpdate=!0,this}_updateUVAnimation(e){this.uniforms.uvAnimationScrollXOffset.value+=e*this.uvAnimationScrollXSpeedFactor,this.uniforms.uvAnimationScrollYOffset.value+=e*this.uvAnimationScrollYSpeedFactor,this.uniforms.uvAnimationRotationPhase.value+=e*this.uvAnimationRotationSpeedFactor,this.uniformsNeedUpdate=!0}_uploadUniformsWorkaround(){this.uniforms.opacity.value=this.opacity,this._updateTextureMatrix(this.uniforms.map,this.uniforms.mapUvTransform),this._updateTextureMatrix(this.uniforms.normalMap,this.uniforms.normalMapUvTransform),this._updateTextureMatrix(this.uniforms.emissiveMap,this.uniforms.emissiveMapUvTransform),this._updateTextureMatrix(this.uniforms.shadeMultiplyTexture,this.uniforms.shadeMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.shadingShiftTexture,this.uniforms.shadingShiftTextureUvTransform),this._updateTextureMatrix(this.uniforms.matcapTexture,this.uniforms.matcapTextureUvTransform),this._updateTextureMatrix(this.uniforms.rimMultiplyTexture,this.uniforms.rimMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.outlineWidthMultiplyTexture,this.uniforms.outlineWidthMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.uvAnimationMaskTexture,this.uniforms.uvAnimationMaskTextureUvTransform),parseInt(Ps,10)>=132&&(this.uniforms.alphaTest.value=this.alphaTest),this.uniformsNeedUpdate=!0}_generateDefines(){const e=parseInt(Ps,10),t=this.outlineWidthMultiplyTexture!==null,r=this.map!==null||this.emissiveMap!==null||this.shadeMultiplyTexture!==null||this.shadingShiftTexture!==null||this.rimMultiplyTexture!==null||this.uvAnimationMaskTexture!==null;return{THREE_VRM_THREE_REVISION:e,OUTLINE:this._isOutline,MTOON_USE_UV:t||r,MTOON_UVS_VERTEX_ONLY:t&&!r,V0_COMPAT_SHADE:this._v0CompatShade,USE_SHADEMULTIPLYTEXTURE:this.shadeMultiplyTexture!==null,USE_SHADINGSHIFTTEXTURE:this.shadingShiftTexture!==null,USE_MATCAPTEXTURE:this.matcapTexture!==null,USE_RIMMULTIPLYTEXTURE:this.rimMultiplyTexture!==null,USE_OUTLINEWIDTHMULTIPLYTEXTURE:this._isOutline&&this.outlineWidthMultiplyTexture!==null,USE_UVANIMATIONMASKTEXTURE:this.uvAnimationMaskTexture!==null,IGNORE_VERTEX_COLOR:this._ignoreVertexColor===!0,DEBUG_NORMAL:this._debugMode==="normal",DEBUG_LITSHADERATE:this._debugMode==="litShadeRate",DEBUG_UV:this._debugMode==="uv",OUTLINE_WIDTH_WORLD:this._isOutline&&this._outlineWidthMode===iI.WorldCoordinates,OUTLINE_WIDTH_SCREEN:this._isOutline&&this._outlineWidthMode===iI.ScreenCoordinates}}_updateTextureMatrix(e,t){e.value&&(e.value.matrixAutoUpdate&&e.value.updateMatrix(),t.value.copy(e.value.matrix))}}class nde{constructor(e,t){this._parser=e,this._materialParams=t,this._pendings=[]}get pending(){return Promise.all(this._pendings)}assignPrimitive(e,t){t!=null&&(this._materialParams[e]=t)}assignColor(e,t,r){t!=null&&(this._materialParams[e]=new Ve().fromArray(t),r&&this._materialParams[e].convertSRGBToLinear())}assignTexture(e,t,r){return qc(this,void 0,void 0,function*(){const i=(()=>qc(this,void 0,void 0,function*(){t!=null&&(yield this._parser.assignTexture(this._materialParams,e,t),r&&(this._materialParams[e].encoding=gt))}))();return this._pendings.push(i),i})}assignTextureByIndex(e,t,r){return qc(this,void 0,void 0,function*(){return this.assignTexture(e,t!=null?{index:t}:void 0,r)})}}const rde=new Set(["1.0","1.0-beta"]);class zh{constructor(e,t={}){var r,i,s;this.parser=e,this.renderOrderOffset=(r=t.renderOrderOffset)!==null&&r!==void 0?r:0,this.v0CompatShade=(i=t.v0CompatShade)!==null&&i!==void 0?i:!1,this.debugMode=(s=t.debugMode)!==null&&s!==void 0?s:"none",this._mToonMaterialSet=new Set}get name(){return zh.EXTENSION_NAME}beforeRoot(){return qc(this,void 0,void 0,function*(){this._removeUnlitExtensionIfMToonExists()})}afterRoot(e){return qc(this,void 0,void 0,function*(){e.userData.vrmMToonMaterials=Array.from(this._mToonMaterialSet)})}getMaterialType(e){return this._getMToonExtension(e)?gw:null}extendMaterialParams(e,t){const r=this._getMToonExtension(e);return r?this._extendMaterialParams(r,t):null}loadMesh(e){var t;return qc(this,void 0,void 0,function*(){const r=this.parser,s=(t=r.json.meshes)===null||t===void 0?void 0:t[e];if(s==null)throw new Error(`MToonMaterialLoaderPlugin: Attempt to use meshes[${e}] of glTF but the mesh doesn't exist`);const o=s.primitives,a=yield r.loadMesh(e);if(o.length===1){const l=a,A=o[0].material;A!=null&&this._setupPrimitive(l,A)}else{const l=a;for(let A=0;A<o.length;A++){const c=l.children[A],u=o[A].material;u!=null&&this._setupPrimitive(c,u)}}return a})}_removeUnlitExtensionIfMToonExists(){const r=this.parser.json.materials;r==null||r.map((i,s)=>{var o;this._getMToonExtension(s)&&(!((o=i.extensions)===null||o===void 0)&&o.KHR_materials_unlit)&&delete i.extensions.KHR_materials_unlit})}_getMToonExtension(e){var t,r;const o=(t=this.parser.json.materials)===null||t===void 0?void 0:t[e];if(o==null){console.warn(`MToonMaterialLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const a=(r=o.extensions)===null||r===void 0?void 0:r[zh.EXTENSION_NAME];if(a==null)return;const l=a.specVersion;if(!rde.has(l)){console.warn(`MToonMaterialLoaderPlugin: Unknown ${zh.EXTENSION_NAME} specVersion "${l}"`);return}return a}_extendMaterialParams(e,t){var r;return qc(this,void 0,void 0,function*(){delete t.metalness,delete t.roughness;const i=new nde(this.parser,t);i.assignPrimitive("transparentWithZWrite",e.transparentWithZWrite),i.assignColor("shadeColorFactor",e.shadeColorFactor),i.assignTexture("shadeMultiplyTexture",e.shadeMultiplyTexture,!0),i.assignPrimitive("shadingShiftFactor",e.shadingShiftFactor),i.assignTexture("shadingShiftTexture",e.shadingShiftTexture,!0),i.assignPrimitive("shadingShiftTextureScale",(r=e.shadingShiftTexture)===null||r===void 0?void 0:r.scale),i.assignPrimitive("shadingToonyFactor",e.shadingToonyFactor),i.assignPrimitive("giEqualizationFactor",e.giEqualizationFactor),i.assignColor("matcapFactor",e.matcapFactor),i.assignTexture("matcapTexture",e.matcapTexture,!0),i.assignColor("parametricRimColorFactor",e.parametricRimColorFactor),i.assignTexture("rimMultiplyTexture",e.rimMultiplyTexture,!0),i.assignPrimitive("rimLightingMixFactor",e.rimLightingMixFactor),i.assignPrimitive("parametricRimFresnelPowerFactor",e.parametricRimFresnelPowerFactor),i.assignPrimitive("parametricRimLiftFactor",e.parametricRimLiftFactor),i.assignPrimitive("outlineWidthMode",e.outlineWidthMode),i.assignPrimitive("outlineWidthFactor",e.outlineWidthFactor),i.assignTexture("outlineWidthMultiplyTexture",e.outlineWidthMultiplyTexture,!1),i.assignColor("outlineColorFactor",e.outlineColorFactor),i.assignPrimitive("outlineLightingMixFactor",e.outlineLightingMixFactor),i.assignTexture("uvAnimationMaskTexture",e.uvAnimationMaskTexture,!1),i.assignPrimitive("uvAnimationScrollXSpeedFactor",e.uvAnimationScrollXSpeedFactor),i.assignPrimitive("uvAnimationScrollYSpeedFactor",e.uvAnimationScrollYSpeedFactor),i.assignPrimitive("uvAnimationRotationSpeedFactor",e.uvAnimationRotationSpeedFactor),i.assignPrimitive("v0CompatShade",this.v0CompatShade),i.assignPrimitive("debugMode",this.debugMode),yield i.pending})}_setupPrimitive(e,t){const r=this._getMToonExtension(t);if(r){const i=this._parseRenderOrder(r);e.renderOrder=i+this.renderOrderOffset,this._generateOutline(e),this._addToMaterialSet(e);return}}_generateOutline(e){const t=e.material;if(!(t instanceof gw)||t.outlineWidthMode==="none"||t.outlineWidthFactor<=0)return;e.material=[t];const r=t.clone();r.name+=" (Outline)",r.isOutline=!0,r.side=yi,e.material.push(r);const i=e.geometry,s=i.index?i.index.count:i.attributes.position.count/3;i.addGroup(0,s,0),i.addGroup(0,s,1)}_addToMaterialSet(e){const t=e.material,r=new Set;Array.isArray(t)?t.forEach(i=>r.add(i)):r.add(t);for(const i of r)i instanceof gw&&this._mToonMaterialSet.add(i)}_parseRenderOrder(e){var t;return(e.transparentWithZWrite?0:19)+((t=e.renderQueueOffsetNumber)!==null&&t!==void 0?t:0)}}zh.EXTENSION_NAME="VRMC_materials_mtoon";/*!
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier v1.0.9
 * Support VRMC_hdr_emissiveMultiplier for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */function ide(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}class Zm{constructor(e){this.parser=e}get name(){return Zm.EXTENSION_NAME}extendMaterialParams(e,t){return ide(this,void 0,void 0,function*(){const r=this._getHDREmissiveMultiplierExtension(e);if(r==null)return;console.warn("VRMMaterialsHDREmissiveMultiplierLoaderPlugin: `VRMC_materials_hdr_emissiveMultiplier` is archived. Use `KHR_materials_emissive_strength` instead.");const i=r.emissiveMultiplier;t.emissiveIntensity=i})}_getHDREmissiveMultiplierExtension(e){var t,r;const o=(t=this.parser.json.materials)===null||t===void 0?void 0:t[e];if(o==null){console.warn(`VRMMaterialsHDREmissiveMultiplierLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const a=(r=o.extensions)===null||r===void 0?void 0:r[Zm.EXTENSION_NAME];if(a!=null)return a}}Zm.EXTENSION_NAME="VRMC_materials_hdr_emissiveMultiplier";/*!
 * @pixiv/three-vrm-materials-v0compat v1.0.9
 * VRM0.0 materials compatibility layer plugin for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-materials-v0compat is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */function sde(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}function bd(n){return Math.pow(n,2.2)}class ode{constructor(e){var t;this.parser=e,this._renderQueueMapTransparent=new Map,this._renderQueueMapTransparentZWrite=new Map;const r=this.parser.json;r.extensionsUsed=(t=r.extensionsUsed)!==null&&t!==void 0?t:[],r.extensionsUsed.indexOf("KHR_texture_transform")===-1&&r.extensionsUsed.push("KHR_texture_transform")}get name(){return"VRMMaterialsV0CompatPlugin"}beforeRoot(){var e;return sde(this,void 0,void 0,function*(){const t=this.parser.json,r=(e=t.extensions)===null||e===void 0?void 0:e.VRM,i=r==null?void 0:r.materialProperties;i&&(this._populateRenderQueueMap(i),i.forEach((s,o)=>{var a,l;const A=(a=t.materials)===null||a===void 0?void 0:a[o];if(A==null){console.warn(`VRMMaterialsV0CompatPlugin: Attempt to use materials[${o}] of glTF but the material doesn't exist`);return}if(s.shader==="VRM/MToon"){const c=this._parseV0MToonProperties(s,A);t.materials[o]=c}else if(!((l=s.shader)===null||l===void 0)&&l.startsWith("VRM/Unlit")){const c=this._parseV0UnlitProperties(s,A);t.materials[o]=c}else s.shader==="VRM_USE_GLTFSHADER"||console.warn(`VRMMaterialsV0CompatPlugin: Unknown shader: ${s.shader}`)}))})}_parseV0MToonProperties(e,t){var r,i,s,o,a,l,A,c,u,h,d,p,f,m,g,v,w,B,C,b,F,x,E,M,H,O,U,y,I,R,D,k,V,Z,N,_,z,ie,T,q,ge,he,Ae,$;const ce=(i=(r=e.keywordMap)===null||r===void 0?void 0:r._ALPHABLEND_ON)!==null&&i!==void 0?i:!1,_e=((s=e.floatProperties)===null||s===void 0?void 0:s._ZWrite)===1&&ce,P=this._v0ParseRenderQueue(e),fe=(a=(o=e.keywordMap)===null||o===void 0?void 0:o._ALPHATEST_ON)!==null&&a!==void 0?a:!1,de=ce?"BLEND":fe?"MASK":"OPAQUE",ee=fe?(l=e.floatProperties)===null||l===void 0?void 0:l._Cutoff:void 0,se=((c=(A=e.floatProperties)===null||A===void 0?void 0:A._CullMode)!==null&&c!==void 0?c:2)===0,ye=this._portTextureTransform(e),ne=(h=(u=e.vectorProperties)===null||u===void 0?void 0:u._Color)===null||h===void 0?void 0:h.map((Ie,We)=>We===3?Ie:bd(Ie)),J=(d=e.textureProperties)===null||d===void 0?void 0:d._MainTex,Y=J!=null?{index:J,extensions:Object.assign({},ye)}:void 0,ue=(p=e.floatProperties)===null||p===void 0?void 0:p._BumpScale,le=(f=e.textureProperties)===null||f===void 0?void 0:f._BumpMap,we=le!=null?{index:le,scale:ue,extensions:Object.assign({},ye)}:void 0,G=(g=(m=e.vectorProperties)===null||m===void 0?void 0:m._EmissionColor)===null||g===void 0?void 0:g.map(bd),Q=(v=e.textureProperties)===null||v===void 0?void 0:v._EmissionMap,S=Q!=null?{index:Q,extensions:Object.assign({},ye)}:void 0,W=(B=(w=e.vectorProperties)===null||w===void 0?void 0:w._ShadeColor)===null||B===void 0?void 0:B.map(bd),te=(C=e.textureProperties)===null||C===void 0?void 0:C._ShadeTexture,oe=te!=null?{index:te,extensions:Object.assign({},ye)}:void 0;let ae=(F=(b=e.floatProperties)===null||b===void 0?void 0:b._ShadeShift)!==null&&F!==void 0?F:0,Se=(E=(x=e.floatProperties)===null||x===void 0?void 0:x._ShadeToony)!==null&&E!==void 0?E:.9;Se=Zt.lerp(Se,1,.5+.5*ae),ae=-ae-(1-Se);const Ee=(M=e.floatProperties)===null||M===void 0?void 0:M._IndirectLightIntensity,Me=Ee?1-Ee:void 0,Le=(H=e.textureProperties)===null||H===void 0?void 0:H._SphereAdd,ke=Le!=null?[1,1,1]:void 0,pe=Le!=null?{index:Le}:void 0,Fe=(O=e.floatProperties)===null||O===void 0?void 0:O._RimLightingMix,Ue=(U=e.textureProperties)===null||U===void 0?void 0:U._RimTexture,Te=Ue!=null?{index:Ue,extensions:Object.assign({},ye)}:void 0,Ye=(I=(y=e.vectorProperties)===null||y===void 0?void 0:y._RimColor)===null||I===void 0?void 0:I.map(bd),nt=(R=e.floatProperties)===null||R===void 0?void 0:R._RimFresnelPower,dt=(D=e.floatProperties)===null||D===void 0?void 0:D._RimLift,cn=["none","worldCoordinates","screenCoordinates"][(V=(k=e.floatProperties)===null||k===void 0?void 0:k._OutlineWidthMode)!==null&&V!==void 0?V:0];let Ft=(N=(Z=e.floatProperties)===null||Z===void 0?void 0:Z._OutlineWidth)!==null&&N!==void 0?N:0;Ft=.01*Ft;const ot=(_=e.textureProperties)===null||_===void 0?void 0:_._OutlineWidthTexture,Ar=ot!=null?{index:ot,extensions:Object.assign({},ye)}:void 0,yt=(ie=(z=e.vectorProperties)===null||z===void 0?void 0:z._OutlineColor)===null||ie===void 0?void 0:ie.map(bd),co=((T=e.floatProperties)===null||T===void 0?void 0:T._OutlineColorMode)===1?(q=e.floatProperties)===null||q===void 0?void 0:q._OutlineLightingMix:0,Xt=(ge=e.textureProperties)===null||ge===void 0?void 0:ge._UvAnimMaskTexture,en=Xt!=null?{index:Xt,extensions:Object.assign({},ye)}:void 0,re=(he=e.floatProperties)===null||he===void 0?void 0:he._UvAnimScrollX;let ve=(Ae=e.floatProperties)===null||Ae===void 0?void 0:Ae._UvAnimScrollY;ve!=null&&(ve=-ve);const xe=($=e.floatProperties)===null||$===void 0?void 0:$._UvAnimRotation,be={specVersion:"1.0",transparentWithZWrite:_e,renderQueueOffsetNumber:P,shadeColorFactor:W,shadeMultiplyTexture:oe,shadingShiftFactor:ae,shadingToonyFactor:Se,giEqualizationFactor:Me,matcapFactor:ke,matcapTexture:pe,rimLightingMixFactor:Fe,rimMultiplyTexture:Te,parametricRimColorFactor:Ye,parametricRimFresnelPowerFactor:nt,parametricRimLiftFactor:dt,outlineWidthMode:cn,outlineWidthFactor:Ft,outlineWidthMultiplyTexture:Ar,outlineColorFactor:yt,outlineLightingMixFactor:co,uvAnimationMaskTexture:en,uvAnimationScrollXSpeedFactor:re,uvAnimationScrollYSpeedFactor:ve,uvAnimationRotationSpeedFactor:xe};return Object.assign(Object.assign({},t),{pbrMetallicRoughness:{baseColorFactor:ne,baseColorTexture:Y},normalTexture:we,emissiveTexture:S,emissiveFactor:G,alphaMode:de,alphaCutoff:ee,doubleSided:se,extensions:{VRMC_materials_mtoon:be}})}_parseV0UnlitProperties(e,t){var r,i,s,o;const a=e.shader==="VRM/UnlitTransparentZWrite",l=e.shader==="VRM/UnlitTransparent"||a,A=this._v0ParseRenderQueue(e),c=e.shader==="VRM/UnlitCutout",u=l?"BLEND":c?"MASK":"OPAQUE",h=c?(r=e.floatProperties)===null||r===void 0?void 0:r._Cutoff:void 0,d=this._portTextureTransform(e),p=(s=(i=e.vectorProperties)===null||i===void 0?void 0:i._Color)===null||s===void 0?void 0:s.map(bd),f=(o=e.textureProperties)===null||o===void 0?void 0:o._MainTex,m=f!=null?{index:f,extensions:Object.assign({},d)}:void 0,g={specVersion:"1.0",transparentWithZWrite:a,renderQueueOffsetNumber:A,shadeColorFactor:p,shadeMultiplyTexture:m};return Object.assign(Object.assign({},t),{pbrMetallicRoughness:{baseColorFactor:p,baseColorTexture:m},alphaMode:u,alphaCutoff:h,extensions:{VRMC_materials_mtoon:g}})}_portTextureTransform(e){var t,r,i,s,o;const a=(t=e.vectorProperties)===null||t===void 0?void 0:t._MainTex;if(a==null)return{};const l=[(r=a==null?void 0:a[0])!==null&&r!==void 0?r:0,(i=a==null?void 0:a[1])!==null&&i!==void 0?i:0],A=[(s=a==null?void 0:a[2])!==null&&s!==void 0?s:1,(o=a==null?void 0:a[3])!==null&&o!==void 0?o:1];return l[1]=A[1]*(1-l[1])%1,{KHR_texture_transform:{offset:l,scale:A}}}_v0ParseRenderQueue(e){var t,r,i;const s=(r=(t=e.keywordMap)===null||t===void 0?void 0:t._ALPHABLEND_ON)!==null&&r!==void 0?r:!1,o=((i=e.floatProperties)===null||i===void 0?void 0:i._ZWrite)===1;let a=0;if(s){const l=e.renderQueue;l!=null&&(o?a=this._renderQueueMapTransparentZWrite.get(l):a=this._renderQueueMapTransparent.get(l))}return a}_populateRenderQueueMap(e){const t=new Set,r=new Set;e.forEach(i=>{var s,o,a;const l=(o=(s=i.keywordMap)===null||s===void 0?void 0:s._ALPHABLEND_ON)!==null&&o!==void 0?o:!1,A=((a=i.floatProperties)===null||a===void 0?void 0:a._ZWrite)===1;if(l){const c=i.renderQueue;c!=null&&(A?r.add(c):t.add(c))}}),t.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${t.size} render queues for Transparent materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),r.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${r.size} render queues for TransparentZWrite materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),Array.from(t).sort().forEach((i,s)=>{const o=Math.min(Math.max(s-t.size+1,-9),0);this._renderQueueMapTransparent.set(i,o)}),Array.from(r).sort().forEach((i,s)=>{const o=Math.min(Math.max(s,0),9);this._renderQueueMapTransparentZWrite.set(i,o)})}}/*!
 * @pixiv/three-vrm-node-constraint v1.0.9
 * Node constraint module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-node-constraint is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */const cA=new j;class aI extends kr{constructor(e){super(),this._attrPosition=new ut(new Float32Array([0,0,0,0,0,0]),3),this._attrPosition.setUsage(L$);const t=new zt;t.setAttribute("position",this._attrPosition);const r=new Hl({color:16711935,depthTest:!1,depthWrite:!1});this._line=new Vf(t,r),this.add(this._line),this.constraint=e}updateMatrixWorld(e){cA.setFromMatrixPosition(this.constraint.destination.matrixWorld),this._attrPosition.setXYZ(0,cA.x,cA.y,cA.z),this.constraint.source&&cA.setFromMatrixPosition(this.constraint.source.matrixWorld),this._attrPosition.setXYZ(1,cA.x,cA.y,cA.z),this._attrPosition.needsUpdate=!0,super.updateMatrixWorld(e)}}function tD(n,e){return e.set(n.elements[12],n.elements[13],n.elements[14])}const ade=new j,lde=new j;function Ade(n,e){return n.decompose(ade,e,lde),e}function ZB(n){return n.invert?n.invert():n.inverse(),n}class qU{constructor(e,t){this.destination=e,this.source=t,this.weight=1}}const cde=new j,ude=new j,dde=new j,hde=new rt,fde=new rt,pde=new rt;class gde extends qU{constructor(e,t){super(e,t),this._aimAxis="PositiveX",this._v3AimAxis=new j(1,0,0),this._dstRestQuat=new rt}get aimAxis(){return this._aimAxis}set aimAxis(e){this._aimAxis=e,this._v3AimAxis.set(e==="PositiveX"?1:e==="NegativeX"?-1:0,e==="PositiveY"?1:e==="NegativeY"?-1:0,e==="PositiveZ"?1:e==="NegativeZ"?-1:0)}get dependencies(){const e=new Set([this.source]);return this.destination.parent&&e.add(this.destination.parent),e}setInitState(){this._dstRestQuat.copy(this.destination.quaternion)}update(){this.destination.updateWorldMatrix(!0,!1),this.source.updateWorldMatrix(!0,!1);const e=hde.identity(),t=fde.identity();this.destination.parent&&(Ade(this.destination.parent.matrixWorld,e),ZB(t.copy(e)));const r=cde.copy(this._v3AimAxis).applyQuaternion(this._dstRestQuat).applyQuaternion(e),i=tD(this.source.matrixWorld,ude).sub(tD(this.destination.matrixWorld,dde)).normalize(),s=pde.setFromUnitVectors(r,i).premultiply(t).multiply(e).multiply(this._dstRestQuat);this.destination.quaternion.copy(this._dstRestQuat).slerp(s,this.weight)}}function nD(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}function mde(n,e){const t=[n];let r=n.parent;for(;r!==null;)t.unshift(r),r=r.parent;t.forEach(i=>{e(i)})}class vde{constructor(){this._constraints=new Set,this._objectConstraintsMap=new Map}get constraints(){return this._constraints}addConstraint(e){this._constraints.add(e);let t=this._objectConstraintsMap.get(e.destination);t==null&&(t=new Set,this._objectConstraintsMap.set(e.destination,t)),t.add(e)}deleteConstraint(e){this._constraints.delete(e),this._objectConstraintsMap.get(e.destination).delete(e)}setInitState(){const e=new Set,t=new Set;for(const r of this._constraints)this._processConstraint(r,e,t,i=>i.setInitState())}update(){const e=new Set,t=new Set;for(const r of this._constraints)this._processConstraint(r,e,t,i=>i.update())}_processConstraint(e,t,r,i){if(r.has(e))return;if(t.has(e))throw new Error("VRMNodeConstraintManager: Circular dependency detected while updating constraints");t.add(e);const s=e.dependencies;for(const o of s)mde(o,a=>{const l=this._objectConstraintsMap.get(a);if(l)for(const A of l)this._processConstraint(A,t,r,i)});i(e),r.add(e)}}const yde=new rt,wde=new rt;class Bde extends qU{constructor(e,t){super(e,t),this._dstRestQuat=new rt,this._invSrcRestQuat=new rt}get dependencies(){return new Set([this.source])}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),ZB(this._invSrcRestQuat.copy(this.source.quaternion))}update(){const e=yde.copy(this._invSrcRestQuat).multiply(this.source.quaternion),t=wde.copy(this._dstRestQuat).multiply(e);this.destination.quaternion.copy(this._dstRestQuat).slerp(t,this.weight)}}const Cde=new j,bde=new rt,xde=new rt;class Ide extends qU{constructor(e,t){super(e,t),this._rollAxis="X",this._v3RollAxis=new j(1,0,0),this._dstRestQuat=new rt,this._invDstRestQuat=new rt,this._invSrcRestQuatMulDstRestQuat=new rt}get rollAxis(){return this._rollAxis}set rollAxis(e){this._rollAxis=e,this._v3RollAxis.set(e==="X"?1:0,e==="Y"?1:0,e==="Z"?1:0)}get dependencies(){return new Set([this.source])}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),ZB(this._invDstRestQuat.copy(this._dstRestQuat)),ZB(this._invSrcRestQuatMulDstRestQuat.copy(this.source.quaternion)).multiply(this._dstRestQuat)}update(){const e=bde.copy(this._invDstRestQuat).multiply(this.source.quaternion).multiply(this._invSrcRestQuatMulDstRestQuat),t=Cde.copy(this._v3RollAxis).applyQuaternion(e),i=xde.setFromUnitVectors(t,this._v3RollAxis).premultiply(this._dstRestQuat).multiply(e);this.destination.quaternion.copy(this._dstRestQuat).slerp(i,this.weight)}}const Fde=new Set(["1.0","1.0-beta"]);class eu{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}get name(){return eu.EXTENSION_NAME}afterRoot(e){return nD(this,void 0,void 0,function*(){e.userData.vrmNodeConstraintManager=yield this._import(e)})}_import(e){var t;return nD(this,void 0,void 0,function*(){const r=this.parser.json;if(!(((t=r.extensionsUsed)===null||t===void 0?void 0:t.indexOf(eu.EXTENSION_NAME))!==-1))return null;const s=new vde,o=yield this.parser.getDependencies("node");return o.forEach((a,l)=>{var A;const c=r.nodes[l],u=(A=c==null?void 0:c.extensions)===null||A===void 0?void 0:A[eu.EXTENSION_NAME];if(u==null)return;const h=u.specVersion;if(!Fde.has(h)){console.warn(`VRMNodeConstraintLoaderPlugin: Unknown ${eu.EXTENSION_NAME} specVersion "${h}"`);return}const d=u.constraint;if(d.roll!=null){const p=this._importRollConstraint(a,o,d.roll);s.addConstraint(p)}else if(d.aim!=null){const p=this._importAimConstraint(a,o,d.aim);s.addConstraint(p)}else if(d.rotation!=null){const p=this._importRotationConstraint(a,o,d.rotation);s.addConstraint(p)}}),e.scene.updateMatrixWorld(),s.setInitState(),s})}_importRollConstraint(e,t,r){const{source:i,rollAxis:s,weight:o}=r,a=t[i],l=new Ide(e,a);if(s!=null&&(l.rollAxis=s),o!=null&&(l.weight=o),this.helperRoot){const A=new aI(l);this.helperRoot.add(A)}return l}_importAimConstraint(e,t,r){const{source:i,aimAxis:s,weight:o}=r,a=t[i],l=new gde(e,a);if(s!=null&&(l.aimAxis=s),o!=null&&(l.weight=o),this.helperRoot){const A=new aI(l);this.helperRoot.add(A)}return l}_importRotationConstraint(e,t,r){const{source:i,weight:s}=r,o=t[i],a=new Bde(e,o);if(s!=null&&(a.weight=s),this.helperRoot){const l=new aI(a);this.helperRoot.add(l)}return a}}eu.EXTENSION_NAME="VRMC_node_constraint";/*!
 * @pixiv/three-vrm-springbone v1.0.9
 * Spring bone module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-springbone is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */class BJ{}const lI=new j,Rc=new j;class CJ extends BJ{constructor(e){var t,r,i;super(),this.offset=(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:new j(0,0,0),this.tail=(r=e==null?void 0:e.tail)!==null&&r!==void 0?r:new j(0,0,0),this.radius=(i=e==null?void 0:e.radius)!==null&&i!==void 0?i:0}get type(){return"capsule"}calculateCollision(e,t,r,i){lI.copy(this.offset).applyMatrix4(e),Rc.copy(this.tail).applyMatrix4(e),Rc.sub(lI);const s=Rc.lengthSq();i.copy(t).sub(lI);const o=Rc.dot(i);o<=0||(s<=o||Rc.multiplyScalar(o/s),i.sub(Rc));const a=r+this.radius,l=i.length()-a;return i.normalize(),l}}class bJ extends BJ{constructor(e){var t,r;super(),this.offset=(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:new j(0,0,0),this.radius=(r=e==null?void 0:e.radius)!==null&&r!==void 0?r:0}get type(){return"sphere"}calculateCollision(e,t,r,i){i.copy(this.offset).applyMatrix4(e),i.negate().add(t);const s=r+this.radius,o=i.length()-s;return i.normalize(),o}}const Yo=new j;class _de extends zt{constructor(e){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new j,this._currentTail=new j,this._shape=e,this._attrPos=new ut(new Float32Array(396),3),this.setAttribute("position",this._attrPos),this._attrIndex=new ut(new Uint16Array(264),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;const t=this._shape.radius/this.worldScale;this._currentRadius!==t&&(this._currentRadius=t,e=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),e=!0);const r=Yo.copy(this._shape.tail).divideScalar(this.worldScale);this._currentTail.distanceToSquared(r)>1e-10&&(this._currentTail.copy(r),e=!0),e&&this._buildPosition()}_buildPosition(){Yo.copy(this._currentTail).sub(this._currentOffset);const e=Yo.length()/this._currentRadius;for(let i=0;i<=16;i++){const s=i/16*Math.PI;this._attrPos.setXYZ(i,-Math.sin(s),-Math.cos(s),0),this._attrPos.setXYZ(17+i,e+Math.sin(s),Math.cos(s),0),this._attrPos.setXYZ(34+i,-Math.sin(s),0,-Math.cos(s)),this._attrPos.setXYZ(51+i,e+Math.sin(s),0,Math.cos(s))}for(let i=0;i<32;i++){const s=i/16*Math.PI;this._attrPos.setXYZ(68+i,0,Math.sin(s),Math.cos(s)),this._attrPos.setXYZ(100+i,e,Math.sin(s),Math.cos(s))}const t=Math.atan2(Yo.y,Math.sqrt(Yo.x*Yo.x+Yo.z*Yo.z)),r=-Math.atan2(Yo.z,Yo.x);this.rotateZ(t),this.rotateY(r),this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<34;e++){const t=(e+1)%34;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(68+e*2,34+e,34+t)}for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(136+e*2,68+e,68+t),this._attrIndex.setXY(200+e*2,100+e,100+t)}this._attrIndex.needsUpdate=!0}}class Ede extends zt{constructor(e){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new j,this._shape=e,this._attrPos=new ut(new Float32Array(32*3*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new ut(new Uint16Array(64*3),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;const t=this._shape.radius/this.worldScale;this._currentRadius!==t&&(this._currentRadius=t,e=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.needsUpdate=!0}}const Sde=new j;class rD extends kr{constructor(e){if(super(),this.matrixAutoUpdate=!1,this.collider=e,this.collider.shape instanceof bJ)this._geometry=new Ede(this.collider.shape);else if(this.collider.shape instanceof CJ)this._geometry=new _de(this.collider.shape);else throw new Error("VRMSpringBoneColliderHelper: Unknown collider shape type detected");const t=new Hl({color:16711935,depthTest:!1,depthWrite:!1});this._line=new f0(this._geometry,t),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(e){this.collider.updateWorldMatrix(!0,!1),this.matrix.copy(this.collider.matrixWorld);const t=this.matrix.elements;this._geometry.worldScale=Sde.set(t[0],t[1],t[2]).length(),this._geometry.update(),super.updateMatrixWorld(e)}}class Ude extends zt{constructor(e){super(),this.worldScale=1,this._currentRadius=0,this._currentTail=new j,this._springBone=e,this._attrPos=new ut(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new ut(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;const t=this._springBone.settings.hitRadius/this.worldScale;this._currentRadius!==t&&(this._currentRadius=t,e=!0),this._currentTail.equals(this._springBone.initialLocalChildPosition)||(this._currentTail.copy(this._springBone.initialLocalChildPosition),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}}const Qde=new j;class Rde extends kr{constructor(e){super(),this.matrixAutoUpdate=!1,this.springBone=e,this._geometry=new Ude(this.springBone);const t=new Hl({color:16776960,depthTest:!1,depthWrite:!1});this._line=new f0(this._geometry,t),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(e){this.springBone.bone.updateWorldMatrix(!0,!1),this.matrix.copy(this.springBone.bone.matrixWorld);const t=this.matrix.elements;this._geometry.worldScale=Qde.set(t[0],t[1],t[2]).length(),this._geometry.update(),super.updateMatrixWorld(e)}}class iD extends Lt{constructor(e){super(),this.shape=e}}const Mde=new Je;function xJ(n){return n.invert?n.invert():n.getInverse(Mde.copy(n)),n}class Tde{constructor(e){this._inverseCache=new Je,this._shouldUpdateInverse=!0,this.matrix=e;const t={set:(r,i,s)=>(this._shouldUpdateInverse=!0,r[i]=s,!0)};this._originalElements=e.elements,e.elements=new Proxy(e.elements,t)}get inverse(){return this._shouldUpdateInverse&&(this._inverseCache.copy(this.matrix),xJ(this._inverseCache),this._shouldUpdateInverse=!1),this._inverseCache}revert(){this.matrix.elements=this._originalElements}}const Nde=new Je,qa=new j,Op=new j,kde=new j,xd=new j,sD=new j,Wp=new j,oD=new rt,Id=new Je,Dde=new Je;class Lde{constructor(e,t,r={},i=[]){var s,o,a,l,A,c;this._currentTail=new j,this._prevTail=new j,this._boneAxis=new j,this._worldSpaceBoneLength=0,this._center=null,this._initialLocalMatrix=new Je,this._initialLocalRotation=new rt,this._initialLocalChildPosition=new j,this.bone=e,this.bone.matrixAutoUpdate=!1,this.child=t,this.settings={hitRadius:(s=r.hitRadius)!==null&&s!==void 0?s:0,stiffness:(o=r.stiffness)!==null&&o!==void 0?o:1,gravityPower:(a=r.gravityPower)!==null&&a!==void 0?a:0,gravityDir:(A=(l=r.gravityDir)===null||l===void 0?void 0:l.clone())!==null&&A!==void 0?A:new j(0,-1,0),dragForce:(c=r.dragForce)!==null&&c!==void 0?c:.4},this.colliderGroups=i}get center(){return this._center}set center(e){var t;!((t=this._center)===null||t===void 0)&&t.userData.inverseCacheProxy&&(this._center.userData.inverseCacheProxy.revert(),delete this._center.userData.inverseCacheProxy),this._center=e,this._center&&(this._center.userData.inverseCacheProxy||(this._center.userData.inverseCacheProxy=new Tde(this._center.matrixWorld)))}get initialLocalChildPosition(){return this._initialLocalChildPosition}get _parentMatrixWorld(){return this.bone.parent?this.bone.parent.matrixWorld:Nde}setInitState(){this._initialLocalMatrix.copy(this.bone.matrix),this._initialLocalRotation.copy(this.bone.quaternion),this.child?this._initialLocalChildPosition.copy(this.child.position):this._initialLocalChildPosition.copy(this.bone.position).normalize().multiplyScalar(.07);const e=this._getMatrixWorldToCenter(Id);this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(e),this._prevTail.copy(this._currentTail),this._boneAxis.copy(this._initialLocalChildPosition).normalize()}reset(){this.bone.quaternion.copy(this._initialLocalRotation),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix);const e=this._getMatrixWorldToCenter(Id);this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(e),this._prevTail.copy(this._currentTail)}update(e){if(e<=0)return;this._calcWorldSpaceBoneLength(),xd.setFromMatrixPosition(this.bone.matrixWorld);let t=this._getMatrixWorldToCenter(Id);sD.copy(xd).applyMatrix4(t);const r=oD.setFromRotationMatrix(t),i=Dde.copy(t).multiply(this._parentMatrixWorld),s=Op.copy(this._boneAxis).applyMatrix4(this._initialLocalMatrix).applyMatrix4(i).sub(sD).normalize(),o=kde.copy(this.settings.gravityDir).applyQuaternion(r).normalize(),a=this._getMatrixCenterToWorld(Id);Wp.copy(this._currentTail).add(qa.copy(this._currentTail).sub(this._prevTail).multiplyScalar(1-this.settings.dragForce)).add(qa.copy(s).multiplyScalar(this.settings.stiffness*e)).add(qa.copy(o).multiplyScalar(this.settings.gravityPower*e)).applyMatrix4(a),Wp.sub(xd).normalize().multiplyScalar(this._worldSpaceBoneLength).add(xd),this._collision(Wp),t=this._getMatrixWorldToCenter(Id),this._prevTail.copy(this._currentTail),this._currentTail.copy(qa.copy(Wp).applyMatrix4(t));const l=xJ(Id.copy(this._parentMatrixWorld).multiply(this._initialLocalMatrix)),A=oD.setFromUnitVectors(this._boneAxis,qa.copy(Wp).applyMatrix4(l).normalize());this.bone.quaternion.copy(this._initialLocalRotation).multiply(A),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix)}_collision(e){this.colliderGroups.forEach(t=>{t.colliders.forEach(r=>{const i=r.shape.calculateCollision(r.matrixWorld,e,this.settings.hitRadius,qa);i<0&&(e.add(qa.multiplyScalar(-i)),e.sub(xd).normalize().multiplyScalar(this._worldSpaceBoneLength).add(xd))})})}_calcWorldSpaceBoneLength(){qa.setFromMatrixPosition(this.bone.matrixWorld),this.child?Op.setFromMatrixPosition(this.child.matrixWorld):(Op.copy(this._initialLocalChildPosition),Op.applyMatrix4(this.bone.matrixWorld)),this._worldSpaceBoneLength=qa.sub(Op).length()}_getMatrixCenterToWorld(e){return this._center?e.copy(this._center.matrixWorld):e.identity(),e}_getMatrixWorldToCenter(e){return this._center?e.copy(this._center.userData.inverseCacheProxy.inverse):e.identity(),e}}function oy(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}function Vde(n,e){const t=[];let r=n;for(;r!==null;)t.unshift(r),r=r.parent;t.forEach(i=>{e(i)})}function IJ(n,e){n.children.forEach(t=>{e(t)||IJ(t,e)})}class aD{constructor(){this._joints=new Set,this._objectSpringBonesMap=new Map}get joints(){return this._joints}get springBones(){return console.warn("VRMSpringBoneManager: springBones is deprecated. use joints instead."),this._joints}get colliderGroups(){const e=new Set;return this._joints.forEach(t=>{t.colliderGroups.forEach(r=>{e.add(r)})}),Array.from(e)}get colliders(){const e=new Set;return this.colliderGroups.forEach(t=>{t.colliders.forEach(r=>{e.add(r)})}),Array.from(e)}addJoint(e){this._joints.add(e);let t=this._objectSpringBonesMap.get(e.bone);t==null&&(t=new Set,this._objectSpringBonesMap.set(e.bone,t)),t.add(e)}addSpringBone(e){console.warn("VRMSpringBoneManager: addSpringBone() is deprecated. use addJoint() instead."),this.addJoint(e)}deleteJoint(e){this._joints.delete(e),this._objectSpringBonesMap.get(e.bone).delete(e)}deleteSpringBone(e){console.warn("VRMSpringBoneManager: deleteSpringBone() is deprecated. use deleteJoint() instead."),this.deleteJoint(e)}setInitState(){const e=new Set,t=new Set,r=new Set;for(const i of this._joints)this._processSpringBone(i,e,t,r,s=>s.setInitState())}reset(){const e=new Set,t=new Set,r=new Set;for(const i of this._joints)this._processSpringBone(i,e,t,r,s=>s.reset())}update(e){const t=new Set,r=new Set,i=new Set;for(const s of this._joints)this._processSpringBone(s,t,r,i,o=>o.update(e)),IJ(s.bone,o=>{var a,l;return((l=(a=this._objectSpringBonesMap.get(o))===null||a===void 0?void 0:a.size)!==null&&l!==void 0?l:0)>0?!0:(o.updateWorldMatrix(!1,!1),!1)})}_processSpringBone(e,t,r,i,s){if(r.has(e))return;if(t.has(e))throw new Error("VRMSpringBoneManager: Circular dependency detected while updating springbones");t.add(e);const o=this._getDependencies(e);for(const a of o)Vde(a,l=>{const A=this._objectSpringBonesMap.get(l);if(A)for(const c of A)this._processSpringBone(c,t,r,i,s);else i.has(l)||(l.updateWorldMatrix(!1,!1),i.add(l))});e.bone.updateMatrix(),e.bone.updateWorldMatrix(!1,!1),s(e),i.add(e.bone),r.add(e)}_getDependencies(e){const t=new Set,r=e.bone.parent;return r&&t.add(r),e.colliderGroups.forEach(i=>{i.colliders.forEach(s=>{t.add(s)})}),t}}const Pde=new Set(["1.0","1.0-beta"]);class tu{constructor(e,t){this.parser=e,this.jointHelperRoot=t==null?void 0:t.jointHelperRoot,this.colliderHelperRoot=t==null?void 0:t.colliderHelperRoot}get name(){return tu.EXTENSION_NAME}afterRoot(e){return oy(this,void 0,void 0,function*(){e.userData.vrmSpringBoneManager=yield this._import(e)})}_import(e){return oy(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const r=yield this._v0Import(e);return r??null})}_v1Import(e){var t,r,i,s,o;return oy(this,void 0,void 0,function*(){const a=e.parser.json;if(!(((t=a.extensionsUsed)===null||t===void 0?void 0:t.indexOf(tu.EXTENSION_NAME))!==-1))return null;const A=new aD,c=yield e.parser.getDependencies("node"),u=(r=a.extensions)===null||r===void 0?void 0:r[tu.EXTENSION_NAME];if(!u)return null;const h=u.specVersion;if(!Pde.has(h))return console.warn(`VRMSpringBoneLoaderPlugin: Unknown ${tu.EXTENSION_NAME} specVersion "${h}"`),null;const d=(i=u.colliders)===null||i===void 0?void 0:i.map((f,m)=>{var g,v,w,B,C;const b=c[f.node],F=f.shape;if(F.sphere)return this._importSphereCollider(b,{offset:new j().fromArray((g=F.sphere.offset)!==null&&g!==void 0?g:[0,0,0]),radius:(v=F.sphere.radius)!==null&&v!==void 0?v:0});if(F.capsule)return this._importCapsuleCollider(b,{offset:new j().fromArray((w=F.capsule.offset)!==null&&w!==void 0?w:[0,0,0]),radius:(B=F.capsule.radius)!==null&&B!==void 0?B:0,tail:new j().fromArray((C=F.capsule.tail)!==null&&C!==void 0?C:[0,0,0])});throw new Error(`VRMSpringBoneLoaderPlugin: The collider #${m} has no valid shape`)}),p=(s=u.colliderGroups)===null||s===void 0?void 0:s.map((f,m)=>{var g;return{colliders:((g=f.colliders)!==null&&g!==void 0?g:[]).map(w=>{const B=d==null?void 0:d[w];if(B==null)throw new Error(`VRMSpringBoneLoaderPlugin: The colliderGroup #${m} attempted to use a collider #${w} but not found`);return B}),name:f.name}});return(o=u.springs)===null||o===void 0||o.forEach((f,m)=>{var g;const v=f.joints,w=(g=f.colliderGroups)===null||g===void 0?void 0:g.map(b=>{const F=p==null?void 0:p[b];if(F==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${m} attempted to use a colliderGroup ${b} but not found`);return F}),B=f.center!=null?c[f.center]:void 0;let C;v.forEach(b=>{if(C){const F=C.node,x=c[F],E=b.node,M=c[E],H={hitRadius:C.hitRadius,dragForce:C.dragForce,gravityPower:C.gravityPower,stiffness:C.stiffness,gravityDir:C.gravityDir!=null?new j().fromArray(C.gravityDir):void 0},O=this._importJoint(x,M,H,w);B&&(O.center=B),A.addJoint(O)}C=b})}),A.setInitState(),A})}_v0Import(e){var t,r,i;return oy(this,void 0,void 0,function*(){const s=e.parser.json;if(!(((t=s.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRM"))!==-1))return null;const a=(r=s.extensions)===null||r===void 0?void 0:r.VRM,l=a==null?void 0:a.secondaryAnimation;if(!l)return null;const A=l==null?void 0:l.boneGroups;if(!A)return null;const c=new aD,u=yield e.parser.getDependencies("node"),h=(i=l.colliderGroups)===null||i===void 0?void 0:i.map(d=>{var p;const f=u[d.node];return{colliders:((p=d.colliders)!==null&&p!==void 0?p:[]).map((g,v)=>{var w,B,C;const b=new j(0,0,0);return g.offset&&b.set((w=g.offset.x)!==null&&w!==void 0?w:0,(B=g.offset.y)!==null&&B!==void 0?B:0,g.offset.z?-g.offset.z:0),this._importSphereCollider(f,{offset:b,radius:(C=g.radius)!==null&&C!==void 0?C:0})})}});return A==null||A.forEach((d,p)=>{const f=d.bones;f&&f.forEach(m=>{var g,v,w,B;const C=u[m],b=new j;d.gravityDir?b.set((g=d.gravityDir.x)!==null&&g!==void 0?g:0,(v=d.gravityDir.y)!==null&&v!==void 0?v:0,(w=d.gravityDir.z)!==null&&w!==void 0?w:0):b.set(0,-1,0);const F=d.center!=null?u[d.center]:void 0,x={hitRadius:d.hitRadius,dragForce:d.dragForce,gravityPower:d.gravityPower,stiffness:d.stiffiness,gravityDir:b},E=(B=d.colliderGroups)===null||B===void 0?void 0:B.map(M=>{const H=h==null?void 0:h[M];if(H==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${p} attempted to use a colliderGroup ${M} but not found`);return H});C.traverse(M=>{var H;const O=(H=M.children[0])!==null&&H!==void 0?H:null,U=this._importJoint(M,O,x,E);F&&(U.center=F),c.addJoint(U)})})}),e.scene.updateMatrixWorld(),c.setInitState(),c})}_importJoint(e,t,r,i){const s=new Lde(e,t,r,i);if(this.jointHelperRoot){const o=new Rde(s);this.jointHelperRoot.add(o),o.renderOrder=this.jointHelperRoot.renderOrder}return s}_importSphereCollider(e,t){const{offset:r,radius:i}=t,s=new bJ({offset:r,radius:i}),o=new iD(s);if(e.add(o),this.colliderHelperRoot){const a=new rD(o);this.colliderHelperRoot.add(a),a.renderOrder=this.colliderHelperRoot.renderOrder}return o}_importCapsuleCollider(e,t){const{offset:r,radius:i,tail:s}=t,o=new CJ({offset:r,radius:i,tail:s}),a=new iD(o);if(e.add(a),this.colliderHelperRoot){const l=new rD(a);this.colliderHelperRoot.add(l),l.renderOrder=this.colliderHelperRoot.renderOrder}return a}}tu.EXTENSION_NAME="VRMC_springBone";class Ode{constructor(e,t){var r,i,s,o,a,l,A,c,u,h;this.parser=e;const d=t==null?void 0:t.helperRoot,p=t==null?void 0:t.autoUpdateHumanBones;this.expressionPlugin=(r=t==null?void 0:t.expressionPlugin)!==null&&r!==void 0?r:new pb(e),this.firstPersonPlugin=(i=t==null?void 0:t.firstPersonPlugin)!==null&&i!==void 0?i:new yue(e),this.humanoidPlugin=(s=t==null?void 0:t.humanoidPlugin)!==null&&s!==void 0?s:new _ue(e,{helperRoot:d,autoUpdateHumanBones:p}),this.lookAtPlugin=(o=t==null?void 0:t.lookAtPlugin)!==null&&o!==void 0?o:new Oue(e,{helperRoot:d}),this.metaPlugin=(a=t==null?void 0:t.metaPlugin)!==null&&a!==void 0?a:new Gue(e),this.mtoonMaterialPlugin=(l=t==null?void 0:t.mtoonMaterialPlugin)!==null&&l!==void 0?l:new zh(e),this.materialsHDREmissiveMultiplierPlugin=(A=t==null?void 0:t.materialsHDREmissiveMultiplierPlugin)!==null&&A!==void 0?A:new Zm(e),this.materialsV0CompatPlugin=(c=t==null?void 0:t.materialsV0CompatPlugin)!==null&&c!==void 0?c:new ode(e),this.springBonePlugin=(u=t==null?void 0:t.springBonePlugin)!==null&&u!==void 0?u:new tu(e,{colliderHelperRoot:d,jointHelperRoot:d}),this.nodeConstraintPlugin=(h=t==null?void 0:t.nodeConstraintPlugin)!==null&&h!==void 0?h:new eu(e,{helperRoot:d})}get name(){return"VRMLoaderPlugin"}beforeRoot(){return sy(this,void 0,void 0,function*(){yield this.materialsV0CompatPlugin.beforeRoot(),yield this.mtoonMaterialPlugin.beforeRoot()})}loadMesh(e){return sy(this,void 0,void 0,function*(){return yield this.mtoonMaterialPlugin.loadMesh(e)})}getMaterialType(e){const t=this.mtoonMaterialPlugin.getMaterialType(e);return t??null}extendMaterialParams(e,t){return sy(this,void 0,void 0,function*(){yield this.materialsHDREmissiveMultiplierPlugin.extendMaterialParams(e,t),yield this.mtoonMaterialPlugin.extendMaterialParams(e,t)})}afterRoot(e){return sy(this,void 0,void 0,function*(){yield this.metaPlugin.afterRoot(e),yield this.humanoidPlugin.afterRoot(e),yield this.expressionPlugin.afterRoot(e),yield this.lookAtPlugin.afterRoot(e),yield this.firstPersonPlugin.afterRoot(e),yield this.springBonePlugin.afterRoot(e),yield this.nodeConstraintPlugin.afterRoot(e),yield this.mtoonMaterialPlugin.afterRoot(e);const t=e.userData.vrmMeta,r=e.userData.vrmHumanoid;if(t&&r){const i=new Hue({scene:e.scene,expressionManager:e.userData.vrmExpressionManager,firstPerson:e.userData.vrmFirstPerson,humanoid:r,lookAt:e.userData.vrmLookAt,meta:t,materials:e.userData.vrmMToonMaterials,springBoneManager:e.userData.vrmSpringBoneManager,nodeConstraintManager:e.userData.vrmNodeConstraintManager});e.userData.vrm=i}})}}function lD(n){if(Object.values(n).forEach(e=>{e!=null&&e.isTexture&&e.dispose()}),n.isShaderMaterial){const e=n.uniforms;e&&Object.values(e).forEach(t=>{const r=t.value;r!=null&&r.isTexture&&r.dispose()})}n.dispose()}function Wde(n){const e=n.geometry;e&&e.dispose();const t=n.skeleton;t&&t.dispose();const r=n.material;r&&(Array.isArray(r)?r.forEach(i=>lD(i)):r&&lD(r))}function Zde(n){n.traverse(Wde)}function Gde(n){const e=new Map;n.traverse(t=>{if(t.type!=="SkinnedMesh")return;const r=t,s=r.geometry.getAttribute("skinIndex");let o=e.get(s);if(!o){const a=[],l=[],A={},c=s.array;for(let u=0;u<c.length;u++){const h=c[u];A[h]===void 0&&(A[h]=a.length,a.push(r.skeleton.bones[h]),l.push(r.skeleton.boneInverses[h])),c[u]=A[h]}s.copyArray(c),s.needsUpdate=!0,o=new yc(a,l),e.set(s,o)}r.bind(o,new Je)})}function Jde(n){const e=new Map;n.traverse(t=>{var r,i,s,o;if(!t.isMesh)return;const a=t,l=a.geometry,A=l.index;if(A==null)return;const c=e.get(l);if(c!=null){a.geometry=c;return}const u=new zt;u.name=l.name,u.morphTargetsRelative=l.morphTargetsRelative,l.groups.forEach(f=>{u.addGroup(f.start,f.count,f.materialIndex)}),u.boundingBox=(i=(r=l.boundingBox)===null||r===void 0?void 0:r.clone())!==null&&i!==void 0?i:null,u.boundingSphere=(o=(s=l.boundingSphere)===null||s===void 0?void 0:s.clone())!==null&&o!==void 0?o:null,u.setDrawRange(l.drawRange.start,l.drawRange.count),u.userData=l.userData,e.set(l,u);const h=[],d=[];{const f=A.array,m=new f.constructor(f.length);let g=0;for(let v=0;v<f.length;v++){const w=f[v];let B=h[w];B==null&&(h[w]=g,d[g]=w,B=g,g++),m[v]=B}u.setIndex(new ut(m,1,!1))}Object.keys(l.attributes).forEach(f=>{const m=l.attributes[f];if(m.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const g=m.array,{itemSize:v,normalized:w}=m,B=new g.constructor(d.length*v);d.forEach((C,b)=>{for(let F=0;F<v;F++)B[b*v+F]=g[C*v+F]}),u.setAttribute(f,new ut(B,v,w))});let p=!0;Object.keys(l.morphAttributes).forEach(f=>{u.morphAttributes[f]=[];const m=l.morphAttributes[f];for(let g=0;g<m.length;g++){const v=m[g];if(v.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const w=v.array,{itemSize:B,normalized:C}=v,b=new w.constructor(d.length*B);d.forEach((F,x)=>{for(let E=0;E<B;E++)b[x*B+E]=w[F*B+E]}),p=p&&b.every(F=>F===0),u.morphAttributes[f][g]=new ut(b,B,C)}}),p&&(u.morphAttributes={}),a.geometry=u}),Array.from(e.keys()).forEach(t=>{t.dispose()})}function Hde(n){var e;((e=n.meta)===null||e===void 0?void 0:e.metaVersion)==="0"&&(n.scene.rotation.y=Math.PI)}class Kf{constructor(){}}Kf.deepDispose=Zde;Kf.removeUnnecessaryJoints=Gde;Kf.removeUnnecessaryVertices=Jde;Kf.rotateVRM0=Hde;var $n;(function(n){n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.LINEAR=9729]="LINEAR",n[n.REPEAT=10497]="REPEAT"})($n||($n={}));const GB="blend_",AD="vrmColliderSphere";class zde{parse(e,t,r,i){const s=e.humanoid,o=e.meta,a=e.materials,l={},A={},c={},u=e.lookAt,h={generator:"UniGLTF-2.0.0",version:"2.0"};if(t)if(s)if(o)if(a){if(!u)throw new Error("lookAt is undefined or null")}else throw new Error("materials is undefined or null");else throw new Error("meta is undefined or null");else throw new Error("humanoid is undefined or null");else throw new Error("avatar is undefined or null");const d=a.filter(($,ce,me)=>me.findIndex(_e=>_e.name===$.name.replace(" (Outline)",""))===ce).map($=>$),p=d.map($=>$.name),f=r?{name:"icon",imageBitmap:r.image}:null,m=d.filter($=>$.map).map($=>{if(!$.map)throw new Error($.name+" map is null");return{name:$.name,imageBitmap:$.map.image}}),g=d.filter($=>$.userData.shadeTexture).map($=>{if(!$.userData.shadeTexture)throw new Error($.userData.shadeTexture+" map is null");return{name:$.name+"_shade",imageBitmap:$.userData.shadeTexture.image}}),v=m.concat(g),w=$de(v,f),B=qde(w),C=ehe(w),b=Kde(d,v),F=t.children.filter($=>$.children.length>0&&$.children[0].type===di.Bone)[0],x=FJ(F).filter($=>$.name!==AD),E=x.map($=>$.name),M=x.map($=>({children:$.children.filter(ce=>ce.name!==AD).map(ce=>E.indexOf(ce.name)),name:$.name,rotation:[$.quaternion.x,$.quaternion.y,$.quaternion.z,$.quaternion.w],scale:[$.scale.x,$.scale.y,$.scale.z],translation:[$.position.x,$.position.y,$.position.z]})),H=[],O=t.children.filter($=>$.type===di.Group||$.type===di.SkinnedMesh),U=[];O.forEach($=>{const ce=$.type===di.Group?$.children[0]:$,me=ce.geometry.attributes;U.push(new el(me.position,$n.FLOAT,Kt.POSITION,xo.VEC3,ce.name,void 0)),U.push(new el(me.normal,$n.FLOAT,Kt.NORMAL,xo.VEC3,ce.name,void 0)),U.push(new el(me.uv,$n.FLOAT,Kt.UV,xo.VEC2,ce.name,void 0)),U.push(new el(me.skinWeight,$n.FLOAT,Kt.SKIN_WEIGHT,xo.VEC4,ce.name,void 0)),U.push(new el(me.skinIndex,$n.UNSIGNED_SHORT,Kt.SKIN_INDEX,xo.VEC4,ce.name,void 0)),($.type===di.Group?$.children.map(P=>P):[$]).forEach(P=>{if(!P.geometry.index)throw new Error(P.name+" geometry.index is null");U.push(new el(P.geometry.index,$n.UNSIGNED_INT,Kt.INDEX,xo.SCALAR,ce.name,P.name))}),ce.morphTargetDictionary||(ce.morphTargetDictionary={},ce.morphTargetInfluences=[],ce.geometry.morphAttributes={},ce.updateMorphTargets()),ce.geometry.userData.targetNames=[];for(const P in e.expressionManager.expressionMap){const fe=e.expressionManager.expressionMap[P],de=fe._binds.map(K=>({node:x.length,index:K.index,weight:K.weight}));let ee=!1;for(const K in ui)if(P.toLowerCase()===ui[K].toLowerCase()){l[ui[K]]={morphTargetBinds:de,isBinary:fe.isBinary,overrideBlink:fe.overrideBlink,overrideLookAt:fe.overrideLookAt,overrideMouth:fe.overrideMouth},ee=!0;break}!ee&&P.toLowerCase()==="surprise"&&(l.surprised={morphTargetBinds:de,isBinary:fe.isBinary,overrideBlink:fe.overrideBlink,overrideLookAt:fe.overrideLookAt,overrideMouth:fe.overrideMouth},ee=!0),ee===!1&&(A[P]={morphTargetBinds:de,isBinary:fe.isBinary,overrideBlink:fe.overrideBlink,overrideLookAt:fe.overrideLookAt,overrideMouth:fe.overrideMouth})}for(const P in ce.morphTargetDictionary){ce.geometry.userData.targetNames.push(P);const fe=ce.morphTargetDictionary[P],de=ce.geometry.morphAttributes;U.push(new el(de.position[fe],$n.FLOAT,Kt.BLEND_POSITION,xo.VEC3,ce.name,GB+P)),U.push(new el(de.normal[fe],$n.FLOAT,Kt.BLEND_NORMAL,xo.VEC3,ce.name,GB+P))}}),Object.keys(l).length>0&&(c.preset=l),Object.keys(A).length>0&&(c.custom=A),O.forEach($=>{const ce=$.type===di.Group?$.children[0]:$,me=new Float32Array(ce.skeleton.boneInverses.map(_e=>_e.elements).flat());U.push(new el(new ut(me,16),$n.FLOAT,Kt.BIND_MATRIX,xo.MAT4,ce.name,ce.name))}),H.push(...U.map($=>({bufferView:-1,byteOffset:0,componentType:$.valueType,count:$.attribute.count,max:$.max,min:$.min,normalized:!1,type:$.accessorsType})));const y=Xde(O,U,p);O.forEach(($,ce)=>{M.push({mesh:ce,name:$.name,rotation:[$.quaternion.x,$.quaternion.y,$.quaternion.z,$.quaternion.w],scale:[$.scale.x,$.scale.y,$.scale.z],skin:ce,translation:[$.position.x,$.position.y,$.position.z]})});const I=jde(O,U,E),R={offsetFromHeadBone:[0,0,0],rangeMapHorizontalInner:{inputMaxValue:u.applier.rangeMapHorizontalInner.inputMaxValue,outputScale:u.applier.rangeMapHorizontalInner.outputScale},rangeMapHorizontalOuter:{inputMaxValue:u.applier.rangeMapHorizontalOuter.inputMaxValue,outputScale:u.applier.rangeMapHorizontalOuter.outputScale},rangeMapVerticalDown:{inputMaxValue:u.applier.rangeMapVerticalDown.inputMaxValue,outputScale:u.applier.rangeMapVerticalDown.outputScale},rangeMapVerticalUp:{inputMaxValue:u.applier.rangeMapVerticalUp.inputMaxValue,outputScale:u.applier.rangeMapVerticalUp.outputScale},type:"bone"},D={humanBones:{}};for(const $ in s.humanBones)D.humanBones[$]={node:E.indexOf(s.humanBones[$].node.name)};const k=o,V=[];V.push(...v.map($=>({buffer:cD($.imageBitmap),type:Kt.IMAGE}))),V.push(...U.map($=>({buffer:$.buffer,type:$.type}))),f&&V.push({buffer:cD(f.imageBitmap),type:Kt.IMAGE});let Z=0,N=0,_=0;const z=V.map(($,ce)=>{const me={buffer:0,byteLength:$.buffer.byteLength,byteOffset:Z,target:$.type===Kt.IMAGE||$.type===Kt.BIND_MATRIX?void 0:$.type===Kt.INDEX?$n.ELEMENT_ARRAY_BUFFER:$n.ARRAY_BUFFER};return Z+=$.buffer.byteLength,$.type===Kt.IMAGE?w[N++].bufferView=ce:H[_++].bufferView=ce,me}),ie=the(t,M),T={accessors:H,asset:h,buffers:[{byteLength:Z}],bufferViews:z,extensions:{VRMC_vrm:{expressions:c,humanoid:D,lookAt:R,meta:k,specVersion:"1.0"}},extensionsUsed:["KHR_materials_unlit","KHR_texture_transform","VRMC_materials_mtoon","VRMC_vrm"],images:w,materials:b,meshes:y,nodes:M,samplers:B,avatar:0,scenes:ie,skins:I,textures:C},q=new uD(rE(JSON.stringify(T,void 0,2)),"JSON"),ge=new uD(xg(V.map($=>$.buffer)),"BIN\0"),he=xg([q.buffer,ge.buffer]),Ae=xg([rE("glTF"),nE(2,4),nE(he.byteLength+12,4)]);i(xg([Ae,he]))}}function FJ(n){return n.children.length<=0?[n]:[n].concat(n.children.map(e=>FJ(e)).flat())}function cD(n){const e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0);const t=e.toDataURL("image/png"),r=atob(t.split(",")[1]),i=new ArrayBuffer(r.length),s=new DataView(i);for(let o=0;o<r.length;o++)s.setUint8(o,r.charCodeAt(o));return i}function nE(n,e){const t=new ArrayBuffer(e);return new DataView(t).setUint32(0,n,!0),t}function rE(n){return new TextEncoder().encode(n).buffer}function xg(n){let e=0;for(let i=0;i<n.length;i++)e+=n[i].byteLength;const t=new Uint8Array(e);let r=0;for(let i=0;i<n.length;++i)t.set(new Uint8Array(n[i]),r),r+=n[i].byteLength;return t.buffer}function Yde(n,e){const t=e===$n.UNSIGNED_SHORT?2:4,r=n.array;let i=0;const s=new ArrayBuffer(n.count*n.itemSize*t),o=new DataView(s);for(let a=0;a<n.count;a++)for(let l=0;l<n.itemSize;l++){let A;n.itemSize>4?A=r[a*n.itemSize+l]:l===0?A=n.getX(a):l===1?A=n.getY(a):l===2?A=n.getZ(a):A=n.getW(a),e===$n.UNSIGNED_SHORT?o.setUint16(i,A,!0):e===$n.UNSIGNED_INT?o.setUint32(i,A,!0):o.setFloat32(i,A,!0),i+=t}return s}let uD=class{constructor(e,t){this.data=e,this.type=t;const r=this.data;this.buffer=xg([nE(r.byteLength,4),rE(this.type),r])}paddingBinary(e,t){const r=Math.ceil(e.byteLength/4)*4;if(e.byteLength===r)return e;const i=new Uint8Array(r);i.set(new Uint8Array(e),0);for(let s=e.byteLength;s<r;s++)i.set(new Uint8Array(t),s);return i.buffer}},el=class{constructor(e,t,r,i,s,o){this.attribute=e,this.type=r,this.valueType=t,this.accessorsType=i,this.meshName=s,this.name=o,this.buffer=Yde(this.attribute,this.valueType),this.max=r===Kt.POSITION||r===Kt.BLEND_POSITION?[Math.max.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===0)),Math.max.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===1)),Math.max.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===2))]:void 0,this.min=r===Kt.POSITION||r===Kt.BLEND_POSITION?[Math.min.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===0)),Math.min.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===1)),Math.min.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===2))]:void 0}};var Fh;(function(n){n.MeshBasicMaterial="MeshBasicMaterial",n.MeshStandardMaterial="MeshStandardMaterial",n.MToonMaterial="MToonMaterial"})(Fh||(Fh={}));var xo;(function(n){n.SCALAR="SCALAR",n.VEC2="VEC2",n.VEC3="VEC3",n.VEC4="VEC4",n.MAT4="MAT4"})(xo||(xo={}));var Kt;(function(n){n.POSITION="POSITION",n.NORMAL="NORMAL",n.UV="UV",n.INDEX="INDEX",n.SKIN_WEIGHT="SKIN_WEIGHT",n.SKIN_INDEX="SKIN_INDEX",n.BLEND_POSITION="BLEND_POSITION",n.BLEND_NORMAL="BLEND_NORMAL",n.BIND_MATRIX="BIND_MATRIX",n.IMAGE="IMAGE"})(Kt||(Kt={}));var di;(function(n){n.Group="Group",n.SkinnedMesh="SkinnedMesh",n.Object3D="Object3D",n.Bone="Bone"})(di||(di={}));const Xde=(n,e,t)=>n.map(r=>{const i=r.type===di.Group?r.children[0]:r,s=r.type===di.Group?r.children.map(o=>o):[r];return{name:r.name,primitives:s.map(o=>{const a=e.map(A=>A.meshName===i.name?A.type:null),l=Array.isArray(o.material)?o.material[0].name:o.material.name;return{attributes:{JOINTS_0:a.indexOf(Kt.SKIN_INDEX),NORMAL:a.indexOf(Kt.NORMAL),POSITION:a.indexOf(Kt.POSITION),TEXCOORD_0:a.indexOf(Kt.UV),WEIGHTS_0:a.indexOf(Kt.SKIN_WEIGHT)},extras:{targetNames:o.geometry.userData.targetNames},indices:e.map(A=>A.type===Kt.INDEX&&A.meshName===i.name?A.name:null).indexOf(o.name),material:t.indexOf(l),mode:4,targets:i.geometry.userData.targetNames?i.geometry.userData.targetNames.map(A=>({NORMAL:e.map(c=>c.type===Kt.BLEND_NORMAL&&c.meshName===i.name?c.name:null).indexOf(GB+A),POSITION:e.map(c=>c.type===Kt.BLEND_POSITION&&c.meshName===i.name?c.name:null).indexOf(GB+A)})):void 0}})}}),jde=(n,e,t)=>n.map(r=>{const i=r.type===di.Group?r.children[0]:r;return{inverseBindMatrices:e.map(s=>s.type===Kt.BIND_MATRIX?s.meshName:null).indexOf(i.name),joints:i.skeleton.bones.map(s=>t.indexOf(s.name)),skeleton:t.indexOf(i.skeleton.bones[0].name)}}),Kde=(n,e)=>n.map(t=>{let r,i=null;if(t=t.userData.vrmMaterial?t.userData.vrmMaterial:t,t.type==="ShaderMaterial")i=t.userData.gltfExtensions.VRMC_materials_mtoon,i.shadeMultiplyTexture={index:e.map(c=>c.name).indexOf(t.uniforms.shadeMultiplyTexture.name)},r=t.color?[1,1,1,1]:void 0;else{const A=t;r=A.color?[A.color.r,A.color.g,A.color.b,1]:void 0}let s=-1;t.map?s=e.map(A=>A.name).indexOf(t.name):t.uniforms&&t.uniforms.map&&(s=e.map(A=>A.name).indexOf(t.uniforms.map.name));const o=s>=0?{extensions:{KHR_texture_transform:{offset:[0,0],scale:[1,1]}},index:s,texCoord:0}:void 0,a=(()=>{switch(t.type){case Fh.MeshStandardMaterial:return t.metalness;case Fh.MeshBasicMaterial:return 0;default:return 0}})(),l=(()=>{switch(t.type){case Fh.MeshStandardMaterial:return t.roughness;case Fh.MeshBasicMaterial:return .9;default:return .9}})();return{alphaCutoff:t.alphaTest>0?t.alphaTest:void 0,alphaMode:t.transparent?"BLEND":t.alphaTest>0?"MASK":"OPAQUE",doubleSided:t.side===2,extensions:t.type==="ShaderMaterial"?{KHR_materials_unlit:{},VRMC_materials_mtoon:i}:void 0,name:t.name,pbrMetallicRoughness:{baseColorFactor:r,baseColorTexture:o,metallicFactor:a,roughnessFactor:l}}}),$de=(n,e)=>(e?n.concat(e):n).filter(t=>t&&t.imageBitmap).map(t=>({bufferView:-1,mimeType:"image/png",name:t.name})),qde=n=>n.map(()=>({magFilter:$n.LINEAR,minFilter:$n.LINEAR,wrapS:$n.REPEAT,wrapT:$n.REPEAT})),ehe=n=>n.map((e,t)=>({sampler:0,source:t})),the=(n,e)=>{const t=e.map(r=>r.name);return[{nodes:n.children.filter(r=>r.type===di.Object3D||r.type===di.SkinnedMesh||r.type===di.Group||r.type===di.Bone).map(r=>t.indexOf(r.name))}]},_J=0,nhe=1,EJ=2,dD=2,AI=1.25,hD=1,mw=6*4+4+4,iE=65535,rhe=Math.pow(2,-24);class ay{constructor(){}}function da(n,e,t){return t.min.x=e[n],t.min.y=e[n+1],t.min.z=e[n+2],t.max.x=e[n+3],t.max.y=e[n+4],t.max.z=e[n+5],t}function fD(n){let e=-1,t=-1/0;for(let r=0;r<3;r++){const i=n[r+3]-n[r];i>t&&(t=i,e=r)}return e}function pD(n,e){e.set(n)}function gD(n,e,t){let r,i;for(let s=0;s<3;s++){const o=s+3;r=n[s],i=e[s],t[s]=r<i?r:i,r=n[o],i=e[o],t[o]=r>i?r:i}}function ly(n,e,t){for(let r=0;r<3;r++){const i=e[n+2*r],s=e[n+2*r+1],o=i-s,a=i+s;o<t[r]&&(t[r]=o),a>t[r+3]&&(t[r+3]=a)}}function Zp(n){const e=n[3]-n[0],t=n[4]-n[1],r=n[5]-n[2];return 2*(e*t+t*r+r*e)}function ihe(n,e){if(!n.index){const t=n.attributes.position.count,r=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let i;t>65535?i=new Uint32Array(new r(4*t)):i=new Uint16Array(new r(2*t)),n.setIndex(new ut(i,1));for(let s=0;s<t;s++)i[s]=s}}function she(n){if(!n.groups||!n.groups.length)return[{offset:0,count:n.index.count/3}];const e=[],t=new Set;for(const i of n.groups)t.add(i.start),t.add(i.start+i.count);const r=Array.from(t.values()).sort((i,s)=>i-s);for(let i=0;i<r.length-1;i++){const s=r[i],o=r[i+1];e.push({offset:s/3,count:(o-s)/3})}return e}function cI(n,e,t,r,i=null){let s=1/0,o=1/0,a=1/0,l=-1/0,A=-1/0,c=-1/0,u=1/0,h=1/0,d=1/0,p=-1/0,f=-1/0,m=-1/0;const g=i!==null;for(let v=e*6,w=(e+t)*6;v<w;v+=6){const B=n[v+0],C=n[v+1],b=B-C,F=B+C;b<s&&(s=b),F>l&&(l=F),g&&B<u&&(u=B),g&&B>p&&(p=B);const x=n[v+2],E=n[v+3],M=x-E,H=x+E;M<o&&(o=M),H>A&&(A=H),g&&x<h&&(h=x),g&&x>f&&(f=x);const O=n[v+4],U=n[v+5],y=O-U,I=O+U;y<a&&(a=y),I>c&&(c=I),g&&O<d&&(d=O),g&&O>m&&(m=O)}r[0]=s,r[1]=o,r[2]=a,r[3]=l,r[4]=A,r[5]=c,g&&(i[0]=u,i[1]=h,i[2]=d,i[3]=p,i[4]=f,i[5]=m)}function ohe(n,e,t,r){let i=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,A=-1/0;for(let c=e*6,u=(e+t)*6;c<u;c+=6){const h=n[c+0];h<i&&(i=h),h>a&&(a=h);const d=n[c+2];d<s&&(s=d),d>l&&(l=d);const p=n[c+4];p<o&&(o=p),p>A&&(A=p)}r[0]=i,r[1]=s,r[2]=o,r[3]=a,r[4]=l,r[5]=A}function ahe(n,e,t,r,i){let s=t,o=t+r-1;const a=i.pos,l=i.axis*2;for(;;){for(;s<=o&&e[s*6+l]<a;)s++;for(;s<=o&&e[o*6+l]>=a;)o--;if(s<o){for(let A=0;A<3;A++){let c=n[s*3+A];n[s*3+A]=n[o*3+A],n[o*3+A]=c;let u=e[s*6+A*2+0];e[s*6+A*2+0]=e[o*6+A*2+0],e[o*6+A*2+0]=u;let h=e[s*6+A*2+1];e[s*6+A*2+1]=e[o*6+A*2+1],e[o*6+A*2+1]=h}s++,o--}else return s}}const sl=32,lhe=(n,e)=>n.candidate-e.candidate,uA=new Array(sl).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),Ay=new Float32Array(6);function Ahe(n,e,t,r,i,s){let o=-1,a=0;if(s===_J)o=fD(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===nhe)o=fD(n),o!==-1&&(a=che(t,r,i,o));else if(s===EJ){const l=Zp(n);let A=AI*i;const c=r*6,u=(r+i)*6;for(let h=0;h<3;h++){const d=e[h],m=(e[h+3]-d)/sl;if(i<sl/4){const g=[...uA];g.length=i;let v=0;for(let B=c;B<u;B+=6,v++){const C=g[v];C.candidate=t[B+2*h],C.count=0;const{bounds:b,leftCacheBounds:F,rightCacheBounds:x}=C;for(let E=0;E<3;E++)x[E]=1/0,x[E+3]=-1/0,F[E]=1/0,F[E+3]=-1/0,b[E]=1/0,b[E+3]=-1/0;ly(B,t,b)}g.sort(lhe);let w=i;for(let B=0;B<w;B++){const C=g[B];for(;B+1<w&&g[B+1].candidate===C.candidate;)g.splice(B+1,1),w--}for(let B=c;B<u;B+=6){const C=t[B+2*h];for(let b=0;b<w;b++){const F=g[b];C>=F.candidate?ly(B,t,F.rightCacheBounds):(ly(B,t,F.leftCacheBounds),F.count++)}}for(let B=0;B<w;B++){const C=g[B],b=C.count,F=i-C.count,x=C.leftCacheBounds,E=C.rightCacheBounds;let M=0;b!==0&&(M=Zp(x)/l);let H=0;F!==0&&(H=Zp(E)/l);const O=hD+AI*(M*b+H*F);O<A&&(o=h,A=O,a=C.candidate)}}else{for(let w=0;w<sl;w++){const B=uA[w];B.count=0,B.candidate=d+m+w*m;const C=B.bounds;for(let b=0;b<3;b++)C[b]=1/0,C[b+3]=-1/0}for(let w=c;w<u;w+=6){let b=~~((t[w+2*h]-d)/m);b>=sl&&(b=sl-1);const F=uA[b];F.count++,ly(w,t,F.bounds)}const g=uA[sl-1];pD(g.bounds,g.rightCacheBounds);for(let w=sl-2;w>=0;w--){const B=uA[w],C=uA[w+1];gD(B.bounds,C.rightCacheBounds,B.rightCacheBounds)}let v=0;for(let w=0;w<sl-1;w++){const B=uA[w],C=B.count,b=B.bounds,x=uA[w+1].rightCacheBounds;C!==0&&(v===0?pD(b,Ay):gD(b,Ay,Ay)),v+=C;let E=0,M=0;v!==0&&(E=Zp(Ay)/l);const H=i-v;H!==0&&(M=Zp(x)/l);const O=hD+AI*(E*v+M*H);O<A&&(o=h,A=O,a=B.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function che(n,e,t,r){let i=0;for(let s=e,o=e+t;s<o;s++)i+=n[s*6+r*2];return i/t}function uhe(n,e){const t=n.attributes.position,r=n.index.array,i=r.length/3,s=new Float32Array(i*6),o=t.normalized,a=t.array,l=t.offset||0;let A=3;t.isInterleavedBufferAttribute&&(A=t.data.stride);const c=["getX","getY","getZ"];for(let u=0;u<i;u++){const h=u*3,d=u*6;let p,f,m;o?(p=r[h+0],f=r[h+1],m=r[h+2]):(p=r[h+0]*A+l,f=r[h+1]*A+l,m=r[h+2]*A+l);for(let g=0;g<3;g++){let v,w,B;o?(v=t[c[g]](p),w=t[c[g]](f),B=t[c[g]](m)):(v=a[p+g],w=a[f+g],B=a[m+g]);let C=v;w<C&&(C=w),B<C&&(C=B);let b=v;w>b&&(b=w),B>b&&(b=B);const F=(b-C)/2,x=g*2;s[d+x+0]=C+F,s[d+x+1]=F+(Math.abs(C)+F)*rhe,C<e[g]&&(e[g]=C),b>e[g+3]&&(e[g+3]=b)}}return s}function dhe(n,e){function t(g){h&&h(g/d)}function r(g,v,w,B=null,C=0){if(!p&&C>=l&&(p=!0,A&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(n))),w<=c||C>=l)return t(v+w),g.offset=v,g.count=w,g;const b=Ahe(g.boundingData,B,o,v,w,u);if(b.axis===-1)return t(v+w),g.offset=v,g.count=w,g;const F=ahe(a,o,v,w,b);if(F===v||F===v+w)t(v+w),g.offset=v,g.count=w;else{g.splitAxis=b.axis;const x=new ay,E=v,M=F-v;g.left=x,x.boundingData=new Float32Array(6),cI(o,E,M,x.boundingData,s),r(x,E,M,s,C+1);const H=new ay,O=F,U=w-M;g.right=H,H.boundingData=new Float32Array(6),cI(o,O,U,H.boundingData,s),r(H,O,U,s,C+1)}return g}ihe(n,e);const i=new Float32Array(6),s=new Float32Array(6),o=uhe(n,i),a=n.index.array,l=e.maxDepth,A=e.verbose,c=e.maxLeafTris,u=e.strategy,h=e.onProgress,d=n.index.count/3;let p=!1;const f=[],m=she(n);if(m.length===1){const g=m[0],v=new ay;v.boundingData=i,ohe(o,g.offset,g.count,s),r(v,g.offset,g.count,s),f.push(v)}else for(let g of m){const v=new ay;v.boundingData=new Float32Array(6),cI(o,g.offset,g.count,v.boundingData,s),r(v,g.offset,g.count,s),f.push(v)}return f}function hhe(n,e){const t=dhe(n,e);let r,i,s;const o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let c=0;c<t.length;c++){const u=t[c];let h=l(u);const d=new a(mw*h);r=new Float32Array(d),i=new Uint32Array(d),s=new Uint16Array(d),A(0,u),o.push(d)}return o;function l(c){return c.count?1:1+l(c.left)+l(c.right)}function A(c,u){const h=c/4,d=c/2,p=!!u.count,f=u.boundingData;for(let m=0;m<6;m++)r[h+m]=f[m];if(p){const m=u.offset,g=u.count;return i[h+6]=m,s[d+14]=g,s[d+15]=iE,c+mw}else{const m=u.left,g=u.right,v=u.splitAxis;let w;if(w=A(c+mw,m),w/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[h+6]=w/4,w=A(w,g),i[h+7]=v,w}}}class Ol{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let r=1/0,i=-1/0;for(let s=0,o=e.length;s<o;s++){const l=e[s][t];r=l<r?l:r,i=l>i?l:i}this.min=r,this.max=i}setFromPoints(e,t){let r=1/0,i=-1/0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=e.dot(a);r=l<r?l:r,i=l>i?l:i}this.min=r,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}}Ol.prototype.setFromBox=function(){const n=new j;return function(t,r){const i=r.min,s=r.max;let o=1/0,a=-1/0;for(let l=0;l<=1;l++)for(let A=0;A<=1;A++)for(let c=0;c<=1;c++){n.x=i.x*l+s.x*(1-l),n.y=i.y*A+s.y*(1-A),n.z=i.z*c+s.z*(1-c);const u=t.dot(n);o=Math.min(u,o),a=Math.max(u,a)}this.min=o,this.max=a}}();const fhe=function(){const n=new j,e=new j,t=new j;return function(i,s,o){const a=i.start,l=n,A=s.start,c=e;t.subVectors(a,A),n.subVectors(i.end,i.start),e.subVectors(s.end,s.start);const u=t.dot(c),h=c.dot(l),d=c.dot(c),p=t.dot(l),m=l.dot(l)*d-h*h;let g,v;m!==0?g=(u*h-p*d)/m:g=0,v=(u+g*h)/d,o.x=g,o.y=v}}(),eQ=function(){const n=new ze,e=new j,t=new j;return function(i,s,o,a){fhe(i,s,n);let l=n.x,A=n.y;if(l>=0&&l<=1&&A>=0&&A<=1){i.at(l,o),s.at(A,a);return}else if(l>=0&&l<=1){A<0?s.at(0,a):s.at(1,a),i.closestPointToPoint(a,!0,o);return}else if(A>=0&&A<=1){l<0?i.at(0,o):i.at(1,o),s.closestPointToPoint(o,!0,a);return}else{let c;l<0?c=i.start:c=i.end;let u;A<0?u=s.start:u=s.end;const h=e,d=t;if(i.closestPointToPoint(u,!0,e),s.closestPointToPoint(c,!0,t),h.distanceToSquared(u)<=d.distanceToSquared(c)){o.copy(h),a.copy(u);return}else{o.copy(c),a.copy(d);return}}}}(),phe=function(){const n=new j,e=new j,t=new gl,r=new El;return function(s,o){const{radius:a,center:l}=s,{a:A,b:c,c:u}=o;if(r.start=A,r.end=c,r.closestPointToPoint(l,!0,n).distanceTo(l)<=a||(r.start=A,r.end=u,r.closestPointToPoint(l,!0,n).distanceTo(l)<=a)||(r.start=c,r.end=u,r.closestPointToPoint(l,!0,n).distanceTo(l)<=a))return!0;const f=o.getPlane(t);if(Math.abs(f.distanceToPoint(l))<=a){const g=f.projectPoint(l,e);if(o.containsPoint(g))return!0}return!1}}(),ghe=1e-15;function Fd(n){return Math.abs(n)<ghe}class Wl extends rs{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new j),this.satBounds=new Array(4).fill().map(()=>new Ol),this.points=[this.a,this.b,this.c],this.sphere=new Nu,this.plane=new gl,this.needsUpdate=!0}intersectsSphere(e){return phe(e,this)}update(){const e=this.a,t=this.b,r=this.c,i=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,i);const A=s[1],c=o[1];A.subVectors(e,t),c.setFromPoints(A,i);const u=s[2],h=o[2];u.subVectors(t,r),h.setFromPoints(u,i);const d=s[3],p=o[3];d.subVectors(r,e),p.setFromPoints(d,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}Wl.prototype.closestPointToSegment=function(){const n=new j,e=new j,t=new El;return function(i,s=null,o=null){const{start:a,end:l}=i,A=this.points;let c,u=1/0;for(let h=0;h<3;h++){const d=(h+1)%3;t.start.copy(A[h]),t.end.copy(A[d]),eQ(t,i,n,e),c=n.distanceToSquared(e),c<u&&(u=c,s&&s.copy(n),o&&o.copy(e))}return this.closestPointToPoint(a,n),c=a.distanceToSquared(n),c<u&&(u=c,s&&s.copy(n),o&&o.copy(a)),this.closestPointToPoint(l,n),c=l.distanceToSquared(n),c<u&&(u=c,s&&s.copy(n),o&&o.copy(l)),Math.sqrt(u)}}();Wl.prototype.intersectsTriangle=function(){const n=new Wl,e=new Array(3),t=new Array(3),r=new Ol,i=new Ol,s=new j,o=new j,a=new j,l=new j,A=new El,c=new El,u=new El;return function(d,p=null,f=!1){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(n.copy(d),n.update(),d=n);const m=this.plane,g=d.plane;if(Math.abs(m.normal.dot(g.normal))>1-1e-10){const v=this.satBounds,w=this.satAxes;t[0]=d.a,t[1]=d.b,t[2]=d.c;for(let b=0;b<4;b++){const F=v[b],x=w[b];if(r.setFromPoints(x,t),F.isSeparated(r))return!1}const B=d.satBounds,C=d.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let b=0;b<4;b++){const F=B[b],x=C[b];if(r.setFromPoints(x,e),F.isSeparated(r))return!1}for(let b=0;b<4;b++){const F=w[b];for(let x=0;x<4;x++){const E=C[x];if(s.crossVectors(F,E),r.setFromPoints(s,e),i.setFromPoints(s,t),r.isSeparated(i))return!1}}return p&&(f||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),p.start.set(0,0,0),p.end.set(0,0,0)),!0}else{const v=this.points;let w=!1,B=0;for(let y=0;y<3;y++){const I=v[y],R=v[(y+1)%3];A.start.copy(I),A.end.copy(R),A.delta(o);const D=w?c.start:c.end,k=Fd(g.distanceToPoint(I));if(Fd(g.normal.dot(o))&&k){c.copy(A),B=2;break}if((g.intersectLine(A,D)||k)&&!Fd(D.distanceTo(R))){if(B++,w)break;w=!0}}if(B===1&&d.containsPoint(c.end))return p&&(p.start.copy(c.end),p.end.copy(c.end)),!0;if(B!==2)return!1;const C=d.points;let b=!1,F=0;for(let y=0;y<3;y++){const I=C[y],R=C[(y+1)%3];A.start.copy(I),A.end.copy(R),A.delta(a);const D=b?u.start:u.end,k=Fd(m.distanceToPoint(I));if(Fd(m.normal.dot(a))&&k){u.copy(A),F=2;break}if((m.intersectLine(A,D)||k)&&!Fd(D.distanceTo(R))){if(F++,b)break;b=!0}}if(F===1&&this.containsPoint(u.end))return p&&(p.start.copy(u.end),p.end.copy(u.end)),!0;if(F!==2)return!1;if(c.delta(o),u.delta(a),o.dot(a)<0){let y=u.start;u.start=u.end,u.end=y}const x=c.start.dot(o),E=c.end.dot(o),M=u.start.dot(o),H=u.end.dot(o),O=E<M,U=x<H;return x!==H&&M!==E&&O===U?!1:(p&&(l.subVectors(c.start,u.start),l.dot(o)>0?p.start.copy(c.start):p.start.copy(u.start),l.subVectors(c.end,u.end),l.dot(o)<0?p.end.copy(c.end):p.end.copy(u.end)),!0)}}}();Wl.prototype.distanceToPoint=function(){const n=new j;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();Wl.prototype.distanceToTriangle=function(){const n=new j,e=new j,t=["a","b","c"],r=new El,i=new El;return function(o,a=null,l=null){const A=a||l?r:null;if(this.intersectsTriangle(o,A))return(a||l)&&(a&&A.getCenter(a),l&&A.getCenter(l)),0;let c=1/0;for(let u=0;u<3;u++){let h;const d=t[u],p=o[d];this.closestPointToPoint(p,n),h=p.distanceToSquared(n),h<c&&(c=h,a&&a.copy(n),l&&l.copy(p));const f=this[d];o.closestPointToPoint(f,n),h=f.distanceToSquared(n),h<c&&(c=h,a&&a.copy(f),l&&l.copy(n))}for(let u=0;u<3;u++){const h=t[u],d=t[(u+1)%3];r.set(this[h],this[d]);for(let p=0;p<3;p++){const f=t[p],m=t[(p+1)%3];i.set(o[f],o[m]),eQ(r,i,n,e);const g=n.distanceToSquared(e);g<c&&(c=g,a&&a.copy(n),l&&l.copy(e))}}return Math.sqrt(c)}}();class Ta{constructor(e,t,r){this.isOrientedBox=!0,this.min=new j,this.max=new j,this.matrix=new Je,this.invMatrix=new Je,this.points=new Array(8).fill().map(()=>new j),this.satAxes=new Array(3).fill().map(()=>new j),this.satBounds=new Array(3).fill().map(()=>new Ol),this.alignedSatBounds=new Array(3).fill().map(()=>new Ol),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),r&&this.matrix.copy(r)}set(e,t,r){this.min.copy(e),this.max.copy(t),this.matrix.copy(r),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}Ta.prototype.update=function(){return function(){const e=this.matrix,t=this.min,r=this.max,i=this.points;for(let A=0;A<=1;A++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){const h=1*A|2*c|4*u,d=i[h];d.x=A?r.x:t.x,d.y=c?r.y:t.y,d.z=u?r.z:t.z,d.applyMatrix4(e)}const s=this.satBounds,o=this.satAxes,a=i[0];for(let A=0;A<3;A++){const c=o[A],u=s[A],h=1<<A,d=i[h];c.subVectors(a,d),u.setFromPoints(c,i)}const l=this.alignedSatBounds;l[0].setFromPointsField(i,"x"),l[1].setFromPointsField(i,"y"),l[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Ta.prototype.intersectsBox=function(){const n=new Ol;return function(t){this.needsUpdate&&this.update();const r=t.min,i=t.max,s=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(n.min=r.x,n.max=i.x,a[0].isSeparated(n)||(n.min=r.y,n.max=i.y,a[1].isSeparated(n))||(n.min=r.z,n.max=i.z,a[2].isSeparated(n)))return!1;for(let l=0;l<3;l++){const A=o[l],c=s[l];if(n.setFromBox(A,t),c.isSeparated(n))return!1}return!0}}();Ta.prototype.intersectsTriangle=function(){const n=new Wl,e=new Array(3),t=new Ol,r=new Ol,i=new j;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(n.copy(o),n.update(),o=n);const a=this.satBounds,l=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let h=0;h<3;h++){const d=a[h],p=l[h];if(t.setFromPoints(p,e),d.isSeparated(t))return!1}const A=o.satBounds,c=o.satAxes,u=this.points;for(let h=0;h<3;h++){const d=A[h],p=c[h];if(t.setFromPoints(p,u),d.isSeparated(t))return!1}for(let h=0;h<3;h++){const d=l[h];for(let p=0;p<4;p++){const f=c[p];if(i.crossVectors(d,f),t.setFromPoints(i,e),r.setFromPoints(i,u),t.isSeparated(r))return!1}}return!0}}();Ta.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();Ta.prototype.distanceToPoint=function(){const n=new j;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();Ta.prototype.distanceToBox=function(){const n=["x","y","z"],e=new Array(12).fill().map(()=>new El),t=new Array(12).fill().map(()=>new El),r=new j,i=new j;return function(o,a=0,l=null,A=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(l||A)&&(o.getCenter(i),this.closestPointToPoint(i,r),o.closestPointToPoint(r,i),l&&l.copy(r),A&&A.copy(i)),0;const c=a*a,u=o.min,h=o.max,d=this.points;let p=1/0;for(let m=0;m<8;m++){const g=d[m];i.copy(g).clamp(u,h);const v=g.distanceToSquared(i);if(v<p&&(p=v,l&&l.copy(g),A&&A.copy(i),v<c))return Math.sqrt(v)}let f=0;for(let m=0;m<3;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){const w=(m+1)%3,B=(m+2)%3,C=g<<w|v<<B,b=1<<m|g<<w|v<<B,F=d[C],x=d[b];e[f].set(F,x);const M=n[m],H=n[w],O=n[B],U=t[f],y=U.start,I=U.end;y[M]=u[M],y[H]=g?u[H]:h[H],y[O]=v?u[O]:h[H],I[M]=h[M],I[H]=g?u[H]:h[H],I[O]=v?u[O]:h[H],f++}for(let m=0;m<=1;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){i.x=m?h.x:u.x,i.y=g?h.y:u.y,i.z=v?h.z:u.z,this.closestPointToPoint(i,r);const w=i.distanceToSquared(r);if(w<p&&(p=w,l&&l.copy(r),A&&A.copy(i),w<c))return Math.sqrt(w)}for(let m=0;m<12;m++){const g=e[m];for(let v=0;v<12;v++){const w=t[v];eQ(g,w,r,i);const B=r.distanceToSquared(i);if(B<p&&(p=B,l&&l.copy(r),A&&A.copy(i),B<c))return Math.sqrt(B)}}return Math.sqrt(p)}}();const cy=new j,uy=new j,dy=new j,mD=new ze,vD=new ze,yD=new ze,wD=new j;function mhe(n,e,t,r,i,s){let o;return s===yi?o=n.intersectTriangle(r,t,e,!0,i):o=n.intersectTriangle(e,t,r,s!==mi,i),o===null?null:{distance:n.origin.distanceTo(i),point:i.clone()}}function vhe(n,e,t,r,i,s,o){cy.fromBufferAttribute(e,r),uy.fromBufferAttribute(e,i),dy.fromBufferAttribute(e,s);const a=mhe(n,cy,uy,dy,wD,o);if(a){t&&(mD.fromBufferAttribute(t,r),vD.fromBufferAttribute(t,i),yD.fromBufferAttribute(t,s),a.uv=rs.getUV(wD,cy,uy,dy,mD,vD,yD,new ze));const l={a:r,b:i,c:s,normal:new j,materialIndex:0};rs.getNormal(cy,uy,dy,l.normal),a.face=l,a.faceIndex=r}return a}function SJ(n,e,t,r,i){const s=r*3,o=n.index.getX(s),a=n.index.getX(s+1),l=n.index.getX(s+2),A=vhe(t,n.attributes.position,n.attributes.uv,o,a,l,e);return A?(A.faceIndex=r,i&&i.push(A),A):null}function yhe(n,e,t,r,i,s){for(let o=r,a=r+i;o<a;o++)SJ(n,e,t,o,s)}function whe(n,e,t,r,i){let s=1/0,o=null;for(let a=r,l=r+i;a<l;a++){const A=SJ(n,e,t,a);A&&A.distance<s&&(o=A,s=A.distance)}return o}function BD(n,e,t){return n===null||(n.point.applyMatrix4(e.matrixWorld),n.distance=n.point.distanceTo(t.ray.origin),n.object=e,n.distance<t.near||n.distance>t.far)?null:n}function aa(n,e,t,r){const i=n.a,s=n.b,o=n.c;let a=e,l=e+1,A=e+2;t&&(a=t.getX(e),l=t.getX(e+1),A=t.getX(e+2)),i.x=r.getX(a),i.y=r.getY(a),i.z=r.getZ(a),s.x=r.getX(l),s.y=r.getY(l),s.z=r.getZ(l),o.x=r.getX(A),o.y=r.getY(A),o.z=r.getZ(A)}function CD(n,e,t,r,i,s,o){const a=t.index,l=t.attributes.position;for(let A=n,c=e+n;A<c;A++)if(aa(o,A*3,a,l),o.needsUpdate=!0,r(o,A,i,s))return!0;return!1}class UJ{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}function IA(n,e){return e[n+15]===65535}function Yh(n,e){return e[n+6]}function Gm(n,e){return e[n+14]}function Jm(n){return n+8}function Hm(n,e){return e[n+6]}function Bhe(n,e){return e[n+7]}const _h=new Cs,JB=new j,Che=["x","y","z"];function sE(n,e,t,r,i){let s=n*2,o=$f,a=KA,l=$A;if(IA(s,a)){const c=Yh(n,l),u=Gm(s,a);yhe(e,t,r,c,u,i)}else{const c=Jm(n);HB(c,o,r,JB)&&sE(c,e,t,r,i);const u=Hm(n,l);HB(u,o,r,JB)&&sE(u,e,t,r,i)}}function oE(n,e,t,r){let i=n*2,s=$f,o=KA,a=$A;if(IA(i,o)){const A=Yh(n,a),c=Gm(i,o);return whe(e,t,r,A,c)}else{const A=Bhe(n,a),c=Che[A],h=r.direction[c]>=0;let d,p;h?(d=Jm(n),p=Hm(n,a)):(d=Hm(n,a),p=Jm(n));const m=HB(d,s,r,JB)?oE(d,e,t,r):null;if(m){const w=m.point[c];if(h?w<=s[p+A]:w>=s[p+A+3])return m}const v=HB(p,s,r,JB)?oE(p,e,t,r):null;return m&&v?m.distance<=v.distance?m:v:m||v||null}}const bhe=function(){let n,e;const t=[],r=new UJ(()=>new Cs);return function(...o){n=r.getPrimitive(),e=r.getPrimitive(),t.push(n,e);const a=i(...o);r.releasePrimitive(n),r.releasePrimitive(e),t.pop(),t.pop();const l=t.length;return l>0&&(e=t[l-1],n=t[l-2]),a};function i(s,o,a,l,A=null,c=0,u=0){function h(w){let B=w*2,C=KA,b=$A;for(;!IA(B,C);)w=Jm(w),B=w*2;return Yh(w,b)}function d(w){let B=w*2,C=KA,b=$A;for(;!IA(B,C);)w=Hm(w,b),B=w*2;return Yh(w,b)+Gm(B,C)}let p=s*2,f=$f,m=KA,g=$A;if(IA(p,m)){const w=Yh(s,g),B=Gm(p,m);return da(s,f,n),l(w,B,!1,u,c+s,n)}else{const w=Jm(s),B=Hm(s,g);let C=w,b=B,F,x,E,M;if(A&&(E=n,M=e,da(C,f,E),da(b,f,M),F=A(E),x=A(M),x<F)){C=B,b=w;const D=F;F=x,x=D,E=M}E||(E=n,da(C,f,E));const H=IA(C*2,m),O=a(E,H,F,u+1,c+C);let U;if(O===dD){const D=h(C),V=d(C)-D;U=l(D,V,!0,u+1,c+C,E)}else U=O&&i(C,o,a,l,A,c,u+1);if(U)return!0;M=e,da(b,f,M);const y=IA(b*2,m),I=a(M,y,x,u+1,c+b);let R;if(I===dD){const D=h(b),V=d(b)-D;R=l(D,V,!0,u+1,c+b,M)}else R=I&&i(b,o,a,l,A,c,u+1);return!!R}}}(),xhe=function(){const n=new Wl,e=new Wl,t=new Je,r=new Ta,i=new Ta;return function s(o,a,l,A,c=null){let u=o*2,h=$f,d=KA,p=$A;if(c===null&&(l.boundingBox||l.computeBoundingBox(),r.set(l.boundingBox.min,l.boundingBox.max,A),c=r),IA(u,d)){const m=a,g=m.index,v=m.attributes.position,w=l.index,B=l.attributes.position,C=Yh(o,p),b=Gm(u,d);if(t.copy(A).invert(),l.boundsTree)return da(o,h,i),i.matrix.copy(t),i.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:x=>i.intersectsBox(x),intersectsTriangle:x=>{x.a.applyMatrix4(A),x.b.applyMatrix4(A),x.c.applyMatrix4(A),x.needsUpdate=!0;for(let E=C*3,M=(b+C)*3;E<M;E+=3)if(aa(e,E,g,v),e.needsUpdate=!0,x.intersectsTriangle(e))return!0;return!1}});for(let F=C*3,x=b+C*3;F<x;F+=3){aa(n,F,g,v),n.a.applyMatrix4(t),n.b.applyMatrix4(t),n.c.applyMatrix4(t),n.needsUpdate=!0;for(let E=0,M=w.count;E<M;E+=3)if(aa(e,E,w,B),e.needsUpdate=!0,n.intersectsTriangle(e))return!0}}else{const m=o+8,g=p[o+6];return da(m,h,_h),!!(c.intersectsBox(_h)&&s(m,a,l,A,c)||(da(g,h,_h),c.intersectsBox(_h)&&s(g,a,l,A,c)))}}}();function HB(n,e,t,r){return da(n,e,_h),t.intersectBox(_h,r)}const aE=[];let vw,$f,KA,$A;function Ig(n){vw&&aE.push(vw),vw=n,$f=new Float32Array(n),KA=new Uint16Array(n),$A=new Uint32Array(n)}function hy(){vw=null,$f=null,KA=null,$A=null,aE.length&&Ig(aE.pop())}const uI=Symbol("skip tree generation"),dI=new Cs,hI=new Cs,_d=new Je,Mc=new Ta,Gp=new Ta,Jp=new j,fy=new j,Ihe=new j,Fhe=new j,_he=new j,bD=new Cs,Xo=new UJ(()=>new Wl);class Kg{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Kg.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};const r=e.geometry,i=e._roots,s=r.getIndex();let o;return t.cloneBuffers?o={roots:i.map(a=>a.slice()),index:s.array.slice()}:o={roots:i,index:s.array},o}static deserialize(e,t,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Kg.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r={setIndex:!0,...r};const{index:i,roots:s}=e,o=new Kg(t,{...r,[uI]:!0});if(o._roots=s,r.setIndex){const a=t.getIndex();if(a===null){const l=new ut(e.index,1,!1);t.setIndex(l)}else a.array!==i&&(a.array.set(i),a.needsUpdate=!0)}return o}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:_J,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[uI]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[uI]||(this._roots=hhe(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Cs))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=this.geometry,r=t.index.array,i=t.attributes.position;let s,o,a,l,A=0;const c=this._roots;for(let h=0,d=c.length;h<d;h++)s=c[h],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),u(0,A),A+=s.byteLength;function u(h,d,p=!1){const f=h*2;if(a[f+15]===iE){const g=o[h+6],v=a[f+14];let w=1/0,B=1/0,C=1/0,b=-1/0,F=-1/0,x=-1/0;for(let E=3*g,M=3*(g+v);E<M;E++){const H=r[E],O=i.getX(H),U=i.getY(H),y=i.getZ(H);O<w&&(w=O),O>b&&(b=O),U<B&&(B=U),U>F&&(F=U),y<C&&(C=y),y>x&&(x=y)}return l[h+0]!==w||l[h+1]!==B||l[h+2]!==C||l[h+3]!==b||l[h+4]!==F||l[h+5]!==x?(l[h+0]=w,l[h+1]=B,l[h+2]=C,l[h+3]=b,l[h+4]=F,l[h+5]=x,!0):!1}else{const g=h+8,v=o[h+6],w=g+d,B=v+d;let C=p,b=!1,F=!1;e?C||(b=e.has(w),F=e.has(B),C=!b&&!F):(b=!0,F=!0);const x=C||b,E=C||F;let M=!1;x&&(M=u(g,d,C));let H=!1;E&&(H=u(v,d,C));const O=M||H;if(O)for(let U=0;U<3;U++){const y=g+U,I=v+U,R=l[y],D=l[y+3],k=l[I],V=l[I+3];l[h+U]=R<k?R:k,l[h+U+3]=D>V?D:V}return O}}}traverse(e,t=0){const r=this._roots[t],i=new Uint32Array(r),s=new Uint16Array(r);o(0);function o(a,l=0){const A=a*2,c=s[A+15]===iE;if(c){const u=i[a+6],h=s[A+14];e(l,c,new Float32Array(r,a*4,6),u,h)}else{const u=a+mw/4,h=i[a+6],d=i[a+7];e(l,c,new Float32Array(r,a*4,6),d)||(o(u,l+1),o(h,l+1))}}}raycast(e,t=Lo){const r=this._roots,i=this.geometry,s=[],o=t.isMaterial,a=Array.isArray(t),l=i.groups,A=o?t.side:t;for(let c=0,u=r.length;c<u;c++){const h=a?t[l[c].materialIndex].side:A,d=s.length;if(Ig(r[c]),sE(0,i,h,e,s),hy(),a){const p=l[c].materialIndex;for(let f=d,m=s.length;f<m;f++)s[f].face.materialIndex=p}}return s}raycastFirst(e,t=Lo){const r=this._roots,i=this.geometry,s=t.isMaterial,o=Array.isArray(t);let a=null;const l=i.groups,A=s?t.side:t;for(let c=0,u=r.length;c<u;c++){const h=o?t[l[c].materialIndex].side:A;Ig(r[c]);const d=oE(0,i,h,e);hy(),d!=null&&(a==null||d.distance<a.distance)&&(a=d,o&&(d.face.materialIndex=l[c].materialIndex))}return a}intersectsGeometry(e,t){const r=this.geometry;let i=!1;for(const s of this._roots)if(Ig(s),i=xhe(0,r,e,t),hy(),i)break;return i}shapecast(e,t,r){const i=this.geometry;if(e instanceof Function){if(t){const h=t;t=(d,p,f,m)=>{const g=p*3;return h(d,g,g+1,g+2,f,m)}}e={boundsTraverseOrder:r,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const s=Xo.getPrimitive();let{boundsTraverseOrder:o,intersectsBounds:a,intersectsRange:l,intersectsTriangle:A}=e;if(l&&A){const h=l;l=(d,p,f,m,g)=>h(d,p,f,m,g)?!0:CD(d,p,i,A,f,m,s)}else l||(A?l=(h,d,p,f)=>CD(h,d,i,A,p,f,s):l=(h,d,p)=>p);let c=!1,u=0;for(const h of this._roots){if(Ig(h),c=bhe(0,i,a,l,o,u),hy(),c)break;u+=h.byteLength}return Xo.releasePrimitive(s),c}bvhcast(e,t,r){let{intersectsRanges:i,intersectsTriangles:s}=r;const o=this.geometry.index,a=this.geometry.attributes.position,l=e.geometry.index,A=e.geometry.attributes.position;_d.copy(t).invert();const c=Xo.getPrimitive(),u=Xo.getPrimitive();if(s){let d=function(p,f,m,g,v,w,B,C){for(let b=m,F=m+g;b<F;b++){aa(u,b*3,l,A),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let x=p,E=p+f;x<E;x++)if(aa(c,x*3,o,a),c.needsUpdate=!0,s(c,u,x,b,v,w,B,C))return!0}return!1};if(i){const p=i;i=function(f,m,g,v,w,B,C,b){return p(f,m,g,v,w,B,C,b)?!0:d(f,m,g,v,w,B,C,b)}}else i=d}e.getBoundingBox(hI),hI.applyMatrix4(t);const h=this.shapecast({intersectsBounds:d=>hI.intersectsBox(d),intersectsRange:(d,p,f,m,g,v)=>(dI.copy(v),dI.applyMatrix4(_d),e.shapecast({intersectsBounds:w=>dI.intersectsBox(w),intersectsRange:(w,B,C,b,F)=>i(d,p,w,B,m,g,b,F)}))});return Xo.releasePrimitive(c),Xo.releasePrimitive(u),h}intersectsBox(e,t){return Mc.set(e.min,e.max,t),Mc.needsUpdate=!0,this.shapecast({intersectsBounds:r=>Mc.intersectsBox(r),intersectsTriangle:r=>Mc.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,r={},i={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),Mc.set(e.boundingBox.min,e.boundingBox.max,t),Mc.needsUpdate=!0;const a=this.geometry,l=a.attributes.position,A=a.index,c=e.attributes.position,u=e.index,h=Xo.getPrimitive(),d=Xo.getPrimitive();let p=fy,f=Ihe,m=null,g=null;i&&(m=Fhe,g=_he);let v=1/0,w=null,B=null;return _d.copy(t).invert(),Gp.matrix.copy(_d),this.shapecast({boundsTraverseOrder:C=>Mc.distanceToBox(C),intersectsBounds:(C,b,F)=>F<v&&F<o?(b&&(Gp.min.copy(C.min),Gp.max.copy(C.max),Gp.needsUpdate=!0),!0):!1,intersectsRange:(C,b)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:F=>Gp.distanceToBox(F),intersectsBounds:(F,x,E)=>E<v&&E<o,intersectsRange:(F,x)=>{for(let E=F*3,M=(F+x)*3;E<M;E+=3){aa(d,E,u,c),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let H=C*3,O=(C+b)*3;H<O;H+=3){aa(h,H,A,l),h.needsUpdate=!0;const U=h.distanceToTriangle(d,p,m);if(U<v&&(f.copy(p),g&&g.copy(m),v=U,w=H/3,B=E/3),U<s)return!0}}}});{const F=u?u.count:c.count;for(let x=0,E=F;x<E;x+=3){aa(d,x,u,c),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let M=C*3,H=(C+b)*3;M<H;M+=3){aa(h,M,A,l),h.needsUpdate=!0;const O=h.distanceToTriangle(d,p,m);if(O<v&&(f.copy(p),g&&g.copy(m),v=O,w=M/3,B=x/3),O<s)return!0}}}}}),Xo.releasePrimitive(h),Xo.releasePrimitive(d),v===1/0?null:(r.point?r.point.copy(f):r.point=f.clone(),r.distance=v,r.faceIndex=w,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(_d),f.applyMatrix4(_d),i.distance=f.sub(i.point).length(),i.faceIndex=B),r)}closestPointToPoint(e,t={},r=0,i=1/0){const s=r*r,o=i*i;let a=1/0,l=null;if(this.shapecast({boundsTraverseOrder:c=>(Jp.copy(e).clamp(c.min,c.max),Jp.distanceToSquared(e)),intersectsBounds:(c,u,h)=>h<a&&h<o,intersectsTriangle:(c,u)=>{c.closestPointToPoint(e,Jp);const h=e.distanceToSquared(Jp);return h<a&&(fy.copy(Jp),a=h,l=u),h<s}}),a===1/0)return null;const A=Math.sqrt(a);return t.point?t.point.copy(fy):t.point=fy.clone(),t.distance=A,t.faceIndex=l,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(r=>{da(0,new Float32Array(r),bD),e.union(bD)}),e}}const fI=new u0,xD=new Je,Ehe=In.prototype.raycast;function She(n,e){if(this.geometry.boundsTree){if(this.material===void 0)return;xD.copy(this.matrixWorld).invert(),fI.copy(n.ray).applyMatrix4(xD);const t=this.geometry.boundsTree;if(n.firstHitOnly===!0){const r=BD(t.raycastFirst(fI,this.material),this,n);r&&e.push(r)}else{const r=t.raycast(fI,this.material);for(let i=0,s=r.length;i<s;i++){const o=BD(r[i],this,n);o&&e.push(o)}}}else Ehe.call(this,n,e)}function Uhe(n){return this.boundsTree=new Kg(this,n),this.boundsTree}function Qhe(){this.boundsTree=null}let pI=new j,Hp=new j;const ID=[],py=new SG,Rhe=.03,Mhe=.03,The=new Ri({side:Lo}),Nhe=new Ri({side:yi});let Fg;zt.prototype.computeBoundsTree=Uhe;zt.prototype.disposeBoundsTree=Qhe;In.prototype.raycast=She;const khe=n=>{const e=n.attributes.position,t=n.index,r=new rs,i=new j,s=new j,o=new j,a=[];for(let l=0;l<t.array.length/3;l++){const A=l*3;i.fromBufferAttribute(e,t.getX(A+0)),s.fromBufferAttribute(e,t.getX(A+1)),o.fromBufferAttribute(e,t.getX(A+2)),r.set(i,s,o),a.push(r.getNormal(new j))}n.userData.faceNormals=a},Dhe=n=>{const e=n.geometry.clone();let t=[];if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)t.push(n.material[i].clone());else t=n.material.clone();if(!n.userData.isVRM0){const i=e.attributes.position;for(let s=0;s<i.array.length;s+=3)i.array[s]=-i.array[s],i.array[s+2]=-i.array[s+2];i.needsUpdate=!0}const r=new In(e,t);return khe(r.geometry),r.geometry.computeBoundsTree({strategy:EJ}),r},yw=n=>{n.isMesh&&(n.geometry.userData.faceNormals=null,n.geometry.dispose(),n.geometry.disposeBoundsTree(),n.parent&&n.parent.remove(n),n.userData.cancelMesh&&yw(n.userData.cancelMesh))},QJ=n=>{var e,t;n.userData.cullingClone&&(yw(n.userData.cullingClone),n.userData.cullingClone=null,yw(n.userData.cullingCloneP),n.userData.cullingCloneP=null,yw(n.userData.cullingCloneN),n.userData.cullingCloneN=null,((e=n.userData)==null?void 0:e.clippedIndexGeometry)!=null&&(n.userData.clippedIndexGeometry=null),((t=n.userData)==null?void 0:t.origIndexBuffer)!=null&&(n.userData.origIndexBuffer=null))},Lhe=async n=>{if(n==null){console.warn("Null parameter for meshes was provided. Skipping mesh culling.");return}if(!Array.isArray(n)){console.warn("No valid mesh array was provided. Skipping mesh culling.");return}if(n.length==0){console.warn("No mesh array with elements was provided. Skipping mesh culling.");return}const e=[];Fg=n[0].parent,Fg.lines!=null&&(Fg.lines.forEach(i=>{i.visible=!1}),Fg.lines.length=0),n.forEach(i=>{if(i.userData.cullLayer!=null){i.userData.origIndexBuffer==null&&(i.userData.origIndexBuffer=i.geometry.index.clone()),e[i.userData.cullLayer]==null&&(e[i.userData.cullLayer]={origMeshes:[],cloneMeshes:[],posMeshes:[],negMeshes:[],scaleMeshes:[],positionMeshes:[]}),i.userData.cullingClone==null&&(i.userData.cullingClone=Dhe(i),i.userData.cullingCloneP=i.userData.cullingClone.clone(),i.userData.cullingCloneN=i.userData.cullingClone.clone());const s=i.userData.cullingClone,o=i.userData.cullingCloneP,a=i.userData.cullingCloneN;o.material=The,a.userData.cancelMesh=o,a.material=Nhe,o.userData.maxCullDistance=a.userData.maxCullDistance=i.userData.maxCullDistance,e[i.userData.cullLayer].origMeshes.push(i),e[i.userData.cullLayer].cloneMeshes.push(s),e[i.userData.cullLayer].posMeshes.push(o),e[i.userData.cullLayer].negMeshes.push(a),i.geometry.setIndex(i.userData.origIndexBuffer)}});for(let i=e.length-1;i>=0;i--)e[i]==null&&e.splice(i,1);let t=[];const r=[];for(let i=e.length-1;i>=0;i--){if(t.length!=0||e.length>=1)for(let s=0;s<e[i].origMeshes.length;s++){const o=e[i].origMeshes[s],a=e[i].cloneMeshes[s],l=o.userData.origIndexBuffer.array,A=a.geometry.attributes.position.array,c=a.geometry.attributes.normal.array,u=a.geometry.userData.faceNormals;r.push({geom:o.geometry,index:Phe(l,A,c,u,t,o.userData.cullDistance)})}t=[...t,...e[i].posMeshes,...e[i].negMeshes]}r.forEach(i=>{i.geom.setIndex(i.index)})},Vhe=n=>{let e=Rhe,t=Mhe;return n&&(isNaN(n)?Array.isArray(n)&&(isNaN(n[0])||(e=n[0]),isNaN(n[1])||(t=n[1])):e=n),[e,t]},Phe=(n,e,t,r,i,s,o=!1)=>{const a=[],l=Vhe(s);let A=l[0],c=l[1];py.far=A+c;for(let h=0;h<n.length/3;h++){r&&Hp.set(r[h].x,r[h].y,r[h].z).normalize();const d=h*3;let p=[];for(let f=0;f<3;f++){ID.length=0;const m=n[d+f]*3;r==null&&Hp.set(t[m],t[m+1],t[m+2]).normalize(),pI.set(e[m],e[m+1],e[m+2]).add(Hp.clone().multiplyScalar(A)),py.set(pI,Hp.clone().multiplyScalar(-1));const g=py.intersectObjects(i,!1,ID);for(let v=g.length-1;v>=0;v--)A-g[v].distance>=g[v].object.userData.maxCullDistance&&g.splice(v,1);if(g.length===0){for(let v=0;v<3;v++)a.push(n[d+v]);break}else{const v=g.map(w=>w.object);for(let w=0;w<v.length;w++){const B=v[w];if(B!=null&&B.userData.cancelMesh){const C=v.indexOf(B.userData.cancelMesh);v[w]=null,C!=-1&&C<w&&(v[C]=null)}}if(v.filter(w=>w).length===0){for(let w=0;w<3;w++)a.push(n[d+w]);break}if(f===0)p=g.map(w=>w.object);else if(p=g.map(w=>{if(p.indexOf(w.object)!==-1)return w.object}),p=p.filter(w=>w),f===2&&p.filter(w=>w).length===0)for(let w=0;w<3;w++)a.push(n[d+w]);o&&Ohe(pI,Hp.clone().multiplyScalar(-1),py.far,16711680,Fg)}}}const u=new Uint32Array(a);return new ut(u,1,!1)};function Ohe(n,e,t,r,i){i.lines==null&&(i.lines=[]);let s=new j;s.addVectors(n,e.clone().multiplyScalar(t));const o=[];o.push(n),o.push(s);const a=new zt().setFromPoints(o),l=[];l.push(new Ve(0)),l.push(new Ve(16777215));let A=new Hl({color:r});var c=new Vf(a,A);c.renderOrder=100,i.add(c),i.lines.push(c)}function RJ(n){let e,t,r,i=0;for(let a=0;a<n.length;++a){const l=n[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=l.array.constructor),e!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=l.itemSize),t!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=l.normalized),r!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=l.array.length}const s=new e(i);let o=0;for(let a=0;a<n.length;++a)s.set(n[a].array,o),o+=n[a].array.length;return new ut(s,t,r)}let gI,tl,gy,my,vy,Xi,Ed;function Whe(){Xi!=null&&Xi.clear(!0,!0)}function Zhe(n,e,t){const r=e*t,i=new Uint8Array(4*r),s=Math.floor(n.r*255),o=Math.floor(n.g*255),a=Math.floor(n.b*255);for(let A=0;A<r;A++){const c=A*4;i[c]=s,i[c+1]=o,i[c+2]=a,i[c+3]=255}const l=new vG(i,e,t);return l.needsUpdate=!0,l}function Ghe(n,e,t,r,i,s){if(n||(n=Zhe(t,r,i)),gI==null){gI=document.createElement("div"),gy=new CB,tl=new Du(-r/2,r/2,i/2,-i/2,-1e4,1e4),tl.position.z=100,gy.add(tl),my=new Ri({side:mi,transparent:!0,opacity:1,color:new Ve(1,1,1)});const l=new ku(1,1);vy=new In(l,my),vy.scale.set(r,i,1),gy.add(vy),Xi=new h0,Xi.setPixelRatio(1),Xi.setSize(r,i),Xi.autoClear=!1,gI.appendChild(Xi.domElement)}else tl.left=-r/2,tl.right=r/2,tl.top=i/2,tl.bottom=-i/2,tl.updateProjectionMatrix(),vy.scale.set(r,i,1),Xi.setSize(r,i);Ed=new Qa(r,i),Ed.texture.encoding=gt,my.map=n,my.color=e.clone(),Xi.setClearColor(t.clone(),s?0:1),Xi.setRenderTarget(Ed),Xi.clear(),Xi.render(gy,tl);let o=new Uint8ClampedArray(Ed.width*Ed.height*4);return Xi.readRenderTargetPixels(Ed,0,0,r,i,o),new ImageData(o,r,i)}function MJ({width:n,height:e,transparent:t}){const r=document.createElement("canvas");r.width=n,r.height=e;const i=r.getContext("2d");return i.fillStyle="white",t&&(i.globalAlpha=0),i.fillRect(0,0,r.width,r.height),i.globalAlpha=1,i}function lE(n,e){return n=n.length==null?n:n[0],n[e]&&n[e].image}function Jhe(n,e){return n=n.length==null?n:n[0],n[e]&&n[e].clone()}function kA(n,e,t,r,i){const s=(n-e)/(t-e);return r+s*(i-r)}const Hhe=async({transparentColor:n,meshes:e,atlasSize:t=4096,mtoon:r=!0,transparentMaterial:i=!1,transparentTexture:s=!1,twoSidedMaterial:o=!1})=>typeof window>"u"?await zhe({meshes:e,atlasSize:t,mtoon:r,transparentMaterial:i,transparentTexture:s}):await Yhe({backColor:n,meshes:e,atlasSize:t,mtoon:r,transparentMaterial:i,transparentTexture:s,twoSidedMaterial:o}),zhe=async({meshes:n,atlasSize:e,mtoon:t,transparentMaterial:r,transparentTexture:i})=>{const s=e,o=["diffuse"],a=[];n.forEach(F=>{const x=F.material;let E=a.find(M=>M.material===x);if(!E)a.push({material:x,mesh:F});else{const{dest:M}=tQ({meshes:[E.mesh,F]});E.mesh.geometry=M}});const l=Object.fromEntries(o.map(F=>[F,MJ({width:s,height:s,transparent:i})])),A=Math.floor(Math.sqrt(n.length)+1),c=s/A,u=new Map(a.map((F,x)=>{const E=new ze(x%A,Math.floor(x/A)).multiplyScalar(1/A),M=new ze(E.x+1/A,E.y+1/A);return[F.mesh,{min:E,max:M}]})),h={diffuse:["map"],normal:["normalMap"],orm:["ormMap","aoMap","roughnessMap","metalnessMap"]},d=[],p=[];a.forEach(F=>{const{min:x,max:E}=u.get(F.mesh);p.push(E),d.push(x)});const f=new ze(Math.max(...p.map(F=>F.x)),Math.max(...p.map(F=>F.y))),m=new ze(Math.min(...d.map(F=>F.x)),Math.min(...d.map(F=>F.y))),g=1/(f.x-m.x),v=1/(f.y-m.y),w=c*g,B=c*v,C=new Map(a.map(F=>{let{min:x,max:E}=u.get(F.mesh);return x.x=x.x*g,x.y=x.y*v,E.x=E.x*g,E.y=E.y*v,[F.mesh,{min:x,max:E}]}));a.forEach(F=>{const{material:x,mesh:E}=F,{min:M,max:H}=C.get(E);o.forEach(I=>{const R=l[I];R.globalCompositeOperation="source-over";let D=lE(x,h[I].find(k=>lE(x,k)));if(D!==""&&D!==void 0)try{const k=new Uint8ClampedArray(D.data),V=new ImageData(k,w,B),Z=document.createElement("canvas");Z.width=w,Z.height=B;const N=Z.getContext("2d");N.putImageData(V,0,0),N.save(),R.drawImage(Z,M.x*s,M.y*s,w,B)}catch(k){console.error("error",k)}else R.fillStyle=I==="diffuse"?`#${x.color.clone().getHexString()}`:I==="normal"?"#8080ff":I==="orm"?`#${new Ve(x.aoMapIntensity,x.roughness,x.metalness).getHexString()}`:"#7F7F7F",R.fillRect(M.x*s,M.y*s,w,B)});const O=E.geometry,U=O.attributes.uv;if(U)for(let I=0;I<U.array.length;I+=2)U.array[I]=kA(U.array[I],0,1,M.x,H.x),U.array[I+1]=kA(U.array[I+1],0,1,M.y,H.y);const y=O.attributes.uv2;if(y)for(let I=0;I<y.array.length;I+=2)y.array[I]=kA(y.array[I],0,1,M.x,H.x),y.array[I+1]=kA(y.array[I+1],0,1,M.y,H.y);else O.attributes.uv2=O.attributes.uv});const b=Object.fromEntries(await Promise.all(o.map(async F=>{const x=new or(l[F].canvas);return x.flipY=!1,[F,x]})));return{bakeObjects:a,textures:b,uvs:C}},Yhe=async({backColor:n,meshes:e,atlasSize:t,mtoon:r,transparentMaterial:i,transparentTexture:s,twoSidedMaterial:o})=>{Whe();const a=t,l=r?["diffuse"]:["diffuse","orm"],A=[];let c=null;e.forEach(U=>{U=U.clone();const y=U.material.length==null?U.material:U.material[0];r&&c==null&&y.type=="ShaderMaterial"&&(c=y.clone());let I=A.find(R=>{R.material});if(!I)A.push({material:y,mesh:U});else{const{dest:R}=tQ({meshes:[I.mesh,U]});I.mesh.geometry=R}});const u=Object.fromEntries(l.map(U=>[U,MJ({width:a,height:a,transparent:s&&U=="diffuse"})])),h=Math.floor(Math.sqrt(e.length)+1),d=a/h,p=new Map(A.map((U,y)=>{const I=new ze(y%h,Math.floor(y/h)).multiplyScalar(1/h),R=new ze(I.x+1/h,I.y+1/h);return[U.mesh,{min:I,max:R}]})),f={diffuse:["map"],normal:["normalMap"],orm:["ormMap","aoMap","roughnessMap","metalnessMap"]},m=[],g=[];A.forEach(U=>{const{min:y,max:I}=p.get(U.mesh);g.push(I),m.push(y)});const v=new ze(Math.max(...g.map(U=>U.x)),Math.max(...g.map(U=>U.y))),w=new ze(Math.min(...m.map(U=>U.x)),Math.min(...m.map(U=>U.y))),B=1/(v.x-w.x),C=1/(v.y-w.y),b=d*B,F=d*C,x=new Map(A.map(U=>{let{min:y,max:I}=p.get(U.mesh);return y.x=y.x*B,y.y=y.y*C,I.x=I.x*B,I.y=I.y*C,[U.mesh,{min:y,max:I}]}));A.forEach(U=>{const{material:y,mesh:I}=U,{min:R,max:D}=x.get(I);l.forEach(N=>{var ge;const _=u[N];_.globalCompositeOperation="source-over";let z,ie=new Ve(1,1,1);switch(N){case"diffuse":z=y.color||n,(ge=y.uniforms)!=null&&ge.litFactor?ie=y.uniforms.litFactor.value:ie=y.color;break;case"normal":z=new Ve(8421631);break;case"orm":z=new Ve(0,y.roughness,y.metalness);break;default:z=new Ve(1,1,1);break}let T=Jhe(y,f[N].find(he=>lE(y,he)));const q=Ghe(T,ie,z,a,a,N=="diffuse"&&s);createImageBitmap(q).then(he=>_.drawImage(he,R.x*a,R.y*a,b,F))});const k=I.geometry.clone();I.geometry=k;const V=k.attributes.uv.clone();if(k.attributes.uv=V,V)for(let N=0;N<k.attributes.uv.array.length;N+=2)V.array[N]=(V.array[N]%1+1)%1,V.array[N+1]=(V.array[N+1]%1+1)%1,V.array[N]=kA(V.array[N],0,1,R.x,D.x),V.array[N+1]=kA(V.array[N+1],0,1,R.y,D.y);const Z=k.attributes.uv2;if(Z)for(let N=0;N<Z.array.length;N+=2)Z.array[N]=(Z.array[N]%1+1)%1,Z.array[N+1]=(Z.array[N+1]%1+1)%1,Z.array[N]=kA(Z.array[N],0,1,R.x,D.x),Z.array[N+1]=kA(Z.array[N+1],0,1,R.y,D.y);else k.attributes.uv2=k.attributes.uv});const E=Object.fromEntries(await Promise.all(l.map(async U=>{const y=new or(u[U].canvas);return y.flipY=!1,[U,y]}))),M=o?mi:Lo;let H;const O=i?"transparent":"opaque";return r?(H=new Cu({map:E.diffuse,transparent:i,side:M}),c==null&&(c=new gw),c.side=M,c.uniforms.map=E.diffuse,c.uniforms.shadeMultiplyTexture=E.diffuse,c.transparent=i,s&&!i&&(H.alphaTest=.5,c.alphaTest=.5),H.userData.vrmMaterial=c,H.userData.shadeTexture=E.uniformColor,H.name="mToon_"+O,H.map.name=H.name):(H=new Cu({map:E.diffuse,roughnessMap:E.orm,metalnessMap:E.orm,normalMap:E.normal,transparent:i,side:M}),s&&!i&&(H.alphaTest=.5),H.name="standard_"+O,H.roughnessMap!=null&&(H.roughnessMap.name=H.name+"_orm"),H.normalMap!=null&&(H.normalMap.name=H.name+"_normal")),{bakeObjects:A,material:H}};function TJ(n){const e=new Map;for(const r of n.skeleton.bones){const i=r.clone(!1);e.set(r,i)}n.skeleton.bones[0].traverse(r=>{if(r.type!=="Bone")return;const i=e.get(r);for(const s of r.children){const o=e.get(s);o&&i.add(o)}});const t=new yc(n.skeleton.bones.map(r=>e.get(r)));return t.boneInverses=n.skeleton.boneInverses,t.pose(),t}function NJ(n,e){const t=new Map;new j(-1,1,-1),new Je,new j;let r=0;n.forEach(l=>{if(l.skeleton){var A=TJ(l);const c=A.bones;A.bones.forEach((u,h)=>{var d;if(c.indexOf(u)!==-1){const p=t.get(u.name);if(p==null){const f={index:r,boneInverses:A.boneInverses[h],bone:u.clone(!1),parentName:((d=u.parent)==null?void 0:d.type)=="Bone"?u.parent.name:null};r++,t.set(u.name,f)}else u.userData.VRMcolliders!=null&&(p.bone.userData.VRMcolliders==null?p.bone.userData.VRMcolliders=u.userData.VRMcolliders:u.userData.VRMcollidersID!=p.bone.userData.VRMcollidersID&&(p.bone.userData.VRMcolliders=[...p.bone.userData.VRMcolliders,...u.userData.VRMcolliders]))}})}});const i=[],s=[];[...t.values()].forEach(l=>{var A;if(i.push(l.bone),s.push(l.boneInverses),l.parentName!=null){const c=(A=t.get(l.parentName))==null?void 0:A.bone;c&&c.add(l.bone)}});const a=new yc(i,s);return a.bones.forEach(l=>{var c;const A=(c=l.userData)==null?void 0:c.vrm0RestPosition;A&&l.position.set(-A.x,A.y,-A.z),l.position.set(l.position.x*e,l.position.y*e,l.position.z*e)}),a}function Xhe(n,e){if(!e.skeleton)return;const t=new Map;if(e.skeleton){e.skeleton.bones.forEach((o,a)=>{const l=n.bones.filter(c=>c.name===o.name),A=l.length>0?n.bones.indexOf(l[0]):-1;t.set(a,A)});const r=[],i=e.geometry.attributes.skinIndex.array;for(let o=0;o<i.length;o++)r[o]=t.get(i[o]);const s=new Uint16Array(r);return new ut(s,4,!1)}}function kJ(n){const e=[...n];return e.sort(),e.filter((t,r)=>e.indexOf(t)===r)}function jhe(n){const t=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array].filter(r=>n.constructor===r);return t.length&&t[0]||null}function zB(n,e){const t=[];for(let s=0;s<e.length;s++){const o=s*n.itemSize;for(let a=0;a<n.itemSize;a++)t[o+a]=n.array[e[s]*n.itemSize+a]}const r=jhe(n.array),i=new r(t);return new ut(i,n.itemSize,n.normalized)}function Khe(n,e,t){for(let r=0;r<n.attributes.skinIndex.array.length;r+=4){const i=[n.attributes.skinIndex.array[r],n.attributes.skinIndex.array[r+1],n.attributes.skinIndex.array[r+2],n.attributes.skinIndex.array[r+3]];for(let s=0;s<4;s++){const o=i[s],a=$he(o,e,t);i[s]=a}n.attributes.skinIndex.array[r]=i[0],n.attributes.skinIndex.array[r+1]=i[1],n.attributes.skinIndex.array[r+2]=i[2],n.attributes.skinIndex.array[r+3]=i[3]}n.attributes.skinIndex.needsUpdate=!0}function $he(n,e,t){const r=e.bones[n],i=t.bones.find(s=>s.name===r.name);return i?t.bones.indexOf(i):-1}async function qhe(n,e){const{scale:t,isVrm0:r}=e,i=[],s=[];Ef(n,"SkinnedMesh").forEach(A=>{const c=A.clone();i.push(c),Array.isArray(A.material)?s.push(...A.material):s.push(A.material)});const a=NJ(i,t),l=new Lt;return l.name="AvatarRoot",i.forEach(A=>{var b;const c=new zt,u={};for(const F in A.geometry.attributes){const x=A.geometry.attributes[F];u[F]=x.clone()}if((b=A.userData)!=null&&b.isVRM0)for(let F=0;F<u.position.array.length;F+=3)u.position.array[F]*=-1,u.position.array[F+2]*=-1;const h={attributes:u,morphTargetDictionary:{...A.morphTargetDictionary},morphTargetInfluences:A.morphTargetInfluences||[],index:null,animations:{}},d=new Map([A].map(F=>[F,F.geometry.morphAttributes])),p=new Map([A].map(F=>[F,F.morphTargetDictionary||{}]));if(h.morphAttributes=DJ({meshes:[A],sourceMorphAttributes:d,sourceMorphTargetDictionaries:p,destMorphTargetDictionary:h.morphTargetDictionary,scale:t},r),r)for(let F=0;F<h.attributes.position.array.length;F+=3)h.attributes.position.array[F]*=-1,h.attributes.position.array[F+2]*=-1;c.attributes=h.attributes,c.morphAttributes=h.morphAttributes,c.morphTargetsRelative=!0;const f=A.geometry.index.array,m=kJ(A.geometry.index.array),g=[];for(let F=0;F<f.length;F++)g[F]=m.indexOf(f[F]);Khe(c,A.skeleton,a);const v=new Uint32Array(g),w=new ut(v,1,!1);c.setIndex(w);for(const F in c.attributes)c.setAttribute(F,zB(c.getAttribute(F),m));for(const F in c.morphAttributes){const x=c.morphAttributes[F];for(let E=0;E<x.length;E++)x[E]=zB(x[E],m)}const B=c.attributes.position.array;for(let F=0;F<B.length;F+=3)B[F]*=t,B[F+1]*=t,B[F+2]*=t;const C=new _l(c,A.material);C.name=A.name,C.morphTargetInfluences=h.morphTargetInfluences,C.morphTargetDictionary=h.morphTargetDictionary,C.bind(a),l.add(C),l.add(a.bones[0])}),l.userData.atlasMaterial=s,l}function efe(n){const e=n.parent.name,t=new j,r=new j;n.getWorldPosition(t),n.getWorldScale(r),n=n.clone();const i=new Je,s=new rt;return n.getWorldQuaternion(s),i.makeRotationFromQuaternion(s),n.userData.boneName=e,n.userData.globalPosition=t,n.userData.globalScale=r,n.userData.globalRotationMatrix=i,n}function tfe(n,e){const t=new _l(e.geometry,e.material),r=n.clone(),i=r.bones.findIndex(d=>d.name===e.userData.boneName),s=e.userData.globalPosition,o=e.userData.globalScale||new j(1,1,1),a=e.userData.globalRotationMatrix;t.add(r.bones[0]);const l=[],A=[],c=t.geometry.attributes.position.array,u=new j,h=e.userData.isVRM0?-1:1;for(let d=0;d<c.length;d+=3)u.set(c[d],c[d+1],c[d+2]),u.applyMatrix4(a),c[d]=h*o.x*u.x+s.x,c[d+1]=o.y*u.y+s.y,c[d+2]=h*o.z*u.z+s.z,l.push(i,0,0,0),A.push(1,0,0,0);return t.geometry.setAttribute("skinIndex",new $C(l,4)),t.geometry.setAttribute("skinWeight",new rn(A,4)),t.bind(r),t}async function nfe(n,e){let{transparentColor:t=new Ve(1,1,1),mToonAtlasSize:r=4096,mToonAtlasSizeTransp:i=4096,stdAtlasSize:s=4096,stdAtlasSizeTransp:o=4096,exportMtoonAtlas:a=!1,exportStdAtlas:l=!0,isVrm0:A=!1,scale:c=1,twoSidedMaterial:u=!1}=e;const h=Ef(n,["Mesh"]);for(let F=0;F<h.length;F++)h[F]=efe(h[F]);const d=Ef(n,["SkinnedMesh"]),p=[...h,...d];a==!1&&l==!1&&(a=!0);let{stdMesh:f,stdTranspMesh:m,mToonMesh:g,mToonTranspMesh:v,requiresTransparency:w}=cfe(p);a==!1&&(f=[...f,...g],m=[...m,...v],v=[],g=[]),l==!1&&(g=[...g,...f],v=[...v,...m],f=[],m=[]);const B=new Lt;B.name="AvatarRoot",B.userData.atlasMaterial=[];const C=NJ(p,c),b={standard:{meshArray:f,size:s,isMtoon:!1,transparentMaterial:!1},standardTransparent:{meshArray:m,size:o,isMtoon:!1,transparentMaterial:!0},mToon:{meshArray:g,size:r,isMtoon:!0,transparentMaterial:!1},mToonTransparent:{meshArray:v,size:i,isMtoon:!0,transparentMaterial:!0}};for(const F in b){const x=b[F],E=x.meshArray;if(E.length>0){const{bakeObjects:M,material:H}=await Hhe({transparentColor:t,atlasSize:x.size,meshes:E,mtoon:x.isMtoon,transparentMaterial:x.transparentMaterial,transparentTexture:w,twoSidedMaterial:u}),O=M.map(k=>k.mesh),U=[];O.forEach(k=>{k.type=="Mesh"&&(k=tfe(C,k)),U.push(k);const V=k.geometry,Z=V.index.array,N=kJ(k.geometry.index.array),_=[];for(let T=0;T<Z.length;T++)_[T]=N.indexOf(Z[T]);const z=new Uint32Array(_),ie=new ut(z,1,!1);V.setIndex(ie);for(const T in V.attributes)V.setAttribute(T,zB(V.getAttribute(T),N));for(const T in V.morphAttributes){const q=V.morphAttributes[T];for(let ge=0;ge<q.length;ge++)q[ge]=zB(q[ge],N)}V.attributes.uv2||(V.attributes.uv2=V.attributes.uv),k.skeleton!=null&&k.geometry.setAttribute("skinIndex",Xhe(C,k));for(let T=0;T<8;T++)delete V.attributes[`morphTarget${T}`],delete V.attributes[`morphNormal${T}`]});const{dest:y}=tQ({meshes:U,scale:c},A),I=new zt;if(A)for(let k=0;k<y.attributes.position.array.length;k+=3)y.attributes.position.array[k]*=-1,y.attributes.position.array[k+2]*=-1;I.attributes=y.attributes,I.morphAttributes=y.morphAttributes,I.morphTargetsRelative=!0,I.setIndex(y.index);const R=I.attributes.position.array;for(let k=0;k<R.length;k+=3)R[k]*=c,R[k+1]*=c,R[k+2]*=c;const D=new _l(I,H);D.name="CombinedMesh_"+F,D.morphTargetInfluences=y.morphTargetInfluences,D.morphTargetDictionary=y.morphTargetDictionary,D.bind(C),B.add(D),B.userData.atlasMaterial.push(H)}}return B.add(C.bones[0]),B}function rfe({meshes:n,sourceMorphTargetDictionaries:e,destMorphTargetDictionary:t}){const r=[];return Object.entries(t).map(([i,s])=>{const o=n.find(l=>e.get(l).hasOwnProperty(i)),a=o.morphTargetDictionary[i];r[s]=o.morphTargetInfluences[a]}),r}function ife({sourceAttributes:n}){const e=new Set,t=Array.from(n.values());t.forEach(i=>{Object.keys(i).forEach(s=>e.add(s))});const r={};return Array.from(e.keys()).map(i=>{r[i]=RJ(t.map(s=>s[i]).flat().filter(s=>s!==void 0))}),r}function sfe({sourceMorphTargetDictionaries:n}){const e=new Set;Array.from(n.values()).forEach(i=>{Object.keys(i).forEach(s=>e.add(s))});const r={};return Array.from(e.keys()).map((i,s)=>{r[i]=s}),r}function DJ({meshes:n,sourceMorphTargetDictionaries:e,sourceMorphAttributes:t,destMorphTargetDictionary:r,scale:i},s=!1){const o=new Set;Array.from(t.values()).forEach(u=>{Object.keys(u).forEach(h=>o.add(h))});const l=Array.from(o),A={};l.forEach(u=>{A[u]=[],Object.entries(r).forEach(([h,d])=>{A[u][d]=[],n.forEach(p=>{let f;const m=e.get(p);if(m.hasOwnProperty(h)&&p.geometry.morphAttributes[u]){const g=m[h];f=p.geometry.morphAttributes[u][g]}else{const g=p.geometry.attributes[u],v=new g.array.constructor(new Array(g.array.length).fill(0));f=new ut(v,g.itemSize,g.normalized)}A[u][d].push(f)})})});const c={};return l.forEach(u=>{c[u]=[];for(let h=0;h<Object.entries(r).length;h++){c[u][h]=RJ(A[u][h]);const d=c[u][h].array;for(let p=0;p<d.length;p+=3)d[p]*=i,d[p+1]*=i,d[p+2]*=i}}),c}function ofe({meshes:n}){var e=0,t=[];return n.forEach(r=>{const i=r.geometry.index;for(var s=0;s<i.count;++s)t.push(i.getX(s)+e);e+=r.geometry.attributes.position.count}),t}function tQ({meshes:n,scale:e},t=!1){let r=0;n.forEach(a=>{var l;if(r+=a.geometry.attributes.uv.count,(l=a.userData)!=null&&l.isVRM0)for(let A=0;A<a.geometry.attributes.position.array.length;A+=3)a.geometry.attributes.position.array[A]*=-1,a.geometry.attributes.position.array[A+2]*=-1});const i={meshes:n,attributes:new Map(n.map(a=>[a,a.geometry.attributes])),morphAttributes:new Map(n.map(a=>[a,a.geometry.morphAttributes])),morphTargetDictionaries:new Map(n.map(a=>[a,a.morphTargetDictionary||{}])),morphTargetInfluences:new Map(n.map(a=>[a,a.morphTargetInfluences||[]]))},s={attributes:null,morphTargetDictionary:null,morphAttributes:null,morphTargetInfluences:null,index:null,animations:{}};s.attributes=ife({sourceAttributes:i.attributes});const o=sfe({sourceMorphTargetDictionaries:i.morphTargetDictionaries});return s.morphTargetDictionary=o,s.morphAttributes=DJ({meshes:n,sourceMorphAttributes:i.morphAttributes,sourceMorphTargetDictionaries:i.morphTargetDictionaries,destMorphTargetDictionary:o,scale:e},t),s.morphTargetInfluences=rfe({meshes:n,sourceMorphTargetDictionaries:i.morphTargetDictionaries,destMorphTargetDictionary:o}),s.index=ofe({meshes:n}),s.animations={},{source:i,dest:s}}function Ot(n){return n==null?[]:Array.isArray(n)?n:[n]}async function afe(n,e){const r=await new Vu().load(e);r.encoding=gt,r.flipY=!1,n.traverse(i=>{if(i instanceof In){const s=Array.isArray(i.material)?i.material:[i.material];for(let o=0;o<s.length;o++)s[o]instanceof Sr?s[o].name.includes("(Outline)")||(console.log(s[o].name),s[o].uniforms.map.value=r,s[o].uniforms.shadeMultiplyTexture.value=r):(s[o].map=r,s[o].emissiveMap=r),s[o].needsUpdate=!0}})}function Sl(n){return n.replace(/^.*[\\/]/,"").split(".").slice(0,-1).join(".")}function lfe(n){const e=Object.keys(n);return n[e[Math.floor(Math.random()*e.length)]]}function Afe(n){return n[Math.floor(Math.random()*n.length)]}const mI=n=>{const e=[];for(const t in n){const r=n[t].vrm;if(r){const i=r.data.cullingLayer;i>=0&&r.data.cullingMeshes.map(s=>{s.userData.cullLayer=i,s.userData.cullDistance=r.data.cullingDistance,s.userData.maxCullDistance=r.data.maxCullingDistance,e.push(s)})}}Lhe(e)};function cfe(n){const e=[],t=[],r=[],i=[];let s=!1;return n.forEach(o=>{var A;const l=Ot(o.material)[0];l.type=="ShaderMaterial"?l.transparent==!0?(i.push(o),s=!0):(r.push(o),((A=l.uniforms.alphaTest)==null?void 0:A.value)!=0&&(s=!0)):l.transparent==!0?(t.push(o),s=!0):(e.push(o),l.alphaTest!=0&&(s=!0))}),{stdMesh:e,stdTranspMesh:t,mToonMesh:r,mToonTranspMesh:i,requiresTransparency:s}}function ufe(n){const e=[],t=[],r=[],i=[],s=[],o=[];return n.forEach(a=>{Ot(a.material).forEach(A=>{A.type=="ShaderMaterial"?A.transparent==!0?o.push(A):A.uniforms.alphaTest.value!=0?s.push(A):i.push(A):A.transparent==!0?r.push(A):A.alphaTest!=0?t.push(A):e.push(A)})}),{stdMats:e,stdCutoutpMats:t,stdTranspMats:r,mToonMats:i,mToonCutoutMats:s,mToonTranspMats:o}}function FD(n,e){n.data==null?n.data=e:n.data={...n.data,...e}}function dfe(n,e){if(n.data!=null)return n.data[e]}function hfe(n){const e=dfe(n,"cullingMeshes");e&&(e.forEach(t=>{QJ(t)}),n.data.cullingMeshes=null)}function Cn(n){switch(n){case 1:return 128;case 2:return 256;case 3:return 512;case 4:return 1024;case 5:return 2048;case 6:return 4096;case 7:return 8192;case 8:return 16384;default:return 4096}}function ffe(n){const e=n.scene;hfe(n),e.traverse(t=>{t.material&&AE(t.material),t.geometry&&(QJ(t),t.geometry.dispose(),t.geometry.disposeBoundsTree())}),e.parent&&e.parent.remove(e),Kf.deepDispose(e),n.expressionManager&&n.expressionManager.expressions.forEach(t=>{t._binds&&t._binds.forEach(r=>{r.primitives&&r.primitives.forEach(i=>{i.geometry.dispose(),i.material&&AE(i.material)})})});for(const t in n)n[t]=null}const AE=n=>{var e,t,r,i,s,o;if(n.length)for(let a=0;a<n.length;++a)AE(n[a]);else(e=n.map)!=null&&e.dispose&&n.map.dispose(),(t=n.normalMap)!=null&&t.dispose&&n.normalMap.dispose(),(r=n.ormMap)!=null&&r.dispose&&n.ormMap.dispose(),(i=n.aoMap)!=null&&i.dispose&&n.aoMap.dispose(),(s=n.roughnessMap)!=null&&s.dispose&&n.roughnessMap.dispose(),(o=n.metalnessMap)!=null&&o.dispose&&n.metalnessMap.dispose(),n.dispose()},nQ=n=>{let e,t,r=0;return Array.isArray(n)?(e=n[0]||0,t=n[1]||0,r=n[2]||0):(typeof n=="string"||n instanceof String)&&n.split("-").forEach(s=>{switch(s=s.toLowerCase(),s){case"left":e=-1;break;case"right":e=1;break;case"bottom":case"down":t=-1;break;case"top":case"up":t=1;break;case"back":case"backward":r=-1;break;case"front":case"forward":r=1;break;default:console.warn("unkown cameraPosition name: "+s+" in: "+n+". Please use left, right, bottom, top, back or front");break}}),new j(e,t,r)},LJ=()=>{const n=new Date().getTime(),e=Math.random().toString(36).substr(2,9);return n+"-"+e},pfe=n=>{var t,r,i,s,o,a,l,A,c,u,h;const e=n.humanoid.humanBones;e.hips.node.parent.name="rootBone",e.upperChest==null&&e.neck.node.parent!=e.chest&&(e.neck.node.parent!=e.chest.node?e.upperChest={node:e.neck.node.parent}:e.upperChest!=null&&(e.upperChest={node:e.neck.node.parent},e.chest={node:e.neck.node.parent.parent})),e.leftShoulder==null&&(e.leftUpperArm.node.parent!=((t=e.chest)==null?void 0:t.node)&&e.leftUpperArm.node.parent!=((r=e.upperChest)==null?void 0:r.node)&&e.leftUpperArm.node.parent!=((i=e.spine)==null?void 0:i.node)&&e.leftUpperArm.node.parent!=((s=e.neck)==null?void 0:s.node)&&e.leftUpperArm.node.parent!=((o=e.head)==null?void 0:o.node),e.leftShoulder={node:e.leftUpperArm.node.parent}),e.rightShoulder==null&&(e.rightUpperArm.node.parent!=((a=e.chest)==null?void 0:a.node)&&e.rightUpperArm.node.parent!=((l=e.upperChest)==null?void 0:l.node)&&e.rightUpperArm.node.parent!=((A=e.spine)==null?void 0:A.node)&&e.rightUpperArm.node.parent!=((c=e.neck)==null?void 0:c.node)&&e.rightUpperArm.node.parent!=((u=e.head)==null?void 0:u.node),e.rightShoulder={node:e.rightUpperArm.node.parent});for(let d in Wm)d=d.charAt(0).toLowerCase()+d.slice(1),(h=e[d])!=null&&h.node&&(e[d].node.name=d)};function VJ({candidates:n,predicate:e}){if(!n.length)return null;const t=n.shift();return e(t)?t:(n=n.concat(t.children),VJ({candidates:n,predicate:e}))}function PJ(n,e){return VJ({candidates:[n],predicate:t=>t.name===e})}function OJ({candidates:n,predicate:e,results:t=[]}){if(!n.length)return t;const r=n.shift();return e(r)&&t.push(r),n=n.concat(r.children),OJ({candidates:n,predicate:e,results:t})}function Ef(n,e){return OJ({candidates:[n],predicate:t=>Ot(e).includes(t.type)})}function gfe(n,e,t){const r=Ef(n,"SkinnedMesh");return{humanBones:vfe(r[0]),materials:n.userData.atlasMaterial,meta:mfe(e,t)}}function mfe(n,e){return e=e||{},{...{authors:["CharacterStudio"],metaVersion:"1",version:"v1",name:n,licenseUrl:"https://vrm.dev/licenses/1.0/",commercialUssageName:"personalNonProfit",contactInformation:"https://m3org.com/",allowExcessivelyViolentUsage:!1,allowExcessivelySexualUsage:!1,allowPoliticalOrReligiousUsage:!1,allowAntisocialOrHateUsage:!1,creditNotation:"required",allowRedistribution:!1,modification:"prohibited"},...e}}function vfe(n){const e={};return n.skeleton.bones.map(t=>{for(const r in Wm)if(Wm[r]===t.name){e[t.name]={node:t};break}}),e}const yfe={mixamorigHips:"hips",mixamorigSpine:"spine",mixamorigSpine1:"chest",mixamorigSpine2:"upperChest",mixamorigNeck:"neck",mixamorigHead:"head",mixamorigLeftShoulder:"leftShoulder",mixamorigLeftArm:"leftUpperArm",mixamorigLeftForeArm:"leftLowerArm",mixamorigLeftHand:"leftHand",mixamorigLeftHandThumb1:"leftThumbMetacarpal",mixamorigLeftHandThumb2:"leftThumbProximal",mixamorigLeftHandThumb3:"leftThumbDistal",mixamorigLeftHandIndex1:"leftIndexProximal",mixamorigLeftHandIndex2:"leftIndexIntermediate",mixamorigLeftHandIndex3:"leftIndexDistal",mixamorigLeftHandMiddle1:"leftMiddleProximal",mixamorigLeftHandMiddle2:"leftMiddleIntermediate",mixamorigLeftHandMiddle3:"leftMiddleDistal",mixamorigLeftHandRing1:"leftRingProximal",mixamorigLeftHandRing2:"leftRingIntermediate",mixamorigLeftHandRing3:"leftRingDistal",mixamorigLeftHandPinky1:"leftLittleProximal",mixamorigLeftHandPinky2:"leftLittleIntermediate",mixamorigLeftHandPinky3:"leftLittleDistal",mixamorigRightShoulder:"rightShoulder",mixamorigRightArm:"rightUpperArm",mixamorigRightForeArm:"rightLowerArm",mixamorigRightHand:"rightHand",mixamorigRightHandPinky1:"rightLittleProximal",mixamorigRightHandPinky2:"rightLittleIntermediate",mixamorigRightHandPinky3:"rightLittleDistal",mixamorigRightHandRing1:"rightRingProximal",mixamorigRightHandRing2:"rightRingIntermediate",mixamorigRightHandRing3:"rightRingDistal",mixamorigRightHandMiddle1:"rightMiddleProximal",mixamorigRightHandMiddle2:"rightMiddleIntermediate",mixamorigRightHandMiddle3:"rightMiddleDistal",mixamorigRightHandIndex1:"rightIndexProximal",mixamorigRightHandIndex2:"rightIndexIntermediate",mixamorigRightHandIndex3:"rightIndexDistal",mixamorigRightHandThumb1:"rightThumbMetacarpal",mixamorigRightHandThumb2:"rightThumbProximal",mixamorigRightHandThumb3:"rightThumbDistal",mixamorigLeftUpLeg:"leftUpperLeg",mixamorigLeftLeg:"leftLowerLeg",mixamorigLeftFoot:"leftFoot",mixamorigLeftToeBase:"leftToes",mixamorigRightUpLeg:"rightUpperLeg",mixamorigRightLeg:"rightLowerLeg",mixamorigRightFoot:"rightFoot",mixamorigRightToeBase:"rightToes"};function WJ(n,e,t){var f;const r=bu.findByName(n,"mixamo.com");if(r==null)return null;const i=[],s=new rt,o=new rt,a=new rt,l=new j,A=e.getObjectByName("mixamorigHips").position.y,c=(f=t.humanoid)==null?void 0:f.getNormalizedBoneNode("hips").getWorldPosition(l).y,u=t.scene.getWorldPosition(l).y,d=Math.abs(c-u)/A;return r.tracks.forEach(m=>{const g=m.clone(),v=g.name.split("."),w=v[0],C=yfe[w],b=e.getObjectByName(w);if(C!=null){const F=v[1];if(b.getWorldQuaternion(s).invert(),b.parent.getWorldQuaternion(o),g instanceof Ra){for(let x=0;x<g.values.length;x+=4){const E=g.values.slice(x,x+4);a.fromArray(E),a.premultiply(o).multiply(s),a.toArray(E),E.forEach((M,H)=>{g.values[H+x]=M})}i.push(new Ra(`${C}.${F}`,g.times,g.values.map((x,E)=>{var M;return((M=t.meta)==null?void 0:M.metaVersion)==="0"&&E%2===0?-x:x})))}else if(g instanceof oc){const x=g.values.map((E,M)=>{var H;return(((H=t.meta)==null?void 0:H.metaVersion)==="0"&&M%3!==1?-E:E)*d});i.push(new oc(`${C}.${F}`,g.times,x))}}}),new bu("vrmAnimation",r.duration,i)}const wfe=new Tse,Bfe=new SU,vI=.2,Cfe=n=>Math.floor(Math.random()*n);class _D{constructor(e,t,r,i,s,o,a){var l,A,c,u;this.mixer=new Eie(t),this.actions=[],this.to=null,this.from=null,this.vrm=r,this.animationManager=e,this.mixamoModel=null,this.fadeOutActions=null,this.newAnimationWeight=1,this.neckBone=(A=(l=r==null?void 0:r.humanoid)==null?void 0:l.humanBones)==null?void 0:A.neck,this.spineBone=(u=(c=r==null?void 0:r.humanoid)==null?void 0:c.humanBones)==null?void 0:u.spine,this.timeScale=1,i&&(this.setAnimations(i,null,null,a),this.to=this.actions[s],o!=-1&&(this.from=this.actions[o],this.from.reset(),this.from.time=e.getFromActionTime(),this.from.play(),this.to.weight=e.getWeightIn(),this.from.weight=e.getWeightOut()),this.actions[s].reset(),this.actions[s].time=e.getToActionTime(),this.actions[s].play())}setTimeScale(e){this.timeScale=e,this.actions.forEach(t=>{t.timeScale=e})}setMouseLookEnabled(e){this.setAnimations(this.animations,this.mixamoModel,e)}setAnimations(e,t=null,r=null,i=!1){if(r=r??this.animationManager.mouseLookEnabled,this.animations=e,t!=null){if(this.vrm!=null){const s=WJ(e,t,this.vrm);s&&(e=[s],this.mixamoModel=t)}}else{const s=[];e.forEach(o=>{s.push(o.clone())}),e=s}if(r&&e[0].tracks.map((s,o)=>{(s.name==="neck.quaternion"||s.name==="spine.quaternion")&&e[0].tracks.splice(o,1)}),i){this.actions.forEach(s=>{s.weight=0,s.stop()}),this.actions=[],this.newAnimationWeight=1;for(let s=0;s<e.length;s++){const o=this.mixer.clipAction(e[s]);o.timeScale=this.timeScale,this.actions.push(o)}this.actions[0].weight=1,this.actions[0].play()}else{this.fadeOutActions=this.actions,this.actions=[],this.newAnimationWeight=0;for(let s=0;s<e.length;s++){const o=this.mixer.clipAction(e[s]);o.timeScale=this.timeScale,this.actions.push(o)}this.actions[0].weight=0,this.actions[0].play()}}update(e,t){this.fadeOutActions!=null&&(this.newAnimationWeight+=1/5,this.fadeOutActions.forEach(r=>{r.weight=1-this.newAnimationWeight}),this.newAnimationWeight>=1&&(this.newAnimationWeight=1,this.fadeOutActions.forEach(r=>{r.weight=0,r.stop()}),this.fadeOutActions=null),this.actions.forEach(r=>{r.weight=this.newAnimationWeight})),this.from!=null&&(this.from.weight=t),this.to!=null&&(this.to.weight=e),this.mixer.update(1/30)}reset(){this.mixer.setTime(0),this.to.paused=!0}resume(){this.to.paused=!1}setTime(e){this.mixer.setTime(e)}getTime(){return this.mixer.time}dispose(){this.animationManager.disposeAnimation(this)}}class bfe{constructor(){this.animationPaths=[],this.defaultAnimations=[],this.lastAnimID=null,this.mainControl=null,this.animationControl=null,this.animations=null,this.paused=!1,this.scale=1,this.curLoadAnim=0,this.currentAnimationName="",this.weightIn=NaN,this.weightOut=NaN,this.lastAnimID=-1,this.curAnimID=0,this.animationControls=[],this.started=!1,this.mouseLookEnabled=!1,this.mixamoModel=null,this.mixamoAnimations=null,this.currentClip=null,setInterval(()=>{this.update()},1e3/30)}enableMouseLook(e){this.mouseLookEnabled=e,this.animationControls.forEach(t=>{t.setMouseLookEnabled(e)})}setScale(e){this.scale=e}async loadAnimation(e,t,r=0,i=!0,s="",o=""){const a=s+(s!=""?"/":"")+Ot(e)[0];o=o==""?Sl(a):o,this.currentAnimationName=o;const A=await(i?wfe:Bfe).loadAsync(a);A.scale.set(this.scale,this.scale,this.scale),this._scaleOffsetHips(A.animations);const c=bu.findByName(A.animations,"mixamo.com");c!=null?(this.mixamoModel=A.clone(),this.mixamoAnimations=A.animations,this.currentClip=c):(this.mixamoModel=null,this.animations=A.animations,this.currentClip=A.animations[0]),this.mainControl==null&&(this.curAnimID=0,this.lastAnimID=-1,this.mainControl=new _D(this,A,null,A.animations,this.curAnimID,this.lastAnimID,t),this.animationControls.push(this.mainControl)),this.animationControls.forEach(u=>{u.setAnimations(A.animations,this.mixamoModel,this.mouseLookEnabled,t)}),this.setTime(r),t?this.pause():this.play()}getCurrentClip(){return this.currentClip}getCurrentClipDuration(){return this.currentClip?this.currentClip.duration:0}getCurrentAnimationName(){return this.currentAnimationName}clearCurrentAnimations(){this.animationPaths=this.defaultAnimations,this.animationControls=[],this.mainControl=null}storeAnimationPaths(e,t,r=!0){const i=Ot(e);r?this.animationPaths=[...this.defaultAnimations,...i.map(s=>`${t}/${s}`)]:this.animationPaths=i.map(s=>t!=""?`${t}/${s}`:s)}storeDefaultAnimationPaths(e,t){const r=Ot(e);this.defaultAnimations=r.map(i=>t!=""?`${t}/${i}`:i),this.animationPaths=this.defaultAnimations}loadNextAnimation(){this.curLoadAnim==this.animationPaths.length-1?this.curLoadAnim=0:this.curLoadAnim++,this.loadAnimation(this.animationPaths[this.curLoadAnim])}loadPreviousAnimation(){this.curLoadAnim==0?this.curLoadAnim=this.animationPaths.length-1:this.curLoadAnim--,this.loadAnimation(this.animationPaths[this.curLoadAnim])}enableScreenshot(){this.animationControls.forEach(e=>{e.reset()})}disableScreenshot(){this.animationControls.forEach(e=>{e.resume()})}_scaleOffsetHips(e){e.forEach(t=>{for(let r=0;r<t.tracks.length;r++){const i=t.tracks[r];if(i.name.includes(".position"))for(let s=0;s<i.values.length/3;s++){const o=s*3;i.values[o]/=this.scale,i.values[o+1]/=this.scale,i.values[o+2]/=this.scale}}})}addVRM(e){if(e==null){console.error("Non Existing VRM was provided.");return}let t=null;this.mixamoModel!=null?(t=[WJ(this.mixamoAnimations,this.mixamoModel.clone(),e)],this.animations==null&&(this.animations=t)):t=this.animations;const r=new _D(this,e.scene,e,t,this.curAnimID,this.lastAnimID,this.isPaused());this.animationControls.push(r),this.started===!1&&t&&(this.started=!0,this.animRandomizer(t[this.curAnimID].duration)),this.update(!0)}removeVRM(e){const t=this.animationControls.findIndex(r=>r.vrm===e);t!==-1&&this.animationControls.splice(t,1)[0].dispose()}getFromActionTime(){return this.mainControl.actions[this.lastAnimID].time}getToActionTime(){return this.mainControl?this.mainControl.actions[this.curAnimID].time:.1}getWeightIn(){return this.weightIn}getWeightOut(){return this.weightOut}disposeAnimation(e){if(e!=null){const t=this.animationControls.indexOf(e);t!=-1&&this.animationControls.splice(t,1)}}dispose(){this.animationControls.forEach(e=>{e.dispose()})}animRandomizer(e){setTimeout(()=>{this.lastAnimID=this.curAnimID,this.curAnimID=Cfe(this.animations.length),this.curAnimID!=this.lastAnimID&&this.animationControls.forEach(t=>{t.from=t.actions[this.lastAnimID],t.to=t.actions[this.curAnimID],this.weightIn=0,this.weightOut=1,t.to.play(),t.to.reset()}),this.animRandomizer(this.animations[this.curAnimID].duration-vI)},e*1e3)}pause(){this.paused=!0}play(){this.paused=!1}isPaused(){return this.paused}setTime(e){this.mainControl&&this.animationControls.forEach(t=>{t.setTime(e)})}setFrame(e){this.setTime(e*30)}setSpeed(e){this.mainControl&&this.animationControls.forEach(t=>{t.setTimeScale(e)})}update(e=!1){(this.mainControl&&!this.paused||e)&&(this.animationControls.forEach(t=>{t.update(this.weightIn,this.weightOut)}),this.weightIn<1?this.weightIn+=1/(30*vI):this.weightIn=1,this.weightOut>0?this.weightOut-=1/(30*vI):this.weightOut=0)}}const ED={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );
			gl_FragColor.a *= opacity;


		}`};class qf{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const xfe=new Du(-1,1,1,-1,0,1),rQ=new zt;rQ.setAttribute("position",new rn([-1,3,0,-1,-1,0,3,-1,0],3));rQ.setAttribute("uv",new rn([0,2,0,0,2,0],2));class iQ{constructor(e){this._mesh=new In(rQ,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,xfe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class SD extends qf{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof Sr?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=yU.clone(e.uniforms),this.material=new Sr({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new iQ(this.material)}render(e,t,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class UD extends qf{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,r){const i=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),s.buffers.stencil.setFunc(i.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(i.EQUAL,1,4294967295),s.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),s.buffers.stencil.setLocked(!0)}}class Ife extends qf{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Ffe{constructor(e,t){if(this.renderer=e,t===void 0){const r=e.getSize(new ze);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,t=new Qa(this._width*this._pixelRatio,this._height*this._pixelRatio),t.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],ED===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),SD===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new SD(ED),this.clock=new EG}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let r=!1;for(let i=0,s=this.passes.length;i<s;i++){const o=this.passes[i];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),o.needsSwap){if(r){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}UD!==void 0&&(o instanceof UD?r=!0:o instanceof Ife&&(r=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new ze);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}new Du(-1,1,1,-1,0,1);const ZJ=new zt;ZJ.setAttribute("position",new rn([-1,3,0,-1,-1,0,3,-1,0],3));ZJ.setAttribute("uv",new rn([0,2,0,0,2,0],2));class _fe extends qf{constructor(e,t,r,i,s){super(),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=s!==void 0?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Ve}render(e,t,r){const i=e.autoClear;e.autoClear=!1;let s,o;this.overrideMaterial!==void 0&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=o),e.autoClear=i}}class Efe extends qf{constructor(e,t,r){super(),this.resolution=e,this.fsQuad=new iQ(this.material()),this.scene=t,this.camera=r,this.rgbRenderTarget=yy(e,Ir,!0),this.normalRenderTarget=yy(e,Ir,!1),this.normalMaterial=new nie}setResolution(e){this.rgbRenderTarget=yy(e,Ir,!0),this.normalRenderTarget=yy(e,Ir,!1)}render(e,t){e.setRenderTarget(this.rgbRenderTarget),e.render(this.scene,this.camera);const r=this.scene.overrideMaterial;e.setRenderTarget(this.normalRenderTarget),this.scene.overrideMaterial=this.normalMaterial,e.render(this.scene,this.camera),this.scene.overrideMaterial=r;const i=this.fsQuad.material.uniforms;i.tDiffuse.value=this.rgbRenderTarget.texture,i.tDepth.value=this.rgbRenderTarget.depthTexture,i.tNormal.value=this.normalRenderTarget.texture,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(t),this.clear&&e.clear()),this.fsQuad.render(e)}material(){return new Sr({uniforms:{tDiffuse:{value:null},tDepth:{value:null},tNormal:{value:null},resolution:{value:new Nt(this.resolution.x,this.resolution.y,1/this.resolution.x,1/this.resolution.y)}},vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                }
                `,fragmentShader:`
                uniform sampler2D tDiffuse;
                uniform sampler2D tDepth;
                uniform sampler2D tNormal;
                uniform vec4 resolution;
                varying vec2 vUv;

                float getDepth(int x, int y) {
                    return texture2D( tDepth, vUv + vec2(x, y) * resolution.zw ).r;
                }

                vec3 getNormal(int x, int y) {
                    return texture2D( tNormal, vUv + vec2(x, y) * resolution.zw ).rgb * 2.0 - 1.0;
                }

                float neighborNormalEdgeIndicator(int x, int y, float depth, vec3 normal) {
                    float depthDiff = getDepth(x, y) - depth;
                    vec3 normalEdgeBias = vec3(1., 1., 1.);
                    float normalDiff = dot(normal - getNormal(x, y), normalEdgeBias);
                    float normalIndicator = clamp(smoothstep(-.01, .01, normalDiff), 0.0, 1.0);
                    float depthIndicator = clamp(sign(depthDiff * .25 + .0025), 0.0, 1.0);
                    return distance(normal, getNormal(x, y)) * depthIndicator * normalIndicator;
                }

                float depthEdgeIndicator() {
                    float depth = getDepth(0, 0);
                    vec3 normal = getNormal(0, 0);
                    float diff = 0.0;
                    diff += clamp(getDepth(1, 0) - depth, 0.0, 1.0);
                    diff += clamp(getDepth(-1, 0) - depth, 0.0, 1.0);
                    diff += clamp(getDepth(0, 1) - depth, 0.0, 1.0);
                    diff += clamp(getDepth(0, -1) - depth, 0.0, 1.0);
                    return floor(smoothstep(0.01, 0.02, diff) * 2.) / 2.;
                }

                float normalEdgeIndicator() {
                    float depth = getDepth(0, 0);
                    vec3 normal = getNormal(0, 0);
                    float indicator = 0.0;
                    indicator += neighborNormalEdgeIndicator(0, -1, depth, normal);
                    indicator += neighborNormalEdgeIndicator(0, 1, depth, normal);
                    indicator += neighborNormalEdgeIndicator(-1, 0, depth, normal);
                    indicator += neighborNormalEdgeIndicator(1, 0, depth, normal);
                    return step(0.1, indicator);
                }

                float lum(vec4 color) {
                    vec4 weights = vec4(.2126, .7152, .0722, .0);
                    return dot(color, weights);
                }

                float smoothSign(float x, float radius) {
                    return smoothstep(-radius, radius, x) * 2.0 - 1.0;
                }

                void main() {
                    vec4 texel = texture2D( tDiffuse, vUv );
                    float tLum = lum(texel);
                    float normalEdgeCoefficient = .3;
                    float depthEdgeCoefficient = .4;
                    float dei = depthEdgeIndicator();
                    float nei = normalEdgeIndicator();
                    float coefficient = dei > 0.0 ? (1.0 - depthEdgeCoefficient * dei) : (1.0 + normalEdgeCoefficient * nei);
                    gl_FragColor = texel * coefficient;
                }
                `})}}function yy(n,e,t){const r=new Qa(n.x,n.y,t?{depthTexture:new mG(n.x,n.y),depthBuffer:!0}:void 0);return r.texture.format=e,r.texture.minFilter=nr,r.texture.magFilter=nr,r.texture.generateMipmaps=!1,r.stencilBuffer=!1,r}class Sfe extends qf{constructor(e){super(),this.resolution=e,this.fsQuad=new iQ(this.material())}setResolution(e){this.resolution=e}render(e,t,r){const i=this.fsQuad.material.uniforms;i.tDiffuse.value=r.texture,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(t),this.clear&&e.clear()),this.fsQuad.render(e)}material(){return new Sr({uniforms:{tDiffuse:{value:null},resolution:{value:new Nt(this.resolution.x,this.resolution.y,1/this.resolution.x,1/this.resolution.y)}},vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                }
                `,fragmentShader:`
                uniform sampler2D tDiffuse;
                uniform vec4 resolution;
                varying vec2 vUv;
                void main() {
                    vec2 iuv = (floor(resolution.xy * vUv) + .5) * resolution.zw;
                    vec4 texel = texture2D( tDiffuse, iuv );
                    texel.rgb = pow(texel.rgb, vec3(1.0 / 2.2));
                    gl_FragColor = texel;
                }
                `})}}const YB=4096,zp=new j;class Ufe{constructor(e,t,r){const i=new h0({preserveDrawingBuffer:!0,antialias:!1,alpha:!0});this.pixelSize=r,this.domElement=i.domElement;const s=new ze(YB,YB);i.setClearColor(0,0),i.outputEncoding=gs,i.setSize(s.x,s.y),i.setPixelRatio(window.devicePixelRatio);let o=s.clone().divideScalar(r);o.x|=0,o.y|=0;const a=new Ffe(i);a.addPass(new _fe(e,t)),this._renderPixelPass=new Efe(o,e,t),this._pixelPass=new Sfe(o),a.addPass(this._renderPixelPass),a.addPass(this._pixelPass),this.renderer=i,this.composer=a}setSize(e,t){let i=new ze(e,t).clone().divideScalar(this.pixelSize);i.x|=0,i.y|=0,this.renderer.setSize(e,t),this._renderPixelPass.setResolution(i),this._pixelPass.setResolution(i)}setPixelSize(e){this.pixelSize=e}render(){this.composer.render()}}class Qfe{constructor(e,t){this.renderer=new h0({preserveDrawingBuffer:!0,antialias:!0,alpha:!0}),this.renderer.setClearAlpha(0),this.renderer.premultipliedAlpha=!1,this.scene=t,this.characterManager=e,this.renderer.outputEncoding=gt,this.renderer.setSize(YB,YB),this.camera=new Nr(30,1,.1,1e3),this.textureLoader=new Vu,this.sceneBackground=new Ve(.1,.1,.1),this.sceneBackgroundAlpha=1,this.frameOffset={min:.2,max:.2},this.usesBackgroundImage=!1,this.backgroundMaterial=new Ri({color:16777215,transparent:!0,opacity:.5});const r=new ku(1e3,1e3),i=new In(r,this.backgroundMaterial);i.renderOrder=-1,this.backgroundPlane=i,this.pixelRenderer=new Ufe(t,this.camera,20),this.boneOffsets={head:null,neck:null,chest:null,hips:null,spine:null,leftUpperLeg:null,leftLowerLeg:null,leftFoot:null,rightUpperLeg:null,rightLowerLeg:null,rightFoot:null}}setScene(e){this.scene=e}setupCamera(e,t,r=30){this.camera.position.copy(e),this.camera.lookAt(t),this.camera.fov=r}_getCharacterMinMax(){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;return this.characterManager.characterModel.traverse(r=>{r.geometry&&(r.geometry.computeBoundingBox(),r.geometry.boundingBox&&(r.geometry.boundingBox.applyMatrix4(r.matrixWorld),r.geometry.boundingBox.min.y<e&&(e=r.geometry.boundingBox.min.y),r.geometry.boundingBox.max.y>t&&(t=r.geometry.boundingBox.max.y)))}),{minY:e,maxY:t}}frameCloseupShot(){this.frameShot("head","head")}frameMediumShot(){this.frameShot("chest","head")}frameCowboyShot(){this.frameShot("hips","head")}frameFullShot(){this.frameShot("leftFoot","head")}frameShot(e,t,r=null,i=!1,s=!0){const o=this._getBoneWorldPositionWithOffset(e,i),a=this._getBoneWorldPositionWithOffset(t,s);o.y-=this.frameOffset.max,a.y+=this.frameOffset.min,r=r||new j(0,0,0),this.positionCameraBetweenPoints(o,a,r)}setBottomFrameOffset(e){this.frameOffset.min=e}setTopFrameOffset(e){this.frameOffset.max=e}async calculateBoneOffsets(e){for(const t in this.boneOffsets){const r=await this._getMinMaxOffsetByBone(this.characterManager.characterModel,t,e);this.boneOffsets[t]=r}}_getBoneWorldPositionWithOffset(e,t){const r=this._getFirstBoneWithName(e);if(!r||!this.boneOffsets[e])return new j;const i=new j;r.getWorldPosition(i);const s=t?this.boneOffsets[e].max:this.boneOffsets[e].min;return i.y+=s.y,i}_getBoneWorldPosition(e){const t=this._getFirstBoneWithName(e);return t!=null?new j().setFromMatrixPosition(t.matrixWorld):(console.warn(`Bone with name '${e}' not found in one of the skinned meshes.`),new j(0,0,0))}_getFirstBoneWithName(e){let t=null;return this.characterManager.characterModel.traverse(r=>{if(r instanceof _l){if(!r.geometry){console.error("Invalid skinned mesh found in children.");return}const i=r.skeleton.bones.findIndex(s=>s.name===e);if(i!==-1){t=r.skeleton.bones[i];return}}}),t}setCameraFrameWithName(e,t){switch(e.toLowerCase()){case"fullshot":this.frameShot("leftFoot","head",t);break;case"cowboyshot":this.frameShot("hips","head",t);break;case"mediumshot":this.frameShot("chest","head",t);break;case"mediumcloseup":case"mediumcloseupshot":this.frameShot("chest","head",t,!0);break;case"closeup":case"closeupshot":this.frameShot("head","head",t);break;default:console.warn("unkown cameraFrame: "+e+". Please use fullShot, cowboyShot, mediumShot, mediumCloseup or closeup"),this.frameShot("leftFoot","head",t);break}}async _getMinMaxOffsetByBone(e,t,r){return new Promise(async(i,s)=>{(!e||!e.traverse)&&(console.error("Invalid parent object provided."),s(null));const o=new j(1/0,1/0,1/0),a=new j(-1/0,-1/0,-1/0),l=[];e.traverse(async u=>{u instanceof _l&&(l.push(this._saveBonesPos(u.skeleton)),u.skeleton.pose())});let A=0;await(u=>new Promise(h=>setTimeout(h,u)))(10),e.traverse(u=>{if(u instanceof _l){if(!u.geometry){console.error("Invalid skinned mesh found in children.");return}const h=u.skeleton.bones.findIndex(m=>m.name===t);if(h===-1){console.error(`Bone with name '${t}' not found in one of the skinned meshes.`);return}const d=u.geometry.getAttribute("position"),p=u.geometry.getAttribute("skinWeight"),f=u.geometry.getAttribute("skinIndex");for(let m=0;m<d.count;m++){const g=new j().fromBufferAttribute(d,m).applyMatrix4(u.matrixWorld);if(f.getX(m)===h&&p.getX(m)>=r){const B=u.skeleton.bones[h],C=new j().setFromMatrixPosition(B.matrixWorld),b=g.clone().sub(C);o.min(b),a.max(b)}}this._restoreSavedPose(l[A],u.skeleton),A++}}),i({min:o,max:a})})}_saveBonesPos(e){let t=[];return e.bones.forEach(r=>{t.push({position:r.position.clone(),rotation:r.rotation.clone(),scale:r.scale.clone()})}),t}_restoreSavedPose(e,t){e&&t.bones.forEach((r,i)=>{r.position.copy(e[i].position),r.rotation.copy(e[i].rotation),r.scale.copy(e[i].scale)})}positionCameraBetweenPoints(e,t,r,i=30){const s=new Cs;s.expandByPoint(e),s.expandByPoint(t),this.camera.fov=i;const o=this.camera.fov*(Math.PI/180),l=s.getSize(new j).length()/(2*Math.tan(o/2));s.getCenter(zp),this.camera.position.copy(zp),r.y*=.5,this.camera.lookAt(zp.clone().sub(r));const A=new j;this.camera.getWorldDirection(A),this.camera.position.addScaledVector(A,-l),this.camera.updateProjectionMatrix()}setCamera(e,t,r=30){this.camera.position.copy(e),this.camera.fov=r,zp.set(0,0,-1),this.cameraDir=zp.applyQuaternion(this.camera.quaternion),this.cameraDir.normalize(),this.camera.position.x-=this.cameraDir.x*t,this.camera.position.z-=this.cameraDir.z*t}setBackground(e){if(Array.isArray(e)){const t=e[3]==null?1:e[3];this.setBackgroundColor(e[0],e[1],e[2],t)}else this.setBackgroundImage(e)}setBackgroundColor(e,t,r,i){const s=new Ve(e,t,r,i);this.sceneBackground=s,i==null&&(i=1),i>1&&(i=1),i<0&&(i=0),this.sceneBackgroundAlpha=i,this.backgroundMaterial.color=s,this.usesBackgroundImage=!1}setBackgroundImage(e){return new Promise(async(t,r)=>{try{const i=await this.texureLoader.load(e);i&&(i.wrapS=i.wrapT=ps,this.sceneBackground=i,this.usesBackgroundImage=!0,this.sceneBackgroundAlpha=1,t())}catch(i){console.error("Error loading background image: ",i),r(i)}})}_setBackground(){if(this.usesBackgroundImage==!1&&this.sceneBackgroundAlpha!=1)if(this.sceneBackgroundAlpha==0)this.scene.background=null;else{this.scene.background=null,this.scene.add(this.backgroundPlane),this.backgroundPlane.position.copy(this.camera.position);var e=new j(0,0,-1);e.applyQuaternion(this.camera.quaternion);var t=100;this.backgroundPlane.position.addScaledVector(e,t),this.backgroundPlane.lookAt(this.camera.position)}else this.scene.background=this.sceneBackground}_restoreBackground(){this.scene.background=null,this.usesBackgroundImage==!1&&this.sceneBackgroundAlpha!=1&&this.scene.remove(this.backgroundPlane)}getImageData(e,t,r=null){return this._createImage(e,t,r).split("base64,")[1]}_createImage(e,t,r=null){const i=e/t;typeof r=="number"&&this.pixelRenderer.setPixelSize(r),this.renderer.setSize(e,t),this.pixelRenderer.setSize(e,t);const s="image/png";this.camera.aspect=i,this.camera.updateProjectionMatrix();const o=typeof r=="number"?this.pixelRenderer:this.renderer;try{this._setBackground(),o.render(this.scene,this.camera);let a=o.domElement.toDataURL(s);return this._restoreBackground(),a}catch(a){return console.error(a),null}}savePixelScreenshot(e,t,r,i){this.pixelRenderer.setPixelSize(i),this.pixelRenderer.setSize(t,r);const s=this._createImage(t,r,!0),o="image/octet-stream",a="image/png";this.saveFile(s.replace(a,o),e+".png")}saveScreenshot(e,t,r){const i=this._createImage(t,r),s="image/octet-stream",o="image/png";this.saveFile(i.replace(o,s),e+".png")}getScreenshotImage(e,t){const r=this._createImage(e,t),i=new Image;return i.src=r,i}getScreenshotTexture(e,t){const r=this.getScreenshotImage(e,t),i=new or(r);return i.needsUpdate=!0,i}getScreenshotBlob(e,t){const r=this._createImage(e,t),i=v4.Buffer.from(r.replace(/^data:image\/\w+;base64,/,""),"base64");return new Blob([i],{type:"image/jpeg"})}saveFile(e,t){const r=document.createElement("a");typeof r.download=="string"?(document.body.appendChild(r),r.download=t,r.href=e,r.click(),document.body.removeChild(r)):window.open(e,"_blank").document.write("<title>"+t+"</title><img src='"+e+"'/>")}}const Rfe=2;class Mfe{constructor(e=.5,t=.5,r=1,i=5){this.vrmBlinkers=[],this.mode="ready",this.clock=new EG,this.closeTime=e,this.openTime=t,this.continuity=r,this.randomness=i,this._eyeOpen=1,this._blinkCounter=0,this.isTakingScreenShot=!1,this.update()}addVRM(e){this.vrmBlinkers.push(e)}removeVRM(e){const t=this.vrmBlinkers.indexOf(e);t!==-1&&this.vrmBlinkers.splice(t,1)}enableScreenshot(){this.isTakingScreenShot=!0,this._eyeOpen=Rfe,this._updateBlinkers()}disableScreenshot(){this.isTakingScreenShot=!1}update(){setInterval(()=>{if(this.isTakingScreenShot)return;const e=this.clock.getDelta();switch(this.mode){case"closing":this._eyeOpen>0?this._eyeOpen-=e/this.closeTime:(this._eyeOpen=0,this.mode="open"),this._updateBlinkers();break;case"open":this._eyeOpen<1?this._eyeOpen+=e/this.openTime:(this._eyeOpen=1,this.mode="ready"),this._updateBlinkers();break;case"ready":this._blinkCounter+=e,this._blinkCounter>=this.continuity&&(Math.floor(Math.random()*this.randomness)===0&&(this.mode="closing"),this._blinkCounter=0);break}},1e3/30)}_updateBlinkers(){this.vrmBlinkers.forEach(e=>{e.expressionManager.setValue(ui.Blink,1-this._eyeOpen),e.expressionManager.update()})}}var kn;(function(n){n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.LINEAR=9729]="LINEAR",n[n.REPEAT=10497]="REPEAT"})(kn||(kn={}));const cE="blend_",QD="vrmColliderSphere";function Tfe(n){return{title:n.name,version:"v0",author:n.authors[0]||"",contactInformation:n.contactInformation,allowedUserName:n.allowedUserName,violentUssageName:n.allowExcessivelyViolentUsage?"Allow":"Disallow",sexualUssageName:n.allowExcessivelySexualUsage?"Allow":"Disallow",commercialUssageName:"Disallow"}}function Nfe(n){const e=[];for(const t in n.humanBones)e.push({bone:t,node:n.humanBones[t].node});return{humanBones:e}}function kfe(n){switch(n){case"happy":return"joy";case"sad":return"sorrow";case"relaxed":return"fun";case"aa":return"a";case"ih":return"i";case"ou":return"u";case"ee":return"e";case"oh":return"o";default:return n}}function Dfe(n){if(n.includes("Thumb")){if(n.includes("Metacarpal"))return n.replace("Metacarpal","Proximal");if(n.includes("Proximal"))return n.replace("Proximal","Intermediate")}return n}class Lfe{parse(e,t,r,i,s,o,a){var ye;const l=Tfe(e.meta),A=Nfe(e.humanoid),c=e.materials,u=[],h={generator:"UniGLTF-2.0.0",version:"2.0"};if(t)if(A)if(l){if(!c)throw new Error("materials is undefined or null")}else throw new Error("meta is undefined or null");else throw new Error("humanoid is undefined or null");else throw new Error("avatar is undefined or null");const d=c.filter((ne,J,Y)=>Y.findIndex(ue=>ue.name===ne.name.replace(" (Outline)",""))===J).map(ne=>ne),p=d.map(ne=>ne.name),f=r?{name:"icon",imageBitmap:r.image}:null,m=d.filter(ne=>ne.map).map(ne=>{if(!ne.map)throw new Error(ne.name+" map is null");return{name:ne.name,imageBitmap:ne.map.image}}),g=d.filter(ne=>ne.userData.shadeTexture).map(ne=>{if(!ne.userData.shadeTexture)throw new Error(ne.userData.shadeTexture+" map is null");return{name:ne.name+"_shade",imageBitmap:ne.userData.shadeTexture.image}}),v=d.filter(ne=>ne.roughnessMap).map(ne=>ne.roughnessMap?{name:ne.name+"_orm",imageBitmap:ne.roughnessMap.image}:null),w=d.filter(ne=>ne.roughnessMap).map(ne=>ne.normalMap?{name:ne.name+"_normal",imageBitmap:ne.normalMap.image}:null),B=[...m,...g,...v,...w].filter(ne=>ne!==null),C=Zfe(B,f),b=Gfe(C),F=Jfe(C),x=Wfe(d,B),E=t.children.filter(ne=>ne.children.length>0&&ne.children[0].type===hi.Bone)[0],M=GJ(E).filter(ne=>ne.name!==QD),H=M.map(ne=>ne.name),O=M.map(ne=>{const J=ne.children.filter(Y=>Y.name!==QD).map(Y=>H.indexOf(Y.name));return{name:ne.name,rotation:[ne.quaternion.x,ne.quaternion.y,ne.quaternion.z,ne.quaternion.w],scale:[ne.scale.x,ne.scale.y,ne.scale.z],translation:[ne.position.x,ne.position.y,ne.position.z],children:J.length>0?J:void 0}}),U=[],y=t.children.filter(ne=>ne.type===hi.Group||ne.type===hi.SkinnedMesh),I=[];y.forEach(ne=>{const J=ne.type===hi.Group?ne.children[0]:ne,Y=J.geometry.attributes,ue=new dA(Y.position,kn.FLOAT,Pt.POSITION,ra.VEC3,J.name,void 0);I.push(ue);const le=I.length-1,we=Y.normal.array,G=new Float32Array(we.length);for(let te=0;te<we.length;te+=3){const oe=we[te],ae=we[te+1],Se=we[te+2],Ee=Math.sqrt(oe*oe+ae*ae+Se*Se);G[te]=oe/Ee,G[te+1]=ae/Ee,G[te+2]=Se/Ee}const Q=new dA(new ut(G,3),kn.FLOAT,Pt.NORMAL,ra.VEC3,J.name,void 0);I.push(Q),I.push(new dA(Y.uv,kn.FLOAT,Pt.UV,ra.VEC2,J.name,void 0)),I.push(new dA(Y.skinWeight,kn.FLOAT,Pt.SKIN_WEIGHT,ra.VEC4,J.name,void 0)),I.push(new dA(Y.skinIndex,kn.UNSIGNED_SHORT,Pt.SKIN_INDEX,ra.VEC4,J.name,void 0)),(ne.type===hi.Group?ne.children.map(te=>te):[ne]).forEach(te=>{if(!te.geometry.index)throw new Error(te.name+" geometry.index is null");I.push(new dA(te.geometry.index,kn.UNSIGNED_INT,Pt.INDEX,ra.SCALAR,J.name,te.name))}),J.morphTargetDictionary||(J.morphTargetDictionary={},J.morphTargetInfluences=[],J.geometry.morphAttributes={},J.updateMorphTargets()),J.geometry.userData.targetNames=[],console.warn("taking only mesh 0 for morph targets now, take the correct mesh");for(const te in e.expressionManager.expressionMap){const oe=e.expressionManager.expressionMap[te],ae=oe._binds.map(Se=>({mesh:0,index:Se.index,weight:Se.weight*100}));if(ae.length>0){let Se=!1;for(const Ee in ui)if(te===ui[Ee]&&te!=="surprised"){u.push({name:te,presetName:kfe(te),binds:ae,isBinary:oe.isBinary}),Se=!0;break}Se===!1&&u.push({name:te,presetName:"unknown",binds:ae,isBinary:oe.isBinary})}}const W=(te,oe,ae,Se)=>{const Ee=[],Me=[];for(let Le=0;Le<te.length;Le+=3){const ke=te[Le],pe=te[Le+1],Fe=te[Le+2];(ke!==0||pe!==0||Fe!==0)&&(Ee.push(Le/3),Me.push(ke,pe,Fe))}if(Ee.length>0){const Le=[...Ee].sort((Fe,Ue)=>Fe-Ue),ke=[];for(let Fe=0;Fe<Le.length;Fe++){const Ue=Le[Fe],Te=Ee.indexOf(Ue);ke.push(Me[Te*3],Me[Te*3+1],Me[Te*3+2])}const pe={targetMeshDataIndex:le,count:Le.length,indices:new Uint32Array(Le),values:new Float32Array(ke)};I.push(new dA(Se,kn.FLOAT,ae,ra.VEC3,J.name,cE+oe,pe))}};for(const te in J.morphTargetDictionary){J.geometry.userData.targetNames.push(te);const oe=J.morphTargetDictionary[te],ae=J.geometry.morphAttributes;W(ae.position[oe].array,te,Pt.BLEND_POSITION,Y.position),ae.normal&&W(ae.normal[oe].array,te,Pt.BLEND_NORMAL,Y.normal)}}),y.forEach(ne=>{const J=ne.type===hi.Group?ne.children[0]:ne,Y=new Float32Array(J.skeleton.boneInverses.map(ue=>ue.elements).flat());I.push(new dA(new ut(Y,16),kn.FLOAT,Pt.BIND_MATRIX,ra.MAT4,J.name,J.name))}),U.push(...I.map(ne=>({componentType:ne.valueType,count:ne.attribute.count,max:ne.max,min:ne.min,normalized:!1,type:ne.accessorsType})));const R=Pfe(y,I,p);y.forEach((ne,J)=>{O.push({mesh:J,name:ne.name,rotation:[ne.quaternion.x,ne.quaternion.y,ne.quaternion.z,ne.quaternion.w],scale:[ne.scale.x,ne.scale.y,ne.scale.z],skin:J,translation:[ne.position.x,ne.position.y,ne.position.z]})});const D=Ofe(y,I,H),k={humanBones:[]};A.humanBones.forEach(ne=>{H.indexOf(ne.node.name)!=-1&&k.humanBones.push({bone:Dfe(ne.bone),node:H.indexOf(ne.node.name),useDefaultValues:!0})});const V={floatProperties:{_DstBlend:.5,_ShadeShift:.5,_ShadeToony:.5,_ShadingGradeRate:.5},keywordMap:{_NORMALMAP:!1,MTOON_OUTLINE_COLOR_FIXED:!0,MTOON_OUTLINE_WIDTH_WORLD:!0},name:"VRMCombinedMat",renderQueue:2e3,shader:"VRM/MToon",tagMap:{RenderType:"Opaque"},textureProperties:{_MainTex:0,_ShadeTexture:0},vectorProperties:{_Color:[1,1,1,1],_EmissionColor:[0,0,0,1],_EmissionMap:[0,0,1,1],_MainTex:[0,0,1,1],_OutlineColor:[0,0,0,1],_OutlineWidthTexture:[0,0,1,1],_ReceiveShadowTexture:[0,0,1,1],_RimColor:[0,0,0,1],_RimTexture:[0,0,1,1],_ShadeColor:[.9,.9,.9,1]}},Z={name:"STDCombinedMat",shader:"VRM_USE_GLTFSHADER"},N=[];d.forEach(ne=>{ne.type=="ShaderMaterial"?N.push(N.push(Object.assign({},V))):N.push(N.push(Object.assign({},Z)))});const _=l;i.forEach(ne=>{for(let J=0;J<M.length&&M[J].name!==ne.name;J++);});const z=[],ie=((ye=y.find(ne=>ne.isSkinnedMesh))==null?void 0:ye.skeleton)||null;for(let ne=0;ne<ie.bones.length;ne++){const J=ie.bones[ne];if(J.userData.VRMcolliders){const Y={node:H.indexOf(J.name),colliders:[],name:J.name};J.userData.VRMcolliders.forEach(ue=>{const le=ue.sphere;Y.colliders.push({radius:le.radius*o,offset:{x:le.offset[0]*o,y:le.offset[1]*o,z:le.offset[2]*o}})}),z.push(Y)}}console.log("COLLIDER GROUPS",z);const T=ne=>{for(let J=0;J<M.length;J++)if(M[J].name===ne)return J;return-1},q=[];i.forEach(ne=>{var we;const J=T(ne.name);if(J===-1){console.warn("Spring bone "+ne.name+" was removed during cleanup process. Skipping.");return}const Y=[];ne.colliderGroups.forEach(G=>{const Q=G.colliders[0];if(Q!=null){const S=Q.parent,W=z.findIndex(te=>te.name===S.name);W!=-1?Y.includes(W)||Y.push(W):console.warn("No collider group for bone name: ",S.name+" was found")}else console.log("No colliders definition were present in vrm file file for: ",ne.name+" spring bones")});let ue=T((we=ne.center)==null?void 0:we.name);ue==-1&&console.warn("no center bone for spring bone "+ne.name);const le=ne.settings;q.push({bones:[J],center:ue,colliderGroups:Y,dragForce:le.dragForce,gravityDir:{x:le.gravityDir.x,y:le.gravityDir.y,z:le.gravityDir.z},gravityPower:le.gravityPower,hitRadius:le.hitRadius,stiffiness:le.stiffness})});const ge={boneGroups:q,colliderGroups:z};console.log(ge),_.texture=f?C.length-1:void 0;const he=[];he.push(...B.map(ne=>({buffer:RD(ne.imageBitmap),type:Pt.IMAGE}))),I.forEach((ne,J)=>{ne.buffer?he.push({buffer:ne.buffer,typeString:"",type:ne.type}):ne.sparse&&(he.push({buffer:ne.sparse.indices,typeString:"indices",type:ne.type,count:ne.sparse.count}),he.push({buffer:ne.sparse.values,typeString:"values",type:ne.type}))}),f&&he.push({buffer:RD(f.imageBitmap),type:Pt.IMAGE});let Ae=0,$=0,ce=0,me=0;const _e=he.map(ne=>{const J={buffer:0,byteLength:ne.buffer.byteLength,byteOffset:Ae,target:ne.type===Pt.IMAGE||ne.type===Pt.BIND_MATRIX||ne.typeString==="indices"||ne.typeString==="values"?void 0:ne.type===Pt.INDEX?kn.ELEMENT_ARRAY_BUFFER:kn.ARRAY_BUFFER};return Ae+=ne.buffer.byteLength,ne.type===Pt.IMAGE?(C[$++].bufferView=me,me++):I[ce].sparse?(U[ce].sparse==null&&(U[ce].sparse={}),ne.typeString==="indices"&&(U[ce].sparse.count=ne.count,U[ce].sparse[ne.typeString]={bufferView:me,byteOffset:0,componentType:kn.UNSIGNED_INT}),ne.typeString==="values"&&(U[ce].sparse[ne.typeString]={bufferView:me,byteOffset:0}),ne.typeString==="values"&&ce++,me++):(I[ce].bufferIndex=me,U[ce].bufferView=me,ce++,me++),J}),P=Hfe(t,O);Vfe(_);const fe={accessors:U,asset:h,buffers:[{byteLength:Ae}],bufferViews:_e,extensions:{VRM:{blendShapeMaster:{blendShapeGroups:u},firstPerson:{firstPersonBone:44,firstPersonBoneOffset:new j,lookAtHorizontalInner:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtHorizontalOuter:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtTypeName:"Bone",lookAtVerticalDown:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtVerticalUp:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10}},materialProperties:N,humanoid:k,meta:_,secondaryAnimation:ge,specVersion:"0.0"}},extensionsUsed:["KHR_materials_unlit","KHR_texture_transform","VRM"],images:C,materials:x,meshes:R,nodes:O,samplers:b,scenes:P,skins:D,textures:F};console.log(fe);const de=new MD(dE(JSON.stringify(fe,void 0,2)),"JSON"),ee=new MD(_g(he.map(ne=>ne.buffer)),"BIN\0"),K=_g([de.buffer,ee.buffer]),se=_g([dE("glTF"),uE(2,4),uE(K.byteLength+12,4)]);a(_g([se,K]))}}function Vfe(n){n.title=n.title||"Character",n.version=n.version||"1",n.author=n.author||"Anon",n.contactInformation=n.contactInformation||"",n.reference=n.reference||"",n.allowedUserName=n.allowedUserName||"Everyone",n.violentUssageName=n.violentUssageName||"Disallow",n.sexualUssageName=n.sexualUssageName||"Disallow",n.commercialUssageName=n.commercialUssageName||"Disallow",n.otherPermissionUrl=n.otherPermissionUrl||"",n.licenseName=n.licenseName||"Redistribution_Prohibited",n.otherLicenseUrl=n.otherLicenseUrl||""}function GJ(n){return n.children.length<=0?[n]:[n].concat(n.children.map(e=>GJ(e)).flat())}function RD(n){const e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0);const t=e.toDataURL("image/png"),r=atob(t.split(",")[1]),i=(4-r.length%4)%4,s=new ArrayBuffer(r.length+i),o=new DataView(s);for(let a=0;a<r.length;a++)o.setUint8(a,r.charCodeAt(a));for(let a=r.length;a<r.length+i;a++)o.setUint8(a,0);return s}function uE(n,e){const t=new ArrayBuffer(e);return new DataView(t).setUint32(0,n,!0),t}function dE(n){return new TextEncoder().encode(n).buffer}function _g(n){let e=0;for(let i=0;i<n.length;i++)e+=n[i].byteLength;const t=new Uint8Array(e);let r=0;for(let i=0;i<n.length;++i)t.set(new Uint8Array(n[i]),r),r+=n[i].byteLength;return t.buffer}function yI(n,e){const t=e===kn.UNSIGNED_SHORT?2:4,r=n.array;let i=0;const s=new ArrayBuffer(n.count*n.itemSize*t),o=new DataView(s);for(let a=0;a<n.count;a++)for(let l=0;l<n.itemSize;l++){let A;n.itemSize>4?A=r[a*n.itemSize+l]:l===0?A=n.getX(a):l===1?A=n.getY(a):l===2?A=n.getZ(a):A=n.getW(a),e===kn.UNSIGNED_SHORT?o.setUint16(i,A,!0):e===kn.UNSIGNED_INT?o.setUint32(i,A,!0):o.setFloat32(i,A,!0),i+=t}return s}class MD{constructor(e,t){this.data=e,this.type=t;const r=this.padBuffer(this.data,t==="JSON"?32:0);this.buffer=_g([uE(r.byteLength,4),dE(this.type),r])}padBuffer(e,t){const r=Math.ceil(e.byteLength/4)*4;if(e.byteLength===r)return e;const i=new ArrayBuffer(r);return new Uint8Array(i).set(new Uint8Array(e)),new Uint8Array(i).fill(t,e.byteLength),i}}class dA{constructor(e,t,r,i,s,o,a){if(this.attribute=e,this.type=r,this.valueType=t,this.accessorsType=i,this.meshName=s,this.name=o,a){const{indices:l,values:A,count:c,targetMeshDataIndex:u}=a,h=new ut(l,1),d=new ut(A,e.itemSize);this.targetMeshDataIndex=u,this.sparse={targetMeshDataIndex:u,count:c,indices:yI(h,kn.UNSIGNED_INT),values:yI(d,kn.FLOAT)},this.max=r===Pt.POSITION||r===Pt.BLEND_POSITION?[Math.max.apply(null,Array.from(A).filter((p,f)=>f%3===0)),Math.max.apply(null,Array.from(A).filter((p,f)=>f%3===1)),Math.max.apply(null,Array.from(A).filter((p,f)=>f%3===2))]:void 0,this.min=r===Pt.POSITION||r===Pt.BLEND_POSITION?[Math.min.apply(null,Array.from(A).filter((p,f)=>f%3===0)),Math.min.apply(null,Array.from(A).filter((p,f)=>f%3===1)),Math.min.apply(null,Array.from(A).filter((p,f)=>f%3===2))]:void 0}else this.buffer=yI(this.attribute,this.valueType),this.max=r===Pt.POSITION||r===Pt.BLEND_POSITION?[Math.max.apply(null,Array.from(this.attribute.array).filter((l,A)=>A%3===0)),Math.max.apply(null,Array.from(this.attribute.array).filter((l,A)=>A%3===1)),Math.max.apply(null,Array.from(this.attribute.array).filter((l,A)=>A%3===2))]:void 0,this.min=r===Pt.POSITION||r===Pt.BLEND_POSITION?[Math.min.apply(null,Array.from(this.attribute.array).filter((l,A)=>A%3===0)),Math.min.apply(null,Array.from(this.attribute.array).filter((l,A)=>A%3===1)),Math.min.apply(null,Array.from(this.attribute.array).filter((l,A)=>A%3===2))]:void 0}}var Eh;(function(n){n.MeshBasicMaterial="MeshBasicMaterial",n.MeshStandardMaterial="MeshStandardMaterial",n.MToonMaterial="MToonMaterial"})(Eh||(Eh={}));var ra;(function(n){n.SCALAR="SCALAR",n.VEC2="VEC2",n.VEC3="VEC3",n.VEC4="VEC4",n.MAT4="MAT4"})(ra||(ra={}));var Pt;(function(n){n.POSITION="POSITION",n.NORMAL="NORMAL",n.UV="UV",n.INDEX="INDEX",n.SKIN_WEIGHT="SKIN_WEIGHT",n.SKIN_INDEX="SKIN_INDEX",n.BLEND_POSITION="BLEND_POSITION",n.BLEND_NORMAL="BLEND_NORMAL",n.BIND_MATRIX="BIND_MATRIX",n.IMAGE="IMAGE"})(Pt||(Pt={}));var hi;(function(n){n.Group="Group",n.SkinnedMesh="SkinnedMesh",n.Object3D="Object3D",n.Bone="Bone"})(hi||(hi={}));const Pfe=(n,e,t)=>n.map(r=>{const i=r.type===hi.Group?r.children[0]:r,s=r.type===hi.Group?r.children.map(o=>o):[r];return{name:r.name,primitives:s.map(o=>{const a=e.map(A=>A.meshName===i.name?A.type:null),l=Array.isArray(o.material)?o.material[0].name:o.material.name;return{attributes:{JOINTS_0:a.indexOf(Pt.SKIN_INDEX),NORMAL:a.indexOf(Pt.NORMAL),POSITION:a.indexOf(Pt.POSITION),TEXCOORD_0:a.indexOf(Pt.UV),WEIGHTS_0:a.indexOf(Pt.SKIN_WEIGHT)},extras:{targetNames:o.geometry.userData.targetNames},indices:e.map(A=>A.type===Pt.INDEX&&A.meshName===i.name?A.name:null).indexOf(o.name),material:t.indexOf(l),mode:4,targets:i.geometry.userData.targetNames?i.geometry.userData.targetNames.map(A=>{const c=e.map(d=>d.type===Pt.BLEND_NORMAL&&d.meshName===i.name?d.name:null).indexOf(cE+A),u=e.map(d=>d.type===Pt.BLEND_POSITION&&d.meshName===i.name?d.name:null).indexOf(cE+A),h={};return u!==-1&&(h.POSITION=u),c!==-1&&(h.NORMAL=c),h}):void 0}})}}),Ofe=(n,e,t)=>n.map(r=>{const i=r.type===hi.Group?r.children[0]:r;return{inverseBindMatrices:e.map(s=>s.type===Pt.BIND_MATRIX?s.meshName:null).indexOf(i.name),joints:i.skeleton.bones.map(s=>t.indexOf(s.name)).filter(s=>s!==-1),skeleton:t.indexOf(i.skeleton.bones[0].name)}}),Wfe=(n,e)=>n.map(t=>{let r,i=null;if(t=t.userData.vrmMaterial?t.userData.vrmMaterial:t,t.type==="ShaderMaterial")i={},i.shadeMultiplyTexture={index:e.map(p=>p.name).indexOf(t.uniforms.shadeMultiplyTexture.name)},r=t.color?[1,1,1,1]:void 0;else{const d=t;r=d.color?[d.color.r,d.color.g,d.color.b,1]:void 0}let s=-1;t.map?s=e.map(d=>d.name).indexOf(t.name):t.uniforms&&t.uniforms.map&&(s=e.map(d=>d.name).indexOf(t.uniforms.map.name));let o=-1;t.roughnessMap&&(o=e.map(d=>d.name).indexOf(t.name+"_orm"));let a=-1;t.normalMap&&(a=e.map(d=>d.name).indexOf(t.name+"_normal"));const l=s>=0?{extensions:{KHR_texture_transform:{offset:[0,0],scale:[1,1]}},index:s,texCoord:0}:void 0,A={baseColorFactor:r,baseColorTexture:l},c=o>=0?{index:o,texCoord:0}:void 0,u=a>=0?{index:a,texCoord:0}:void 0;if(c)A.metallicRoughnessTexture=c;else{const d=(()=>{switch(t.type){case Eh.MeshStandardMaterial:return t.metalness;case Eh.MeshBasicMaterial:return 0;default:return 0}})(),p=(()=>{switch(t.type){case Eh.MeshStandardMaterial:return t.roughness;case Eh.MeshBasicMaterial:return .9;default:return .9}})();A.metallicFactor=d,A.roughnessFactor=p}const h={alphaCutoff:t.alphaTest>0?t.alphaTest:void 0,alphaMode:t.transparent?"BLEND":t.alphaTest>0?"MASK":"OPAQUE",doubleSided:t.side===2,extensions:t.type==="ShaderMaterial"?{KHR_materials_unlit:{}}:void 0,name:t.name,pbrMetallicRoughness:A};return u&&(h.normalTexture=u),h}),Zfe=(n,e)=>(e?n.concat(e):n).filter(t=>t&&t.imageBitmap).map(t=>({bufferView:-1,mimeType:"image/png",name:t.name})),Gfe=n=>n.map(()=>({magFilter:kn.LINEAR,minFilter:kn.LINEAR,wrapS:kn.REPEAT,wrapT:kn.REPEAT})),Jfe=n=>n.map((e,t)=>({sampler:0,source:t})),Hfe=(n,e)=>{const t=e.map(r=>r.name);return[{nodes:n.children.filter(r=>r.type===hi.Object3D||r.type===hi.SkinnedMesh||r.type===hi.Group||r.type===hi.Bone).map(r=>t.indexOf(r.name))}]};function JJ(){return(JJ=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function zfe(){return JJ.apply(this,arguments)}function Yfe(n,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](n):n instanceof e}(function(n){n[n.cBASISTexType2D=0]="cBASISTexType2D",n[n.cBASISTexType2DArray=1]="cBASISTexType2DArray",n[n.cBASISTexTypeCubemapArray=2]="cBASISTexTypeCubemapArray",n[n.cBASISTexTypeVideoFrames=3]="cBASISTexTypeVideoFrames",n[n.cBASISTexTypeVolume=4]="cBASISTexTypeVolume"})(fE||(fE={})),function(n){n[n.RAW=0]="RAW",n[n.PNG=1]="PNG",n[n.JPG=2]="JPG"}(pE||(pE={}));class Xfe{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Yp{constructor(e,t,r,i){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,r),this._littleEndian=i,this._offset=0}_nextUint8(){let e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){let e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){let e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){let e=this._dataView.getUint32(this._offset,this._littleEndian),t=this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e+4294967296*t}_nextInt32(){let e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){let t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t=0){let r=this._offset,i=0;for(;this._dataView.getUint8(this._offset)!==t&&i<e;)i++,this._offset++;return i<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,i)}}let TD=new Uint8Array([0]),Rr=[171,75,84,88,32,50,48,187,13,10,26,10];function ND(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):Buffer.from(n)}function kD(n){return typeof TextDecoder<"u"?new TextDecoder().decode(n):Buffer.from(n).toString("utf8")}function Xp(n){let e=0;for(let i of n)e+=i.byteLength;let t=new Uint8Array(e),r=0;for(let i of n)t.set(new Uint8Array(i),r),r+=i.byteLength;return t}function jfe(n){let e=new Uint8Array(n.buffer,n.byteOffset,Rr.length);if(e[0]!==Rr[0]||e[1]!==Rr[1]||e[2]!==Rr[2]||e[3]!==Rr[3]||e[4]!==Rr[4]||e[5]!==Rr[5]||e[6]!==Rr[6]||e[7]!==Rr[7]||e[8]!==Rr[8]||e[9]!==Rr[9]||e[10]!==Rr[10]||e[11]!==Rr[11])throw Error("Missing KTX 2.0 identifier.");let t=new Xfe,r=17*Uint32Array.BYTES_PER_ELEMENT,i=new Yp(n,Rr.length,r,!0);t.vkFormat=i._nextUint32(),t.typeSize=i._nextUint32(),t.pixelWidth=i._nextUint32(),t.pixelHeight=i._nextUint32(),t.pixelDepth=i._nextUint32(),t.layerCount=i._nextUint32(),t.faceCount=i._nextUint32();let s=i._nextUint32();t.supercompressionScheme=i._nextUint32();let o=i._nextUint32(),a=i._nextUint32(),l=i._nextUint32(),A=i._nextUint32(),c=i._nextUint64(),u=i._nextUint64(),h=new Yp(n,Rr.length+r,24*s,!0);for(let R=0;R<s;R++)t.levels.push({levelData:new Uint8Array(n.buffer,n.byteOffset+h._nextUint64(),h._nextUint64()),uncompressedByteLength:h._nextUint64()});let d=new Yp(n,o,a,!0),p={vendorId:d._skip(4)._nextUint16(),descriptorType:d._nextUint16(),versionNumber:d._nextUint16(),descriptorBlockSize:d._nextUint16(),colorModel:d._nextUint8(),colorPrimaries:d._nextUint8(),transferFunction:d._nextUint8(),flags:d._nextUint8(),texelBlockDimension:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],bytesPlane:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],samples:[]},f=(p.descriptorBlockSize/4-6)/4;for(let R=0;R<f;R++){let D={bitOffset:d._nextUint16(),bitLength:d._nextUint8(),channelType:d._nextUint8(),samplePosition:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&D.channelType?(D.sampleLower=d._nextInt32(),D.sampleUpper=d._nextInt32()):(D.sampleLower=d._nextUint32(),D.sampleUpper=d._nextUint32()),p.samples[R]=D}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(p);let m=new Yp(n,l,A,!0);for(;m._offset<A;){let R=m._nextUint32(),D=m._scan(R),k=kD(D);if(t.keyValue[k]=m._nextUint8Array(R-D.byteLength-1),k.match(/^ktx/i)){let Z=kD(t.keyValue[k]);t.keyValue[k]=Z.substring(0,Z.lastIndexOf("\0"))}let V=R%4?4-R%4:0;m._skip(V)}if(u<=0)return t;let g=new Yp(n,c,u,!0),v=g._nextUint16(),w=g._nextUint16(),B=g._nextUint32(),C=g._nextUint32(),b=g._nextUint32(),F=g._nextUint32(),x=[];for(let R=0;R<s;R++)x.push({imageFlags:g._nextUint32(),rgbSliceByteOffset:g._nextUint32(),rgbSliceByteLength:g._nextUint32(),alphaSliceByteOffset:g._nextUint32(),alphaSliceByteLength:g._nextUint32()});let E=c+g._offset,M=E+B,H=M+C,O=new Uint8Array(n.buffer,n.byteOffset+E,B),U=new Uint8Array(n.buffer,n.byteOffset+M,C),y=new Uint8Array(n.buffer,n.byteOffset+H,b),I=new Uint8Array(n.buffer,n.byteOffset+(H+b),F);return t.globalData={endpointCount:v,selectorCount:w,imageDescs:x,endpointsData:O,selectorsData:U,tablesData:y,extendedData:I},t}function hE(){return(hE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}let Kfe={keepWriter:!1};function $fe(n,e={}){e=hE({},Kfe,e);let t=new ArrayBuffer(0);if(n.globalData){let v=new ArrayBuffer(20+20*n.globalData.imageDescs.length),w=new DataView(v);w.setUint16(0,n.globalData.endpointCount,!0),w.setUint16(2,n.globalData.selectorCount,!0),w.setUint32(4,n.globalData.endpointsData.byteLength,!0),w.setUint32(8,n.globalData.selectorsData.byteLength,!0),w.setUint32(12,n.globalData.tablesData.byteLength,!0),w.setUint32(16,n.globalData.extendedData.byteLength,!0);for(let B=0;B<n.globalData.imageDescs.length;B++){let C=n.globalData.imageDescs[B];w.setUint32(20+20*B+0,C.imageFlags,!0),w.setUint32(20+20*B+4,C.rgbSliceByteOffset,!0),w.setUint32(20+20*B+8,C.rgbSliceByteLength,!0),w.setUint32(20+20*B+12,C.alphaSliceByteOffset,!0),w.setUint32(20+20*B+16,C.alphaSliceByteLength,!0)}t=Xp([v,n.globalData.endpointsData,n.globalData.selectorsData,n.globalData.tablesData,n.globalData.extendedData])}let r=[],i=n.keyValue;for(let v in e.keepWriter||(i=hE({},n.keyValue,{KTXwriter:"KTX-Parse v0.6.0"})),i){let w=i[v],B=ND(v),C=typeof w=="string"?Xp([ND(w),TD]):w,b=B.byteLength+1+C.byteLength,F=b%4?4-b%4:0;r.push(Xp([new Uint32Array([b]),B,TD,C,new Uint8Array(F).fill(0)]))}let s=Xp(r);if(n.dataFormatDescriptor.length!==1||n.dataFormatDescriptor[0].descriptorType!==0)throw Error("Only BASICFORMAT Data Format Descriptor output supported.");let o=n.dataFormatDescriptor[0],a=new ArrayBuffer(28+16*o.samples.length),l=new DataView(a),A=24+16*o.samples.length;if(l.setUint32(0,a.byteLength,!0),l.setUint16(4,o.vendorId,!0),l.setUint16(6,o.descriptorType,!0),l.setUint16(8,o.versionNumber,!0),l.setUint16(10,A,!0),l.setUint8(12,o.colorModel),l.setUint8(13,o.colorPrimaries),l.setUint8(14,o.transferFunction),l.setUint8(15,o.flags),!Array.isArray(o.texelBlockDimension))throw Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");l.setUint8(16,o.texelBlockDimension[0]),l.setUint8(17,o.texelBlockDimension[1]),l.setUint8(18,o.texelBlockDimension[2]),l.setUint8(19,o.texelBlockDimension[3]);for(let v=0;v<8;v++)l.setUint8(20+v,o.bytesPlane[v]);for(let v=0;v<o.samples.length;v++){let w=o.samples[v],B=28+16*v;if(w.channelID)throw Error("channelID has been renamed to channelType.");l.setUint16(B+0,w.bitOffset,!0),l.setUint8(B+2,w.bitLength),l.setUint8(B+3,w.channelType),l.setUint8(B+4,w.samplePosition[0]),l.setUint8(B+5,w.samplePosition[1]),l.setUint8(B+6,w.samplePosition[2]),l.setUint8(B+7,w.samplePosition[3]),64&w.channelType?(l.setInt32(B+8,w.sampleLower,!0),l.setInt32(B+12,w.sampleUpper,!0)):(l.setUint32(B+8,w.sampleLower,!0),l.setUint32(B+12,w.sampleUpper,!0))}let c=Rr.length+68+24*n.levels.length,u=c+a.byteLength,h=t.byteLength>0?u+s.byteLength:0;h%8&&(h+=8-h%8);let d=[],p=new DataView(new ArrayBuffer(24*n.levels.length)),f=(h||u+s.byteLength)+t.byteLength;for(let v=0;v<n.levels.length;v++){let w=n.levels[v];d.push(w.levelData),p.setBigUint64(24*v+0,BigInt(f),!0),p.setBigUint64(24*v+8,BigInt(w.levelData.byteLength),!0),p.setBigUint64(24*v+16,BigInt(w.uncompressedByteLength),!0),f+=w.levelData.byteLength}let m=new ArrayBuffer(68),g=new DataView(m);return g.setUint32(0,n.vkFormat,!0),g.setUint32(4,n.typeSize,!0),g.setUint32(8,n.pixelWidth,!0),g.setUint32(12,n.pixelHeight,!0),g.setUint32(16,n.pixelDepth,!0),g.setUint32(20,n.layerCount,!0),g.setUint32(24,n.faceCount,!0),g.setUint32(28,n.levels.length,!0),g.setUint32(32,n.supercompressionScheme,!0),g.setUint32(36,c,!0),g.setUint32(40,a.byteLength,!0),g.setUint32(44,u,!0),g.setUint32(48,s.byteLength,!0),g.setBigUint64(52,BigInt(t.byteLength>0?h:0),!0),g.setBigUint64(60,BigInt(t.byteLength),!0),new Uint8Array(Xp([new Uint8Array(Rr).buffer,m,p.buffer,a,s,new ArrayBuffer(h>0?h-(u+s.byteLength):0),t,...d]))}var fE,pE,qfe={enableDebug:!1,isUASTC:!0,isKTX2File:!0,isInputSRGB:!0,generateMipmap:!0,needSupercompression:!0,isSetKTX2SRGBTransferFunc:!0},gE=new OffscreenCanvas(128,128),DD=gE.getContext("2d",{willReadFrequently:!0}),HJ=typeof document>"u";function epe(n){return createImageBitmap(n).then(function(e){return gE.width=e.width,gE.height=e.height,DD.drawImage(e,0,0),DD.getImageData(0,0,e.width,e.height)})}function zJ(n,e){return e===void 0&&(e={}),npe().then(function(t){var r=new t.BasisEncoder;return tpe(e,r),r.setTexType(fE.cBASISTexType2D),Yfe(n,ArrayBuffer)&&(n=new Blob([n])),epe(n).then(function(i){r.setSliceSourceImage(0,new Uint8Array(i.data),i.width,i.height,pE.RAW);var s=new Uint8Array(10485760),o=r.encode(s);if(o===0)throw"encode failed";var a=new Uint8Array(s.buffer,0,o),l=jfe(s);if(e.kvData){for(var A in e.kvData)l.keyValue[A]=e.kvData[A];a=$fe(l,{keepWriter:!0})}return a})})}function tpe(n,e){n===void 0&&(n={}),(n=zfe({},qfe,n)).enableDebug!==void 0&&e.setDebug(n.enableDebug),n.isUASTC!==void 0&&e.setUASTC(n.isUASTC),n.isKTX2File!==void 0&&e.setCreateKTX2File(n.isKTX2File),n.isSetKTX2SRGBTransferFunc!==void 0&&e.setKTX2SRGBTransferFunc(n.isSetKTX2SRGBTransferFunc),n.generateMipmap!==void 0&&e.setMipGen(n.generateMipmap),n.isYFlip!==void 0&&e.setYFlip(n.isYFlip),n.qualityLevel!==void 0&&e.setQualityLevel(n.qualityLevel),n.compressionLevel!==void 0&&e.setCompressionLevel(n.compressionLevel),n.needSupercompression!==void 0&&e.setKTX2UASTCSupercompression(n.needSupercompression),n.isNormalMap!==void 0&&e.setNormalMap(n.isNormalMap)}var wI=null;function npe(){return wI||(wI=new Promise(function(n,e){HJ?(importScripts("https://mdn.alipayobjects.com/rms/afts/file/A*SrRkQarYYl4AAAAAAAAAAAAAARQnAQ/basis_encoder.js"),fetch("https://mdn.alipayobjects.com/rms/afts/file/A*qFWbTrA0hZYAAAAAAAAAAAAAARQnAQ/basis_encoder.wasm").then(function(t){return t.arrayBuffer()}).then(function(t){BASIS({wasmBinary:t}).then(function(r){r.initializeBasis(),n(r)}).catch(e)}).catch(e)):Promise.all([fetch("https://mdn.alipayobjects.com/rms/afts/file/A*SrRkQarYYl4AAAAAAAAAAAAAARQnAQ/basis_encoder.js").then(function(t){return t.text()}),fetch("https://mdn.alipayobjects.com/rms/afts/file/A*qFWbTrA0hZYAAAAAAAAAAAAAARQnAQ/basis_encoder.wasm").then(function(t){return t.arrayBuffer()})]).then(function(t){var r=t[0],i=t[1],s=document.createElement("script");s.onload=function(){BASIS({wasmBinary:i}).then(function(o){o.initializeBasis(),n(o)}).catch(e)},s.src=URL.createObjectURL(new Blob([r])),s.onerror=e,document.body.appendChild(s)}).catch(e)})),wI}HJ&&self.addEventListener("message",function(n){zJ(n.data).then(function(e){self.postMessage(e)}).catch(function(e){self.postMessage({error:e})})});function YJ(n){const e=n.clone(),t=[];return n.traverse(r=>{r.userData.origIndexBuffer&&t.push(r.userData.origIndexBuffer)}),e.traverse(r=>{r.userData.origIndexBuffer&&(r.userData.origIndexBuffer=t.shift())}),e}function rpe(n){const e=YJ(n);let t;const r=[];e.traverse(s=>{if(!t&&s.isSkinnedMesh&&(t=TJ(s)),s.isSkinnedMesh){if(s.geometry=s.geometry.clone(),s.skeleton=t,r.push(s),Array.isArray(s.material)){const o=s.material;s.material=new Cu,s.material.map=o[0].map}s.userData.origIndexBuffer&&s.geometry.setIndex(s.userData.origIndexBuffer)}});const i=new kr;return r.forEach(s=>{i.add(s)}),i.add(t.bones[0]),i}async function ipe(n,e,t){const r=await sQ(n,t),i=await XJ(r,e,t);return new Blob([i],{type:"model/gltf-binary"})}function spe(n,e,t,r){return new Promise(async(i,s)=>{const o=`${t&&t!==""?t:"AvatarCreatorModel"}`;ope(n,e,r).then(a=>{KJ(a,`${o}.vrm`),i()})})}async function ope(n,e,t){const r=await sQ(n,t);return XJ(r,e,t)}function sQ(n,e){const t=YJ(n),{createTextureAtlas:r=!0}=e;return r?nfe(t,e):(console.log("no atlas"),qhe(t,e))}async function ape(n,e="",t){const r=`${e&&e!==""?e:"AvatarCreatorModel"}`,{optimized:i=!0}=t,s=i?await sQ(n,t):rpe(n);lpe(s).then(o=>{if(o instanceof ArrayBuffer)KJ(o,`${r}.glb`);else{const a=JSON.stringify(o,null,2);cpe(a,`${r}.gltf`)}})}function lpe(n){return new Promise(e=>new ZU().parse(n,r=>{e(r)},r=>{console.error("Error parsing",r)},{trs:!1,onlyVisible:!1,truncateDrawRange:!0,binary:!0,forcePowerOfTwoTextures:!1,maxTextureSize:1024}))}function Ape(n){var r,i;const e=[];for(const s in n)if(((i=(r=n[s])==null?void 0:r.vrm)==null?void 0:i.springBoneManager)!=null){const o=n[s].vrm.springBoneManager.joints;for(const a of o)e.some(A=>A.name===a.bone.name)||e.push({name:a.bone.name,settings:a.settings,bone:a.bone,colliderGroups:a.colliderGroups,center:a.center})}const t=[];return e.forEach(s=>{for(const o in Wm)if(s.bone.parent.name==Wm[o]){t.push(s);break}}),t}function XJ(n,e,t){const{screenshot:r=null,isVrm0:i=!1,vrmMeta:s=null,scale:o=1}=t;return new Promise(async a=>{const l=i?new Lfe:new zde,A={...dpe(e),...gfe(n,"CharacterCreator",s)};if(t.ktxCompression){console.log("ktx compression");for(let p=0;p<A.materials.length;p++){const f=A.materials[p];if(f.map&&f.map.isTexture){const m=f.map;if(m.source&&m.source.isSource&&m.userData.mimeType==="image/png"){const v="image/ktx2";m.userData.mimeType=v,m.source.mimeType=v;const w=m.source,B=document.createElement("canvas");B.width=w.width,B.height=w.height,B.getContext("bitmaprenderer").transferFromImageBitmap(w);const b=await new Promise(M=>B.toBlob(M)),F=await zJ(b),x=new Blob(F,{type:"image/ktx2"}),E=await createImageBitmap(x);A.materials[p].map.source=E}}}}let c;n.traverse(p=>{p.isSkinnedMesh&&(c=p)}),(()=>{for(let p=0;p<c.skeleton.bones.length;p++){const f=c.skeleton.bones[p];f.position.x*=-1,f.position.z*=-1}c.skeleton.bones.forEach(p=>{p.updateMatrix(),p.updateMatrixWorld()}),c.skeleton.calculateInverses(),c.skeleton.computeBoneTexture(),c.skeleton.update()})(),c.skeleton.bones.filter(p=>p.name==="head")[0];const h=Ape(e),d=[];l.parse(A,n,r,h,d,o,p=>{a(p)})})}function jJ(n,e){const t=document.createElement("a");t.style.display="none",document.body.appendChild(t),t.href=URL.createObjectURL(n),t.download=e,t.click()}function cpe(n,e){jJ(new Blob([n],{type:"text/plain"}),e)}function KJ(n,e){jJ(upe(n),e)}function upe(n){return new Blob([n],{type:"application/octet-stream"})}function dpe(n){for(const e in n)if(n[e].vrm)return n[e].vrm}const hpe=n=>{var e,t;(e=n.parser.json.extensions)!=null&&e.VRM?fpe(n):(t=n.parser.json.extensions)!=null&&t.VRMC_vrm?ppe(n):console.warn("No valid vrm file was provided")},fpe=n=>{var a,l,A;const e=n.parser.json,t=n.scene,r=e.nodes,i=(A=(l=(a=e.extensions)==null?void 0:a.VRM)==null?void 0:l.secondaryAnimation)==null?void 0:A.colliderGroups,s=[],o=r.map(c=>$J(c.name,s));i!=null&&i.forEach(c=>{const u=o[c.node],h=PJ(t,u);if(h!=null){const d=c.colliders;h.userData.VRMcolliders=d.map(p=>({sphere:{radius:p.radius,offset:[p.offset.x,p.offset.y,p.offset.z]}}))}h.userData.VRMcollidersID=LJ()})},ppe=n=>{var l,A,c,u;const e=n.parser.json,t=n.scene,r=e.nodes,i=(A=(l=e.extensions)==null?void 0:l.VRMC_springBone)==null?void 0:A.colliderGroups,s=(u=(c=e.extensions)==null?void 0:c.VRMC_springBone)==null?void 0:u.colliders,o=[],a=r.map(h=>$J(h.name,o));i!=null&&i.forEach(h=>{const d=Ot(h.colliders);let p=-1,f=null;d.forEach(m=>{if(p!=s[m].node){p=s[m].node;const g=a[p];f=PJ(t,g),f.userData.VRMcolliders=[]}if(f!=null){const g=s[m].shape;for(const v in g){const w=g[v];w!=null&&w.offset&&(w.offset[0]=-w.offset[0])}f.userData.VRMcollidersID=LJ(),f.userData.VRMcolliders.push(g)}else console.error("no node with name "+a[p]+" was found")})})},$J=(n,e)=>{const t=Ct.sanitizeNodeName(n||"");return t in e?t+"_"+ ++e[t]:(e[t]=0,t)},XB=[0,400,560,2400,4800],jB=[0,500,700,3e3,6e3],mE=[],ol=[],oQ=1024,qJ=44100;for(let n=0;n<XB.length;n++)ol[n]=Math.round(2*oQ/qJ*XB[n]);for(let n=0;n<jB.length;n++)mE[n]=Math.round(2*oQ/qJ*jB[n]);class KB{constructor(e){this.vrm=e;const t=(r,i)=>{requestAnimationFrame(t),this.update(r,i)};t()}start(e){this.audioContext=new AudioContext,this.mediaStreamSource=this.audioContext.createMediaStreamSource(e),this.meter=KB.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter)}startFromAudioFile(e){this.audioContext||(this.audioContext=new AudioContext),this.userSpeechAnalyzer||(this.userSpeechAnalyzer=this.audioContext.createAnalyser()),this.userSpeechAnalyzer.smoothingTimeConstant=.5,this.userSpeechAnalyzer.fftSize=oQ,this.mediaStreamSource&&this.mediaStreamSource.stop(),this.audioContext.decodeAudioData(e).then(t=>{this.mediaStreamSource=this.audioContext.createBufferSource(),this.mediaStreamSource.buffer=t,this.meter=KB.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter),this.mediaStreamSource.connect(this.audioContext.destination),this.mediaStreamSource.start(),this.mediaStreamSource.connect(this.userSpeechAnalyzer)})}destroy(){var e,t,r;return(e=this.meter)==null||e.shutdown(),this.meter=null,(t=this.mediaStreamSource)==null||t.disconnect(),((r=this.audioContext)==null?void 0:r.close().catch(()=>{}))||Promise.resolve()}update(e){if(this.meter){const{volume:t}=this.meter;if(t<.01)this.vrm.expressionManager.setValue(ui.Oh,0),this.vrm.expressionManager.setValue(ui.Ah,0),this.vrm.expressionManager.setValue(ui.Ee,0);else{const{ah:r,oh:i,ee:s}=this.update2();this.vrm.expressionManager.setValue(ui.Oh,i),this.vrm.expressionManager.setValue(ui.Ah,r),this.vrm.expressionManager.setValue(ui.Ee,s),this.vrm.expressionManager.update(e)}}}update2(){function e(A){const u=new Float32Array(A.length);for(let h=0;h<A.length;h++)u[h]=.5+(A[h]+20)/140;return u}const t=new Float32Array(this.userSpeechAnalyzer.frequencyBinCount);this.userSpeechAnalyzer.getFloatFrequencyData(t);const r=e(t),i=new Float32Array(XB.length),s=new Float32Array(jB.length);for(let A=0;A<XB.length-1;A++){for(let c=ol[A];c<=ol[A+1];c++)r[c]>0&&(i[A]+=r[c]);i[A]/=ol[A+1]-ol[A]}for(let A=0;A<jB.length-1;A++){for(let c=ol[A];c<=ol[A+1];c++)r[c]>0&&(s[A]+=r[c]);i[A]/=ol[A+1]-ol[A],s[A]=s[A]/(mE[A+1]-mE[A])}const o=Math.max(s[1],i[1])>.2?1-2*Math.max(i[2],s[2]):(1-2*Math.max(i[2],s[2]))*5*Math.max(i[1],s[1]),a=3*Math.max(i[3],s[3]),l=.8*(Math.max(i[1],s[1])-Math.max(i[3],s[3]));return{oh:o,ee:l,ah:a}}static createAudioMeter(e){const t=e.createScriptProcessor(512);return t.onaudioprocess=r=>{const i=r.inputBuffer.getChannelData(0),s=i.length;let o=0,a;for(let A=0;A<s;A++)a=i[A],Math.abs(a)>=t.clipLevel&&(t.clipping=!0,t.lastClip=window.performance.now()),o+=a*a;const l=Math.sqrt(o/s);t.volume=Math.max(l,t.volume*t.averaging)},t.clipping=!1,t.lastClip=0,t.volume=0,t.clipLevel=.98,t.averaging=.95,t.clipLag=750,t.connect(e.destination),t.checkClipping=()=>t.clipping?(t.lastClip+t.clipLag<window.performance.now()&&(t.clipping=!1),t.clipping):!1,t.shutdown=()=>{t.disconnect(),t.onaudioprocess=null},t}}const BI=new j;class gpe{constructor(e,t,r){this.bonesInfo=[],this.curMousePos=new ze,this.hotzoneSection=s(),this.enabled=!1,this.userActivated=!1,this.lookInterest=1,this.hasInterest=!0,this.interestSpeed=.3,this.onCanvas=!0,this.camera=r,this.maxLookPercent={neck:{maxy:15,miny:10,maxx:30,minx:10},spine:{maxy:0,miny:0,maxx:30,minx:10},left:{maxy:15,miny:20,maxx:35,minx:35},right:{maxy:15,miny:20,maxx:35,minx:35}},window.addEventListener("mousemove",o=>{this.curMousePos={x:o.clientX,y:o.clientY}});const i=document.getElementById(t);i&&(i.addEventListener("mouseleave",()=>{this.onCanvas=!1}),i.addEventListener("mouseenter",()=>{this.onCanvas=!0})),window.addEventListener("resize",()=>{this.hotzoneSection=s()});function s(){const o=window.innerWidth*e/100,a=(window.innerWidth-o)/2;return{xStart:a,xEnd:window.innerWidth-a,yStart:50,yEnd:window.innerHeight-80}}}setActive(e){console.log("is activating"),this.userActivated=e}setCamera(e){this.camera=e}addVRM(e){const t=e.data.isVRM0||!1,r=e.humanoid.humanBones;t||(r.neck.node.userData.inverseLookAt=!0,r.spine.node.userData.inverseLookAt=!0,r.leftEye&&(r.leftEye.node.userData.inverseLookAt=!0),r.rightEye&&(r.rightEye.node.userData.inverseLookAt=!0));const i={vrm:e,neckBone:r.neck.node,spineBone:r.spine.node,leftEyeBone:r.leftEye?r.leftEye.node:null,rightEyeBone:r.rightEye?r.rightEye.node:null};this.bonesInfo.push(i)}removeVRM(e){const t=this.bonesInfo.find(r=>r.vrm===e);if(t){const r=this.bonesInfo.indexOf(t);this.bonesInfo.splice(r,1)}}_getMouseDegrees(e,t,r){let i=0,s=0,o,a,l,A,c={x:window.innerWidth,y:window.innerHeight};return e<=c.x/2&&(o=c.x/2-e,a=o/(c.x/2)*100,i=r.maxx*a/100*-1),e>=c.x/2&&(o=e-c.x/2,a=o/(c.x/2)*100,i=r.minx*a/100),t<=c.y/2&&(l=c.y/2-t,A=l/(c.y/2)*100,s=r.maxy*.5*A/100*-1),t>=c.y/2&&(l=t-c.y/2,A=l/(c.y/2)*100,s=r.miny*A/100),{x:i,y:s}}lerp(e,t,r){return(1-r)*e+r*t}_moveJoint(e,t){const r=e.userData.inverseLookAt===!0?1:-1;if(Object.keys(e).length!==0){const i=(this.camera.position.y-1.8)*window.innerHeight/2;let s=this._getMouseDegrees(this.curMousePos.x,this.curMousePos.y-i,t);const o=.8;e.rotation.y=this.lerp(Zt.degToRad(s.x),e.rotation.y,o),e.rotation.x=this.lerp(Zt.degToRad(s.y*r),e.rotation.x,o)}}update(){BI.set(0,0,1),BI.applyQuaternion(this.camera.quaternion);const e=BI.z>0;this.curMousePos.x>this.hotzoneSection.xStart&&this.curMousePos.x<this.hotzoneSection.xEnd&&this.curMousePos.y>this.hotzoneSection.yStart&&this.curMousePos.y<this.hotzoneSection.yEnd&&e&&this.enabled&&this.userActivated&&this.bonesInfo.forEach(t=>{this._moveJoint(t.neckBone,this.maxLookPercent.neck),this._moveJoint(t.spineBone,this.maxLookPercent.spine),this._moveJoint(t.leftEyeBone,this.maxLookPercent.left),this._moveJoint(t.rightEyeBone,this.maxLookPercent.right)})}}class CI{constructor(e){const{assetsLocation:t,traitsDirectory:r,thumbnailsDirectory:i,traitIconsDirectorySvg:s,animationPath:o,exportScale:a,displayScale:l,initialTraits:A,requiredTraits:c,randomTraits:u,colliderTraits:h,lipSyncTraits:d,blinkerTraits:p,typeRestrictions:f,defaultCullingLayer:m,defaultCullingDistance:g,offset:v,vrmMeta:w,traits:B,textureCollections:C,colorCollections:b,canDownload:F=!0,downloadOptions:x={}}=e;this.assetsLocation=t,this.traitsDirectory=r,this.thumbnailsDirectory=i,this.traitIconsDirectorySvg=s,this.displayScale=l||a||1,this.animationPath=Ot(o),this.requiredTraits=Ot(c),this.randomTraits=Ot(u),this.initialTraits=A||[...new Set(this.requiredTraits.concat(this.randomTraits))],this.colliderTraits=Ot(h),this.lipSyncTraits=Ot(d),this.blinkerTraits=Ot(p),this.typeRestrictions=f,this.defaultCullingLayer=m,this.defaultCullingDistance=g,this.offset=v,this.canDownload=F,this.downloadOptions=x;const E=()=>{const O=[];for(const U in B)O.push(B[U].trait);return O};this.allTraits=E(),E(),(()=>{if(this.typeRestrictions)for(const O in this.typeRestrictions)Ot(this.typeRestrictions[O]).forEach(y=>{this.typeRestrictions[y]==null&&(this.typeRestrictions[y]=[]),this.typeRestrictions[y].indexOf(O)==-1&&this.typeRestrictions[y].push(O)})})(),(()=>{x.vrmMeta=x.vrmMeta||w,x.scale=x.scale||a||1,x.mToonAtlasSize=x.mToonAtlasSize||2048,x.mToonAtlasSizeTransp=x.mToonAtlasSizeTransp||1024,x.stdAtlasSize=x.stdAtlasSize||2048,x.stdAtlasSizeTransp=x.stdAtlasSizeTransp||1024,x.exportStdAtlas=x.exportStdAtlas||!1,x.exportMtoonAtlas=x.exportMtoonAtlas||!0,x.screenshotFaceDistance=x.screenshotFaceDistance||1,x.screenshotFaceOffset=x.screenshotFaceOffset||[0,0,0],x.screenshotResolution=x.screenshotResolution||[512,512],x.screenshotBackground=x.screenshotBackground||[.1,.1,.1],x.screenshotFOV=x.screenshotFOV||75,!x.exportStdAtlas&&!x.exportMtoonAtlas&&(x.exportMtoonAtlas=!0)})(),this.textureTraits=[],this.textureTraitsMap=null,this.createTextureTraits(C),this.colorTraits=[],this.colorTraitsMap=null,this.createColorTraits(b),this.modelTraits=[],this.modelTraitsMap=null,this.createModelTraits(B)}appendManifestData(e,t){e.textureTraits.forEach(r=>{const i=this.getTextureGroup(r.trait);i!=null?i.appendCollection(r,t):(this.textureTraits.push(r),this.textureTraitsMap.set(r.trait,r))}),e.colorTraits.forEach(r=>{const i=this.getColorGroup(r.trait);i!=null?i.appendCollection(r,t):(this.colorTraits.push(r),this.colorTraitsMap.set(r.trait,r))}),e.modelTraits.forEach(r=>{const i=this.getModelGroup(r.trait);i!=null?i.appendCollection(r,t):(this.modelTraits.push(r),this.modelTraitsMap.set(r.trait,r))}),console.log(e)}getExportOptions(){return this.downloadOptions}getGroupModelTraits(){return this.modelTraits}getInitialTraits(){return this.getRandomTraits(this.initialTraits)}getAllTraits(){return this.getRandomTraits(this.allTraits)}isColliderRequired(e){return this.colliderTraits.indexOf(e)!=-1}isLipsyncTrait(e){return this.lipSyncTraits.indexOf(e)!=-1}async getNFTraitOptionsFromURL(e,t){const r=await this._fetchJson(e);return this.getNFTraitOptionsFromObject(r,t)}getNFTraitOptionsFromObject(e,t){const r=e.attributes;if(r){t=Ot(t);const i=[];return r.forEach(s=>{if(t.indexOf(s.trait_type)==-1){const o=this.getTraitOption(s.trait_type,s.value);o&&i.push(o)}}),i}else return console.warn("No attiributes parameter was found in ",e),null}getRandomTraits(e){const t=[];return(e||this.randomTraits).forEach(i=>{const s=this.getRandomTrait(i);s&&t.push(s)}),this._filterTraitOptions(t)}getRandomTrait(e){var r,i;const t=this.getModelGroup(e);if(t){const s=t.getRandomTrait();if(s){const o=(r=s.targetTextureCollection)==null?void 0:r.getRandomTrait(),a=(i=s.targetColorCollection)==null?void 0:i.getRandomTrait();return new bI(s,o,a)}else return null}else return console.warn("No trait group with name "+e+" was found."),null}async _fetchJson(e){return await(await fetch(e)).json()}getTraitOption(e,t){var i,s;const r=this.getModelTrait(e,t);if(r){const o=(i=r.targetTextureCollection)==null?void 0:i.getRandomTrait(),a=(s=r.targetColorCollection)==null?void 0:s.getRandomTrait();return new bI(r,o,a)}return null}_filterTraitOptions(e){const t=[],r=[];for(let i=0;i<e.length;i++){const s=e[i].traitModel;let o=!1;for(let a=0;a<t.length;a++){const l=t[a].traitModel;if(o=s.isRestricted(l),o)break}o?r.push(e[i]):t.push(e[i])}return r.length>0&&console.log("options were filtered to fullfill restrictions: ",r),t}getCustomTraitOption(e,t){const r=this.getCustomModelTrait(e,t);return r?new bI(r,null,null):null}getCustomModelTrait(e,t){var r;return(r=this.getModelGroup(e))==null?void 0:r.getCustomTrait(t)}getModelTrait(e,t){var r;return(r=this.getModelGroup(e))==null?void 0:r.getTrait(t)}getModelTraits(e){const t=this.getModelGroup(e);return t?t.getCollection():(console.warn("No model group with name "+e),null)}getModelGroup(e){return this.modelTraitsMap.get(e)}getTextureTrait(e,t){var r;return(r=this.getTextureGroup(e))==null?void 0:r.getTrait(t)}getTextureGroup(e){return this.textureTraitsMap.get(e)}getColorTrait(e,t){var r;return(r=this.getColorGroup(e))==null?void 0:r.getTrait(t)}getColorGroup(e){return this.colorTraitsMap.get(e)}getTraitsDirectory(){let e=(this.assetsLocation||"")+(this.traitsDirectory||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getThumbnailsDirectory(){let e=(this.assetsLocation||"")+(this.thumbnailsDirectory||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getTraitIconsDirectorySvg(){let e=(this.assetsLocation||"")+(this.traitIconsDirectorySvg||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getAssetsDirectory(){let e=this.assetsLocation||"";return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}createModelTraits(e,t=!1){t&&(this.modelTraits=[]),Ot(e).forEach(r=>{this.modelTraits.push(new mpe(this,r))}),this.modelTraitsMap=new Map(this.modelTraits.map(r=>[r.trait,r])),this.modelTraits.forEach(r=>{r.restrictedTraits.forEach(i=>{const s=this.getModelGroup(i);console.log(s),s&&s.addTraitRestriction(r.trait)})})}createTextureTraits(e,t=!1){t&&(this.textureTraits=[]),Ot(e).forEach(r=>{this.textureTraits.push(new vpe(this,r))}),this.textureTraitsMap=new Map(this.textureTraits.map(r=>[r.trait,r]))}createColorTraits(e,t=!1){t&&(this.colorTraits=[]),Ot(e).forEach(r=>{this.colorTraits.push(new ype(this,r))}),this.colorTraitsMap=new Map(this.colorTraits.map(r=>[r.trait,r]))}}class mpe{constructor(e,t){const{trait:r,name:i,iconSvg:s,cameraTarget:o={distance:3,height:1},cullingDistance:a,cullingLayer:l,collection:A,restrictedTraits:c=[],restrictedTypes:u=[]}=t;this.manifestData=e,this.isRequired=e.requiredTraits.indexOf(r)!==-1,this.trait=r,this.name=i,this.iconSvg=s,this.fullIconSvg=e.getTraitIconsDirectorySvg()+s,this.restrictedTraits=c,this.restrictedTypes=u,this.cameraTarget=o,this.cullingDistance=a,this.cullingLayer=l,this.collection=[],this.collectionMap=null,this.createCollection(A)}appendCollection(e,t){e.collection.forEach(r=>{const i=this.getTrait(r.id);if(i!=null)if(t){console.log(`Model with id ${r.id} exists and will be replaced with new one`),this.collectionMap.set(r.id,r);const s=this.collection.indexOf(i);this.collection[s]=r}else console.log(`Model with id ${r.id} exists, skipping`);else this.collection.push(r),this.collectionMap.set(r.id,r)})}addTraitRestriction(e){this.restrictedTraits.indexOf(e)==-1&&this.restrictedTraits.push(e)}createCollection(e,t=!1){t&&(this.collection=[]),Ot(e).forEach(r=>{this.collection.push(new LD(this,r))}),this.collectionMap=new Map(this.collection.map(r=>[r.id,r]))}getCustomTrait(e){return new LD(this,{directory:e,fullDirectory:e,id:"_custom",name:"Custom"})}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}getCollection(){return this.collection}}class vpe{constructor(e,t){const{trait:r,collection:i}=t;this.manifestData=e,this.trait=r,this.collection=[],this.collectionMap=null,this.createCollection(i)}appendCollection(e,t){e.collection.forEach(r=>{const i=this.getTrait(r.id);if(i!=null)if(t){console.log(`Texture with id ${r.id} exists and will be replaced with new one`),this.collectionMap.set(r.id,r);const s=this.collection.indexOf(i);this.collection[s]=r}else console.log(`Texture with id ${r.id} exists, skipping`);else this.collection.push(r),this.collectionMap.set(r.id,r)})}createCollection(e,t=!1){t&&(this.collection=[]),Ot(e).forEach(r=>{this.collection.push(new wpe(this,r))}),this.collectionMap=new Map(this.collection.map(r=>[r.id,r]))}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class ype{constructor(e,t){const{trait:r,collection:i}=t;this.manifestData=e,this.trait=r,this.collection=[],this.collectionMap=null,this.createCollection(i)}appendCollection(e,t){e.collection.forEach(r=>{const i=this.getTrait(r.id);if(i!=null)if(t){console.log(`Color with id ${r.id} exists and will be replaced with new one`),this.collectionMap.set(r.id,r);const s=this.collection.indexOf(i);this.collection[s]=r}else console.log(`Color with id ${r.id} exists, skipping`);else this.collection.push(r),this.collectionMap.set(r.id,r)})}createCollection(e,t=!1){t&&(this.collection=[]),Ot(e).forEach(r=>{this.collection.push(new Bpe(this,r))}),this.collectionMap=new Map(this.collection.map(r=>[r.id,r]))}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class LD{constructor(e,t){const{id:r,directory:i,name:s,thumbnail:o,cullingDistance:a,cullingLayer:l,type:A=[],textureCollection:c,colorCollection:u,fullDirectory:h,fullThumbnail:d}=t;if(this.manifestData=e.manifestData,this.traitGroup=e,this.id=r,this.directory=i,h)this.fullDirectory=h;else if(Array.isArray(i)){this.fullDirectory=[];for(let p=0;p<i.length;p++)this.fullDirectory[p]=e.manifestData.getTraitsDirectory()+i[p]}else this.fullDirectory=e.manifestData.getTraitsDirectory()+i;this.name=s,this.thumbnail=o,this.fullThumbnail=d||e.manifestData.getTraitsDirectory()+o,this.cullHiddenMeshes=a,this.cullingLayer=l,this.type=A,this.targetTextureCollection=c?e.manifestData.getTextureGroup(c):null,this.targetColorCollection=u?e.manifestData.getColorGroup(u):null,this.targetTextureCollection&&console.log(this.targetTextureCollection)}isRestricted(e){if(e==null)return!1;const t=e.traitGroup.trait;if(this.traitGroup.restrictedTraits.indexOf(t)!=-1)return!0;if(this.type.length>0&&this.manifestData.restrictedTypes>0){haveCommonValue=(i,s)=>{if(i==null||s==null)return!1;for(let o=0;o<i.length;o++)if(s.includes(i[o]))return!0;return!1};const r=this.manifestData.restrictedTypes;traitTypes=Ot(this.type),traitTypes.forEach(i=>haveCommonValue(r[i],traitTypes))}return!1}}class wpe{constructor(e,t){const{id:r,directory:i,fullDirectory:s,name:o,thumbnail:a}=t;if(this.traitGroup=e,this.id=r,this.directory=i,s)this.fullDirectory=s;else if(Array.isArray(i)){this.fullDirectory=[];for(let l=0;l<i.length;l++)this.fullDirectory[l]=e.manifestData.getTraitsDirectory()+i[l]}else this.fullDirectory=e.manifestData.getTraitsDirectory()+a;this.name=o,this.thumbnail=a,this.fullThumbnail=e.manifestData.getTraitsDirectory()+a}}class Bpe{constructor(e,t){const{id:r,value:i,name:s}=t;this.traitGroup=e,this.id=r,this.name=s,this.value=i}}class bI{constructor(e,t,r){this.traitModel=e,this.traitTexture=t,this.traitColor=r}}const xI=new ze,VD=new SG,nl=new j;class Cpe{constructor(e){this._start(e)}async _start(e){const{parentModel:t=null,renderCamera:r=null,manifestURL:i=null}=e;this.rootModel=new Lt,this.characterModel=new Lt,this.parentModel=t,t&&t.add(this.rootModel),this.lipSync=null,this.lookAtManager=null,this.animationManager=new bfe,this.screenshotManager=new Qfe(this,t||this.rootModel),this.blinkManager=new Mfe(.1,.1,.5,5),this.rootModel.add(this.characterModel),this.renderCamera=r,this.manifestData=null,this.manifest=null,i&&(this.loadManifest(i),this.animationManager.setScale(this.manifestData.displayScale)),this.avatar={},this.storedAvatar={},this.traitLoadManager=new bpe;const s=new kr;s.renderOrder=1e4,this.rootModel.add(s),this.vrmHelperRoot=s}update(){this.lookAtManager!=null&&this.lookAtManager.update()}addLookAtMouse(e,t,r,i=!0){var s;this.lookAtManager=new gpe(e,t,r),this.lookAtManager.enabled=!0;for(const o in this.avatar)((s=this.avatar[o])==null?void 0:s.vrm)!=null&&this.lookAtManager.addVRM(this.avatar[o].vrm)}toggleCharacterLookAtMouse(e){this.lookAtManager!=null?(this.lookAtManager.setActive(e),this.animationManager&&this.animationManager.enableMouseLook(e)):console.warn("toggleCharacterLookAtMouse() was called, but no lookAtManager exist. Make sure to set it up first with addLookArMous()")}savePortraitScreenshot(e,t,r,i=1,s=0){this.blinkManager.enableScreenshot(),this.characterModel.traverse(o=>{o.isSkinnedMesh&&o.skeleton.bones.filter(l=>l.name==="head")[0].getWorldPosition(nl)}),nl.z+=.3,nl.y+=s,this.screenshotManager.setCamera(nl,i),this.screenshotManager.saveScreenshot(e,t,r),this.blinkManager.disableScreenshot()}cameraRaycastCulling(e,t,r=!0){if(this.renderCamera==null){console.warn("No camera was set in character manager. Please call setRenderCamera(camera) before calling this function");return}const i=()=>{this.characterModel.traverse(A=>{A.isMesh&&A.userData.origIndexBuffer&&(A.userData.clippedIndexGeometry=A.geometry.index.clone(),A.geometry.setIndex(A.userData.origIndexBuffer))})},s=()=>{this.characterModel.traverse(A=>{A.isMesh&&A.userData.origIndexBuffer&&A.geometry.setIndex(A.userData.clippedIndexGeometry)})},o=(A,c)=>{for(let u=0;u<A.length;u+=3)if(c[0]==A[u]&&c[1]==A[u+1]&&c[2]==A[u+2])return u;return-1},a=(A,c)=>{var f,m;const u=A.object,h=A.face,d=[h.a,h.b,h.c],p=(m=(f=u.userData)==null?void 0:f.clippedIndexGeometry)==null?void 0:m.array;if(p!=null){const g=o(p,d),v=Array.from(p);if(g==-1&&!c){const w=[...v,...d];u.userData.clippedIndexGeometry=new ut(new Uint32Array(w),1,!1)}g!=1&&c&&(v.splice(g,3),u.userData.clippedIndexGeometry=new ut(new Uint32Array(v),1,!1))}};xI.x=e,xI.y=t,i(),VD.setFromCamera(xI,this.renderCamera);const l=VD.intersectObjects(this.characterModel.children);if(l.length>0){const A=l[0];a(A,r)}s()}removeCurrentCharacter(){const e=[];for(const t in this.avatar)e.push(new ww({traitGroupID:t,traitModel:null}));e.forEach(t=>{this._addLoadedData(t)}),this.avatar={}}removeCurrentManifest(){this.removeCurrentCharacter(),this.manifest=null,this.manifestData=null,this.animationManager&&this.animationManager.clearCurrentAnimations()}canDownload(){var e;return((e=this.manifestData)==null?void 0:e.canDownload)||!0}downloadVRM(e,t=null){return new Promise(async(r,i)=>{if(this.canDownload())try{t=t||{};const o={...this.manifestData.getExportOptions(),...t};o.isVrm0=!0,o.screenshot=this._getPortaitScreenshotTexture(!1,o),console.log(o),await spe(this.characterModel,this.avatar,e,o),r()}catch(s){console.error("Error downloading VRM:",s.message),i(new Error("Failed to download VRM."))}else{const s="Download not supported.";console.error(s),i(new Error(s))}})}downloadGLB(e,t=null){if(console.log("XXX fix glb downloader"),this.canDownload()){t=t||{};const r={...this.manifestData.getExportOptions(),...t};ape(this.characterModel,e,r)}else console.error("Download not supported")}getAvatarSelection(){var t;var e={};for(const r in this.avatar)e[r]={name:this.avatar[r].name,id:(t=this.avatar[r].traitInfo)==null?void 0:t.id};return e}getBoneTriangleCount(){let e=0,t=new Set;for(const r in this.avatar)this.avatar[r].model.traverse(i=>{i.isMesh&&(e+=i.geometry.index.array.length),i.isSkinnedMesh&&i.skeleton.bones.forEach(s=>{t.add(s.name)})});return{triangles:e/3,bones:t.size}}getGroupTraits(){if(this.manifestData)return this.manifestData.getGroupModelTraits()}getCurrentCharacterModel(){return this.characterModel}isTraitGroupRequired(e){const t=this.manifestData.getModelGroup(e);return!!(t!=null&&t.isRequired)}getTraits(e){return this.manifestData?this.manifestData.getModelTraits(e):(console.warn("No manifest file has been loaded, please load it before trait models."),null)}getCurrentTraitID(e){var t,r;return(r=(t=this.avatar[e])==null?void 0:t.traitInfo)==null?void 0:r.id}getCurrentTraitData(e){var t;return(t=this.avatar[e])==null?void 0:t.traitInfo}getCurrentTraitVRM(e){var t;return(t=this.avatar[e])==null?void 0:t.vrm}setParentModel(e){e.add(this.rootModel),this.parentModel=e,this.screenshotManager&&this.screenshotManager.setScene(this.parentModel)}setRenderCamera(e){this.renderCamera=e}loadRandomTraits(){return new Promise(async(e,t)=>{if(this.manifestData){const r=this.manifestData.getRandomTraits();await this._loadTraits(r),e()}else{const r="No manifest was loaded, random traits cannot be loaded.";console.error(r),t(new Error(r))}})}loadRandomTrait(e){return new Promise(async(t,r)=>{if(this.manifestData){const i=this.manifestData.getRandomTrait(e);await this._loadTraits(Ot(i)),t()}else{const i="No manifest was loaded, random traits cannot be loaded.";console.error(i),r(new Error(i))}})}loadTraitsFromNFT(e,t=!0,r=null){return new Promise(async(i,s)=>{try{if(this.manifestData){const o=this.manifestData.getNFTraitOptionsFromURL(e,r);await this._loadTraits(o,t),i()}else{const o="No manifest was loaded, NFT traits cannot be loaded.";console.error(o),s(new Error(o))}}catch(o){s(o)}})}loadTraitsFromNFTObject(e,t=!0,r=null){return new Promise(async(i,s)=>{if(this.manifestData)try{const o=this.manifestData.getNFTraitOptionsFromObject(e,r);await this._loadTraits(o,t),i()}catch(o){console.error("Error loading traits from NFT object:",o.message),s(new Error("Failed to load traits from NFT object."))}else{const o="No manifest was loaded, NFT traits cannot be loaded.";console.error(o),s(new Error(o))}})}loadInitialTraits(){return new Promise(async(e,t)=>{if(this.manifestData)await this._loadTraits(this.manifestData.getInitialTraits()),e();else{const r="No manifest was loaded, initial traits cannot be loaded.";console.error(r),t(new Error(r))}})}loadAllTraits(){return console.log("load all"),new Promise(async(e,t)=>{if(this.manifestData)await this._loadTraits(this.manifestData.getAllTraits()),e();else{const r="No manifest was loaded, initial traits cannot be loaded.";console.error(r),t(new Error(r))}})}loadTrait(e,t,r=!1){return new Promise(async(i,s)=>{if(this.manifestData)try{const o=this.manifestData.getTraitOption(e,t);o&&(await this._loadTraits(Ot(o),r),i())}catch(o){console.error("Error loading specific trait:",o.message),s(new Error("Failed to load specific trait."))}else{const o="No manifest was loaded, specific trait cannot be loaded.";console.error(o),s(new Error(o))}})}loadCustomTrait(e,t){return new Promise(async(r,i)=>{if(this.manifestData)try{const s=this.manifestData.getCustomTraitOption(e,t);s&&(await this._loadTraits(Ot(s)),r())}catch(s){console.error("Error loading custom trait:",s.message),i(new Error("Failed to load custom trait."))}else{const s="No manifest was loaded, custom trait cannot be loaded.";console.error(s),i(new Error(s))}})}loadCustomTexture(e,t){return new Promise(async(r,i)=>{var o;const s=(o=this.avatar[e])==null?void 0:o.model;if(s)await afe(s,t),r();else{const a="No Group Trait with name "+e+" was found.";console.warn(a),i(new Error(a))}})}setTraitColor(e,t){var i;const r=(i=this.avatar[e])==null?void 0:i.model;if(r)try{const s=new Ve(t);r.traverse(o=>{o.isMesh&&(o.material.type==="MeshStandardMaterial"?Array.isArray(o.material)?o.material.forEach(a=>{a.color=s}):o.material.color=s:(o.material[0].uniforms.litFactor.value=s,o.material[0].uniforms.shadeColorFactor.value=new Ve(s.r*.8,s.g*.8,s.b*.8)))})}catch(s){throw console.error("Error setting trait color:",s.message),new Error("Failed to set trait color.")}else{const s="No Group Trait with name "+e+" was found.";throw console.warn(s),new Error(s)}}removeTrait(e,t=!1){if(this.isTraitGroupRequired(e)&&!t){console.warn(`No trait with name: ${e} is not removable.`);return}if(this.manifestData.getModelGroup(e)){const i=new ww({traitGroupID:e,traitModel:null});this._addLoadedData(i),mI(this.avatar)}else console.warn(`No trait with name: ${e} was found.`)}updateCullHiddenMeshes(){mI(this.avatar)}loadOptimizerManifest(){this.manifest={colliderTraits:["CUSTOM"],traits:[{name:"Custom",trait:"CUSTOM",collection:[]}]},this.manifestData=new CI(this.manifest)}getCurrentOptimizerCharacterModel(){var e;return(e=this.avatar.CUSTOM)==null?void 0:e.vrm}loadOptimizerCharacter(e){return this.loadCustomTrait("CUSTOM",e)}setManifest(e){return this.removeCurrentCharacter(),new Promise(async(t,r)=>{try{if(this.manifest=e,this.manifest){if(this.manifestData=new CI(this.manifest),this.animationManager)try{await this._animationManagerSetup(this.manifest.animationPath,this.manifest.assetsLocation,this.manifestData.displayScale)}catch(i){console.error("Error loading animations: "+i)}t()}else{const i="Failed to fetch or parse the manifest.";console.error(i),r(new Error(i))}}catch(i){console.error("Error setting manifest:",i.message),r(new Error("Failed to set the manifest."))}})}appendManifest(e,t){return new Promise(async(r,i)=>{try{t?this.manifest={...this.manifest||{},manifest:e}:this.manifest={manifest:e,...this.manifest||{}};const s=new CI(e);this.manifestData.appendManifestData(s),r()}catch(s){console.error("Error setting manifest:",s.message),i(new Error("Failed to set the manifest."))}})}loadManifest(e){return new Promise(async(t,r)=>{try{const i=await this._fetchManifest(e);this.setManifest(i).then(()=>{t()})}catch(i){console.error("Error loading manifest:",i.message),r(new Error("Failed to load the manifest."))}})}loadAppendManifest(e,t){return new Promise(async(r,i)=>{try{const s=await this._fetchManifest(e);this.appendManifest(s,t).then(()=>{r()})}catch(s){console.error("Error loading manifest:",s.message),i(new Error("Failed to load the manifest."))}})}async soloTargetGroupTrait(e){const t=Ot(e),r=[];for(const i in this.avatar)t.includes(i)&&r.push(this.manifestData.getTraitOption(i,this.avatar[i].traitInfo.id));await this._loadTraits(r,!0)}storeCurrentAvatar(){this.storedAvatar={...this.avatar}}async loadStoredAvatar(){const e=[];for(const t in this.storedAvatar)e.push(this.manifestData.getTraitOption(t,this.storedAvatar[t].traitInfo.id));console.log(e),this._loadTraits(e,!0)}async _loadTraits(e,t=!1){console.log("laoded traits:",e),await this.traitLoadManager.loadTraitOptions(Ot(e)).then(r=>{t&&this.getGroupTraits().forEach(s=>{r.some(a=>{var l;return((l=a.traitModel)==null?void 0:l.traitGroup.trait)===s.trait})||this.avatar[s.trait]!=null&&r.push(new ww({traitGroupID:s.trait,traitModel:null}))}),r.forEach(i=>{this._addLoadedData(i)}),mI(this.avatar)})}async _animationManagerSetup(e,t,r){const i=Ot(e);this.animationManager&&(this.animationManager.setScale(r),e.length>0&&(this.animationManager.storeAnimationPaths(i,t||""),await this.animationManager.loadAnimation(i,!1,0,i[0].endsWith(".fbx"),t||"")))}async _fetchManifest(e){return await(await fetch(e)).json()}_getPortaitScreenshotTexture(e,t){this.blinkManager.enableScreenshot(),this.characterModel.traverse(u=>{u.isSkinnedMesh&&u.skeleton.bones.filter(d=>d.name==="head")[0].getWorldPosition(nl)});const{screenshotResolution:r,screenshotFaceDistance:i,screenshotFaceOffset:s,screenshotBackground:o,screenshotFOV:a}=t,l=r[0],A=r[1];nl.x+=s[0],nl.y+=s[1],nl.z+=s[2],this.screenshotManager.setBackground(o),this.screenshotManager.setCamera(nl,i,a);const c=e?this.screenshotManager.getScreenshotBlob(l,A):this.screenshotManager.getScreenshotTexture(l,A);return this.blinkManager.disableScreenshot(),c}_setupWireframeMaterial(e){e.origMat=e.material;const t=()=>{const o=.1+Math.random()*.9,a=.1+Math.random()*(1-.1),l=.1+Math.random()*(1-.1);return new Ve(o,a,l)},r=new Ri({color:t(),wireframe:!0,wireframeLinewidth:.2}),i=e.material;e.setDebugMode=s=>{s?e.material.length?(e.material[0]=r,e.material[1]=r):e.material=r:e.material=i}}_VRMBaseSetup(e,t,r,i,s){var a,l;let o=e.userData.vrm;return e.userData.vrm==null?(console.error("No valid VRM was provided for "+r+" trait, skipping file."),null):(FD(o,{isVRM0:((a=o.meta)==null?void 0:a.metaVersion)==="0"}),this.manifestData.isColliderRequired(r)&&hpe(e),pfe(o),this.manifestData.isLipsyncTrait(r)&&(this.lipSync=new KB(o)),this._modelBaseSetup(o,t,r,i,s),((l=o.meta)==null?void 0:l.metaVersion)==="0"&&(Kf.rotateVRM0(o),console.log("Loaded VRM0 file ",o),o.scene.traverse(A=>{if(A.isSkinnedMesh){for(let c=0;c<A.skeleton.bones.length;c++)A.skeleton.bones[c].userData.vrm0RestPosition={...A.skeleton.bones[c].position};A.userData.isVRM0=!0}})),o)}_modelBaseSetup(e,t,r,i,s){const o=[],a=Ot(t.cullingIgnore),l=[];t.meshTargets&&Ot(t.meshTargets).map(u=>{const h=e.scene.getObjectByName(u);h!=null&&h.isMesh&&o.push(h)}),e.scene.traverse(u=>{!t.meshTargets&&u.isMesh&&o.push(u),u.frustumCulled=!1,u.isMesh&&(this._setupWireframeMaterial(u),a.indexOf(u.name)===-1&&l.push(u))});const A=this.manifest,c=this.manifestData.getModelGroup(r);FD(e,{cullingLayer:t.cullingLayer!=null?t.cullingLayer:c.cullingLayer!=null?c.cullingLayer:A.defaultCullingLayer!=null?A.defaultCullingLayer:-1,cullingDistance:t.cullingDistance!=null?t.cullingDistance:c.cullingDistance!=null?c.cullingDistance:A.defaultCullingDistance!=null?A.defaultCullingDistance:null,maxCullingDistance:t.maxCullingDistance!=null?t.maxCullingDistance:c.maxCullingDistance!=null?c.maxCullingDistance:A.maxCullingDistance!=null?A.maxCullingDistance:1/0,cullingMeshes:l}),o.map((u,h)=>{if(i){const d=i[h]||i[0];d!=null&&(u.material.type==="MeshStandardMaterial"?Array.isArray(u.material)?u.material.forEach(p=>{p.map=d}):u.material.map=d:console.warn("XXX set material texture to shader material",u.material))}if(s){const d=s[h]||s[0];d!=null&&(u.material[0].uniforms.litFactor.value=d,u.material[0].uniforms.shadeColorFactor.value=new Ve(d.r*.8,d.g*.8,d.b*.8))}})}_applyManagers(e){this.blinkManager.addVRM(e),this.lookAtManager&&this.lookAtManager.addVRM(e),this.animationManager&&this.animationManager.addVRM(e)}_displayModel(e){if(e){const t=e.scene;this.characterModel.attach(t)}}_positionModel(e){const t=this.manifestData.displayScale;e.scene.scale.set(t,t,t)}_disposeTrait(e){this.blinkManager.removeVRM(e),this.lookAtManager&&this.lookAtManager.removeVRM(e),this.animationManager&&this.animationManager.removeVRM(e),ffe(e)}_addLoadedData(e){const{traitGroupID:t,traitModel:r,textureTrait:i,colorTrait:s,models:o,textures:a,colors:l}=e;if(r==null){this.avatar[t]&&this.avatar[t].vrm&&(this._disposeTrait(this.avatar[t].vrm),this.avatar[t]={});return}let A=null;o.map(c=>{c!=null&&(A=this._VRMBaseSetup(c,r,t,a,l))}),A!=null&&(this.avatar[t]&&this.avatar[t].vrm&&this._disposeTrait(this.avatar[t].vrm),this._positionModel(A),this._displayModel(A),this._applyManagers(A),console.log(this.characterModel),this.avatar[t]={traitInfo:r,textureInfo:i,colorInfo:s,name:r.name,model:A&&A.scene,vrm:A})}}class bpe{constructor(){const e=new xG;e.onProgress=(i,s,o)=>{this.setLoadPercentage(Math.round(s/o*100))};const t=new SU(e);t.crossOrigin="anonymous",t.register(i=>new Ode(i,{autoUpdateHumanBones:!0}));const r=new Vu(e);this.loadPercentager=0,this.loadingManager=e,this.gltfLoader=t,this.textureLoader=r,this.isLoading=!1}setLoadPercentage(e){this.loadPercentager=e}loadTraitOptions(e){return new Promise(t=>{this.isLoading=!0;const r=[],i=e.map(async(s,o)=>{var c,u,h;if(s==null){r[o]=null;return}const a=await Promise.all(Ot((c=s==null?void 0:s.traitModel)==null?void 0:c.fullDirectory).map(async d=>{try{return await this.gltfLoader.loadAsync(d)}catch(p){return console.error(`Error loading modelsss ${d}:`,p),null}})),l=await Promise.all(Ot((u=s==null?void 0:s.traitTexture)==null?void 0:u.fullDirectory).map(d=>new Promise(p=>{this.textureLoader.load(d,f=>{f.flipY=!1,f.encoding=gt,p(f)},null,f=>{console.error("error loading texture: ",f),p(null)})}))),A=Ot((h=s==null?void 0:s.traitColor)==null?void 0:h.value).map(d=>new Ve(d));r[o]=new ww({traitGroupID:s==null?void 0:s.traitModel.traitGroup.trait,traitModel:s==null?void 0:s.traitModel,textureTrait:s==null?void 0:s.traitTexture,colorTrait:s==null?void 0:s.traitColor,models:a,textures:l,colors:A})});Promise.allSettled(i).then(()=>{this.setLoadPercentage(100),t(r),this.isLoading=!1}).catch(s=>{this.setLoadPercentage(100),console.error("An error occurred:",s),t(r),this.isLoading=!1})})}}class ww{constructor(e){const{traitGroupID:t,traitModel:r,textureTrait:i,colorTrait:s,models:o,textures:a,colors:l}=e;this.traitGroupID=t,this.traitModel=r,this.textureTrait=i,this.colorTrait=s,this.models=o,this.textures=a,this.colors=l}}function xpe(n){const e=new CB,t=new _G(16777215,.5);e.add(t);const r=new FU(16777215,.5);r.position.set(0,1,1),e.add(r);const i=new Lt;e.add(i);const s=new Nr(30,window.innerWidth/window.innerHeight,.1,1e3);s.position.set(0,1.3,2);const o=new Cpe({parentModel:e,createAnimationManager:!0,renderCamera:s});o.addLookAtMouse(80,n,s,!0);const a=document.getElementById(n),l=new h0({canvas:a,antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),A=new Uie(s,l.domElement);A.minDistance=1,A.maxDistance=4,A.maxPolarAngle=Math.PI/2,A.enablePan=!0,A.target=new j(0,1,0),A.enableDamping=!0,A.dampingFactor=.1;const c=new j(-.5,0,-.5),u=new j(.5,1.5,.5),h=()=>{l.setSize(window.innerWidth,window.innerHeight),s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix()};window.addEventListener("resize",h),l.setSize(window.innerWidth,window.innerHeight),l.setPixelRatio(window.devicePixelRatio),l.outputEncoding=gt;const d=()=>{requestAnimationFrame(d),A.target.clamp(c,u),A==null||A.update(),o.update(),l.render(e,s)};d();const p=m=>{const g=m.ctrlKey,v=a.getBoundingClientRect(),w=(m.clientX-v.left)/v.width*2-1,B=-((m.clientY-v.top)/v.height)*2+1;o.cameraRaycastCulling(w,B,g)};async function f(){const m="./3d/Platform.glb",v=await new SU().loadAsync(m);i.add(v.scene)}return f(),a.addEventListener("click",p),{scene:e,camera:s,controls:A,characterManager:o,sceneElements:i}}function wy(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var eH={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,s){function o(A,c){if(!i[A]){if(!r[A]){var u=typeof wy=="function"&&wy;if(!c&&u)return u(A,!0);if(a)return a(A,!0);var h=new Error("Cannot find module '"+A+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[A]={exports:{}};r[A][0].call(d.exports,function(p){var f=r[A][1][p];return o(f||p)},d,d.exports,t,r,i,s)}return i[A].exports}for(var a=typeof wy=="function"&&wy,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,r,i){var s=t("./utils"),o=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var A,c,u,h,d,p,f,m=[],g=0,v=l.length,w=v,B=s.getTypeOf(l)!=="string";g<l.length;)w=v-g,u=B?(A=l[g++],c=g<v?l[g++]:0,g<v?l[g++]:0):(A=l.charCodeAt(g++),c=g<v?l.charCodeAt(g++):0,g<v?l.charCodeAt(g++):0),h=A>>2,d=(3&A)<<4|c>>4,p=1<w?(15&c)<<2|u>>6:64,f=2<w?63&u:64,m.push(a.charAt(h)+a.charAt(d)+a.charAt(p)+a.charAt(f));return m.join("")},i.decode=function(l){var A,c,u,h,d,p,f=0,m=0,g="data:";if(l.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var v,w=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&w--,l.charAt(l.length-2)===a.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|w):new Array(0|w);f<l.length;)A=a.indexOf(l.charAt(f++))<<2|(h=a.indexOf(l.charAt(f++)))>>4,c=(15&h)<<4|(d=a.indexOf(l.charAt(f++)))>>2,u=(3&d)<<6|(p=a.indexOf(l.charAt(f++))),v[m++]=A,d!==64&&(v[m++]=c),p!==64&&(v[m++]=u);return v}},{"./support":30,"./utils":32}],2:[function(t,r,i){var s=t("./external"),o=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function A(c,u,h,d,p){this.compressedSize=c,this.uncompressedSize=u,this.crc32=h,this.compression=d,this.compressedContent=p}A.prototype={getContentWorker:function(){var c=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),u=this;return c.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},A.createWorkerFrom=function(c,u,h){return c.pipe(new a).pipe(new l("uncompressedSize")).pipe(u.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",u)},r.exports=A},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var s=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var s=t("./utils"),o=function(){for(var a,l=[],A=0;A<256;A++){a=A;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;l[A]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(A,c,u,h){var d=o,p=h+u;A^=-1;for(var f=h;f<p;f++)A=A>>>8^d[255&(A^c[f])];return-1^A}(0|l,a,a.length,0):function(A,c,u,h){var d=o,p=h+u;A^=-1;for(var f=h;f<p;f++)A=A>>>8^d[255&(A^c.charCodeAt(f))];return-1^A}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var s=null;s=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:s}},{lie:37}],7:[function(t,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),a=t("./utils"),l=t("./stream/GenericWorker"),A=s?"uint8array":"array";function c(u,h){l.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=h,this.meta={}}i.magic="\b\0",a.inherits(c,l),c.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(A,u.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(h){u.push({data:h,meta:u.meta})}},i.compressWorker=function(u){return new c("Deflate",u)},i.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){function s(d,p){var f,m="";for(f=0;f<p;f++)m+=String.fromCharCode(255&d),d>>>=8;return m}function o(d,p,f,m,g,v){var w,B,C=d.file,b=d.compression,F=v!==A.utf8encode,x=a.transformTo("string",v(C.name)),E=a.transformTo("string",A.utf8encode(C.name)),M=C.comment,H=a.transformTo("string",v(M)),O=a.transformTo("string",A.utf8encode(M)),U=E.length!==C.name.length,y=O.length!==M.length,I="",R="",D="",k=C.dir,V=C.date,Z={crc32:0,compressedSize:0,uncompressedSize:0};p&&!f||(Z.crc32=d.crc32,Z.compressedSize=d.compressedSize,Z.uncompressedSize=d.uncompressedSize);var N=0;p&&(N|=8),F||!U&&!y||(N|=2048);var _=0,z=0;k&&(_|=16),g==="UNIX"?(z=798,_|=function(T,q){var ge=T;return T||(ge=q?16893:33204),(65535&ge)<<16}(C.unixPermissions,k)):(z=20,_|=function(T){return 63&(T||0)}(C.dosPermissions)),w=V.getUTCHours(),w<<=6,w|=V.getUTCMinutes(),w<<=5,w|=V.getUTCSeconds()/2,B=V.getUTCFullYear()-1980,B<<=4,B|=V.getUTCMonth()+1,B<<=5,B|=V.getUTCDate(),U&&(R=s(1,1)+s(c(x),4)+E,I+="up"+s(R.length,2)+R),y&&(D=s(1,1)+s(c(H),4)+O,I+="uc"+s(D.length,2)+D);var ie="";return ie+=`
\0`,ie+=s(N,2),ie+=b.magic,ie+=s(w,2),ie+=s(B,2),ie+=s(Z.crc32,4),ie+=s(Z.compressedSize,4),ie+=s(Z.uncompressedSize,4),ie+=s(x.length,2),ie+=s(I.length,2),{fileRecord:u.LOCAL_FILE_HEADER+ie+x+I,dirRecord:u.CENTRAL_FILE_HEADER+s(z,2)+ie+s(H.length,2)+"\0\0\0\0"+s(_,4)+s(m,4)+x+I+H}}var a=t("../utils"),l=t("../stream/GenericWorker"),A=t("../utf8"),c=t("../crc32"),u=t("../signature");function h(d,p,f,m){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=f,this.encodeFileName=m,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,l),h.prototype.push=function(d){var p=d.meta.percent||0,f=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,l.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:f?(p+100*(f-m-1))/f:100}}))},h.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var p=this.streamFiles&&!d.file.dir;if(p){var f=o(d,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(d){this.accumulate=!1;var p=this.streamFiles&&!d.file.dir,f=o(d,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),p)this.push({data:function(m){return u.DATA_DESCRIPTOR+s(m.crc32,4)+s(m.compressedSize,4)+s(m.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var d=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var f=this.bytesWritten-d,m=function(g,v,w,B,C){var b=a.transformTo("string",C(B));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(g,2)+s(g,2)+s(v,4)+s(w,4)+s(b.length,2)+b}(this.dirRecords.length,f,d,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(d){this._sources.push(d);var p=this;return d.on("data",function(f){p.processChunk(f)}),d.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),d.on("error",function(f){p.error(f)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(d){var p=this._sources;if(!l.prototype.error.call(this,d))return!1;for(var f=0;f<p.length;f++)try{p[f].error(d)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var d=this._sources,p=0;p<d.length;p++)d[p].lock()},r.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var s=t("../compressions"),o=t("./ZipFileWorker");i.generateWorker=function(a,l,A){var c=new o(l.streamFiles,A,l.platform,l.encodeFileName),u=0;try{a.forEach(function(h,d){u++;var p=function(v,w){var B=v||w,C=s[B];if(!C)throw new Error(B+" is not a valid compression method !");return C}(d.options.compression,l.compression),f=d.options.compressionOptions||l.compressionOptions||{},m=d.dir,g=d.date;d._compressWorker(p,f).withStreamInfo("file",{name:h,dir:m,date:g,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(c)}),c.entriesCount=u}catch(h){c.error(h)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=t("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var s=t("./utils"),o=t("./external"),a=t("./utf8"),l=t("./zipEntries"),A=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function u(h){return new o.Promise(function(d,p){var f=h.decompressed.getContentWorker().pipe(new A);f.on("error",function(m){p(m)}).on("end",function(){f.streamInfo.crc32!==h.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}r.exports=function(h,d){var p=this;return d=s.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,d.optimizedBinaryString,d.base64).then(function(f){var m=new l(d);return m.load(f),m}).then(function(f){var m=[o.Promise.resolve(f)],g=f.files;if(d.checkCRC32)for(var v=0;v<g.length;v++)m.push(u(g[v]));return o.Promise.all(m)}).then(function(f){for(var m=f.shift(),g=m.files,v=0;v<g.length;v++){var w=g[v],B=w.fileNameStr,C=s.resolve(w.fileNameStr);p.file(C,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:d.createFolders}),w.dir||(p.file(C).unsafeOriginalName=B)}return m.zipComment.length&&(p.comment=m.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var s=t("../utils"),o=t("../stream/GenericWorker");function a(l,A){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(A)}s.inherits(a,o),a.prototype._bindStream=function(l){var A=this;(this._stream=l).pause(),l.on("data",function(c){A.push({data:c,meta:{percent:0}})}).on("error",function(c){A.isPaused?this.generatedError=c:A.error(c)}).on("end",function(){A.isPaused?A._upstreamEnded=!0:A.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var s=t("readable-stream").Readable;function o(a,l,A){s.call(this,l),this._helper=a;var c=this;a.on("data",function(u,h){c.push(u)||c._helper.pause(),A&&A(h)}).on("error",function(u){c.emit("error",u)}).on("end",function(){c.push(null)})}t("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,r,i){function s(C,b,F){var x,E=a.getTypeOf(b),M=a.extend(F||{},c);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(C=g(C)),M.createFolders&&(x=m(C))&&v.call(this,x,!0);var H=E==="string"&&M.binary===!1&&M.base64===!1;F&&F.binary!==void 0||(M.binary=!H),(b instanceof u&&b.uncompressedSize===0||M.dir||!b||b.length===0)&&(M.base64=!1,M.binary=!0,b="",M.compression="STORE",E="string");var O=null;O=b instanceof u||b instanceof l?b:p.isNode&&p.isStream(b)?new f(C,b):a.prepareContent(C,b,M.binary,M.optimizedBinaryString,M.base64);var U=new h(C,O,M);this.files[C]=U}var o=t("./utf8"),a=t("./utils"),l=t("./stream/GenericWorker"),A=t("./stream/StreamHelper"),c=t("./defaults"),u=t("./compressedObject"),h=t("./zipObject"),d=t("./generate"),p=t("./nodejsUtils"),f=t("./nodejs/NodejsStreamInputAdapter"),m=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var b=C.lastIndexOf("/");return 0<b?C.substring(0,b):""},g=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},v=function(C,b){return b=b!==void 0?b:c.createFolders,C=g(C),this.files[C]||s.call(this,C,null,{dir:!0,createFolders:b}),this.files[C]};function w(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var B={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var b,F,x;for(b in this.files)x=this.files[b],(F=b.slice(this.root.length,b.length))&&b.slice(0,this.root.length)===this.root&&C(F,x)},filter:function(C){var b=[];return this.forEach(function(F,x){C(F,x)&&b.push(x)}),b},file:function(C,b,F){if(arguments.length!==1)return C=this.root+C,s.call(this,C,b,F),this;if(w(C)){var x=C;return this.filter(function(M,H){return!H.dir&&x.test(M)})}var E=this.files[this.root+C];return E&&!E.dir?E:null},folder:function(C){if(!C)return this;if(w(C))return this.filter(function(E,M){return M.dir&&C.test(E)});var b=this.root+C,F=v.call(this,b),x=this.clone();return x.root=F.name,x},remove:function(C){C=this.root+C;var b=this.files[C];if(b||(C.slice(-1)!=="/"&&(C+="/"),b=this.files[C]),b&&!b.dir)delete this.files[C];else for(var F=this.filter(function(E,M){return M.name.slice(0,C.length)===C}),x=0;x<F.length;x++)delete this.files[F[x].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var b,F={};try{if((F=a.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=F.type.toLowerCase(),F.compression=F.compression.toUpperCase(),F.type==="binarystring"&&(F.type="string"),!F.type)throw new Error("No output type specified.");a.checkSupport(F.type),F.platform!=="darwin"&&F.platform!=="freebsd"&&F.platform!=="linux"&&F.platform!=="sunos"||(F.platform="UNIX"),F.platform==="win32"&&(F.platform="DOS");var x=F.comment||this.comment||"";b=d.generateWorker(this,F,x)}catch(E){(b=new l("error")).error(E)}return new A(b,F.type||"string",F.mimeType)},generateAsync:function(C,b){return this.generateInternalStream(C).accumulate(b)},generateNodeStream:function(C,b){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(b)}};r.exports=B},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var s=t("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}t("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),A=a.charCodeAt(1),c=a.charCodeAt(2),u=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===A&&this.data[h+2]===c&&this.data[h+3]===u)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),A=a.charCodeAt(1),c=a.charCodeAt(2),u=a.charCodeAt(3),h=this.readData(4);return l===h[0]&&A===h[1]&&c===h[2]&&u===h[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var s=t("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,A=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)A=(A<<8)+this.byteAt(l);return this.index+=a,A},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(t,r,i){var s=t("./Uint8ArrayReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var s=t("./DataReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var s=t("./ArrayReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var s=t("../utils"),o=t("../support"),a=t("./ArrayReader"),l=t("./StringReader"),A=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");r.exports=function(u){var h=s.getTypeOf(u);return s.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new A(u):o.uint8array?new c(s.transformTo("uint8array",u)):new a(s.transformTo("array",u)):new l(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var s=t("./GenericWorker"),o=t("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var s=t("./GenericWorker"),o=t("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var s=t("../utils"),o=t("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var A=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=A+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var s=t("../utils"),o=t("./GenericWorker");function a(l){o.call(this,"DataWorker");var A=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){A.dataIsReady=!0,A.data=c,A.max=c&&c.length||0,A.type=s.getTypeOf(c),A.isPaused||A._tickAndRepeat()},function(c){A.error(c)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,A=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,A);break;case"uint8array":l=this.data.subarray(this.index,A);break;case"array":case"nodebuffer":l=this.data.slice(this.index,A)}return this.index=A,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(t,r,i){var s=t("../utils"),o=t("./ConvertWorker"),a=t("./GenericWorker"),l=t("../base64"),A=t("../support"),c=t("../external"),u=null;if(A.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(p,f){return new c.Promise(function(m,g){var v=[],w=p._internalType,B=p._outputType,C=p._mimeType;p.on("data",function(b,F){v.push(b),f&&f(F)}).on("error",function(b){v=[],g(b)}).on("end",function(){try{var b=function(F,x,E){switch(F){case"blob":return s.newBlob(s.transformTo("arraybuffer",x),E);case"base64":return l.encode(x);default:return s.transformTo(F,x)}}(B,function(F,x){var E,M=0,H=null,O=0;for(E=0;E<x.length;E++)O+=x[E].length;switch(F){case"string":return x.join("");case"array":return Array.prototype.concat.apply([],x);case"uint8array":for(H=new Uint8Array(O),E=0;E<x.length;E++)H.set(x[E],M),M+=x[E].length;return H;case"nodebuffer":return Buffer.concat(x);default:throw new Error("concat : unsupported type '"+F+"'")}}(w,v),C);m(b)}catch(F){g(F)}v=[]}).resume()})}function d(p,f,m){var g=f;switch(f){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=f,this._mimeType=m,s.checkSupport(g),this._worker=p.pipe(new o(g)),p.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}d.prototype={accumulate:function(p){return h(this,p)},on:function(p,f){var m=this;return p==="data"?this._worker.on(p,function(g){f.call(m,g.data,g.meta)}):this._worker.on(p,function(){s.delay(f,arguments,m)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},p)}},r.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var s=t("./utils"),o=t("./support"),a=t("./nodejsUtils"),l=t("./stream/GenericWorker"),A=new Array(256),c=0;c<256;c++)A[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;A[254]=A[254]=1;function u(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}i.utf8encode=function(d){return o.nodebuffer?a.newBufferFrom(d,"utf-8"):function(p){var f,m,g,v,w,B=p.length,C=0;for(v=0;v<B;v++)(64512&(m=p.charCodeAt(v)))==55296&&v+1<B&&(64512&(g=p.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),v++),C+=m<128?1:m<2048?2:m<65536?3:4;for(f=o.uint8array?new Uint8Array(C):new Array(C),v=w=0;w<C;v++)(64512&(m=p.charCodeAt(v)))==55296&&v+1<B&&(64512&(g=p.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),v++),m<128?f[w++]=m:(m<2048?f[w++]=192|m>>>6:(m<65536?f[w++]=224|m>>>12:(f[w++]=240|m>>>18,f[w++]=128|m>>>12&63),f[w++]=128|m>>>6&63),f[w++]=128|63&m);return f}(d)},i.utf8decode=function(d){return o.nodebuffer?s.transformTo("nodebuffer",d).toString("utf-8"):function(p){var f,m,g,v,w=p.length,B=new Array(2*w);for(f=m=0;f<w;)if((g=p[f++])<128)B[m++]=g;else if(4<(v=A[g]))B[m++]=65533,f+=v-1;else{for(g&=v===2?31:v===3?15:7;1<v&&f<w;)g=g<<6|63&p[f++],v--;1<v?B[m++]=65533:g<65536?B[m++]=g:(g-=65536,B[m++]=55296|g>>10&1023,B[m++]=56320|1023&g)}return B.length!==m&&(B.subarray?B=B.subarray(0,m):B.length=m),s.applyFromCharCode(B)}(d=s.transformTo(o.uint8array?"uint8array":"array",d))},s.inherits(u,l),u.prototype.processChunk=function(d){var p=s.transformTo(o.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var f=p;(p=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),p.set(f,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var m=function(v,w){var B;for((w=w||v.length)>v.length&&(w=v.length),B=w-1;0<=B&&(192&v[B])==128;)B--;return B<0||B===0?w:B+A[v[B]]>w?B:w}(p),g=p;m!==p.length&&(o.uint8array?(g=p.subarray(0,m),this.leftOver=p.subarray(m,p.length)):(g=p.slice(0,m),this.leftOver=p.slice(m,p.length))),this.push({data:i.utf8decode(g),meta:d.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=u,s.inherits(h,l),h.prototype.processChunk=function(d){this.push({data:i.utf8encode(d.data),meta:d.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var s=t("./support"),o=t("./base64"),a=t("./nodejsUtils"),l=t("./external");function A(f){return f}function c(f,m){for(var g=0;g<f.length;++g)m[g]=255&f.charCodeAt(g);return m}t("setimmediate"),i.newBlob=function(f,m){i.checkSupport("blob");try{return new Blob([f],{type:m})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(f),g.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(f,m,g){var v=[],w=0,B=f.length;if(B<=g)return String.fromCharCode.apply(null,f);for(;w<B;)m==="array"||m==="nodebuffer"?v.push(String.fromCharCode.apply(null,f.slice(w,Math.min(w+g,B)))):v.push(String.fromCharCode.apply(null,f.subarray(w,Math.min(w+g,B)))),w+=g;return v.join("")},stringifyByChar:function(f){for(var m="",g=0;g<f.length;g++)m+=String.fromCharCode(f[g]);return m},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function h(f){var m=65536,g=i.getTypeOf(f),v=!0;if(g==="uint8array"?v=u.applyCanBeUsed.uint8array:g==="nodebuffer"&&(v=u.applyCanBeUsed.nodebuffer),v)for(;1<m;)try{return u.stringifyByChunk(f,g,m)}catch{m=Math.floor(m/2)}return u.stringifyByChar(f)}function d(f,m){for(var g=0;g<f.length;g++)m[g]=f[g];return m}i.applyFromCharCode=h;var p={};p.string={string:A,array:function(f){return c(f,new Array(f.length))},arraybuffer:function(f){return p.string.uint8array(f).buffer},uint8array:function(f){return c(f,new Uint8Array(f.length))},nodebuffer:function(f){return c(f,a.allocBuffer(f.length))}},p.array={string:h,array:A,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return a.newBufferFrom(f)}},p.arraybuffer={string:function(f){return h(new Uint8Array(f))},array:function(f){return d(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:A,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return a.newBufferFrom(new Uint8Array(f))}},p.uint8array={string:h,array:function(f){return d(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:A,nodebuffer:function(f){return a.newBufferFrom(f)}},p.nodebuffer={string:h,array:function(f){return d(f,new Array(f.length))},arraybuffer:function(f){return p.nodebuffer.uint8array(f).buffer},uint8array:function(f){return d(f,new Uint8Array(f.length))},nodebuffer:A},i.transformTo=function(f,m){if(m=m||"",!f)return m;i.checkSupport(f);var g=i.getTypeOf(m);return p[g][f](m)},i.resolve=function(f){for(var m=f.split("/"),g=[],v=0;v<m.length;v++){var w=m[v];w==="."||w===""&&v!==0&&v!==m.length-1||(w===".."?g.pop():g.push(w))}return g.join("/")},i.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(f)?"nodebuffer":s.uint8array&&f instanceof Uint8Array?"uint8array":s.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(f){if(!s[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(f){var m,g,v="";for(g=0;g<(f||"").length;g++)v+="\\x"+((m=f.charCodeAt(g))<16?"0":"")+m.toString(16).toUpperCase();return v},i.delay=function(f,m,g){setImmediate(function(){f.apply(g||null,m||[])})},i.inherits=function(f,m){function g(){}g.prototype=m.prototype,f.prototype=new g},i.extend=function(){var f,m,g={};for(f=0;f<arguments.length;f++)for(m in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],m)&&g[m]===void 0&&(g[m]=arguments[f][m]);return g},i.prepareContent=function(f,m,g,v,w){return l.Promise.resolve(m).then(function(B){return s.blob&&(B instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(B))!==-1)&&typeof FileReader<"u"?new l.Promise(function(C,b){var F=new FileReader;F.onload=function(x){C(x.target.result)},F.onerror=function(x){b(x.target.error)},F.readAsArrayBuffer(B)}):B}).then(function(B){var C=i.getTypeOf(B);return C?(C==="arraybuffer"?B=i.transformTo("uint8array",B):C==="string"&&(w?B=o.decode(B):g&&v!==!0&&(B=function(b){return c(b,s.uint8array?new Uint8Array(b.length):new Array(b.length))}(B))),B):l.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var s=t("./reader/readerFor"),o=t("./utils"),a=t("./signature"),l=t("./zipEntry"),A=t("./support");function c(u){this.files=[],this.loadOptions=u}c.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(u)+")")}},isSignature:function(u,h){var d=this.reader.index;this.reader.setIndex(u);var p=this.reader.readString(4)===h;return this.reader.setIndex(d),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),h=A.uint8array?"uint8array":"array",d=o.transformTo(h,u);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,h,d,p=this.zip64EndOfCentralSize-44;0<p;)u=this.reader.readInt(2),h=this.reader.readInt(4),d=this.reader.readData(h),this.zip64ExtensibleData[u]={id:u,length:h,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,h;for(u=0;u<this.files.length;u++)h=this.files[u],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(u=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var h=u;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var p=h-d;if(0<p)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(u){this.reader=s(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var s=t("./reader/readerFor"),o=t("./utils"),a=t("./compressedObject"),l=t("./crc32"),A=t("./utf8"),c=t("./compressions"),u=t("./support");function h(d,p){this.options=d,this.loadOptions=p}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var p,f;if(d.skip(22),this.fileNameLength=d.readInt(2),f=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(m){for(var g in c)if(Object.prototype.hasOwnProperty.call(c,g)&&c[g].magic===m)return c[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var p=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(p),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var p,f,m,g=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<g;)p=d.readInt(2),f=d.readInt(2),m=d.readData(f),this.extraFields[p]={id:p,length:f,value:m};d.setIndex(g)},handleUTF8:function(){var d=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=A.utf8decode(this.fileName),this.fileCommentStr=A.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var f=o.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var g=o.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var p=s(d.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:A.utf8decode(p.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var p=s(d.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:A.utf8decode(p.readData(d.length-5))}return null}},r.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){function s(p,f,m){this.name=p,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=f,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var o=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),l=t("./utf8"),A=t("./compressedObject"),c=t("./stream/GenericWorker");s.prototype={internalStream:function(p){var f=null,m="string";try{if(!p)throw new Error("No output type specified.");var g=(m=p.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),f=this._decompressWorker();var v=!this._dataBinary;v&&!g&&(f=f.pipe(new l.Utf8EncodeWorker)),!v&&g&&(f=f.pipe(new l.Utf8DecodeWorker))}catch(w){(f=new c("error")).error(w)}return new o(f,m,"")},async:function(p,f){return this.internalStream(p).accumulate(f)},nodeStream:function(p,f){return this.internalStream(p||"nodebuffer").toNodejsStream(f)},_compressWorker:function(p,f){if(this._data instanceof A&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new l.Utf8EncodeWorker)),A.createWorkerFrom(m,p,f)},_decompressWorker:function(){return this._data instanceof A?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<u.length;d++)s.prototype[u[d]]=h;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var A=0,c=new l(p),u=s.document.createTextNode("");c.observe(u,{characterData:!0}),o=function(){u.data=A=++A%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var f=s.document.createElement("script");f.onreadystatechange=function(){p(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},s.document.documentElement.appendChild(f)}:function(){setTimeout(p,0)};else{var h=new s.MessageChannel;h.port1.onmessage=p,o=function(){h.port2.postMessage(0)}}var d=[];function p(){var f,m;a=!0;for(var g=d.length;g;){for(m=d,d=[],f=-1;++f<g;)m[f]();g=d.length}a=!1}r.exports=function(f){d.push(f)!==1||a||o()}}).call(this,typeof pa<"u"?pa:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var s=t("immediate");function o(){}var a={},l=["REJECTED"],A=["FULFILLED"],c=["PENDING"];function u(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,g!==o&&f(this,g)}function h(g,v,w){this.promise=g,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function d(g,v,w){s(function(){var B;try{B=v(w)}catch(C){return a.reject(g,C)}B===g?a.reject(g,new TypeError("Cannot resolve promise with itself")):a.resolve(g,B)})}function p(g){var v=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof v=="function")return function(){v.apply(g,arguments)}}function f(g,v){var w=!1;function B(F){w||(w=!0,a.reject(g,F))}function C(F){w||(w=!0,a.resolve(g,F))}var b=m(function(){v(C,B)});b.status==="error"&&B(b.value)}function m(g,v){var w={};try{w.value=g(v),w.status="success"}catch(B){w.status="error",w.value=B}return w}(r.exports=u).prototype.finally=function(g){if(typeof g!="function")return this;var v=this.constructor;return this.then(function(w){return v.resolve(g()).then(function(){return w})},function(w){return v.resolve(g()).then(function(){throw w})})},u.prototype.catch=function(g){return this.then(null,g)},u.prototype.then=function(g,v){if(typeof g!="function"&&this.state===A||typeof v!="function"&&this.state===l)return this;var w=new this.constructor(o);return this.state!==c?d(w,this.state===A?g:v,this.outcome):this.queue.push(new h(w,g,v)),w},h.prototype.callFulfilled=function(g){a.resolve(this.promise,g)},h.prototype.otherCallFulfilled=function(g){d(this.promise,this.onFulfilled,g)},h.prototype.callRejected=function(g){a.reject(this.promise,g)},h.prototype.otherCallRejected=function(g){d(this.promise,this.onRejected,g)},a.resolve=function(g,v){var w=m(p,v);if(w.status==="error")return a.reject(g,w.value);var B=w.value;if(B)f(g,B);else{g.state=A,g.outcome=v;for(var C=-1,b=g.queue.length;++C<b;)g.queue[C].callFulfilled(v)}return g},a.reject=function(g,v){g.state=l,g.outcome=v;for(var w=-1,B=g.queue.length;++w<B;)g.queue[w].callRejected(v);return g},u.resolve=function(g){return g instanceof this?g:a.resolve(new this(o),g)},u.reject=function(g){var v=new this(o);return a.reject(v,g)},u.all=function(g){var v=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,B=!1;if(!w)return this.resolve([]);for(var C=new Array(w),b=0,F=-1,x=new this(o);++F<w;)E(g[F],F);return x;function E(M,H){v.resolve(M).then(function(O){C[H]=O,++b!==w||B||(B=!0,a.resolve(x,C))},function(O){B||(B=!0,a.reject(x,O))})}},u.race=function(g){var v=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,B=!1;if(!w)return this.resolve([]);for(var C=-1,b=new this(o);++C<w;)F=g[C],v.resolve(F).then(function(x){B||(B=!0,a.resolve(b,x))},function(x){B||(B=!0,a.reject(b,x))});var F;return b}},{immediate:36}],38:[function(t,r,i){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var s=t("./zlib/deflate"),o=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/messages"),A=t("./zlib/zstream"),c=Object.prototype.toString,u=0,h=-1,d=0,p=8;function f(g){if(!(this instanceof f))return new f(g);this.options=o.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},g||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A,this.strm.avail_out=0;var w=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(w!==u)throw new Error(l[w]);if(v.header&&s.deflateSetHeader(this.strm,v.header),v.dictionary){var B;if(B=typeof v.dictionary=="string"?a.string2buf(v.dictionary):c.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(w=s.deflateSetDictionary(this.strm,B))!==u)throw new Error(l[w]);this._dict_set=!0}}function m(g,v){var w=new f(v);if(w.push(g,!0),w.err)throw w.msg||l[w.err];return w.result}f.prototype.push=function(g,v){var w,B,C=this.strm,b=this.options.chunkSize;if(this.ended)return!1;B=v===~~v?v:v===!0?4:0,typeof g=="string"?C.input=a.string2buf(g):c.call(g)==="[object ArrayBuffer]"?C.input=new Uint8Array(g):C.input=g,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new o.Buf8(b),C.next_out=0,C.avail_out=b),(w=s.deflate(C,B))!==1&&w!==u)return this.onEnd(w),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||B!==4&&B!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(C.output,C.next_out))):this.onData(o.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&w!==1);return B===4?(w=s.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===u):B!==2||(this.onEnd(u),!(C.avail_out=0))},f.prototype.onData=function(g){this.chunks.push(g)},f.prototype.onEnd=function(g){g===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Deflate=f,i.deflate=m,i.deflateRaw=function(g,v){return(v=v||{}).raw=!0,m(g,v)},i.gzip=function(g,v){return(v=v||{}).gzip=!0,m(g,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var s=t("./zlib/inflate"),o=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/constants"),A=t("./zlib/messages"),c=t("./zlib/zstream"),u=t("./zlib/gzheader"),h=Object.prototype.toString;function d(f){if(!(this instanceof d))return new d(f);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},f||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||f&&f.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var g=s.inflateInit2(this.strm,m.windowBits);if(g!==l.Z_OK)throw new Error(A[g]);this.header=new u,s.inflateGetHeader(this.strm,this.header)}function p(f,m){var g=new d(m);if(g.push(f,!0),g.err)throw g.msg||A[g.err];return g.result}d.prototype.push=function(f,m){var g,v,w,B,C,b,F=this.strm,x=this.options.chunkSize,E=this.options.dictionary,M=!1;if(this.ended)return!1;v=m===~~m?m:m===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof f=="string"?F.input=a.binstring2buf(f):h.call(f)==="[object ArrayBuffer]"?F.input=new Uint8Array(f):F.input=f,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new o.Buf8(x),F.next_out=0,F.avail_out=x),(g=s.inflate(F,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&E&&(b=typeof E=="string"?a.string2buf(E):h.call(E)==="[object ArrayBuffer]"?new Uint8Array(E):E,g=s.inflateSetDictionary(this.strm,b)),g===l.Z_BUF_ERROR&&M===!0&&(g=l.Z_OK,M=!1),g!==l.Z_STREAM_END&&g!==l.Z_OK)return this.onEnd(g),!(this.ended=!0);F.next_out&&(F.avail_out!==0&&g!==l.Z_STREAM_END&&(F.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=a.utf8border(F.output,F.next_out),B=F.next_out-w,C=a.buf2string(F.output,w),F.next_out=B,F.avail_out=x-B,B&&o.arraySet(F.output,F.output,w,B,0),this.onData(C)):this.onData(o.shrinkBuf(F.output,F.next_out)))),F.avail_in===0&&F.avail_out===0&&(M=!0)}while((0<F.avail_in||F.avail_out===0)&&g!==l.Z_STREAM_END);return g===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(g=s.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(F.avail_out=0))},d.prototype.onData=function(f){this.chunks.push(f)},d.prototype.onEnd=function(f){f===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},i.Inflate=d,i.inflate=p,i.inflateRaw=function(f,m){return(m=m||{}).raw=!0,p(f,m)},i.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var A=Array.prototype.slice.call(arguments,1);A.length;){var c=A.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var u in c)c.hasOwnProperty(u)&&(l[u]=c[u])}}return l},i.shrinkBuf=function(l,A){return l.length===A?l:l.subarray?l.subarray(0,A):(l.length=A,l)};var o={arraySet:function(l,A,c,u,h){if(A.subarray&&l.subarray)l.set(A.subarray(c,c+u),h);else for(var d=0;d<u;d++)l[h+d]=A[c+d]},flattenChunks:function(l){var A,c,u,h,d,p;for(A=u=0,c=l.length;A<c;A++)u+=l[A].length;for(p=new Uint8Array(u),A=h=0,c=l.length;A<c;A++)d=l[A],p.set(d,h),h+=d.length;return p}},a={arraySet:function(l,A,c,u,h){for(var d=0;d<u;d++)l[h+d]=A[c+d]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(t,r,i){var s=t("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),A=0;A<256;A++)l[A]=252<=A?6:248<=A?5:240<=A?4:224<=A?3:192<=A?2:1;function c(u,h){if(h<65537&&(u.subarray&&a||!u.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(u,h));for(var d="",p=0;p<h;p++)d+=String.fromCharCode(u[p]);return d}l[254]=l[254]=1,i.string2buf=function(u){var h,d,p,f,m,g=u.length,v=0;for(f=0;f<g;f++)(64512&(d=u.charCodeAt(f)))==55296&&f+1<g&&(64512&(p=u.charCodeAt(f+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),f++),v+=d<128?1:d<2048?2:d<65536?3:4;for(h=new s.Buf8(v),f=m=0;m<v;f++)(64512&(d=u.charCodeAt(f)))==55296&&f+1<g&&(64512&(p=u.charCodeAt(f+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),f++),d<128?h[m++]=d:(d<2048?h[m++]=192|d>>>6:(d<65536?h[m++]=224|d>>>12:(h[m++]=240|d>>>18,h[m++]=128|d>>>12&63),h[m++]=128|d>>>6&63),h[m++]=128|63&d);return h},i.buf2binstring=function(u){return c(u,u.length)},i.binstring2buf=function(u){for(var h=new s.Buf8(u.length),d=0,p=h.length;d<p;d++)h[d]=u.charCodeAt(d);return h},i.buf2string=function(u,h){var d,p,f,m,g=h||u.length,v=new Array(2*g);for(d=p=0;d<g;)if((f=u[d++])<128)v[p++]=f;else if(4<(m=l[f]))v[p++]=65533,d+=m-1;else{for(f&=m===2?31:m===3?15:7;1<m&&d<g;)f=f<<6|63&u[d++],m--;1<m?v[p++]=65533:f<65536?v[p++]=f:(f-=65536,v[p++]=55296|f>>10&1023,v[p++]=56320|1023&f)}return c(v,p)},i.utf8border=function(u,h){var d;for((h=h||u.length)>u.length&&(h=u.length),d=h-1;0<=d&&(192&u[d])==128;)d--;return d<0||d===0?h:d+l[u[d]]>h?d:h}},{"./common":41}],43:[function(t,r,i){r.exports=function(s,o,a,l){for(var A=65535&s|0,c=s>>>16&65535|0,u=0;a!==0;){for(a-=u=2e3<a?2e3:a;c=c+(A=A+o[l++]|0)|0,--u;);A%=65521,c%=65521}return A|c<<16|0}},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var A=0;A<8;A++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,A){var c=s,u=A+l;o^=-1;for(var h=A;h<u;h++)o=o>>>8^c[255&(o^a[h])];return-1^o}},{}],46:[function(t,r,i){var s,o=t("../utils/common"),a=t("./trees"),l=t("./adler32"),A=t("./crc32"),c=t("./messages"),u=0,h=4,d=0,p=-2,f=-1,m=4,g=2,v=8,w=9,B=286,C=30,b=19,F=2*B+1,x=15,E=3,M=258,H=M+E+1,O=42,U=113,y=1,I=2,R=3,D=4;function k(P,fe){return P.msg=c[fe],fe}function V(P){return(P<<1)-(4<P?9:0)}function Z(P){for(var fe=P.length;0<=--fe;)P[fe]=0}function N(P){var fe=P.state,de=fe.pending;de>P.avail_out&&(de=P.avail_out),de!==0&&(o.arraySet(P.output,fe.pending_buf,fe.pending_out,de,P.next_out),P.next_out+=de,fe.pending_out+=de,P.total_out+=de,P.avail_out-=de,fe.pending-=de,fe.pending===0&&(fe.pending_out=0))}function _(P,fe){a._tr_flush_block(P,0<=P.block_start?P.block_start:-1,P.strstart-P.block_start,fe),P.block_start=P.strstart,N(P.strm)}function z(P,fe){P.pending_buf[P.pending++]=fe}function ie(P,fe){P.pending_buf[P.pending++]=fe>>>8&255,P.pending_buf[P.pending++]=255&fe}function T(P,fe){var de,ee,K=P.max_chain_length,se=P.strstart,ye=P.prev_length,ne=P.nice_match,J=P.strstart>P.w_size-H?P.strstart-(P.w_size-H):0,Y=P.window,ue=P.w_mask,le=P.prev,we=P.strstart+M,G=Y[se+ye-1],Q=Y[se+ye];P.prev_length>=P.good_match&&(K>>=2),ne>P.lookahead&&(ne=P.lookahead);do if(Y[(de=fe)+ye]===Q&&Y[de+ye-1]===G&&Y[de]===Y[se]&&Y[++de]===Y[se+1]){se+=2,de++;do;while(Y[++se]===Y[++de]&&Y[++se]===Y[++de]&&Y[++se]===Y[++de]&&Y[++se]===Y[++de]&&Y[++se]===Y[++de]&&Y[++se]===Y[++de]&&Y[++se]===Y[++de]&&Y[++se]===Y[++de]&&se<we);if(ee=M-(we-se),se=we-M,ye<ee){if(P.match_start=fe,ne<=(ye=ee))break;G=Y[se+ye-1],Q=Y[se+ye]}}while((fe=le[fe&ue])>J&&--K!=0);return ye<=P.lookahead?ye:P.lookahead}function q(P){var fe,de,ee,K,se,ye,ne,J,Y,ue,le=P.w_size;do{if(K=P.window_size-P.lookahead-P.strstart,P.strstart>=le+(le-H)){for(o.arraySet(P.window,P.window,le,le,0),P.match_start-=le,P.strstart-=le,P.block_start-=le,fe=de=P.hash_size;ee=P.head[--fe],P.head[fe]=le<=ee?ee-le:0,--de;);for(fe=de=le;ee=P.prev[--fe],P.prev[fe]=le<=ee?ee-le:0,--de;);K+=le}if(P.strm.avail_in===0)break;if(ye=P.strm,ne=P.window,J=P.strstart+P.lookahead,Y=K,ue=void 0,ue=ye.avail_in,Y<ue&&(ue=Y),de=ue===0?0:(ye.avail_in-=ue,o.arraySet(ne,ye.input,ye.next_in,ue,J),ye.state.wrap===1?ye.adler=l(ye.adler,ne,ue,J):ye.state.wrap===2&&(ye.adler=A(ye.adler,ne,ue,J)),ye.next_in+=ue,ye.total_in+=ue,ue),P.lookahead+=de,P.lookahead+P.insert>=E)for(se=P.strstart-P.insert,P.ins_h=P.window[se],P.ins_h=(P.ins_h<<P.hash_shift^P.window[se+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[se+E-1])&P.hash_mask,P.prev[se&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=se,se++,P.insert--,!(P.lookahead+P.insert<E)););}while(P.lookahead<H&&P.strm.avail_in!==0)}function ge(P,fe){for(var de,ee;;){if(P.lookahead<H){if(q(P),P.lookahead<H&&fe===u)return y;if(P.lookahead===0)break}if(de=0,P.lookahead>=E&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+E-1])&P.hash_mask,de=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),de!==0&&P.strstart-de<=P.w_size-H&&(P.match_length=T(P,de)),P.match_length>=E)if(ee=a._tr_tally(P,P.strstart-P.match_start,P.match_length-E),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=E){for(P.match_length--;P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+E-1])&P.hash_mask,de=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart,--P.match_length!=0;);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else ee=a._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(ee&&(_(P,!1),P.strm.avail_out===0))return y}return P.insert=P.strstart<E-1?P.strstart:E-1,fe===h?(_(P,!0),P.strm.avail_out===0?R:D):P.last_lit&&(_(P,!1),P.strm.avail_out===0)?y:I}function he(P,fe){for(var de,ee,K;;){if(P.lookahead<H){if(q(P),P.lookahead<H&&fe===u)return y;if(P.lookahead===0)break}if(de=0,P.lookahead>=E&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+E-1])&P.hash_mask,de=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=E-1,de!==0&&P.prev_length<P.max_lazy_match&&P.strstart-de<=P.w_size-H&&(P.match_length=T(P,de),P.match_length<=5&&(P.strategy===1||P.match_length===E&&4096<P.strstart-P.match_start)&&(P.match_length=E-1)),P.prev_length>=E&&P.match_length<=P.prev_length){for(K=P.strstart+P.lookahead-E,ee=a._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-E),P.lookahead-=P.prev_length-1,P.prev_length-=2;++P.strstart<=K&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+E-1])&P.hash_mask,de=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),--P.prev_length!=0;);if(P.match_available=0,P.match_length=E-1,P.strstart++,ee&&(_(P,!1),P.strm.avail_out===0))return y}else if(P.match_available){if((ee=a._tr_tally(P,0,P.window[P.strstart-1]))&&_(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return y}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(ee=a._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<E-1?P.strstart:E-1,fe===h?(_(P,!0),P.strm.avail_out===0?R:D):P.last_lit&&(_(P,!1),P.strm.avail_out===0)?y:I}function Ae(P,fe,de,ee,K){this.good_length=P,this.max_lazy=fe,this.nice_length=de,this.max_chain=ee,this.func=K}function $(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*F),this.dyn_dtree=new o.Buf16(2*(2*C+1)),this.bl_tree=new o.Buf16(2*(2*b+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(x+1),this.heap=new o.Buf16(2*B+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*B+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ce(P){var fe;return P&&P.state?(P.total_in=P.total_out=0,P.data_type=g,(fe=P.state).pending=0,fe.pending_out=0,fe.wrap<0&&(fe.wrap=-fe.wrap),fe.status=fe.wrap?O:U,P.adler=fe.wrap===2?0:1,fe.last_flush=u,a._tr_init(fe),d):k(P,p)}function me(P){var fe=ce(P);return fe===d&&function(de){de.window_size=2*de.w_size,Z(de.head),de.max_lazy_match=s[de.level].max_lazy,de.good_match=s[de.level].good_length,de.nice_match=s[de.level].nice_length,de.max_chain_length=s[de.level].max_chain,de.strstart=0,de.block_start=0,de.lookahead=0,de.insert=0,de.match_length=de.prev_length=E-1,de.match_available=0,de.ins_h=0}(P.state),fe}function _e(P,fe,de,ee,K,se){if(!P)return p;var ye=1;if(fe===f&&(fe=6),ee<0?(ye=0,ee=-ee):15<ee&&(ye=2,ee-=16),K<1||w<K||de!==v||ee<8||15<ee||fe<0||9<fe||se<0||m<se)return k(P,p);ee===8&&(ee=9);var ne=new $;return(P.state=ne).strm=P,ne.wrap=ye,ne.gzhead=null,ne.w_bits=ee,ne.w_size=1<<ne.w_bits,ne.w_mask=ne.w_size-1,ne.hash_bits=K+7,ne.hash_size=1<<ne.hash_bits,ne.hash_mask=ne.hash_size-1,ne.hash_shift=~~((ne.hash_bits+E-1)/E),ne.window=new o.Buf8(2*ne.w_size),ne.head=new o.Buf16(ne.hash_size),ne.prev=new o.Buf16(ne.w_size),ne.lit_bufsize=1<<K+6,ne.pending_buf_size=4*ne.lit_bufsize,ne.pending_buf=new o.Buf8(ne.pending_buf_size),ne.d_buf=1*ne.lit_bufsize,ne.l_buf=3*ne.lit_bufsize,ne.level=fe,ne.strategy=se,ne.method=de,me(P)}s=[new Ae(0,0,0,0,function(P,fe){var de=65535;for(de>P.pending_buf_size-5&&(de=P.pending_buf_size-5);;){if(P.lookahead<=1){if(q(P),P.lookahead===0&&fe===u)return y;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var ee=P.block_start+de;if((P.strstart===0||P.strstart>=ee)&&(P.lookahead=P.strstart-ee,P.strstart=ee,_(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-H&&(_(P,!1),P.strm.avail_out===0))return y}return P.insert=0,fe===h?(_(P,!0),P.strm.avail_out===0?R:D):(P.strstart>P.block_start&&(_(P,!1),P.strm.avail_out),y)}),new Ae(4,4,8,4,ge),new Ae(4,5,16,8,ge),new Ae(4,6,32,32,ge),new Ae(4,4,16,16,he),new Ae(8,16,32,32,he),new Ae(8,16,128,128,he),new Ae(8,32,128,256,he),new Ae(32,128,258,1024,he),new Ae(32,258,258,4096,he)],i.deflateInit=function(P,fe){return _e(P,fe,v,15,8,0)},i.deflateInit2=_e,i.deflateReset=me,i.deflateResetKeep=ce,i.deflateSetHeader=function(P,fe){return P&&P.state?P.state.wrap!==2?p:(P.state.gzhead=fe,d):p},i.deflate=function(P,fe){var de,ee,K,se;if(!P||!P.state||5<fe||fe<0)return P?k(P,p):p;if(ee=P.state,!P.output||!P.input&&P.avail_in!==0||ee.status===666&&fe!==h)return k(P,P.avail_out===0?-5:p);if(ee.strm=P,de=ee.last_flush,ee.last_flush=fe,ee.status===O)if(ee.wrap===2)P.adler=0,z(ee,31),z(ee,139),z(ee,8),ee.gzhead?(z(ee,(ee.gzhead.text?1:0)+(ee.gzhead.hcrc?2:0)+(ee.gzhead.extra?4:0)+(ee.gzhead.name?8:0)+(ee.gzhead.comment?16:0)),z(ee,255&ee.gzhead.time),z(ee,ee.gzhead.time>>8&255),z(ee,ee.gzhead.time>>16&255),z(ee,ee.gzhead.time>>24&255),z(ee,ee.level===9?2:2<=ee.strategy||ee.level<2?4:0),z(ee,255&ee.gzhead.os),ee.gzhead.extra&&ee.gzhead.extra.length&&(z(ee,255&ee.gzhead.extra.length),z(ee,ee.gzhead.extra.length>>8&255)),ee.gzhead.hcrc&&(P.adler=A(P.adler,ee.pending_buf,ee.pending,0)),ee.gzindex=0,ee.status=69):(z(ee,0),z(ee,0),z(ee,0),z(ee,0),z(ee,0),z(ee,ee.level===9?2:2<=ee.strategy||ee.level<2?4:0),z(ee,3),ee.status=U);else{var ye=v+(ee.w_bits-8<<4)<<8;ye|=(2<=ee.strategy||ee.level<2?0:ee.level<6?1:ee.level===6?2:3)<<6,ee.strstart!==0&&(ye|=32),ye+=31-ye%31,ee.status=U,ie(ee,ye),ee.strstart!==0&&(ie(ee,P.adler>>>16),ie(ee,65535&P.adler)),P.adler=1}if(ee.status===69)if(ee.gzhead.extra){for(K=ee.pending;ee.gzindex<(65535&ee.gzhead.extra.length)&&(ee.pending!==ee.pending_buf_size||(ee.gzhead.hcrc&&ee.pending>K&&(P.adler=A(P.adler,ee.pending_buf,ee.pending-K,K)),N(P),K=ee.pending,ee.pending!==ee.pending_buf_size));)z(ee,255&ee.gzhead.extra[ee.gzindex]),ee.gzindex++;ee.gzhead.hcrc&&ee.pending>K&&(P.adler=A(P.adler,ee.pending_buf,ee.pending-K,K)),ee.gzindex===ee.gzhead.extra.length&&(ee.gzindex=0,ee.status=73)}else ee.status=73;if(ee.status===73)if(ee.gzhead.name){K=ee.pending;do{if(ee.pending===ee.pending_buf_size&&(ee.gzhead.hcrc&&ee.pending>K&&(P.adler=A(P.adler,ee.pending_buf,ee.pending-K,K)),N(P),K=ee.pending,ee.pending===ee.pending_buf_size)){se=1;break}se=ee.gzindex<ee.gzhead.name.length?255&ee.gzhead.name.charCodeAt(ee.gzindex++):0,z(ee,se)}while(se!==0);ee.gzhead.hcrc&&ee.pending>K&&(P.adler=A(P.adler,ee.pending_buf,ee.pending-K,K)),se===0&&(ee.gzindex=0,ee.status=91)}else ee.status=91;if(ee.status===91)if(ee.gzhead.comment){K=ee.pending;do{if(ee.pending===ee.pending_buf_size&&(ee.gzhead.hcrc&&ee.pending>K&&(P.adler=A(P.adler,ee.pending_buf,ee.pending-K,K)),N(P),K=ee.pending,ee.pending===ee.pending_buf_size)){se=1;break}se=ee.gzindex<ee.gzhead.comment.length?255&ee.gzhead.comment.charCodeAt(ee.gzindex++):0,z(ee,se)}while(se!==0);ee.gzhead.hcrc&&ee.pending>K&&(P.adler=A(P.adler,ee.pending_buf,ee.pending-K,K)),se===0&&(ee.status=103)}else ee.status=103;if(ee.status===103&&(ee.gzhead.hcrc?(ee.pending+2>ee.pending_buf_size&&N(P),ee.pending+2<=ee.pending_buf_size&&(z(ee,255&P.adler),z(ee,P.adler>>8&255),P.adler=0,ee.status=U)):ee.status=U),ee.pending!==0){if(N(P),P.avail_out===0)return ee.last_flush=-1,d}else if(P.avail_in===0&&V(fe)<=V(de)&&fe!==h)return k(P,-5);if(ee.status===666&&P.avail_in!==0)return k(P,-5);if(P.avail_in!==0||ee.lookahead!==0||fe!==u&&ee.status!==666){var ne=ee.strategy===2?function(J,Y){for(var ue;;){if(J.lookahead===0&&(q(J),J.lookahead===0)){if(Y===u)return y;break}if(J.match_length=0,ue=a._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++,ue&&(_(J,!1),J.strm.avail_out===0))return y}return J.insert=0,Y===h?(_(J,!0),J.strm.avail_out===0?R:D):J.last_lit&&(_(J,!1),J.strm.avail_out===0)?y:I}(ee,fe):ee.strategy===3?function(J,Y){for(var ue,le,we,G,Q=J.window;;){if(J.lookahead<=M){if(q(J),J.lookahead<=M&&Y===u)return y;if(J.lookahead===0)break}if(J.match_length=0,J.lookahead>=E&&0<J.strstart&&(le=Q[we=J.strstart-1])===Q[++we]&&le===Q[++we]&&le===Q[++we]){G=J.strstart+M;do;while(le===Q[++we]&&le===Q[++we]&&le===Q[++we]&&le===Q[++we]&&le===Q[++we]&&le===Q[++we]&&le===Q[++we]&&le===Q[++we]&&we<G);J.match_length=M-(G-we),J.match_length>J.lookahead&&(J.match_length=J.lookahead)}if(J.match_length>=E?(ue=a._tr_tally(J,1,J.match_length-E),J.lookahead-=J.match_length,J.strstart+=J.match_length,J.match_length=0):(ue=a._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++),ue&&(_(J,!1),J.strm.avail_out===0))return y}return J.insert=0,Y===h?(_(J,!0),J.strm.avail_out===0?R:D):J.last_lit&&(_(J,!1),J.strm.avail_out===0)?y:I}(ee,fe):s[ee.level].func(ee,fe);if(ne!==R&&ne!==D||(ee.status=666),ne===y||ne===R)return P.avail_out===0&&(ee.last_flush=-1),d;if(ne===I&&(fe===1?a._tr_align(ee):fe!==5&&(a._tr_stored_block(ee,0,0,!1),fe===3&&(Z(ee.head),ee.lookahead===0&&(ee.strstart=0,ee.block_start=0,ee.insert=0))),N(P),P.avail_out===0))return ee.last_flush=-1,d}return fe!==h?d:ee.wrap<=0?1:(ee.wrap===2?(z(ee,255&P.adler),z(ee,P.adler>>8&255),z(ee,P.adler>>16&255),z(ee,P.adler>>24&255),z(ee,255&P.total_in),z(ee,P.total_in>>8&255),z(ee,P.total_in>>16&255),z(ee,P.total_in>>24&255)):(ie(ee,P.adler>>>16),ie(ee,65535&P.adler)),N(P),0<ee.wrap&&(ee.wrap=-ee.wrap),ee.pending!==0?d:1)},i.deflateEnd=function(P){var fe;return P&&P.state?(fe=P.state.status)!==O&&fe!==69&&fe!==73&&fe!==91&&fe!==103&&fe!==U&&fe!==666?k(P,p):(P.state=null,fe===U?k(P,-3):d):p},i.deflateSetDictionary=function(P,fe){var de,ee,K,se,ye,ne,J,Y,ue=fe.length;if(!P||!P.state||(se=(de=P.state).wrap)===2||se===1&&de.status!==O||de.lookahead)return p;for(se===1&&(P.adler=l(P.adler,fe,ue,0)),de.wrap=0,ue>=de.w_size&&(se===0&&(Z(de.head),de.strstart=0,de.block_start=0,de.insert=0),Y=new o.Buf8(de.w_size),o.arraySet(Y,fe,ue-de.w_size,de.w_size,0),fe=Y,ue=de.w_size),ye=P.avail_in,ne=P.next_in,J=P.input,P.avail_in=ue,P.next_in=0,P.input=fe,q(de);de.lookahead>=E;){for(ee=de.strstart,K=de.lookahead-(E-1);de.ins_h=(de.ins_h<<de.hash_shift^de.window[ee+E-1])&de.hash_mask,de.prev[ee&de.w_mask]=de.head[de.ins_h],de.head[de.ins_h]=ee,ee++,--K;);de.strstart=ee,de.lookahead=E-1,q(de)}return de.strstart+=de.lookahead,de.block_start=de.strstart,de.insert=de.lookahead,de.lookahead=0,de.match_length=de.prev_length=E-1,de.match_available=0,P.next_in=ne,P.input=J,P.avail_in=ye,de.wrap=se,d},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,i){r.exports=function(s,o){var a,l,A,c,u,h,d,p,f,m,g,v,w,B,C,b,F,x,E,M,H,O,U,y,I;a=s.state,l=s.next_in,y=s.input,A=l+(s.avail_in-5),c=s.next_out,I=s.output,u=c-(o-s.avail_out),h=c+(s.avail_out-257),d=a.dmax,p=a.wsize,f=a.whave,m=a.wnext,g=a.window,v=a.hold,w=a.bits,B=a.lencode,C=a.distcode,b=(1<<a.lenbits)-1,F=(1<<a.distbits)-1;e:do{w<15&&(v+=y[l++]<<w,w+=8,v+=y[l++]<<w,w+=8),x=B[v&b];t:for(;;){if(v>>>=E=x>>>24,w-=E,(E=x>>>16&255)===0)I[c++]=65535&x;else{if(!(16&E)){if(!(64&E)){x=B[(65535&x)+(v&(1<<E)-1)];continue t}if(32&E){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}M=65535&x,(E&=15)&&(w<E&&(v+=y[l++]<<w,w+=8),M+=v&(1<<E)-1,v>>>=E,w-=E),w<15&&(v+=y[l++]<<w,w+=8,v+=y[l++]<<w,w+=8),x=C[v&F];n:for(;;){if(v>>>=E=x>>>24,w-=E,!(16&(E=x>>>16&255))){if(!(64&E)){x=C[(65535&x)+(v&(1<<E)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(H=65535&x,w<(E&=15)&&(v+=y[l++]<<w,(w+=8)<E&&(v+=y[l++]<<w,w+=8)),d<(H+=v&(1<<E)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(v>>>=E,w-=E,(E=c-u)<H){if(f<(E=H-E)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(U=g,(O=0)===m){if(O+=p-E,E<M){for(M-=E;I[c++]=g[O++],--E;);O=c-H,U=I}}else if(m<E){if(O+=p+m-E,(E-=m)<M){for(M-=E;I[c++]=g[O++],--E;);if(O=0,m<M){for(M-=E=m;I[c++]=g[O++],--E;);O=c-H,U=I}}}else if(O+=m-E,E<M){for(M-=E;I[c++]=g[O++],--E;);O=c-H,U=I}for(;2<M;)I[c++]=U[O++],I[c++]=U[O++],I[c++]=U[O++],M-=3;M&&(I[c++]=U[O++],1<M&&(I[c++]=U[O++]))}else{for(O=c-H;I[c++]=I[O++],I[c++]=I[O++],I[c++]=I[O++],2<(M-=3););M&&(I[c++]=I[O++],1<M&&(I[c++]=I[O++]))}break}}break}}while(l<A&&c<h);l-=M=w>>3,v&=(1<<(w-=M<<3))-1,s.next_in=l,s.next_out=c,s.avail_in=l<A?A-l+5:5-(l-A),s.avail_out=c<h?h-c+257:257-(c-h),a.hold=v,a.bits=w}},{}],49:[function(t,r,i){var s=t("../utils/common"),o=t("./adler32"),a=t("./crc32"),l=t("./inffast"),A=t("./inftrees"),c=1,u=2,h=0,d=-2,p=1,f=852,m=592;function g(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(O){var U;return O&&O.state?(U=O.state,O.total_in=O.total_out=U.total=0,O.msg="",U.wrap&&(O.adler=1&U.wrap),U.mode=p,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new s.Buf32(f),U.distcode=U.distdyn=new s.Buf32(m),U.sane=1,U.back=-1,h):d}function B(O){var U;return O&&O.state?((U=O.state).wsize=0,U.whave=0,U.wnext=0,w(O)):d}function C(O,U){var y,I;return O&&O.state?(I=O.state,U<0?(y=0,U=-U):(y=1+(U>>4),U<48&&(U&=15)),U&&(U<8||15<U)?d:(I.window!==null&&I.wbits!==U&&(I.window=null),I.wrap=y,I.wbits=U,B(O))):d}function b(O,U){var y,I;return O?(I=new v,(O.state=I).window=null,(y=C(O,U))!==h&&(O.state=null),y):d}var F,x,E=!0;function M(O){if(E){var U;for(F=new s.Buf32(512),x=new s.Buf32(32),U=0;U<144;)O.lens[U++]=8;for(;U<256;)O.lens[U++]=9;for(;U<280;)O.lens[U++]=7;for(;U<288;)O.lens[U++]=8;for(A(c,O.lens,0,288,F,0,O.work,{bits:9}),U=0;U<32;)O.lens[U++]=5;A(u,O.lens,0,32,x,0,O.work,{bits:5}),E=!1}O.lencode=F,O.lenbits=9,O.distcode=x,O.distbits=5}function H(O,U,y,I){var R,D=O.state;return D.window===null&&(D.wsize=1<<D.wbits,D.wnext=0,D.whave=0,D.window=new s.Buf8(D.wsize)),I>=D.wsize?(s.arraySet(D.window,U,y-D.wsize,D.wsize,0),D.wnext=0,D.whave=D.wsize):(I<(R=D.wsize-D.wnext)&&(R=I),s.arraySet(D.window,U,y-I,R,D.wnext),(I-=R)?(s.arraySet(D.window,U,y-I,I,0),D.wnext=I,D.whave=D.wsize):(D.wnext+=R,D.wnext===D.wsize&&(D.wnext=0),D.whave<D.wsize&&(D.whave+=R))),0}i.inflateReset=B,i.inflateReset2=C,i.inflateResetKeep=w,i.inflateInit=function(O){return b(O,15)},i.inflateInit2=b,i.inflate=function(O,U){var y,I,R,D,k,V,Z,N,_,z,ie,T,q,ge,he,Ae,$,ce,me,_e,P,fe,de,ee,K=0,se=new s.Buf8(4),ye=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return d;(y=O.state).mode===12&&(y.mode=13),k=O.next_out,R=O.output,Z=O.avail_out,D=O.next_in,I=O.input,V=O.avail_in,N=y.hold,_=y.bits,z=V,ie=Z,fe=h;e:for(;;)switch(y.mode){case p:if(y.wrap===0){y.mode=13;break}for(;_<16;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}if(2&y.wrap&&N===35615){se[y.check=0]=255&N,se[1]=N>>>8&255,y.check=a(y.check,se,2,0),_=N=0,y.mode=2;break}if(y.flags=0,y.head&&(y.head.done=!1),!(1&y.wrap)||(((255&N)<<8)+(N>>8))%31){O.msg="incorrect header check",y.mode=30;break}if((15&N)!=8){O.msg="unknown compression method",y.mode=30;break}if(_-=4,P=8+(15&(N>>>=4)),y.wbits===0)y.wbits=P;else if(P>y.wbits){O.msg="invalid window size",y.mode=30;break}y.dmax=1<<P,O.adler=y.check=1,y.mode=512&N?10:12,_=N=0;break;case 2:for(;_<16;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}if(y.flags=N,(255&y.flags)!=8){O.msg="unknown compression method",y.mode=30;break}if(57344&y.flags){O.msg="unknown header flags set",y.mode=30;break}y.head&&(y.head.text=N>>8&1),512&y.flags&&(se[0]=255&N,se[1]=N>>>8&255,y.check=a(y.check,se,2,0)),_=N=0,y.mode=3;case 3:for(;_<32;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}y.head&&(y.head.time=N),512&y.flags&&(se[0]=255&N,se[1]=N>>>8&255,se[2]=N>>>16&255,se[3]=N>>>24&255,y.check=a(y.check,se,4,0)),_=N=0,y.mode=4;case 4:for(;_<16;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}y.head&&(y.head.xflags=255&N,y.head.os=N>>8),512&y.flags&&(se[0]=255&N,se[1]=N>>>8&255,y.check=a(y.check,se,2,0)),_=N=0,y.mode=5;case 5:if(1024&y.flags){for(;_<16;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}y.length=N,y.head&&(y.head.extra_len=N),512&y.flags&&(se[0]=255&N,se[1]=N>>>8&255,y.check=a(y.check,se,2,0)),_=N=0}else y.head&&(y.head.extra=null);y.mode=6;case 6:if(1024&y.flags&&(V<(T=y.length)&&(T=V),T&&(y.head&&(P=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),s.arraySet(y.head.extra,I,D,T,P)),512&y.flags&&(y.check=a(y.check,I,T,D)),V-=T,D+=T,y.length-=T),y.length))break e;y.length=0,y.mode=7;case 7:if(2048&y.flags){if(V===0)break e;for(T=0;P=I[D+T++],y.head&&P&&y.length<65536&&(y.head.name+=String.fromCharCode(P)),P&&T<V;);if(512&y.flags&&(y.check=a(y.check,I,T,D)),V-=T,D+=T,P)break e}else y.head&&(y.head.name=null);y.length=0,y.mode=8;case 8:if(4096&y.flags){if(V===0)break e;for(T=0;P=I[D+T++],y.head&&P&&y.length<65536&&(y.head.comment+=String.fromCharCode(P)),P&&T<V;);if(512&y.flags&&(y.check=a(y.check,I,T,D)),V-=T,D+=T,P)break e}else y.head&&(y.head.comment=null);y.mode=9;case 9:if(512&y.flags){for(;_<16;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}if(N!==(65535&y.check)){O.msg="header crc mismatch",y.mode=30;break}_=N=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),O.adler=y.check=0,y.mode=12;break;case 10:for(;_<32;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}O.adler=y.check=g(N),_=N=0,y.mode=11;case 11:if(y.havedict===0)return O.next_out=k,O.avail_out=Z,O.next_in=D,O.avail_in=V,y.hold=N,y.bits=_,2;O.adler=y.check=1,y.mode=12;case 12:if(U===5||U===6)break e;case 13:if(y.last){N>>>=7&_,_-=7&_,y.mode=27;break}for(;_<3;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}switch(y.last=1&N,_-=1,3&(N>>>=1)){case 0:y.mode=14;break;case 1:if(M(y),y.mode=20,U!==6)break;N>>>=2,_-=2;break e;case 2:y.mode=17;break;case 3:O.msg="invalid block type",y.mode=30}N>>>=2,_-=2;break;case 14:for(N>>>=7&_,_-=7&_;_<32;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}if((65535&N)!=(N>>>16^65535)){O.msg="invalid stored block lengths",y.mode=30;break}if(y.length=65535&N,_=N=0,y.mode=15,U===6)break e;case 15:y.mode=16;case 16:if(T=y.length){if(V<T&&(T=V),Z<T&&(T=Z),T===0)break e;s.arraySet(R,I,D,T,k),V-=T,D+=T,Z-=T,k+=T,y.length-=T;break}y.mode=12;break;case 17:for(;_<14;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}if(y.nlen=257+(31&N),N>>>=5,_-=5,y.ndist=1+(31&N),N>>>=5,_-=5,y.ncode=4+(15&N),N>>>=4,_-=4,286<y.nlen||30<y.ndist){O.msg="too many length or distance symbols",y.mode=30;break}y.have=0,y.mode=18;case 18:for(;y.have<y.ncode;){for(;_<3;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}y.lens[ye[y.have++]]=7&N,N>>>=3,_-=3}for(;y.have<19;)y.lens[ye[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,de={bits:y.lenbits},fe=A(0,y.lens,0,19,y.lencode,0,y.work,de),y.lenbits=de.bits,fe){O.msg="invalid code lengths set",y.mode=30;break}y.have=0,y.mode=19;case 19:for(;y.have<y.nlen+y.ndist;){for(;Ae=(K=y.lencode[N&(1<<y.lenbits)-1])>>>16&255,$=65535&K,!((he=K>>>24)<=_);){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}if($<16)N>>>=he,_-=he,y.lens[y.have++]=$;else{if($===16){for(ee=he+2;_<ee;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}if(N>>>=he,_-=he,y.have===0){O.msg="invalid bit length repeat",y.mode=30;break}P=y.lens[y.have-1],T=3+(3&N),N>>>=2,_-=2}else if($===17){for(ee=he+3;_<ee;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}_-=he,P=0,T=3+(7&(N>>>=he)),N>>>=3,_-=3}else{for(ee=he+7;_<ee;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}_-=he,P=0,T=11+(127&(N>>>=he)),N>>>=7,_-=7}if(y.have+T>y.nlen+y.ndist){O.msg="invalid bit length repeat",y.mode=30;break}for(;T--;)y.lens[y.have++]=P}}if(y.mode===30)break;if(y.lens[256]===0){O.msg="invalid code -- missing end-of-block",y.mode=30;break}if(y.lenbits=9,de={bits:y.lenbits},fe=A(c,y.lens,0,y.nlen,y.lencode,0,y.work,de),y.lenbits=de.bits,fe){O.msg="invalid literal/lengths set",y.mode=30;break}if(y.distbits=6,y.distcode=y.distdyn,de={bits:y.distbits},fe=A(u,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,de),y.distbits=de.bits,fe){O.msg="invalid distances set",y.mode=30;break}if(y.mode=20,U===6)break e;case 20:y.mode=21;case 21:if(6<=V&&258<=Z){O.next_out=k,O.avail_out=Z,O.next_in=D,O.avail_in=V,y.hold=N,y.bits=_,l(O,ie),k=O.next_out,R=O.output,Z=O.avail_out,D=O.next_in,I=O.input,V=O.avail_in,N=y.hold,_=y.bits,y.mode===12&&(y.back=-1);break}for(y.back=0;Ae=(K=y.lencode[N&(1<<y.lenbits)-1])>>>16&255,$=65535&K,!((he=K>>>24)<=_);){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}if(Ae&&!(240&Ae)){for(ce=he,me=Ae,_e=$;Ae=(K=y.lencode[_e+((N&(1<<ce+me)-1)>>ce)])>>>16&255,$=65535&K,!(ce+(he=K>>>24)<=_);){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}N>>>=ce,_-=ce,y.back+=ce}if(N>>>=he,_-=he,y.back+=he,y.length=$,Ae===0){y.mode=26;break}if(32&Ae){y.back=-1,y.mode=12;break}if(64&Ae){O.msg="invalid literal/length code",y.mode=30;break}y.extra=15&Ae,y.mode=22;case 22:if(y.extra){for(ee=y.extra;_<ee;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}y.length+=N&(1<<y.extra)-1,N>>>=y.extra,_-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=23;case 23:for(;Ae=(K=y.distcode[N&(1<<y.distbits)-1])>>>16&255,$=65535&K,!((he=K>>>24)<=_);){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}if(!(240&Ae)){for(ce=he,me=Ae,_e=$;Ae=(K=y.distcode[_e+((N&(1<<ce+me)-1)>>ce)])>>>16&255,$=65535&K,!(ce+(he=K>>>24)<=_);){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}N>>>=ce,_-=ce,y.back+=ce}if(N>>>=he,_-=he,y.back+=he,64&Ae){O.msg="invalid distance code",y.mode=30;break}y.offset=$,y.extra=15&Ae,y.mode=24;case 24:if(y.extra){for(ee=y.extra;_<ee;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}y.offset+=N&(1<<y.extra)-1,N>>>=y.extra,_-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){O.msg="invalid distance too far back",y.mode=30;break}y.mode=25;case 25:if(Z===0)break e;if(T=ie-Z,y.offset>T){if((T=y.offset-T)>y.whave&&y.sane){O.msg="invalid distance too far back",y.mode=30;break}q=T>y.wnext?(T-=y.wnext,y.wsize-T):y.wnext-T,T>y.length&&(T=y.length),ge=y.window}else ge=R,q=k-y.offset,T=y.length;for(Z<T&&(T=Z),Z-=T,y.length-=T;R[k++]=ge[q++],--T;);y.length===0&&(y.mode=21);break;case 26:if(Z===0)break e;R[k++]=y.length,Z--,y.mode=21;break;case 27:if(y.wrap){for(;_<32;){if(V===0)break e;V--,N|=I[D++]<<_,_+=8}if(ie-=Z,O.total_out+=ie,y.total+=ie,ie&&(O.adler=y.check=y.flags?a(y.check,R,ie,k-ie):o(y.check,R,ie,k-ie)),ie=Z,(y.flags?N:g(N))!==y.check){O.msg="incorrect data check",y.mode=30;break}_=N=0}y.mode=28;case 28:if(y.wrap&&y.flags){for(;_<32;){if(V===0)break e;V--,N+=I[D++]<<_,_+=8}if(N!==(4294967295&y.total)){O.msg="incorrect length check",y.mode=30;break}_=N=0}y.mode=29;case 29:fe=1;break e;case 30:fe=-3;break e;case 31:return-4;case 32:default:return d}return O.next_out=k,O.avail_out=Z,O.next_in=D,O.avail_in=V,y.hold=N,y.bits=_,(y.wsize||ie!==O.avail_out&&y.mode<30&&(y.mode<27||U!==4))&&H(O,O.output,O.next_out,ie-O.avail_out)?(y.mode=31,-4):(z-=O.avail_in,ie-=O.avail_out,O.total_in+=z,O.total_out+=ie,y.total+=ie,y.wrap&&ie&&(O.adler=y.check=y.flags?a(y.check,R,ie,O.next_out-ie):o(y.check,R,ie,O.next_out-ie)),O.data_type=y.bits+(y.last?64:0)+(y.mode===12?128:0)+(y.mode===20||y.mode===15?256:0),(z==0&&ie===0||U===4)&&fe===h&&(fe=-5),fe)},i.inflateEnd=function(O){if(!O||!O.state)return d;var U=O.state;return U.window&&(U.window=null),O.state=null,h},i.inflateGetHeader=function(O,U){var y;return O&&O.state&&2&(y=O.state).wrap?((y.head=U).done=!1,h):d},i.inflateSetDictionary=function(O,U){var y,I=U.length;return O&&O.state?(y=O.state).wrap!==0&&y.mode!==11?d:y.mode===11&&o(1,U,I,0)!==y.check?-3:H(O,U,I,I)?(y.mode=31,-4):(y.havedict=1,h):d},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var s=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],A=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(c,u,h,d,p,f,m,g){var v,w,B,C,b,F,x,E,M,H=g.bits,O=0,U=0,y=0,I=0,R=0,D=0,k=0,V=0,Z=0,N=0,_=null,z=0,ie=new s.Buf16(16),T=new s.Buf16(16),q=null,ge=0;for(O=0;O<=15;O++)ie[O]=0;for(U=0;U<d;U++)ie[u[h+U]]++;for(R=H,I=15;1<=I&&ie[I]===0;I--);if(I<R&&(R=I),I===0)return p[f++]=20971520,p[f++]=20971520,g.bits=1,0;for(y=1;y<I&&ie[y]===0;y++);for(R<y&&(R=y),O=V=1;O<=15;O++)if(V<<=1,(V-=ie[O])<0)return-1;if(0<V&&(c===0||I!==1))return-1;for(T[1]=0,O=1;O<15;O++)T[O+1]=T[O]+ie[O];for(U=0;U<d;U++)u[h+U]!==0&&(m[T[u[h+U]]++]=U);if(F=c===0?(_=q=m,19):c===1?(_=o,z-=257,q=a,ge-=257,256):(_=l,q=A,-1),O=y,b=f,k=U=N=0,B=-1,C=(Z=1<<(D=R))-1,c===1&&852<Z||c===2&&592<Z)return 1;for(;;){for(x=O-k,M=m[U]<F?(E=0,m[U]):m[U]>F?(E=q[ge+m[U]],_[z+m[U]]):(E=96,0),v=1<<O-k,y=w=1<<D;p[b+(N>>k)+(w-=v)]=x<<24|E<<16|M|0,w!==0;);for(v=1<<O-1;N&v;)v>>=1;if(v!==0?(N&=v-1,N+=v):N=0,U++,--ie[O]==0){if(O===I)break;O=u[h+m[U]]}if(R<O&&(N&C)!==B){for(k===0&&(k=R),b+=y,V=1<<(D=O-k);D+k<I&&!((V-=ie[D+k])<=0);)D++,V<<=1;if(Z+=1<<D,c===1&&852<Z||c===2&&592<Z)return 1;p[B=N&C]=R<<24|D<<16|b-f|0}}return N!==0&&(p[b+N]=O-k<<24|64<<16|0),g.bits=R,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var s=t("../utils/common"),o=0,a=1;function l(K){for(var se=K.length;0<=--se;)K[se]=0}var A=0,c=29,u=256,h=u+1+c,d=30,p=19,f=2*h+1,m=15,g=16,v=7,w=256,B=16,C=17,b=18,F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(h+2));l(H);var O=new Array(2*d);l(O);var U=new Array(512);l(U);var y=new Array(256);l(y);var I=new Array(c);l(I);var R,D,k,V=new Array(d);function Z(K,se,ye,ne,J){this.static_tree=K,this.extra_bits=se,this.extra_base=ye,this.elems=ne,this.max_length=J,this.has_stree=K&&K.length}function N(K,se){this.dyn_tree=K,this.max_code=0,this.stat_desc=se}function _(K){return K<256?U[K]:U[256+(K>>>7)]}function z(K,se){K.pending_buf[K.pending++]=255&se,K.pending_buf[K.pending++]=se>>>8&255}function ie(K,se,ye){K.bi_valid>g-ye?(K.bi_buf|=se<<K.bi_valid&65535,z(K,K.bi_buf),K.bi_buf=se>>g-K.bi_valid,K.bi_valid+=ye-g):(K.bi_buf|=se<<K.bi_valid&65535,K.bi_valid+=ye)}function T(K,se,ye){ie(K,ye[2*se],ye[2*se+1])}function q(K,se){for(var ye=0;ye|=1&K,K>>>=1,ye<<=1,0<--se;);return ye>>>1}function ge(K,se,ye){var ne,J,Y=new Array(m+1),ue=0;for(ne=1;ne<=m;ne++)Y[ne]=ue=ue+ye[ne-1]<<1;for(J=0;J<=se;J++){var le=K[2*J+1];le!==0&&(K[2*J]=q(Y[le]++,le))}}function he(K){var se;for(se=0;se<h;se++)K.dyn_ltree[2*se]=0;for(se=0;se<d;se++)K.dyn_dtree[2*se]=0;for(se=0;se<p;se++)K.bl_tree[2*se]=0;K.dyn_ltree[2*w]=1,K.opt_len=K.static_len=0,K.last_lit=K.matches=0}function Ae(K){8<K.bi_valid?z(K,K.bi_buf):0<K.bi_valid&&(K.pending_buf[K.pending++]=K.bi_buf),K.bi_buf=0,K.bi_valid=0}function $(K,se,ye,ne){var J=2*se,Y=2*ye;return K[J]<K[Y]||K[J]===K[Y]&&ne[se]<=ne[ye]}function ce(K,se,ye){for(var ne=K.heap[ye],J=ye<<1;J<=K.heap_len&&(J<K.heap_len&&$(se,K.heap[J+1],K.heap[J],K.depth)&&J++,!$(se,ne,K.heap[J],K.depth));)K.heap[ye]=K.heap[J],ye=J,J<<=1;K.heap[ye]=ne}function me(K,se,ye){var ne,J,Y,ue,le=0;if(K.last_lit!==0)for(;ne=K.pending_buf[K.d_buf+2*le]<<8|K.pending_buf[K.d_buf+2*le+1],J=K.pending_buf[K.l_buf+le],le++,ne===0?T(K,J,se):(T(K,(Y=y[J])+u+1,se),(ue=F[Y])!==0&&ie(K,J-=I[Y],ue),T(K,Y=_(--ne),ye),(ue=x[Y])!==0&&ie(K,ne-=V[Y],ue)),le<K.last_lit;);T(K,w,se)}function _e(K,se){var ye,ne,J,Y=se.dyn_tree,ue=se.stat_desc.static_tree,le=se.stat_desc.has_stree,we=se.stat_desc.elems,G=-1;for(K.heap_len=0,K.heap_max=f,ye=0;ye<we;ye++)Y[2*ye]!==0?(K.heap[++K.heap_len]=G=ye,K.depth[ye]=0):Y[2*ye+1]=0;for(;K.heap_len<2;)Y[2*(J=K.heap[++K.heap_len]=G<2?++G:0)]=1,K.depth[J]=0,K.opt_len--,le&&(K.static_len-=ue[2*J+1]);for(se.max_code=G,ye=K.heap_len>>1;1<=ye;ye--)ce(K,Y,ye);for(J=we;ye=K.heap[1],K.heap[1]=K.heap[K.heap_len--],ce(K,Y,1),ne=K.heap[1],K.heap[--K.heap_max]=ye,K.heap[--K.heap_max]=ne,Y[2*J]=Y[2*ye]+Y[2*ne],K.depth[J]=(K.depth[ye]>=K.depth[ne]?K.depth[ye]:K.depth[ne])+1,Y[2*ye+1]=Y[2*ne+1]=J,K.heap[1]=J++,ce(K,Y,1),2<=K.heap_len;);K.heap[--K.heap_max]=K.heap[1],function(Q,S){var W,te,oe,ae,Se,Ee,Me=S.dyn_tree,Le=S.max_code,ke=S.stat_desc.static_tree,pe=S.stat_desc.has_stree,Fe=S.stat_desc.extra_bits,Ue=S.stat_desc.extra_base,Te=S.stat_desc.max_length,Ye=0;for(ae=0;ae<=m;ae++)Q.bl_count[ae]=0;for(Me[2*Q.heap[Q.heap_max]+1]=0,W=Q.heap_max+1;W<f;W++)Te<(ae=Me[2*Me[2*(te=Q.heap[W])+1]+1]+1)&&(ae=Te,Ye++),Me[2*te+1]=ae,Le<te||(Q.bl_count[ae]++,Se=0,Ue<=te&&(Se=Fe[te-Ue]),Ee=Me[2*te],Q.opt_len+=Ee*(ae+Se),pe&&(Q.static_len+=Ee*(ke[2*te+1]+Se)));if(Ye!==0){do{for(ae=Te-1;Q.bl_count[ae]===0;)ae--;Q.bl_count[ae]--,Q.bl_count[ae+1]+=2,Q.bl_count[Te]--,Ye-=2}while(0<Ye);for(ae=Te;ae!==0;ae--)for(te=Q.bl_count[ae];te!==0;)Le<(oe=Q.heap[--W])||(Me[2*oe+1]!==ae&&(Q.opt_len+=(ae-Me[2*oe+1])*Me[2*oe],Me[2*oe+1]=ae),te--)}}(K,se),ge(Y,G,K.bl_count)}function P(K,se,ye){var ne,J,Y=-1,ue=se[1],le=0,we=7,G=4;for(ue===0&&(we=138,G=3),se[2*(ye+1)+1]=65535,ne=0;ne<=ye;ne++)J=ue,ue=se[2*(ne+1)+1],++le<we&&J===ue||(le<G?K.bl_tree[2*J]+=le:J!==0?(J!==Y&&K.bl_tree[2*J]++,K.bl_tree[2*B]++):le<=10?K.bl_tree[2*C]++:K.bl_tree[2*b]++,Y=J,G=(le=0)===ue?(we=138,3):J===ue?(we=6,3):(we=7,4))}function fe(K,se,ye){var ne,J,Y=-1,ue=se[1],le=0,we=7,G=4;for(ue===0&&(we=138,G=3),ne=0;ne<=ye;ne++)if(J=ue,ue=se[2*(ne+1)+1],!(++le<we&&J===ue)){if(le<G)for(;T(K,J,K.bl_tree),--le!=0;);else J!==0?(J!==Y&&(T(K,J,K.bl_tree),le--),T(K,B,K.bl_tree),ie(K,le-3,2)):le<=10?(T(K,C,K.bl_tree),ie(K,le-3,3)):(T(K,b,K.bl_tree),ie(K,le-11,7));Y=J,G=(le=0)===ue?(we=138,3):J===ue?(we=6,3):(we=7,4)}}l(V);var de=!1;function ee(K,se,ye,ne){ie(K,(A<<1)+(ne?1:0),3),function(J,Y,ue,le){Ae(J),le&&(z(J,ue),z(J,~ue)),s.arraySet(J.pending_buf,J.window,Y,ue,J.pending),J.pending+=ue}(K,se,ye,!0)}i._tr_init=function(K){de||(function(){var se,ye,ne,J,Y,ue=new Array(m+1);for(J=ne=0;J<c-1;J++)for(I[J]=ne,se=0;se<1<<F[J];se++)y[ne++]=J;for(y[ne-1]=J,J=Y=0;J<16;J++)for(V[J]=Y,se=0;se<1<<x[J];se++)U[Y++]=J;for(Y>>=7;J<d;J++)for(V[J]=Y<<7,se=0;se<1<<x[J]-7;se++)U[256+Y++]=J;for(ye=0;ye<=m;ye++)ue[ye]=0;for(se=0;se<=143;)H[2*se+1]=8,se++,ue[8]++;for(;se<=255;)H[2*se+1]=9,se++,ue[9]++;for(;se<=279;)H[2*se+1]=7,se++,ue[7]++;for(;se<=287;)H[2*se+1]=8,se++,ue[8]++;for(ge(H,h+1,ue),se=0;se<d;se++)O[2*se+1]=5,O[2*se]=q(se,5);R=new Z(H,F,u+1,h,m),D=new Z(O,x,0,d,m),k=new Z(new Array(0),E,0,p,v)}(),de=!0),K.l_desc=new N(K.dyn_ltree,R),K.d_desc=new N(K.dyn_dtree,D),K.bl_desc=new N(K.bl_tree,k),K.bi_buf=0,K.bi_valid=0,he(K)},i._tr_stored_block=ee,i._tr_flush_block=function(K,se,ye,ne){var J,Y,ue=0;0<K.level?(K.strm.data_type===2&&(K.strm.data_type=function(le){var we,G=4093624447;for(we=0;we<=31;we++,G>>>=1)if(1&G&&le.dyn_ltree[2*we]!==0)return o;if(le.dyn_ltree[18]!==0||le.dyn_ltree[20]!==0||le.dyn_ltree[26]!==0)return a;for(we=32;we<u;we++)if(le.dyn_ltree[2*we]!==0)return a;return o}(K)),_e(K,K.l_desc),_e(K,K.d_desc),ue=function(le){var we;for(P(le,le.dyn_ltree,le.l_desc.max_code),P(le,le.dyn_dtree,le.d_desc.max_code),_e(le,le.bl_desc),we=p-1;3<=we&&le.bl_tree[2*M[we]+1]===0;we--);return le.opt_len+=3*(we+1)+5+5+4,we}(K),J=K.opt_len+3+7>>>3,(Y=K.static_len+3+7>>>3)<=J&&(J=Y)):J=Y=ye+5,ye+4<=J&&se!==-1?ee(K,se,ye,ne):K.strategy===4||Y===J?(ie(K,2+(ne?1:0),3),me(K,H,O)):(ie(K,4+(ne?1:0),3),function(le,we,G,Q){var S;for(ie(le,we-257,5),ie(le,G-1,5),ie(le,Q-4,4),S=0;S<Q;S++)ie(le,le.bl_tree[2*M[S]+1],3);fe(le,le.dyn_ltree,we-1),fe(le,le.dyn_dtree,G-1)}(K,K.l_desc.max_code+1,K.d_desc.max_code+1,ue+1),me(K,K.dyn_ltree,K.dyn_dtree)),he(K),ne&&Ae(K)},i._tr_tally=function(K,se,ye){return K.pending_buf[K.d_buf+2*K.last_lit]=se>>>8&255,K.pending_buf[K.d_buf+2*K.last_lit+1]=255&se,K.pending_buf[K.l_buf+K.last_lit]=255&ye,K.last_lit++,se===0?K.dyn_ltree[2*ye]++:(K.matches++,se--,K.dyn_ltree[2*(y[ye]+u+1)]++,K.dyn_dtree[2*_(se)]++),K.last_lit===K.lit_bufsize-1},i._tr_align=function(K){ie(K,2,3),T(K,w,H),function(se){se.bi_valid===16?(z(se,se.bi_buf),se.bi_buf=0,se.bi_valid=0):8<=se.bi_valid&&(se.pending_buf[se.pending++]=255&se.bi_buf,se.bi_buf>>=8,se.bi_valid-=8)}(K)}},{"../utils/common":41}],53:[function(t,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,A,c,u,h=1,d={},p=!1,f=o.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(o);m=m&&m.setTimeout?m:o,l={}.toString.call(o.process)==="[object process]"?function(B){process.nextTick(function(){v(B)})}:function(){if(o.postMessage&&!o.importScripts){var B=!0,C=o.onmessage;return o.onmessage=function(){B=!1},o.postMessage("","*"),o.onmessage=C,B}}()?(u="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",w,!1):o.attachEvent("onmessage",w),function(B){o.postMessage(u+B,"*")}):o.MessageChannel?((c=new MessageChannel).port1.onmessage=function(B){v(B.data)},function(B){c.port2.postMessage(B)}):f&&"onreadystatechange"in f.createElement("script")?(A=f.documentElement,function(B){var C=f.createElement("script");C.onreadystatechange=function(){v(B),C.onreadystatechange=null,A.removeChild(C),C=null},A.appendChild(C)}):function(B){setTimeout(v,0,B)},m.setImmediate=function(B){typeof B!="function"&&(B=new Function(""+B));for(var C=new Array(arguments.length-1),b=0;b<C.length;b++)C[b]=arguments[b+1];var F={callback:B,args:C};return d[h]=F,l(h),h++},m.clearImmediate=g}function g(B){delete d[B]}function v(B){if(p)setTimeout(v,0,B);else{var C=d[B];if(C){p=!0;try{(function(b){var F=b.callback,x=b.args;switch(x.length){case 0:F();break;case 1:F(x[0]);break;case 2:F(x[0],x[1]);break;case 3:F(x[0],x[1],x[2]);break;default:F.apply(a,x)}})(C)}finally{g(B),p=!1}}}}function w(B){B.source===o&&typeof B.data=="string"&&B.data.indexOf(u)===0&&v(+B.data.slice(u.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof pa<"u"?pa:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(eH);var Ipe=eH.exports;const Fpe=Zl(Ipe);class ep{constructor(){this.zipContainer={}}addData(e,t,r,i=""){i==""&&(i="_"),this.zipContainer[i]==null&&(this.zipContainer[i]=[]),this.zipContainer[i].push({data:e,name:t,extension:r})}saveZip(e,t=!0){const r=this.zipContainer,i=new Fpe;for(const s in r)if(s=="_")r[s].forEach((o,a)=>{i.file(o.name+"."+o.extension,o.data,{base64:!0})});else{const o=i.folder(s);r[s].forEach((a,l)=>{const A=a.extension!="txt";o.file(a.name+"."+a.extension,a.data,{base64:A})})}i.generateAsync({type:"blob"}).then(s=>{this._saveZipFile(s,e+".zip")}),t&&(this.zipContainer={})}_saveZipFile(e,t){const r=new Blob([e],{type:"application/zip"});if(typeof window.navigator.msSaveBlob<"u")window.navigator.msSaveBlob(r,t);else{const i=document.createElement("a");typeof i.download=="string"?(document.body.appendChild(i),i.download=t,i.href=URL.createObjectURL(r),i.click(),document.body.removeChild(i)):window.open(e,"_blank").document.write("<title>"+t+"</title><img src='"+e+"'/>")}}}new j;class _pe{constructor(e){this.characterManager=e,this.screenshotManager=e.screenshotManager,this.blinkManager=e.blinkManager,this.animationManager=this.characterManager.animationManager,this.temptime=0}async createLoraData(e,t=null,r="",i){const s=e.manifest,o=e.name?"loraData/"+e.name:"loraData",a=await this._fetchManifest(s),{assetsLocation:l="",animationsDirectory:A="",backgroundGrayscale:c=1,topFrameOffsetPixels:u=64,bottomFrameOffsetPixels:h=64,backgroundDescription:d="",width:p=512,height:f=512,dataCollection:m}=a,g=l+A+"/";this.screenshotManager.setBackground([c,c,c]),this.blinkManager.enableScreenshot(),await this.screenshotManager.calculateBoneOffsets(.2);let v=0;const w=this;if(Array.isArray(m)){const B=t??new ep;await(async()=>{if(Array.isArray(m))for(let b=0;b<m.length;b++){const{animationPath:F,animationTime:x=0,animationFrame:E,lookAtCamera:M,expression:H,cameraPosition:O,cameraFrame:U,description:y}=m[b];v++;const I=v.toString().padStart(4,"0"),R=E?E/30:x;await w.animationManager.loadAnimation(g+F,!0,R);const D=nQ(O);w.screenshotManager.setCameraFrameWithName(U,D);const k=w.screenshotManager.getImageData(p,f,!1);B.addData(k,I,"png",o),B.addData("anata "+y+" "+d,I,"txt",o)}})(),t==null&&(r==""&&(r="lora_zip"),B.saveZip(r))}this.blinkManager.disableScreenshot()}async _fetchManifest(e){return await(await fetch(e)).json()}}new j;class Epe{constructor(e){this.characterManager=e,this.screenshotManager=e.screenshotManager,this.blinkManager=e.blinkManager,this.animationManager=this.characterManager.animationManager}async createSpriteAtlas(e,t=null,r=""){const i=e.manifest,s=e.name?"spriteData/"+e.name:"spriteData",o=await this._fetchManifest(i),{assetsLocation:a="",animationsDirectory:l="",backgroundColor:A=[1,1,1,1],screenshotOffset:c,topFrameOffset:u=.1,bottomFrameOffset:h=.1,pixelStyleSize:d,atlasWidth:p=512,atlasHeight:f=512,spritesCollection:m}=o,g=a+l+"/";this.screenshotManager.setBottomFrameOffset(h),this.screenshotManager.setTopFrameOffset(u),this.screenshotManager.setBackground(A),this.blinkManager.enableScreenshot(),await this.screenshotManager.calculateBoneOffsets(.2);let v=0;const w=this;if(Array.isArray(m)){const B=t??new ep;async function C(){if(Array.isArray(m))for(const b of m){const{animationName:F,animationPath:x,framesNumber:E,lookAtCamera:M,expression:H,cameraPosition:O,cameraFrame:U}=b;v++;const y=s+"/"+(F||v.toString().padStart(2,"0"));await w.animationManager.loadAnimation(g+x,!0,0);const I=nQ(O);w.screenshotManager.setCameraFrameWithName(U,I);const D=w.animationManager.getCurrentClipDuration()/E;for(let k=0;k<E;k++){w.animationManager.setTime(k*D);const V=w.screenshotManager.getImageData(p,f,d);B.addData(V,k.toString().padStart(2,"0"),"png",y)}}}await C(),t==null&&(r==""&&(r="sprites_zip"),B.saveZip(r))}this.blinkManager.disableScreenshot()}async _fetchManifest(e){return await(await fetch(e)).json()}}new j;class Spe{constructor(e){this.characterManager=e,this.screenshotManager=e.screenshotManager,this.blinkManager=e.blinkManager,this.animationManager=this.characterManager.animationManager}async createThumbnailsWithObjectData(e,t=!0,r=null,i=""){const{assetsLocation:s="",poseAnimation:o="",animationFrame:a,animationTime:l,backgroundColor:A=[1,1,1,0],screenshotOffset:c,topFrameOffset:u=.1,bottomFrameOffset:h=.1,thumbnailsWidth:d=128,thumbnailsHeight:p=128,thumbnailsCollection:f}=e,m=s+"/";let g=a||0;l!=null&&(g=l*30),t&&await this.animationManager.loadAnimation(m+o,!0,g),this.screenshotManager.setBottomFrameOffset(h),this.screenshotManager.setTopFrameOffset(u),this.screenshotManager.setBackground(A),this.blinkManager.enableScreenshot(),await this.screenshotManager.calculateBoneOffsets(.2);const v=this;if(Array.isArray(f)){const w=r??new ep;let B=!1;async function C(){for(const b of f){const{traitGroup:F,cameraPosition:x="front",bottomBoneName:E,bottomBoneMaxVertex:M=!1,topBoneName:H,topBoneMaxVertex:O=!0,groupTopOffset:U,groupBotomOffset:y,cameraFrame:I,saveOnlyIDs:R}=b;if((!E||!H)&&(I||console.warn("missing bonename info or camera frame. Skipping")),!F){console.warn("missing trait group for thumbnail info. Skipping");continue}const D=()=>{const Z=[];return Ot(R).forEach(_=>{Z.push({id:_})}),Z},k=R==null?v.characterManager.getTraits(F):D();if(k==null){console.log("SKipping Thumbnail Generation for trait group "+F+", its not present in the character manifest.");continue}const V=nQ(x);I?v.screenshotManager.setCameraFrameWithName(I,V):v.screenshotManager.frameShot(E,H,V,M,O);for(let Z=0;Z<k.length;Z++){const N=k[Z].id;let _=N;if(k[Z].fullDirectory!=null){const z=k[Z].fullDirectory.split("/");_=z[z.length-1].split(".")[0]}if(await v.characterManager.loadTrait(F,N,!0),f.length==1&&k.length==1)B=!0,v.screenshotManager.saveScreenshot(_,d,p);else{const z=v.screenshotManager.getImageData(d,p);w.addData(z,_,"png",F)}}}}await C(),r==null&&B==!1&&(i==""&&(i="thumbnails_zip"),w.saveZip(i))}this.blinkManager.disableScreenshot()}async createThumbnails(e,t=null,r=""){const i=e.manifest,s=await this._fetchManifest(i);await this.createThumbnailsWithObjectData(s,!0,t,r)}async _fetchManifest(e){return await(await fetch(e)).json()}}const lr=Ce.createContext(),Upe=n=>{const[e,t]=Ce.useState(null),[r,i]=Ce.useState(null),[s,o]=Ce.useState(null),[a,l]=Ce.useState(null),[A,c]=Ce.useState(null),[u,h]=Ce.useState(null),[d,p]=Ce.useState(null),[f,m]=Ce.useState(null),[g,v]=Ce.useState(null),[w,B]=Ce.useState(null),[C,b]=Ce.useState(null),[F,x]=Ce.useState(!1);let E=!1,[M,H]=Ce.useState(!1);Ce.useEffect(()=>{if(E||M)return;H(!0),E=!0;const{scene:I,camera:R,controls:D,characterManager:k,sceneElements:V}=xpe("editor-scene");v(R),m(I),t(k),c(V),h(k.animationManager),p(k.lookAtManager),B(D),i(new _pe(k)),o(new Epe(k)),l(new Spe(k))},[]);const O=I=>{I==null&&(I=!F),x(I),f.traverse(R=>{R.isMesh&&R.setDebugMode&&R.setDebugMode(I)})};Ce.useEffect(()=>{if(C!=null&&C.defaultAnimations){const I=C.defaultAnimations.map(R=>R.location);u.storeDefaultAnimationPaths(I,"")}},[C]);const U=I=>{I?f.add(A):f.remove(A)},y=I=>{w&&(m_.to(w.target,{x:I.targetX??0,y:I.targetY??0,z:I.targetZ??0,duration:1}),m_.fromTo(w,{maxDistance:w.getDistance(),minDistance:w.getDistance(),minPolarAngle:w.getPolarAngle(),maxPolarAngle:w.getPolarAngle(),minAzimuthAngle:w.getAzimuthalAngle(),maxAzimuthAngle:w.getAzimuthalAngle()},{maxDistance:I.distance,minDistance:I.distance,minPolarAngle:Math.PI/2-.11,maxPolarAngle:Math.PI/2-.11,minAzimuthAngle:-.78,maxAzimuthAngle:-.78,duration:1}).then(()=>{w.minPolarAngle=0,w.maxPolarAngle=3.1415,w.minDistance=.5,w.maxDistance=10,w.minAzimuthAngle=1/0,w.maxAzimuthAngle=1/0}))};return L.jsx(lr.Provider,{value:{manifest:C,setManifest:b,scene:f,characterManager:e,loraDataGenerator:r,spriteAtlasGenerator:s,thumbnailsGenerator:a,showEnvironmentModels:U,debugMode:F,toggleDebugMode:O,animationManager:u,lookAtManager:d,camera:g,moveCamera:y,controls:w,sceneElements:A},children:n.children})},Qpe={NORMAL:"NORMAL",AR:"AR",AR_FRONT:"AR_FRONT",VR:"VR"},at={LANDING:"LANDING",CREATE:"CREATE",CLAIM:"CLAIM",LOAD:"LOAD",APPEARANCE:"APPEARANCE",BATCHDOWNLOAD:"BATCHDOWNLOAD",BIO:"BIO",SAVE:"SAVE",MINT:"MINT",CHAT:"CHAT",OPTIMIZER:"OPTIMIZER",BATCHMANIFEST:"BATCHMANIFEST",WALLET:"WALLET"},Ci=X.createContext(),Rpe=n=>{const[e,t]=X.useState(Qpe.NORMAL),[r,i]=X.useState(at.LANDING),[s,o]=X.useState(!1),[a,l]=X.useState(!1);return L.jsx(Ci.Provider,{value:{viewMode:r,setViewMode:i,isLoading:s,setIsLoading:o,mouseIsOverUI:a,setMouseIsOverUI:l,currentCameraMode:e,setCurrentCameraMode:t},children:n.children})},Mpe="modulepreload",Tpe=function(n){return"/CharacterStudio/"+n},PD={},Npe=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=Tpe(s),s in PD)return;PD[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const u=i[c];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const A=document.createElement("link");if(A.rel=o?"stylesheet":Mpe,o||(A.as="script",A.crossOrigin=""),A.href=s,document.head.appendChild(A),o)return new Promise((c,u)=>{A.addEventListener("load",c),A.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function $B(){return $B=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$B.apply(this,arguments)}function kpe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Dpe(n){Ce.useEffect(n,[])}function Lpe(n,e){e===void 0&&(e={});var t=e,r=t.volume,i=r===void 0?1:r,s=t.playbackRate,o=s===void 0?1:s,a=t.soundEnabled,l=a===void 0?!0:a,A=t.interrupt,c=A===void 0?!1:A,u=t.onload,h=kpe(t,["id","volume","playbackRate","soundEnabled","interrupt","onload"]),d=X.useRef(null),p=X.useRef(!1),f=X.useState(null),m=f[0],g=f[1],v=X.useState(null),w=v[0],B=v[1],C=function(){typeof u=="function"&&u.call(this),p.current&&g(this.duration()*1e3),B(this)};Dpe(function(){return Npe(()=>import("./howler-1f84c7d0.js").then(M=>M.h),[]).then(function(M){if(!p.current){var H;d.current=(H=M.Howl)!==null&&H!==void 0?H:M.default.Howl,p.current=!0,new d.current($B({src:Array.isArray(n)?n:[n],volume:i,rate:o,onload:C},h))}}),function(){p.current=!1}}),X.useEffect(function(){d.current&&w&&B(new d.current($B({src:Array.isArray(n)?n:[n],volume:i,onload:C},h)))},[JSON.stringify(n)]),X.useEffect(function(){w&&(w.volume(i),w.rate(o))},[i,o]);var b=X.useCallback(function(M){typeof M>"u"&&(M={}),!(!w||!l&&!M.forceSoundEnabled)&&(c&&w.stop(),M.playbackRate&&w.rate(M.playbackRate),w.play(M.id))},[w,l,c]),F=X.useCallback(function(M){w&&w.stop(M)},[w]),x=X.useCallback(function(M){w&&w.pause(M)},[w]),E=[b,{sound:w,stop:F,pause:x,duration:m}];return E}const Vpe=[{name:"background/cc_bgm.wav",offset:0,duration:123458.58333333334},{name:"background/cc_bgm_balanced.wav",offset:123458.58333333334,duration:123458.60416666666},{name:"effect/character-load.wav",offset:246917.1875,duration:3030},{name:"effect/class-select.wav",offset:249947.1875,duration:2780},{name:"effect/switchingItem.wav",offset:252727.1875,duration:623.75},{name:"ui/back-next-button.wav",offset:253350.9375,duration:155.02083333333334},{name:"ui/class-mouse-over.wav",offset:253505.95833333334,duration:217.52083333333334},{name:"ui/class_click.wav",offset:253723.4791666667,duration:3123.75},{name:"ui/class_pass.wav",offset:256847.2291666667,duration:155},{name:"ui/option_click.wav",offset:257002.2291666667,duration:155.02083333333334},{name:"ui/randomize-button.wav",offset:257157.25000000003,duration:342.5208333333333},{name:"ui/section_click.wav",offset:257499.77083333337,duration:155}],Ppe="/CharacterStudio/assets/sounds-3322d50e.mp3",bs=Ce.createContext(),Ope=n=>{const e=i=>Vpe.find(s=>i.test(s.name)),[t]=Lpe(Ppe,{sprite:{switchItem:[e(/switchingItem/).offset,e(/switchingItem/).duration],classSelect:[e(/class-select/).offset,e(/class-select/).duration],characterLoad:[e(/character-load/).offset,e(/character-load/).duration],randomizeButton:[e(/randomize-button/).offset,e(/randomize-button/).duration],classMouseOver:[e(/class-mouse-over/).offset,e(/class-mouse-over/).duration],backNextButton:[e(/back-next-button/).offset,e(/back-next-button/).duration]}}),r=(i,s=0)=>{s===0?t({id:i}):setTimeout(()=>{t({id:i})},s)};return L.jsx(bs.Provider,{value:{playSound:r},children:n.children})};function $s(n){"@babel/helpers - typeof";return $s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$s(n)}function lo(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Wpe(n,e){if($s(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if($s(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function tH(n){var e=Wpe(n,"string");return $s(e)=="symbol"?e:e+""}function OD(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,tH(r.key),r)}}function Ao(n,e,t){return e&&OD(n.prototype,e),t&&OD(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function qA(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function vE(n,e){return vE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vE(n,e)}function mb(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&vE(n,e)}function C0(n,e){if(e&&($s(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qA(n)}function Na(n){return Na=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Na(n)}function Oa(n,e,t){return e=tH(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nH(n){if(Array.isArray(n))return n}function Zpe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function WD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function rH(n,e){if(n){if(typeof n=="string")return WD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return WD(n,e)}}function iH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gpe(n){return nH(n)||Zpe(n)||rH(n)||iH()}function ZD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function GD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZD(Object(t),!0).forEach(function(r){Oa(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Jpe={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},Hpe=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lo(this,n),this.init(e,t)}return Ao(n,[{key:"init",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=t||Jpe,this.options=r,this.debug=r.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,r,i,s){return s&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(i).concat(this.prefix," ").concat(t[0])),this.logger[r](t))}},{key:"create",value:function(t){return new n(this.logger,GD(GD({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new n(this.logger,t)}}]),n}(),ga=new Hpe,Ac=function(){function n(){lo(this,n),this.observers={}}return Ao(n,[{key:"on",value:function(t,r){var i=this;return t.split(" ").forEach(function(s){i.observers[s]=i.observers[s]||[],i.observers[s].push(r)}),this}},{key:"off",value:function(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(function(i){return i!==r})}}},{key:"emit",value:function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];if(this.observers[t]){var o=[].concat(this.observers[t]);o.forEach(function(l){l.apply(void 0,i)})}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach(function(l){l.apply(l,[t].concat(i))})}}}]),n}();function jp(){var n,e,t=new Promise(function(r,i){n=r,e=i});return t.resolve=n,t.reject=e,t}function JD(n){return n==null?"":""+n}function zpe(n,e,t){n.forEach(function(r){e[r]&&(t[r]=e[r])})}function aQ(n,e,t){function r(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}function i(){return!n||typeof n=="string"}for(var s=typeof e!="string"?[].concat(e):e.split(".");s.length>1;){if(i())return{};var o=r(s.shift());!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={}}return i()?{}:{obj:n,k:r(s.shift())}}function HD(n,e,t){var r=aQ(n,e,Object),i=r.obj,s=r.k;i[s]=t}function Ype(n,e,t,r){var i=aQ(n,e,Object),s=i.obj,o=i.k;s[o]=s[o]||[],r&&(s[o]=s[o].concat(t)),r||s[o].push(t)}function qB(n,e){var t=aQ(n,e),r=t.obj,i=t.k;if(r)return r[i]}function zD(n,e,t){var r=qB(n,t);return r!==void 0?r:qB(e,t)}function sH(n,e,t){for(var r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?typeof n[r]=="string"||n[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?t&&(n[r]=e[r]):sH(n[r],e[r],t):n[r]=e[r]);return n}function Sd(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Xpe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function jpe(n){return typeof n=="string"?n.replace(/[&<>"'\/]/g,function(e){return Xpe[e]}):n}var vb=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Kpe=[" ",",","?","!",";"];function $pe(n,e,t){e=e||"",t=t||"";var r=Kpe.filter(function(a){return e.indexOf(a)<0&&t.indexOf(a)<0});if(r.length===0)return!0;var i=new RegExp("(".concat(r.map(function(a){return a==="?"?"\\?":a}).join("|"),")")),s=!i.test(n);if(!s){var o=n.indexOf(t);o>0&&!i.test(n.substring(0,o))&&(s=!0)}return s}function YD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function By(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YD(Object(t),!0).forEach(function(r){Oa(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):YD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qpe(n){var e=ege();return function(){var r=Na(n),i;if(e){var s=Na(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return C0(this,i)}}function ege(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function oH(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(n){if(n[e])return n[e];for(var r=e.split(t),i=n,s=0;s<r.length;++s){if(!i||typeof i[r[s]]=="string"&&s+1<r.length)return;if(i[r[s]]===void 0){for(var o=2,a=r.slice(s,s+o).join(t),l=i[a];l===void 0&&r.length>s+o;)o++,a=r.slice(s,s+o).join(t),l=i[a];if(l===void 0)return;if(l===null)return null;if(e.endsWith(a)){if(typeof l=="string")return l;if(a&&typeof l[a]=="string")return l[a]}var A=r.slice(s+o).join(t);return A?oH(l,A,t):void 0}i=i[r[s]]}return i}}var tge=function(n){mb(t,n);var e=qpe(t);function t(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return lo(this,t),i=e.call(this),vb&&Ac.call(qA(i)),i.data=r||{},i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return Ao(t,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var s=this.options.ns.indexOf(i);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,A=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure,c=[i,s];o&&typeof o!="string"&&(c=c.concat(o)),o&&typeof o=="string"&&(c=c.concat(l?o.split(l):o)),i.indexOf(".")>-1&&(c=i.split("."));var u=qB(this.data,c);return u||!A||typeof o!="string"?u:oH(this.data&&this.data[i]&&this.data[i][s],o,l)}},{key:"addResource",value:function(i,s,o,a){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},A=this.options.keySeparator;A===void 0&&(A=".");var c=[i,s];o&&(c=c.concat(A?o.split(A):o)),i.indexOf(".")>-1&&(c=i.split("."),a=s,s=c[1]),this.addNamespaces(s),HD(this.data,c,a),l.silent||this.emit("added",i,s,o,a)}},{key:"addResources",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var l in o)(typeof o[l]=="string"||Object.prototype.toString.apply(o[l])==="[object Array]")&&this.addResource(i,s,l,o[l],{silent:!0});a.silent||this.emit("added",i,s,o)}},{key:"addResourceBundle",value:function(i,s,o,a,l){var A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},c=[i,s];i.indexOf(".")>-1&&(c=i.split("."),a=o,o=s,s=c[1]),this.addNamespaces(s);var u=qB(this.data,c)||{};a?sH(u,o,l):u=By(By({},u),o),HD(this.data,c,u),A.silent||this.emit("added",i,s,o)}},{key:"removeResourceBundle",value:function(i,s){this.hasResourceBundle(i,s)&&delete this.data[i][s],this.removeNamespaces(s),this.emit("removed",i,s)}},{key:"hasResourceBundle",value:function(i,s){return this.getResource(i,s)!==void 0}},{key:"getResourceBundle",value:function(i,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?By(By({},{}),this.getResource(i,s)):this.getResource(i,s)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var s=this.getDataByLanguage(i),o=s&&Object.keys(s)||[];return!!o.find(function(a){return s[a]&&Object.keys(s[a]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),t}(Ac),aH={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,r,i,s){var o=this;return e.forEach(function(a){o.processors[a]&&(t=o.processors[a].process(t,r,i,s))}),t}};function XD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function oi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XD(Object(t),!0).forEach(function(r){Oa(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):XD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function nge(n){var e=rge();return function(){var r=Na(n),i;if(e){var s=Na(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return C0(this,i)}}function rge(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var jD={},KD=function(n){mb(t,n);var e=nge(t);function t(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return lo(this,t),i=e.call(this),vb&&Ac.call(qA(i)),zpe(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r,qA(i)),i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=ga.create("translator"),i}return Ao(t,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var o=this.resolve(i,s);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(i,s){var o=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=s.ns||this.options.defaultNS||[],A=o&&i.indexOf(o)>-1,c=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!$pe(i,o,a);if(A&&!c){var u=i.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:i,namespaces:l};var h=i.split(o);(o!==a||o===a&&this.options.ns.indexOf(h[0])>-1)&&(l=h.shift()),i=h.join(a)}return typeof l=="string"&&(l=[l]),{key:i,namespaces:l}}},{key:"translate",value:function(i,s,o){var a=this;if($s(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),s||(s={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var l=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,A=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=this.extractFromKey(i[i.length-1],s),u=c.key,h=c.namespaces,d=h[h.length-1],p=s.lng||this.language,f=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&p.toLowerCase()==="cimode"){if(f){var m=s.nsSeparator||this.options.nsSeparator;return l?{res:"".concat(d).concat(m).concat(u),usedKey:u,exactUsedKey:u,usedLng:p,usedNS:d}:"".concat(d).concat(m).concat(u)}return l?{res:u,usedKey:u,exactUsedKey:u,usedLng:p,usedNS:d}:u}var g=this.resolve(i,s),v=g&&g.res,w=g&&g.usedKey||u,B=g&&g.exactUsedKey||u,C=Object.prototype.toString.apply(v),b=["[object Number]","[object Function]","[object RegExp]"],F=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject,E=typeof v!="string"&&typeof v!="boolean"&&typeof v!="number";if(x&&v&&E&&b.indexOf(C)<0&&!(typeof F=="string"&&C==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var M=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,v,oi(oi({},s),{},{ns:h})):"key '".concat(u," (").concat(this.language,")' returned an object instead of string.");return l?(g.res=M,g):M}if(A){var H=C==="[object Array]",O=H?[]:{},U=H?B:w;for(var y in v)if(Object.prototype.hasOwnProperty.call(v,y)){var I="".concat(U).concat(A).concat(y);O[y]=this.translate(I,oi(oi({},s),{joinArrays:!1,ns:h})),O[y]===I&&(O[y]=v[y])}v=O}}else if(x&&typeof F=="string"&&C==="[object Array]")v=v.join(F),v&&(v=this.extendTranslation(v,i,s,o));else{var R=!1,D=!1,k=s.count!==void 0&&typeof s.count!="string",V=t.hasDefaultValue(s),Z=k?this.pluralResolver.getSuffix(p,s.count,s):"",N=s["defaultValue".concat(Z)]||s.defaultValue;!this.isValidLookup(v)&&V&&(R=!0,v=N),this.isValidLookup(v)||(D=!0,v=u);var _=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,z=_&&D?void 0:v,ie=V&&N!==v&&this.options.updateMissing;if(D||R||ie){if(this.logger.log(ie?"updateKey":"missingKey",p,d,u,ie?N:v),A){var T=this.resolve(u,oi(oi({},s),{},{keySeparator:!1}));T&&T.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var q=[],ge=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ge&&ge[0])for(var he=0;he<ge.length;he++)q.push(ge[he]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(s.lng||this.language):q.push(s.lng||this.language);var Ae=function(ce,me,_e){var P=V&&_e!==v?_e:z;a.options.missingKeyHandler?a.options.missingKeyHandler(ce,d,me,P,ie,s):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(ce,d,me,P,ie,s),a.emit("missingKey",ce,d,me,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&k?q.forEach(function($){a.pluralResolver.getSuffixes($,s).forEach(function(ce){Ae([$],u+ce,s["defaultValue".concat(ce)]||N)})}):Ae(q,u,N))}v=this.extendTranslation(v,i,s,g,o),D&&v===u&&this.options.appendNamespaceToMissingKey&&(v="".concat(d,":").concat(u)),(D||R)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(d,":").concat(u):u,R?v:void 0):v=this.options.parseMissingKeyHandler(v))}return l?(g.res=v,g):v}},{key:"extendTranslation",value:function(i,s,o,a,l){var A=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,oi(oi({},this.options.interpolation.defaultVariables),o),a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(oi(oi({},o),{interpolation:oi(oi({},this.options.interpolation),o.interpolation)}));var c=typeof i=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),u;if(c){var h=i.match(this.interpolator.nestingRegexp);u=h&&h.length}var d=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(d=oi(oi({},this.options.interpolation.defaultVariables),d)),i=this.interpolator.interpolate(i,d,o.lng||this.language,o),c){var p=i.match(this.interpolator.nestingRegexp),f=p&&p.length;u<f&&(o.nest=!1)}o.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var v=arguments.length,w=new Array(v),B=0;B<v;B++)w[B]=arguments[B];return l&&l[0]===w[0]&&!o.context?(A.logger.warn("It seems you are nesting recursively key: ".concat(w[0]," in key: ").concat(s[0])),null):A.translate.apply(A,w.concat([s]))},o)),o.interpolation&&this.interpolator.reset()}var m=o.postProcess||this.options.postProcess,g=typeof m=="string"?[m]:m;return i!=null&&g&&g.length&&o.applyPostProcessor!==!1&&(i=aH.handle(g,i,s,this.options&&this.options.postProcessPassResolved?oi({i18nResolved:a},o):o,this)),i}},{key:"resolve",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,l,A,c,u;return typeof i=="string"&&(i=[i]),i.forEach(function(h){if(!s.isValidLookup(a)){var d=s.extractFromKey(h,o),p=d.key;l=p;var f=d.namespaces;s.options.fallbackNS&&(f=f.concat(s.options.fallbackNS));var m=o.count!==void 0&&typeof o.count!="string",g=m&&!o.ordinal&&o.count===0&&s.pluralResolver.shouldUseIntlApi(),v=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",w=o.lngs?o.lngs:s.languageUtils.toResolveHierarchy(o.lng||s.language,o.fallbackLng);f.forEach(function(B){s.isValidLookup(a)||(u=B,!jD["".concat(w[0],"-").concat(B)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(u)&&(jD["".concat(w[0],"-").concat(B)]=!0,s.logger.warn('key "'.concat(l,'" for languages "').concat(w.join(", "),`" won't get resolved as namespace "`).concat(u,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(function(C){if(!s.isValidLookup(a)){c=C;var b=[p];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(b,p,C,B,o);else{var F;m&&(F=s.pluralResolver.getSuffix(C,o.count,o));var x="".concat(s.options.pluralSeparator,"zero");if(m&&(b.push(p+F),g&&b.push(p+x)),v){var E="".concat(p).concat(s.options.contextSeparator).concat(o.context);b.push(E),m&&(b.push(E+F),g&&b.push(E+x))}}for(var M;M=b.pop();)s.isValidLookup(a)||(A=M,a=s.getResource(C,B,M,o))}}))})}}),{res:a,usedKey:l,exactUsedKey:A,usedLng:c,usedNS:u}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,s,o,a):this.resourceStore.getResource(i,s,o,a)}}],[{key:"hasDefaultValue",value:function(i){var s="defaultValue";for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&s===o.substring(0,s.length)&&i[o]!==void 0)return!0;return!1}}]),t}(Ac);function II(n){return n.charAt(0).toUpperCase()+n.slice(1)}var $D=function(){function n(e){lo(this,n),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ga.create("languageUtils")}return Ao(n,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var r=t.split("-");return this.formatLanguageCode(r[0])}},{key:"formatLanguageCode",value:function(t){if(typeof t=="string"&&t.indexOf("-")>-1){var r=["hans","hant","latn","cyrl","cans","mong","arab"],i=t.split("-");return this.options.lowerCaseLng?i=i.map(function(s){return s.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=II(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=II(i[1].toLowerCase())),r.indexOf(i[2].toLowerCase())>-1&&(i[2]=II(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var r=this;if(!t)return null;var i;return t.forEach(function(s){if(!i){var o=r.formatLanguageCode(s);(!r.options.supportedLngs||r.isSupportedCode(o))&&(i=o)}}),!i&&this.options.supportedLngs&&t.forEach(function(s){if(!i){var o=r.getLanguagePartFromCode(s);if(r.isSupportedCode(o))return i=o;i=r.options.supportedLngs.find(function(a){if(a.indexOf(o)===0)return a})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!r)return t.default||[];var i=t[r];return i||(i=t[this.getScriptPartFromCode(r)]),i||(i=t[this.formatLanguageCode(r)]),i||(i=t[this.getLanguagePartFromCode(r)]),i||(i=t.default),i||[]}},{key:"toResolveHierarchy",value:function(t,r){var i=this,s=this.getFallbackCodes(r||this.options.fallbackLng||[],t),o=[],a=function(A){A&&(i.isSupportedCode(A)?o.push(A):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(A)))};return typeof t=="string"&&t.indexOf("-")>-1?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(t))):typeof t=="string"&&a(this.formatLanguageCode(t)),s.forEach(function(l){o.indexOf(l)<0&&a(i.formatLanguageCode(l))}),o}}]),n}(),ige=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],sge={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},oge=["v1","v2","v3"],qD={zero:0,one:1,two:2,few:3,many:4,other:5};function age(){var n={};return ige.forEach(function(e){e.lngs.forEach(function(t){n[t]={numbers:e.nr,plurals:sge[e.fc]}})}),n}var lge=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lo(this,n),this.languageUtils=e,this.options=t,this.logger=ga.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=age()}return Ao(n,[{key:"addRule",value:function(t,r){this.rules[t]=r}},{key:"getRule",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(t,r);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,i).map(function(s){return"".concat(r).concat(s)})}},{key:"getSuffixes",value:function(t){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(t,i);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(o,a){return qD[o]-qD[a]}).map(function(o){return"".concat(r.options.prepend).concat(o)}):s.numbers.map(function(o){return r.getSuffix(t,o,i)}):[]}},{key:"getSuffix",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(t,i);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(r)):this.getSuffixRetroCompatible(s,r):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,r){var i=this,s=t.noAbs?t.plurals(r):t.plurals(Math.abs(r)),o=t.numbers[s];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var a=function(){return i.options.prepend&&o.toString()?i.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?a():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!oge.includes(this.options.compatibilityJSON)}}]),n}();function e3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function wo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?e3(Object(t),!0).forEach(function(r){Oa(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):e3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Age=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};lo(this,n),this.logger=ga.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return Ao(n,[{key:"init",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var r=t.interpolation;this.escape=r.escape!==void 0?r.escape:jpe,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?Sd(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?Sd(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?Sd(r.nestingPrefix):r.nestingPrefixEscaped||Sd("$t("),this.nestingSuffix=r.nestingSuffix?Sd(r.nestingSuffix):r.nestingSuffixEscaped||Sd(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var r="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(r,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(t,r,i,s){var o=this,a,l,A,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(m){return m.replace(/\$/g,"$$$$")}var h=function(g){if(g.indexOf(o.formatSeparator)<0){var v=zD(r,c,g);return o.alwaysFormat?o.format(v,void 0,i,wo(wo(wo({},s),r),{},{interpolationkey:g})):v}var w=g.split(o.formatSeparator),B=w.shift().trim(),C=w.join(o.formatSeparator).trim();return o.format(zD(r,c,B),C,i,wo(wo(wo({},s),r),{},{interpolationkey:B}))};this.resetRegExp();var d=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,p=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,f=[{regex:this.regexpUnescape,safeValue:function(g){return u(g)}},{regex:this.regexp,safeValue:function(g){return o.escapeValue?u(o.escape(g)):u(g)}}];return f.forEach(function(m){for(A=0;a=m.regex.exec(t);){var g=a[1].trim();if(l=h(g),l===void 0)if(typeof d=="function"){var v=d(t,a,s);l=typeof v=="string"?v:""}else if(s&&Object.prototype.hasOwnProperty.call(s,g))l="";else if(p){l=a[0];continue}else o.logger.warn("missed to pass in variable ".concat(g," for interpolating ").concat(t)),l="";else typeof l!="string"&&!o.useRawValueToEscape&&(l=JD(l));var w=m.safeValue(l);if(t=t.replace(a[0],w),p?(m.regex.lastIndex+=l.length,m.regex.lastIndex-=a[0].length):m.regex.lastIndex=0,A++,A>=o.maxReplaces)break}}),t}},{key:"nest",value:function(t,r){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,a,l;function A(d,p){var f=this.nestingOptionsSeparator;if(d.indexOf(f)<0)return d;var m=d.split(new RegExp("".concat(f,"[ ]*{"))),g="{".concat(m[1]);d=m[0],g=this.interpolate(g,l);var v=g.match(/'/g),w=g.match(/"/g);(v&&v.length%2===0&&!w||w.length%2!==0)&&(g=g.replace(/'/g,'"'));try{l=JSON.parse(g),p&&(l=wo(wo({},p),l))}catch(B){return this.logger.warn("failed parsing options string in nesting for key ".concat(d),B),"".concat(d).concat(f).concat(g)}return delete l.defaultValue,d}for(;o=this.nestingRegexp.exec(t);){var c=[];l=wo({},s),l=l.replace&&typeof l.replace!="string"?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;var u=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var h=o[1].split(this.formatSeparator).map(function(d){return d.trim()});o[1]=h.shift(),c=h,u=!0}if(a=r(A.call(this,o[1].trim(),l),l),a&&o[0]===t&&typeof a!="string")return a;typeof a!="string"&&(a=JD(a)),a||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(t)),a=""),u&&(a=c.reduce(function(d,p){return i.format(d,p,s.lng,wo(wo({},s),{},{interpolationkey:o[1].trim()}))},a.trim())),t=t.replace(o[0],a),this.regexp.lastIndex=0}return t}}]),n}();function t3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function rl(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?t3(Object(t),!0).forEach(function(r){Oa(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):t3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cge(n){var e=n.toLowerCase().trim(),t={};if(n.indexOf("(")>-1){var r=n.split("(");e=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);if(e==="currency"&&i.indexOf(":")<0)t.currency||(t.currency=i.trim());else if(e==="relativetime"&&i.indexOf(":")<0)t.range||(t.range=i.trim());else{var s=i.split(";");s.forEach(function(o){if(o){var a=o.split(":"),l=Gpe(a),A=l[0],c=l.slice(1),u=c.join(":").trim().replace(/^'+|'+$/g,"");t[A.trim()]||(t[A.trim()]=u),u==="false"&&(t[A.trim()]=!1),u==="true"&&(t[A.trim()]=!0),isNaN(u)||(t[A.trim()]=parseInt(u,10))}})}}return{formatName:e,formatOptions:t}}function Ud(n){var e={};return function(r,i,s){var o=i+JSON.stringify(s),a=e[o];return a||(a=n(i,s),e[o]=a),a(r)}}var uge=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};lo(this,n),this.logger=ga.create("formatter"),this.options=e,this.formats={number:Ud(function(t,r){var i=new Intl.NumberFormat(t,rl({},r));return function(s){return i.format(s)}}),currency:Ud(function(t,r){var i=new Intl.NumberFormat(t,rl(rl({},r),{},{style:"currency"}));return function(s){return i.format(s)}}),datetime:Ud(function(t,r){var i=new Intl.DateTimeFormat(t,rl({},r));return function(s){return i.format(s)}}),relativetime:Ud(function(t,r){var i=new Intl.RelativeTimeFormat(t,rl({},r));return function(s){return i.format(s,r.range||"day")}}),list:Ud(function(t,r){var i=new Intl.ListFormat(t,rl({},r));return function(s){return i.format(s)}})},this.init(e)}return Ao(n,[{key:"init",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=r.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(t,r){this.formats[t.toLowerCase().trim()]=r}},{key:"addCached",value:function(t,r){this.formats[t.toLowerCase().trim()]=Ud(r)}},{key:"format",value:function(t,r,i){var s=this,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=r.split(this.formatSeparator),l=a.reduce(function(A,c){var u=cge(c),h=u.formatName,d=u.formatOptions;if(s.formats[h]){var p=A;try{var f=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},m=f.locale||f.lng||o.locale||o.lng||i;p=s.formats[h](A,m,rl(rl(rl({},d),o),f))}catch(g){s.logger.warn(g)}return p}else s.logger.warn("there was no format function for ".concat(h));return A},t);return l}}]),n}();function n3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function r3(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?n3(Object(t),!0).forEach(function(r){Oa(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):n3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function dge(n){var e=hge();return function(){var r=Na(n),i;if(e){var s=Na(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return C0(this,i)}}function hge(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fge(n,e){n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)}var pge=function(n){mb(t,n);var e=dge(t);function t(r,i,s){var o,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return lo(this,t),o=e.call(this),vb&&Ac.call(qA(o)),o.backend=r,o.store=i,o.services=s,o.languageUtils=s.languageUtils,o.options=a,o.logger=ga.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=a.maxParallelReads||10,o.readingCalls=0,o.maxRetries=a.maxRetries>=0?a.maxRetries:5,o.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(s,a.backend,a),o}return Ao(t,[{key:"queueLoad",value:function(i,s,o,a){var l=this,A={},c={},u={},h={};return i.forEach(function(d){var p=!0;s.forEach(function(f){var m="".concat(d,"|").concat(f);!o.reload&&l.store.hasResourceBundle(d,f)?l.state[m]=2:l.state[m]<0||(l.state[m]===1?c[m]===void 0&&(c[m]=!0):(l.state[m]=1,p=!1,c[m]===void 0&&(c[m]=!0),A[m]===void 0&&(A[m]=!0),h[f]===void 0&&(h[f]=!0)))}),p||(u[d]=!0)}),(Object.keys(A).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(A),pending:Object.keys(c),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(h)}}},{key:"loaded",value:function(i,s,o){var a=i.split("|"),l=a[0],A=a[1];s&&this.emit("failedLoading",l,A,s),o&&this.store.addResourceBundle(l,A,o),this.state[i]=s?-1:2;var c={};this.queue.forEach(function(u){Ype(u.loaded,[l],A),fge(u,i),s&&u.errors.push(s),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(function(h){c[h]||(c[h]={});var d=u.loaded[h];d.length&&d.forEach(function(p){c[h][p]===void 0&&(c[h][p]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(function(u){return!u.done})}},{key:"read",value:function(i,s,o){var a=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,c=arguments.length>5?arguments[5]:void 0;if(!i.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:s,fcName:o,tried:l,wait:A,callback:c});return}this.readingCalls++;var u=function(f,m){if(a.readingCalls--,a.waitingReads.length>0){var g=a.waitingReads.shift();a.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(f&&m&&l<a.maxRetries){setTimeout(function(){a.read.call(a,i,s,o,l+1,A*2,c)},A);return}c(f,m)},h=this.backend[o].bind(this.backend);if(h.length===2){try{var d=h(i,s);d&&typeof d.then=="function"?d.then(function(p){return u(null,p)}).catch(u):u(null,d)}catch(p){u(p)}return}return h(i,s,u)}},{key:"prepareLoading",value:function(i,s){var o=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof s=="string"&&(s=[s]);var A=this.queueLoad(i,s,a,l);if(!A.toLoad.length)return A.pending.length||l(),null;A.toLoad.forEach(function(c){o.loadOne(c)})}},{key:"load",value:function(i,s,o){this.prepareLoading(i,s,{},o)}},{key:"reload",value:function(i,s,o){this.prepareLoading(i,s,{reload:!0},o)}},{key:"loadOne",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=i.split("|"),l=a[0],A=a[1];this.read(l,A,"read",void 0,void 0,function(c,u){c&&s.logger.warn("".concat(o,"loading namespace ").concat(A," for language ").concat(l," failed"),c),!c&&u&&s.logger.log("".concat(o,"loaded namespace ").concat(A," for language ").concat(l),u),s.loaded(i,c,u)})}},{key:"saveMissing",value:function(i,s,o,a,l){var A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){var u=r3(r3({},A),{},{isUpdate:l}),h=this.backend.create.bind(this.backend);if(h.length<6)try{var d;h.length===5?d=h(i,s,o,a,u):d=h(i,s,o,a),d&&typeof d.then=="function"?d.then(function(p){return c(null,p)}).catch(c):c(null,d)}catch(p){c(p)}else h(i,s,o,a,c,u)}!i||!i[0]||this.store.addResource(i[0],s,o,a)}}}]),t}(Ac);function i3(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if($s(e[1])==="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),$s(e[2])==="object"||$s(e[3])==="object"){var r=e[3]||e[2];Object.keys(r).forEach(function(i){t[i]=r[i]})}return t},interpolation:{escapeValue:!0,format:function(e,t,r,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function s3(n){return typeof n.ns=="string"&&(n.ns=[n.ns]),typeof n.fallbackLng=="string"&&(n.fallbackLng=[n.fallbackLng]),typeof n.fallbackNS=="string"&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n}function o3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function jo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?o3(Object(t),!0).forEach(function(r){Oa(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function gge(n){var e=mge();return function(){var r=Na(n),i;if(e){var s=Na(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return C0(this,i)}}function mge(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Cy(){}function vge(n){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(n));e.forEach(function(t){typeof n[t]=="function"&&(n[t]=n[t].bind(n))})}var eC=function(n){mb(t,n);var e=gge(t);function t(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(lo(this,t),r=e.call(this),vb&&Ac.call(qA(r)),r.options=s3(i),r.services={},r.logger=ga,r.modules={external:[]},vge(qA(r)),s&&!r.isInitialized&&!i.isClone){if(!r.options.initImmediate)return r.init(i,s),C0(r,qA(r));setTimeout(function(){r.init(i,s)},0)}return r}return Ao(t,[{key:"init",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(o=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var a=i3();this.options=jo(jo(jo({},a),this.options),s3(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=jo(jo({},a.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function l(g){return g?typeof g=="function"?new g:g:null}if(!this.options.isClone){this.modules.logger?ga.init(l(this.modules.logger),this.options):ga.init(null,this.options);var A;this.modules.formatter?A=this.modules.formatter:typeof Intl<"u"&&(A=uge);var c=new $D(this.options);this.store=new tge(this.options.resources,this.options);var u=this.services;u.logger=ga,u.resourceStore=this.store,u.languageUtils=c,u.pluralResolver=new lge(c,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),A&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(u.formatter=l(A),u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new Age(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new pge(l(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",function(g){for(var v=arguments.length,w=new Array(v>1?v-1:0),B=1;B<v;B++)w[B-1]=arguments[B];i.emit.apply(i,[g].concat(w))}),this.modules.languageDetector&&(u.languageDetector=l(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=l(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new KD(this.services,this.options),this.translator.on("*",function(g){for(var v=arguments.length,w=new Array(v>1?v-1:0),B=1;B<v;B++)w[B-1]=arguments[B];i.emit.apply(i,[g].concat(w))}),this.modules.external.forEach(function(g){g.init&&g.init(i)})}if(this.format=this.options.interpolation.format,o||(o=Cy),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var d=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];d.forEach(function(g){i[g]=function(){var v;return(v=i.store)[g].apply(v,arguments)}});var p=["addResource","addResources","addResourceBundle","removeResourceBundle"];p.forEach(function(g){i[g]=function(){var v;return(v=i.store)[g].apply(v,arguments),i}});var f=jp(),m=function(){var v=function(B,C){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),f.resolve(C),o(B,C)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return v(null,i.t.bind(i));i.changeLanguage(i.options.lng,v)};return this.options.resources||!this.options.initImmediate?m():setTimeout(m,0),f}},{key:"loadResources",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cy,a=o,l=typeof i=="string"?i:this.language;if(typeof i=="function"&&(a=i),!this.options.resources||this.options.partialBundledLanguages){if(l&&l.toLowerCase()==="cimode")return a();var A=[],c=function(d){if(d){var p=s.services.languageUtils.toResolveHierarchy(d);p.forEach(function(f){A.indexOf(f)<0&&A.push(f)})}};if(l)c(l);else{var u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.forEach(function(h){return c(h)})}this.options.preload&&this.options.preload.forEach(function(h){return c(h)}),this.services.backendConnector.load(A,this.options.ns,function(h){!h&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),a(h)})}else a(null)}},{key:"reloadResources",value:function(i,s,o){var a=jp();return i||(i=this.languages),s||(s=this.options.ns),o||(o=Cy),this.services.backendConnector.reload(i,s,function(l){a.resolve(),o(l)}),a}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&aH.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var s=0;s<this.languages.length;s++){var o=this.languages[s];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(i,s){var o=this;this.isLanguageChangingTo=i;var a=jp();this.emit("languageChanging",i);var l=function(h){o.language=h,o.languages=o.services.languageUtils.toResolveHierarchy(h),o.resolvedLanguage=void 0,o.setResolvedLanguage(h)},A=function(h,d){d?(l(d),o.translator.changeLanguage(d),o.isLanguageChangingTo=void 0,o.emit("languageChanged",d),o.logger.log("languageChanged",d)):o.isLanguageChangingTo=void 0,a.resolve(function(){return o.t.apply(o,arguments)}),s&&s(h,function(){return o.t.apply(o,arguments)})},c=function(h){!i&&!h&&o.services.languageDetector&&(h=[]);var d=typeof h=="string"?h:o.services.languageUtils.getBestMatchFromCodes(h);d&&(o.language||l(d),o.translator.language||o.translator.changeLanguage(d),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage&&o.services.languageDetector.cacheUserLanguage(d)),o.loadResources(d,function(p){A(p,d)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(i),a}},{key:"getFixedT",value:function(i,s,o){var a=this,l=function A(c,u){var h;if($s(u)!=="object"){for(var d=arguments.length,p=new Array(d>2?d-2:0),f=2;f<d;f++)p[f-2]=arguments[f];h=a.options.overloadTranslationOptionHandler([c,u].concat(p))}else h=jo({},u);h.lng=h.lng||A.lng,h.lngs=h.lngs||A.lngs,h.ns=h.ns||A.ns,h.keyPrefix=h.keyPrefix||o||A.keyPrefix;var m=a.options.keySeparator||".",g;return h.keyPrefix&&Array.isArray(c)?g=c.map(function(v){return"".concat(h.keyPrefix).concat(m).concat(v)}):g=h.keyPrefix?"".concat(h.keyPrefix).concat(m).concat(c):c,a.t(g,h)};return typeof i=="string"?l.lng=i:l.lngs=i,l.ns=s,l.keyPrefix=o,l}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var a=this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,A=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var c=function(d,p){var f=s.services.backendConnector.state["".concat(d,"|").concat(p)];return f===-1||f===2};if(o.precheck){var u=o.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(a,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(a,i)&&(!l||c(A,i)))}},{key:"loadNamespaces",value:function(i,s){var o=this,a=jp();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(l){o.options.ns.indexOf(l)<0&&o.options.ns.push(l)}),this.loadResources(function(l){a.resolve(),s&&s(l)}),a):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(i,s){var o=jp();typeof i=="string"&&(i=[i]);var a=this.options.preload||[],l=i.filter(function(A){return a.indexOf(A)<0});return l.length?(this.options.preload=a.concat(l),this.loadResources(function(A){o.resolve(),s&&s(A)}),o):(s&&s(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new $D(i3());return s.indexOf(o.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cy,a=jo(jo(jo({},this.options),s),{isClone:!0}),l=new t(a);(s.debug!==void 0||s.prefix!==void 0)&&(l.logger=l.logger.clone(s));var A=["store","services","language"];return A.forEach(function(c){l[c]=i[c]}),l.services=jo({},this.services),l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l.translator=new KD(l.services,l.options),l.translator.on("*",function(c){for(var u=arguments.length,h=new Array(u>1?u-1:0),d=1;d<u;d++)h[d-1]=arguments[d];l.emit.apply(l,[c].concat(h))}),l.init(a,o),l.translator.options=l.options,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),t}(Ac);Oa(eC,"createInstance",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new eC(n,e)});var ii=eC.createInstance();ii.createInstance=eC.createInstance;ii.createInstance;ii.dir;ii.init;ii.loadResources;ii.reloadResources;ii.use;ii.changeLanguage;ii.getFixedT;ii.t;ii.exists;ii.setDefaultNamespace;ii.hasLoadedNamespace;ii.loadNamespaces;ii.loadLanguages;function yge(){if(console&&console.warn){for(var n,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[0]=="string"&&(t[0]="react-i18next:: ".concat(t[0])),(n=console).warn.apply(n,t)}}var a3={};function yE(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];typeof e[0]=="string"&&a3[e[0]]||(typeof e[0]=="string"&&(a3[e[0]]=new Date),yge.apply(void 0,e))}function l3(n,e,t){n.loadNamespaces(e,function(){if(n.isInitialized)t();else{var r=function i(){setTimeout(function(){n.off("initialized",i)},0),t()};n.on("initialized",r)}})}function wge(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;var o=function(l,A){var c=e.services.backendConnector.state["".concat(l,"|").concat(A)];return c===-1||c===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(r,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,n)&&(!i||o(s,n)))}function Bge(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return yE("i18n.languages were undefined or empty",e.languages),!0;var r=e.options.ignoreJSONStructure!==void 0;return r?e.hasLoadedNamespace(n,{precheck:function(s,o){if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!o(s.isLanguageChangingTo,n))return!1}}):wge(n,e,t)}var Cge=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,bge={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},xge=function(e){return bge[e]},Ige=function(e){return e.replace(Cge,xge)};function A3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function c3(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?A3(Object(t),!0).forEach(function(r){Oa(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):A3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var wE={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Ige};function Fge(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};wE=c3(c3({},wE),n)}function _ge(){return wE}var lH;function Ege(n){lH=n}function Sge(){return lH}var Uge={type:"3rdParty",init:function(e){Fge(e.options.react),Ege(e)}},Qge=Ce.createContext(),Rge=function(){function n(){lo(this,n),this.usedNamespaces={}}return Ao(n,[{key:"addUsedNamespaces",value:function(t){var r=this;t.forEach(function(i){r.usedNamespaces[i]||(r.usedNamespaces[i]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),n}();function Mge(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,A=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){A=!0,i=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(A)throw i}}return a}}function Tge(n,e){return nH(n)||Mge(n,e)||rH(n,e)||iH()}function u3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function FI(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?u3(Object(t),!0).forEach(function(r){Oa(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):u3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Nge=function(e,t){var r=Ce.useRef();return Ce.useEffect(function(){r.current=t?r.current:e},[e,t]),r.current};function kge(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.i18n,r=Ce.useContext(Qge)||{},i=r.i18n,s=r.defaultNS,o=t||i||Sge();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new Rge),!o){yE("You will need to pass in an i18next instance by using initReactI18next");var a=function(E,M){return typeof M=="string"?M:M&&$s(M)==="object"&&typeof M.defaultValue=="string"?M.defaultValue:Array.isArray(E)?E[E.length-1]:E},l=[a,{},!1];return l.t=a,l.i18n={},l.ready=!1,l}o.options.react&&o.options.react.wait!==void 0&&yE("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var A=FI(FI(FI({},_ge()),o.options.react),e),c=A.useSuspense,u=A.keyPrefix,h=n||s||o.options&&o.options.defaultNS;h=typeof h=="string"?[h]:h||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(h);var d=(o.isInitialized||o.initializedStoreOnce)&&h.every(function(x){return Bge(x,o,A)});function p(){return o.getFixedT(null,A.nsMode==="fallback"?h:h[0],u)}var f=Ce.useState(p),m=Tge(f,2),g=m[0],v=m[1],w=h.join(),B=Nge(w),C=Ce.useRef(!0);Ce.useEffect(function(){var x=A.bindI18n,E=A.bindI18nStore;C.current=!0,!d&&!c&&l3(o,h,function(){C.current&&v(p)}),d&&B&&B!==w&&C.current&&v(p);function M(){C.current&&v(p)}return x&&o&&o.on(x,M),E&&o&&o.store.on(E,M),function(){C.current=!1,x&&o&&x.split(" ").forEach(function(H){return o.off(H,M)}),E&&o&&E.split(" ").forEach(function(H){return o.store.off(H,M)})}},[o,w]);var b=Ce.useRef(!0);Ce.useEffect(function(){C.current&&!b.current&&v(p),b.current=!1},[o,u]);var F=[g,o,d];if(F.t=g,F.i18n=o,F.ready=d,d||!d&&!c)return F;throw new Promise(function(x){l3(o,h,function(){x()})})}var AH=[],Dge=AH.forEach,Lge=AH.slice;function Vge(n){return Dge.call(Lge.call(arguments,1),function(e){if(e)for(var t in e)n[t]===void 0&&(n[t]=e[t])}),n}var d3=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Pge=function(e,t,r){var i=r||{};i.path=i.path||"/";var s=encodeURIComponent(t),o="".concat(e,"=").concat(s);if(i.maxAge>0){var a=i.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(i.domain){if(!d3.test(i.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(i.domain)}if(i.path){if(!d3.test(i.path))throw new TypeError("option path is invalid");o+="; Path=".concat(i.path)}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(i.expires.toUTCString())}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite){var l=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},h3={create:function(e,t,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+r*60*1e3)),i&&(s.domain=i),document.cookie=Pge(e,encodeURIComponent(t),s)},read:function(e){for(var t="".concat(e,"="),r=document.cookie.split(";"),i=0;i<r.length;i++){for(var s=r[i];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null},remove:function(e){this.create(e,"",-1)}},Oge={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&typeof document<"u"){var r=h3.read(e.lookupCookie);r&&(t=r)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&typeof document<"u"&&h3.create(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},Wge={name:"querystring",lookup:function(e){var t;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=r.substring(1),s=i.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var l=s[o].substring(0,a);l===e.lookupQuerystring&&(t=s[o].substring(a+1))}}}return t}},Kp=null,f3=function(){if(Kp!==null)return Kp;try{Kp=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Kp=!1}return Kp},Zge={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&f3()){var r=window.localStorage.getItem(e.lookupLocalStorage);r&&(t=r)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&f3()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},$p=null,p3=function(){if($p!==null)return $p;try{$p=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{$p=!1}return $p},Gge={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&p3()){var r=window.sessionStorage.getItem(e.lookupSessionStorage);r&&(t=r)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&p3()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},Jge={name:"navigator",lookup:function(e){var t=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)t.push(navigator.languages[r]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},Hge={name:"htmlTag",lookup:function(e){var t,r=e.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},zge={name:"path",lookup:function(e){var t;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof r[e.lookupFromPathIndex]!="string")return;t=r[e.lookupFromPathIndex].replace("/","")}else t=r[0].replace("/","")}return t}},Yge={name:"subdomain",lookup:function(e){var t=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[t]}};function Xge(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var cH=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lo(this,n),this.type="languageDetector",this.detectors={},this.init(e,t)}return Ao(n,[{key:"init",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=Vge(r,this.options||{},Xge()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(Oge),this.addDetector(Wge),this.addDetector(Zge),this.addDetector(Gge),this.addDetector(Jge),this.addDetector(Hge),this.addDetector(zge),this.addDetector(Yge)}},{key:"addDetector",value:function(t){this.detectors[t.name]=t}},{key:"detect",value:function(t){var r=this;t||(t=this.options.order);var i=[];return t.forEach(function(s){if(r.detectors[s]){var o=r.detectors[s].lookup(r.options);o&&typeof o=="string"&&(o=[o]),o&&(i=i.concat(o))}}),this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}},{key:"cacheUserLanguage",value:function(t,r){var i=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||r.forEach(function(s){i.detectors[s]&&i.detectors[s].cacheUserLanguage(t,i.options)}))}}]),n}();cH.type="languageDetector";const jge={translation:{pageTitles:{chooseClass:"Choose Character Class",chooseAppearance:"Choose Appearance",createBio:"Create Bio",saveCharacter:"Save Your Character",chat:"Chat With Your Character"},classes:{beastPainter:{name:"Beast Painter",description:"Paints beasts"},engineer:{name:"Engineer",description:"Builds things"},dropHunter:{name:"Drop Hunter",description:"Hunts drops"},theDegen:{name:"The Degen",description:"Degens"},neuralHacker:{name:"Neural Hacker",description:"Hacks neural networks"},liskWitch:{name:"Lisk Witch",description:"Witches lisk"},bruiser:{name:"Bruiser",description:"Bruises things"}},callToAction:{next:"Next",back:"Back",randomize:"Randomize",chat:"Chat",send:"Send"},editor:{title:"Appearance",head:"Head",body:"Body",eyes:"Eyes",outer:"Outer",chest:"Chest",legs:"Legs",feet:"Feet",accessories:"Accessories"},labels:{name:"Name",voice:"Voice",favoriteColor:"Favorite Color",preferredGreeting:"Preferred Greeting",bio:"Bio",question:"Question",yourName:"Your Name",conversation:"Conversation"},text:{unoptimized:"Unoptimized",apiUnderMaintnance:"Voice generation API is temporarily disabled for maintenance!"}}},Kge={translation:{pageTitles:{chooseClass:"Выбрать Класс Персонажа",chooseAppearance:"Выбрать Внешность",createBio:"Создать Биографию",saveCharacter:"Сохранить Персонажа",chat:"Общаться Со Своим Персонажем"},classes:{beastPainter:{name:"Анималист",description:"Рисует зверей"},engineer:{name:"Инженер",description:"Строит вещи"},dropHunter:{name:"Охотник за дропами",description:"Охотится на дропы"},theDegen:{name:"Деген",description:"Дегены"},neuralHacker:{name:"Нейронный Хакер",description:"Взламывает нейр. сети"},liskWitch:{name:"Лиск Ведьма",description:"Лиск Ведьмы"},bruiser:{name:"Громила",description:"Громит вещи"}},callToAction:{next:"Далее",back:"Назад",randomize:"Рандомизировать",chat:"Чат",send:"Отправить"},editor:{title:"Внешность",head:"Голова",body:"Тело",eyes:"Глаза",outer:"Внешний",chest:"Грудь",legs:"Ноги",feet:"Стопы",accessories:"Аксессуары"},labels:{name:"Имя",voice:"Голос",favoriteColor:"Любимый Цвет",preferredGreeting:"Предпочитаемое Приветствие",bio:"Биография",question:"Вопрос",yourName:"Ваше Имя",conversation:"Разговор"},text:{unoptimized:"Неоптимизи­рованный",apiUnderMaintnance:"API генерации голоса временно отключен на техническое обслуживание."}}},$ge={translation:{pageTitles:{chooseClass:"选择角色类型",chooseAppearance:"选择外观",createBio:"创建简介",saveCharacter:"保存角色",chat:"与你的角色聊天"},classes:{beastPainter:{name:"野兽画家",description:"画野兽"},engineer:{name:"工程师",description:"建造物品"},dropHunter:{name:"投放猎手",description:"猎取投放品"},theDegen:{name:"豪赌家",description:"资深赌徒"},neuralHacker:{name:"神经黑客",description:"侵入神经网络"},liskWitch:{name:"Lisk 巫师",description:"施法于 Lisk"},bruiser:{name:"碾压者",description:"碾碎一切"}},callToAction:{next:"下一步",back:"返回",randomize:"随机",chat:"聊天",send:"发送"},editor:{title:"外观",head:"头部",body:"身体",eyes:"眼睛",outer:"外套",chest:"上身",legs:"腿部",feet:"脚部",accessories:"配件"},labels:{name:"名字",voice:"语音",favoriteColor:"颜色偏好",preferredGreeting:"首选问候语",bio:"简介",question:"问题",yourName:"你的名字",conversation:"对话"},text:{unoptimized:"未优化",apiUnderMaintnance:"语音生成API暂时关闭进行维护!"}}},qge={en:jge,ru:Kge,zh:$ge};ii.use(cH).use(Uge).init({debug:!0,fallbackLng:"en",interpolation:{escapeValue:!1},resources:qge});const xs=Ce.createContext(),eme=n=>{const{t:e}=kge();return L.jsx(xs.Provider,{value:{t:e},children:n.children})},tme=`       
  uniform vec3 cameraDir;
  uniform vec3 eye;
  
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  varying vec2 vUv;

  void main() {
    vUv = uv;
    vec3 pos = position;
    vSurfaceNormal = normalize(normal);
    vWorldPosition = (modelMatrix * vec4( pos, 1.0 )).xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 ); 
  }
`,nme=` 
  uniform float switchItemDuration;
  uniform float switchItemTime;
  uniform vec3 cameraDir;
  uniform vec3 eye;

  uniform sampler2D auraTexture;

  varying vec3 vSurfaceNormal;
  varying vec3 vWorldPosition;
  varying vec2 vUv;
  void main() {
    float aura = texture2D(
      auraTexture, 
      vec2(
        vUv.x * 2.0,
        vUv.y * 1.0 * (switchItemDuration - switchItemTime)
      )
    ).r;
    
    float dissolveThreshold = 0.1;
    float auraStep = switchItemTime <= dissolveThreshold ? 0. : clamp(switchItemTime, dissolveThreshold, 1.0);
    aura = smoothstep(0.0, auraStep, aura);
    

    vec3 eyeDirection = normalize(eye - vWorldPosition);
    
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 0.7;
    float rim = mix(0.0, 1.0, pow(1. - EdotN, rimStrength));
    float glowIntensity = 2.0;

    vec3 rimColor = mix(vec3(0.00960, 0.833, 0.960), vec3(0., 0., 0.960), rim);
    gl_FragColor.rgb = rimColor * (1. - rim) * glowIntensity;
    gl_FragColor.a = clamp((1. - rim) * glowIntensity, 0.0, 1.0);
    gl_FragColor.a *= (switchItemDuration - switchItemTime);
    gl_FragColor *= aura;
  }
`,rme=`       
  uniform vec4 cameraBillboardQuaternion;

  attribute vec2 scales;
  attribute float opacity;
  attribute vec3 positions;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;

  vec3 rotateVecQuat(vec3 position, vec4 q) {
      vec3 v = position.xyz;
      return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
  }
  
  void main() {  
    vUv = uv;
    vOpacity = opacity;
    
    vec3 pos = position;
    pos = rotateVecQuat(pos, cameraBillboardQuaternion);
    pos.xz *= scales.x;
    pos.y *= scales.y;
    pos += positions;
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,ime=` 
  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;

  void main() {
    float angle = 0.;
    vec2 trig = vec2(cos(angle), sin(angle));
    
    vec2 pos = (vUv - 0.5) * mat2(trig.x, trig.y, -trig.y, trig.x);
    float size = 0.1;
    
    float dist = length(max(abs(pos) - size, 0.));
    float glow = 1. / (dist * 25. + .5);

    gl_FragColor = vec4(glow);
    gl_FragColor.rgb *= vec3(0.00960, 0.833, 0.960);
    float avatarGroundPosition = 0.;
    if (glow < 0.1 || vWorldPosition.y < avatarGroundPosition) {
      discard;
    }
    gl_FragColor.a *= vOpacity;
  }
`,sme=`       
  attribute vec2 scales;
  attribute float opacity;
  attribute vec3 positions;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;
  

  void main() {  
    vUv = uv;
    vOpacity = opacity;
    vSurfaceNormal = normalize(normal);
    
    vec3 pos = position;
    pos.xz *= scales.x;
    pos.y *= scales.y;
    pos += positions;
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,ome=` 
  uniform float radius;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  void main() {

    vec3 eyeDirection = normalize(vec3(0., 10., 0.) - vWorldPosition);
      
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 10.0;
    float rim = distance(vWorldPosition.xz, vec2(0.)) / radius;
    rim = pow(rim, rimStrength);
    
  
    gl_FragColor.rgb = vec3(rim) * vec3(0.00960, 0.833, 0.960) * 2.0;
    gl_FragColor.a = rim;
    gl_FragColor.a = smoothstep(0.3, 0.8, gl_FragColor.a);
    gl_FragColor.a *= vOpacity;
  }
`,ame=`       
  uniform vec4 cameraBillboardQuaternion;

  varying vec2 vUv;
  varying vec3 vWorldPosition;
  
  vec3 rotateVecQuat(vec3 position, vec4 q) {
      vec3 v = position.xyz;
      return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
  }
  void main() {  
    vUv = uv;
    
    vec3 pos = position;
    pos = rotateVecQuat(pos, cameraBillboardQuaternion);
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,lme=` 
  varying vec2 vUv;
  varying vec3 vWorldPosition;

  void main() {
    float col = smoothstep(0.5, 0.2, length(vUv - 0.5));
    gl_FragColor.rgb = mix(vec3(0., 0., 0.960), vec3(0.00960, 0.833, 0.960), col);
    gl_FragColor.a = col;
    gl_FragColor.a *= clamp(vWorldPosition.y * 10., 0.0, 1.0);
  }
`,Ame=`       
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  varying vec2 vUv;

  void main() {
    vUv = uv;
    vec3 pos = position;
    vSurfaceNormal = normalize(normal);
    vWorldPosition = (modelMatrix * vec4( pos, 1.0 )).xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 ); 
  }
`,cme=` 
  uniform vec3 cameraDir;
  uniform vec3 eye;

  uniform float opacity;

  varying vec3 vSurfaceNormal;
  varying vec3 vWorldPosition;
  varying vec2 vUv;
  void main() {
    vec3 eyeDirection = normalize(eye - vWorldPosition);
    
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 0.7;
    float rim = mix(0.0, 1.0, pow(1. - EdotN, rimStrength));
    float glowIntensity = 2.0;

    vec3 rimColor = mix(vec3(1.0), vec3(0.400, 0.723, 0.910), rim);
    gl_FragColor = vec4(rimColor, pow(1. - rim, 2.0));
    gl_FragColor *= pow(1. - vUv.y, 3.0);
    gl_FragColor *= opacity;
  }
`,lQ=(n,e,t)=>{const r=new zt;["position","normal","uv"].forEach(o=>{r.setAttribute(o,n.attributes[o])}),r.setIndex(n.index);const i=new Float32Array(t*3),s=new xB(i,3);r.setAttribute("positions",s);for(const o of e){const{name:a,itemSize:l}=o,A=new Float32Array(t*l);r.setAttribute(a,new xB(A,l))}return r},ume=n=>{const r=new tb(.45,.45,5,50,50,!0),i=new Sr({uniforms:{auraTexture:{value:null}},vertexShader:tme,fragmentShader:nme,transparent:!0,blending:wu});i.uniforms.cameraDir=n.cameraDir,i.uniforms.eye=n.eye,i.uniforms.switchItemTime=n.switchItemTime,i.uniforms.switchItemDuration=n.switchItemDuration;const s=new In(r,i);return s.frustumCulled=!1,s.position.y=5*.46,s},dme=()=>{const e=[];e.push({name:"opacity",itemSize:1}),e.push({name:"scales",itemSize:2});const t=.3,r=new ku(t,t),i=lQ(r,e,20),s=new Sr({uniforms:{cameraBillboardQuaternion:{value:new rt}},vertexShader:rme,fragmentShader:ime,depthWrite:!1,blending:wu}),o=new eb(i,s,20);return o.info={particleCount:20,velocity:[20]},o},hme=n=>{const t=[];t.push({name:"opacity",itemSize:1}),t.push({name:"scales",itemSize:2});const r=.43,i=new bU(r,32,32),s=lQ(i,t,10),o=new Sr({uniforms:{radius:{value:r}},vertexShader:sme,fragmentShader:ome,depthWrite:!1,blending:wu});o.uniforms.cameraDir=n.cameraDir,o.uniforms.eye=n.eye,o.uniforms.fadeInAvatarTime=n.fadeInAvatarTime;const a=new eb(s,o,10);return a.info={particleCount:10,velocity:[10],currentIndex:0},a},fme=n=>{const t=new ku(1,1),r=new Sr({uniforms:{cameraBillboardQuaternion:{value:new rt}},vertexShader:ame,fragmentShader:lme,depthWrite:!1,blending:wu});return new In(t,r)},pme=n=>{const t=[],s=new tb(.645,.43,2.5,50,50,!0),o=lQ(s,t,2),a=new Sr({uniforms:{opacity:{value:0}},vertexShader:Ame,fragmentShader:cme,transparent:!0,blending:wu});a.uniforms.cameraDir=n.cameraDir,a.uniforms.eye=n.eye;const l=new eb(o,a,2);return l.fadeIn=!1,l.frustumCulled=!1,l.position.y=2.5*.46,l},g3=100,gme=0,tC=1.5,mme=.1,Bw=0,m3=1,v3=.05,BE=0,vme=1,yme=.015,Fi={normal:0,switchItem:1,fadeOutAvatar:2,loadingAvatar:3,fadeInAvatar:4},wme=new Vu,uH=wme.load("./textures/beam2.png");uH.wrapS=ps;class Bme{constructor(e,t,r){this.scene=e,this.camera=t,this.globalUniforms=r,this.eye=new j,this.cameraDir=new j,this.beamMesh=null,this.initBeam(),this.pixelMesh=null,this.initPixel(),this.ringMesh=null,this.initRing(),this.teleportMesh=null,this.initTeleport(),this.spotLight=null,this.initSpotLight()}emitBeam(){this.beamMesh.visible=!0}emitPixel(){this.stopUpdatePixelMesh=!1;const e=this.pixelMesh.geometry.getAttribute("scales"),t=this.pixelMesh.geometry.getAttribute("positions"),r=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount,s=.25;for(let o=0;o<i;o++){o%2===0?e.setXY(o,.2,.2):e.setXY(o,.1,3+Math.random());const a=o/i*Math.PI*2;t.setXYZ(o,Math.cos(a)*s,(Math.random()-.5)*2,Math.sin(a)*s),r.setX(o,1+Math.random()),this.pixelMesh.info.velocity[o]=.02+Math.random()*.03}e.needsUpdate=!0,t.needsUpdate=!0,r.needsUpdate=!0}emitRespawnPixel(){this.stopUpdatePixelMesh=!1;const e=this.pixelMesh.geometry.getAttribute("scales"),t=this.pixelMesh.geometry.getAttribute("positions"),r=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount,s=.25;for(let o=0;o<i;o++)if(r.getX(o)<.01){o%2===0?e.setXY(o,.2,.2):e.setXY(o,.1,3+Math.random());const a=o/i*Math.PI*2;t.setXYZ(o,Math.cos(a)*s,Math.random()*-1,Math.sin(a)*s),r.setX(o,1+Math.random()),this.pixelMesh.info.velocity[o]=.05+Math.random()*.05;break}e.needsUpdate=!0,t.needsUpdate=!0,r.needsUpdate=!0}emitRing(e){this.ringMesh.visible=!0;const t=this.ringMesh.geometry.getAttribute("scales"),r=this.ringMesh.geometry.getAttribute("positions"),i=this.ringMesh.geometry.getAttribute("opacity"),s=this.ringMesh.info.particleCount,o=this.ringMesh.info.currentIndex,a=o-1<0?s-1:o-1,l=.1;(r.getY(a)>l+e||i.getX(a)<=0)&&(r.setXYZ(o,0,l,0),t.setXY(o,1,.06),i.setX(o,1),this.ringMesh.info.velocity[o]=.1,this.ringMesh.info.currentIndex++,this.ringMesh.info.currentIndex>=s&&(this.ringMesh.info.currentIndex=0)),t.needsUpdate=!0,r.needsUpdate=!0,i.needsUpdate=!0}emitTeleport(){this.teleportMesh.visible=!0}emitSpotLight(){this.spotLight.visible=!0,this.spotLight.fadeIn=!0}removeSpotLight(){this.spotLight.fadeIn=!1}update(){this.beamMesh.visible&&this.beamMesh.update(),!this.stopUpdatePixelMesh&&this.pixelMesh.update(),this.ringMesh.visible&&this.ringMesh.update(),this.teleportMesh.visible&&this.teleportMesh.update(),this.spotLight.visible&&this.spotLight.update()}initBeam(){this.beamMesh=ume(this.globalUniforms),this.beamMesh.material.uniforms.auraTexture.value=uH,this.beamMesh.update=()=>this.updateBeam(),this.scene.add(this.beamMesh)}initPixel(){this.pixelMesh=dme(),this.pixelMesh.update=()=>this.updatePixel(),this.scene.add(this.pixelMesh)}initRing(){this.ringMesh=hme(this.globalUniforms),this.ringMesh.update=()=>this.updateRing(),this.scene.add(this.ringMesh)}initTeleport(){this.teleportMesh=fme(this.globalUniforms),this.teleportMesh.update=()=>this.updateTeleport(),this.teleportMesh.visible=!1,this.scene.add(this.teleportMesh)}initSpotLight(){this.spotLight=pme(this.globalUniforms),this.spotLight.update=()=>this.updateSpotLight(),this.spotLight.visible=!1,this.scene.add(this.spotLight)}updateBeam(){this.beamMesh&&this.globalUniforms.transitionEffectType.value!==Fi.switchItem&&(this.beamMesh.visible=!1)}updatePixel(){if(this.pixelMesh){let e=0;const t=this.pixelMesh.geometry.getAttribute("positions"),r=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount;for(let s=0;s<i;s++)r.getX(s)>.01?(t.setY(s,t.getY(s)+this.pixelMesh.info.velocity[s]),r.setX(s,r.getX(s)/1.3)):(r.setX(s,0),e++);e>=i&&(this.stopUpdatePixelMesh=!0),t.needsUpdate=!0,r.needsUpdate=!0,this.pixelMesh.material.uniforms.cameraBillboardQuaternion.value.copy(this.camera.quaternion)}}updateRing(){if(this.ringMesh){const e=this.ringMesh.geometry.getAttribute("positions"),t=this.ringMesh.geometry.getAttribute("opacity"),r=this.ringMesh.info.particleCount;for(let i=0;i<r;i++)t.getX(i)>.01?(e.setY(i,e.getY(i)+this.ringMesh.info.velocity[i]),t.setX(i,t.getX(i)/1.27)):t.setX(i,0);e.needsUpdate=!0,t.needsUpdate=!0,this.globalUniforms.transitionEffectType.value!==Fi.fadeInAvatar&&(this.ringMesh.visible=!1)}}updateTeleport(){if(this.teleportMesh){if(this.globalUniforms.transitionEffectType.value===Fi.fadeOutAvatar){const e=this.globalUniforms.fadeOutAvatarTime.value,t=.2;if(e<t){const r=e*(1/t),i=.6,s=5;this.teleportMesh.scale.set(i,r*s,i),this.teleportMesh.position.y=r*s*.35}else this.teleportMesh.scale.x>0?(this.teleportMesh.scale.x=this.teleportMesh.scale.x-.2,this.teleportMesh.scale.z=this.teleportMesh.scale.z-.2):this.teleportMesh.visible=!1}else this.teleportMesh.visible=!1;this.teleportMesh.material.uniforms.cameraBillboardQuaternion.value.copy(this.camera.quaternion)}}updateSpotLight(){this.spotLight&&(this.spotLight.fadeIn?this.spotLight.material.uniforms.opacity.value<1&&(this.spotLight.material.uniforms.opacity.value=1):this.spotLight.material.uniforms.opacity.value>0?this.spotLight.material.uniforms.opacity.value-=.025:(this.spotLight.material.uniforms.opacity.value=0,this.spotLight.visible=!1))}}const dH=new Vu,CE=dH.load("./textures/pixel9.png");CE.wrapS=CE.wrapT=ps;const bE=dH.load("./textures/noise3.jpg");bE.wrapS=bE.wrapT=ps;const Mt={switchItemDuration:{value:tC},switchItemTime:{value:tC},eye:{value:new j},cameraDir:{value:new j},fadeOutAvatarTime:{value:Bw},fadeInAvatarTime:{value:BE},transitionEffectType:{value:Fi.normal}},y3={pixelTexture:{value:CE},noiseTexture:{value:bE}};class Cme extends EventTarget{constructor(){super();it(this,"setTransitionEffect",t=>{this.transitionEffectType=t});it(this,"getTransitionEffect",t=>this.transitionEffectType===t);this.cameraDir=new j,this.frameRate=1e3/30,this.initParticle=!1,this.transitionEffectType=null,this.transitionTime=g3,this.update()}setCustomShader(t){t.vertexShader&&(t.vertexShader=t.vertexShader.replace("varying vec3 vViewPosition;",`
      varying vec3 vViewPosition;
      varying vec3 vWorldPosition;
      varying vec3 vSurfaceNormal;
      `),t.vertexShader=t.vertexShader.replace("void main() {",`
      void main() {
        vSurfaceNormal = normalize(normal);
      `),t.vertexShader=t.vertexShader.replace("#include <worldpos_vertex>",`
      #include <worldpos_vertex>
      vWorldPosition = (modelMatrix * vec4( transformed, 1.0 )).xyz;
      `),t.fragmentShader=t.fragmentShader.replace("uniform vec3 litFactor;",`
      uniform vec3 litFactor;
      uniform vec3 cameraDir;
      uniform vec3 eye;
      uniform float switchItemTime;
      uniform float switchItemDuration;
      uniform sampler2D pixelTexture;
      uniform sampler2D noiseTexture;
      uniform float transitionEffectType;

      uniform float fadeInAvatarTime;
      
      varying vec3 vWorldPosition;
      varying vec3 vSurfaceNormal;

      vec4 textureRemap(vec4 In, vec2 InMinMax, vec2 OutMinMax) {
        return OutMinMax.x + (In - InMinMax.x) * (OutMinMax.y - OutMinMax.x) / (InMinMax.y - InMinMax.x);
      }

      float getRim(vec3 normal, float rimStrength, float glowIntensity) {
        vec3 eyeDirection = normalize(eye - vWorldPosition);
        float EdotN = max(0.0, dot(eyeDirection, normal));
        float bodyRim = pow(1. - EdotN, rimStrength);
        return bodyRim * glowIntensity;
      }

      vec3 getPixelColor(float pixelStrength) {
        float pixelUvScale = 2.0;
        vec2 pixelUv = vec2(
          vWorldPosition.x * pixelUvScale * -cameraDir.z + vWorldPosition.z * pixelUvScale * cameraDir.x,
          vWorldPosition.y * pixelUvScale
        );
        float pixel = texture2D(
          pixelTexture, 
          pixelUv
        ).r;
        return mix(vec3(0.0396, 0.768, 0.990), vec3(0.0142, 0.478, 0.710), pixel * pixelStrength);
      }

      float getDissolveLimit(float noiseUvScale, float noiseStrength, float bottomPosition, float avatarHeight, float time) {
        vec2 noiseUv = vec2(
          vWorldPosition.x * noiseUvScale * -cameraDir.z + vWorldPosition.z * noiseUvScale * cameraDir.x,
          vWorldPosition.y * noiseUvScale
        );
        vec4 noise = texture2D(
          noiseTexture, 
          noiseUv
        );
        
        float noiseCutout = textureRemap(noise, vec2(0.0, 1.0), vec2(-noiseStrength, noiseStrength)).r;
        float cutoutHeight = time * avatarHeight + bottomPosition;
        return cutoutHeight + noiseCutout;
      }

      `),t.fragmentShader=t.fragmentShader.replace("gl_FragColor = vec4( col, diffuseColor.a );",`
      gl_FragColor = vec4(col, diffuseColor.a);
      `),t.fragmentShader=t.fragmentShader.replace("gl_FragColor = vec4( col, diffuseColor.a );",`
      //################################################## normal ###############################################################
      if (transitionEffectType < 0.5) { 

      }
      //################################################## switch item ###############################################################
      else if (transitionEffectType < 1.5) { 
        // vec3 pixelColor = getPixelColor(2.0);

        // float timeProgress = switchItemTime / switchItemDuration;
        // float rim = getRim(
        //   vSurfaceNormal, 
        //   mix(0.1, mix(0.1, 5.0, timeProgress), timeProgress), 
        //   mix(50., 10., timeProgress)
        // );
        
        // col = mix(pixelColor * rim, col, timeProgress);
      }
      //################################################## fade out avatar ###############################################################
      else if (transitionEffectType < 2.5) { 
        discard;
      }
      //################################################## loading avatar ###############################################################
      else if (transitionEffectType < 3.5) { 
        discard;
      }
      //################################################## fade in avatar ###############################################################
      else if (transitionEffectType < 4.5) { 
        if (fadeInAvatarTime < 0.5) { // phase 1
          float timer = fadeInAvatarTime * 2.;
          
          float border = 0.02;
          float limit = getDissolveLimit(
            1.2,
            0.1,
            -0.3 - border,
            2.0 + border,
            timer
          );
          
          float upperBound = limit + border;
  
          if (vWorldPosition.y > limit && vWorldPosition.y < upperBound) {

            vec3 pixelColor = getPixelColor(1.5);
        
            float rim = getRim(
              vSurfaceNormal, 
              0.1,
              10.
            );
      
            col = pixelColor * rim;
          }
          else if (vWorldPosition.y >= upperBound) {
            discard;
          }
          else {

            vec3 pixelColor = getPixelColor(1.5);
            
            float rim = getRim(
              vSurfaceNormal, 
              0.1,
              3.0
            );
            col = pixelColor * rim;
          }
        }
        else { // phase 2
          float timer = fadeInAvatarTime * 2. - 1.;
          
          float bottomPosition = -0.3;
          float avatarHeight = 2.0;
          
          float rim = getRim(
            vSurfaceNormal, 
            mix(0.1, 2.0 * timer, timer),
            mix(3.0, 20. * (1. - timer), timer)
          );
          
          float fadeStrength = 10.;
          rim *= pow((vWorldPosition.y - bottomPosition) / (avatarHeight - bottomPosition), timer * fadeStrength);
          
          vec3 pixelColor = getPixelColor(1.5);
          col = mix(pixelColor * rim, col, timer);

        }
      }

      gl_FragColor = vec4( col, diffuseColor.a );
      `),t.uniforms.pixelTexture=y3.pixelTexture,t.uniforms.noiseTexture=y3.noiseTexture,t.uniforms.cameraDir=Mt.cameraDir,t.uniforms.eye=Mt.eye,t.uniforms.switchItemTime=Mt.switchItemTime,t.uniforms.switchItemDuration=Mt.switchItemDuration,t.uniforms.transitionEffectType=Mt.transitionEffectType,t.uniforms.fadeInAvatarTime=Mt.fadeInAvatarTime)}playFadeOutEffect(){Mt.transitionEffectType.value=Fi.fadeOutAvatar,this.particleEffect.emitSpotLight(),this.particleEffect.emitPixel(),this.particleEffect.emitTeleport(),this.transitionTime=this.frameRate*((m3-Bw)/v3),this.initialFadeOutTimer()}playFadeInEffect(){Mt.transitionEffectType.value=Fi.fadeInAvatar,this.initialFadeInTimer()}playSwitchItemEffect(){Mt.switchItemTime.value=gme,Mt.transitionEffectType.value=Fi.switchItem,this.transitionTime=g3}setParticle(t,r){this.particleEffect=new Bme(t,r,Mt)}initialFadeOutTimer(){Mt.fadeOutAvatarTime.value=Bw}initialFadeInTimer(){Mt.fadeInAvatarTime.value=BE}update(){setInterval(()=>{this.scene&&this.camera&&!this.initParticle&&(this.setParticle(this.scene,this.camera),this.initParticle=!0),this.initParticle&&this.particleEffect.update(),Mt.transitionEffectType.value===Fi.switchItem?Mt.switchItemTime.value<tC?Mt.switchItemTime.value+=mme:(Mt.switchItemTime.value=tC,Mt.transitionEffectType.value=Fi.normal,this.setTransitionEffect("normal"),this.dispatchEvent(new Event("fadeintraitend"))):Mt.transitionEffectType.value===Fi.fadeOutAvatar?(Mt.fadeOutAvatarTime.value+=v3,Mt.fadeOutAvatarTime.value>m3&&(Mt.fadeOutAvatarTime.value=Bw,Mt.transitionEffectType.value=Fi.loadingAvatar)):Mt.transitionEffectType.value===Fi.loadingAvatar||Mt.transitionEffectType.value===Fi.fadeInAvatar&&(Mt.fadeInAvatarTime.value>.1&&Mt.fadeInAvatarTime.value<.5&&(this.particleEffect.emitRing(.5*(1-Mt.fadeInAvatarTime.value)),this.particleEffect.emitRespawnPixel()),Mt.fadeInAvatarTime.value>=.5&&this.particleEffect.removeSpotLight(),Mt.fadeInAvatarTime.value+=yme,Mt.fadeInAvatarTime.value>vme&&(Mt.fadeInAvatarTime.value=BE,Mt.transitionEffectType.value=Fi.normal,this.setTransitionEffect("normal"),this.dispatchEvent(new Event("fadeinavatarend")))),this.camera&&(this.cameraDir.set(0,0,-1),this.cameraDir.applyQuaternion(this.camera.quaternion),this.cameraDir.normalize(),Mt.cameraDir.value.copy(this.cameraDir),Mt.eye.value.copy(this.camera.position))},this.frameRate)}}const bme="_container_1fjfz_1",xme="_messageWindow_1fjfz_11",Ime="_messageTitle_1fjfz_25",Fme="_buttonContainer_1fjfz_36",by={container:bme,messageWindow:xme,messageTitle:Ime,buttonContainer:Fme};var hH={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=t.apply(null,s);a&&r.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&r.push(l)}}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(hH);var fH=hH.exports;const Xh=Zl(fH),_me="_iconButtonWrap_1fm7l_1",Eme="_buttonBackground_1fm7l_8",Sme="_buttonBackgroundColor_1fm7l_13",Ume="_innerBackgroundColor_1fm7l_16",Qme="_dark_1fm7l_20",Rme="_iconWrap_1fm7l_28",Mme="_icon_1fm7l_1",Tme="_active_1fm7l_83",Nme="_buttonWrap_1fm7l_95",kme="_buttonIconWrap_1fm7l_108",Dme="_innerWrap_1fm7l_127",Mn={iconButtonWrap:_me,buttonBackground:Eme,buttonBackgroundColor:Sme,innerBackgroundColor:Ume,dark:Qme,iconWrap:Rme,icon:Mme,active:Tme,buttonWrap:Nme,buttonIconWrap:kme,innerWrap:Dme},Lme=[{name:"backpack",file:"./assets/icons/backpack.svg"},{name:"microphone",file:"./assets/icons/microphone.svg"},{name:"speechToText",file:"./assets/icons/speechToText.svg"},{name:"arrowRight",file:"./assets/icons/arrowRight.svg"},{name:"arrowLeft",file:"./assets/icons/arrowLeft.svg"},{name:"rooms",file:"./assets/icons/rooms.svg"},{name:"scenes",file:"./assets/icons/scenes.svg"},{name:"settings",file:"./assets/icons/settings.svg"},{name:"tokens",file:"./assets/icons/tokens.svg"},{name:"voice",file:"./assets/icons/voice.svg"},{name:"vr",file:"./assets/icons/vr.svg"},{name:"discord",file:"./assets/icons/discord.svg"},{name:"metamask",file:"./assets/icons/metamask.svg"},{name:"close",file:"./assets/icons/close.svg"},{name:"hide",file:"./assets/icons/hide.svg"},{name:"map",file:"./assets/icons/map.svg"},{name:"login",file:"./assets/icons/login.svg"},{name:"logout",file:"./assets/icons/logout.svg"},{name:"plus",file:"./assets/icons/plus.svg"},{name:"minus",file:"./assets/icons/minus.svg"},{name:"mint",file:"./assets/icons/mint.svg"},{name:"download",file:"./assets/icons/download.svg"},{name:"classDropHunter",file:"./assets/icons/class-drop-hunter.svg"},{name:"classEndineer",file:"./assets/icons/class-engineer.svg"},{name:"classCustom",file:"./assets/icons/class-custom.svg"},{name:"classNeuralHacker",file:"./assets/icons/class-neural-hacker.svg"},{name:"classLiskWitch",file:"./assets/icons/class-lisk-witch.svg"},{name:"classBruiser",file:"./assets/icons/class-bruiser.svg"},{name:"classBeastPainter",file:"./assets/icons/class-beast-painter.svg"},{name:"soundon",file:"./assets/icons/soundon.svg"},{name:"soundoff",file:"./assets/icons/soundoff.svg"},{name:"soundoff",file:"./assets/icons/soundoff.svg"},{name:"polygon",file:"./assets/icons/polygon.svg"}];async function Vme(n){const e=Lme.find(t=>t.name===n);return await fetch(e.file).then(t=>t.text()).then(t=>new DOMParser().parseFromString(t,"image/svg+xml").firstElementChild)}function sn(n){const{size:e,icon:t,className:r,onClick:i,theme:s,type:o,text:a,onMouseEnter:l,active:A,onSubmit:c,minWidth:u,disabled:h}=n,d=Ce.useRef(null);return Ce.useEffect(()=>{t&&Vme(t).then(p=>{d.current&&(d.current.innerHTML="",p&&(p.classList.add(Mn.icon),d.current.append(p)))})},[t]),o&&o==="login"?L.jsxs("div",{className:Xh(r,Mn.iconButtonWrap,s&&s==="dark"?Mn.dark:Mn.light,A&&Mn.active),style:{height:e},onClick:i,onMouseEnter:l,children:[L.jsxs("svg",{width:"71",height:"67",viewBox:"0 0 71 67",className:Mn.buttonBackground,xmlns:"http://www.w3.org/2000/svg",children:[L.jsx("path",{d:"M2 2H68.8452L64.1437 65H2V2Z",className:Mn.buttonBackgroundColor,fill:"#D9D9D9",stroke:"#050B0E",strokeWidth:"4"}),L.jsx("path",{d:"M9 9H62L58.2676 58H9V9Z",fill:"#050B0E",className:Mn.innerBackgroundColor})]}),L.jsx("span",{ref:d,className:Mn.iconWrap})]}):o&&o==="icon"?L.jsxs("div",{className:Xh(r,Mn.iconButtonWrap,s&&s==="dark"?Mn.dark:Mn.light,A&&Mn.active),style:{height:e},onClick:i,onMouseEnter:l,children:[L.jsxs("svg",{className:Mn.buttonBackground,width:"69",height:"63",viewBox:"0 0 69 63",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[L.jsx("path",{d:"M5 2H2.85562L3.00485 4.13918L6.7903 58.4048L6.9201 60.2656H8.78545H62.6772H64.6178L64.6763 58.3259L66.3135 4.06031L66.3756 2H64.3144H5Z",fill:"#efefef",className:Mn.buttonBackgroundColor,stroke:"black",strokeWidth:"4"}),L.jsx("path",{d:"M8.77795 7.28503H61.7957L59.8437 54.7911H11.367L8.77795 7.28503Z",fill:"black",className:Mn.innerBackgroundColor})]}),L.jsx("span",{ref:d,className:Mn.iconWrap})]}):L.jsx("button",{className:Xh(r,Mn.buttonWrap,s&&s==="dark"?Mn.dark:Mn.light),onClick:i,onMouseEnter:l,onSubmit:c,type:o,disabled:h,style:{minWidth:u?u+"px":""},children:L.jsxs("div",{className:Mn.innerWrap,style:{fontSize:e},children:[t&&L.jsx("span",{ref:d,className:Mn.buttonIconWrap,style:{height:e,width:e,opacity:h?"0.4":"1"}}),a&&a]})})}function Pme(n){const{cancelOption:e=!0,confirmDialogText:t,confirmDialogWindow:r,setConfirmDialogWindow:i,confirmDialogCallback:s}=n;return r?L.jsx("div",{className:by.container,children:L.jsxs("div",{className:by.messageWindow,children:[L.jsx("div",{className:by.messageTitle,children:t}),L.jsxs("div",{className:by.buttonContainer,children:[e&&L.jsx(sn,{size:16,theme:"light",text:"Cancel",onClick:()=>{s[0](!1),i(!1)}}),L.jsx(sn,{size:16,theme:"light",text:"Continue",onClick:()=>{s[0](!0),i(!1)}})]})]})}):L.jsx("div",{})}const Ome="/CharacterStudio/assets/anata-a574c58f.png",Wme="_backgroundImg_iv22q_1",Zme="_darkBackground_iv22q_16",Gme="_Background_iv22q_29",Jme="_webamark_iv22q_37",Hme="_logo_iv22q_45",Qd={backgroundImg:Wme,darkBackground:Zme,Background:Gme,webamark:Jme,logo:Hme};function zme(){const{debugMode:n}=X.useContext(lr);return L.jsxs("div",{className:n?Qd.darkBackground:Qd.backgroundImg,children:[L.jsx("div",{className:Qd.backgroundBlur}),L.jsx("div",{className:Qd.Background,children:L.jsx("div",{className:Qd.webamark,children:L.jsx("img",{src:Ome,className:Qd.logo})})})]})}const Yme="_chatContainer_1659d_1",Xme="_scrollContainer_1659d_16",jme="_topLine_1659d_26",Kme="_bottomLine_1659d_54",$me="_buttonContainer_1659d_82",qme="_buttonLeft_1659d_91",e0e="_buttonRight_1659d_95",t0e="_buttonCenter_1659d_99",Tc={chatContainer:Yme,scrollContainer:Xme,topLine:jme,bottomLine:Kme,buttonContainer:$me,buttonLeft:qme,buttonRight:e0e,buttonCenter:t0e};function pH(n,e){return function(){return n.apply(e,arguments)}}const{toString:n0e}=Object.prototype,{getPrototypeOf:AQ}=Object,yb=(n=>e=>{const t=n0e.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Wa=n=>(n=n.toLowerCase(),e=>yb(e)===n),wb=n=>e=>typeof e===n,{isArray:tp}=Array,zm=wb("undefined");function r0e(n){return n!==null&&!zm(n)&&n.constructor!==null&&!zm(n.constructor)&&qs(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const gH=Wa("ArrayBuffer");function i0e(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&gH(n.buffer),e}const s0e=wb("string"),qs=wb("function"),mH=wb("number"),Bb=n=>n!==null&&typeof n=="object",o0e=n=>n===!0||n===!1,Cw=n=>{if(yb(n)!=="object")return!1;const e=AQ(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},a0e=Wa("Date"),l0e=Wa("File"),A0e=Wa("Blob"),c0e=Wa("FileList"),u0e=n=>Bb(n)&&qs(n.pipe),d0e=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||qs(n.append)&&((e=yb(n))==="formdata"||e==="object"&&qs(n.toString)&&n.toString()==="[object FormData]"))},h0e=Wa("URLSearchParams"),f0e=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function b0(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),tp(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function vH(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const yH=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),wH=n=>!zm(n)&&n!==yH;function xE(){const{caseless:n}=wH(this)&&this||{},e={},t=(r,i)=>{const s=n&&vH(e,i)||i;Cw(e[s])&&Cw(r)?e[s]=xE(e[s],r):Cw(r)?e[s]=xE({},r):tp(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&b0(arguments[r],t);return e}const p0e=(n,e,t,{allOwnKeys:r}={})=>(b0(e,(i,s)=>{t&&qs(i)?n[s]=pH(i,t):n[s]=i},{allOwnKeys:r}),n),g0e=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),m0e=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},v0e=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&AQ(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},y0e=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},w0e=n=>{if(!n)return null;if(tp(n))return n;let e=n.length;if(!mH(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},B0e=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&AQ(Uint8Array)),C0e=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},b0e=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},x0e=Wa("HTMLFormElement"),I0e=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),w3=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),F0e=Wa("RegExp"),BH=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};b0(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},_0e=n=>{BH(n,(e,t)=>{if(qs(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(qs(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},E0e=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return tp(n)?r(n):r(String(n).split(e)),t},S0e=()=>{},U0e=(n,e)=>(n=+n,Number.isFinite(n)?n:e),_I="abcdefghijklmnopqrstuvwxyz",B3="0123456789",CH={DIGIT:B3,ALPHA:_I,ALPHA_DIGIT:_I+_I.toUpperCase()+B3},Q0e=(n=16,e=CH.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function R0e(n){return!!(n&&qs(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const M0e=n=>{const e=new Array(10),t=(r,i)=>{if(Bb(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=tp(r)?[]:{};return b0(r,(o,a)=>{const l=t(o,i+1);!zm(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return t(n,0)},T0e=Wa("AsyncFunction"),N0e=n=>n&&(Bb(n)||qs(n))&&qs(n.then)&&qs(n.catch),Qe={isArray:tp,isArrayBuffer:gH,isBuffer:r0e,isFormData:d0e,isArrayBufferView:i0e,isString:s0e,isNumber:mH,isBoolean:o0e,isObject:Bb,isPlainObject:Cw,isUndefined:zm,isDate:a0e,isFile:l0e,isBlob:A0e,isRegExp:F0e,isFunction:qs,isStream:u0e,isURLSearchParams:h0e,isTypedArray:B0e,isFileList:c0e,forEach:b0,merge:xE,extend:p0e,trim:f0e,stripBOM:g0e,inherits:m0e,toFlatObject:v0e,kindOf:yb,kindOfTest:Wa,endsWith:y0e,toArray:w0e,forEachEntry:C0e,matchAll:b0e,isHTMLForm:x0e,hasOwnProperty:w3,hasOwnProp:w3,reduceDescriptors:BH,freezeMethods:_0e,toObjectSet:E0e,toCamelCase:I0e,noop:S0e,toFiniteNumber:U0e,findKey:vH,global:yH,isContextDefined:wH,ALPHABET:CH,generateString:Q0e,isSpecCompliantForm:R0e,toJSONObject:M0e,isAsyncFn:T0e,isThenable:N0e};function Wt(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i)}Qe.inherits(Wt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Qe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const bH=Wt.prototype,xH={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{xH[n]={value:n}});Object.defineProperties(Wt,xH);Object.defineProperty(bH,"isAxiosError",{value:!0});Wt.from=(n,e,t,r,i,s)=>{const o=Object.create(bH);return Qe.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Wt.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const k0e=null;function IE(n){return Qe.isPlainObject(n)||Qe.isArray(n)}function IH(n){return Qe.endsWith(n,"[]")?n.slice(0,-2):n}function C3(n,e,t){return n?n.concat(e).map(function(i,s){return i=IH(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function D0e(n){return Qe.isArray(n)&&!n.some(IE)}const L0e=Qe.toFlatObject(Qe,{},null,function(e){return/^is[A-Z]/.test(e)});function Cb(n,e,t){if(!Qe.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Qe.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,m){return!Qe.isUndefined(m[f])});const r=t.metaTokens,i=t.visitor||c,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&Qe.isSpecCompliantForm(e);if(!Qe.isFunction(i))throw new TypeError("visitor must be a function");function A(p){if(p===null)return"";if(Qe.isDate(p))return p.toISOString();if(!l&&Qe.isBlob(p))throw new Wt("Blob is not supported. Use a Buffer instead.");return Qe.isArrayBuffer(p)||Qe.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,f,m){let g=p;if(p&&!m&&typeof p=="object"){if(Qe.endsWith(f,"{}"))f=r?f:f.slice(0,-2),p=JSON.stringify(p);else if(Qe.isArray(p)&&D0e(p)||(Qe.isFileList(p)||Qe.endsWith(f,"[]"))&&(g=Qe.toArray(p)))return f=IH(f),g.forEach(function(w,B){!(Qe.isUndefined(w)||w===null)&&e.append(o===!0?C3([f],B,s):o===null?f:f+"[]",A(w))}),!1}return IE(p)?!0:(e.append(C3(m,f,s),A(p)),!1)}const u=[],h=Object.assign(L0e,{defaultVisitor:c,convertValue:A,isVisitable:IE});function d(p,f){if(!Qe.isUndefined(p)){if(u.indexOf(p)!==-1)throw Error("Circular reference detected in "+f.join("."));u.push(p),Qe.forEach(p,function(g,v){(!(Qe.isUndefined(g)||g===null)&&i.call(e,g,Qe.isString(v)?v.trim():v,f,h))===!0&&d(g,f?f.concat(v):[v])}),u.pop()}}if(!Qe.isObject(n))throw new TypeError("data must be an object");return d(n),e}function b3(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function cQ(n,e){this._pairs=[],n&&Cb(n,this,e)}const FH=cQ.prototype;FH.append=function(e,t){this._pairs.push([e,t])};FH.toString=function(e){const t=e?function(r){return e.call(this,r,b3)}:b3;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function V0e(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _H(n,e,t){if(!e)return n;const r=t&&t.encode||V0e,i=t&&t.serialize;let s;if(i?s=i(e,t):s=Qe.isURLSearchParams(e)?e.toString():new cQ(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class P0e{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Qe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const x3=P0e,EH={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},O0e=typeof URLSearchParams<"u"?URLSearchParams:cQ,W0e=typeof FormData<"u"?FormData:null,Z0e=typeof Blob<"u"?Blob:null,G0e={isBrowser:!0,classes:{URLSearchParams:O0e,FormData:W0e,Blob:Z0e},protocols:["http","https","file","blob","url","data"]},SH=typeof window<"u"&&typeof document<"u",J0e=(n=>SH&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),H0e=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),z0e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:SH,hasStandardBrowserEnv:J0e,hasStandardBrowserWebWorkerEnv:H0e},Symbol.toStringTag,{value:"Module"})),ma={...z0e,...G0e};function Y0e(n,e){return Cb(n,new ma.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return ma.isNode&&Qe.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function X0e(n){return Qe.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function j0e(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function UH(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&Qe.isArray(i)?i.length:o,l?(Qe.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Qe.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&Qe.isArray(i[o])&&(i[o]=j0e(i[o])),!a)}if(Qe.isFormData(n)&&Qe.isFunction(n.entries)){const t={};return Qe.forEachEntry(n,(r,i)=>{e(X0e(r),i,t,0)}),t}return null}function K0e(n,e,t){if(Qe.isString(n))try{return(e||JSON.parse)(n),Qe.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const uQ={transitional:EH,adapter:["xhr","http"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=Qe.isObject(e);if(s&&Qe.isHTMLForm(e)&&(e=new FormData(e)),Qe.isFormData(e))return i?JSON.stringify(UH(e)):e;if(Qe.isArrayBuffer(e)||Qe.isBuffer(e)||Qe.isStream(e)||Qe.isFile(e)||Qe.isBlob(e))return e;if(Qe.isArrayBufferView(e))return e.buffer;if(Qe.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Y0e(e,this.formSerializer).toString();if((a=Qe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Cb(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),K0e(e)):e}],transformResponse:[function(e){const t=this.transitional||uQ.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(e&&Qe.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Wt.from(a,Wt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ma.classes.FormData,Blob:ma.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Qe.forEach(["delete","get","head","post","put","patch"],n=>{uQ.headers[n]={}});const dQ=uQ,$0e=Qe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),q0e=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&$0e[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},I3=Symbol("internals");function qp(n){return n&&String(n).trim().toLowerCase()}function bw(n){return n===!1||n==null?n:Qe.isArray(n)?n.map(bw):String(n)}function eve(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const tve=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function EI(n,e,t,r,i){if(Qe.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!Qe.isString(e)){if(Qe.isString(r))return e.indexOf(r)!==-1;if(Qe.isRegExp(r))return r.test(e)}}function nve(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function rve(n,e){const t=Qe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class bb{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,l,A){const c=qp(l);if(!c)throw new Error("header name must be a non-empty string");const u=Qe.findKey(i,c);(!u||i[u]===void 0||A===!0||A===void 0&&i[u]!==!1)&&(i[u||l]=bw(a))}const o=(a,l)=>Qe.forEach(a,(A,c)=>s(A,c,l));return Qe.isPlainObject(e)||e instanceof this.constructor?o(e,t):Qe.isString(e)&&(e=e.trim())&&!tve(e)?o(q0e(e),t):e!=null&&s(t,e,r),this}get(e,t){if(e=qp(e),e){const r=Qe.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return eve(i);if(Qe.isFunction(t))return t.call(this,i,r);if(Qe.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=qp(e),e){const r=Qe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||EI(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=qp(o),o){const a=Qe.findKey(r,o);a&&(!t||EI(r,r[a],a,t))&&(delete r[a],i=!0)}}return Qe.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||EI(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return Qe.forEach(this,(i,s)=>{const o=Qe.findKey(r,s);if(o){t[o]=bw(i),delete t[s];return}const a=e?nve(s):String(s).trim();a!==s&&delete t[s],t[a]=bw(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Qe.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&Qe.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[I3]=this[I3]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=qp(o);r[a]||(rve(i,o),r[a]=!0)}return Qe.isArray(e)?e.forEach(s):s(e),this}}bb.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Qe.reduceDescriptors(bb.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});Qe.freezeMethods(bb);const Ul=bb;function SI(n,e){const t=this||dQ,r=e||t,i=Ul.from(r.headers);let s=r.data;return Qe.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function QH(n){return!!(n&&n.__CANCEL__)}function x0(n,e,t){Wt.call(this,n??"canceled",Wt.ERR_CANCELED,e,t),this.name="CanceledError"}Qe.inherits(x0,Wt,{__CANCEL__:!0});function ive(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Wt("Request failed with status code "+t.status,[Wt.ERR_BAD_REQUEST,Wt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const sve=ma.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];Qe.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Qe.isString(r)&&o.push("path="+r),Qe.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ove(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function ave(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function RH(n,e){return n&&!ove(e)?ave(n,e):e}const lve=ma.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let r;function i(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=i(window.location.href),function(o){const a=Qe.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function Ave(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function cve(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const A=Date.now(),c=r[s];o||(o=A),t[i]=l,r[i]=A;let u=s,h=0;for(;u!==i;)h+=t[u++],u=u%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),A-o<e)return;const d=c&&A-c;return d?Math.round(h*1e3/d):void 0}}function F3(n,e){let t=0;const r=cve(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-t,l=r(a),A=s<=o;t=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&A?(o-s)/l:void 0,event:i};c[e?"download":"upload"]=!0,n(c)}}const uve=typeof XMLHttpRequest<"u",dve=uve&&function(n){return new Promise(function(t,r){let i=n.data;const s=Ul.from(n.headers).normalize();let{responseType:o,withXSRFToken:a}=n,l;function A(){n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let c;if(Qe.isFormData(i)){if(ma.hasStandardBrowserEnv||ma.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((c=s.getContentType())!==!1){const[f,...m]=c?c.split(";").map(g=>g.trim()).filter(Boolean):[];s.setContentType([f||"multipart/form-data",...m].join("; "))}}let u=new XMLHttpRequest;if(n.auth){const f=n.auth.username||"",m=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";s.set("Authorization","Basic "+btoa(f+":"+m))}const h=RH(n.baseURL,n.url);u.open(n.method.toUpperCase(),_H(h,n.params,n.paramsSerializer),!0),u.timeout=n.timeout;function d(){if(!u)return;const f=Ul.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),g={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:f,config:n,request:u};ive(function(w){t(w),A()},function(w){r(w),A()},g),u=null}if("onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(d)},u.onabort=function(){u&&(r(new Wt("Request aborted",Wt.ECONNABORTED,n,u)),u=null)},u.onerror=function(){r(new Wt("Network Error",Wt.ERR_NETWORK,n,u)),u=null},u.ontimeout=function(){let m=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const g=n.transitional||EH;n.timeoutErrorMessage&&(m=n.timeoutErrorMessage),r(new Wt(m,g.clarifyTimeoutError?Wt.ETIMEDOUT:Wt.ECONNABORTED,n,u)),u=null},ma.hasStandardBrowserEnv&&(a&&Qe.isFunction(a)&&(a=a(n)),a||a!==!1&&lve(h))){const f=n.xsrfHeaderName&&n.xsrfCookieName&&sve.read(n.xsrfCookieName);f&&s.set(n.xsrfHeaderName,f)}i===void 0&&s.setContentType(null),"setRequestHeader"in u&&Qe.forEach(s.toJSON(),function(m,g){u.setRequestHeader(g,m)}),Qe.isUndefined(n.withCredentials)||(u.withCredentials=!!n.withCredentials),o&&o!=="json"&&(u.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&u.addEventListener("progress",F3(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",F3(n.onUploadProgress)),(n.cancelToken||n.signal)&&(l=f=>{u&&(r(!f||f.type?new x0(null,n,u):f),u.abort(),u=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const p=Ave(h);if(p&&ma.protocols.indexOf(p)===-1){r(new Wt("Unsupported protocol "+p+":",Wt.ERR_BAD_REQUEST,n));return}u.send(i||null)})},FE={http:k0e,xhr:dve};Qe.forEach(FE,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const _3=n=>`- ${n}`,hve=n=>Qe.isFunction(n)||n===null||n===!1,MH={getAdapter:n=>{n=Qe.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!hve(t)&&(r=FE[(o=String(t)).toLowerCase()],r===void 0))throw new Wt(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(_3).join(`
`):" "+_3(s[0]):"as no adapter specified";throw new Wt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:FE};function UI(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new x0(null,n)}function E3(n){return UI(n),n.headers=Ul.from(n.headers),n.data=SI.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),MH.getAdapter(n.adapter||dQ.adapter)(n).then(function(r){return UI(n),r.data=SI.call(n,n.transformResponse,r),r.headers=Ul.from(r.headers),r},function(r){return QH(r)||(UI(n),r&&r.response&&(r.response.data=SI.call(n,n.transformResponse,r.response),r.response.headers=Ul.from(r.response.headers))),Promise.reject(r)})}const S3=n=>n instanceof Ul?{...n}:n;function Sf(n,e){e=e||{};const t={};function r(A,c,u){return Qe.isPlainObject(A)&&Qe.isPlainObject(c)?Qe.merge.call({caseless:u},A,c):Qe.isPlainObject(c)?Qe.merge({},c):Qe.isArray(c)?c.slice():c}function i(A,c,u){if(Qe.isUndefined(c)){if(!Qe.isUndefined(A))return r(void 0,A,u)}else return r(A,c,u)}function s(A,c){if(!Qe.isUndefined(c))return r(void 0,c)}function o(A,c){if(Qe.isUndefined(c)){if(!Qe.isUndefined(A))return r(void 0,A)}else return r(void 0,c)}function a(A,c,u){if(u in e)return r(A,c);if(u in n)return r(void 0,A)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(A,c)=>i(S3(A),S3(c),!0)};return Qe.forEach(Object.keys(Object.assign({},n,e)),function(c){const u=l[c]||i,h=u(n[c],e[c],c);Qe.isUndefined(h)&&u!==a||(t[c]=h)}),t}const TH="1.6.8",hQ={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{hQ[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const U3={};hQ.transitional=function(e,t,r){function i(s,o){return"[Axios v"+TH+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Wt(i(o," has been removed"+(t?" in "+t:"")),Wt.ERR_DEPRECATED);return t&&!U3[o]&&(U3[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function fve(n,e,t){if(typeof n!="object")throw new Wt("options must be an object",Wt.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new Wt("option "+s+" must be "+l,Wt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Wt("Unknown option "+s,Wt.ERR_BAD_OPTION)}}const _E={assertOptions:fve,validators:hQ},hA=_E.validators;class nC{constructor(e){this.defaults=e,this.interceptors={request:new x3,response:new x3}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Sf(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&_E.assertOptions(r,{silentJSONParsing:hA.transitional(hA.boolean),forcedJSONParsing:hA.transitional(hA.boolean),clarifyTimeoutError:hA.transitional(hA.boolean)},!1),i!=null&&(Qe.isFunction(i)?t.paramsSerializer={serialize:i}:_E.assertOptions(i,{encode:hA.function,serialize:hA.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&Qe.merge(s.common,s[t.method]);s&&Qe.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),t.headers=Ul.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(t)===!1||(l=l&&f.synchronous,a.unshift(f.fulfilled,f.rejected))});const A=[];this.interceptors.response.forEach(function(f){A.push(f.fulfilled,f.rejected)});let c,u=0,h;if(!l){const p=[E3.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,A),h=p.length,c=Promise.resolve(t);u<h;)c=c.then(p[u++],p[u++]);return c}h=a.length;let d=t;for(u=0;u<h;){const p=a[u++],f=a[u++];try{d=p(d)}catch(m){f.call(this,m);break}}try{c=E3.call(this,d)}catch(p){return Promise.reject(p)}for(u=0,h=A.length;u<h;)c=c.then(A[u++],A[u++]);return c}getUri(e){e=Sf(this.defaults,e);const t=RH(e.baseURL,e.url);return _H(t,e.params,e.paramsSerializer)}}Qe.forEach(["delete","get","head","options"],function(e){nC.prototype[e]=function(t,r){return this.request(Sf(r||{},{method:e,url:t,data:(r||{}).data}))}});Qe.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(Sf(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}nC.prototype[e]=t(),nC.prototype[e+"Form"]=t(!0)});const xw=nC;class fQ{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new x0(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new fQ(function(i){e=i}),cancel:e}}}const pve=fQ;function gve(n){return function(t){return n.apply(null,t)}}function mve(n){return Qe.isObject(n)&&n.isAxiosError===!0}const EE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(EE).forEach(([n,e])=>{EE[e]=n});const vve=EE;function NH(n){const e=new xw(n),t=pH(xw.prototype.request,e);return Qe.extend(t,xw.prototype,e,{allOwnKeys:!0}),Qe.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return NH(Sf(n,i))},t}const ar=NH(dQ);ar.Axios=xw;ar.CanceledError=x0;ar.CancelToken=pve;ar.isCancel=QH;ar.VERSION=TH;ar.toFormData=Cb;ar.AxiosError=Wt;ar.Cancel=ar.CanceledError;ar.all=function(e){return Promise.all(e)};ar.spread=gve;ar.isAxiosError=mve;ar.mergeConfig=Sf;ar.AxiosHeaders=Ul;ar.formToJSON=n=>UH(Qe.isHTMLForm(n)?new FormData(n):n);ar.getAdapter=MH.getAdapter;ar.HttpStatusCode=vve;ar.default=ar;const kH=ar,QI={red:{color:"#FF0000",fontColor:"#FF9494"},orange:{color:"#FF7300",fontColor:"#FF9A47"},yellow:{color:"#FFC800",fontColor:"#FFC800"},green:{color:"#99FF00",fontColor:"#99FF00"},blue:{color:"#00AAFF",fontColor:"#38BDFF"},indigo:{color:"#0062FF",fontColor:"#80B0FF"},violet:{color:"#C800FF",fontColor:"#EDADFF"},purple:{color:"#6600FF",fontColor:"#C59EFF"},pink:{color:"#FF94D2",fontColor:"#FF94D2"},black:{color:"#000000",fontColor:"#BFBFBF"},white:{color:"#FFFFFF",fontColor:"#FFFFFF"}},yve={confused:["Huh?","What?","Eh?","Nani?"],silent:["..."],thoughtful:["Hmmm"],neutral:["Can you say that again?","Can you repeat that?","Please say that again","Sorry I didnt understand, can you repeat that?"]},wve="_chatBox_1fp89_1",Bve="_messages_1fp89_50",Cve="_scrollBox_1fp89_67",bve="_send_1fp89_78",xve="_mic_1fp89_90",Ive="_sendButton_1fp89_94",Fve="_speaker_1fp89_100",_ve="_warning_1fp89_121",Eve="_isTyping_1fp89_130",Sve="_show_1fp89_136",Ko={chatBox:wve,messages:Bve,scrollBox:Cve,send:bve,mic:xve,sendButton:Ive,speaker:Fve,warning:_ve,isTyping:Eve,show:Sve};var Uve={serverUrl:"http://localhost:20741",clientId:"any",accessToken:"test1234"},wA={language:"en-US",task:"",model:"",continuous:!0,optimizeFinalResult:!0,messageFormat:"default",engineOptions:{}},RI="",Q3={},xy={},R3;function Qve(n){if(console.log("INFO - Server version: "+n.version),console.log("INFO - Active engine: "+n.engine),RI=n.engine,console.log("INFO - Available ASR languages: "+JSON.stringify(n.languages,null,2)),wA.language=n.languages[0],n.languages,console.log("INFO - Available ASR models: "+JSON.stringify(n.models,null,2)),wA.model=n.models[0],console.log("INFO - ASR model properties: "+JSON.stringify(n.modelProperties,null,2)),n.models.forEach(function(e,t){xy[e]=n.modelProperties[t],xy[e].language=n.languages[t],xy[e].engine||(xy[e].engine=RI)}),console.log("INFO - Available ASR features: "+JSON.stringify(n.features,null,2)),Array.isArray(n.features)?Q3[RI]=n.features:Q3=n.features,!R3){R3={};let e=navigator.language,t;if(e&&n.languages&&n.models){let r=n.languages.indexOf(e);if(r>=0)t=r;else{let i=e.substring(0,2);for(let s=0;s<n.languages.length;s++)if(n.languages[s].indexOf(i)==0){t=s;break}}}t!=null&&(wA.language=n.languages[t],wA.model=n.models[t]),console.log("INFO - Default language/model: "+wA.language+"/"+wA.model+" - NOTE: If you set 'language' via settings make sure to remove 'model'!")}}function Rve(){console.log("INFO - Loading server settings...");var n=new AbortController;setTimeout(function(){n.abort()},8e3),fetch(Uve.serverUrl+"/settings",{method:"GET",signal:n.signal}).then(function(e){if(e.ok)return e.json();throw{name:"FetchError",message:e.statusText,code:e.status}}).then(function(e){console.log("Server Info",e),e&&e.settings&&Qve(e.settings)}).catch(function(e){console.error("Server Info Fetch ERROR",e)})}var Kh;class SE{constructor(e){Yu(this,Kh,[]);it(this,"length",0);return zb(this,Kh,e),new Proxy(this,{get:(t,r)=>{if(r==="length")return Fs(this,Kh).length;if(typeof+r=="number")return Fs(this,Kh)[r]}})}}Kh=new WeakMap;class rC{constructor(e){it(this,"resultIndex",0);it(this,"results");this.results=new SE(e)}_dispatch(e,t){const r=Object.create(rC);r.resultIndex=this.resultIndex,r.results=this.results,r.type=t,e._dispatchEvent(r)}}class Mve{constructor(){it(this,"transcript","");it(this,"confidence",1)}}var $h;class Tve{constructor(e){Yu(this,$h,[]);it(this,"isFinal",!1);it(this,"length",0);return zb(this,$h,e),new Proxy(this,{get:(t,r)=>{if(r==="isFinal")return this.isFinal;if(r==="length")return Fs(this,$h).length;if(typeof r=="symbol")return"You tried to access the raw list I think?";if(typeof+r=="number")return Fs(this,$h)[r]},[Symbol.toPrimitive]:(t,r)=>{console.log("Am I in here?")}})}}$h=new WeakMap;const eg=Object.freeze({NOSPEECH:"no-speech",ABORTED:"aborted",AUDIOCAPTURE:"audio-capture",NETWORK:"network",NOTALLOWED:"not-allowed",SERVICENOTALLOWED:"service-not-allowed",BADGRAMMAR:"bad-grammar",LANGUAGENOTSUPPORTED:"language-not-supported"});class Sh{constructor(){it(this,"error","");it(this,"message","")}_dispatch(e){const t=Object.create(Sh);t.error=this.error,t.message=this.message,t.type="error",e._dispatchEvent(t)}}function Nve(n,e){var t=atob(n);if(e){for(var r=new Uint8Array(t.length),i=0,s=t.length;i<s;++i)r[i]=t.charCodeAt(i);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return t}function kve(n,e,t){var r=e===void 0?null:e,i=t===void 0?!1:t,s=Nve(n,i),o=s.indexOf(`
`,10)+1,a=s.substring(o)+(r?"//# sourceMappingURL="+r:""),l=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(l)}function DH(n,e,t){var r;return function(s){return r=r||kve(n,e,t),new Worker(r,s)}}var Dve=DH("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqDQogICAqIE9yaWdpbmFsIGNvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMgLSBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wOw0KICAgKiBNb2RpZmllZCBmb3IgU0VQSUEgcHJvamVjdCAoTUlUIExpY2Vuc2UpDQogICAqLw0KICAgDQogIC8qKg0KICAgKiBBIEpTIEZJRk8gaW1wbGVtZW50YXRpb24gZm9yIHRoZSBBdWRpb1dvcmtsZXQuDQogICAqIE5vdGU6DQogICAqICAtIFRoZSBjaGFubmVsIGNvdW50IG9mIGlucHV0L291dHB1dCBjYW5ub3QgYmUgY2hhbmdlZCBkeW5hbWljYWxseS4NCiAgICogICAgVGhlIEF1ZGlvV29ya2xldE5vZGUgc2hvdWxkIGJlIGNvbmZpZ3VyZWQgd2l0aCB0aGUgYC5jaGFubmVsQ291bnQgPSBrYA0KICAgKiAgICAod2hlcmUgayBpcyB0aGUgY2hhbm5lbCBjb3VudCB5b3Ugd2FudCkgYW5kIGAuY2hhbm5lbENvdW50TW9kZSA9IGV4cGxpY2l0YC4NCiAgICoNCiAgICogQGNsYXNzDQogICAqLw0KICAgY2xhc3MgUmluZ0J1ZmZlciB7DQogICAgLyoqDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBsZW5ndGggQnVmZmVyIGxlbmd0aCBpbiBmcmFtZXMuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBjaGFubmVsQ291bnQgQnVmZmVyIGNoYW5uZWwgY291bnQuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBwcmVjaXNpb24gIlVpbnQ4IiwgIkludDgiLCAiVWludDE2IiwgIkludDE2IiwgIkZsb2F0MzIiIGV0Yy4NCiAgICAgKi8NCiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsIGNoYW5uZWxDb3VudCwgcHJlY2lzaW9uKSB7DQogICAgICB0aGlzLl9yZWFkSW5kZXggPSAwOw0KICAgICAgdGhpcy5fd3JpdGVJbmRleCA9IDA7DQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KDQogICAgICB0aGlzLl9jaGFubmVsQ291bnQgPSBjaGFubmVsQ291bnQ7DQogICAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGg7DQogICAgICB0aGlzLl9jaGFubmVsRGF0YSA9IFtdOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsraSkgew0KICAJICBpZiAocHJlY2lzaW9uID09ICJVaW50MTYiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgVWludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDE2Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIlVpbnQ4Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDgiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgSW50OEFycmF5KGxlbmd0aCk7IH0NCiAgCSAgZWxzZSB7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEZsb2F0MzJBcnJheShsZW5ndGgpOyB9DQogICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2V0dGVyIGZvciBBdmFpbGFibGUgZnJhbWVzIGluIGJ1ZmZlci4NCiAgICAgKg0KICAgICAqIEByZXR1cm4ge251bWJlcn0gQXZhaWxhYmxlIGZyYW1lcyBpbiBidWZmZXIuDQogICAgICovDQogICAgZ2V0IGZyYW1lc0F2YWlsYWJsZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9mcmFtZXNBdmFpbGFibGU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUHVzaCBhIHNlcXVlbmNlIG9mIEFycmF5cyB0byBidWZmZXIuDQogICAgICoNCiAgICAgKiBAcGFyYW0gIHthcnJheX0gYXJyYXlTZXF1ZW5jZSBBIHNlcXVlbmNlIG9mIEFycmF5cy4NCiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gY3VzdG9tVHJhbnNmb3JtIEEgZnVuY3Rpb24gb2YgKGFycmF5LCBjaGFubmVsLCBpbmRleCkgdG8gdHJhbnNmb3JtIHRoZSBpbnB1dCBkdXJpbmcgcHVzaCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVzaChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIHxhcnJheVNlcXVlbmNlfCBzdG9yYWdlIHRvIHRoZSBpbnRlcm5hbCBidWZmZXIuDQogICAgICBsZXQgc291cmNlTGVuZ3RoID0gYXJyYXlTZXF1ZW5jZVswXS5sZW5ndGg7DQogIAlsZXQgdHJhbnNmb3JtID0gY3VzdG9tVHJhbnNmb3JtIHx8IGZ1bmN0aW9uKHRoaXNBcnJheSwgY2hhbm5lbCwgaSl7DQogIAkJcmV0dXJuIHRoaXNBcnJheVtjaGFubmVsXVtpXTsNCiAgCX07DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZUxlbmd0aDsgKytpKSB7DQogICAgICAgIGxldCB3cml0ZUluZGV4ID0gKHRoaXMuX3dyaXRlSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIHRoaXMuX2NoYW5uZWxEYXRhW2NoYW5uZWxdW3dyaXRlSW5kZXhdID0gdHJhbnNmb3JtKGFycmF5U2VxdWVuY2UsIGNoYW5uZWwsIGkpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHRoaXMuX3dyaXRlSW5kZXggKz0gc291cmNlTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3dyaXRlSW5kZXggPj0gdGhpcy5fbGVuZ3RoKSB7DQogICAgICAgIHRoaXMuX3dyaXRlSW5kZXggPSB0aGlzLl93cml0ZUluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICAvLyBGb3IgZXhjZXNzaXZlIGZyYW1lcywgdGhlIGJ1ZmZlciB3aWxsIGJlIG92ZXJ3cml0dGVuLg0KICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlICs9IHNvdXJjZUxlbmd0aDsNCiAgICAgIGlmICh0aGlzLl9mcmFtZXNBdmFpbGFibGUgPiB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlID0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFB1bGwgZGF0YSBvdXQgb2YgYnVmZmVyIGFuZCBmaWxsIGEgZ2l2ZW4gc2VxdWVuY2Ugb2YgQXJyYXlzLg0KICAgICAqDQogICAgICogQHBhcmFtICB7YXJyYXl9IGFycmF5U2VxdWVuY2UgQW4gYXJyYXkgb2YgQXJyYXlzLg0KICAgICAqIEBwYXJhbSAge2Z1bmN0aW9ufSBjdXN0b21UcmFuc2Zvcm0gQSBmdW5jdGlvbiBvZiAoYXJyYXksIGNoYW5uZWwsIGluZGV4KSB0byB0cmFuc2Zvcm0gdGhlIG91dHB1dCBkdXJpbmcgcHVsbCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVsbChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBJZiB0aGUgRklGTyBpcyBjb21wbGV0ZWx5IGVtcHR5LCBkbyBub3RoaW5nLg0KICAgICAgaWYgKHRoaXMuX2ZyYW1lc0F2YWlsYWJsZSA9PT0gMCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQoNCiAgICAgIGxldCBkZXN0aW5hdGlvbkxlbmd0aCA9IGFycmF5U2VxdWVuY2VbMF0ubGVuZ3RoOw0KICAJbGV0IHRyYW5zZm9ybSA9IGN1c3RvbVRyYW5zZm9ybSB8fCBmdW5jdGlvbih0aGlzQXJyYXksIGNoYW5uZWwsIGkpew0KICAJCXJldHVybiB0aGlzQXJyYXlbY2hhbm5lbF1baV07DQogIAl9Ow0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciB0byB0aGUgfGFycmF5U2VxdWVuY2V8IHN0b3JhZ2UuDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlc3RpbmF0aW9uTGVuZ3RoOyArK2kpIHsNCiAgICAgICAgbGV0IHJlYWRJbmRleCA9ICh0aGlzLl9yZWFkSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIGFycmF5U2VxdWVuY2VbY2hhbm5lbF1baV0gPSB0cmFuc2Zvcm0odGhpcy5fY2hhbm5lbERhdGEsIGNoYW5uZWwsIHJlYWRJbmRleCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgdGhpcy5fcmVhZEluZGV4ICs9IGRlc3RpbmF0aW9uTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3JlYWRJbmRleCA+PSB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fcmVhZEluZGV4ID0gdGhpcy5fcmVhZEluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgLT0gZGVzdGluYXRpb25MZW5ndGg7DQogICAgICBpZiAodGhpcy5fZnJhbWVzQXZhaWxhYmxlIDwgMCkgew0KICAgICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KICAgICAgfQ0KICAgIH0NCiAgfQoKICBjb25zdCBXZWJSdGNWYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2F8fEYoIkFzc2VydGlvbiBmYWlsZWQ6ICIrYik7fWZ1bmN0aW9uIGMoYSl7dmFyIGM9SVsiXyIrYV07cmV0dXJuIGIoYywiQ2Fubm90IGNhbGwgdW5rbm93biBmdW5jdGlvbiAiK2ErIiwgbWFrZSBzdXJlIGl0IGlzIGV4cG9ydGVkIiksY31mdW5jdGlvbiBkKGEsYixkLGUpe2Z1bmN0aW9uIGcoYSl7cmV0dXJuICJzdHJpbmciPT09Yj9mKGEpOiJib29sZWFuIj09PWI/ISFhOmF9dmFyIGo9e3N0cmluZzpmdW5jdGlvbihhKXt2YXIgYj0wO2lmKG51bGwhPT1hJiZ2b2lkIDAhPT1hJiYwIT09YSl7dmFyIGM9KGEubGVuZ3RoPDwyKSsxO2I9Y2IoYyksaChhLGIsYyk7fXJldHVybiBifSxhcnJheTpmdW5jdGlvbihhKXt2YXIgYj1jYihhLmxlbmd0aCk7cmV0dXJuIGsoYSxiKSxifX0sbD1jKGEpLG09W10sbj0wO2lmKGUpZm9yKHZhciBvLHA9MDtwPGUubGVuZ3RoO3ArKylvPWpbZFtwXV0sbz8oMD09PW4mJihuPWViKCkpLG1bcF09byhlW3BdKSk6bVtwXT1lW3BdO3ZhciBxPWwuYXBwbHkobnVsbCxtKTtyZXR1cm4gcT1nKHEpLDAhPT1uJiZkYihuKSxxfWZ1bmN0aW9uIGUoYSxiLGMpe2Zvcih2YXIgZD1iK2MsZT1iO2FbZV0mJiEoZT49ZCk7KSsrZTtpZigxNjxlLWImJmEuc3ViYXJyYXkmJmlhKXJldHVybiBpYS5kZWNvZGUoYS5zdWJhcnJheShiLGUpKTtmb3IodmFyIGYsZz0iIjtiPGU7KXtpZihmPWFbYisrXSwhKDEyOCZmKSl7Zys9U3RyaW5nLmZyb21DaGFyQ29kZShmKTtjb250aW51ZX12YXIgaD02MyZhW2IrK107aWYoMTkyPT0oMjI0JmYpKXtnKz1TdHJpbmcuZnJvbUNoYXJDb2RlKCgzMSZmKTw8NnxoKTtjb250aW51ZX12YXIgaT02MyZhW2IrK107aWYoZj0yMjQ9PSgyNDAmZik/KDE1JmYpPDwxMnxoPDw2fGk6KDcmZik8PDE4fGg8PDEyfGk8PDZ8NjMmYVtiKytdLDY1NTM2PmYpZys9U3RyaW5nLmZyb21DaGFyQ29kZShmKTtlbHNlIHt2YXIgaj1mLTY1NTM2O2crPVN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8aj4+MTAsNTYzMjB8MTAyMyZqKTt9fXJldHVybiBnfWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gYT9lKF8sYSxiKToiIn1mdW5jdGlvbiBnKGEsYixjLGQpe2lmKCEoMDxkKSlyZXR1cm4gMDtmb3IodmFyIGUsZj1jLGc9YytkLTEsaD0wO2g8YS5sZW5ndGg7KytoKXtpZihlPWEuY2hhckNvZGVBdChoKSw1NTI5Njw9ZSYmNTczNDM+PWUpe3ZhciBqPWEuY2hhckNvZGVBdCgrK2gpO2U9NjU1MzYrKCgxMDIzJmUpPDwxMCl8MTAyMyZqO31pZigxMjc+PWUpe2lmKGM+PWcpYnJlYWs7YltjKytdPWU7fWVsc2UgaWYoMjA0Nz49ZSl7aWYoYysxPj1nKWJyZWFrO2JbYysrXT0xOTJ8ZT4+NixiW2MrK109MTI4fDYzJmU7fWVsc2UgaWYoNjU1MzU+PWUpe2lmKGMrMj49ZylicmVhaztiW2MrK109MjI0fGU+PjEyLGJbYysrXT0xMjh8NjMmZT4+NixiW2MrK109MTI4fDYzJmU7fWVsc2Uge2lmKGMrMz49ZylicmVhaztiW2MrK109MjQwfGU+PjE4LGJbYysrXT0xMjh8NjMmZT4+MTIsYltjKytdPTEyOHw2MyZlPj42LGJbYysrXT0xMjh8NjMmZTt9fXJldHVybiBiW2NdPTAsYy1mfWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBnKGEsXyxiLGMpfWZ1bmN0aW9uIGkoYSl7Zm9yKHZhciBiLGM9MCxkPTA7ZDxhLmxlbmd0aDsrK2QpYj1hLmNoYXJDb2RlQXQoZCksNTUyOTY8PWImJjU3MzQzPj1iJiYoYj02NTUzNisoKDEwMjMmYik8PDEwKXwxMDIzJmEuY2hhckNvZGVBdCgrK2QpKSwxMjc+PWI/KytjOjIwNDc+PWI/Yys9Mjo2NTUzNT49Yj9jKz0zOmMrPTQ7cmV0dXJuIGN9ZnVuY3Rpb24gaihhKXt2YXIgYj1pKGEpKzEsYz1jYihiKTtyZXR1cm4gZyhhLCQsYyxiKSxjfWZ1bmN0aW9uIGsoYSxiKXskLnNldChhLGIpO31mdW5jdGlvbiBsKCl7SS5IRUFQOD0kPW5ldyBJbnQ4QXJyYXkoWiksSS5IRUFQMTY9bmV3IEludDE2QXJyYXkoWiksSS5IRUFQMzI9Y2E9bmV3IEludDMyQXJyYXkoWiksSS5IRUFQVTg9Xz1uZXcgVWludDhBcnJheShaKSxJLkhFQVBVMTY9bmV3IFVpbnQxNkFycmF5KFopLEkuSEVBUFUzMj1uZXcgVWludDMyQXJyYXkoWiksSS5IRUFQRjMyPW5ldyBGbG9hdDMyQXJyYXkoWiksSS5IRUFQRjY0PW5ldyBGbG9hdDY0QXJyYXkoWik7fWZ1bmN0aW9uIG0oYSl7Zm9yKDswPGEubGVuZ3RoOyl7dmFyIGI9YS5zaGlmdCgpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBiKXtiKCk7Y29udGludWV9dmFyIGM9Yi5mdW5jOyJudW1iZXIiPT10eXBlb2YgYz92b2lkIDA9PT1iLmFyZz9JLmR5bkNhbGxfdihjKTpJLmR5bkNhbGxfdmkoYyxiLmFyZyk6Yyh2b2lkIDA9PT1iLmFyZz9udWxsOmIuYXJnKTt9fWZ1bmN0aW9uIG4oKXtpZihJLnByZVJ1bilmb3IoImZ1bmN0aW9uIj09dHlwZW9mIEkucHJlUnVuJiYoSS5wcmVSdW49W0kucHJlUnVuXSk7SS5wcmVSdW4ubGVuZ3RoOylzKEkucHJlUnVuLnNoaWZ0KCkpO20ob2EpO31mdW5jdGlvbiBvKCl7bShwYSk7fWZ1bmN0aW9uIHAoKXttKHFhKTt9ZnVuY3Rpb24gcigpe2lmKEkucG9zdFJ1bilmb3IoImZ1bmN0aW9uIj09dHlwZW9mIEkucG9zdFJ1biYmKEkucG9zdFJ1bj1bSS5wb3N0UnVuXSk7SS5wb3N0UnVuLmxlbmd0aDspdChJLnBvc3RSdW4uc2hpZnQoKSk7bShyYSk7fWZ1bmN0aW9uIHMoYSl7b2EudW5zaGlmdChhKTt9ZnVuY3Rpb24gdChhKXtyYS51bnNoaWZ0KGEpO31mdW5jdGlvbiB1KCl7T2ErKyxJLm1vbml0b3JSdW5EZXBlbmRlbmNpZXMmJkkubW9uaXRvclJ1bkRlcGVuZGVuY2llcyhPYSk7fWZ1bmN0aW9uIHYoKXtpZihPYS0tLEkubW9uaXRvclJ1bkRlcGVuZGVuY2llcyYmSS5tb25pdG9yUnVuRGVwZW5kZW5jaWVzKE9hKSwwPT1PYSYmKFFhKSl7dmFyIGE9UWE7UWE9bnVsbCxhKCk7fX1mdW5jdGlvbiB3KGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9YS5leHBvcnRzO0kuYXNtPWIsdigpO31mdW5jdGlvbiBjKGEpe2lmKCJib29sZWFuIj09dHlwZW9mIE8mJk8pe3ZhciBiO3RyeXtiPUJ1ZmZlci5mcm9tKGEsImJhc2U2NCIpO31jYXRjaChjKXtiPW5ldyBCdWZmZXIoYSwiYmFzZTY0Iik7fXJldHVybiBuZXcgVWludDhBcnJheShiLmJ1ZmZlcixiLmJ5dGVPZmZzZXQsYi5ieXRlTGVuZ3RoKX10cnl7Zm9yKHZhciBjPWYoYSksZD1uZXcgVWludDhBcnJheShjLmxlbmd0aCksZT0wO2U8Yy5sZW5ndGg7KytlKWRbZV09Yy5jaGFyQ29kZUF0KGUpO3JldHVybiBkfWNhdGNoKGEpe3Rocm93IG5ldyBFcnJvcigiQ29udmVydGluZyBiYXNlNjQgc3RyaW5nIHRvIGJ5dGVzIGZhaWxlZC4iKX19ZnVuY3Rpb24gZChhKXtyZXR1cm4gYyhhLnNsaWNlKDM3KSl9dmFyIGU9e2VudjphLGdsb2JhbDp7TmFOOk5hTixJbmZpbml0eToxLzB9LCJnbG9iYWwuTWF0aCI6TWF0aCxhc20yd2FzbTpTfTt1KCk7dmFyIGY9ImZ1bmN0aW9uIj09dHlwZW9mIGF0b2I/YXRvYjpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxqPSIiLGs9MDthPWEucmVwbGFjZSgvW15BLVphLXowLTlcK1wvXD1dL2csIiIpO2RvIGU9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGY9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGc9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGg9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGI9ZTw8MnxmPj40LGM9KDE1JmYpPDw0fGc+PjIsZD0oMyZnKTw8NnxoLGorPVN0cmluZy5mcm9tQ2hhckNvZGUoYiksNjQhPT1nJiYoais9U3RyaW5nLmZyb21DaGFyQ29kZShjKSksNjQhPT1oJiYoais9U3RyaW5nLmZyb21DaGFyQ29kZShkKSk7d2hpbGUoazxhLmxlbmd0aCk7cmV0dXJuIGp9O2lmKEkuaW5zdGFudGlhdGVXYXNtKXRyeXtyZXR1cm4gSS5pbnN0YW50aWF0ZVdhc20oZSxiKX1jYXRjaChhKXtyZXR1cm4gUigiTW9kdWxlLmluc3RhbnRpYXRlV2FzbSBjYWxsYmFjayBmYWlsZWQgd2l0aCBlcnJvcjogIithKSwhMX1yZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGI9ZChKKTtyZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoYixlKS50aGVuKGEsZnVuY3Rpb24oYSl7UigiZmFpbGVkIHRvIGFzeW5jaHJvbm91c2x5IHByZXBhcmUgd2FzbTogIithKSxGKGEpO30pfShmdW5jdGlvbihhKXtiKGEuaW5zdGFuY2UpO30pLHt9fWZ1bmN0aW9uIHgoYSxiKXtTYS52YXJhcmdzPWI7dHJ5e2Zvcih2YXIgYz1TYS5nZXQoKSxkPVNhLmdldCgpLGU9U2EuZ2V0KCksZj0wLGc9MDtnPGU7ZysrKXtmb3IodmFyIGg9Y2FbZCs4Kmc+PjJdLGs9Y2FbZCsoOCpnKzQpPj4yXSxsPTA7bDxrO2wrKylTYS5wcmludENoYXIoYyxfW2grbF0pO2YrPWs7fXJldHVybiBmfWNhdGNoKGEpe3JldHVybiAidW5kZWZpbmVkIiE9dHlwZW9mIEZTJiZhIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcnx8RihhKSwtYS5lcnJub319ZnVuY3Rpb24geSgpe3JldHVybiAkLmxlbmd0aH1mdW5jdGlvbiB6KGEsYixjKXtfLnNldChfLnN1YmFycmF5KGIsYitjKSxhKTt9ZnVuY3Rpb24gQShhKXtyZXR1cm4gSS5fX19lcnJub19sb2NhdGlvbiYmKGNhW0kuX19fZXJybm9fbG9jYXRpb24oKT4+Ml09YSksYX1mdW5jdGlvbiBCKCl7RigiT09NIik7fWZ1bmN0aW9uIEMoYSl7dGhpcy5uYW1lPSJFeGl0U3RhdHVzIix0aGlzLm1lc3NhZ2U9IlByb2dyYW0gdGVybWluYXRlZCB3aXRoIGV4aXQoIithKyIpIix0aGlzLnN0YXR1cz1hO31mdW5jdGlvbiBEKGEpe2Z1bmN0aW9uIGIoKXtJLmNhbGxlZFJ1bnx8KEkuY2FsbGVkUnVuPSEwLGdhfHwobygpLHAoKSxHKEkpLEkub25SdW50aW1lSW5pdGlhbGl6ZWQmJkkub25SdW50aW1lSW5pdGlhbGl6ZWQoKSxJLl9tYWluJiZvYiYmSS5jYWxsTWFpbihhKSxyKCkpKTt9KGE9YXx8SS5hcmd1bWVudHMsISgwPE9hKSkmJihuKCksMDxPYXx8SS5jYWxsZWRSdW58fChJLnNldFN0YXR1cz8oSS5zZXRTdGF0dXMoIlJ1bm5pbmcuLi4iKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe0kuc2V0U3RhdHVzKCIiKTt9LDEpLGIoKTt9LDEpKTpiKCkpKTt9ZnVuY3Rpb24gRShhLGIpe2ImJkkubm9FeGl0UnVudGltZSYmMD09PWF8fChJLm5vRXhpdFJ1bnRpbWV8fChnYT0hMCxJLm9uRXhpdCYmSS5vbkV4aXQoYSkpLEkucXVpdChhLG5ldyBDKGEpKSk7fWZ1bmN0aW9uIEYoYSl7dGhyb3cgSS5vbkFib3J0JiZJLm9uQWJvcnQoYSksdm9pZCAwPT09YT9hPSIiOihRKGEpLFIoYSksYT0iXCIiK2ErIlwiIiksZ2E9ITAsImFib3J0KCIrYSsiKS4gQnVpbGQgd2l0aCAtcyBBU1NFUlRJT05TPTEgZm9yIG1vcmUgaW5mby4ifWE9YXx8e307dmFyIEcsST0idW5kZWZpbmVkIj09dHlwZW9mIGE/e306YSxKPSJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsQUdGemJRRUFBQUFCcEFFVllBTi9mMzhCZjJBQUFHQUJmd0YvWUFKL2Z3Ri9ZQWQvZjM5L2YzOS9BWDlnQ0g5L2YzOS9mMzkvQVg5Z0EzOStmd0YrWUFGL0FHQUhmMzkvZjM5L2Z3QmdCSDkvZjM4QVlBQUJmMkFDZjM4QVlBWi9mMzkvZjM4QmYyQUVmMzkvZndGL1lBWi9mMzkvZjM4QVlBVi9mMzkvZndCZ0EzOS9md0JnQ1g5L2YzOS9mMzkvZndGL1lBUi9mMzUvQVg1Z0NIOS9mMzkvZjM5L0FHQUZmMzkvZjM4QmZ3TFdBaEFEWlc1MkJXRmliM0owQUFjRFpXNTJEbDlmWDJGemMyVnlkRjltWVdsc0FBa0RaVzUyQzE5ZlgzTmxkRVZ5Y2s1dkFBY0RaVzUyRFY5ZlgzTjVjMk5oYkd3eE5EQUFBd05sYm5ZTlgxOWZjM2x6WTJGc2JERTBOZ0FEQTJWdWRneGZYMTl6ZVhOallXeHNOVFFBQXdObGJuWUxYMTlmYzNselkyRnNiRFlBQXdObGJuWVpYMlZ0YzJOeWFYQjBaVzVmWjJWMFgyaGxZWEJmYzJsNlpRQUtBMlZ1ZGhaZlpXMXpZM0pwY0hSbGJsOXRaVzFqY0hsZlltbG5BQUFEWlc1MkYxOWxiWE5qY21sd2RHVnVYM0psYzJsNlpWOW9aV0Z3QUFJRFpXNTJGMkZpYjNKMFQyNURZVzV1YjNSSGNtOTNUV1Z0YjNKNUFBSURaVzUyQzNObGRGUmxiWEJTWlhRd0FBY0RaVzUyREY5ZmRHRmliR1ZmWW1GelpRTi9BQU5sYm5ZT1JGbE9RVTFKUTFSUFVGOVFWRklEZndBRFpXNTJCbTFsYlc5eWVRSUJnQUtBQWdObGJuWUZkR0ZpYkdVQmNBRWdJQU5uWmdJS0J3c0tBZ3dDQWdNTkF3SURBQUFOQWdBQUFBME9Ed2tDRHcwSkFBRUJBUUVEQ1FjQUVBa0pDUVFDQndBQUFBSUZBZ0FBQ0FzREF3TURBd01DQUFZQ0NnSUFBZ2NBQWdJRERRTUNBZ2NEQUFBQ0F3QU5CUkVTQndzVEFnTUFCQVVHQVFjSUZBWVBBbjhCUWNBNUMzOEJRY0M1d0FJTEI3QUNGaEZmWDE5bGNuSnViMTlzYjJOaGRHbHZiZ0JOQlY5bWNtVmxBRm9GWDIxaGFXNEFFQWRmYldGc2JHOWpBRmtIWDIxbGJXTndlUUJjQjE5dFpXMXpaWFFBWFExZmNISnZZMlZ6YzE5a1lYUmhBQklGWDNOaWNtc0FYZ2hmYzJWMGJXOWtaUUFSQ21SNWJrTmhiR3hmYVdrQVh3dGtlVzVEWVd4c1gybHBhUUJnREdSNWJrTmhiR3hmYVdscGFRQmhFR1I1YmtOaGJHeGZhV2xwYVdscGFXa0FZaEZrZVc1RFlXeHNYMmxwYVdscGFXbHBhUUJqREdSNWJrTmhiR3hmYW1scWFRQnhDV1I1YmtOaGJHeGZkZ0JsQ21SNWJrTmhiR3hmZG1rQVpoQmtlVzVEWVd4c1gzWnBhV2xwYVdscEFHY1RaWE4wWVdKc2FYTm9VM1JoWTJ0VGNHRmpaUUFQQ25OMFlXTnJRV3hzYjJNQURBeHpkR0ZqYTFKbGMzUnZjbVVBRGdsemRHRmphMU5oZG1VQURRa21BUUFqQUFzZ2FFazNhR2xFUlVaSFNHbHBhazg1T2twcWFtcHJObXc5YlV0dUxHODRjRUVLcU1FQlpoc0JBWDhqQWlFQklBQWpBbW9rQWlNQ1FROXFRWEJ4SkFJZ0FRc0VBQ01DQ3dZQUlBQWtBZ3NLQUNBQUpBSWdBU1FEQ3hzQVFmQXJFQk5CZjBZRVFFRUFEd3RCOENzb0FnQVFGRUYvUndzTUFFSHdLeWdDQUNBQUVCVUxjQUFnQUVVRVFFSGVJUkJZR2dzZ0FDNEJBQ0FEUndSQVFaQWhRYUFoUVI1QnB5RVFBUXNnQUVISUFXb3VBUUFnQkVjRVFFRzBJVUdnSVVFZlFhY2hFQUVMSUFVZ0FFR2dIMm91QVFCR0JFQkI4Q3NvQWdBZ0FpQUFJQUVRRmc4RlFjZ2hRYUFoUVNCQnB5RVFBUXRCQUFzdEFDQUFCSDhnQUVIZ0JSQlpJZ0EyQWdBZ0FBUi9FQ29nQUVIY0JXcEJBRFlDQUVFQUJVRi9Dd1ZCZndzTEJnQWdBQkFZQ3lJQUlBQUVmeUFBUWR3RmFpZ0NBRUVxUmdSL0lBQWdBUkFaQlVGL0N3VkJmd3NMeFFFQUlBQkZCRUJCZnc4TElBSkZJQUJCM0FWcUtBSUFRU3BIY2dSQVFYOFBDeUFCSUFNUUZ3UkFRWDhQQ3dKQUlBRkJnUG9CU0FSQUlBRkJnUDBBU0FSQUlBRkJ3RDVyUlFSQUlBQWdBaUFERUJzaEFBd0RDMEYvRHdVZ0FVR0EvUUJyUlFSQUlBQWdBaUFERUNBaEFBd0RDMEYvRHdzQUJTQUJRWUQzQWtnRVFDQUJRWUQ2QVd0RkJFQWdBQ0FDSUFNUUh5RUFEQU1MUVg4UEJTQUJRWUQzQW10RkJFQWdBQ0FDSUFNUUdpRUFEQU1MUVg4UEN3QUxBQXNnQUVFQklBQkJBVWdiQzRVQkFBSi9JQUVnQUVHQStnRklCSDhDZnlBQVFZRDlBRWdFUUVFSUlBQkJ3RDVyUlEwQkdrRi9EQU1MUVg4Z0FFR0EvUUJyRFFJYVFSQUxCU0FBUVlEM0FrZ0VmMEYvSUFCQmdQb0JhdzBDR2tFZ0JVRi9JQUJCZ1BjQ2F3MENHa0V3Q3dzaUFFRWViRVlnQVNBQVFRcHNSaUFCSUFCQkZHeEdjbkpCQVhOQkgzUkJIM1VMQzQwREFRRi9JQUJGQkVCQmZ3OExJQUJCQVRZQ0FDQUFRUVJxSWdGQ0FEY0NBQ0FCUWdBM0FnZ2dBRUdVQW1wQ0FEY0NBQ0FBUVJScUVEQWdBRUcwQVdvaUFVR0FDQ2tCQURjQkFDQUJRWWdJS1FFQU53RUlJQUZCa0FncEFRQTNBUkFnQUVITUFXb2lBVUdnQ0NrQkFEY0JBQ0FCUWFnSUtRRUFOd0VJSUFGQnNBZ3BBUUEzQVJBZ0FFSGtBV29pQVVIQUNDa0JBRGNCQUNBQlFjZ0lLUUVBTndFSUlBRkIwQWdwQVFBM0FSQWdBRUg4QVdvaUFVSGdDQ2tCQURjQkFDQUJRZWdJS1FFQU53RUlJQUZCOEFncEFRQTNBUkFnQUVHY0FtcEJBRUhBQVJCZEdrRUFJUUVEUUNBQVFkd0RhaUFCUVFGMGFrR1F6Z0E3QVFBZ0FVRUJhaUlCUWVBQVJ3MEFDeUFBUWFnRmFpSUJRZ0EzQWdBZ0FVSUFOd0lJSUFGQ0FEY0NFQ0FCUVFBMkFoZ2dBRUdjQldwQndBdzdBUUFnQUVHZUJXcEJ3QXc3QVFBZ0FFR2dCV3BCd0F3N0FRQWdBRUdpQldwQndBdzdBUUFnQUVHa0JXcEJ3QXc3QVFBZ0FFR21CV3BCd0F3N0FRQWdBRUVBRUJrRVFFRi9Ed3NnQUVIY0JXcEJLallDQUVFQUMrZ0RBQUpBQWtBQ1FBSkFBa0FnQVE0RUFBRUNBd1FMSUFCQnhBVnFJZ0ZCb0NBb0FRQTJBUUFnQVVHa0lDNEJBRHNCQkNBQVFjb0ZhaUlCUWFZZ0tBRUFOZ0VBSUFGQnFpQXVBUUE3QVFRZ0FFSFFCV29pQVVHVUlDZ0JBRFlCQUNBQlFaZ2dMZ0VBT3dFRUlBQkIxZ1ZxSWdCQm1pQW9BUUEyQVFBZ0FFR2VJQzRCQURzQkJFRUFEd3NnQUVIRUJXb2lBVUdnSUNnQkFEWUJBQ0FCUWFRZ0xnRUFPd0VFSUFCQnlnVnFJZ0ZCcGlBb0FRQTJBUUFnQVVHcUlDNEJBRHNCQkNBQVFkQUZhaUlCUWF3Z0tBRUFOZ0VBSUFGQnNDQXVBUUE3QVFRZ0FFSFdCV29pQUVHeUlDZ0JBRFlCQUNBQVFiWWdMZ0VBT3dFRVFRQVBDeUFBUWNRRmFpSUJRY1FnS0FFQU5nRUFJQUZCeUNBdUFRQTdBUVFnQUVIS0JXb2lBVUhLSUNnQkFEWUJBQ0FCUWM0Z0xnRUFPd0VFSUFCQjBBVnFJZ0ZCdUNBb0FRQTJBUUFnQVVHOElDNEJBRHNCQkNBQVFkWUZhaUlBUWI0Z0tBRUFOZ0VBSUFCQndpQXVBUUE3QVFSQkFBOExJQUJCeEFWcUlnRkJ4Q0FvQVFBMkFRQWdBVUhJSUM0QkFEc0JCQ0FBUWNvRmFpSUJRY29nS0FFQU5nRUFJQUZCemlBdUFRQTdBUVFnQUVIUUJXb2lBVUhRSUNnQkFEWUJBQ0FCUWRRZ0xnRUFPd0VFSUFCQjFnVnFJZ0JCMWlBb0FRQTJBUUFnQUVIYUlDNEJBRHNCQkVFQUR3dEJmd3QyQVFaL0l3SWhBeU1DUWVBYWFpUUNJQU5CZ0JkcUlRVWdBeUlHUVFCQmdCY1FYUm9nQWtIZ0EyMGhCeUFDUWQ4RFNnUkFJQUJCRkdvaENFRUFJUVFEUUNBQklBUkIwQUJzUVFGMElBVnFJQWdnQmhBdklBUkJBV29pQkNBSFJ3MEFDd3NnQUNBRklBSkJCbTBRR3lFQUlBTWtBaUFBQ3pRQkFYOGpBaUVESXdKQkVHb2tBaUFBSUFBZ0F5QUFJQUVnQWlBREVDRWdBaEFjUVJCMFFSQjFJZ0EyQWdBZ0F5UUNJQUFMcXhBQkczOGpBaUVMSXdKQmdBRnFKQUlnQzBIZ0FHb2hEaUFMUVVCcklROGdDMEVnYWlJTVFnQTNBd0FnREVJQU53TUlJQXhDQURjREVDQUxJaEJDQURjREFDQUxRZ0EzQXdnZ0MwSUFOd01RQW44Q1FBSkFBa0FnQTBIUUFHc09VUUFDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBUUlMSUFCQnhBVnFJUVVnQUVIS0JXb2hCQ0FBUWRZRmFpRUhJQUJCMEFWcURBSUxJQUJCeGdWcUlRVWdBRUhNQldvaEJDQUFRZGdGYWlFSElBQkIwZ1ZxREFFTElBQkJ5QVZxSVFVZ0FFSE9CV29oQkNBQVFkb0ZhaUVISUFCQjFBVnFDeUVESUFjdUFRQWhDQ0FFTGdFQUlSY2dCUzRCQUNFWUlBSkJFSFJCRUhWQkNrb0VRQ0FETGdFQUlRMUJBQ0VDUVFBaEEwRUFJUVVEUUNBQ1FRRjBJQUZxSWdjdUFRQWdBRUcwQVdvZ0FrRUJkR291QVFBZ0FFSGtBV29nQWtFQmRHb3VBUUFnQWtFQmRDQU9haEFuSUFKQkFYUkJnQWxxTGdFQWJDRUtJQWN1QVFBZ0FFSE1BV29nQWtFQmRHb3VBUUFnQUVIOEFXb2dBa0VCZEdvdUFRQWdBa0VCZENBUGFoQW5JQUpCQVhSQm9BbHFMZ0VBYkNFSklBb2dCeTRCQUNBQVFiUUJhaUFDUVFacUlnUkJBWFJxTGdFQUlBQkI1QUZxSUFSQkFYUnFMZ0VBSUFSQkFYUWdEbW9RSnlBRVFRRjBRWUFKYWk0QkFHeHFJUVlnQ1NBSExnRUFJQUJCekFGcUlBUkJBWFJxTGdFQUlBQkIvQUZxSUFSQkFYUnFMZ0VBSUFSQkFYUWdEMm9RSnlBRVFRRjBRYUFKYWk0QkFHeHFJUWNnQmhBZFFSOGdCaHNnQnhBZFFSOGdCeHRyUVJCMElnUkJFSFVnQWtFQmRFSGNJR291QVFCc0lBTnFJUU5CQVNBRklBUkJEblVnRFVvYklRVWdCa0VNZGlJRVFSQjBRUUJLQkg4Z0FrRUJkQ0FNYWlBS1FRSjBRWUNBZjNFZ0JFSC8vd054RUM0aUJEc0JBRUdBZ0FFZ0JHdEIvLzhEY1NFR0lBSkJCbW9GUVlDQUFTRUdJQUlMUVFGMElBeHFJQVk3QVFBZ0IwRU1kaUlFUVJCMFFRQktCRUFnQWtFQmRDQVFhaUFKUVFKMFFZQ0FmM0VnQkVILy93TnhFQzRpQkRzQkFDQUNRUVpxUVFGMElCQnFRWUNBQVNBRWF6c0JBQXNnQWtFQmFpSUNRUVpIRFFBTElBVkIvLzhEY1NBRElBaE9jaUlOUVFCSElSSkJBQ0VHUVlEa0FDRUNBMEFnQUNBR1FRRjBJQUZxSWhNdUFRQWdCaEFwUVJCMFFSQjFRUVIwSUFCQnRBRnFJQVpCQVhScUloUkJBQ0FHUVFGMFFZQUphaUlWRUI1QkJuWnJRUkIwUVJCMVFZQ2FBV3hCRUhZaEdVSElBQ0FHYXlFYUlBSkIvLzhEY1VHQUJXb2lBa0gvL3dOeElSc2dBa0VRZEVFUWRTRWNRUUFoQ2dOQUlBQkJ0QUZxSUFZZ0NrRUdiR29pQ0VFQmRHb2lFUzRCQUNFQ0lBQkJ6QUZxSUFoQkFYUnFJaDB1QVFBaEZpQUFRZVFCYWlBSVFRRjBhaUlETGdFQUlRVWdBRUg4QVdvZ0NFRUJkR29pQnk0QkFDRUVJQkVnQ2lBYWFpSVJRUWQwSUFwQkIzUkJnQVZxSWg0Z0dTQVNCSDhnQWdVZ0FrSC8vd054SUFoQkFYUWdEbW91QVFBZ0NFRUJkQ0FNYWk0QkFFRUZkR3hCRUhWQmp3VnNRUloxYWtILy93TnhDMEgvL3dOeGFpSUpJQWxCRUhRZ0hrRVFkRWdiSWdrZ0NVRVFkQ0FSUVJkMFNoczdBUUFnRWdSQUlCMGdHeUFLUVFGMFFlZ2dhaTRCQUNJQ0lCWWdDRUVCZENBUGFpNEJBQ0lESUFoQkFYUWdFR291QVFBaUJVRUZkR3hCRUhWQm1qTnNRUlYxUVFGcVFRRjFhaUlKUWYvL0EzRWdDVUVRZEVFUWRTQUNTQnNpQWlBY0lBSkJFSFJCRUhWSUd6c0JBQ0FESUJNdkFRQWdGa0VFYWtFRGRXdEJFSFJCRUhWc1FRTjFRWUJnYWlBRlFRSjFiQ0lDUVFSMUlRVWdBa0VQU2dSL1FSZ2hDVUdBZ0lBRUlRZ2dCeUVESUFVZ0JFRUtiRUgvL3dOeEVDNGhCU0FFQlVFWUlRbEJnSUNBQkNFSUlBY2hBMEVBUVFBZ0JXc2dCRUVLYkVILy93TnhFQzVySVFVZ0JBc2hBZ1VnQ0VFQmRDQU9haTRCQUNBVEx3RUFJQUpCQTNWclFSQjBRUkIxYkVFRGRVR0FZR29nQ0VFQmRDQU1haTRCQUVFQ2FrRUNkV3dpQWtFT2RTRUVJQUpCLy84QVNnUi9RUlloQ1VHQWdJQUJJUWdnQkNBRklnSVFMZ1ZCRmlFSlFZQ0FnQUVoQ0VFQVFRQWdCR3NnQlNJQ0VDNXJDeUVGQ3lBRFFZQURJQUpCLy84RGNTQUlJQVZCRUhScUlBbDFhaUlDUWYvL0EzRWdBa0VRZEVHQWdJQU1TQnM3QVFBZ0NrRUJhaUlLUVFKSERRQUxJQlJCQUNBVkVCNGhBaUFBUWN3QmFpQUdRUUYwYWlJRFFRQWdCa0VCZEVHZ0NXb2lCQkFlSWdWQkNYWWdBa0VKZG10QkVIUkJFSFVpQnlBR1FRRjBRZXdnYWk0QkFDSUtTQVJBSUFNZ0NpQUhhMEVRZEVFUWRTSURRUTFzUVFKMlFmLy9BM0VnQkJBZUlRSWdGRUVBSUFOQmdJQURiRUVRZG10Qi8vOERjU0FWRUI0aEF3VWdBaUVESUFVaEFnc2dBa0VKZEVFUWRTSUZJQVpCQVhSQitDQnFMZ0VBSWdJaUJFb0VRQ0FBUWN3QmFpQUdRUUYwYWlJSElBUWdCV3NpQlNBSEx3RUFhanNCQUNBR1FRRjBJQUJxUWRnQmFpSUVJQVF2QVFBZ0JXbzdBUUFMSUFOQkNYUkJFSFVpQXlBR1FRRjBRWVFoYWk0QkFDSUZTZ1JBSUFCQnRBRnFJQVpCQVhScUlnUWdCU0FEYXlJRElBUXZBUUJxT3dFQUlBWkJBWFFnQUdwQndBRnFJZ1VnQlM4QkFDQURhanNCQUFzZ0JrRUJhaUlHUVFaSERRQUxJQUJCbEFKcUlnRWdBU2dDQUVFQmFqWUNBQ0FOUWYvL0EzRUVRQ0FBUVpvQ2FpSUJMZ0VBUVFGcVFSQjBRUkIxSVFJZ0FTQUNPd0VBSUFKQkJrb0VRQ0FCUVFZN0FRQWdBRUdZQW1vZ0Z6c0JBQ0FMSkFJZ0RROEZJQUJCbUFKcUlCZzdBUUFnQ3lRQ0lBMFBDd0FMQ3lBQVFaZ0NhaUlDTGdFQUlnRkJBRW9FZnlBQ0lBRkJmMm83QVFBZ0FVSC8vd054UVFKcVFmLy9BM0VGUVFBTElRRWdBRUdhQW1wQkFEc0JBQ0FMSkFJZ0FRdHVBUUYvSUFCRkJFQkJBQThMUVlDQWdJQjhRUUJCRUNBQUlBQkJIM1Z6SWdCQi8vOEJTeHNpQVVFSWNpQUJRWUNBZ0h3Z0FYWWdBSEZGR3lJQlFRUnlJQUZCZ0lDQVFDQUJkaUFBY1VVYklnRkJBbklnQVVHQWdJQ0FmaUFCZGlBQWNVVWJJZ0YySUFCeFJTQUJhZ3RVQVFGL0lBQWdBVUgvL3dOeElnRWdBQzhCQUdvaUF6c0JBQ0FDTGdFQUlBTkJFSFJCRUhWc0lRTWdBU0FBUVF4cUlnRXZBUUJxSVFBZ0FTQUFPd0VBSUFNZ0FrRU1haTRCQUNBQVFSQjBRUkIxYkdvTFJnRUJmeU1DSVFNakFrR2dDMm9rQWlBQklBTkI0QU5xSWdFZ0FFRU1haUFDRUNnZ0FTQURJQUJCQkdvZ0FrRUJkUkFvSUFBZ0F5QUNRUUoxRUJzaEFDQURKQUlnQUFzd0FRRi9Jd0loQXlNQ1FlQURhaVFDSUFFZ0F5QUFRUVJxSUFJUUtDQUFJQU1nQWtFQmRSQWJJUUFnQXlRQ0lBQUw1QUlCQjM4akFpRUlJd0pCOEFWcUpBSWdDRUh3QTJvaEJTQUlRWUFDYWlFSklBaEJnQUZxSVFZZ0NDSUhRZUFGYWlJRVFRQTdBUUFnQWtFQmRTRUtJQUpCZjB3RVFFSDZJVUdMSWtHS0FrRzBJaEFCQ3lBQ1FmRUJTQVJBSUFFZ0FpQUFRYWdGYWlBQVFiSUZhaUFGSUFrUUlpQUZJQW9nQUVHcUJXb2dBRUcwQldvZ0JpQUhFQ0lnQmlBQ1FRSjJJZ0ZCc0FFZ0JDQURRUXBxRUNNZ0J5QUJRYkFCSUFRZ0EwRUlhaEFqSUFrZ0NpQUFRYXdGYWlBQVFiWUZhaUFHSUFjUUlpQUdJQUZCc0FFZ0JDQURRUVpxRUNNZ0J5QUJJQUJCcmdWcUlBQkJ1QVZxSUFVZ0NSQWlJQVVnQWtFRGRpSUJRWkFDSUFRZ0EwRUVhaEFqSUFrZ0FTQUFRYkFGYWlBQVFib0ZhaUFHSUFjUUlpQUdJQUpCQkhZaUFVSHdBaUFFSUFOQkFtb1FJeUFISUFFZ0FFRzhCV29nQlJBa0lBVWdBVUh3QWlBRUlBTVFJeUFFTGdFQUlRQWdDQ1FDSUFBUEJVSFFJa0dMSWtHTEFrRzBJaEFCQzBFQUMzc0JBWDhnQUNBQlFRRjFJZ1pCN0tNQklBSWdCQkFtSUFCQkFtb2dCa0hES3lBRElBVVFKaUFCUVFGTUJFQVBDMEVBSVFBRFFDQUVRUUpxSVFFZ0JDQUVMZ0VBSWdNZ0JTOEJBR3M3QVFBZ0JVRUNhaUVDSUFVZ0F5QUZMd0VBYWpzQkFDQUFRUUZxSWdBZ0JrZ0VRQ0FCSVFRZ0FpRUZEQUVMQ3d1SUFnRUNmeU1DSVFZakFrRVFhaVFDSUFZaUJVRUFOZ0lBSUFCRkJFQkI0eUpCaXlKQnBBRkI4eUlRQVFzZ0FVRUFUQVJBUWY4aVFZc2lRYVVCUWZNaUVBRUxJQUFnQVNBRkVERWlBRVVFUUNBRUlBSTdBUUFnQmlRQ0R3dEJFU0FBRUNWcklRRWdCU0FGS0FJQUlBRnFJZ1UyQWdBZ0JDQUNRZi8vQTNGQkFDQUFRUUFnQVd0MElBQWdBWFlnQVVFQVNCc2lBVUVFZGtIL0IzRkJnUEFBY2tIVXdBRnNRUk4ySUFWQkVIUkJFSFZCMU1BQmJFRUpkbW9pQUNBQVFZQ0FBbkViYWpzQkFDQURMZ0VBSWdBaEFpQUFRUXRPQkVBZ0JpUUNEd3NnQlVGL1NnUkFJQU1nQWtFTGFqc0JBQ0FHSkFJRklBTWdBaUFCUVFBZ0JXdDJhanNCQUNBR0pBSUxDN29CQVFoL0lBRkJBRXdFUUE4TElBSkJBbW9oQlNBQ1FRUnFJUVlnQWtFR2FpRUhRUUFoQ0FOQUlBQXVBUUFoQkNBRkxnRUFJUWtnQlNBQ0xnRUFJZ283QVFBZ0FFRUNhaUVMSUFJZ0FDNEJBRHNCQUNBS1FiS1lmMndnQkNBSmFrSG5NMnhxSUFZdUFRQWlBRUhNUEd4cUlBY3VBUUJCakZSc2FpRUVJQWNnQURzQkFDQUdJQVJCRG5aQi8vOERjU0lBT3dFQUlBTkJBbW9oQkNBRElBQTdBUUFnQ0VFQmFpSUlJQUZIQkVBZ0N5RUFJQVFoQXd3QkN3c0xad0VCZnlBQVJRUkFRUUFQQ3lBQVFZQ0FnSUI0UVFCQkVDQUFRZi8vQTBzYklnRkJDSElnQVNBQVFZQ0FnSGdnQVhaeFJSc2lBVUVFY2lBQklBQkJnSUNBZ0g4Z0FYWnhSUnNpQVVFQ2NpQUJJQUJCZ0lDQWdId2dBWFp4UlJzaUFIWnhSU0FBYWd1TUFRRURmeUFETHdFQVFSQjBJUVVnQVVFQVRBUkFJQU1nQlVFUWRqc0JBQThMSUFKQkVIUkJFSFVoQmtFQUlRY2dCU0VDQTBBZ0JFRUNhaUVGSUFRZ0JpQUFMZ0VBYkNBQ2FpSUNRUkIyT3dFQUlBQXVBUUJCRG5RZ0JpQUNRUkIxYkd0QkFYUWhBaUFBUVFScUlRQWdCMEVCYWlJSElBRkhCRUFnQlNFRURBRUxDeUFESUFKQkVIWTdBUUFMb1FFQkFYOGdBa0VRZEVFUmRVR0FnQWhxSUFJUUxrRVFkQ0lFUVJCMUlRSWdBeUFBUWYvL0EzRkJBM1FnQVVILy93TnhhMEVRZEVFUWRTSUFJQVJCRW5VaUEwRU9kQ0FEYkVFUWRXeEJDbllpQVRzQkFDQUFJQUZCRUhSQkVIVnNJZ0JCZ05TdkJVNEVRRUVBRHdzZ0FrRUFJQUJCQjNSQkVIVkIwT0lGYkVHQWdIeHhheUlBUVJCMlFmOEhjVUdBQ0hJZ0FFR0FnSUJnYzBFYWRVRUJhblpzQzkwQkFRWi9JQUlvQWdBaEJDQUNRUVJxSWdZb0FnQWhCU0FEUVFGMUlRZ2dBMEVCVEFSQUlBSWdCRFlDQUNBR0lBVTJBZ0FQQzBFQUlRY2dCQ0VESUFVaEJBTkFJQUVnQTBFQmRpQUFMZ0VBUWZzb2JFRU9kbW9pQXpzQkFDQUFMZ0VBSUFOQkVIUkJFSFVpQ1VIN0tHeEJESFZySVFNZ0FVRUNhaUVGSUFFZ0JFRUJkaUFBUVFKcUlnRXVBUUJCOEFwc1FRNTFha0VRZEVFUWRTSUVJQWxxT3dFQUlBQkJCR29oQUNBQkxnRUFJQVJCOEFwc1FReDFheUVFSUFkQkFXb2lCeUFJU0FSQUlBVWhBUXdCQ3dzZ0FpQUROZ0lBSUFZZ0JEWUNBQXYrQmdFSGZ5QUFRWndDYWlBQ1FRUjBJZ1ZCQVhScUlRY2dBRUhjQTJvZ0JVRUJkR29oQXlBQ1FRWk9CRUJCanlOQnBpTkJ6QUJCeHlNUUFRc2dCMEVlYWlFSUlBTkJIbW9oQ1VFQUlRVURRQ0FGUVFGMElBZHFJZ1l1QVFBaUJFSGtBRVlFUUNBRklRWURRQ0FHUVFGMElBTnFJQVpCQVdvaUJFRUJkQ0FEYWk0QkFEc0JBQ0FHUVFGMElBZHFJQVJCQVhRZ0Iyb3VBUUE3QVFBZ0JFRVFSd1JBSUFRaEJnd0JDd3NnQ0VIbEFEc0JBQ0FKUVpET0FEc0JBQVVnQmlBRVFRRnFPd0VBQ3lBRlFRRnFJZ1ZCRUVjTkFBc0NRQUpBQWtBZ0EwRU9haTRCQUNBQlFSQjBRUkIxU2dSQUlBTkJCbW91QVFBZ0FVRVFkRUVRZFVvRVFDQURRUUpxTGdFQUlBRkJFSFJCRUhWS0JFQWdBeTRCQUNBQlFSQjBRUkIxVENFRURBTUZRUUpCQXlBRFFRUnFMZ0VBSUFGQkVIUkJFSFZLR3lFRURBTUxBQVVnQTBFS2FpNEJBQ0FCUVJCMFFSQjFTZ1JBUVFSQkJTQURRUWhxTGdFQUlBRkJFSFJCRUhWS0d5RUVEQU1GUVFaQkJ5QURRUXhxTGdFQUlBRkJFSFJCRUhWS0d5RUVEQU1MQUFzQUJTQURRUjVxTGdFQUlBRkJFSFJCRUhWS0JFQWdBMEVXYWk0QkFDQUJRUkIwUVJCMVNnUkFJQU5CRW1vdUFRQWdBVUVRZEVFUWRVb0VRRUVJUVFrZ0EwRVFhaTRCQUNBQlFSQjBRUkIxU2hzaEJBd0VCVUVLUVFzZ0EwRVVhaTRCQUNBQlFSQjBRUkIxU2hzaEJBd0VDd0FGSUFOQkdtb3VBUUFnQVVFUWRFRVFkVW9FUUVFTVFRMGdBMEVZYWk0QkFDQUJRUkIwUVJCMVNoc2hCQXdFQlNBRFFSeHFMZ0VBSUFGQkVIUkJFSFZLQkVCQkRpRUVEQVVGUVE4aEJBd0dDd0FMQUFzQUN3c01BZ3RCRHlFRkEwQWdCVUVCZENBRGFpQUZRWDlxSWdaQkFYUWdBMm91QVFBN0FRQWdCVUVCZENBSGFpQUdRUUYwSUFkcUxnRUFPd0VBSUFZZ0JFb0VRQ0FHSVFVTUFRc0xDeUFFUVFGMElBTnFJQUU3QVFBZ0JFRUJkQ0FIYWtFQk93RUFDeUFBUVpRQ2FpZ0NBQ0lCUVFKS0JFQWdBMEVFYWlFREJTQUJRUUJNQkVBZ0FFR2NCV29nQWtFQmRHb2lBaTRCQUVFQUlnRkJBV3BzSVFBZ0FpQUJRZi8vQVhOQndBeHNRWUNBQVdvZ0FHcEJEM1pCLy84RGNTSUFPd0VBSUFBUEN3dEJtVE5CdC8wQklBTXVBUUFpQlNBQVFad0ZhaUFDUVFGMGFpNEJBRWdiSVFFZ0FVSC8vd0Z6SUFWQkVIUkJFSFZzUVlDQUFXb2dBRUdjQldvZ0FrRUJkR29pQWk0QkFDQUJRUUZxYkdwQkQzWkIvLzhEY1NFQUlBSWdBRHNCQUNBQUN3UUFFQ3NMQ2dCQjlDdEJBUkJiR2dzRUFCQXRDL0lCQVF4L0l3SWhBQ01DUVRCcUpBSWdBRUVzYWlJQlFRQTJBZ0FnQUVFb2FpSUNRUUEyQWdBZ0FFRWthaUlEUVFBMkFnQWdBRUVnYWlJRVFRQTJBZ0FnQUVFY2FpSUZRUUEyQWdBZ0FFRVlhaUlHUVFBMkFnQWdBRUVVYWlJSFFRQTJBZ0FnQUVFUWFpSUlRUUEyQWdBZ0FFRU1haUlKUVFBMkFnQWdBRUVJYWlJS1FRQTJBZ0FnQUVFRWFpSUxRUUEyQWdBZ0FFRUFOZ0lBSUFCQkFUWUNBQ0FMUVFJMkFnQWdDa0VETmdJQUlBbEJCRFlDQUNBSVFRVTJBZ0FnQjBFQk5nSUFJQVpCQVRZQ0FDQUZRUUUyQWdBZ0JFRUNOZ0lBSUFOQkFUWUNBQ0FDUVFJMkFnQWdBVUVETmdJQUlBQWtBZ3NmQUNBQlFmLy9BM0ZGQkVCQi8vLy8vd2NQQ3lBQUlBRkJFSFJCRUhWdEM1OEJBUUovSUFCQjRBTWdBMEdBQ0dvaUFDQUNFRFFnQUVId0FTQURRVUJySUFKQklHb1FOU0FEUVNCcUlnUWdBa0hnQUdvaUFDa0NBRGNDQUNBRUlBQXBBZ2czQWdnZ0JDQUFLUUlRTndJUUlBUWdBQ2tDR0RjQ0dDQUFJQU5CNEFkcUlnVXBBZ0EzQWdBZ0FDQUZLUUlJTndJSUlBQWdCU2tDRURjQ0VDQUFJQVVwQWhnM0FoZ2dCQ0FEUWRBQUVESWdBMEdnQVNBQklBSkJnQUZxRURNTERBQWdBRUVBUWFBQkVGMGFDMWtCQTM4Z0FDQUJJQUVRT3lFRUlBRkJBRXdFUUNBQ0lBUTJBZ0JCQUE4TFFRQWhBMEVBSVFVRFFDQURJQUF1QVFBaUF5QURiQ0FFZG1vaEF5QUFRUUpxSVFBZ0JVRUJhaUlGSUFGSERRQUxJQUlnQkRZQ0FDQURDNDBDQVFoL0lBSkJBRXdFUUE4TFFRQWhBd05BSUFFZ0FDZ0NBRUdLQm14QmdJQUJhaUFBUVFScUlnVW9BZ0JCL205c2FpQUFRUWhxSWdZb0FnQkJ2d2hzYWlBQVFReHFJZ1FvQWdCQjliVUJiR29nQUVFUWFpSUhLQUlBUWVma0FHeHFJQUJCRkdvaUNDZ0NBRUc1WW14cUlBQkJHR29pQ1NnQ0FFRzVBMnhxSUFCQkhHb2lDaWdDQUVIZUFXeHFOZ0lBSUFGQkJHb2dCU2dDQUVIZUFXeEJnSUFCYWlBR0tBSUFRYmtEYkdvZ0JDZ0NBRUc1WW14cUlBY29BZ0JCNStRQWJHb2dDQ2dDQUVIMXRRRnNhaUFKS0FJQVFiOEliR29nQ2lnQ0FFSCtiMnhxSUFCQklHb29BZ0JCaWdac2FqWUNBQ0FCUVFocUlRRWdBMEVCYWlJRElBSkhCRUFnQkNFQURBRUxDd3ZGQkFFS2Z5QUJRUUYxSVFzZ0FVRUJUQVJBRHdzZ0EwRUVhaUVISUFOQkNHb2hDQ0FEUVF4cUlRbEJBQ0VHQTBBZ0F5Z0NBQ0FHUVFOMElBQnFJZ3dvQWdBaUJFR0FRR3NnQnlnQ0FDSUthMEVPZFVIcUYyeHFJUVVnQXlBRU5nSUFJQW9nQlNBSUtBSUFJZ3BySWdSQkRuVWdCRUVmZG1wQm1Na0FiR29oQkNBSElBVTJBZ0FnQ1NBS0lBUWdDU2dDQUdzaUJVRU9kU0FGUVI5MmFrSFg5UUJzYWlJRk5nSUFJQWdnQkRZQ0FDQU1JQVZCQVhVMkFnQWdCa0VCYWlJR0lBdElEUUFMSUFCQkJHb2hEQ0FCUVFGTUJFQVBDeUFEUVJScUlRWWdBMEVRYWlFSElBTkJHR29oQ0NBRFFSeHFJUWxCQUNFREEwQWdCeWdDQUNBRFFRTjBJQXhxSWdvb0FnQWlCRUdBUUdzZ0JpZ0NBQ0lOYTBFT2RVRzFCbXhxSVFVZ0J5QUVOZ0lBSUEwZ0JTQUlLQUlBSWcxcklnUkJEblVnQkVFZmRtcEIzaTlzYWlFRUlBWWdCVFlDQUNBSklBMGdCQ0FKS0FJQWF5SUZRUTUxSUFWQkgzWnFRZDdnQUd4cUlnVTJBZ0FnQ0NBRU5nSUFJQW9nQlVFQmRUWUNBQ0FEUVFGcUlnTWdDMGdOQUFzZ0FVRUJUQVJBRHd0QkFDRUJBMEFnQVVFQmRDSURRUUowSUFCcUtBSUFJQU5CQVhKQkFuUWdBR29vQWdCcUlRWWdBMEVDY2tFQ2RDQUFhaWdDQUNBRFFRTnlRUUowSUFCcUtBSUFhaUVESUFGQkFYUWdBbXBCLy84QklBWkJEM1VnQmtILy8vLy9BMG9iSWdaQmdJQitJQVpCZ0lCK1NoczdBUUFnQVVFQmNrRUJkQ0FDYWtILy93RWdBMEVQZFNBRFFmLy8vLzhEU2hzaUEwR0FnSDRnQTBHQWdINUtHenNCQUNBQlFRSnFJZ0VnQzBnTkFBc0xzQU1CQ1g4Z0FVRUJkU0VMSUFGQkFVd0VRQThMSUFOQkJHb2hEQ0FEUVFocUlRY2dBMEVNYWlFSVFRQWhCUU5BSUFNb0FnQWdCVUVDZENBQWFpNEJBRUVQZEVHQWdBRnlJZ1pCZ01BQUlBd29BZ0FpQkd0cVFRNTFRZW9YYkdvaENTQURJQVkyQWdBZ0JDQUpJQWNvQWdBaUJtc2lCRUVPZFNBRVFSOTJha0dZeVFCc2FpRUtJQXdnQ1RZQ0FDQUlJQVlnQ2lBSUtBSUFheUlFUVE1MUlBUkJIM1pxUWRmMUFHeHFJZ1EyQWdBZ0J5QUtOZ0lBSUFWQkFuUWdBbW9nQkVFQmRUWUNBQ0FGUVFGcUlnVWdDMGdOQUFzZ0FFRUNhaUVGSUFGQkFVd0VRQThMSUFOQkZHb2hCeUFEUVJCcUlRZ2dBMEVZYWlFSklBTkJIR29oQ2tFQUlRQURRQ0FJS0FJQUlBQkJBblFnQldvdUFRQkJEM1JCZ0lBQmNpSURRWURBQUNBSEtBSUFJZ0ZyYWtFT2RVRzFCbXhxSVFZZ0NDQUROZ0lBSUFFZ0JpQUpLQUlBSWdOcklnRkJEblVnQVVFZmRtcEIzaTlzYWlFRUlBY2dCallDQUNBS0lBTWdCQ0FLS0FJQWF5SUJRUTUxSUFGQkgzWnFRZDdnQUd4cUlnTTJBZ0FnQ1NBRU5nSUFJQUJCQW5RZ0Ftb2lBU0FCS0FJQUlBTkJBWFZxTmdJQUlBQkJBV29pQUNBTFNBMEFDd3ZhQmdFTWZ5QUJRUUYxSVF3Z0FFRUVhaUVQSUFOQk1Hb2hEU0FCUVFGTUJFQVBDeUFEUVFScUlRWWdBMEVJYWlFS0lBTkJER29oQ1VFQUlRY2dEU0VJQTBBZ0F5Z0NBQ0FJS0FJQUlnUkJnRUJySUFZb0FnQWlCV3RCRG5WQjZoZHNhaUVJSUFNZ0JEWUNBQ0FGSUFnZ0NpZ0NBQ0lGYXlJRVFRNTFJQVJCSDNacVFaakpBR3hxSVFRZ0JpQUlOZ0lBSUFrZ0JTQUVJQWtvQWdCcklnaEJEblVnQ0VFZmRtcEIxL1VBYkdvaUNEWUNBQ0FLSUFRMkFnQWdCMEVCZENJRVFRSjBJQUpxSUFoQkFYVTJBZ0FnQkVFQ2RDQVBhaUVJSUFkQkFXb2lCeUFNU0EwQUN5QUJRUUZNQkVBUEN5QURRUlJxSVFjZ0EwRVFhaUVHSUFOQkdHb2hDaUFEUVJ4cUlRbEJBQ0VJQTBBZ0JpZ0NBQ0FJUVFGMElnNUJBblFnQUdvb0FnQWlCVUdBUUdzZ0J5Z0NBQ0lMYTBFT2RVRzFCbXhxSVFRZ0JpQUZOZ0lBSUFzZ0JDQUtLQUlBSWd0cklnVkJEblVnQlVFZmRtcEIzaTlzYWlFRklBY2dCRFlDQUNBSklBc2dCU0FKS0FJQWF5SUVRUTUxSUFSQkgzWnFRZDdnQUd4cUlnUTJBZ0FnQ2lBRk5nSUFJQTVCQW5RZ0Ftb2lCU0FGS0FJQUlBUkJBWFZxUVE5MU5nSUFJQWhCQVdvaUNDQU1TQTBBQ3lBQ1FRUnFJUWdnQVVFQlRBUkFEd3NnQTBFa2FpRUhJQU5CSUdvaEJpQURRU2hxSVFvZ0EwRXNhaUVKUVFBaEFnTkFJQVlvQWdBZ0FrRUJkQ0lPUVFKMElBQnFLQUlBSWdWQmdFQnJJQWNvQWdBaUMydEJEblZCNmhkc2FpRUVJQVlnQlRZQ0FDQUxJQVFnQ2lnQ0FDSUxheUlGUVE1MUlBVkJIM1pxUVpqSkFHeHFJUVVnQnlBRU5nSUFJQWtnQ3lBRklBa29BZ0JySWdSQkRuVWdCRUVmZG1wQjEvVUFiR29pQkRZQ0FDQUtJQVUyQWdBZ0RrRUNkQ0FJYWlBRVFRRjFOZ0lBSUFKQkFXb2lBaUFNU0EwQUN5QUJRUUZNQkVBUEN5QURRVFJxSVFFZ0EwRTRhaUVDSUFOQlBHb2hBMEVBSVFBRFFDQU5LQUlBSUFCQkFYUWlDa0VDZENBUGFpZ0NBQ0lHUVlCQWF5QUJLQUlBSWdsclFRNTFRYlVHYkdvaEJ5QU5JQVkyQWdBZ0NTQUhJQUlvQWdBaUNXc2lCa0VPZFNBR1FSOTJha0hlTDJ4cUlRWWdBU0FITmdJQUlBTWdDU0FHSUFNb0FnQnJJZ2RCRG5VZ0IwRWZkbXBCM3VBQWJHb2lCellDQUNBQ0lBWTJBZ0FnQ2tFQ2RDQUlhaUlHSUFZb0FnQWdCMEVCZFdwQkQzVTJBZ0FnQUVFQmFpSUFJQXhJRFFBTEM0SUJBUUovUVFFZ0JIUkJBWFVoQnlBRlJTQUFSU0FDUlhKeUlBWkJBVWh5SUFSQkFFaHlCRUJCZnc4TElBRkJFSFJCRUhVaENDQURRUkIwUVJCMUlRTkJBQ0VCQTM4Z0FVRUJkQ0FGYWlBQlFRRjBJQUJxTGdFQUlBaHNJQWRxSUFGQkFYUWdBbW91QVFBZ0EyeHFJQVIxT3dFQUlBRkJBV29pQVNBR1J3MEFRUUFMQ3lnQkFYOGdBRUVLU3dSQVFRQWhBUVZCQkJCWklnRUVRQ0FCSUFBMkFnQUZRUUFoQVFzTElBRUxEUUFnQUVVRVFBOExJQUFRV2d1VUFRRUdmeU1DSVFZakFrR0FJR29rQWlBR0lRTkJBU0FBS0FJQUlnZDBJUWdnQjBFZlJ3UkFRUUFoQlVFQUlRUURRQ0FFUVFGMElBTnFJQVZCQVhRZ0FXb3VBUUE3QVFBZ0JFRUJja0VCZENBRGFrRUFPd0VBSUFSQkFtb2hCQ0FGUVFGcUlnVWdDRWdOQUFzTElBTWdCeEJDSUFNZ0FDZ0NBRUVCRUQ4aEFDQUNJQU1nQ0VFQmRFRUVhaEJjR2lBR0pBSWdBQXZmQVFFSGZ5TUNJUVVqQWtHQUlHb2tBaUFGSWdRZ0FVRUJJQUFvQWdBaUJuUWlCMEVDYWlJRFFRRjBFRndhSUFkQkFYUWlDQ0FEU2dSQUEwQWdBMEVCZENBRWFpQUlJQU5ySWdsQkFYUWdBV291QVFBN0FRQWdBMEVCYWtFQmRDQUVha0VBSUFsQkFXcEJBWFFnQVdvdkFRQnJPd0VBSUFnZ0EwRUNhaUlEU2cwQUN3c2dCQ0FHRUVJZ0JDQUFLQUlBUVFFUVFDRURJQVpCSDBZRVFDQUZKQUlnQXc4TFFRQWhBRUVBSVFFRFFDQUFRUUYwSUFKcUlBRkJBWFFnQkdvdUFRQTdBUUFnQVVFQ2FpRUJJQUJCQVdvaUFDQUhTQTBBQ3lBRkpBSWdBd3VRQVFFQ2YwRUFJQUlRUEVFUWRFRVFkU0lESUFGQkFFb0VmMEYvSVFJRFFDQUFRUUpxSVFRZ0FDNEJBQ0lBUVFBZ0FHc2dBRUVBU2h0QkVIUkJFSFVpQUNBQ0lBQWdBa29iSVFJZ0FVRi9haUVBSUFGQkFVb0VRQ0FBSVFFZ0JDRUFEQUVMQ3lBQ1FmLy9BM0VGUVg4TElnQkJFSFJCRUhVaUFTQUJiQkFkSWdGcklBQkIvLzhEY1VVZ0FTQURTbkliQzJjQkFYOGdBRUVCSUFCQkFrRVFRUUFnQUVILy93TkxHeUlCSUFGQkNISWdBRUdBL2dNZ0FYUnhSUnNpQVNBQlFRUnlJQUJCOEFFZ0FYUnhSUnNpQVNBQlFRSnlJQUJCRENBQmRIRkZHeUlBZEhGQkFFY2dBR29pQUhSeFFRQkhJQUJxUWYvL0EzRUxsd0VCQW44Z0EwRUFTaUFGUVFCS2NTQUhJQVlnQTBGL2Ftd2lDR29pQ1NBQlNIRkZCRUJCZnc4TElBaEJBRWdFUUVFQUR3c0RmMEVBSVFGQmdCQWhBd05BSUFGQkFYUWdCR291QVFBZ0J5QUJhMEVCZENBQWFpNEJBR3dnQTJvaEF5QUJRUUZxSWdFZ0JVY05BQXNnQWtFQ2FpRUJJQUlnQTBFTWRSQStPd0VBSUFZZ0Iyb2lCeUFKU2dSL1FRQUZJQUVoQWd3QkN3c0xKQUFnQUVILy93RktCSDlCLy84QkJTQUFRWUNBZmlBQVFZQ0Fma29iUWYvL0EzRUxDNllGQVE5L1FRRWdBWFFpQmtHQUNFb0VRRUYvRHdzZ0JrRUJTaUVCSUFJRWZ5QUJSUVJBUVFBUEMwRUpJUWRCQVNFREEzOGdBMEVCZENFSUlBTkJBRW9FUUVFQUlRRURRQ0FCSUFkMElRSWdBU0FHU0FSQUlBSkJBWFJCd0ExcUxnRUFJUXBCQUNBQ1FRRjBRY0FKYWk4QkFFRVFkR3RCRUhVaEN5QUJJUUlEUUNBS0lBSWdBMnBCQVhRaUJFRUJkQ0FBYWlJSkxnRUFJZzFzUVFGcUlBUkJBWEpCQVhRZ0FHb2lEaTRCQUNJUElBdHNhMEVCZFNFRUlBSkJBWFFpQlVFQmRDQUFhaUlRTGdFQVFRNTBJUXdnQlVFQmNrRUJkQ0FBYWlJUkxnRUFRUTUwSVFVZ0NTQU1RWUNBQVdvZ0JHdEJEM1k3QVFBZ0RpQUZRWUNBQVNBTElBMXNRUUZxSUFvZ0QyeHFRUUYxSWdscmFrRVBkanNCQUNBUUlBeEJnSUFCYWlBRWFrRVBkanNCQUNBUklBbEJnSUFCYWlBRmFrRVBkanNCQUNBQ0lBaHFJZ0lnQmtnTkFBc0xJQU1nQVVFQmFpSUJSdzBBQ3dzZ0IwRi9haUVISUFnZ0JrZ0VmeUFJSVFNTUFRVkJBQXNMQlNBQlJRUkFRUUFQQzBFSklRZEJBU0VEQTM4Z0EwRUJkQ0VJSUFOQkFFb0VRRUVBSVFFRFFDQUJJQWQwSVFJZ0FTQUdTQVJBSUFKQkFYUkJ3QTFxTGdFQUlRcEJBQ0FDUVFGMFFjQUphaThCQUVFUWRHdEJFSFVoQ3lBQklRSURRQ0FLSUFJZ0EycEJBWFFpQkVFQmRDQUFhaUlKTGdFQUlnMXNJQXNnQkVFQmNrRUJkQ0FBYWlJT0xnRUFJZzlzYTBFUGRTRUVJQUpCQVhRaUJVRUJkQ0FBYWlJUUxnRUFJUXdnQlVFQmNrRUJkQ0FBYWlJUkxnRUFJUVVnQ1NBTUlBUnJRUUYyT3dFQUlBNGdCU0FLSUE5c0lBc2dEV3hxUVE5MUlnbHJRUUYyT3dFQUlCQWdCQ0FNYWtFQmRqc0JBQ0FSSUFVZ0NXcEJBWFk3QVFBZ0FpQUlhaUlDSUFaSURRQUxDeUFESUFGQkFXb2lBVWNOQUFzTElBZEJmMm9oQnlBSUlBWklCSDhnQ0NFRERBRUZRUUFMQ3dzTHRRVUJGSDlCQVNBQmRDSUZRWUFJU2dSQVFYOFBDeUFGUVFGTUJFQkJBQThMSUFWQkFYUWhGQ0FDUlNFVlFRa2hEVUVCSVFaQkFDRVBBMEFnQUNBVUVFTWlBa0VRZEVFUWRVR0Y2Z0JLSVFFZ0FrRVFkRUVRZFVHSzFBRktJZ0lnQVNBUGFtb2hEMEVDUVFFZ0FSc2dBU0FDR3lFRFFZQ0FBVUdBd0FBZ0FSc2dBblFoQnlBR1FRRjBJUTRnQmtFQVNpRUJJQlVFUUNBQkJFQkJBQ0VCQTBBZ0FTQU5kQ0VDSUFFZ0JVZ0VRQ0FDUVFGMFFjQU5haTRCQUNFSElBSkJBWFJCd0FscUxnRUFJUXNnQVNFQ0EwQWdCeUFDSUFacVFRRjBJZ2hCQVhRZ0FHb2lCQzRCQUNJTWJDQUxJQWhCQVhKQkFYUWdBR29pRUM0QkFDSVJiR3RCRDNVaENDQUNRUUYwSWdsQkFYUWdBR29pRWk0QkFDRUtJQWxCQVhKQkFYUWdBR29pRXk0QkFDRUpJQVFnQ2lBSWF5QURkVHNCQUNBUUlBa2dCeUFSYkNBTElBeHNha0VQZFNJRWF5QURkVHNCQUNBU0lBZ2dDbW9nQTNVN0FRQWdFeUFFSUFscUlBTjFPd0VBSUFJZ0Rtb2lBaUFGU0EwQUN3c2dCaUFCUVFGcUlnRkhEUUFMQ3dVZ0FRUkFJQU5CRG1vaEEwRUFJUUVEUUNBQklBMTBJUUlnQVNBRlNBUkFJQUpCQVhSQndBMXFMZ0VBSVFzZ0FrRUJkRUhBQ1dvdUFRQWhDQ0FCSVFJRFFDQUxJQUlnQm1wQkFYUWlDa0VCZENBQWFpSU1MZ0VBSWhCc1FRRnFJQWdnQ2tFQmNrRUJkQ0FBYWlJUkxnRUFJaEpzYTBFQmRTRUtJQUpCQVhRaUJFRUJkQ0FBYWlJVExnRUFRUTUwSVFrZ0JFRUJja0VCZENBQWFpSVdMZ0VBUVE1MElRUWdEQ0FISUFscUlBcHJJQU4xT3dFQUlCRWdCQ0FISUFnZ0VHeEJBV29nQ3lBU2JHcEJBWFVpREd0cUlBTjFPd0VBSUJNZ0J5QUphaUFLYWlBRGRUc0JBQ0FXSUFjZ0RHb2dCR29nQTNVN0FRQWdBaUFPYWlJQ0lBVklEUUFMQ3lBR0lBRkJBV29pQVVjTkFBc0xDeUFOUVg5cUlRMGdEaUFGU0FSQUlBNGhCZ3dCQ3dzZ0R3dTRBUUVGZnlBRVFSQjBRUkIxSVFjZ0JFRVFkRUVRZFVFQVRBUkFEd3NnQTBFUWRFRVFkU0VJSUFOQkVIUkJFSFZCQUVvaENTQUdRUkIwUVJCMUlRWWdCVUVRZEVFUWRTRUtRUUFoQkFOQUlBQkJBRFlDQUNBSkJFQWdCQ0FHYkNFTElBQW9BZ0FoQlVFQUlRTURRQ0FGSUFNZ0MycEJBWFFnQW1vdUFRQWdBMEVCZENBQmFpNEJBR3dnQ25WcUlRVWdBMEVCYWlJRElBaEhEUUFMSUFBZ0JUWUNBQXNnQUVFRWFpRUFJQVJCQVdvaUJDQUhSdzBBQ3d1QUFnRUdmeUFCUVhscVFRSkpCRUJCd0JsQm9CMGdBVUVJUmlJQkd5RUNRZkFCUWZBQUlBRWJJUVJCQUNFQkEwQWdBVUVCZENBQ2FpNEJBRUVDZENBQWFpSURLQUlBSVFVZ0F5QUJRUUZ5UVFGMElBSnFMZ0VBUVFKMElBQnFJZ01vQWdBMkFnQWdBeUFGTmdJQUlBRkJBbW9pQVNBRVNRMEFDdzhMUVFFZ0FYUWlBMEYvYWlFR0lBTkJBVXdFUUE4TFFRRWhBa0VBSVFRRFFDQUdJQVJySVFVZ0F5RUJBMEFnQVVFQmRTSUJJQVZLRFFBTElBSkJBblFnQUdvaEJTQUVJQUZCZjJweElBRnFJZ1JCQW5RZ0FHb2hBU0FFSUFKS0JFQWdCU2dDQUNFSElBVWdBU2dDQURZQ0FDQUJJQWMyQWdBTElBTWdBa0VCYWlJQ1J3MEFDd3RoQVFOL0lBQkZJQUZCQVVoeUJFQkJmdzhMUVFBaEJFRUFJUUlEUUNBRVFRRjBJQUJxTGdFQUlnTkJBQ0FEYXlBRFFYOUtHeUlESUFJZ0F5QUNTaHNoQWlBRVFRRnFJZ1FnQVVjTkFBc2dBa0gvL3dFZ0FrSC8vd0ZJRzBILy93TnhDMkFCQTM4Z0FFVWdBVUVCU0hJRVFFRi9Ed3RCQUNFRVFRQWhBZ05BSUFSQkFuUWdBR29vQWdBaUEwRUFJQU5ySUFOQmYwb2JJZ01nQWlBRElBSkxHeUVDSUFSQkFXb2lCQ0FCUncwQUN5QUNRZi8vLy84SElBSkIvLy8vL3dkSkd3dFFBUU4vSUFCQkFFY2dBVUVBU25GRkJFQkJnSUIrRHd0QkFDRURRWUNBZmlFQ0EwQWdBMEVCZENBQWFpNEJBQ0lFSUFJZ0JDQUNRUkIwUVJCMVNoc2hBaUFEUVFGcUlnTWdBVWNOQUFzZ0FndE9BUU4vSUFCQkFFY2dBVUVBU25GRkJFQkJnSUNBZ0hnUEMwRUFJUU5CZ0lDQWdIZ2hBZ05BSUFOQkFuUWdBR29vQWdBaUJDQUNJQVFnQWtvYklRSWdBMEVCYWlJRElBRkhEUUFMSUFJTFVBRURmeUFBUVFCSElBRkJBRXB4UlFSQVFmLy9BUThMUVFBaEEwSC8vd0VoQWdOQUlBTkJBWFFnQUdvdUFRQWlCQ0FDSUFRZ0FrRVFkRUVRZFVnYklRSWdBMEVCYWlJRElBRkhEUUFMSUFJTFRnRURmeUFBUVFCSElBRkJBRXB4UlFSQVFmLy8vLzhIRHd0QkFDRURRZi8vLy84SElRSURRQ0FEUVFKMElBQnFLQUlBSWdRZ0FpQUVJQUpJR3lFQ0lBTkJBV29pQXlBQlJ3MEFDeUFDQ3k0QkFYOGpBaUVCSXdKQkVHb2tBaUFCSUFCQlBHb29BZ0FRVGpZQ0FFRUdJQUVRQmhCTUlRQWdBU1FDSUFBTG1BTUJDMzhqQWlFSEl3SkJNR29rQWlBSFFTQnFJUVVnQnlJRElBQkJIR29pQ2lnQ0FDSUVOZ0lBSUFOQkJHb2dBRUVVYWlJTEtBSUFJQVJySWdRMkFnQWdBMEVJYWlBQk5nSUFJQU5CREdvZ0FqWUNBQ0FEUVJCcUlnRWdBRUU4YWlJTUtBSUFOZ0lBSUFGQkJHb2dBellDQUNBQlFRaHFRUUkyQWdBQ1FBSkFJQUlnQkdvaUJFR1NBU0FCRUFRUVRDSUJSZzBBUVFJaENBTkFJQUZCQUU0RVFDQURRUWhxSUFNZ0FTQURRUVJxS0FJQUlnbExJZ1liSWdNZ0FTQUpRUUFnQmh0cklna2dBeWdDQUdvMkFnQWdBMEVFYWlJTklBMG9BZ0FnQ1dzMkFnQWdCU0FNS0FJQU5nSUFJQVZCQkdvZ0F6WUNBQ0FGUVFocUlBWkJIM1JCSDNVZ0NHb2lDRFlDQUVHU0FTQUZFQVFRVENJR0lBUWdBV3NpQkVZTkFpQUdJUUVNQVFzTElBQkJFR3BCQURZQ0FDQUtRUUEyQWdBZ0MwRUFOZ0lBSUFBZ0FDZ0NBRUVnY2pZQ0FDQUlRUUpHQkg5QkFBVWdBaUFEUVFScUtBSUFhd3NoQWd3QkN5QUFRUkJxSUFCQkxHb29BZ0FpQVNBQVFUQnFLQUlBYWpZQ0FDQUtJQUUyQWdBZ0N5QUJOZ0lBQ3lBSEpBSWdBZ3QwQVFKL0l3SWhCQ01DUVNCcUpBSWdCRUVJYWlJRElBQkJQR29vQWdBMkFnQWdBMEVFYWlBQlFpQ0lQZ0lBSUFOQkNHb2dBVDRDQUNBRFFReHFJQVFpQURZQ0FDQURRUkJxSUFJMkFnQkJqQUVnQXhBREVFeEJBRWdFZmlBQVFuODNBd0JDZndVZ0FDa0RBQXNoQVNBRUpBSWdBUXNiQUNBQVFZQmdTd1JBRUUxQkFDQUFhellDQUVGL0lRQUxJQUFMQlFCQitDc0xCQUFnQUF0MkFRTi9Jd0loQkNNQ1FTQnFKQUlnQkNJRFFSQnFJUVVnQUVFa2FrRUVOZ0lBSUFBb0FnQkJ3QUJ4UlFSQUlBTWdBRUU4YWlnQ0FEWUNBQ0FEUVFScVFaT29BVFlDQUNBRFFRaHFJQVUyQWdCQk5pQURFQVVFUUNBQVFjc0Fha0YvT2dBQUN3c2dBQ0FCSUFJUVNpRUFJQVFrQWlBQUN3UUFRUUVMQXdBQkM0VUNBUVIvQWtBQ1FDQUNRUkJxSWdRb0FnQWlBdzBBSUFJUVV3Ui9RUUFGSUFRb0FnQWhBd3dCQ3lFQ0RBRUxJQUpCRkdvaUJpZ0NBQ0lGSVFRZ0F5QUZheUFCU1FSQUlBSkJKR29vQWdBaEF5QUNJQUFnQVNBRFFRZHhRUXhxRVFBQUlRSU1BUXNnQVVVZ0FrSExBR29zQUFCQkFFaHlCSDlCQUFVQ2Z5QUJJUU1EUUNBQUlBTkJmMm9pQldvc0FBQkJDa2NFUUNBRkJFQWdCU0VEREFJRlFRQU1Bd3NBQ3dzZ0FrRWthaWdDQUNFRUlBSWdBQ0FESUFSQkIzRkJER29SQUFBaUFpQURTUTBDSUFZb0FnQWhCQ0FCSUFOcklRRWdBQ0FEYWlFQUlBTUxDeUVDSUFRZ0FDQUJFRndhSUFZZ0JpZ0NBQ0FCYWpZQ0FDQUJJQUpxSVFJTElBSUxmZ0VDZnlBQVFjb0FhaUlDTEFBQUlRRWdBaUFCSUFGQi93RnFjam9BQUNBQUtBSUFJZ0ZCQ0hFRWZ5QUFJQUZCSUhJMkFnQkJmd1VnQUVFSWFrRUFOZ0lBSUFCQkJHcEJBRFlDQUNBQVFSeHFJQUJCTEdvb0FnQWlBVFlDQUNBQVFSUnFJQUUyQWdBZ0FFRVFhaUFCSUFCQk1Hb29BZ0JxTmdJQVFRQUxDNDRCQVFOL0FrQUNRQ0FBSWdKQkEzRkZEUUFnQWlFQkEwQUNRQ0FBTEFBQVJRUkFJQUVoQUF3QkN5QUFRUUZxSWdBaUFVRURjUTBCREFJTEN3d0JDd05BSUFCQkJHb2hBU0FBS0FJQUlnTkJnSUdDaEhoeFFZQ0Jnb1I0Y3lBRFFmLzkrM2RxY1VVRVFDQUJJUUFNQVFzTElBTkIvd0Z4QkVBRFFDQUFRUUZxSWdBc0FBQU5BQXNMQ3lBQUlBSnJDeHNCQVg4Z0FCQlVJZ0lnQUVFQklBSWdBUkJXUjBFZmRFRWZkUXRhQVFKL0lBRWdBbXdoQkNBQ1FRQWdBUnNoQWlBRFFjd0FhaWdDQUVGL1NnUkFJQU1RVUVVaEJTQUFJQVFnQXhCU0lRQWdCVVVFUUNBREVGRUxCU0FBSUFRZ0F4QlNJUUFMSUFBZ0JFY0VRQ0FBSUFGdUlRSUxJQUlMdEFFQkJuOGpBaUVESXdKQkVHb2tBaUFESWdRZ0FVSC9BWEVpQnpvQUFBSkFBa0FnQUVFUWFpSUNLQUlBSWdVTkFDQUFFRk1FZjBGL0JTQUNLQUlBSVFVTUFRc2hBUXdCQ3lBQVFSUnFJZ0lvQWdBaUJpQUZTUVJBSUFGQi93RnhJZ0VnQUVITEFHb3NBQUJIQkVBZ0FpQUdRUUZxTmdJQUlBWWdCem9BQUF3Q0N3c2dBRUVrYWlnQ0FDRUJJQUFnQkVFQklBRkJCM0ZCREdvUkFBQkJBVVlFZnlBRUxRQUFCVUYvQ3lFQkN5QURKQUlnQVF1R0FRRURmMEdRSUNnQ0FDSUJRY3dBYWlnQ0FFRi9TZ1IvSUFFUVVBVkJBQXNoQWlBQUlBRVFWVUVBU0FSL1FYOEZBbjhnQVVITEFHb3NBQUJCQ2tjRVFDQUJRUlJxSWdNb0FnQWlBQ0FCUVJCcUtBSUFTUVJBSUFNZ0FFRUJhallDQUNBQVFRbzZBQUJCQUF3Q0N3c2dBVUVLRUZkQkgzVUxDeUVBSUFJRVFDQUJFRkVMSUFBTDRUZ0JESDhqQWlFS0l3SkJFR29rQWlBS0lRa2dBRUgxQVVrRWYwSDhLeWdDQUNJRFFSQWdBRUVMYWtGNGNTQUFRUXRKR3lJQ1FRTjJJZ0IySWdGQkEzRUVRQ0FCUVFGeFFRRnpJQUJxSWdCQkEzUkJwQ3hxSWdGQkNHb2lCaWdDQUNJQ1FRaHFJZ1VvQWdBaUJDQUJSZ1JBUWZ3cklBTkJBU0FBZEVGL2MzRTJBZ0FGSUFSQkRHb2dBVFlDQUNBR0lBUTJBZ0FMSUFKQkJHb2dBRUVEZENJQVFRTnlOZ0lBSUFBZ0FtcEJCR29pQUNBQUtBSUFRUUZ5TmdJQUlBb2tBaUFGRHdzZ0FrR0VMQ2dDQUNJSFN3Ui9JQUVFUUVFQ0lBQjBJZ1JCQUNBRWEzSWdBU0FBZEhFaUFFRUFJQUJyY1VGL2FpSUFRUXgyUVJCeElnRWdBQ0FCZGlJQVFRVjJRUWh4SWdGeUlBQWdBWFlpQUVFQ2RrRUVjU0lCY2lBQUlBRjJJZ0JCQVhaQkFuRWlBWElnQUNBQmRpSUFRUUYyUVFGeElnRnlJQUFnQVhacUlnUkJBM1JCcEN4cUlnQkJDR29pQlNnQ0FDSUJRUWhxSWdnb0FnQWlCaUFBUmdSQVFmd3JJQU5CQVNBRWRFRi9jM0VpQURZQ0FBVWdCa0VNYWlBQU5nSUFJQVVnQmpZQ0FDQURJUUFMSUFGQkJHb2dBa0VEY2pZQ0FDQUJJQUpxSWdaQkJHb2dCRUVEZENJRUlBSnJJZ05CQVhJMkFnQWdBU0FFYWlBRE5nSUFJQWNFUUVHUUxDZ0NBQ0VDSUFkQkEzWWlCRUVEZEVHa0xHb2hBU0FBUVFFZ0JIUWlCSEVFZnlBQlFRaHFJZ0FoQkNBQUtBSUFCVUg4S3lBQUlBUnlOZ0lBSUFGQkNHb2hCQ0FCQ3lFQUlBUWdBallDQUNBQVFReHFJQUkyQWdBZ0FrRUlhaUFBTmdJQUlBSkJER29nQVRZQ0FBdEJoQ3dnQXpZQ0FFR1FMQ0FHTmdJQUlBb2tBaUFJRHd0QmdDd29BZ0FpQ3dSL0lBdEJBQ0FMYTNGQmYyb2lBRUVNZGtFUWNTSUJJQUFnQVhZaUFFRUZka0VJY1NJQmNpQUFJQUYySWdCQkFuWkJCSEVpQVhJZ0FDQUJkaUlBUVFGMlFRSnhJZ0Z5SUFBZ0FYWWlBRUVCZGtFQmNTSUJjaUFBSUFGMmFrRUNkRUdzTG1vb0FnQWlBRUVFYWlnQ0FFRjRjU0FDYXlFSUlBQWhCUU5BQWtBZ0FFRVFhaWdDQUNJQkJFQWdBU0VBQlNBQVFSUnFLQUlBSWdCRkRRRUxJQUJCQkdvb0FnQkJlSEVnQW1zaUJDQUlTU0VCSUFRZ0NDQUJHeUVJSUFBZ0JTQUJHeUVGREFFTEN5QUNJQVZxSWd3Z0JVc0VmeUFGUVJocUtBSUFJUWtnQlVFTWFpZ0NBQ0lBSUFWR0JFQUNRQ0FGUVJScUlnRW9BZ0FpQUVVRVFDQUZRUkJxSWdFb0FnQWlBRVVFUUVFQUlRQU1BZ3NMQTBBQ1FDQUFRUlJxSWdRb0FnQWlCZ1IvSUFRaEFTQUdCU0FBUVJCcUlnUW9BZ0FpQmtVTkFTQUVJUUVnQmdzaEFBd0JDd3NnQVVFQU5nSUFDd1VnQlVFSWFpZ0NBQ0lCUVF4cUlBQTJBZ0FnQUVFSWFpQUJOZ0lBQ3lBSkJFQUNRQ0FGUVJ4cUtBSUFJZ0ZCQW5SQnJDNXFJZ1FvQWdBZ0JVWUVRQ0FFSUFBMkFnQWdBRVVFUUVHQUxDQUxRUUVnQVhSQmYzTnhOZ0lBREFJTEJTQUpRUkJxSWdFZ0NVRVVhaUFCS0FJQUlBVkdHeUFBTmdJQUlBQkZEUUVMSUFCQkdHb2dDVFlDQUNBRlFSQnFLQUlBSWdFRVFDQUFRUkJxSUFFMkFnQWdBVUVZYWlBQU5nSUFDeUFGUVJScUtBSUFJZ0VFUUNBQVFSUnFJQUUyQWdBZ0FVRVlhaUFBTmdJQUN3c0xJQWhCRUVrRVFDQUZRUVJxSUFJZ0NHb2lBRUVEY2pZQ0FDQUFJQVZxUVFScUlnQWdBQ2dDQUVFQmNqWUNBQVVnQlVFRWFpQUNRUU55TmdJQUlBeEJCR29nQ0VFQmNqWUNBQ0FJSUF4cUlBZzJBZ0FnQndSQVFaQXNLQUlBSVFJZ0IwRURkaUlCUVFOMFFhUXNhaUVBSUFOQkFTQUJkQ0lCY1FSL0lBQkJDR29pQVNFRElBRW9BZ0FGUWZ3cklBRWdBM0kyQWdBZ0FFRUlhaUVESUFBTElRRWdBeUFDTmdJQUlBRkJER29nQWpZQ0FDQUNRUWhxSUFFMkFnQWdBa0VNYWlBQU5nSUFDMEdFTENBSU5nSUFRWkFzSUF3MkFnQUxJQW9rQWlBRlFRaHFEd1VnQWdzRklBSUxCU0FDQ3dVZ0FFRy9mMHNFZjBGL0JRSi9JQUJCQzJvaUFFRjRjU0VCUVlBc0tBSUFJZ1FFZjBFQUlBRnJJUUlDZndKQUlBQkJDSFlpQUFSL0lBRkIvLy8vQjBzRWYwRWZCU0FBSUFCQmdQNC9ha0VRZGtFSWNTSUdkQ0lEUVlEZ0gycEJFSFpCQkhFaEFDQURJQUIwSWdWQmdJQVBha0VRZGtFQ2NTRURJQUZCRGlBQUlBWnlJQU55YXlBRklBTjBRUTkyYWlJQVFRZHFka0VCY1NBQVFRRjBjZ3NGUVFBTElnZEJBblJCckM1cUtBSUFJZ0FFUUVFQUlRVWdBVUVBUVJrZ0IwRUJkbXNnQjBFZlJodDBJUVpCQUNFREEwQWdBRUVFYWlnQ0FFRjRjU0FCYXlJSUlBSkpCRUFnQ0FSL0lBQWhBeUFJQlVFQUlRTWdBQ0VDREFRTElRSUxJQVVnQUVFVWFpZ0NBQ0lGSUFWRklBVWdBRUVRYWlBR1FSOTJRUUowYWlnQ0FDSUlSbkliSVFBZ0JrRUJkQ0VHSUFnRVFDQUFJUVVnQ0NFQURBRUxDd1ZCQUNFQVFRQWhBd3NnQUNBRGNnUi9JQUFoQmlBREJTQUJJQVJCQWlBSGRDSUFRUUFnQUd0eWNTSUFSUTBFR2lBQVFRQWdBR3R4UVg5cUlnQkJESFpCRUhFaUF5QUFJQU4ySWdCQkJYWkJDSEVpQTNJZ0FDQURkaUlBUVFKMlFRUnhJZ055SUFBZ0EzWWlBRUVCZGtFQ2NTSURjaUFBSUFOMklnQkJBWFpCQVhFaUEzSWdBQ0FEZG1wQkFuUkJyQzVxS0FJQUlRWkJBQXNoQUNBR0JIOGdBaUVESUFZaEFnd0JCU0FDSVFZZ0FBc01BUXNEZnlBQ1FRUnFLQUlBUVhoeElBRnJJZ1VnQTBraEJpQUZJQU1nQmhzaEF5QUNJQUFnQmhzaEFDQUNRUkJxS0FJQUlnWUVmeUFHQlNBQ1FSUnFLQUlBQ3lJQ0RRQWdBeUVHSUFBTEN5SURCSDhnQmtHRUxDZ0NBQ0FCYTBrRWZ5QUJJQU5xSWdjZ0Ewc0VmeUFEUVJocUtBSUFJUWtnQTBFTWFpZ0NBQ0lBSUFOR0JFQUNRQ0FEUVJScUlnSW9BZ0FpQUVVRVFDQURRUkJxSWdJb0FnQWlBRVVFUUVFQUlRQU1BZ3NMQTBBQ1FDQUFRUlJxSWdVb0FnQWlDQVIvSUFVaEFpQUlCU0FBUVJCcUlnVW9BZ0FpQ0VVTkFTQUZJUUlnQ0FzaEFBd0JDd3NnQWtFQU5nSUFDd1VnQTBFSWFpZ0NBQ0lDUVF4cUlBQTJBZ0FnQUVFSWFpQUNOZ0lBQ3lBSkJFQUNRQ0FEUVJ4cUtBSUFJZ0pCQW5SQnJDNXFJZ1VvQWdBZ0EwWUVRQ0FGSUFBMkFnQWdBRVVFUUVHQUxDQUVRUUVnQW5SQmYzTnhJZ0EyQWdBTUFnc0ZJQWxCRUdvaUFpQUpRUlJxSUFJb0FnQWdBMFliSUFBMkFnQWdBRVVFUUNBRUlRQU1BZ3NMSUFCQkdHb2dDVFlDQUNBRFFSQnFLQUlBSWdJRVFDQUFRUkJxSUFJMkFnQWdBa0VZYWlBQU5nSUFDeUFEUVJScUtBSUFJZ0lFZnlBQVFSUnFJQUkyQWdBZ0FrRVlhaUFBTmdJQUlBUUZJQVFMSVFBTEJTQUVJUUFMSUFaQkVFa0VRQ0FEUVFScUlBRWdCbW9pQUVFRGNqWUNBQ0FBSUFOcVFRUnFJZ0FnQUNnQ0FFRUJjallDQUFVQ1FDQURRUVJxSUFGQkEzSTJBZ0FnQjBFRWFpQUdRUUZ5TmdJQUlBWWdCMm9nQmpZQ0FDQUdRUU4ySVFFZ0JrR0FBa2tFUUNBQlFRTjBRYVFzYWlFQVFmd3JLQUlBSWdKQkFTQUJkQ0lCY1FSL0lBQkJDR29pQVNFQ0lBRW9BZ0FGUWZ3cklBRWdBbkkyQWdBZ0FFRUlhaUVDSUFBTElRRWdBaUFITmdJQUlBRkJER29nQnpZQ0FDQUhRUWhxSUFFMkFnQWdCMEVNYWlBQU5nSUFEQUVMSUFaQkNIWWlBUVIvSUFaQi8vLy9CMHNFZjBFZkJTQUJJQUZCZ1A0L2FrRVFka0VJY1NJRWRDSUNRWURnSDJwQkVIWkJCSEVoQVNBQ0lBRjBJZ1ZCZ0lBUGFrRVFka0VDY1NFQ0lBWkJEaUFCSUFSeUlBSnlheUFGSUFKMFFROTJhaUlCUVFkcWRrRUJjU0FCUVFGMGNnc0ZRUUFMSWdGQkFuUkJyQzVxSVFJZ0IwRWNhaUFCTmdJQUlBZEJFR29pQkVFRWFrRUFOZ0lBSUFSQkFEWUNBQ0FBUVFFZ0FYUWlCSEZGQkVCQmdDd2dBQ0FFY2pZQ0FDQUNJQWMyQWdBZ0IwRVlhaUFDTmdJQUlBZEJER29nQnpZQ0FDQUhRUWhxSUFjMkFnQU1BUXNnQWlnQ0FDSUFRUVJxS0FJQVFYaHhJQVpHQkVBZ0FDRUJCUUpBSUFaQkFFRVpJQUZCQVhacklBRkJIMFliZENFQ0EwQWdBRUVRYWlBQ1FSOTJRUUowYWlJRUtBSUFJZ0VFUUNBQ1FRRjBJUUlnQVVFRWFpZ0NBRUY0Y1NBR1JnMENJQUVoQUF3QkN3c2dCQ0FITmdJQUlBZEJHR29nQURZQ0FDQUhRUXhxSUFjMkFnQWdCMEVJYWlBSE5nSUFEQUlMQ3lBQlFRaHFJZ0FvQWdBaUFrRU1haUFITmdJQUlBQWdCellDQUNBSFFRaHFJQUkyQWdBZ0IwRU1haUFCTmdJQUlBZEJHR3BCQURZQ0FBc0xJQW9rQWlBRFFRaHFEd1VnQVFzRklBRUxCU0FCQ3dVZ0FRc0xDd3NoQUVHRUxDZ0NBQ0lDSUFCUEJFQkJrQ3dvQWdBaEFTQUNJQUJySWdOQkQwc0VRRUdRTENBQUlBRnFJZ1EyQWdCQmhDd2dBellDQUNBRVFRUnFJQU5CQVhJMkFnQWdBU0FDYWlBRE5nSUFJQUZCQkdvZ0FFRURjallDQUFWQmhDeEJBRFlDQUVHUUxFRUFOZ0lBSUFGQkJHb2dBa0VEY2pZQ0FDQUJJQUpxUVFScUlnQWdBQ2dDQUVFQmNqWUNBQXNnQ2lRQ0lBRkJDR29QQzBHSUxDZ0NBQ0lDSUFCTEJFQkJpQ3dnQWlBQWF5SUNOZ0lBUVpRc1FaUXNLQUlBSWdFZ0FHb2lBellDQUNBRFFRUnFJQUpCQVhJMkFnQWdBVUVFYWlBQVFRTnlOZ0lBSUFva0FpQUJRUWhxRHdzZ0FFRXdhaUVHUWRRdktBSUFCSDlCM0M4b0FnQUZRZHd2UVlBZ05nSUFRZGd2UVlBZ05nSUFRZUF2UVg4MkFnQkI1QzlCZnpZQ0FFSG9MMEVBTmdJQVFiZ3ZRUUEyQWdCQjFDOGdDVUZ3Y1VIWXF0V3FCWE0yQWdCQmdDQUxJZ0VnQUVFdmFpSUZhaUlJUVFBZ0FXc2lDWEVpQkNBQVRRUkFJQW9rQWtFQUR3dEJ0QzhvQWdBaUFRUkFRYXd2S0FJQUlnTWdCR29pQnlBRFRTQUhJQUZMY2dSQUlBb2tBa0VBRHdzTEFrQUNRRUc0THlnQ0FFRUVjUVJBUVFBaEFnVUNRQUpBQWtCQmxDd29BZ0FpQVVVTkFFRzhMeUVEQTBBQ1FDQURLQUlBSWdjZ0FVMEVRQ0FISUFOQkJHb29BZ0JxSUFGTERRRUxJQU5CQ0dvb0FnQWlBdzBCREFJTEN5QUlJQUpySUFseElnSkIvLy8vL3dkSkJFQWdBaEJlSVFFZ0FTQURLQUlBSUFOQkJHb29BZ0JxUncwQ0lBRkJmMGNOQlFWQkFDRUNDd3dDQzBFQUVGNGlBVUYvUmdSL1FRQUZRYXd2S0FJQUlnZ2dBVUhZTHlnQ0FDSUNRWDlxSWdOcVFRQWdBbXR4SUFGclFRQWdBU0FEY1JzZ0JHb2lBbW9oQXlBQ1FmLy8vLzhIU1NBQ0lBQkxjUVIvUWJRdktBSUFJZ2tFUUNBRElBaE5JQU1nQ1V0eUJFQkJBQ0VDREFVTEN5QUJJQUlRWGlJRFJnMEZJQU1oQVF3Q0JVRUFDd3NoQWd3QkMwRUFJQUpySVFnZ0FVRi9SeUFDUWYvLy8vOEhTWEVnQmlBQ1MzRkZCRUFnQVVGL1JnUkFRUUFoQWd3Q0JRd0VDd0FMUWR3dktBSUFJZ01nQlNBQ2EycEJBQ0FEYTNFaUEwSC8vLy8vQjA4TkFpQURFRjVCZjBZRWZ5QUlFRjRhUVFBRklBSWdBMm9oQWd3REN5RUNDMEc0TDBHNEx5Z0NBRUVFY2pZQ0FBc2dCRUgvLy8vL0Iwa0VRQ0FFRUY0aEFVRUFFRjRpQXlBQmF5SUdJQUJCS0dwTElRUWdCaUFDSUFRYklRSWdCRUVCY3lBQlFYOUdjaUFCUVg5SElBTkJmMGR4SUFFZ0EwbHhRUUZ6Y2tVTkFRc01BUXRCckM5QnJDOG9BZ0FnQW1vaUF6WUNBQ0FEUWJBdktBSUFTd1JBUWJBdklBTTJBZ0FMUVpRc0tBSUFJZ1FFUUFKQVFid3ZJUU1DUUFKQUEwQWdBeWdDQUNJR0lBTkJCR29vQWdBaUJXb2dBVVlOQVNBRFFRaHFLQUlBSWdNTkFBc01BUXNnQTBFRWFpRUlJQU5CREdvb0FnQkJDSEZGQkVBZ0JpQUVUU0FCSUFSTGNRUkFJQWdnQWlBRmFqWUNBQ0FFUVFBZ0JFRUlhaUlCYTBFSGNVRUFJQUZCQjNFYklnTnFJUUZCaUN3b0FnQWdBbW9pQmlBRGF5RUNRWlFzSUFFMkFnQkJpQ3dnQWpZQ0FDQUJRUVJxSUFKQkFYSTJBZ0FnQkNBR2FrRUVha0VvTmdJQVFaZ3NRZVF2S0FJQU5nSUFEQU1MQ3dzZ0FVR01MQ2dDQUVrRVFFR01MQ0FCTmdJQUN5QUJJQUpxSVFaQnZDOGhBd0pBQWtBRFFDQURLQUlBSUFaR0RRRWdBMEVJYWlnQ0FDSUREUUFMREFFTElBTkJER29vQWdCQkNIRkZCRUFnQXlBQk5nSUFJQU5CQkdvaUF5QURLQUlBSUFKcU5nSUFRUUFnQVVFSWFpSUNhMEVIY1VFQUlBSkJCM0ViSUFGcUlna2dBR29oQlNBR1FRQWdCa0VJYWlJQmEwRUhjVUVBSUFGQkIzRWJhaUlDSUFscklBQnJJUU1nQ1VFRWFpQUFRUU55TmdJQUlBSWdCRVlFUUVHSUxFR0lMQ2dDQUNBRGFpSUFOZ0lBUVpRc0lBVTJBZ0FnQlVFRWFpQUFRUUZ5TmdJQUJRSkFRWkFzS0FJQUlBSkdCRUJCaEN4QmhDd29BZ0FnQTJvaUFEWUNBRUdRTENBRk5nSUFJQVZCQkdvZ0FFRUJjallDQUNBQUlBVnFJQUEyQWdBTUFRc2dBa0VFYWlnQ0FDSUFRUU54UVFGR0JFQWdBRUY0Y1NFSElBQkJBM1loQkNBQVFZQUNTUVJBSUFKQkNHb29BZ0FpQUNBQ1FReHFLQUlBSWdGR0JFQkIvQ3RCL0Nzb0FnQkJBU0FFZEVGL2MzRTJBZ0FGSUFCQkRHb2dBVFlDQUNBQlFRaHFJQUEyQWdBTEJRSkFJQUpCR0dvb0FnQWhDQ0FDUVF4cUtBSUFJZ0FnQWtZRVFBSkFJQUpCRUdvaUFVRUVhaUlFS0FJQUlnQUVRQ0FFSVFFRklBRW9BZ0FpQUVVRVFFRUFJUUFNQWdzTEEwQUNRQ0FBUVJScUlnUW9BZ0FpQmdSL0lBUWhBU0FHQlNBQVFSQnFJZ1FvQWdBaUJrVU5BU0FFSVFFZ0Jnc2hBQXdCQ3dzZ0FVRUFOZ0lBQ3dVZ0FrRUlhaWdDQUNJQlFReHFJQUEyQWdBZ0FFRUlhaUFCTmdJQUN5QUlSUTBBSUFKQkhHb29BZ0FpQVVFQ2RFR3NMbW9pQkNnQ0FDQUNSZ1JBQWtBZ0JDQUFOZ0lBSUFBTkFFR0FMRUdBTENnQ0FFRUJJQUYwUVg5emNUWUNBQXdDQ3dVZ0NFRVFhaUlCSUFoQkZHb2dBU2dDQUNBQ1Joc2dBRFlDQUNBQVJRMEJDeUFBUVJocUlBZzJBZ0FnQWtFUWFpSUVLQUlBSWdFRVFDQUFRUkJxSUFFMkFnQWdBVUVZYWlBQU5nSUFDeUFFUVFScUtBSUFJZ0ZGRFFBZ0FFRVVhaUFCTmdJQUlBRkJHR29nQURZQ0FBc0xJQUlnQjJvaEFpQURJQWRxSVFNTElBSkJCR29pQUNBQUtBSUFRWDV4TmdJQUlBVkJCR29nQTBFQmNqWUNBQ0FESUFWcUlBTTJBZ0FnQTBFRGRpRUJJQU5CZ0FKSkJFQWdBVUVEZEVHa0xHb2hBRUg4S3lnQ0FDSUNRUUVnQVhRaUFYRUVmeUFBUVFocUlnRWhBaUFCS0FJQUJVSDhLeUFCSUFKeU5nSUFJQUJCQ0dvaEFpQUFDeUVCSUFJZ0JUWUNBQ0FCUVF4cUlBVTJBZ0FnQlVFSWFpQUJOZ0lBSUFWQkRHb2dBRFlDQUF3QkN5QURRUWgySWdBRWZ5QURRZi8vL3dkTEJIOUJId1VnQUNBQVFZRCtQMnBCRUhaQkNIRWlBblFpQVVHQTRCOXFRUkIyUVFSeElRQWdBU0FBZENJRVFZQ0FEMnBCRUhaQkFuRWhBU0FEUVE0Z0FDQUNjaUFCY21zZ0JDQUJkRUVQZG1vaUFFRUhhblpCQVhFZ0FFRUJkSElMQlVFQUN5SUJRUUowUWF3dWFpRUFJQVZCSEdvZ0FUWUNBQ0FGUVJCcUlnSkJCR3BCQURZQ0FDQUNRUUEyQWdCQmdDd29BZ0FpQWtFQklBRjBJZ1J4UlFSQVFZQXNJQUlnQkhJMkFnQWdBQ0FGTmdJQUlBVkJHR29nQURZQ0FDQUZRUXhxSUFVMkFnQWdCVUVJYWlBRk5nSUFEQUVMSUFBb0FnQWlBRUVFYWlnQ0FFRjRjU0FEUmdSQUlBQWhBUVVDUUNBRFFRQkJHU0FCUVFGMmF5QUJRUjlHRzNRaEFnTkFJQUJCRUdvZ0FrRWZka0VDZEdvaUJDZ0NBQ0lCQkVBZ0FrRUJkQ0VDSUFGQkJHb29BZ0JCZUhFZ0EwWU5BaUFCSVFBTUFRc0xJQVFnQlRZQ0FDQUZRUmhxSUFBMkFnQWdCVUVNYWlBRk5nSUFJQVZCQ0dvZ0JUWUNBQXdDQ3dzZ0FVRUlhaUlBS0FJQUlnSkJER29nQlRZQ0FDQUFJQVUyQWdBZ0JVRUlhaUFDTmdJQUlBVkJER29nQVRZQ0FDQUZRUmhxUVFBMkFnQUxDeUFLSkFJZ0NVRUlhZzhMQzBHOEx5RURBMEFDUUNBREtBSUFJZ1lnQkUwRVFDQUdJQU5CQkdvb0FnQnFJZ1VnQkVzTkFRc2dBMEVJYWlnQ0FDRUREQUVMQ3lBRlFWRnFJZ1pCQ0dvaEF5QUVJQVpCQUNBRGEwRUhjVUVBSUFOQkIzRWJhaUlESUFNZ0JFRVFhaUlKU1JzaUEwRUlhaUVHUVpRc1FRQWdBVUVJYWlJSWEwRUhjVUVBSUFoQkIzRWJJZ2dnQVdvaUJ6WUNBRUdJTENBQ1FWaHFJZ3NnQ0dzaUNEWUNBQ0FIUVFScUlBaEJBWEkyQWdBZ0FTQUxha0VFYWtFb05nSUFRWmdzUWVRdktBSUFOZ0lBSUFOQkJHb2lDRUViTmdJQUlBWkJ2QzhwQWdBM0FnQWdCa0hFTHlrQ0FEY0NDRUc4THlBQk5nSUFRY0F2SUFJMkFnQkJ5QzlCQURZQ0FFSEVMeUFHTmdJQUlBTkJHR29oQVFOQUlBRkJCR29pQWtFSE5nSUFJQUZCQ0dvZ0JVa0VRQ0FDSVFFTUFRc0xJQU1nQkVjRVFDQUlJQWdvQWdCQmZuRTJBZ0FnQkVFRWFpQURJQVJySWdaQkFYSTJBZ0FnQXlBR05nSUFJQVpCQTNZaEFpQUdRWUFDU1FSQUlBSkJBM1JCcEN4cUlRRkIvQ3NvQWdBaUEwRUJJQUowSWdKeEJIOGdBVUVJYWlJQ0lRTWdBaWdDQUFWQi9Dc2dBaUFEY2pZQ0FDQUJRUWhxSVFNZ0FRc2hBaUFESUFRMkFnQWdBa0VNYWlBRU5nSUFJQVJCQ0dvZ0FqWUNBQ0FFUVF4cUlBRTJBZ0FNQWdzZ0JrRUlkaUlCQkg4Z0JrSC8vLzhIU3dSL1FSOEZJQUVnQVVHQS9qOXFRUkIyUVFoeElnTjBJZ0pCZ09BZmFrRVFka0VFY1NFQklBSWdBWFFpQlVHQWdBOXFRUkIyUVFKeElRSWdCa0VPSUFFZ0EzSWdBbkpySUFVZ0FuUkJEM1pxSWdGQkIycDJRUUZ4SUFGQkFYUnlDd1ZCQUFzaUFrRUNkRUdzTG1vaEFTQUVRUnhxSUFJMkFnQWdCRUVVYWtFQU5nSUFJQWxCQURZQ0FFR0FMQ2dDQUNJRFFRRWdBblFpQlhGRkJFQkJnQ3dnQXlBRmNqWUNBQ0FCSUFRMkFnQWdCRUVZYWlBQk5nSUFJQVJCREdvZ0JEWUNBQ0FFUVFocUlBUTJBZ0FNQWdzZ0FTZ0NBQ0lCUVFScUtBSUFRWGh4SUFaR0JFQWdBU0VDQlFKQUlBWkJBRUVaSUFKQkFYWnJJQUpCSDBZYmRDRURBMEFnQVVFUWFpQURRUjkyUVFKMGFpSUZLQUlBSWdJRVFDQURRUUYwSVFNZ0FrRUVhaWdDQUVGNGNTQUdSZzBDSUFJaEFRd0JDd3NnQlNBRU5nSUFJQVJCR0dvZ0FUWUNBQ0FFUVF4cUlBUTJBZ0FnQkVFSWFpQUVOZ0lBREFNTEN5QUNRUWhxSWdFb0FnQWlBMEVNYWlBRU5nSUFJQUVnQkRZQ0FDQUVRUWhxSUFNMkFnQWdCRUVNYWlBQ05nSUFJQVJCR0dwQkFEWUNBQXNMQlVHTUxDZ0NBQ0lEUlNBQklBTkpjZ1JBUVl3c0lBRTJBZ0FMUWJ3dklBRTJBZ0JCd0M4Z0FqWUNBRUhJTDBFQU5nSUFRYUFzUWRRdktBSUFOZ0lBUVp3c1FYODJBZ0JCc0N4QnBDdzJBZ0JCckN4QnBDdzJBZ0JCdUN4QnJDdzJBZ0JCdEN4QnJDdzJBZ0JCd0N4QnRDdzJBZ0JCdkN4QnRDdzJBZ0JCeUN4QnZDdzJBZ0JCeEN4QnZDdzJBZ0JCMEN4QnhDdzJBZ0JCekN4QnhDdzJBZ0JCMkN4QnpDdzJBZ0JCMUN4QnpDdzJBZ0JCNEN4QjFDdzJBZ0JCM0N4QjFDdzJBZ0JCNkN4QjNDdzJBZ0JCNUN4QjNDdzJBZ0JCOEN4QjVDdzJBZ0JCN0N4QjVDdzJBZ0JCK0N4QjdDdzJBZ0JCOUN4QjdDdzJBZ0JCZ0MxQjlDdzJBZ0JCL0N4QjlDdzJBZ0JCaUMxQi9DdzJBZ0JCaEMxQi9DdzJBZ0JCa0MxQmhDMDJBZ0JCakMxQmhDMDJBZ0JCbUMxQmpDMDJBZ0JCbEMxQmpDMDJBZ0JCb0MxQmxDMDJBZ0JCbkMxQmxDMDJBZ0JCcUMxQm5DMDJBZ0JCcEMxQm5DMDJBZ0JCc0MxQnBDMDJBZ0JCckMxQnBDMDJBZ0JCdUMxQnJDMDJBZ0JCdEMxQnJDMDJBZ0JCd0MxQnRDMDJBZ0JCdkMxQnRDMDJBZ0JCeUMxQnZDMDJBZ0JCeEMxQnZDMDJBZ0JCMEMxQnhDMDJBZ0JCekMxQnhDMDJBZ0JCMkMxQnpDMDJBZ0JCMUMxQnpDMDJBZ0JCNEMxQjFDMDJBZ0JCM0MxQjFDMDJBZ0JCNkMxQjNDMDJBZ0JCNUMxQjNDMDJBZ0JCOEMxQjVDMDJBZ0JCN0MxQjVDMDJBZ0JCK0MxQjdDMDJBZ0JCOUMxQjdDMDJBZ0JCZ0M1QjlDMDJBZ0JCL0MxQjlDMDJBZ0JCaUM1Qi9DMDJBZ0JCaEM1Qi9DMDJBZ0JCa0M1QmhDNDJBZ0JCakM1QmhDNDJBZ0JCbUM1QmpDNDJBZ0JCbEM1QmpDNDJBZ0JCb0M1QmxDNDJBZ0JCbkM1QmxDNDJBZ0JCcUM1Qm5DNDJBZ0JCcEM1Qm5DNDJBZ0JCbEN4QkFDQUJRUWhxSWdOclFRZHhRUUFnQTBFSGNSc2lBeUFCYWlJRU5nSUFRWWdzSUFKQldHb2lBaUFEYXlJRE5nSUFJQVJCQkdvZ0EwRUJjallDQUNBQklBSnFRUVJxUVNnMkFnQkJtQ3hCNUM4b0FnQTJBZ0FMUVlnc0tBSUFJZ0VnQUVzRVFFR0lMQ0FCSUFCcklnSTJBZ0JCbEN4QmxDd29BZ0FpQVNBQWFpSUROZ0lBSUFOQkJHb2dBa0VCY2pZQ0FDQUJRUVJxSUFCQkEzSTJBZ0FnQ2lRQ0lBRkJDR29QQ3dzUVRVRU1OZ0lBSUFva0FrRUFDOGdQQVFoL0lBQkZCRUFQQzBHTUxDZ0NBQ0VFSUFCQmVHb2lBU0FBUVh4cUtBSUFJZ05CZUhFaUFHb2hCaUFEUVFGeEJFQWdBU0VDQlFKL0lBRW9BZ0FoQWlBRFFRTnhSUVJBRHdzZ0FDQUNhaUVESUFFZ0Ftc2lBQ0FFU1FSQUR3dEJrQ3dvQWdBZ0FFWUVRQ0FHUVFScUlnRW9BZ0FpQWtFRGNVRURSd1JBSUFBaEFTQUFJUUlnQXd3Q0MwR0VMQ0FETmdJQUlBRWdBa0YrY1RZQ0FDQUFRUVJxSUFOQkFYSTJBZ0FnQUNBRGFpQUROZ0lBRHdzZ0FrRURkaUVFSUFKQmdBSkpCRUFnQUVFSWFpZ0NBQ0lCSUFCQkRHb29BZ0FpQWtZRVFFSDhLMEg4S3lnQ0FFRUJJQVIwUVg5emNUWUNBQ0FBSVFFZ0FDRUNJQU1NQWdVZ0FVRU1haUFDTmdJQUlBSkJDR29nQVRZQ0FDQUFJUUVnQUNFQ0lBTU1BZ3NBQ3lBQVFSaHFLQUlBSVFjZ0FFRU1haWdDQUNJQklBQkdCRUFDUUNBQVFSQnFJZ0pCQkdvaUJDZ0NBQ0lCQkVBZ0JDRUNCU0FDS0FJQUlnRkZCRUJCQUNFQkRBSUxDd05BQWtBZ0FVRVVhaUlFS0FJQUlnVUVmeUFFSVFJZ0JRVWdBVUVRYWlJRUtBSUFJZ1ZGRFFFZ0JDRUNJQVVMSVFFTUFRc0xJQUpCQURZQ0FBc0ZJQUJCQ0dvb0FnQWlBa0VNYWlBQk5nSUFJQUZCQ0dvZ0FqWUNBQXNnQndSL0lBQkJIR29vQWdBaUFrRUNkRUdzTG1vaUJDZ0NBQ0FBUmdSQUlBUWdBVFlDQUNBQlJRUkFRWUFzUVlBc0tBSUFRUUVnQW5SQmYzTnhOZ0lBSUFBaEFTQUFJUUlnQXd3REN3VWdCMEVRYWlJQ0lBZEJGR29nQWlnQ0FDQUFSaHNnQVRZQ0FDQUJSUVJBSUFBaEFTQUFJUUlnQXd3REN3c2dBVUVZYWlBSE5nSUFJQUJCRUdvaUJDZ0NBQ0lDQkVBZ0FVRVFhaUFDTmdJQUlBSkJHR29nQVRZQ0FBc2dCRUVFYWlnQ0FDSUNCSDhnQVVFVWFpQUNOZ0lBSUFKQkdHb2dBVFlDQUNBQUlRRWdBQ0VDSUFNRklBQWhBU0FBSVFJZ0F3c0ZJQUFoQVNBQUlRSWdBd3NMSVFBTElBRWdCazhFUUE4TElBWkJCR29pQkNnQ0FDSURRUUZ4UlFSQUR3c2dBMEVDY1FSL0lBUWdBMEYrY1RZQ0FDQUNRUVJxSUFCQkFYSTJBZ0FnQUNBQmFpQUFOZ0lBSUFBRlFaUXNLQUlBSUFaR0JFQkJpQ3hCaUN3b0FnQWdBR29pQURZQ0FFR1VMQ0FDTmdJQUlBSkJCR29nQUVFQmNqWUNBQ0FDUVpBc0tBSUFSd1JBRHd0QmtDeEJBRFlDQUVHRUxFRUFOZ0lBRHd0QmtDd29BZ0FnQmtZRVFFR0VMRUdFTENnQ0FDQUFhaUlBTmdJQVFaQXNJQUUyQWdBZ0FrRUVhaUFBUVFGeU5nSUFJQUFnQVdvZ0FEWUNBQThMSUFOQmVIRWdBR29oQkNBRFFRTjJJUVVnQTBHQUFra0VRQ0FHUVFocUtBSUFJZ0FnQmtFTWFpZ0NBQ0lEUmdSQVFmd3JRZndyS0FJQVFRRWdCWFJCZjNOeE5nSUFCU0FBUVF4cUlBTTJBZ0FnQTBFSWFpQUFOZ0lBQ3dVQ1FDQUdRUmhxS0FJQUlRZ2dCa0VNYWlnQ0FDSUFJQVpHQkVBQ1FDQUdRUkJxSWdOQkJHb2lCU2dDQUNJQUJFQWdCU0VEQlNBREtBSUFJZ0JGQkVCQkFDRUFEQUlMQ3dOQUFrQWdBRUVVYWlJRktBSUFJZ2NFZnlBRklRTWdCd1VnQUVFUWFpSUZLQUlBSWdkRkRRRWdCU0VESUFjTElRQU1BUXNMSUFOQkFEWUNBQXNGSUFaQkNHb29BZ0FpQTBFTWFpQUFOZ0lBSUFCQkNHb2dBellDQUFzZ0NBUkFJQVpCSEdvb0FnQWlBMEVDZEVHc0xtb2lCU2dDQUNBR1JnUkFJQVVnQURZQ0FDQUFSUVJBUVlBc1FZQXNLQUlBUVFFZ0EzUkJmM054TmdJQURBTUxCU0FJUVJCcUlnTWdDRUVVYWlBREtBSUFJQVpHR3lBQU5nSUFJQUJGRFFJTElBQkJHR29nQ0RZQ0FDQUdRUkJxSWdVb0FnQWlBd1JBSUFCQkVHb2dBellDQUNBRFFSaHFJQUEyQWdBTElBVkJCR29vQWdBaUF3UkFJQUJCRkdvZ0F6WUNBQ0FEUVJocUlBQTJBZ0FMQ3dzTElBSkJCR29nQkVFQmNqWUNBQ0FCSUFScUlBUTJBZ0JCa0N3b0FnQWdBa1lFZjBHRUxDQUVOZ0lBRHdVZ0JBc0xJZ05CQTNZaEFTQURRWUFDU1FSQUlBRkJBM1JCcEN4cUlRQkIvQ3NvQWdBaUEwRUJJQUYwSWdGeEJIOGdBRUVJYWlJQklRTWdBU2dDQUFWQi9Dc2dBU0FEY2pZQ0FDQUFRUWhxSVFNZ0FBc2hBU0FESUFJMkFnQWdBVUVNYWlBQ05nSUFJQUpCQ0dvZ0FUWUNBQ0FDUVF4cUlBQTJBZ0FQQ3lBRFFRaDJJZ0FFZnlBRFFmLy8vd2RMQkg5Qkh3VWdBQ0FBUVlEK1AycEJFSFpCQ0hFaUJIUWlBVUdBNEI5cVFSQjJRUVJ4SVFBZ0FTQUFkQ0lGUVlDQUQycEJFSFpCQW5FaEFTQURRUTRnQUNBRWNpQUJjbXNnQlNBQmRFRVBkbW9pQUVFSGFuWkJBWEVnQUVFQmRISUxCVUVBQ3lJQlFRSjBRYXd1YWlFQUlBSkJIR29nQVRZQ0FDQUNRUlJxUVFBMkFnQWdBa0VRYWtFQU5nSUFRWUFzS0FJQUlnUkJBU0FCZENJRmNRUkFBa0FnQUNnQ0FDSUFRUVJxS0FJQVFYaHhJQU5HQkVBZ0FDRUJCUUpBSUFOQkFFRVpJQUZCQVhacklBRkJIMFliZENFRUEwQWdBRUVRYWlBRVFSOTJRUUowYWlJRktBSUFJZ0VFUUNBRVFRRjBJUVFnQVVFRWFpZ0NBRUY0Y1NBRFJnMENJQUVoQUF3QkN3c2dCU0FDTmdJQUlBSkJHR29nQURZQ0FDQUNRUXhxSUFJMkFnQWdBa0VJYWlBQ05nSUFEQUlMQ3lBQlFRaHFJZ0FvQWdBaUEwRU1haUFDTmdJQUlBQWdBallDQUNBQ1FRaHFJQU0yQWdBZ0FrRU1haUFCTmdJQUlBSkJHR3BCQURZQ0FBc0ZRWUFzSUFRZ0JYSTJBZ0FnQUNBQ05nSUFJQUpCR0dvZ0FEWUNBQ0FDUVF4cUlBSTJBZ0FnQWtFSWFpQUNOZ0lBQzBHY0xFR2NMQ2dDQUVGL2FpSUFOZ0lBSUFBRVFBOExRY1F2SVFBRFFDQUFLQUlBSWdGQkNHb2hBQ0FCRFFBTFFad3NRWDgyQWdBTExBQWdBQ2dDQUVIZnQ5NmFBVVlFUUVFQUR3c2dBVUVCY1VFYWFoRUJBQ0FBUWQrMzNwb0JOZ0lBUVFBTHhnTUJBMzhnQWtHQXdBQk9CRUFnQUNBQklBSVFDQm9nQUE4TElBQWhCQ0FBSUFKcUlRTWdBRUVEY1NBQlFRTnhSZ1JBQTBBZ0FFRURjUVJBSUFKRkJFQWdCQThMSUFBZ0FTd0FBRG9BQUNBQVFRRnFJUUFnQVVFQmFpRUJJQUpCQVdzaEFnd0JDd3NnQTBGOGNTSUNRVUJxSVFVRFFDQUFJQVZNQkVBZ0FDQUJLQUlBTmdJQUlBQWdBU2dDQkRZQ0JDQUFJQUVvQWdnMkFnZ2dBQ0FCS0FJTU5nSU1JQUFnQVNnQ0VEWUNFQ0FBSUFFb0FoUTJBaFFnQUNBQktBSVlOZ0lZSUFBZ0FTZ0NIRFlDSENBQUlBRW9BaUEyQWlBZ0FDQUJLQUlrTmdJa0lBQWdBU2dDS0RZQ0tDQUFJQUVvQWl3MkFpd2dBQ0FCS0FJd05nSXdJQUFnQVNnQ05EWUNOQ0FBSUFFb0FqZzJBamdnQUNBQktBSThOZ0k4SUFCQlFHc2hBQ0FCUVVCcklRRU1BUXNMQTBBZ0FDQUNTQVJBSUFBZ0FTZ0NBRFlDQUNBQVFRUnFJUUFnQVVFRWFpRUJEQUVMQ3dVZ0EwRUVheUVDQTBBZ0FDQUNTQVJBSUFBZ0FTd0FBRG9BQUNBQUlBRXNBQUU2QUFFZ0FDQUJMQUFDT2dBQ0lBQWdBU3dBQXpvQUF5QUFRUVJxSVFBZ0FVRUVhaUVCREFFTEN3c0RRQ0FBSUFOSUJFQWdBQ0FCTEFBQU9nQUFJQUJCQVdvaEFDQUJRUUZxSVFFTUFRc0xJQVFMbUFJQkJIOGdBQ0FDYWlFRUlBRkIvd0Z4SVFFZ0FrSERBRTRFUUFOQUlBQkJBM0VFUUNBQUlBRTZBQUFnQUVFQmFpRUFEQUVMQ3lBQlFRaDBJQUZ5SUFGQkVIUnlJQUZCR0hSeUlRTWdCRUY4Y1NJRlFVQnFJUVlEUUNBQUlBWk1CRUFnQUNBRE5nSUFJQUFnQXpZQ0JDQUFJQU0yQWdnZ0FDQUROZ0lNSUFBZ0F6WUNFQ0FBSUFNMkFoUWdBQ0FETmdJWUlBQWdBellDSENBQUlBTTJBaUFnQUNBRE5nSWtJQUFnQXpZQ0tDQUFJQU0yQWl3Z0FDQUROZ0l3SUFBZ0F6WUNOQ0FBSUFNMkFqZ2dBQ0FETmdJOElBQkJRR3NoQUF3QkN3c0RRQ0FBSUFWSUJFQWdBQ0FETmdJQUlBQkJCR29oQUF3QkN3c0xBMEFnQUNBRVNBUkFJQUFnQVRvQUFDQUFRUUZxSVFBTUFRc0xJQVFnQW1zTFVnRURmeEFISVFNZ0FDTUJLQUlBSWdKcUlnRWdBa2dnQUVFQVNuRWdBVUVBU0hJRVFDQUJFQW9hUVF3UUFrRi9Ed3NnQVNBRFNnUkFJQUVRQ1VVRVFFRU1FQUpCZnc4TEN5TUJJQUUyQWdBZ0Fnc01BQ0FCSUFCQkEzRVJBZ0FMRVFBZ0FTQUNJQUJCQjNGQkJHb1JBd0FMRXdBZ0FTQUNJQU1nQUVFSGNVRU1haEVBQUFzYkFDQUJJQUlnQXlBRUlBVWdCaUFISUFCQkFYRkJGR29SQkFBTEhRQWdBU0FDSUFNZ0JDQUZJQVlnQnlBSUlBQkJBWEZCRm1vUkJRQUxFd0FnQVNBQ0lBTWdBRUVCY1VFWWFoRUdBQXNOQUNBQVFRRnhRUnBxRVFFQUN3OEFJQUVnQUVFQmNVRWNhaEVIQUFzYkFDQUJJQUlnQXlBRUlBVWdCaUFISUFCQkFYRkJIbW9SQ0FBTENBQkJBQkFBUVFBTENBQkJBUkFBUVFBTENBQkJBaEFBUVFBTENBQkJBeEFBUVFBTENBQkJCQkFBUVFBTENBQkJCUkFBUWdBTEJnQkJCaEFBQ3dZQVFRY1FBQXNHQUVFSUVBQUxJd0VCZmlBQUlBRWdBcTBnQTYxQ0lJYUVJQVFRWkNFRklBVkNJSWluRUFzZ0JhY0xDL2thREFCQmdBZ0xHRklhSEJPWkd6c2FjeG9wRGQ0ZEZ3K01IbUljbkJNS0VRQkJvQWdMR0hJZ1pTZGVKeTh1UXk2bEdBRWxZeVYvS3AwZDlCODdIUUJCd0FnTEdIb0JLQVR0QVVZQ3NBSlJBdG9CdVFMYkFiQUNwUUhIQVFCQjRBZ0xHQ3NDK1FFM0Fnd0NTUUxQQlAwQlBBUHNBUVFHTndSU0F3QkJnQWtMRnlJQVBnQklBRUlBTlFBWkFGNEFRZ0E0QUQ0QVN3Qm5BRUdnQ1FzWE1BQlNBQzBBVndBeUFDOEFVQUF1QUZNQUtRQk9BRkVBUWNJSkM3OFZ5UUNTQVZzQ0pBUHRBN1lFZmdWSEJoQUgyUWVoQ0dvSk1ncjdDc01MaXd4VERSc080dzZyRDNJUU9SRUFFc2NTamhOVkZCc1Y0UlduRm0wWE14ajRHTDBaZ2hwR0d3c2N6eHlUSFZZZUdSL2NINThnWVNFakl1UWlwaU5uSkNjbDV5V25KbWNuSmlqbEtLTXBZU29lSzlzcm1DeFVMUkF1ekM2R0wwRXcrekMwTVcweUpqUGVNNVkwVFRVRE5yazJiemNrT05nNGpEay9Pdkk2cER0V1BBYzl0ejFuUGhZL3hUOXpRQ0JCelVGNVFpVkQwRU42UkNORnpFVjBSaHhIdzBkcFNBNUpzMGxYU3ZwS25Vcy9UT0JNZ0UwZ1RyOU9YVS82VDVkUU0xSE9VV2hTQVZPYVV6SlV5VlJmVmZSVmlWWWRWN0JYUWxqVFdHTlo4MW1CV2c5Ym5Gc29YTE5jUFYzR1hVOWUxbDVkWCtKZloyRHJZRzVoOEdGeFl2RmljR1B1WTJ0azUyUmlaZDFsVm1iT1prVm52R2N4YUtWb0dXbUxhZnhwYkdyYmFrcHJ0MnNqYkk1cytHeGhiY2x0TUc2VmJ2cHVYbS9BYnlKd2duRGhjRUJ4blhINWNWUnlybklHYzE1enRYTUtkRjUwc1hRRGRWUjFwSFh6ZFVCMmpYYllkaUozYTNlemQvbDNQM2lEZU1aNENIbEplWWw1eDNrRWVrRjZmSHExZXU1NkpYdGNlNUY3eEh2M2V5bDhXWHlJZkxaODRud09mVGg5WVgySmZiQjkxWDM1ZlJ4K1BuNWVmbjUrbkg2NWZ0Uis3MzRJZnlCL04zOU1mMkYvZEgrR2Y1Wi9wbiswZjhGL3pYL1hmK0IvNkgvdmYvVi8rWC84Zi81Ly8zLytmL3gvK1gvMWYrOS82SC9nZjlkL3pYL0JmN1IvcG4rV2Y0Wi9kSDloZjB4L04zOGdmd2gvNzM3VWZybCtuSDUrZmw1K1BuNGNmdmw5MVgyd2ZZbDlZWDA0ZlE1OTRueTJmSWg4V1h3cGZQZDd4SHVSZTF4N0pYdnVlclY2ZkhwQmVnUjZ4M21KZVVsNUNIbkdlSU40UDNqNWQ3TjNhM2NpZDloMmpYWkFkdk4xcEhWVWRRTjFzWFJlZEFwMHRYTmVjd1p6cm5KVWN2bHhuWEZBY2VGd2duQWljTUJ2WG0vNmJwVnVNRzdKYldGdCtHeU9iQ05zdDJ0S2E5dHFiR3I4YVl0cEdXbWxhREZvdkdkRlo4NW1WbWJkWldKbDUyUnJaTzVqY0dQeFluRmk4R0Z1WWV0Z1oyRGlYMTFmMWw1UFhzWmRQVjJ6WENoY25Gc1BXNEZhODFsaldkTllRbGl3VngxWGlWYjBWVjlWeVZReVZKcFRBVk5vVXM1Uk0xR1hVUHBQWFUrL1RpQk9nRTNnVEQ5TW5VdjZTbGRLczBrT1NXbEl3MGNjUjNSR3pFVWpSWHBFMEVNbFEzbEN6VUVnUVhOQXhUOFdQMmMrdHowSFBWWThwRHZ5T2o4NmpEbllPQ1E0YnplNU5nTTJUVFdXTk40ekpqTnRNclF4K3pCQk1JWXZ6QzRRTGxRdG1DemJLeDRyWVNxaktlVW9KaWhuSjZjbTV5VW5KV2NrcGlQa0lpTWlZU0dmSU53ZkdSOVdIcE1kenh3TEhFWWJnaHE5R2ZnWU14aHRGNmNXNFJVYkZWVVVqaFBIRWdBU09SRnlFS3NQNHc0YkRsTU5pd3pEQy9zS01ncHFDYUVJMlFjUUIwY0dmZ1cyQk8wREpBTmJBcElCeVFBQUFEZi9idjZsL2R6OEUveEsrNEw2dWZudytDZjRYL2VXOXM3MUJmVTk5SFh6cmZMbDhSM3hWZkNPNzhmdUFPNDU3WExzcSt2bDZoL3FXZW1UNk0zbkNPZEQ1bjdsdXVUMTR6SGpiZUtxNGVmZ0pPQmgzNS9lM2QwYzNWcmNtZHZaMmhuYVdkbVoyTnJYRzlkZDFwL1Y0dFFsMUdqVHJOTHcwVFRSZXRDL3p3WFBUTTZUemRyTUlzeHF5N1BLL2NsSHlaSEkzTWNveDNUR3djVU94VnpFcXNQNXdrbkNtY0hxd0R2QWpiL2d2ak8raDczYnZEQzhocnZkdWpTNmpMbmt1RDI0bDdmeXRrMjJxYlVHdFdPMHdiTWdzNEN5NExGQnNhT3dCckJwcjgydU1xNllyZitzWnF6T3F6ZXJvYW9NcW5lcDQ2aFFxTDZuTGFlZHBnMm1mNlh4cEdTazJLTk5vOE9pT3FLeG9TcWhvNkFlb0ptZkZaK1NuaENlajUwUG5aQ2NFcHlWbXhtYm5wb2ptcXFaTXBtN21FU1l6NWRibCtlV2RaWUVscFNWSlpXMmxFbVUzWk55a3dpVG41STNrdENSYTVFR2thS1FRSkRlajM2UEg0L0FqbU9PQjQ2c2pWS04rb3lpakV1TTlvdWlpMCtML1lxc2lseUtEWXJBaVhPSktJbmVpSldJVFlnSGlNR0hmWWM2aC9pR3Q0WjNoam1HL0lXL2hZU0ZTNFVTaGR1RXBJUnZoRHlFQ1lUWGc2ZURlSU5LZ3g2RDhvTElncCtDZDRKUWdpdUNCNExrZ2NLQm9vR0NnV1NCUjRFc2dSR0IrSURnZ01tQXRJQ2ZnSXlBZW9CcWdGcUFUSUEvZ0RPQUtZQWdnQmlBRVlBTGdBZUFCSUFDZ0FHQUFvQUVnQWVBQzRBUmdCaUFJSUFwZ0RPQVA0Qk1nRnFBYW9CNmdJeUFuNEMwZ01tQTRJRDRnQkdCTElGSGdXU0Jnb0dpZ2NLQjVJRUhnaXVDVUlKM2dwK0N5SUx5Z2g2RFNvTjRnNmVEMTRNSmhEeUViNFNraE51RUVvVkxoWVNGdjRYOGhUbUdkNGEzaHZpR09vZDloOEdIQjRoTmlKV0kzb2dvaVhPSndJa05pbHlLcklyOWlrK0xvb3YyaTB1TW9vejZqRktOckkwSGptT093STRmajM2UDNvOUFrS0tRQnBGcmtkQ1JONUtma2dpVGNwUGRrMG1VdHBRbGxaU1ZCSloxbHVlV1c1ZlBsMFNZdTVneW1hcVpJNXFlbWhtYmxac1NuSkNjRDUyUG5SQ2VrcDRWbjVtZkhxQ2pvQ3Foc2FFNm9zT2lUYVBZbzJTazhhUi9wUTJtbmFZdHA3Nm5VS2pqcUhlcERLcWhxamVyenF0bXJQK3NtSzB5cnMydWFhOEdzS093UWJIZ3NZQ3lJTFBCczJPMEJyV3B0VTIyOHJhWHR6MjQ1TGlNdVRTNjNicUd1ekM4Mjd5SHZUTys0TDZOdnp2QTZzQ1p3VW5DK2NLcXcxekVEc1hCeFhUR0tNZmN4NUhJUjhuOXliUEthc3Npek5yTWs4MU16Z1hQdjg5NjBEVFI4TkdzMG1qVEpkVGkxSi9WWGRZYjE5clhtZGhaMlJuYTJkcVoyMXJjSE4zZDNaL2VZZDhrNE9mZ3F1RnQ0akhqOWVPNjVIN2xRK1lJNTgzbmsraFo2Ui9xNWVxcjYzTHNPZTBBN3NmdWp1OVY4QjN4NWZHdDhuWHpQZlFGOWM3MWx2WmY5eWY0OFBpNStZTDZTdnNUL056OHBmMXUvamYvQVFDQUFBSUFRQUFEQU1BQUJBQWdBQVVBb0FBR0FHQUFCd0RnQUFnQUVBQUpBSkFBQ2dCUUFBc0EwQUFNQURBQURRQ3dBQTRBY0FBUEFQQUFFUUNJQUJJQVNBQVRBTWdBRkFBb0FCVUFxQUFXQUdnQUZ3RG9BQmtBbUFBYUFGZ0FHd0RZQUJ3QU9BQWRBTGdBSGdCNEFCOEErQUFoQUlRQUlnQkVBQ01BeEFBbEFLUUFKZ0JrQUNjQTVBQXBBSlFBS2dCVUFDc0ExQUFzQURRQUxRQzBBQzRBZEFBdkFQUUFNUUNNQURJQVRBQXpBTXdBTlFDc0FEWUFiQUEzQU93QU9RQ2NBRG9BWEFBN0FOd0FQUUM4QUQ0QWZBQS9BUHdBUVFDQ0FFTUF3Z0JGQUtJQVJnQmlBRWNBNGdCSkFKSUFTZ0JTQUVzQTBnQk5BTElBVGdCeUFFOEE4Z0JSQUlvQVV3REtBRlVBcWdCV0FHb0FWd0RxQUZrQW1nQmJBTm9BWFFDNkFGNEFlZ0JmQVBvQVlRQ0dBR01BeGdCbEFLWUFad0RtQUdrQWxnQnJBTllBYlFDMkFHNEFkZ0J2QVBZQWNRQ09BSE1BemdCMUFLNEFkd0R1QUhrQW5nQjdBTjRBZlFDK0FIOEEvZ0NEQU1FQWhRQ2hBSWNBNFFDSkFKRUFpd0RSQUkwQXNRQ1BBUEVBa3dESkFKVUFxUUNYQU9rQW13RFpBSjBBdVFDZkFQa0Fvd0RGQUtjQTVRQ3JBTlVBclFDMUFLOEE5UUN6QU0wQXR3RHRBTHNBM1FDL0FQMEF4d0RqQU1zQTB3RFBBUE1BMXdEckFOOEErd0R2QVBjQUFRQkFBQUlBSUFBREFHQUFCQUFRQUFVQVVBQUdBREFBQndCd0FBa0FTQUFLQUNnQUN3Qm9BQXdBR0FBTkFGZ0FEZ0E0QUE4QWVBQVJBRVFBRWdBa0FCTUFaQUFWQUZRQUZnQTBBQmNBZEFBWkFFd0FHZ0FzQUJzQWJBQWRBRndBSGdBOEFCOEFmQUFoQUVJQUl3QmlBQ1VBVWdBbUFESUFKd0J5QUNrQVNnQXJBR29BTFFCYUFDNEFPZ0F2QUhvQU1RQkdBRE1BWmdBMUFGWUFOd0IyQURrQVRnQTdBRzRBUFFCZUFEOEFmZ0JEQUdFQVJRQlJBRWNBY1FCTEFHa0FUUUJaQUU4QWVRQlRBR1VBVndCMUFGc0FiUUJmQUgwQVp3QnpBRzhBZXdBRkFFR01Id3NCQVFCQnBCOExEZ0VBQUFBQkFBQUE2QkVBQUFBRUFFRzhId3NCQVFCQnl4OExCUXIvLy8vL0FFR1FJQXZNQTRBUEFBQVlBQlVBR0FBNUFEQUFPUUFJQUFRQUF3QU9BQWNBQlFBbEFDQUFKUUJrQUZBQVpBQlNBRTRBVWdBZEFRUUJIUUVHQUFNQUFnQUpBQVVBQXdCZUFGNEFYZ0JNQkJvRVRBUUdBQWdBQ2dBTUFBNEFFQUNBQWdBRElBSWdBa0FDUUFKQUFrQUNnQ3lBTEFBdEFDMEFMUUF0QUNTQUl3QWpnQ0lBSW9BaFpHRjBZVnN3WFNBOVBTQjJZV3d3QUcxaGFXNHVZd0J3Y205alpYTnpYMlJoZEdFQVpHRjBZVnN4TURCZElEMDlJSFpoYkRFd01BQmtZWFJoV3pJd01EQmRJRDA5SUhaaGJESXdNREFBY0hKdlkyVnpjMTlrWVhSaE9pQmtZWFJoSUQwOUlFNVZURXdnQUdSaGRHRmZiR1Z1WjNSb0lENDlJREFBZDJWaWNuUmpMMk52YlcxdmJsOWhkV1JwYnk5MllXUXZkbUZrWDJacGJIUmxjbUpoYm1zdVl3QlhaV0pTZEdOV1lXUmZRMkZzWTNWc1lYUmxSbVZoZEhWeVpYTUFaR0YwWVY5c1pXNW5kR2dnUEQwZ01qUXdBR1JoZEdGZmFXNGdJVDBnVGxWTVRBQk1iMmRQWmtWdVpYSm5lUUJrWVhSaFgyeGxibWQwYUNBK0lEQUFZMmhoYm01bGJDQThJR3RPZFcxRGFHRnVibVZzY3dCM1pXSnlkR012WTI5dGJXOXVYMkYxWkdsdkwzWmhaQzkyWVdSZmMzQXVZd0JYWldKU2RHTldZV1JmUm1sdVpFMXBibWx0ZFcwPSI7SS5yZWFkeT1uZXcgUHJvbWlzZShmdW5jdGlvbihhLGIpe0c9YTt9KTt2YXIgSyxMPXt9O2ZvcihLIGluIEkpSS5oYXNPd25Qcm9wZXJ0eShLKSYmKExbS109SVtLXSk7SS5hcmd1bWVudHM9W10sSS50aGlzUHJvZ3JhbT0iLi90aGlzLnByb2dyYW0iLEkucXVpdD1mdW5jdGlvbihhLGIpe3Rocm93IGJ9LEkucHJlUnVuPVtdLEkucG9zdFJ1bj1bXTt2YXIgTT0hMSxOPSExLE89ITEsUD0hMTtpZihNPSJvYmplY3QiPT10eXBlb2Ygd2luZG93LE49ImZ1bmN0aW9uIj09dHlwZW9mIGltcG9ydFNjcmlwdHMsUD0ib2JqZWN0Ij09dHlwZW9mIHByb2Nlc3MmJiJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlLE89UCYmIU0mJiFOLE8pezE8cHJvY2Vzcy5hcmd2Lmxlbmd0aCYmKEkudGhpc1Byb2dyYW09cHJvY2Vzcy5hcmd2WzFdLnJlcGxhY2UoL1xcL2csIi8iKSksSS5hcmd1bWVudHM9cHJvY2Vzcy5hcmd2LnNsaWNlKDIpLCJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiYobW9kdWxlLmV4cG9ydHM9SSkscHJvY2Vzcy5vbigidW5jYXVnaHRFeGNlcHRpb24iLGZ1bmN0aW9uKGEpe2lmKCEoYSBpbnN0YW5jZW9mIEMpKXRocm93IGF9KSxwcm9jZXNzLm9uKCJ1bmhhbmRsZWRSZWplY3Rpb24iLEYpLEkucXVpdD1mdW5jdGlvbihhKXtwcm9jZXNzLmV4aXQoYSk7fSxJLmluc3BlY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gIltFbXNjcmlwdGVuIE1vZHVsZSBvYmplY3RdIn07fWVsc2UgaWYoTXx8TilJLnNldFdpbmRvd1RpdGxlPWZ1bmN0aW9uKGEpe2RvY3VtZW50LnRpdGxlPWE7fTtlbHNlO3ZhciBRPUkucHJpbnR8fCgidW5kZWZpbmVkIj09dHlwZW9mIGNvbnNvbGU/InVuZGVmaW5lZCI9PXR5cGVvZiBwcmludD9udWxsOnByaW50OmNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkpLFI9SS5wcmludEVycnx8KCJ1bmRlZmluZWQiPT10eXBlb2YgcHJpbnRFcnI/InVuZGVmaW5lZCIhPXR5cGVvZiBjb25zb2xlJiZjb25zb2xlLndhcm4uYmluZChjb25zb2xlKXx8UTpwcmludEVycik7Zm9yKEsgaW4gTClMLmhhc093blByb3BlcnR5KEspJiYoSVtLXT1MW0tdKTtMPXZvaWQgMDt2YXIgUz17ImY2NC1yZW0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGElYn0sZGVidWdnZXI6ZnVuY3Rpb24oKXtkZWJ1Z2dlcn19LFY9MCxXPWZ1bmN0aW9uKCl7cmV0dXJuIFZ9OyJvYmplY3QiIT10eXBlb2YgV2ViQXNzZW1ibHkmJlIoIm5vIG5hdGl2ZSB3YXNtIHN1cHBvcnQgZGV0ZWN0ZWQiKTt2YXIgWCxaLCQsXyxjYSxnYT0hMSxpYT0idW5kZWZpbmVkIj09dHlwZW9mIFRleHREZWNvZGVyP3ZvaWQgMDpuZXcgVGV4dERlY29kZXIoInV0ZjgiKTsidW5kZWZpbmVkIj09dHlwZW9mIFRleHREZWNvZGVyP3ZvaWQgMDpuZXcgVGV4dERlY29kZXIoInV0Zi0xNmxlIik7dmFyIGthPTY1NTM2LGxhPTczMjgsbWE9NTI0Mjg4MCxuYT1JLlRPVEFMX01FTU9SWXx8MTY3NzcyMTY7bmE8bWEmJlIoIlRPVEFMX01FTU9SWSBzaG91bGQgYmUgbGFyZ2VyIHRoYW4gVE9UQUxfU1RBQ0ssIHdhcyAiK25hKyIhIChUT1RBTF9TVEFDSz0iK21hKyIpIiksSS5idWZmZXI/Wj1JLmJ1ZmZlcjoib2JqZWN0Ij09dHlwZW9mIFdlYkFzc2VtYmx5JiYiZnVuY3Rpb24iPT10eXBlb2YgV2ViQXNzZW1ibHkuTWVtb3J5PyhYPW5ldyBXZWJBc3NlbWJseS5NZW1vcnkoe2luaXRpYWw6bmEva2EsbWF4aW11bTpuYS9rYX0pLFo9WC5idWZmZXIpOlo9bmV3IEFycmF5QnVmZmVyKG5hKSxsKCksY2FbbGE+PjJdPTUyNTAyNDA7dmFyIG9hPVtdLHBhPVtdLHFhPVtdLHJhPVtdLE9hPTAsUWE9bnVsbDtJLnByZWxvYWRlZEltYWdlcz17fSxJLnByZWxvYWRlZEF1ZGlvcz17fTsoKGZ1bmN0aW9uKGEpe3JldHVybiAwPT09YS5pbmRleE9mKCJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsIil9KSkoSil8fEYoIndhc21CaW5hcnlGaWxlIGhhcyB0byBiZSBhIGRhdGEtVVJJIiksSS5hc209ZnVuY3Rpb24oYSxiKXtiLm1lbW9yeT1YLGIudGFibGU9bmV3IFdlYkFzc2VtYmx5LlRhYmxlKHtpbml0aWFsOjMyLG1heGltdW06MzIsZWxlbWVudDoiYW55ZnVuYyJ9KSxiLl9fbWVtb3J5X2Jhc2U9MTAyNCxiLl9fdGFibGVfYmFzZT0wO3ZhciBjPXcoYik7cmV0dXJuIGN9O3ZhciBTYT17YnVmZmVyczpbbnVsbCxbXSxbXV0scHJpbnRDaGFyOmZ1bmN0aW9uKGEsYil7dmFyIGM9U2EuYnVmZmVyc1thXTswPT09Ynx8MTA9PT1iPygoMT09PWE/UTpSKShlKGMsMCkpLGMubGVuZ3RoPTApOmMucHVzaChiKTt9LHZhcmFyZ3M6MCxnZXQ6ZnVuY3Rpb24oKXtTYS52YXJhcmdzKz00O3ZhciBhPWNhW1NhLnZhcmFyZ3MtND4+Ml07cmV0dXJuIGF9LGdldFN0cjpmdW5jdGlvbigpe3ZhciBhPWYoU2EuZ2V0KCkpO3JldHVybiBhfSxnZXQ2NDpmdW5jdGlvbigpe3ZhciBhPVNhLmdldCgpO1NhLmdldCgpO3JldHVybiBhfSxnZXRaZXJvOmZ1bmN0aW9uKCl7U2EuZ2V0KCk7fX0sVGE9SS5hc20oe30se2Fib3J0OkYsc2V0VGVtcFJldDA6ZnVuY3Rpb24oYSl7Vj1hO30sZ2V0VGVtcFJldDA6VyxfX19hc3NlcnRfZmFpbDpmdW5jdGlvbihhLGIsYyxkKXtGKCJBc3NlcnRpb24gZmFpbGVkOiAiK2YoYSkrIiwgYXQ6ICIrW2I/ZihiKToidW5rbm93biBmaWxlbmFtZSIsYyxkP2YoZCk6InVua25vd24gZnVuY3Rpb24iXSk7fSxfX19zZXRFcnJObzpBLF9fX3N5c2NhbGwxNDA6ZnVuY3Rpb24oYSxiKXtTYS52YXJhcmdzPWI7dHJ5e3ZhciBjPVNhLmdldFN0cmVhbUZyb21GRCgpLGQ9U2EuZ2V0KCksZT1TYS5nZXQoKSxmPVNhLmdldCgpLGc9U2EuZ2V0KCk7cmV0dXJuIDB9Y2F0Y2goYSl7cmV0dXJuICJ1bmRlZmluZWQiIT10eXBlb2YgRlMmJmEgaW5zdGFuY2VvZiBGUy5FcnJub0Vycm9yfHxGKGEpLC1hLmVycm5vfX0sX19fc3lzY2FsbDE0Njp4LF9fX3N5c2NhbGw1NDpmdW5jdGlvbihhLGIpe1NhLnZhcmFyZ3M9Yjt0cnl7cmV0dXJuIDB9Y2F0Y2goYSl7cmV0dXJuICJ1bmRlZmluZWQiIT10eXBlb2YgRlMmJmEgaW5zdGFuY2VvZiBGUy5FcnJub0Vycm9yfHxGKGEpLC1hLmVycm5vfX0sX19fc3lzY2FsbDY6ZnVuY3Rpb24oYSxiKXtTYS52YXJhcmdzPWI7dHJ5e1NhLmdldFN0cmVhbUZyb21GRCgpO3JldHVybiAwfWNhdGNoKGEpe3JldHVybiAidW5kZWZpbmVkIiE9dHlwZW9mIEZTJiZhIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcnx8RihhKSwtYS5lcnJub319LF9lbXNjcmlwdGVuX2dldF9oZWFwX3NpemU6eSxfZW1zY3JpcHRlbl9tZW1jcHlfYmlnOnosX2Vtc2NyaXB0ZW5fcmVzaXplX2hlYXA6ZnVuY3Rpb24oYSl7QigpO30sYWJvcnRPbkNhbm5vdEdyb3dNZW1vcnk6QixmbHVzaF9OT19GSUxFU1lTVEVNOmZ1bmN0aW9uKCl7dmFyIGE9SS5fZmZsdXNoO2EmJmEoMCk7dmFyIGI9U2EuYnVmZmVycztiWzFdLmxlbmd0aCYmU2EucHJpbnRDaGFyKDEsMTApLGJbMl0ubGVuZ3RoJiZTYS5wcmludENoYXIoMiwxMCk7fSx0ZW1wRG91YmxlUHRyOjczNDQsRFlOQU1JQ1RPUF9QVFI6bGF9LFopO0kuYXNtPVRhO0kuX19fZXJybm9fbG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uX19fZXJybm9fbG9jYXRpb24uYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLl9mcmVlPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLl9mcmVlLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5fbWFpbj1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fbWFpbi5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuX21hbGxvYz1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fbWFsbG9jLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5fbWVtY3B5PWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLl9tZW1jcHkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLl9tZW1zZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uX21lbXNldC5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuX3Byb2Nlc3NfZGF0YT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fcHJvY2Vzc19kYXRhLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5fc2Jyaz1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fc2Jyay5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuX3NldG1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uX3NldG1vZGUuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLmVzdGFibGlzaFN0YWNrU3BhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uZXN0YWJsaXNoU3RhY2tTcGFjZS5hcHBseShudWxsLGFyZ3VtZW50cyl9O3ZhciBjYj1JLnN0YWNrQWxsb2M9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uc3RhY2tBbGxvYy5hcHBseShudWxsLGFyZ3VtZW50cyl9LGRiPUkuc3RhY2tSZXN0b3JlPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLnN0YWNrUmVzdG9yZS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGViPUkuc3RhY2tTYXZlPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLnN0YWNrU2F2ZS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9paT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5keW5DYWxsX2lpaT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9paWlpPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfaWlpaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9paWlpaWlpaT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpaWlpaWlpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5keW5DYWxsX2lpaWlpaWlpaT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpaWlpaWlpaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9qaWppPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfamlqaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF92PWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfdi5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF92aT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX3ZpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5keW5DYWxsX3ZpaWlpaWlpPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfdmlpaWlpaWkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLmFzbT1UYSxJLmNjYWxsPWQsSS5jd3JhcD1mdW5jdGlvbihhLGIsZSxmKXtlPWV8fFtdO3ZhciBnPWUuZXZlcnkoZnVuY3Rpb24oYSl7cmV0dXJuICJudW1iZXIiPT09YX0pO3JldHVybiAic3RyaW5nIiE9PWImJmcmJiFmP2MoYSk6ZnVuY3Rpb24oKXtyZXR1cm4gZChhLGIsZSxhcmd1bWVudHMpfX0sQy5wcm90b3R5cGU9bmV3IEVycm9yLEMucHJvdG90eXBlLmNvbnN0cnVjdG9yPUM7UWE9ZnVuY3Rpb24gYSgpe0kuY2FsbGVkUnVufHxEKCksSS5jYWxsZWRSdW58fChRYT1hKTt9LEkuY2FsbE1haW49ZnVuY3Rpb24oYSl7YT1hfHxbXTt2YXIgYj1hLmxlbmd0aCsxLGM9Y2IoNCooYisxKSk7Y2FbYz4+Ml09aihJLnRoaXNQcm9ncmFtKTtmb3IodmFyIGQ9MTtkPGI7ZCsrKWNhWyhjPj4yKStkXT1qKGFbZC0xXSk7Y2FbKGM+PjIpK2JdPTA7dHJ5e3ZhciBlPUkuX21haW4oYixjLDApO0UoZSwhMCk7fWNhdGNoKGEpe2lmKGEgaW5zdGFuY2VvZiBDKXJldHVybjtpZigiU2ltdWxhdGVJbmZpbml0ZUxvb3AiPT1hKXJldHVybiB2b2lkKEkubm9FeGl0UnVudGltZT0hMCk7dmFyIGY9YTthJiYib2JqZWN0Ij09dHlwZW9mIGEmJmEuc3RhY2smJihmPVthLGEuc3RhY2tdKSxSKCJleGNlcHRpb24gdGhyb3duOiAiK2YpLEkucXVpdCgxLGEpO31maW5hbGx5e319LEkucnVuPUQ7aWYoSS5hYm9ydD1GLEkucHJlSW5pdClmb3IoImZ1bmN0aW9uIj09dHlwZW9mIEkucHJlSW5pdCYmKEkucHJlSW5pdD1bSS5wcmVJbml0XSk7MDxJLnByZUluaXQubGVuZ3RoOylJLnByZUluaXQucG9wKCkoKTt2YXIgb2I9ITA7cmV0dXJuIEkubm9Jbml0aWFsUnVuJiYob2I9ITEpLEkubm9FeGl0UnVudGltZT0hMCxEKCksYS5yZWFkeX19KCk7CgogIC8vV2ViUlRDIFZBRCBJbnRlcmZhY2UgZm9yIFNFUElBIFdlYi1BdWRpbyBQcm9jZXNzb3INCiAgZnVuY3Rpb24gV2ViUnRjVm9pY2VBY3Rpdml0eURldGVjdG9yIChvcHRpb25zLCBpbml0Q2FsbGJhY2spIHsNCiAgCXRoaXMudmFkTW9kdWxlID0ge307DQogIAl0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9Ow0KICAJDQogIAl2YXIgb25QcmludCA9IHRoaXMub3B0aW9ucy5vbkluZm8gfHwgdGhpcy5vcHRpb25zLm9uUHJpbnQgfHwgZnVuY3Rpb24odGV4dCl7IGNvbnNvbGUubG9nKCJWQUQgcHJpbnQiLCB0ZXh0KTsgfTsNCiAgCXZhciBvbkVycm9yID0gdGhpcy5vcHRpb25zLm9uRXJyb3IgfHwgdGhpcy5vcHRpb25zLm9uUHJpbnRFcnIgfHwgZnVuY3Rpb24odGV4dCl7IGNvbnNvbGUuZXJyb3IoIlZBRCBwcmludEVyciIsIHRleHQpOyB9Ow0KICAJdmFyIG9uU3RhdHVzID0gdGhpcy5vcHRpb25zLm9uU3RhdHVzTWVzc2FnZSB8fCB0aGlzLm9wdGlvbnMub25TZXRTdGF0dXMgfHwgZnVuY3Rpb24odGV4dCl7IGNvbnNvbGUubG9nKCJWQUQgc2V0U3RhdHVzIiwgdGV4dCk7IH07DQogIAl2YXIgdmFkTW9kZSA9ICh0aGlzLm9wdGlvbnMubW9kZSAhPSB1bmRlZmluZWQpPyB0aGlzLm9wdGlvbnMubW9kZSA6IDM7CS8vbW9kZXM6IDA9UXVhbGl0eSBtb2RlLCAxPUxvdyBiaXRyYXRlIG1vZGUsIDI9QWdncmVzc2l2ZSBtb2RlLCAzPVZlcnkgYWdncmVzc2l2ZSBtb2RlDQoNCiAgCWNvbnN0IHNlbGYgPSB0aGlzOw0KICAJV2ViUnRjVmFkKHsNCiAgCQlwcmVSdW46IFtdLA0KICAJCXBvc3RSdW46IFtdLA0KICAJCXByaW50OiBmdW5jdGlvbih0ZXh0KXsNCiAgCQkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB0ZXh0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5qb2luKCcgJyk7DQogIAkJCW9uUHJpbnQodGV4dCk7DQogIAkJfSwNCiAgCQlwcmludEVycjogZnVuY3Rpb24odGV4dCl7DQogIAkJCWlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgdGV4dCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuam9pbignICcpOw0KICAJCQlvbkVycm9yKHRleHQpOw0KICAJCX0sDQogIAkJc2V0U3RhdHVzOiBmdW5jdGlvbih0ZXh0KXsNCiAgCQkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB0ZXh0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5qb2luKCcgJyk7DQogIAkJCW9uU3RhdHVzKHRleHQpOw0KICAJCX0sDQogIAkJdG90YWxEZXBlbmRlbmNpZXM6IDAsDQogIAkJbW9uaXRvclJ1bkRlcGVuZGVuY2llczogZnVuY3Rpb24obGVmdCl7DQogIAkJCXRoaXMudG90YWxEZXBlbmRlbmNpZXMgPSBNYXRoLm1heCh0aGlzLnRvdGFsRGVwZW5kZW5jaWVzLCBsZWZ0KTsNCiAgCQkJdGhpcy5zZXRTdGF0dXMobGVmdCA/ICdQcmVwYXJpbmcuLi4gKCcgKyAodGhpcy50b3RhbERlcGVuZGVuY2llcyAtIGxlZnQpICsgJy8nICsgdGhpcy50b3RhbERlcGVuZGVuY2llcyArICcpJyA6ICdBbGwgZG93bmxvYWRzIGNvbXBsZXRlLicpOw0KICAJCX0sDQogIAkJbm9Jbml0aWFsUnVuOiB0cnVlDQogIAl9KQ0KICAJLnRoZW4oZnVuY3Rpb24oTW9kdWxlKXsNCiAgCQl2YXIgVmFkID0gew0KICAJCQl3YXNtTW9kdWxlOiBNb2R1bGUNCiAgCQkJLy9zZXRNb2RlOiAuLi4sDQogIAkJCS8vZ2V0TW9kZTogLi4uLA0KICAJCQkvL3Byb2Nlc3M6IC4uLg0KICAJCX07DQogIAkJDQogIAkJLy9zZXR1cA0KICAJCQ0KICAJCXZhciBtYWluID0gTW9kdWxlLmN3cmFwKCdtYWluJyk7DQogIAkJaWYgKG1haW4oKSAhPSAxKXsNCiAgCQkJb25FcnJvcigiVkFEICdtYWluJyBlcnJvciIpOw0KICAJCQl0aHJvdyB7bmFtZTogIlZhZE1vZHVsZUVycm9yIiwgbWVzc2FnZTogIkZhaWxlZCB0byBpbml0aWFsaXplIHZpYSAnbWFpbigpJyJ9Ow0KICAJCX0NCg0KICAJCVZhZC5zZXRNb2RlID0gTW9kdWxlLmN3cmFwKCdzZXRtb2RlJywgJ251bWJlcicsIFsnbnVtYmVyJ10pOw0KICAJCVZhZC5nZXRNb2RlID0gZnVuY3Rpb24oKXsgcmV0dXJuIHZhZE1vZGU7IH07DQogIAkJDQogIAkJaWYgKFZhZC5zZXRNb2RlKHZhZE1vZGUpICE9IDApew0KICAJCQlvbkVycm9yKCJWQUQgJ3NldE1vZGUnIGVycm9yIik7DQogIAkJCXRocm93IHtuYW1lOiAiVmFkTW9kdWxlRXJyb3IiLCBtZXNzYWdlOiAiRmFpbGVkIHRvIHNldCBtb2RlIn07DQogIAkJfQ0KICAJCW9uUHJpbnQoIlZBRCBtb2RlOiAiICsgdmFkTW9kZSk7DQogIAkJDQogIAkJVmFkLnByb2Nlc3MgPSBNb2R1bGUuY3dyYXAoJ3Byb2Nlc3NfZGF0YScsICdudW1iZXInLCBbJ251bWJlcicsICdudW1iZXInLCAnbnVtYmVyJywgJ251bWJlcicsICdudW1iZXInLCAnbnVtYmVyJ10pOw0KICAJCS8vYXJndW1lbnRzOiAoZGF0YUhlYXAuYnl0ZU9mZnNldCwgc2FtcGxlTGVuZ3RoLCBzYW1wbGVSYXRlLCBzYW1wbGVzWzBdLCBzYW1wbGVzWzEwMF0sIHNhbXBsZXNbMjAwMF0pDQogIAkJLy9yZXF1aXJlbWVudHMgZm9yIHNhbXBsZVJhdGU6IDgwMDAsIDE2MDAwLCAzMjAwMCwgNDgwMDAgLSBzYW1wbGVMZW5ndGg6IHNhbXBsZVJhdGUvMTAwMCAqICgxMHwyMHwzMCkgPT4gNDhrIC0gNDgwLCA5NjAsIDE0NDAgOyAxNmsgLSAxNjAsIDMyMCwgNDgwIDsgDQogIAkJDQogIAkJVmFkLmdldFZvaWNlQWN0aXZpdHkgPSBmdW5jdGlvbihzYW1wbGVSYXRlLCBzYW1wbGVzSW50MTYpew0KICAJCQkvL0dldCBkYXRhIGJ5dGUgc2l6ZSwgYWxsb2NhdGUgbWVtb3J5IG9uIEVtc2NyaXB0ZW4gaGVhcCwgYW5kIGdldCBwb2ludGVyDQogIAkJCWxldCBuRGF0YUJ5dGVzID0gc2FtcGxlc0ludDE2Lmxlbmd0aCAqIHNhbXBsZXNJbnQxNi5CWVRFU19QRVJfRUxFTUVOVDsNCiAgCQkJbGV0IGRhdGFQdHIgPSBNb2R1bGUuX21hbGxvYyhuRGF0YUJ5dGVzKTsNCg0KICAJCQkvL0NvcHkgZGF0YSB0byBFbXNjcmlwdGVuIGhlYXAgKGRpcmVjdGx5IGFjY2Vzc2VkIGZyb20gTW9kdWxlLkhFQVBVOCkNCiAgCQkJbGV0IGRhdGFIZWFwID0gbmV3IFVpbnQ4QXJyYXkoTW9kdWxlLkhFQVBVOC5idWZmZXIsIGRhdGFQdHIsIG5EYXRhQnl0ZXMpOw0KICAJCQlkYXRhSGVhcC5zZXQobmV3IFVpbnQ4QXJyYXkoc2FtcGxlc0ludDE2LmJ1ZmZlcikpOw0KDQogIAkJCS8vQ2FsbCBmdW5jdGlvbiBhbmQgZ2V0IHJlc3VsdA0KICAJCQlsZXQgcmVzdWx0ID0gVmFkLnByb2Nlc3MoZGF0YUhlYXAuYnl0ZU9mZnNldCwgc2FtcGxlc0ludDE2Lmxlbmd0aCwgc2FtcGxlUmF0ZSwgDQogIAkJCQlzYW1wbGVzSW50MTZbMF0sIHNhbXBsZXNJbnQxNlsxMDBdLCBzYW1wbGVzSW50MTZbMjAwMF0pOw0KDQogIAkJCS8vRnJlZSBtZW1vcnkNCiAgCQkJTW9kdWxlLl9mcmVlKGRhdGFIZWFwLmJ5dGVPZmZzZXQpOw0KICAJCQlyZXR1cm4gcmVzdWx0OwkJLy8tMTogRVJST1IsIDA6IE5vIGFjdGl2ZSBzcGVlY2gsIDE6IEFjdGl2ZSBzcGVlY2gJKGNvcmUgZnVuY3Rpb24gZ2l2ZXMgMS02IGJ1dCBvdXRwdXQgaGVyZSBpcyAxIGZvciBhbGwpDQogIAkJfTsNCiAgCQkNCiAgCQlyZXR1cm4gVmFkOw0KICAJfSkNCiAgCS50aGVuKGZ1bmN0aW9uKHZhZCl7DQogIAkJc2VsZi52YWRNb2R1bGUgPSB2YWQ7DQogIAkJaWYgKGluaXRDYWxsYmFjaykgaW5pdENhbGxiYWNrKHNlbGYudmFkTW9kdWxlKTsNCiAgCX0pOw0KICAJLy9Nb2R1bGUuc2V0U3RhdHVzKCdEb3dubG9hZGluZy4uLicpOw0KICB9CgogIC8vaW1wb3J0ICcuL3NoYXJlZC9tZXlkYS5taW4uY29tcHJlc3NlZC5qcyc7CS8vd2UgaW1wb3J0IHRoaXMgb24gZGVtYW5kIGJlbG93DQoNCiAgdmFyIHZhZE1vZHVsZTsNCg0KICBvbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7DQogICAgICAvL0F1ZGlvIHdvcmtlciBpbnRlcmZhY2UNCiAgCS8vY29uc29sZS5sb2coIldlYlJ0Y1ZhZFdvcmtlciBvbm1lc3NhZ2UiLCBlLmRhdGEpOwkJLy9ERUJVRw0KICAJaWYgKGUuZGF0YS5jdHJsKXsNCiAgCQlzd2l0Y2ggKGUuZGF0YS5jdHJsLmFjdGlvbil7DQogIAkJCWNhc2UgImNvbnN0cnVjdCI6DQogIAkJCQljb25zdHJ1Y3RXb3JrZXIoZS5kYXRhLmN0cmwub3B0aW9ucyk7DQogIAkJCQlicmVhazsNCiAgCQkJY2FzZSAicHJvY2VzcyI6DQogIAkJCQlwcm9jZXNzJDEoZS5kYXRhLmN0cmwuZGF0YSk7DQogIAkJCQlicmVhazsNCiAgCQkJY2FzZSAiaGFuZGxlIjoNCiAgCQkJCWhhbmRsZUV2ZW50KGUuZGF0YS5jdHJsLmRhdGEpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0YXJ0IjoNCiAgCQkJCXN0YXJ0KGUuZGF0YS5jdHJsLm9wdGlvbnMpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0b3AiOg0KICAJCQkJc3RvcChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZXNldCI6DQogIAkJCQlyZXNldChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZWxlYXNlIjoNCiAgCQkJY2FzZSAiY2xvc2UiOg0KICAJCQkJcmVsZWFzZShlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQlkZWZhdWx0Og0KICAJCQkJY29uc29sZS5sb2coIlVua25vd24gY29udHJvbCBtZXNzYWdlOiIsIGUuZGF0YSk7DQogIAkJCQlicmVhazsNCiAgCQl9DQogIAl9DQogIH07DQoNCiAgbGV0IHdvcmtlcklkID0gIndlYnJ0Yy12YWQtd29ya2VyLSIgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKSArICItIiArIERhdGUubm93KCk7DQogIGxldCBkb0RlYnVnID0gZmFsc2U7DQogIGxldCB3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IGZhbHNlOw0KICAvL2xldCBpc1JlYWR5Rm9yUHJvY2Vzc2luZyA9IGZhbHNlOwkJLy9UT0RPOiBpbXBsZW1lbnQNCg0KICBsZXQgaW5wdXRTYW1wbGVSYXRlOw0KICBsZXQgY2hhbm5lbENvdW50Ow0KICBsZXQgaW5wdXRTYW1wbGVTaXplOw0KICBsZXQgcHJvY2Vzc0J1ZmZlclNpemU7CS8vZGVmaW5lcyAnX3Byb2Nlc3NSaW5nQnVmZmVyJyBzaXplIHRvZ2V0aGVyIHdpdGggJ2lucHV0U2FtcGxlU2l6ZScNCiAgbGV0IHZhZE1vZGU7DQogIGxldCBpc0Zsb2F0MzJJbnB1dDsJCS8vZGVmYXVsdCBmYWxzZQ0KDQogIGxldCB2b2ljZUVuZXJneTsNCiAgbGV0IHZvaWNlRW5lcmd5Q2FwID0gNTA7DQogIGxldCB2b2ljZUVuZXJneURyb3BSYXRlID0gMjsNCiAgbGV0IF9zYW1wbGVzVG9UaW1lTXNGYWN0b3I7DQoNCiAgbGV0IG1leWRhQW5hbHl6ZXI7DQoNCiAgbGV0IF9wcm9jZXNzUmluZ0J1ZmZlcjsJCS8vaG9sZHMgbXVsdGlwbGUgdmFkRnJhbWVzDQogIGxldCBfdmFkRnJhbWVzOwkJCQkvL2VhY2ggZnJhbWUgcHJvY2Vzc2VzIG9uZSBjaHVuayBvZiAnX3ZhZEJ1ZmZlclNpemUnIGFzIGxvbmcgYXMgJ19wcm9jZXNzUmluZ0J1ZmZlcicgaGFzIGVub3VnaCBzYW1wbGVzDQogIGxldCBfdmFkRnJhbWVUaW1lTXM7CQkvL3JlYWwgdGltZSAobXMpIG9mIG9uZSB2YWRGcmFtZSAoZGVmaW5lZCBieSBzYW1wbGUtcmF0ZSBhbmQgYnVmZmVyIHNpemUpDQogIGxldCBfdmFkQnVmZmVyU2l6ZTsJCQkvL3NpemUgb2YgYSBzaW5nbGUgdmFkRnJhbWUgKHJlc3RyaWN0aW9ucyBhcHBseSkNCiAgbGV0IF92YWRCdWZmZXI7DQogIGxldCBfaW50MTZJbnB1dEJ1ZmZlcjsJCS8vdXNlZCBvbmx5IGlmIGlucHV0IGlzIGZsb2F0MzINCg0KICAvL3NlcXVlbmNlIGNvbnRyb2wNCiAgbGV0IHVzZVNlcXVlbmNlQW5hbHl6ZXIgPSBmYWxzZTsNCiAgbGV0IHZvaWNlQWN0aXZhdGlvblRpbWU7DQogIGxldCB2b2ljZVJlc2V0VGltZTsNCiAgbGV0IHNpbGVuY2VBY3RpdmF0aW9uVGltZTsNCiAgbGV0IG1heFNlcXVlbmNlVGltZTsNCiAgbGV0IG1pblNlcXVlbmNlVGltZTsNCg0KICBsZXQgX3NlcXVlbmNlVm9pY2VUaW1lOw0KICBsZXQgX3NlcXVlbmNlU2lsZW5jZVRpbWU7DQogIGxldCBfc2VxdWVuY2VTYXdWb2ljZSwgX3NlcXVlbmNlU2F3U2lsZW5jZUFmdGVyVm9pY2UsIF9zZXF1ZW5jZUZpbmlzaGVkVm9pY2U7DQogIGxldCBfc2VxdWVuY2VJc0FjdGl2ZSwgX3NlcXVlbmNlSXNEb25lLCBfc2VxdWVuY2VTdGFydGVkQXQ7DQoNCiAgbGV0IF9pc0ZpcnN0VmFsaWRQcm9jZXNzOw0KDQogIGZ1bmN0aW9uIGluaXQoKXsNCiAgCWlmIChpbnB1dFNhbXBsZVNpemUgPiBwcm9jZXNzQnVmZmVyU2l6ZSl7DQogIAkJdGhyb3cgSlNPTi5zdHJpbmdpZnkobmV3IEJ1ZmZlclNpemVFeGNlcHRpb24oIlByb2Nlc3NvciAnYnVmZmVyU2l6ZScgaGFzIHRvIGJlIGJpZ2dlciB0aGFuICdpbnB1dFNhbXBsZVNpemUnISBDdXJyZW50bHk6ICIgKyBpbnB1dFNhbXBsZVNpemUgKyAiID4gIiArIHByb2Nlc3NCdWZmZXJTaXplKSk7DQogIAkJLy9OT1RFOiB0aGlzIG5lZWRzIHRvIGJlIGEgc3RyaW5nIHRvIHNob3cgdXAgaW4gd29ya2VyLm9uZXJyb3IgcHJvcGVybHkgOi0vDQogIAl9DQogIAkvL3JlcXVpcmVtZW50cyBmb3Igc2FtcGxlUmF0ZTogODAwMCwgMTYwMDAsIDMyMDAwLCA0ODAwMCAtIHNhbXBsZUxlbmd0aDogc2FtcGxlUmF0ZS8xMDAwICogKDEwfDIwfDMwKSA9PiA0OGsgLSA0ODAsIDk2MCwgMTQ0MCA7IDE2ayAtIDE2MCwgMzIwLCA0ODA7DQogIAlpZiAoIVs4MDAwLCAxNjAwMCwgMzIwMDAsIDQ4MDAwXS5pbmNsdWRlcyhpbnB1dFNhbXBsZVJhdGUpKXsNCiAgCQl0aHJvdyBKU09OLnN0cmluZ2lmeShuZXcgU2FtcGxlUmF0ZUV4Y2VwdGlvbigiRm9yIHRoaXMgbW9kdWxlIHNhbXBsZS1yYXRlIGhhcyB0byBiZSBvbmUgb2Y6IDgwMDAsIDE2MDAwLCAzMjAwMCwgNDgwMDAiKSk7DQogIAl9DQogIAl2YXIgYWxsb3dlZEJ1ZmZlclNpemVzID0gW2lucHV0U2FtcGxlUmF0ZS8xMDAwICogMzAsIGlucHV0U2FtcGxlUmF0ZS8xMDAwICogMjAsIGlucHV0U2FtcGxlUmF0ZS8xMDAwICogMTBdOwkJLy8xMCwgMjAgYW5kIDMwbXMgZnJhbWVzDQogIAlfdmFkQnVmZmVyU2l6ZSA9IDA7DQogIAlmb3IgKGxldCBpPTA7IGk8YWxsb3dlZEJ1ZmZlclNpemVzLmxlbmd0aDsgaSsrKXsNCiAgCQlpZiAocHJvY2Vzc0J1ZmZlclNpemUgPT0gYWxsb3dlZEJ1ZmZlclNpemVzW2ldIHx8IHByb2Nlc3NCdWZmZXJTaXplICUgYWxsb3dlZEJ1ZmZlclNpemVzW2ldID09IDApew0KICAJCQlfdmFkRnJhbWVzID0gcHJvY2Vzc0J1ZmZlclNpemUgLyBhbGxvd2VkQnVmZmVyU2l6ZXNbaV07DQogIAkJCV92YWRCdWZmZXJTaXplID0gYWxsb3dlZEJ1ZmZlclNpemVzW2ldOw0KICAJCQlicmVhazsNCiAgCQl9DQogIAl9DQogIAlpZiAoX3ZhZEJ1ZmZlclNpemUgPT0gMCl7DQogIAkJdGhyb3cgSlNPTi5zdHJpbmdpZnkobmV3IEJ1ZmZlclNpemVFeGNlcHRpb24oIkZvciBzYW1wbGUtcmF0ZSAnIiArIGlucHV0U2FtcGxlUmF0ZSArICInIHRoZSAnYnVmZmVyU2l6ZScgaGFzIHRvIGJlIGVxdWFsIG9yIGEgbXVsdGlwbGUgb2Y6ICIgKyBhbGxvd2VkQnVmZmVyU2l6ZXMuam9pbigiLCAiKSkpOw0KICAJfQ0KICAJdmFyIHJpbmdCdWZmZXJTaXplID0gcHJvY2Vzc0J1ZmZlclNpemUgKyBpbnB1dFNhbXBsZVNpemU7CQkvL1RPRE86IGNoZWNrIHNpemUgYWdhaW4NCiAgCV9wcm9jZXNzUmluZ0J1ZmZlciA9IG5ldyBSaW5nQnVmZmVyKHJpbmdCdWZmZXJTaXplLCBjaGFubmVsQ291bnQsICJJbnQxNiIpOw0KICAJX3ZhZEJ1ZmZlciA9IFtuZXcgSW50MTZBcnJheShfdmFkQnVmZmVyU2l6ZSldOw0KICAJaWYgKGlzRmxvYXQzMklucHV0KXsNCiAgCQlfaW50MTZJbnB1dEJ1ZmZlciA9IFtuZXcgSW50MTZBcnJheShpbnB1dFNhbXBsZVNpemUpXTsNCiAgCX0NCiAgCQ0KICAJX3NhbXBsZXNUb1RpbWVNc0ZhY3RvciA9IDEwMDAvaW5wdXRTYW1wbGVSYXRlOw0KICAJX3ZhZEZyYW1lVGltZU1zID0gTWF0aC5yb3VuZChfdmFkQnVmZmVyU2l6ZSAqIF9zYW1wbGVzVG9UaW1lTXNGYWN0b3IpOw0KICAJDQogIAlyZXNldFNlcXVlbmNlKCk7DQogIAkNCiAgCV9pc0ZpcnN0VmFsaWRQcm9jZXNzID0gdHJ1ZTsNCiAgfQ0KICBmdW5jdGlvbiByZWFkeSgpew0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiAxLA0KICAJCW1vZHVsZUluZm86IHsNCiAgCQkJbW9kdWxlSWQ6IHdvcmtlcklkLA0KICAJCQlpbnB1dFNhbXBsZVJhdGU6IGlucHV0U2FtcGxlUmF0ZSwNCiAgCQkJY2hhbm5lbENvdW50OiBjaGFubmVsQ291bnQsDQogIAkJCWlucHV0U2FtcGxlU2l6ZTogaW5wdXRTYW1wbGVTaXplLA0KICAJCQlpbnB1dElzRmxvYXQzMjogaXNGbG9hdDMySW5wdXQsDQogIAkJCXByb2Nlc3NCdWZmZXJTaXplOiBwcm9jZXNzQnVmZmVyU2l6ZSwNCiAgCQkJdmFkTW9kZTogdmFkTW9kdWxlLmdldE1vZGUoKSwNCiAgCQkJdmFkRnJhbWVzTWF4OiBfdmFkRnJhbWVzLA0KICAJCQl2YWRCdWZmZXJTaXplOiBfdmFkQnVmZmVyU2l6ZSwNCiAgCQkJdmFkRnJhbWVUaW1lTXM6IF92YWRGcmFtZVRpbWVNcywNCiAgCQkJdm9pY2VFbmVyZ3lDYXA6IHZvaWNlRW5lcmd5Q2FwLA0KICAJCQl2b2ljZUVuZXJneURyb3BSYXRlOiB2b2ljZUVuZXJneURyb3BSYXRlLA0KICAJCQl1c2VTZXF1ZW5jZUFuYWx5emVyOiB1c2VTZXF1ZW5jZUFuYWx5emVyDQogIAkJfQ0KICAJfSk7DQogIH0NCg0KICBmdW5jdGlvbiBjb25zdHJ1Y3RXb3JrZXIob3B0aW9ucykgew0KICAJaWYgKHdhc0NvbnN0cnVjdG9yQ2FsbGVkKXsNCiAgCQljb25zb2xlLmVycm9yKCJWYWRNb2R1bGVFcnJvciAtIENvbnN0cnVjdG9yIHdhcyBjYWxsZWQgdHdpY2UhIDJuZCBjYWxsIHdhcyBpZ25vcmVkIGJ1dCB0aGlzIHNob3VsZCBiZSBmaXhlZCEiLCAiLSIsIHdvcmtlcklkKTsJLy9ERUJVRw0KICAJCXJldHVybjsNCiAgCX1lbHNlIHsNCiAgCQl3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IHRydWU7DQogIAl9DQogIAlkb0RlYnVnID0gb3B0aW9ucy5zZXR1cC5kb0RlYnVnIHx8IGZhbHNlOw0KICAJaW5wdXRTYW1wbGVSYXRlID0gb3B0aW9ucy5zZXR1cC5pbnB1dFNhbXBsZVJhdGUgfHwgb3B0aW9ucy5zZXR1cC5jdHhJbmZvLnRhcmdldFNhbXBsZVJhdGUgfHwgb3B0aW9ucy5zZXR1cC5jdHhJbmZvLnNhbXBsZVJhdGU7DQogIAljaGFubmVsQ291bnQgPSAxOwkvL29wdGlvbnMuc2V0dXAuY2hhbm5lbENvdW50IHx8IDE7CQkvL1RPRE86IG9ubHkgTU9OTyBhdG0NCiAgCWlucHV0U2FtcGxlU2l6ZSA9IG9wdGlvbnMuc2V0dXAuaW5wdXRTYW1wbGVTaXplIHx8IDUxMjsNCiAgCXByb2Nlc3NCdWZmZXJTaXplID0gb3B0aW9ucy5zZXR1cC5idWZmZXJTaXplIHx8IChpbnB1dFNhbXBsZVJhdGUvMTAwMCAqIDMwICogMik7CS8vMiB3aW5kb3dzIG9mIDMwbXMgYnkgZGVmYXVsdA0KICAJdmFkTW9kZSA9IChvcHRpb25zLnNldHVwLnZhZE1vZGUgIT0gdW5kZWZpbmVkKT8gb3B0aW9ucy5zZXR1cC52YWRNb2RlIDogMzsNCiAgCWlzRmxvYXQzMklucHV0ID0gKG9wdGlvbnMuc2V0dXAuaXNGbG9hdDMyICE9IHVuZGVmaW5lZCk/IG9wdGlvbnMuc2V0dXAuaXNGbG9hdDMyIDogZmFsc2U7DQogIAkNCiAgCWlmIChvcHRpb25zLnNldHVwLnZvaWNlRW5lcmd5Q2FwICE9IHVuZGVmaW5lZCkgdm9pY2VFbmVyZ3lDYXAgPSBvcHRpb25zLnNldHVwLnZvaWNlRW5lcmd5Q2FwOw0KICAJaWYgKG9wdGlvbnMuc2V0dXAudm9pY2VFbmVyZ3lEcm9wUmF0ZSkgdm9pY2VFbmVyZ3lEcm9wUmF0ZSA9IG9wdGlvbnMuc2V0dXAudm9pY2VFbmVyZ3lEcm9wUmF0ZTsNCiAgCWlmIChvcHRpb25zLnNldHVwLnNlcXVlbmNlKXsNCiAgCQl1c2VTZXF1ZW5jZUFuYWx5emVyID0gdHJ1ZTsNCiAgCQl2b2ljZUFjdGl2YXRpb25UaW1lID0gb3B0aW9ucy5zZXR1cC5zZXF1ZW5jZS52b2ljZUFjdGl2YXRpb25UaW1lIHx8IDI1MDsNCiAgCQl2b2ljZVJlc2V0VGltZSA9IG9wdGlvbnMuc2V0dXAuc2VxdWVuY2Uudm9pY2VSZXNldFRpbWUgfHwgMTUwMDsNCiAgCQlzaWxlbmNlQWN0aXZhdGlvblRpbWUgPSBvcHRpb25zLnNldHVwLnNlcXVlbmNlLnNpbGVuY2VBY3RpdmF0aW9uVGltZSB8fCAyNTA7DQogIAkJbWF4U2VxdWVuY2VUaW1lID0gb3B0aW9ucy5zZXR1cC5zZXF1ZW5jZS5tYXhTZXF1ZW5jZVRpbWUgfHwgNjAwMDsNCiAgCQltaW5TZXF1ZW5jZVRpbWUgPSBvcHRpb25zLnNldHVwLnNlcXVlbmNlLm1pblNlcXVlbmNlVGltZSB8fCA2MDA7DQogIAl9ZWxzZSB7DQogIAkJdXNlU2VxdWVuY2VBbmFseXplciA9IGZhbHNlOw0KICAJfQ0KICAJDQogIAkvL1RPRE86IHVudXNlZCBzbyBmYXIgLi4uIGtlZXAgb3IgcmVtb3ZlPw0KICAJbWV5ZGFBbmFseXplciA9IG9wdGlvbnMuc2V0dXAubWV5ZGFBbmFseXplciB8fCB7fTsNCiAgCXZhciBtZXlkYVNldHRpbmdzS2V5cyA9IE9iamVjdC5rZXlzKG1leWRhQW5hbHl6ZXIpOw0KICAJaWYgKG1leWRhU2V0dGluZ3NLZXlzLmxlbmd0aCA+IDApew0KICAJCS8vaW1wb3J0IG9uIGRlbWFuZA0KICAJCWltcG9ydFNjcmlwdHMoJy4vc2hhcmVkL21leWRhLm1pbi5jb21wcmVzc2VkLmpzJyk7DQogIAkJLy9zZXR1cA0KICAJCW1leWRhU2V0dGluZ3NLZXlzLmZvckVhY2goZnVuY3Rpb24oaywgaSl7DQogIAkJCWlmIChrID09ICJmZWF0dXJlcyIpew0KICAJCQkJbWV5ZGFBbmFseXplcltrXTsNCiAgCQkJfWVsc2Ugew0KICAJCQkJTWV5ZGFba10gPSBtZXlkYUFuYWx5emVyW2tdOw0KICAJCQl9DQogIAkJfSk7DQogIAkJTWV5ZGEuc2FtcGxlUmF0ZSA9IHRhcmdldFNhbXBsZVJhdGU7DQogIAkJTWV5ZGEuYnVmZmVyU2l6ZSA9IGlucHV0U2FtcGxlU2l6ZTsNCiAgCQlpZiAoIU1leWRhLmJ1ZmZlclNpemUgfHwgKE1leWRhLmJ1ZmZlclNpemUgJiAoTWV5ZGEuYnVmZmVyU2l6ZSAtMSkgIT0gMCkpew0KICAJCQl0aHJvdyB7bmFtZTogIlZhZE1vZHVsZU1leWRhRXJyb3IiLCBtZXNzYWdlOiAiTWV5ZGEgYnVmZmVyLXNpemUgbXVzdCBiZSBwb3dlciBvZiAyLCBlLmcuIDEyOCwgMjU2LCA1MTIsIDEwMjQsIC4uLiJ9Ow0KICAJCX0NCiAgCX0NCiAgCQ0KICAJaW5pdCgpOw0KICAJDQogIAlmdW5jdGlvbiBvblZhZExvZyhtc2cpew0KICAJCWlmIChkb0RlYnVnKSBjb25zb2xlLmVycm9yKCJWYWRNb2R1bGVMb2cgLSIsIG1zZyk7CQkJLy9ERUJVRyAodXNlIHBvc3RNZXNzYWdlPykNCiAgCX0NCiAgCWZ1bmN0aW9uIG9uVmFkRXJyb3IobXNnKXsNCiAgCQljb25zb2xlLmVycm9yKCJWYWRNb2R1bGVFcnJvciAtIiwgbXNnKTsNCiAgCQl0aHJvdyB7bmFtZTogIlZhZE1vZHVsZUVycm9yIiwgbWVzc2FnZTogbXNnfTsJLy9UT0RPOiB0aGlzIHByb2JhYmx5IG5lZWRzIHRvIGJlIGEgc3RyaW5nIHRvIHNob3cgdXAgaW4gd29ya2VyLm9uZXJyb3IgcHJvcGVybHkgOi0vDQogIAl9DQogIAkNCiAgCS8vcHJlcGFyZQ0KICAJaWYgKCF2YWRNb2R1bGUpew0KICAJCW9uVmFkTG9nKCJJbml0LiBXZWJSVEMgVkFEIFdBU00gbW9kdWxlIik7CQkvL0RFQlVHDQogIAkJbmV3IFdlYlJ0Y1ZvaWNlQWN0aXZpdHlEZXRlY3Rvcih7DQogIAkJCW9uSW5mbzogb25WYWRMb2csDQogIAkJCW9uRXJyb3I6IG9uVmFkRXJyb3IsDQogIAkJCW9uU3RhdHVzTWVzc2FnZTogb25WYWRMb2csDQogIAkJCW1vZGU6IHZhZE1vZGUNCiAgCQl9LCBmdW5jdGlvbih2KXsNCiAgCQkJb25WYWRMb2coIldlYlJUQyBWQUQgcmVhZHkiKTsJCQkJLy9ERUJVRw0KICAJCQl2YWRNb2R1bGUgPSB2Ow0KICAJCQlyZWFkeSgpOw0KICAJCX0pOw0KICAJfWVsc2Ugew0KICAJCW9uVmFkTG9nKCJXZWJSVEMgVkFEIG1vZHVsZSBhbHJlYWR5IGxvYWRlZCIpOwkJLy9ERUJVRw0KICAJCXJlYWR5KCk7DQogIAl9DQogIH0NCg0KICAvL3NlcXVlbmNlIGJsb2NrDQogIGZ1bmN0aW9uIHNlcXVlbmNlRGV0ZWN0b3Iodm9pY2VBY3Rpdml0eSl7DQogIAlpZiAodm9pY2VBY3Rpdml0eSA9PSAwKXsNCiAgCQlpZiAoX3NlcXVlbmNlU2F3Vm9pY2Upew0KICAJCQlfc2VxdWVuY2VTaWxlbmNlVGltZSArPSBfdmFkRnJhbWVUaW1lTXM7DQogIAkJCWlmIChfc2VxdWVuY2VTaWxlbmNlVGltZSA+IHZvaWNlUmVzZXRUaW1lKXsNCiAgCQkJCV9zZXF1ZW5jZVNhd1NpbGVuY2VBZnRlclZvaWNlID0gdHJ1ZTsNCiAgCQkJfWVsc2UgaWYgKF9zZXF1ZW5jZVNpbGVuY2VUaW1lID4gc2lsZW5jZUFjdGl2YXRpb25UaW1lKXsNCiAgCQkJCV9zZXF1ZW5jZVZvaWNlVGltZSA9IDA7DQogIAkJCX0NCiAgCQl9DQogIAl9ZWxzZSB7DQogIAkJX3NlcXVlbmNlVm9pY2VUaW1lICs9IF92YWRGcmFtZVRpbWVNczsNCiAgCQlpZiAoIV9zZXF1ZW5jZVNhd1ZvaWNlICYmIF9zZXF1ZW5jZVZvaWNlVGltZSA+IHZvaWNlQWN0aXZhdGlvblRpbWUpew0KICAJCQlfc2VxdWVuY2VTYXdWb2ljZSA9IHRydWU7DQogIAkJCXJlZ2lzdGVyRXZlbnQoMSwgJ3ZvaWNlX3N0YXJ0Jyk7DQogIAkJfWVsc2UgaWYgKF9zZXF1ZW5jZVZvaWNlVGltZSA+IHZvaWNlQWN0aXZhdGlvblRpbWUpew0KICAJCQlfc2VxdWVuY2VTaWxlbmNlVGltZSA9IDA7DQogIAkJfQ0KICAJfQ0KICAJDQogIAlpZiAoX3NlcXVlbmNlU2F3Vm9pY2UgJiYgX3NlcXVlbmNlU2F3U2lsZW5jZUFmdGVyVm9pY2Upew0KICAJCV9zZXF1ZW5jZUZpbmlzaGVkVm9pY2UgPSB0cnVlOw0KICAJfWVsc2UgaWYgKF9zZXF1ZW5jZVNhd1ZvaWNlICYmIChfc2VxdWVuY2VWb2ljZVRpbWUgPiBtaW5TZXF1ZW5jZVRpbWUpKXsNCiAgCQlpZiAoIV9zZXF1ZW5jZUlzQWN0aXZlKXsNCiAgCQkJX3NlcXVlbmNlSXNBY3RpdmUgPSB0cnVlOw0KICAJCQlfc2VxdWVuY2VTdGFydGVkQXQgPSBEYXRlLm5vdygpOw0KICAJCQlyZWdpc3RlckV2ZW50KDIsICdzZXF1ZW5jZV9zdGFydGVkJyk7DQogIAkJfQ0KICAJfQ0KDQogIAlpZiAoX3NlcXVlbmNlRmluaXNoZWRWb2ljZSl7DQogIAkJX3NlcXVlbmNlSXNEb25lID0gdHJ1ZTsNCiAgCQlyZWdpc3RlckV2ZW50KDMsICdmaW5pc2hlZF92b2ljZScpOw0KDQogIAl9ZWxzZSBpZiAoX3NlcXVlbmNlU2F3Vm9pY2Upew0KICAJCWlmIChfc2VxdWVuY2VJc0FjdGl2ZSAmJiAoKERhdGUubm93KCkgLSBfc2VxdWVuY2VTdGFydGVkQXQpID4gbWF4U2VxdWVuY2VUaW1lKSkgew0KICAJCQlfc2VxdWVuY2VJc0RvbmUgPSB0cnVlOw0KICAJCQlyZWdpc3RlckV2ZW50KDQsICdmaW5pc2hlZF92b2ljZV9tYXh0aW1lJyk7DQogIAkJfQ0KICAJfQ0KICAJCQ0KICAJaWYgKF9zZXF1ZW5jZUlzRG9uZSl7DQogIAkJaWYgKF9zZXF1ZW5jZUlzQWN0aXZlKSByZWdpc3RlckV2ZW50KDUsICdzZXF1ZW5jZV9jb21wbGV0ZScpOw0KICAJCXJlc2V0U2VxdWVuY2UoKTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiByZXNldFNlcXVlbmNlKCl7DQogIAl2b2ljZUVuZXJneSA9IDA7DQogIAlfc2VxdWVuY2VTYXdWb2ljZSA9IGZhbHNlOw0KICAJX3NlcXVlbmNlRmluaXNoZWRWb2ljZSA9IGZhbHNlOw0KICAJX3NlcXVlbmNlU2F3U2lsZW5jZUFmdGVyVm9pY2UgPSBmYWxzZTsNCiAgCV9zZXF1ZW5jZVZvaWNlVGltZSA9IDA7DQogIAlfc2VxdWVuY2VTaWxlbmNlVGltZSA9IDA7DQogIAlfc2VxdWVuY2VJc0FjdGl2ZSA9IGZhbHNlOw0KICAJX3NlcXVlbmNlU3RhcnRlZEF0ID0gMDsNCiAgCV9zZXF1ZW5jZUlzRG9uZSA9IGZhbHNlOw0KICB9DQogIGZ1bmN0aW9uIHJlZ2lzdGVyRXZlbnQoY29kZSwgbXNnLCBkYXRhKXsNCiAgCXZhciBtc2cgPSB7DQogIAkJdmFkU2VxdWVuY2VDb2RlOiBjb2RlLA0KICAJCXZhZFNlcXVlbmNlTXNnOiBtc2cNCiAgCX07DQogIAlzd2l0Y2ggKGNvZGUpew0KICAJCS8vY2FzZSAxOiB2b2ljZSBzdGFydA0KICAJCS8vY2FzZSAyOiBzZXF1ZW5jZSBzdGFydA0KICAJCS8vY2FzZSAzOiBjYXNlIDQ6IGZpbmlzaGVkIHZvaWNlDQogIAkJY2FzZSA1Og0KICAJCQkvL3NlcXVlbmNlIGNvbXBsZXRlDQogIAkJCW1zZy52YWRTZXF1ZW5jZVN0YXJ0ZWQgPSBfc2VxdWVuY2VTdGFydGVkQXQ7DQogIAkJCW1zZy52YWRTZXF1ZW5jZUVuZGVkID0gRGF0ZS5ub3coKTsNCiAgCQkJYnJlYWs7DQogIAl9DQogIAkvL1NlbmQgaW5mbw0KICAJcG9zdE1lc3NhZ2UobXNnKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHByb2Nlc3MkMShkYXRhKSB7DQogIAkvL2V4cGVjdGVkOiBkYXRhLnNhbXBsZXMsIGRhdGEuc2FtcGxlUmF0ZSwgZGF0YS5jaGFubmVscywgZGF0YS50eXBlDQogIAkvL21pZ2h0IGhhdmU6IGRhdGEucm1zCS0JVE9ETzogbWFrZSB1c2Ugb2Y/DQogIAlpZiAoZGF0YSAmJiBkYXRhLnNhbXBsZXMpew0KICAJCS8vVXNlIDFzdCBpbnB1dCBhbmQgb3V0cHV0IG9ubHkNCiAgCQlsZXQgaW5wdXQgPSBkYXRhLnNhbXBsZXM7DQogIAkJaW5wdXRbMF0ubGVuZ3RoOw0KICAJCQ0KICAJCWlmIChfaXNGaXJzdFZhbGlkUHJvY2Vzcyl7DQogIAkJCV9pc0ZpcnN0VmFsaWRQcm9jZXNzID0gZmFsc2U7DQogIAkJCS8vY2hlY2s6IGlucHV0U2FtcGxlUmF0ZSwgaW5wdXRTYW1wbGVTaXplLCBjaGFubmVsQ291bnQsIGZsb2F0MzINCiAgCQkJaWYgKGRhdGEuc2FtcGxlUmF0ZSAhPSBpbnB1dFNhbXBsZVJhdGUpew0KICAJCQkJdmFyIG1zZyA9ICJTYW1wbGUtcmF0ZSBtaXNtYXRjaCEgU2hvdWxkIGJlICciICsgaW5wdXRTYW1wbGVSYXRlICsgIicgaXMgJyIgKyBkYXRhLnNhbXBsZVJhdGUgKyAiJyI7DQogIAkJCQljb25zb2xlLmVycm9yKCJBdWRpbyBXb3JrZXIgc2FtcGxlLXJhdGUgZXhjZXB0aW9uIC0gTXNnLjogIiArIG1zZyk7DQogIAkJCQl0aHJvdyBKU09OLnN0cmluZ2lmeShuZXcgU2FtcGxlUmF0ZUV4Y2VwdGlvbihtc2cpKTsJCQkvL05PVEU6IHRoaXMgbmVlZHMgdG8gYmUgYSBzdHJpbmcgdG8gc2hvdyB1cCBpbiB3b3JrZXIub25lcnJvciBwcm9wZXJseSA6LS8NCiAgCQkJfQ0KICAJCQlsZXQgaW5wdXRBcnJheVR5cGUgPSBkYXRhLnR5cGUgfHwgZGF0YS5zYW1wbGVzWzBdLmNvbnN0cnVjdG9yLm5hbWU7DQogIAkJCWxldCBpc0Zsb2F0MzIgPSAoaW5wdXRBcnJheVR5cGUuaW5kZXhPZigiRmxvYXQzMiIpID49IDApOw0KICAJCQlpZiAoaXNGbG9hdDMyICE9IGlzRmxvYXQzMklucHV0KXsNCiAgCQkJCXZhciBtc2cgPSAiQXJyYXkgdHlwZSBtaXNtYXRjaCEgSW5wdXQgc2FtcGxlcyBhcmUgb2YgdHlwZSAnIiArIGlucHV0QXJyYXlUeXBlICsgIicgYnV0IGV4cGVjdGVkOiAiICsgKGlzRmxvYXQzMklucHV0PyAiRmxvYXQzMiIgOiAiSW50MTYiKTsNCiAgCQkJCWNvbnNvbGUuZXJyb3IoIkF1ZGlvIFdvcmtlciB0eXBlIGV4Y2VwdGlvbiAtIE1zZy46ICIgKyBtc2cpOw0KICAJCQkJdGhyb3cgSlNPTi5zdHJpbmdpZnkobmV3IEFycmF5VHlwZUV4Y2VwdGlvbihtc2cpKTsJCQkvL05PVEU6IHRoaXMgbmVlZHMgdG8gYmUgYSBzdHJpbmcgdG8gc2hvdyB1cCBpbiB3b3JrZXIub25lcnJvciBwcm9wZXJseSA6LS8NCiAgCQkJfQ0KICAJCQkvL1RPRE86IHNob3VsZCB3ZSByZS1pbml0LiBpbnN0ZWFkIG9mIGZhaWw/DQogIAkJfQ0KICAJCQ0KICAJCS8vVE9ETzogaXMgTU9OTw0KICAJCWlmIChpc0Zsb2F0MzJJbnB1dCl7DQogIAkJCUNvbW1vbkNvbnZlcnRlcnMuZmxvYXRUbzE2Qml0UENNKF9pbnQxNklucHV0QnVmZmVyWzBdLCBpbnB1dFswXSk7DQogIAkJCV9wcm9jZXNzUmluZ0J1ZmZlci5wdXNoKFtfaW50MTZJbnB1dEJ1ZmZlclswXV0pOw0KICAJCX1lbHNlIHsNCiAgCQkJX3Byb2Nlc3NSaW5nQnVmZmVyLnB1c2goaW5wdXQpOw0KICAJCX0NCiAgCQkNCiAgCQkvL1Byb2Nlc3MgaWYgd2UgaGF2ZSBlbm91Z2ggZnJhbWVzDQogIAkJdmFyIHZhZFJlc3VsdHMgPSBbXTsNCiAgCQl3aGlsZSAoX3Byb2Nlc3NSaW5nQnVmZmVyLmZyYW1lc0F2YWlsYWJsZSA+PSBfdmFkQnVmZmVyU2l6ZSkgew0KICAJCQkvL3B1bGwgc2FtcGxlcw0KICAJCQlfcHJvY2Vzc1JpbmdCdWZmZXIucHVsbChfdmFkQnVmZmVyKTsNCiAgCQkJDQogIAkJCS8vYWN0aXZpdHkgY2hlY2sNCiAgCQkJdmFyIHZvaWNlQWN0aXZpdHkgPSB2YWRNb2R1bGUuZ2V0Vm9pY2VBY3Rpdml0eShpbnB1dFNhbXBsZVJhdGUsIF92YWRCdWZmZXJbMF0pOwkJLy9UT0RPOiBpcyBNT05PDQogIAkJCXZhZFJlc3VsdHMucHVzaCh2b2ljZUFjdGl2aXR5KTsNCiAgCQkJDQogIAkJCS8vdm9pY2UgZW5lcmd5IGFuZCBzZXF1ZW5jZSBjaGVjaw0KICAJCQlpZiAodm9pY2VBY3Rpdml0eSl7DQogIAkJCQl2b2ljZUVuZXJneSsrOw0KICAJCQkJaWYgKHZvaWNlRW5lcmd5Q2FwICYmIHZvaWNlRW5lcmd5ID4gdm9pY2VFbmVyZ3lDYXApIHZvaWNlRW5lcmd5ID0gdm9pY2VFbmVyZ3lDYXA7DQogIAkJCX1lbHNlIHsNCiAgCQkJCXZvaWNlRW5lcmd5ID0gdm9pY2VFbmVyZ3kgLSB2b2ljZUVuZXJneURyb3BSYXRlOw0KICAJCQkJaWYgKHZvaWNlRW5lcmd5IDwgMCkgdm9pY2VFbmVyZ3kgPSAwOw0KICAJCQl9DQogIAkJCWlmICh1c2VTZXF1ZW5jZUFuYWx5emVyKXsNCiAgCQkJCXNlcXVlbmNlRGV0ZWN0b3Iodm9pY2VBY3Rpdml0eSk7DQogIAkJCX0NCiAgCQl9DQogIAkJaWYgKHZhZFJlc3VsdHMubGVuZ3RoID4gMCl7DQogIAkJCS8vU2VuZCBpbmZvDQogIAkJCXBvc3RNZXNzYWdlKHsNCiAgCQkJCXZvaWNlQWN0aXZpdHk6IHZhZFJlc3VsdHMsDQogIAkJCQl2b2ljZUVuZXJneTogdm9pY2VFbmVyZ3kNCiAgCQkJfSk7DQogIAkJfQ0KICAJfQ0KICAJcmV0dXJuIHRydWU7DQogIH0NCg0KICBmdW5jdGlvbiBoYW5kbGVFdmVudChkYXRhKXsNCiAgCS8vZGF0YSB0aGF0IHNob3VsZCBub3QgYmUgcHJvY2Vzc2VkIGJ1dCBtaWdodCB0cmlnZ2VyIGFuIGV2ZW50DQogIH0NCg0KICBmdW5jdGlvbiBzdGFydChvcHRpb25zKSB7DQogICAgICAvL1RPRE86IGFueXRoaW5nIHRvIGRvPw0KICAJLy9OT1RFOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkLCB1c2Ugb25seSBmb3IgZ2F0aW5nIG9yIHNpbWlsYXIgc3R1ZmYhDQogIAlyZXNldFNlcXVlbmNlKCk7DQogIH0NCiAgZnVuY3Rpb24gc3RvcChvcHRpb25zKSB7DQogIAkvL1RPRE86IGFueXRoaW5nIHRvIGRvPw0KICAJLy9OT1RFOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkDQogIH0NCiAgZnVuY3Rpb24gcmVzZXQob3B0aW9ucykgew0KICAgICAgLy9UT0RPOiBjbGVhbiB1cCB3b3JrZXIgYW5kIHByZXAuIGZvciByZXN0YXJ0DQogIAlpbml0KCk7DQogIH0NCiAgZnVuY3Rpb24gcmVsZWFzZShvcHRpb25zKXsNCiAgCS8vZGVzdHJveQ0KICAJX3Byb2Nlc3NSaW5nQnVmZmVyID0gbnVsbDsNCiAgCV92YWRCdWZmZXIgPSBudWxsOw0KICAJX2ludDE2SW5wdXRCdWZmZXIgPSBudWxsOw0KICAJdmFkTW9kdWxlID0gbnVsbDsJCS8vVE9ETzogaXMgdGhlcmUgYW55IG90aGVyICdkZXN0cm95JycgZnVuY3Rpb24/DQogIAkvL25vdGlmeSBwcm9jZXNzb3IgdGhhdCB3ZSBjYW4gdGVybWluYXRlIG5vdw0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiA5DQogIAl9KTsNCiAgfQ0KDQogIC8vLS0tIGhlbHBlcnMgLS0tDQogIC8vLi4uCgp9KSgpOwoK",null,!1),Lve=DH("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqDQogICAqIE9yaWdpbmFsIGNvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMgLSBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wOw0KICAgKiBNb2RpZmllZCBmb3IgU0VQSUEgcHJvamVjdCAoTUlUIExpY2Vuc2UpDQogICAqLw0KICAgDQogIC8qKg0KICAgKiBBIEpTIEZJRk8gaW1wbGVtZW50YXRpb24gZm9yIHRoZSBBdWRpb1dvcmtsZXQuDQogICAqIE5vdGU6DQogICAqICAtIFRoZSBjaGFubmVsIGNvdW50IG9mIGlucHV0L291dHB1dCBjYW5ub3QgYmUgY2hhbmdlZCBkeW5hbWljYWxseS4NCiAgICogICAgVGhlIEF1ZGlvV29ya2xldE5vZGUgc2hvdWxkIGJlIGNvbmZpZ3VyZWQgd2l0aCB0aGUgYC5jaGFubmVsQ291bnQgPSBrYA0KICAgKiAgICAod2hlcmUgayBpcyB0aGUgY2hhbm5lbCBjb3VudCB5b3Ugd2FudCkgYW5kIGAuY2hhbm5lbENvdW50TW9kZSA9IGV4cGxpY2l0YC4NCiAgICoNCiAgICogQGNsYXNzDQogICAqLw0KICAgY2xhc3MgUmluZ0J1ZmZlciB7DQogICAgLyoqDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBsZW5ndGggQnVmZmVyIGxlbmd0aCBpbiBmcmFtZXMuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBjaGFubmVsQ291bnQgQnVmZmVyIGNoYW5uZWwgY291bnQuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBwcmVjaXNpb24gIlVpbnQ4IiwgIkludDgiLCAiVWludDE2IiwgIkludDE2IiwgIkZsb2F0MzIiIGV0Yy4NCiAgICAgKi8NCiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsIGNoYW5uZWxDb3VudCwgcHJlY2lzaW9uKSB7DQogICAgICB0aGlzLl9yZWFkSW5kZXggPSAwOw0KICAgICAgdGhpcy5fd3JpdGVJbmRleCA9IDA7DQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KDQogICAgICB0aGlzLl9jaGFubmVsQ291bnQgPSBjaGFubmVsQ291bnQ7DQogICAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGg7DQogICAgICB0aGlzLl9jaGFubmVsRGF0YSA9IFtdOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsraSkgew0KICAJICBpZiAocHJlY2lzaW9uID09ICJVaW50MTYiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgVWludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDE2Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIlVpbnQ4Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDgiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgSW50OEFycmF5KGxlbmd0aCk7IH0NCiAgCSAgZWxzZSB7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEZsb2F0MzJBcnJheShsZW5ndGgpOyB9DQogICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2V0dGVyIGZvciBBdmFpbGFibGUgZnJhbWVzIGluIGJ1ZmZlci4NCiAgICAgKg0KICAgICAqIEByZXR1cm4ge251bWJlcn0gQXZhaWxhYmxlIGZyYW1lcyBpbiBidWZmZXIuDQogICAgICovDQogICAgZ2V0IGZyYW1lc0F2YWlsYWJsZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9mcmFtZXNBdmFpbGFibGU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUHVzaCBhIHNlcXVlbmNlIG9mIEFycmF5cyB0byBidWZmZXIuDQogICAgICoNCiAgICAgKiBAcGFyYW0gIHthcnJheX0gYXJyYXlTZXF1ZW5jZSBBIHNlcXVlbmNlIG9mIEFycmF5cy4NCiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gY3VzdG9tVHJhbnNmb3JtIEEgZnVuY3Rpb24gb2YgKGFycmF5LCBjaGFubmVsLCBpbmRleCkgdG8gdHJhbnNmb3JtIHRoZSBpbnB1dCBkdXJpbmcgcHVzaCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVzaChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIHxhcnJheVNlcXVlbmNlfCBzdG9yYWdlIHRvIHRoZSBpbnRlcm5hbCBidWZmZXIuDQogICAgICBsZXQgc291cmNlTGVuZ3RoID0gYXJyYXlTZXF1ZW5jZVswXS5sZW5ndGg7DQogIAlsZXQgdHJhbnNmb3JtID0gY3VzdG9tVHJhbnNmb3JtIHx8IGZ1bmN0aW9uKHRoaXNBcnJheSwgY2hhbm5lbCwgaSl7DQogIAkJcmV0dXJuIHRoaXNBcnJheVtjaGFubmVsXVtpXTsNCiAgCX07DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZUxlbmd0aDsgKytpKSB7DQogICAgICAgIGxldCB3cml0ZUluZGV4ID0gKHRoaXMuX3dyaXRlSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIHRoaXMuX2NoYW5uZWxEYXRhW2NoYW5uZWxdW3dyaXRlSW5kZXhdID0gdHJhbnNmb3JtKGFycmF5U2VxdWVuY2UsIGNoYW5uZWwsIGkpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHRoaXMuX3dyaXRlSW5kZXggKz0gc291cmNlTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3dyaXRlSW5kZXggPj0gdGhpcy5fbGVuZ3RoKSB7DQogICAgICAgIHRoaXMuX3dyaXRlSW5kZXggPSB0aGlzLl93cml0ZUluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICAvLyBGb3IgZXhjZXNzaXZlIGZyYW1lcywgdGhlIGJ1ZmZlciB3aWxsIGJlIG92ZXJ3cml0dGVuLg0KICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlICs9IHNvdXJjZUxlbmd0aDsNCiAgICAgIGlmICh0aGlzLl9mcmFtZXNBdmFpbGFibGUgPiB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlID0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFB1bGwgZGF0YSBvdXQgb2YgYnVmZmVyIGFuZCBmaWxsIGEgZ2l2ZW4gc2VxdWVuY2Ugb2YgQXJyYXlzLg0KICAgICAqDQogICAgICogQHBhcmFtICB7YXJyYXl9IGFycmF5U2VxdWVuY2UgQW4gYXJyYXkgb2YgQXJyYXlzLg0KICAgICAqIEBwYXJhbSAge2Z1bmN0aW9ufSBjdXN0b21UcmFuc2Zvcm0gQSBmdW5jdGlvbiBvZiAoYXJyYXksIGNoYW5uZWwsIGluZGV4KSB0byB0cmFuc2Zvcm0gdGhlIG91dHB1dCBkdXJpbmcgcHVsbCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVsbChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBJZiB0aGUgRklGTyBpcyBjb21wbGV0ZWx5IGVtcHR5LCBkbyBub3RoaW5nLg0KICAgICAgaWYgKHRoaXMuX2ZyYW1lc0F2YWlsYWJsZSA9PT0gMCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQoNCiAgICAgIGxldCBkZXN0aW5hdGlvbkxlbmd0aCA9IGFycmF5U2VxdWVuY2VbMF0ubGVuZ3RoOw0KICAJbGV0IHRyYW5zZm9ybSA9IGN1c3RvbVRyYW5zZm9ybSB8fCBmdW5jdGlvbih0aGlzQXJyYXksIGNoYW5uZWwsIGkpew0KICAJCXJldHVybiB0aGlzQXJyYXlbY2hhbm5lbF1baV07DQogIAl9Ow0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciB0byB0aGUgfGFycmF5U2VxdWVuY2V8IHN0b3JhZ2UuDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlc3RpbmF0aW9uTGVuZ3RoOyArK2kpIHsNCiAgICAgICAgbGV0IHJlYWRJbmRleCA9ICh0aGlzLl9yZWFkSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIGFycmF5U2VxdWVuY2VbY2hhbm5lbF1baV0gPSB0cmFuc2Zvcm0odGhpcy5fY2hhbm5lbERhdGEsIGNoYW5uZWwsIHJlYWRJbmRleCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgdGhpcy5fcmVhZEluZGV4ICs9IGRlc3RpbmF0aW9uTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3JlYWRJbmRleCA+PSB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fcmVhZEluZGV4ID0gdGhpcy5fcmVhZEluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgLT0gZGVzdGluYXRpb25MZW5ndGg7DQogICAgICBpZiAodGhpcy5fZnJhbWVzQXZhaWxhYmxlIDwgMCkgew0KICAgICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KICAgICAgfQ0KICAgIH0NCiAgfQoKICAvL1NFUElBIFNUVCBTZXJ2ZXIgQ2xpZW50Og0KDQogIGNsYXNzIFNlcGlhU3R0U29ja2V0Q2xpZW50IHsNCg0KICAJY29uc3RydWN0b3Ioc2VydmVyVXJsLCBjbGllbnRJZCwgYWNjZXNzVG9rZW4sIGVuZ2luZU9wdGlvbnMsIHNlcnZlck9wdGlvbnMpew0KICAJCXRoaXMuc2VydmVyVXJsID0gKHNlcnZlclVybCB8fCAiaHR0cDovL2xvY2FsaG9zdDoyMDc0MSIpLnJlcGxhY2UoIlwvJCIsICIiKTsNCiAgCQl0aGlzLnNvY2tldEhvc3QgPSB0aGlzLnNlcnZlclVybC5yZXBsYWNlKC9eKGh0dHApLywgIndzIikgKyAiL3NvY2tldCI7CS8vbm90ZTogJy9zb2NrZXQnIGlzIGEgcGF0aCBhbGlhcyBmb3IgcHJveGllcw0KICAJCXRoaXMuY2xpZW50SWQgPSBjbGllbnRJZCB8fCAiYW55IjsNCiAgCQl0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW4gfHwgInRlc3QxMjM0IjsNCg0KICAJCWlmICghZW5naW5lT3B0aW9ucykgZW5naW5lT3B0aW9ucyA9IHt9Ow0KICAJCWlmICghc2VydmVyT3B0aW9ucykgc2VydmVyT3B0aW9ucyA9IHt9Ow0KDQogIAkJdGhpcy5zZXJ2ZXJWZXJzaW9uID0gIiI7DQogIAkJdGhpcy5hc3JFbmdpbmUgPSAiIjsNCiAgCQkNCiAgCQl0aGlzLmF2YWlsYWJsZUxhbmd1YWdlcyA9IFtdOw0KICAJCXRoaXMuYXZhaWxhYmxlTW9kZWxzID0gW107DQogIAkJdGhpcy5hdmFpbGFibGVGZWF0dXJlcyA9IFtdOw0KICAJCXRoaXMuYWN0aXZlT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oew0KICAJCQlzYW1wbGVyYXRlOiAxNjAwMCwNCiAgCQkJY29udGludW91czogZmFsc2UsDQogIAkJCWxhbmd1YWdlOiAiIiwNCiAgCQkJdGFzazogIiIsDQogIAkJCW1vZGVsOiAiIg0KICAJCX0sIGVuZ2luZU9wdGlvbnMpOw0KDQogIAkJdGhpcy5hY3RpdmVMYW5ndWFnZUNvZGUgPSB0aGlzLmFjdGl2ZU9wdGlvbnMubGFuZ3VhZ2UgfHwgIiI7DQogIAkJdGhpcy5hY3RpdmVBc3JUYXNrID0gdGhpcy5hY3RpdmVPcHRpb25zLnRhc2sgfHwgIiI7DQogIAkJdGhpcy5hY3RpdmVBc3JNb2RlbCA9IHRoaXMuYWN0aXZlT3B0aW9ucy5tb2RlbCB8fCAiIjsNCiAgCQkvL05PVEU6IGN1cnJlbnRseSBub3QgYXNzaWduZWQNCiAgCQl0aGlzLnBocmFzZXMgPSB0aGlzLmFjdGl2ZU9wdGlvbnMucGhyYXNlcyB8fCBbXTsNCiAgCQl0aGlzLmhvdFdvcmRzID0gdGhpcy5hY3RpdmVPcHRpb25zLmhvdFdvcmRzIHx8IFtdOw0KDQogIAkJdGhpcy5fbXNnSWQgPSAwOw0KDQogIAkJdGhpcy53ZWJzb2NrZXQgPSB1bmRlZmluZWQ7DQogIAkJdGhpcy5fY29ubmVjdGlvbklkID0gMDsNCg0KICAJCXRoaXMuYXV0b0Nsb3NlT25MYXN0RmluYWwgPSB0cnVlOwkvL2FwcGxpZXMgdG8gbm9uLWNvbnRpbnVvdXMgc2V0dXAgb25seQ0KDQogIAkJdGhpcy5jb25uZWN0aW9uSXNPcGVuID0gZmFsc2U7DQogIAkJdGhpcy5pc1JlYWR5Rm9yU3RyZWFtID0gZmFsc2U7DQoNCiAgCQl0aGlzLl9vbk9wZW4gPSBzZXJ2ZXJPcHRpb25zLm9uT3BlbiB8fCBmdW5jdGlvbigpe307DQogIAkJdGhpcy5fb25SZWFkeSA9IHNlcnZlck9wdGlvbnMub25SZWFkeSB8fCBmdW5jdGlvbihhY3RpdmVPcHRpb25zKXt9Ow0KICAJCXRoaXMuX29uQ2xvc2UgPSBzZXJ2ZXJPcHRpb25zLm9uQ2xvc2UgfHwgZnVuY3Rpb24oZXYpe307DQogIAkJdGhpcy5fb25SZXN1bHQgPSBzZXJ2ZXJPcHRpb25zLm9uUmVzdWx0IHx8IGZ1bmN0aW9uKHJlcyl7fTsNCiAgCQl0aGlzLl9vbkVycm9yID0gc2VydmVyT3B0aW9ucy5vbkVycm9yIHx8IGZ1bmN0aW9uKGVycil7DQogIAkJCWNvbnNvbGUuZXJyb3IoIlNlcGlhU3R0U29ja2V0Q2xpZW50IEVSUk9SIiwgZXJyKTsNCiAgCQl9Ow0KDQogIAkJdGhpcy5fc2tpcEF1dG9XZWxjb21lID0gc2VydmVyT3B0aW9ucy5za2lwQXV0b1dlbGNvbWU7DQogIAkJdGhpcy5fZG9EZWJ1ZyA9IHNlcnZlck9wdGlvbnMuZG9EZWJ1ZzsNCiAgCX0NCg0KICAJbG9nKG1zZyl7DQogIAkJaWYgKHRoaXMuX2RvRGVidWcpew0KICAJCQljb25zb2xlLmxvZygiU2VwaWFTdHRTb2NrZXRDbGllbnQiLCBtc2cpOw0KICAJCX0NCiAgCX0NCg0KICAJLy8tLS0gSFRUUCBJbnRlcmZhY2UgLS0tDQoNCiAgCXBpbmdTZXJ2ZXIoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKXsNCiAgCQljb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOw0KICAJCXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjb250cm9sbGVyLmFib3J0KCk7fSwgODAwMCk7DQogIAkJZmV0Y2godGhpcy5zZXJ2ZXJVcmwgKyAiL3BpbmciLCB7DQogIAkJCXNpZ25hbDogY29udHJvbGxlci5zaWduYWwNCiAgCQl9KS50aGVuKGZ1bmN0aW9uKHJlcyl7IHJldHVybiByZXMuanNvbigpOyB9KQ0KICAJCS50aGVuKGZ1bmN0aW9uKGpzb24pew0KICAJCQlpZiAoc3VjY2Vzc0NhbGxiYWNrKSBzdWNjZXNzQ2FsbGJhY2soanNvbik7DQogIAkJfSkNCiAgCQkuY2F0Y2goZnVuY3Rpb24oZXJyKXsNCiAgCQkJaWYgKGVycm9yQ2FsbGJhY2spIGVycm9yQ2FsbGJhY2soZXJyKTsNCiAgCQl9KTsNCiAgCX0NCg0KICAJbG9hZFNlcnZlckluZm8oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKXsNCiAgCQljb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOw0KICAJCXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjb250cm9sbGVyLmFib3J0KCk7fSwgODAwMCk7DQogIAkJZmV0Y2godGhpcy5zZXJ2ZXJVcmwgKyAiL3NldHRpbmdzIiwgew0KICAJCQltZXRob2Q6ICJHRVQiLA0KICAJCQlzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsDQogIAkJfSkudGhlbihmdW5jdGlvbihyZXMpew0KICAJCQlpZiAocmVzLm9rKXsNCiAgCQkJCXJldHVybiByZXMuanNvbigpOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlpZiAoZXJyb3JDYWxsYmFjaykgZXJyb3JDYWxsYmFjayh7DQogIAkJCQkJIm5hbWUiOiAiRmV0Y2hFcnJvciIsICJtZXNzYWdlIjogcmVzLnN0YXR1c1RleHQsICJjb2RlIjogcmVzLnN0YXR1cw0KICAJCQkJfSk7DQogIAkJCX0NCiAgCQl9KS50aGVuKGZ1bmN0aW9uKGpzb24pew0KICAJCQlpZiAoanNvbiAmJiBqc29uLnNldHRpbmdzKXsNCiAgCQkJCXRoaXMuX2hhbmRsZVNlcnZlclNldHRpbmdzKGpzb24uc2V0dGluZ3MpOw0KICAJCQkJaWYgKHN1Y2Nlc3NDYWxsYmFjaykgc3VjY2Vzc0NhbGxiYWNrKGpzb24uc2V0dGluZ3MpOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlpZiAoc3VjY2Vzc0NhbGxiYWNrKSBzdWNjZXNzQ2FsbGJhY2soe30pOw0KICAJCQl9DQogIAkJfSkuY2F0Y2goZnVuY3Rpb24oZXJyKXsNCiAgCQkJaWYgKGVycm9yQ2FsbGJhY2spIGVycm9yQ2FsbGJhY2soZXJyKTsNCiAgCQl9KTsNCiAgCX0NCg0KICAJX2hhbmRsZVNlcnZlclNldHRpbmdzKHNldHRpbmdzKXsNCiAgCQl0aGlzLnNlcnZlclZlcnNpb24gPSBzZXR0aW5ncy52ZXJzaW9uOw0KICAJCXRoaXMuYXNyRW5naW5lID0gc2V0dGluZ3MuZW5naW5lIHx8ICIiOw0KICAJCXRoaXMuYXZhaWxhYmxlTGFuZ3VhZ2VzID0gc2V0dGluZ3MubGFuZ3VhZ2VzIHx8IFtdOw0KICAJCXRoaXMuYXZhaWxhYmxlTW9kZWxzID0gc2V0dGluZ3MubW9kZWxzIHx8IFtdOw0KICAJCXRoaXMuYXZhaWxhYmxlRmVhdHVyZXMgPSBzZXR0aW5ncy5mZWF0dXJlcyB8fCBbXTsNCiAgCX0NCg0KICAJLy8tLS0gV2ViU29ja2V0IGludGVyZmFjZSAtLS0NCg0KICAJbmV3TWVzc2FnZUlkKCl7DQogIAkJdmFyIG1zZ0lkID0gKyt0aGlzLl9tc2dJZDsNCiAgCQlpZiAobXNnSWQgPiA5OTk5OTkpew0KICAJCQltc2dJZCA9IDE7DQogIAkJfQ0KICAJCXJldHVybiBtc2dJZDsNCiAgCX0NCg0KICAJb3BlbkNvbm5lY3Rpb24oKXsNCiAgCQlpZiAodGhpcy53ZWJzb2NrZXQgJiYgdGhpcy53ZWJzb2NrZXQucmVhZHlTdGF0ZSA9PSB0aGlzLndlYnNvY2tldC5PUEVOKXsNCiAgCQkJdGhpcy5fb25FcnJvcih7bmFtZTogIlNvY2tldENvbm5lY3Rpb25FcnJvciIsIG1lc3NhZ2U6ICJDb25uZWN0aW9uIHdhcyBhbHJlYWR5IE9QRU4ifSk7DQogIAkJCXJldHVybiBmYWxzZTsNCiAgCQl9DQogIAkJdmFyIHNlbGYgPSB0aGlzOw0KICAJCXZhciB0aGlzQ29ubmVjaXRvbklkOw0KICAJDQogIAkJLy9DUkVBVEUNCiAgCQl0aGlzLndlYnNvY2tldCA9IG5ldyBXZWJTb2NrZXQodGhpcy5zb2NrZXRIb3N0KTsNCiAgCQkNCiAgCQkvL09OT1BFTg0KICAJCXRoaXMud2Vic29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uKCl7DQogIAkJCXNlbGYubG9nKCJDb25uZWN0aW9uIE9QRU4iKTsNCiAgCQkJc2VsZi5jb25uZWN0aW9uSXNPcGVuID0gdHJ1ZTsNCiAgCQkJc2VsZi5fY29ubmVjdGlvbklkKys7DQogIAkJCXRoaXNDb25uZWNpdG9uSWQgPSBzZWxmLl9jb25uZWN0aW9uSWQ7DQogIAkJCXNlbGYuX29uT3BlbigpOw0KICAJCQkvL3NlbmQgd2VsY29tZQ0KICAJCQlpZiAoIXNlbGYuX3NraXBBdXRvV2VsY29tZSl7DQogIAkJCQlzZWxmLnNlbmRXZWxjb21lKCk7DQogIAkJCX0NCiAgCQl9Ow0KICAJCS8vT05DTE9TRQ0KICAJCXRoaXMud2Vic29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbihldil7DQogIAkJCXNlbGYubG9nKCJDb25uZWN0aW9uIENMT1NFRCIpOw0KICAJCQlzZWxmLmNvbm5lY3Rpb25Jc09wZW4gPSBmYWxzZTsNCiAgCQkJc2VsZi5pc1JlYWR5Rm9yU3RyZWFtID0gZmFsc2U7DQogIAkJCS8vdW5kZXJzdGFuZCBlcnJvcjogZXYuY29kZSBvciBldi5yZWFzb24gbWlnaHQgZ2l2ZSBtb3JlIGluc2lnaHRzDQogIAkJCXNlbGYuX29uQ2xvc2UoZXYpOw0KICAJCX07DQogIAkJLy9PTk1FU1NBR0UNCiAgCQl0aGlzLndlYnNvY2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCl7DQogIAkJCWlmIChldmVudCAmJiBldmVudC5kYXRhICYmIHR5cGVvZiBldmVudC5kYXRhID09ICJzdHJpbmciKXsNCiAgCQkJCXNlbGYubG9nKCJDb25uZWN0aW9uIE1FU1NBR0U6ICIgKyBldmVudC5kYXRhKTsJCS8vREVCVUcNCiAgCQkJCXRyeSB7DQogIAkJCQkJc2VsZi5oYW5kbGVTb2NrZXRNZXNzYWdlKEpTT04ucGFyc2UoZXZlbnQuZGF0YSkpOw0KICAJCQkJfWNhdGNoKGVycil7DQogIAkJCQkJY29uc29sZS5lcnJvcigiU2VwaWFTdHRTb2NrZXRDbGllbnQgLSBNZXNzYWdlUGFyc2VyRXJyb3IiLCBlcnIpOw0KICAJCQkJCXNlbGYuaGFuZGxlU29ja2V0RXJyb3Ioe25hbWU6ICJTb2NrZXRNZXNzYWdlUGFyc2VyRXJyb3IiLCBtZXNzYWdlOiAiTWVzc2FnZSBoYW5kbGVyIHNhdyBpbnZsYWlkIEpTT04/ISJ9KTsNCiAgCQkJCX0NCiAgCQkJfQ0KICAJCX07DQogIAkJLy9PTkVSUk9SDQogIAkJdGhpcy53ZWJzb2NrZXQub25lcnJvciA9IGZ1bmN0aW9uKGVycm9yKXsNCiAgCQkJaWYgKCF0aGlzQ29ubmVjaXRvbklkKXsNCiAgCQkJCS8vbmV2ZXIgb3BlbmVkDQogIAkJCQlzZWxmLl9vbkVycm9yKHtuYW1lOiAiU29ja2V0Q29ubmVjdGlvbkVycm9yIiwgbWVzc2FnZTogIkZhaWxlZCB0byBjb25uZWN0In0pOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlzZWxmLmhhbmRsZVNvY2tldEVycm9yKGVycm9yKTsNCiAgCQkJfQ0KICAJCX07DQoNCiAgCQlyZXR1cm4gdHJ1ZTsNCiAgCX0NCg0KICAJY2xvc2VDb25uZWN0aW9uKCl7DQogIAkJaWYgKHRoaXMud2Vic29ja2V0ICYmIHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgPT0gdGhpcy53ZWJzb2NrZXQuT1BFTil7DQogIAkJCXRoaXMud2Vic29ja2V0LmNsb3NlKCk7DQogIAkJCXJldHVybiB0cnVlOw0KICAJCX1lbHNlIHsNCiAgCQkJLy9mYWlsIHNpbGVudGx5Pw0KICAJCQlyZXR1cm4gZmFsc2U7DQogIAkJfQ0KICAJfQ0KDQogIAloYW5kbGVTb2NrZXRNZXNzYWdlKG1zZ0pzb24pew0KICAJCWlmIChtc2dKc29uLnR5cGUgPT0gImVycm9yIil7DQogIAkJCXRoaXMuaGFuZGxlU29ja2V0RXJyb3IobXNnSnNvbik7DQogIAkJfWVsc2Ugew0KICAJCQkvL2NvbnNvbGUubG9nKCJoYW5kbGVTb2NrZXRNZXNzYWdlIiwgSlNPTi5zdHJpbmdpZnkobXNnSnNvbikpOwkvL0RFQlVHDQogIAkJCQ0KICAJCQlpZiAobXNnSnNvbi50eXBlID09ICJwaW5nIil7DQogIAkJCQkvL1RPRE86IHNlbmQgb25seSBhZnRlciB3ZWxjb21lDQogIAkJCQl0aGlzLnNlbmRKc29uKHt0eXBlOiAicG9uZyIsIG1zZ19pZDogbXNnSnNvbi5tc2dfaWR9KTsNCg0KICAJCQl9ZWxzZSBpZiAobXNnSnNvbi50eXBlID09ICJ3ZWxjb21lIil7DQogIAkJCQl0aGlzLmxvZygiQ29ubmVjdGlvbiBXRUxDT01FIik7DQogIAkJCQkvL3JlYWQgYWN0aXZlIHNlc3Npb24vZW5naW5lIG9wdGlvbnMNCiAgCQkJCXRoaXMuYWN0aXZlT3B0aW9ucyA9IG1zZ0pzb24uaW5mbz8gbXNnSnNvbi5pbmZvLm9wdGlvbnMgOiB7fTsNCiAgCQkJCXRoaXMuYWN0aXZlTGFuZ3VhZ2VDb2RlID0gdGhpcy5hY3RpdmVPcHRpb25zLmxhbmd1YWdlIHx8ICIiOw0KICAJCQkJdGhpcy5hY3RpdmVBc3JUYXNrID0gdGhpcy5hY3RpdmVPcHRpb25zLnRhc2sgfHwgIiI7DQogIAkJCQl0aGlzLmFjdGl2ZUFzck1vZGVsID0gdGhpcy5hY3RpdmVPcHRpb25zLm1vZGVsIHx8ICIiOw0KICAJCQkJdGhpcy5pc1JlYWR5Rm9yU3RyZWFtID0gdHJ1ZTsNCiAgCQkJCXRoaXMuX29uUmVhZHkodGhpcy5hY3RpdmVPcHRpb25zKTsNCiAgCQkJDQogIAkJCX1lbHNlIGlmIChtc2dKc29uLnR5cGUgPT0gInJlc3VsdCIpew0KICAJCQkJdGhpcy5fb25SZXN1bHQobXNnSnNvbik7DQogIAkJCQlpZiAobXNnSnNvbi5pc0ZpbmFsICYmICF0aGlzLmFjdGl2ZU9wdGlvbnMuY29udGludW91cyAmJiB0aGlzLmF1dG9DbG9zZU9uTGFzdEZpbmFsKXsNCiAgCQkJCQkvL2FmdGVyIGZpbmFsIHJlc3VsdCwgY2xvc2UgY29ubmVjdGlvbg0KICAJCQkJCXRoaXMuY2xvc2VDb25uZWN0aW9uKCk7DQogIAkJCQl9DQogIAkJCX1lbHNlIGlmIChtc2dKc29uLnR5cGUgPT0gInJlc3BvbnNlIik7DQogIAkJfQ0KICAJfQ0KDQogIAloYW5kbGVTb2NrZXRFcnJvcihlcnIpew0KICAJCXZhciBlcnJvciA9IHt9Ow0KICAJCWlmICghZXJyKSBlcnJvciA9IHtuYW1lOiAiU29ja2V0TWVzc2FnZUVycm9yIiwgbWVzc2FnZTogInVua25vd24ifTsNCiAgCQllbHNlIGlmICh0eXBlb2YgZXJyID09ICJzdHJpbmciKSBlcnJvciA9IHtuYW1lOiAiU29ja2V0TWVzc2FnZUVycm9yIiwgbWVzc2FnZTogZXJyfTsNCiAgCQllbHNlIGVycm9yID0ge25hbWU6IChlcnIubmFtZSB8fCAiU29ja2V0TWVzc2FnZUVycm9yIiksIG1lc3NhZ2U6IChlcnIubWVzc2FnZSB8fCAidW5rbm93biIpLCBkZXRhaWxzOiBlcnJ9Ow0KICAJCS8vc2VuZA0KICAJCXRoaXMuX29uRXJyb3IoZXJyb3IpOw0KICAJCS8vRXJyb3JzIGFyZSBub3QgYWNjZXB0YWJsZSA6LXAgLSBjbG9zZSBpbiBhbnkgY2FzZQ0KICAJCXRoaXMuY2xvc2VDb25uZWN0aW9uKCk7CQkvL3RoaXMgaGFzIHByb2JhYmx5IG5vIGVmZmVjdCBhdCBhbGwNCiAgCX0NCg0KICAJc2VuZEpzb24oanNvbil7DQogIAkJaWYgKHRoaXMud2Vic29ja2V0ICYmIHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgPT0gdGhpcy53ZWJzb2NrZXQuT1BFTil7DQogIAkJCXRoaXMud2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoanNvbikpOw0KICAJCQlyZXR1cm4gdHJ1ZTsNCiAgCQl9ZWxzZSB7DQogIAkJCXRoaXMuX29uRXJyb3Ioe25hbWU6ICJTb2NrZXRDb25uZWN0aW9uRXJyb3IiLCBtZXNzYWdlOiAiQ29ubmVjdGlvbiBpcyBjbG9zZWQuIENhbm5vdCBzZW5kIG1lc3NhZ2UuIn0pOw0KICAJCQkvL3Rocm93IGVycm9yPw0KICAJCQlyZXR1cm4gZmFsc2U7DQogIAkJfQ0KICAJfQ0KICAJc2VuZEJ5dGVzKGJ1ZmZlckNodW5rKXsNCiAgCQlpZiAoIXRoaXMud2Vic29ja2V0IHx8IHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgIT0gdGhpcy53ZWJzb2NrZXQuT1BFTil7DQogIAkJCXRoaXMuX29uRXJyb3Ioe25hbWU6ICJTb2NrZXRDb25uZWN0aW9uRXJyb3IiLCBtZXNzYWdlOiAiQ29ubmVjdGlvbiBpcyBjbG9zZWQuIENhbm5vdCBzZW5kIG1lc3NhZ2UuIn0pOw0KICAJCQlyZXR1cm4gZmFsc2U7DQogIAkJfQ0KICAJCXRoaXMud2Vic29ja2V0LnNlbmQoYnVmZmVyQ2h1bmspOwkvL3RoaXMgY2FuIGJlIGEgdHlwZWQgYXJyYXkgKHJlY29tbWVuZGVkKSwgdmlldyBvciBibG9iIChJIGd1ZXNzKQ0KICAJCXJldHVybiB0cnVlOw0KICAJfQ0KICAJc2VuZE1lc3NhZ2UodGV4dCl7DQogIAkJcmV0dXJuIHRoaXMuc2VuZEpzb24oew0KICAJCQkidHlwZSI6ICJjaGF0IiwNCiAgCQkJImRhdGEiOiB7InRleHQiOiB0ZXh0fSwNCiAgCQkJIm1zZ19pZCI6IHRoaXMubmV3TWVzc2FnZUlkKCkNCiAgCQl9KTsNCiAgCX0NCiAgCXNlbmRXZWxjb21lKG9wdGlvbnMpew0KICAJCXZhciBvcHRpb25zVG9TZW5kID0gb3B0aW9ucyB8fCB0aGlzLmFjdGl2ZU9wdGlvbnM7DQogIAkJcmV0dXJuIHRoaXMuc2VuZEpzb24oew0KICAJCQkidHlwZSI6ICJ3ZWxjb21lIiwNCiAgCQkJImRhdGEiOiBvcHRpb25zVG9TZW5kLA0KICAJCQkiY2xpZW50X2lkIjogdGhpcy5jbGllbnRJZCwNCiAgCQkJImFjY2Vzc190b2tlbiI6IHRoaXMuYWNjZXNzVG9rZW4sDQogIAkJCSJtc2dfaWQiOiB0aGlzLm5ld01lc3NhZ2VJZCgpDQogIAkJfSk7DQogIAl9DQogIAlzZW5kQXVkaW9FbmQoYnl0ZUxlbmd0aCwgYnVmZmVyT3JUaW1lTGltaXQpew0KICAJCXJldHVybiB0aGlzLnNlbmRKc29uKHsNCiAgCQkJInR5cGUiOiAiYXVkaW9lbmQiLA0KICAJCQkiZGF0YSI6IHsNCiAgCQkJCSJieXRlTGVuZ3RoIjogYnl0ZUxlbmd0aCwNCiAgCQkJCSJidWZmZXJPclRpbWVMaW1pdCI6IGJ1ZmZlck9yVGltZUxpbWl0DQogIAkJCX0sDQogIAkJCSJtc2dfaWQiOiB0aGlzLm5ld01lc3NhZ2VJZCgpDQogIAkJfSk7DQogIAl9DQogIH0KCiAgb25tZXNzYWdlID0gZnVuY3Rpb24oZSkgew0KICAgICAgLy9BdWRpbyB3b3JrZXIgaW50ZXJmYWNlDQogIAlpZiAoZS5kYXRhLmN0cmwpew0KICAJCXN3aXRjaCAoZS5kYXRhLmN0cmwuYWN0aW9uKXsNCiAgCQkJLy9jb21tb24gaW50ZXJmYWNlDQogIAkJCWNhc2UgImNvbnN0cnVjdCI6DQogIAkJCQljb25zdHJ1Y3RXb3JrZXIoZS5kYXRhLmN0cmwub3B0aW9ucyk7DQogIAkJCQlicmVhazsNCiAgCQkJY2FzZSAicHJvY2VzcyI6DQogIAkJCQlwcm9jZXNzKGUuZGF0YS5jdHJsLmRhdGEpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgImhhbmRsZSI6DQogIAkJCQloYW5kbGVFdmVudChlLmRhdGEuY3RybC5kYXRhKTsJLy9lLmcuOiB0aGlzIHdvcmtlciBzZW5kcyBnYXRlIGV2ZW50cw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0YXJ0IjoNCiAgCQkJCXN0YXJ0KGUuZGF0YS5jdHJsLm9wdGlvbnMpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0b3AiOg0KICAJCQkJc3RvcChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZXNldCI6DQogIAkJCQlyZXNldChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZWxlYXNlIjoNCiAgCQkJY2FzZSAiY2xvc2UiOg0KICAJCQkJcmVsZWFzZShlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQlkZWZhdWx0Og0KICAJCQkJY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gVW5rbm93biBjb250cm9sIG1lc3NhZ2U6IiwgZS5kYXRhKTsNCiAgCQkJCWJyZWFrOw0KICAJCX0NCiAgCX0NCiAgCS8vY3VzdG9tIGludGVyZmFjZQ0KICAJaWYgKGUuZGF0YS5nYXRlICE9IHVuZGVmaW5lZCl7DQogIAkJaWYgKGRvRGVidWcpIGNvbnNvbGUuZXJyb3IoIlN0dFNvY2tldFdvcmtlciAtIERFQlVHIC0gTWVzc2FnZSIsIGUuZGF0YSk7CQkJLy9ERUJVRw0KICAJCWdhdGVDb250cm9sKGUuZGF0YS5nYXRlICYmIGUuZGF0YS5nYXRlID09ICJvcGVuIiwgZS5kYXRhLmdhdGVPcHRpb25zKTsNCiAgCX0NCiAgfTsNCg0KICBsZXQgd29ya2VySWQgPSAic3R0LXNvY2tldC13b3JrZXItIiArIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApICsgIi0iICsgRGF0ZS5ub3coKTsNCiAgbGV0IGRvRGVidWcgPSBmYWxzZTsNCiAgbGV0IGVuYWJsZURyeVJ1biA9IGZhbHNlOwkJLy9za2lwIHNlcnZlciBhbmQgZ2VuZXJhdGUgcHNldWRvIHJlc3VsdCBldmVudHMgdG8gZGVidWcgVUkgZXZlbnQgZmxvdw0KICBsZXQgcmV0dXJuQXVkaW9GaWxlID0gZmFsc2U7DQogIGxldCB3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IGZhbHNlOw0KDQogIGxldCBzb2NrZXRVcmw7DQogIGxldCBjbGllbnRJZCA7DQogIGxldCBhY2Nlc3NUb2tlbjsNCiAgbGV0IHN0dFNlcnZlcjsNCg0KICBsZXQgbWVzc2FnZUZvcm1hdDsJCQkvL2UuZy46ICJ3ZWJTcGVlY2hBcGkiIG9yICJkZWZhdWx0Ig0KDQogIGxldCBpbnB1dFNhbXBsZVJhdGU7DQogIGxldCBpbnB1dFNhbXBsZVNpemU7DQogIGxldCBjaGFubmVsQ291bnQ7DQogIGxldCBpc0Zsb2F0MzJJbnB1dDsJCS8vZGVmYXVsdCBmYWxzZQ0KICBsZXQgZW5jb2RlckJpdERlcHRoID0gMTY7DQogIGxldCBfYnl0ZXNQZXJTYW1wbGUgPSBlbmNvZGVyQml0RGVwdGgvODsNCg0KICBsZXQgbG9va2JhY2tCdWZmZXJNczsNCiAgbGV0IGxvb2tiYWNrQnVmZmVySXNCbG9ja2VkOw0KICBsZXQgX2xvb2tiYWNrQnVmZmVyU2l6ZTsNCiAgbGV0IF9sb29rYmFja1JpbmdCdWZmZXI7DQogIGxldCByZWNvcmRlZEJ1ZmZlcnM7DQogIGxldCBfc2VudEJ1ZmZlcnM7DQogIGxldCBfc2hpZnRlZEJ1ZmZlcnM7DQogIGxldCByZWNvcmRCdWZmZXJNYXhOOw0KICBsZXQgY29udGludW91czsJCS8vTk9URTogdGhpcyBpcyBhbiBlbmdpbmUgb3B0aW9uIGJ1dCBpbmZsdWVuY2VzIGZ1bGwgYnVmZmVyIGFzIHdlbGwNCg0KICBsZXQgZ2F0ZUlzT3BlbiA9IGZhbHNlOw0KICBsZXQgX2dhdGVPcGVuVFMgPSAwOw0KICBsZXQgX2dhdGVDbG9zZVRTID0gMDsNCg0KICBsZXQgX2lzRmlyc3RWYWxpZFByb2Nlc3MgPSB0cnVlOw0KDQogIGZ1bmN0aW9uIGluaXQoKXsNCiAgCXJlY29yZGVkQnVmZmVycyA9IG51bGw7DQogIAlfbG9va2JhY2tSaW5nQnVmZmVyID0gbnVsbDsNCiAgCWxvb2tiYWNrQnVmZmVySXNCbG9ja2VkID0gZmFsc2U7DQogIAlpZiAobG9va2JhY2tCdWZmZXJNcyl7DQogIAkJX2xvb2tiYWNrQnVmZmVyU2l6ZSA9IE1hdGgucm91bmQoKGxvb2tiYWNrQnVmZmVyTXMvMTAwMCkgKiBpbnB1dFNhbXBsZVJhdGUpOw0KICAJCWlmIChpc0Zsb2F0MzJJbnB1dCl7DQogIAkJCV9sb29rYmFja1JpbmdCdWZmZXIgPSBuZXcgUmluZ0J1ZmZlcihfbG9va2JhY2tCdWZmZXJTaXplLCBjaGFubmVsQ291bnQsICJGbG9hdDMyIik7CS8vVE9ETzogdGVzdCBmb3IgRmxvYXQzMg0KICAJCX1lbHNlIHsNCiAgCQkJX2xvb2tiYWNrUmluZ0J1ZmZlciA9IG5ldyBSaW5nQnVmZmVyKF9sb29rYmFja0J1ZmZlclNpemUsIGNoYW5uZWxDb3VudCwgIkludDE2Iik7DQogIAkJfQ0KICAJfWVsc2Ugew0KICAJCV9sb29rYmFja0J1ZmZlclNpemUgPSAwOw0KICAJfQ0KICAJcmVjb3JkZWRCdWZmZXJzID0gW107DQogIAlfc2VudEJ1ZmZlcnMgPSAwOw0KICAJX3NoaWZ0ZWRCdWZmZXJzID0gMDsNCiAgCV9pc0ZpcnN0VmFsaWRQcm9jZXNzID0gdHJ1ZTsNCiAgCWdhdGVJc09wZW4gPSBmYWxzZTsNCiAgCV9nYXRlT3BlblRTID0gMDsNCiAgCV9nYXRlQ2xvc2VUUyA9IDA7DQogIH0NCg0KICAvL1JlcXVlc3RzDQoNCiAgZnVuY3Rpb24gZ2F0ZUNvbnRyb2wob3BlbiwgZ2F0ZU9wdGlvbnMsIHRyaWdnZXJlZE9uRXJyb3Ipew0KICAJdmFyIG1zZyA9IHsNCiAgCQltb2R1bGVFdmVudDogdHJ1ZSwJCS8vdXNlICdtb2R1bGVFdmVudCcgdG8gZGlzdGluZ3Vpc2ggZnJvbSBub3JtYWwgcHJvY2Vzc2luZyByZXN1bHQNCiAgCQlnYXRlOiB7fQ0KICAJfTsNCiAgCWlmIChvcGVuKXsNCiAgCQkvL3dlIGFsd2F5cyByZXNldCB0aGUgYnVmZmVyDQogIAkJcmVjb3JkZWRCdWZmZXJzID0gW107DQogIAkJX3NlbnRCdWZmZXJzID0gMDsNCiAgCQlfc2hpZnRlZEJ1ZmZlcnMgPSAwOw0KICAJCV9nYXRlT3BlblRTID0gRGF0ZS5ub3coKTsNCiAgCQlnYXRlSXNPcGVuID0gdHJ1ZTsNCiAgCQltc2cuZ2F0ZS5pc09wZW4gPSB0cnVlOw0KICAJCW1zZy5nYXRlLm9wZW5lZEF0ID0gX2dhdGVPcGVuVFM7DQogIAkJLy9vcGVuIGNvbm5lY3Rpb24NCiAgCQlpZiAoc3R0U2VydmVyKXsNCiAgCQkJc3R0U2VydmVyLm9wZW5Db25uZWN0aW9uKCk7DQogIAkJfQ0KICAJfWVsc2Ugew0KICAJCV9nYXRlQ2xvc2VUUyA9IERhdGUubm93KCk7DQogIAkJZ2F0ZUlzT3BlbiA9IGZhbHNlOw0KICAJCW1zZy5nYXRlLmlzT3BlbiA9IGZhbHNlOw0KICAJCW1zZy5nYXRlLm9wZW5lZEF0ID0gX2dhdGVPcGVuVFM7DQogIAkJbXNnLmdhdGUuY2xvc2VkQXQgPSBfZ2F0ZUNsb3NlVFM7DQogIAkJLy8tLS0tLS0tLS0tIERSWS1SVU4gVEVTVDogZmFrZSBmaW5hbCByZXN1bHQgLS0tLS0tLS0tLQ0KICAJCWlmIChlbmFibGVEcnlSdW4gJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCAmJiByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoID4gcmVjb3JkQnVmZmVyTWF4Ti8zKXsNCiAgCQkJc2V0VGltZW91dChmdW5jdGlvbigpew0KICAJCQkJLy9maW5hbCByZXN1bHQNCiAgCQkJCWlmIChtZXNzYWdlRm9ybWF0ID09ICJ3ZWJTcGVlY2hBcGkiKXsNCiAgCQkJCQlzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZVJlY29nbml0aW9uUmVzdWx0KHRydWUsICJFbmQgb2YgdGVzdCBtZXNzYWdlIik7DQogIAkJCQl9ZWxzZSB7DQogIAkJCQkJc2VuZERlZmF1bHRSZWNvZ25pdGlvblJlc3VsdCh7InR5cGUiOiJyZXN1bHQiLCJtc2dfaWQiOkRhdGUubm93KCksImNvZGUiOjIwMCwidHJhbnNjcmlwdCI6IkVuZCBvZiB0ZXN0IG1lc3NhZ2UiLCJpc0ZpbmFsIjp0cnVlfSk7DQogIAkJCQl9DQogIAkJCX0sIDIwMDApOw0KICAJCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAJCX1lbHNlIGlmIChzdHRTZXJ2ZXIgJiYgc3R0U2VydmVyLmNvbm5lY3Rpb25Jc09wZW4gJiYgc3R0U2VydmVyLmlzUmVhZHlGb3JTdHJlYW0pew0KICAJCQl2YXIgY2xvc2VkRHVlVG9CdWZmZXJMaW1pdCA9IGNoZWNrSWZCdWZmZXJMaW1pdFdhc1JlYWNoZWQoKTsNCiAgCQkJaWYgKGNsb3NlZER1ZVRvQnVmZmVyTGltaXQpew0KICAJCQkJbXNnLmdhdGUuYnVmZmVyT3JUaW1lTGltaXQgPSB0cnVlOw0KICAJCQl9DQogIAkJCS8vY2xvc2UgaW5wdXQgYW5kIHJlcXVlc3QgZmluYWwgcmVzdWx0DQogIAkJCXJlcXVlc3RGaW5hbFJlc3VsdChjbG9zZWREdWVUb0J1ZmZlckxpbWl0KTsNCiAgCQl9DQogIAkJLy9lbHNlIHdlIHJlbHkgb24gJ19nYXRlQ2xvc2VUUycgdG8gZmluaXNoIGFmdGVyIGxhc3QgYnVmZmVyIGlzIHNlbnQNCg0KICAJCS8vc2VuZCBXQVY/DQogIAkJaWYgKCF0cmlnZ2VyZWRPbkVycm9yICYmIHJldHVybkF1ZGlvRmlsZSAmJiByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoKXsNCiAgCQkJc2V0VGltZW91dChmdW5jdGlvbigpew0KICAJCQkJc2VuZFdhdmVGaWxlQXJyYXlCdWZmZXIoZ2V0V2F2ZSgpKTsNCiAgCQkJfSwgMTAwKTsNCiAgCQl9DQogIAl9DQogIAlwb3N0TWVzc2FnZShtc2cpOw0KICB9DQoNCiAgZnVuY3Rpb24gZ2V0V2F2ZSgpew0KICAJdmFyIHZpZXc7DQogIAl2YXIgdG90YWxMZW5ndGggPSAwOw0KICAJcmVjb3JkZWRCdWZmZXJzLmZvckVhY2goZnVuY3Rpb24odil7DQogIAkJdG90YWxMZW5ndGggKz0gdi5ieXRlTGVuZ3RoOw0KICAJfSk7DQogIAlpZiAodG90YWxMZW5ndGgpew0KICAJCXZpZXcgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKHRvdGFsTGVuZ3RoKSk7DQogIAkJdmFyIG9mZnNldCA9IDA7DQogIAkJcmVjb3JkZWRCdWZmZXJzLmZvckVhY2goZnVuY3Rpb24odil7DQogIAkJCWZvciAobGV0IGkgPSAwOyBpIDwgdi5ieXRlTGVuZ3RoOyBpKyspew0KICAJCQkJdmlldy5zZXRVaW50OChvZmZzZXQsIHYuZ2V0VWludDgoaSkpOw0KICAJCQkJb2Zmc2V0Kys7DQogIAkJCX0NCiAgCQl9KTsNCiAgCX0NCiAgCXJldHVybiB2aWV3Ow0KICB9DQoNCiAgLy9JbnRlcmZhY2UNCg0KICBmdW5jdGlvbiBjb25zdHJ1Y3RXb3JrZXIob3B0aW9ucyl7DQogIAlpZiAod2FzQ29uc3RydWN0b3JDYWxsZWQpew0KICAJCWNvbnNvbGUuZXJyb3IoIlN0dFNvY2tldFdvcmtlciAtIENvbnN0cnVjdG9yIHdhcyBjYWxsZWQgdHdpY2UhIDJuZCBjYWxsIHdhcyBpZ25vcmVkIGJ1dCB0aGlzIHNob3VsZCBiZSBmaXhlZCEiLCAiLSIsIHdvcmtlcklkKTsJLy9ERUJVRw0KICAJCXJldHVybjsNCiAgCX1lbHNlIHsNCiAgCQl3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IHRydWU7DQogIAl9DQogIAlkb0RlYnVnID0gb3B0aW9ucy5zZXR1cC5kb0RlYnVnIHx8IGZhbHNlOw0KICAJcmV0dXJuQXVkaW9GaWxlID0gb3B0aW9ucy5zZXR1cC5yZXR1cm5BdWRpb0ZpbGUgfHwgZmFsc2U7DQoNCiAgCS8vcmVjb3JkZXINCiAgCWlucHV0U2FtcGxlUmF0ZSA9IG9wdGlvbnMuc2V0dXAuaW5wdXRTYW1wbGVSYXRlIHx8IG9wdGlvbnMuc2V0dXAuY3R4SW5mby50YXJnZXRTYW1wbGVSYXRlIHx8IG9wdGlvbnMuc2V0dXAuY3R4SW5mby5zYW1wbGVSYXRlOw0KICAJaW5wdXRTYW1wbGVTaXplID0gb3B0aW9ucy5zZXR1cC5pbnB1dFNhbXBsZVNpemUgfHwgNTEyOw0KICAJY2hhbm5lbENvdW50ID0gMTsJLy9vcHRpb25zLnNldHVwLmNoYW5uZWxDb3VudCB8fCAxOwkJLy9UT0RPOiBvbmx5IE1PTk8gYXRtDQogIAlsb29rYmFja0J1ZmZlck1zID0gKG9wdGlvbnMuc2V0dXAubG9va2JhY2tCdWZmZXJNcyAhPSB1bmRlZmluZWQpPyBvcHRpb25zLnNldHVwLmxvb2tiYWNrQnVmZmVyTXMgOiAwOw0KICAJaXNGbG9hdDMySW5wdXQgPSAob3B0aW9ucy5zZXR1cC5pc0Zsb2F0MzIgIT0gdW5kZWZpbmVkKT8gb3B0aW9ucy5zZXR1cC5pc0Zsb2F0MzIgOiBmYWxzZTsNCiAgCQ0KICAJaWYgKG9wdGlvbnMuc2V0dXAucmVjb3JkQnVmZmVyTGltaXRNcyAhPSB1bmRlZmluZWQpew0KICAJCXJlY29yZEJ1ZmZlck1heE4gPSAoaW5wdXRTYW1wbGVSYXRlICogb3B0aW9ucy5zZXR1cC5yZWNvcmRCdWZmZXJMaW1pdE1zLzEwMDApIC8gaW5wdXRTYW1wbGVTaXplOw0KICAJfWVsc2UgaWYgKG9wdGlvbnMuc2V0dXAucmVjb3JkQnVmZmVyTGltaXRLYiAhPSB1bmRlZmluZWQpew0KICAJCXJlY29yZEJ1ZmZlck1heE4gPSAob3B0aW9ucy5zZXR1cC5yZWNvcmRCdWZmZXJMaW1pdEtiICogMTAyNCkgLyAoMiAqIGlucHV0U2FtcGxlU2l6ZSk7DQogIAl9ZWxzZSB7DQogIAkJcmVjb3JkQnVmZmVyTWF4TiA9IDUyNDI4ODAgLyAoMiAqIGlucHV0U2FtcGxlU2l6ZSk7CS8vbWF4IDVNQiA9ICg1MjQyODgwW2J5dGVzXS8oYnl0ZXNQZXJTYW1wbGUgKiBzYW1wbGVTaXplKSkNCiAgCX0NCiAgCXJlY29yZEJ1ZmZlck1heE4gPSBNYXRoLmNlaWwocmVjb3JkQnVmZmVyTWF4Tik7DQogIAlpZiAocmVjb3JkQnVmZmVyTWF4TiA8IDApIHJlY29yZEJ1ZmZlck1heE4gPSAwOw0KDQogIAkvL2VuZCBvbiBmaXJzdCBmaW5hbCByZXN1bHQ/IC0gTk9URTogdGhpcyB3b3JrcyBhIGJpdCBkaWZmZXJlbnQgdGhhbiBXZWJTcGVlY2ggImNvbnRpbnVvdXMiDQogIAljb250aW51b3VzID0gKG9wdGlvbnMuc2V0dXAuY29udGludW91cyAhPSB1bmRlZmluZWQpPyBvcHRpb25zLnNldHVwLmNvbnRpbnVvdXMgOiBmYWxzZTsNCiAgCS8vaW50ZXJpbVJlc3VsdHMgKHVudXNlZD8pDQoNCiAgCS8vc2VydmVyDQogIAlzb2NrZXRVcmwgPSBvcHRpb25zLnNldHVwLnNvY2tldFVybCB8fCBvcHRpb25zLnNldHVwLnNlcnZlclVybCB8fCAiaHR0cDovL2xvY2FsaG9zdDoyMDc0MSI7DQogIAljbGllbnRJZCA9IG9wdGlvbnMuc2V0dXAuY2xpZW50SWQgfHwgImFueSI7DQogIAlhY2Nlc3NUb2tlbiA9IG9wdGlvbnMuc2V0dXAuYWNjZXNzVG9rZW4gfHwgInRlc3QxMjM0IjsNCiAgCW1lc3NhZ2VGb3JtYXQgPSBvcHRpb25zLnNldHVwLm1lc3NhZ2VGb3JtYXQgfHwgImRlZmF1bHQiOw0KICAJaWYgKHNvY2tldFVybCA9PSAiZGVidWciKXsNCiAgCQllbmFibGVEcnlSdW4gPSB0cnVlOw0KICAJCXJldHVybkF1ZGlvRmlsZSA9IHRydWU7DQogIAl9ZWxzZSB7DQogIAkJdmFyIGVuZ2luZU9wdGlvbnMgPSBvcHRpb25zLnNldHVwLmVuZ2luZU9wdGlvbnMgfHwge307CS8vYWxsIG9wdGlvbnMgKGNvbW1vbiBhbmQgZW5naW5lIHNwZWNpZmljKQ0KICAJCS8vY29tbW9uIG9wdGlvbiBzaG9ydGN1dHMgKG92ZXJ3cml0ZXMgZW5naW5lT3B0aW9ucyAtIHVzdWFsbHkgc3VwcG9ydGVkIGJ5IGFsbCBlbmdpbmVzKToNCiAgCQllbmdpbmVPcHRpb25zLnNhbXBsZXJhdGUgPSBpbnB1dFNhbXBsZVJhdGU7DQogIAkJZW5naW5lT3B0aW9ucy5jb250aW51b3VzID0gY29udGludW91czsNCiAgCQlpZiAob3B0aW9ucy5zZXR1cC5sYW5ndWFnZSkgZW5naW5lT3B0aW9ucy5sYW5ndWFnZSA9IG9wdGlvbnMuc2V0dXAubGFuZ3VhZ2U7CS8vZS5nLjogImRlLURFIg0KICAJCWlmIChvcHRpb25zLnNldHVwLnRhc2spIGVuZ2luZU9wdGlvbnMudGFzayA9IG9wdGlvbnMuc2V0dXAudGFzazsJCQkJLy9lLmcuOiAiY29udmVyc2F0aW9uIg0KICAJCWlmIChvcHRpb25zLnNldHVwLm1vZGVsKSBlbmdpbmVPcHRpb25zLm1vZGVsID0gb3B0aW9ucy5zZXR1cC5tb2RlbDsJCQkJLy9lLmcuOiAidm9zay1tb2RlbC1zbWFsbC1kZSINCiAgCQlpZiAob3B0aW9ucy5zZXR1cC5vcHRpbWl6ZUZpbmFsUmVzdWx0ICE9IHVuZGVmaW5lZCkgZW5naW5lT3B0aW9ucy5vcHRpbWl6ZUZpbmFsUmVzdWx0ID0gb3B0aW9ucy5zZXR1cC5vcHRpbWl6ZUZpbmFsUmVzdWx0Ow0KICAJCWVuZ2luZU9wdGlvbnMuZG9EZWJ1ZyA9IGRvRGVidWc7DQogIAkJLy9zcGVjaWFsIG9wdGlvbnMgKGUuZy4gZm9yIFZvc2spOg0KICAJCS8qDQogIAkJYWx0ZXJuYXRpdmVzOiAxLA0KICAJCXBocmFzZXM6IFtdLA0KICAJCXNwZWFrZXI6IGZhbHNlLA0KICAJCXdvcmRzOiBmYWxzZQ0KICAJCSovDQogIAkJLy9jb25zb2xlLmVycm9yKCJlbmdpbmVPcHRpb25zIiwgZW5naW5lT3B0aW9ucyk7CQkvL0RFQlVHDQogIAkJdmFyIHNlcnZlck9wdGlvbnMgPSB7DQogIAkJCW9uT3BlbjogZnVuY3Rpb24oKXsNCiAgCQkJCWlmIChkb0RlYnVnKSBjb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBERUJVRyAtIENPTk5FQ1RJT04gT1BFTiIpOw0KICAJCQkJc2VuZENvbm5lY3Rpb25FdmVudCgib3BlbiIpOw0KICAJCQl9LA0KICAJCQlvblJlYWR5OiBmdW5jdGlvbihhY3RpdmVPcHRpb25zKXsNCiAgCQkJCWlmIChkb0RlYnVnKSBjb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBERUJVRyAtIENPTk5FQ1RJT04gUkVBRFkiLCBhY3RpdmVPcHRpb25zKTsNCiAgCQkJCXNlbmRDb25uZWN0aW9uRXZlbnQoInJlYWR5IiwgYWN0aXZlT3B0aW9ucyk7DQogIAkJCQkvL21ha2Ugc3VyZSBzdHJlYW0gc3RhcnRzIG9yIGNvbnRpbnVlcw0KICAJCQkJc3RhcnRPckNvbnRpbnVlU3RyZWFtKCk7DQogIAkJCX0sDQogIAkJCW9uQ2xvc2U6IGZ1bmN0aW9uKCl7DQogIAkJCQlpZiAoZG9EZWJ1ZykgY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gREVCVUcgLSBDT05ORUNUSU9OIENMT1NFRCIpOw0KICAJCQkJc2VuZENvbm5lY3Rpb25FdmVudCgiY2xvc2VkIik7DQogIAkJCX0sDQogIAkJCW9uUmVzdWx0OiBmdW5jdGlvbihyZXMpew0KICAJCQkJaWYgKGRvRGVidWcpIGNvbnNvbGUuZXJyb3IoIlN0dFNvY2tldFdvcmtlciAtIERFQlVHIC0gQ09OTkVDVElPTiBSRVNVTFQiLCByZXMpOw0KICAJCQkJaWYgKG1lc3NhZ2VGb3JtYXQgPT0gIndlYlNwZWVjaEFwaSIpew0KICAJCQkJCXNlbmRXZWJTcGVlY2hDb21wYXRpYmxlUmVjb2duaXRpb25SZXN1bHQocmVzLmlzRmluYWwsIHJlcy50cmFuc2NyaXB0KTsNCiAgCQkJCX1lbHNlIHsNCiAgCQkJCQlzZW5kRGVmYXVsdFJlY29nbml0aW9uUmVzdWx0KHJlcyk7DQogIAkJCQl9DQogIAkJCQkvL2lmIHJlc3VsdCBpcyBmaW5hbCBhbmQgZ2F0ZSBpcyBjbG9zZWQgLT4gY2xvc2UgY29ubmVjdGlvbg0KICAJCQkJaWYgKHJlcy5pc0ZpbmFsICYmICFnYXRlSXNPcGVuICYmIHN0dFNlcnZlciAmJiBzdHRTZXJ2ZXIuY29ubmVjdGlvbklzT3Blbil7DQogIAkJCQkJc3R0U2VydmVyLmNsb3NlQ29ubmVjdGlvbigpOw0KICAJCQkJfQ0KICAJCQl9LA0KICAJCQlvbkVycm9yOiBmdW5jdGlvbihlcnIpeyANCiAgCQkJCWlmICghZXJyKSBlcnIgPSB7bmFtZTogIlVua25vd25FcnJvciIsIG1lc3NhZ2U6ICJVbmtub3duIGVycm9yIn07DQogIAkJCQljb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBDT05ORUNUSU9OIEVSUk9SIiwgZXJyKTsNCiAgCQkJCWlmIChtZXNzYWdlRm9ybWF0ID09ICJ3ZWJTcGVlY2hBcGkiKXsNCiAgCQkJCQl2YXIgcmVhc29uID0gInVua25vd24iOw0KICAJCQkJCWlmIChlcnIubmFtZSA9PSAiU29ja2V0Q29ubmVjdGlvbkVycm9yIil7DQogIAkJCQkJCXJlYXNvbiA9ICJuZXR3b3JrIjsNCiAgCQkJCQl9ZWxzZSBpZiAoZXJyLm5hbWUgPT0gIlVuYXV0aG9yaXplZCIpew0KICAJCQkJCQkvL3JlYXNvbiA9ICJub3QtYWxsb3dlZCI7CS8vTk9URTogY3VycmVudGx5IG1pc3Rha2VuIGZvciBtaWNyb3Bob25lIHBlcm1pc3Npb24gZXJyb3INCiAgCQkJCQkJcmVhc29uID0gInNlcnZpY2Utbm90LWFsbG93ZWQiOw0KICAJCQkJCX0NCiAgCQkJCQlzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZUVycm9yKHJlYXNvbiwgZXJyLm1lc3NhZ2UgfHwgZXJyLm5hbWUgfHwgIiIpOw0KICAJCQkJfWVsc2Ugew0KICAJCQkJCXNlbmREZWZhdWx0RXJyb3JFdmVudChlcnIpOw0KICAJCQkJfQ0KICAJCQkJLy9tYWtlIHN1cmUgc3RyZWFtIHN0b3BzDQogIAkJCQlpZiAoZ2F0ZUlzT3Blbil7DQogIAkJCQkJZ2F0ZUNvbnRyb2woZmFsc2UsIHt9LCB0cnVlKTsNCiAgCQkJCX0NCiAgCQkJfQ0KICAJCX07DQogIAkJc3R0U2VydmVyID0gbmV3IFNlcGlhU3R0U29ja2V0Q2xpZW50KHNvY2tldFVybCwgY2xpZW50SWQsIGFjY2Vzc1Rva2VuLCBlbmdpbmVPcHRpb25zLCBzZXJ2ZXJPcHRpb25zKTsNCiAgCX0NCiAgCQ0KICAJaW5pdCgpOw0KICAgICAgCQ0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiAxLA0KICAJCW1vZHVsZUluZm86IHsNCiAgCQkJbW9kdWxlSWQ6IHdvcmtlcklkLA0KICAJCQlpbnB1dFNhbXBsZVJhdGU6IGlucHV0U2FtcGxlUmF0ZSwNCiAgCQkJaW5wdXRTYW1wbGVTaXplOiBpbnB1dFNhbXBsZVNpemUsDQogIAkJCWlucHV0SXNGbG9hdDMyOiBpc0Zsb2F0MzJJbnB1dCwNCiAgCQkJY2hhbm5lbENvdW50OiBjaGFubmVsQ291bnQsDQogIAkJCWxvb2tiYWNrQnVmZmVyU2l6ZUtiOiBNYXRoLmNlaWwoKF9sb29rYmFja0J1ZmZlclNpemUgKiAyKS8xMDI0KSwJLy8xIHNhbXBsZSA9IDIgYnl0ZXMNCiAgCQkJbG9va2JhY2tMaW1pdE1zOiBsb29rYmFja0J1ZmZlck1zLA0KICAJCQlyZWNvcmRMaW1pdE1zOiBNYXRoLmNlaWwoKHJlY29yZEJ1ZmZlck1heE4gKiBpbnB1dFNhbXBsZVNpemUgKiAxMDAwKS9pbnB1dFNhbXBsZVJhdGUpLA0KICAJCQlzdHRTZXJ2ZXJVcmw6IHNvY2tldFVybCwNCiAgCQkJc3R0U2VydmVyT3B0aW9uczogKHN0dFNlcnZlcj8gc3R0U2VydmVyLmFjdGl2ZU9wdGlvbnMgOiB7fSkNCiAgCQl9DQogIAl9KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHByb2Nlc3MoZGF0YSl7DQogIAkvL2V4cGVjdGVkOiBkYXRhLnNhbXBsZXMsIGRhdGEuc2FtcGxlUmF0ZSwgZGF0YS50YXJnZXRTYW1wbGVSYXRlLCBkYXRhLmNoYW5uZWxzLCBkYXRhLnR5cGUNCiAgCS8vVE9ETzogY2hlY2sgcHJvY2VzcyB2YWx1ZXMgYWdhaW5zdCBjb25zdHJ1Y3RvciB2YWx1ZXMgKHNhbXBsZVNpemUgZXRjLikNCiAgCWlmIChkYXRhICYmIGRhdGEuc2FtcGxlcyl7DQogIAkJaWYgKF9pc0ZpcnN0VmFsaWRQcm9jZXNzKXsNCiAgCQkJLy9jb25zb2xlLmVycm9yKCJkYXRhIGluZm8iLCBkYXRhKTsJCS8vREVCVUcNCiAgCQkJX2lzRmlyc3RWYWxpZFByb2Nlc3MgPSBmYWxzZTsNCiAgCQkJLy9jaGVjazogaW5wdXRTYW1wbGVSYXRlLCBpbnB1dFNhbXBsZVNpemUsIGNoYW5uZWxDb3VudCwgZmxvYXQzMg0KICAJCQlpZiAoZGF0YS5zYW1wbGVSYXRlICE9IGlucHV0U2FtcGxlUmF0ZSl7DQogIAkJCQl2YXIgbXNnID0gIlNhbXBsZS1yYXRlIG1pc21hdGNoISBTaG91bGQgYmUgJyIgKyBpbnB1dFNhbXBsZVJhdGUgKyAiJyBpcyAnIiArIGRhdGEuc2FtcGxlUmF0ZSArICInIjsNCiAgCQkJCWNvbnNvbGUuZXJyb3IoIkF1ZGlvIFdvcmtlciBzYW1wbGUtcmF0ZSBleGNlcHRpb24gLSBNc2cuOiAiICsgbXNnKTsNCiAgCQkJCXRocm93IEpTT04uc3RyaW5naWZ5KG5ldyBTYW1wbGVSYXRlRXhjZXB0aW9uKG1zZykpOwkJCS8vTk9URTogdGhpcyBuZWVkcyB0byBiZSBhIHN0cmluZyB0byBzaG93IHVwIGluIHdvcmtlci5vbmVycm9yIHByb3Blcmx5IDotLw0KICAJCQl9DQogIAkJCXZhciBpbnB1dEFycmF5VHlwZSA9IGRhdGEudHlwZSB8fCBkYXRhLnNhbXBsZXNbMF0uY29uc3RydWN0b3IubmFtZTsNCiAgCQkJdmFyIGlzRmxvYXQzMiA9IChpbnB1dEFycmF5VHlwZS5pbmRleE9mKCJGbG9hdDMyIikgPj0gMCk7DQogIAkJCWlmIChpc0Zsb2F0MzIgIT0gaXNGbG9hdDMySW5wdXQpew0KICAJCQkJdmFyIG1zZyA9ICJBcnJheSB0eXBlIG1pc21hdGNoISBJbnB1dCBzYW1wbGVzIGFyZSBvZiB0eXBlICciICsgaW5wdXRBcnJheVR5cGUgKyAiJyBidXQgZXhwZWN0ZWQ6ICIgKyAoaXNGbG9hdDMySW5wdXQ/ICJGbG9hdDMyIiA6ICJJbnQxNiIpOw0KICAJCQkJY29uc29sZS5lcnJvcigiQXVkaW8gV29ya2VyIHR5cGUgZXhjZXB0aW9uIC0gTXNnLjogIiArIG1zZyk7DQogIAkJCQl0aHJvdyBKU09OLnN0cmluZ2lmeShuZXcgQXJyYXlUeXBlRXhjZXB0aW9uKG1zZykpOwkJCS8vTk9URTogdGhpcyBuZWVkcyB0byBiZSBhIHN0cmluZyB0byBzaG93IHVwIGluIHdvcmtlci5vbmVycm9yIHByb3Blcmx5IDotLw0KICAJCQl9DQogIAkJfQ0KICAJCWlmIChnYXRlSXNPcGVuKXsNCiAgCQkJYnVpbGRQY21DaHVua3MoZGF0YSk7DQogIAkJCQ0KICAJCX1lbHNlIGlmIChsb29rYmFja0J1ZmZlck1zICYmICFsb29rYmFja0J1ZmZlcklzQmxvY2tlZCl7DQogIAkJCS8vZG8gdGhpcyBvbmx5IHVudGlsIGdhdGUgd2FzIG9wZW5lZCAuLiB0aGVuIHdhaXQgZm9yIGJ1ZmZlciBleHBvcnQvY2xlYXINCiAgCQkJX2xvb2tiYWNrUmluZ0J1ZmZlci5wdXNoKGRhdGEuc2FtcGxlcyk7DQogIAkJfQ0KICAJfQ0KICB9DQoNCiAgZnVuY3Rpb24gYnVpbGRQY21DaHVua3MoZGF0YSl7DQogIAkvL2luZGV4IDANCiAgCWlmIChyZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoID09IDApew0KICAJCS8vMCAtLSBidWlsZCBoZWFkZXINCiAgCQlyZWNvcmRlZEJ1ZmZlcnMucHVzaChnZXRIZWFkZXJGb3JXQVYodW5kZWZpbmVkLCBpbnB1dFNhbXBsZVJhdGUsIGNoYW5uZWxDb3VudCkpOw0KICAJCS8vMSAtLSBhZGQgbG9va2JhY2sgc2FtcGxlcyAtLSBUT0RPOiB0ZXN0IQ0KICAJCWlmIChfbG9va2JhY2tSaW5nQnVmZmVyICYmIF9sb29rYmFja1JpbmdCdWZmZXIuZnJhbWVzQXZhaWxhYmxlKXsNCiAgCQkJLy9wdWxsIGFsbCBsb29rYmFjayBzYW1wbGVzDQogIAkJCXZhciBsb29rYmFja1NhbXBsZXM7DQogIAkJCWlmIChpc0Zsb2F0MzJJbnB1dCl7DQogIAkJCQlsb29rYmFja1NhbXBsZXMgPSBbbmV3IEZsb2F0MzJBcnJheShfbG9va2JhY2tSaW5nQnVmZmVyLmZyYW1lc0F2YWlsYWJsZSldOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlsb29rYmFja1NhbXBsZXMgPSBbbmV3IEludDE2QXJyYXkoX2xvb2tiYWNrUmluZ0J1ZmZlci5mcmFtZXNBdmFpbGFibGUpXTsNCiAgCQkJfQ0KICAJCQlfbG9va2JhY2tSaW5nQnVmZmVyLnB1bGwobG9va2JhY2tTYW1wbGVzKTsNCiAgCQkJLy9lbmNvZGUgYW5kIGFkZA0KICAJCQlyZWNvcmRlZEJ1ZmZlcnMucHVzaChlbmNvZGVXQVYodW5kZWZpbmVkLCBsb29rYmFja1NhbXBsZXNbMF0sIGlucHV0U2FtcGxlUmF0ZSwgY2hhbm5lbENvdW50LCBpc0Zsb2F0MzJJbnB1dCkpOw0KICAJCX0NCiAgCQlpZiAoZG9EZWJ1ZykgY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gREVCVUcgLSBIZWFkZXIgYW5kIExvb2tiYWNrIEJ1ZmZlciAob3B0aW9uYWwpIiwgcmVjb3JkZWRCdWZmZXJzKTsNCiAgCX0NCiAgCWlmIChkYXRhKXsNCiAgCQkvL1RPRE86IHRoaXMgd2lsbCBhbHdheXMgYmUgb25lIGNoYW5uZWwgT05MWSBzaW5jZSB0aGUgc2lnbmFsIGlzIGludGVybGVhdmVkDQogIAkJcmVjb3JkZWRCdWZmZXJzLnB1c2goZW5jb2RlV0FWKHVuZGVmaW5lZCwgZGF0YS5zYW1wbGVzWzBdLCBpbnB1dFNhbXBsZVJhdGUsIGNoYW5uZWxDb3VudCwgaXNGbG9hdDMySW5wdXQpKTsNCiAgCX0NCiAgCS8vLS0tLS0tLS0tLSBEUlktUlVOIFRFU1Q6IGZha2UgcGFydGlhbCByZXN1bHQgLS0tLS0tLS0tLQ0KICAJaWYgKGVuYWJsZURyeVJ1bil7DQogIAkJaWYgKHJlY29yZGVkQnVmZmVycy5sZW5ndGggPT0gTWF0aC5jZWlsKHJlY29yZEJ1ZmZlck1heE4vNCkpew0KICAJCQlpZiAoZG9EZWJ1ZykgY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gREVCVUcgLSBSZWFjaGVkIGEgcXVhcnRlciBvZiBtYXguIHRpbWUiLCByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoKTsNCiAgCQkJaWYgKG1lc3NhZ2VGb3JtYXQgPT0gIndlYlNwZWVjaEFwaSIpew0KICAJCQkJc2VuZFdlYlNwZWVjaENvbXBhdGlibGVSZWNvZ25pdGlvblJlc3VsdChmYWxzZSwgIkVuZCBvZiAuLi4iKTsNCiAgCQkJfWVsc2Ugew0KICAJCQkJc2VuZERlZmF1bHRSZWNvZ25pdGlvblJlc3VsdCh7InR5cGUiOiJyZXN1bHQiLCJtc2dfaWQiOkRhdGUubm93KCksImNvZGUiOjIwMCwidHJhbnNjcmlwdCI6IkVuZCBvZiAuLi4iLCJpc0ZpbmFsIjpmYWxzZX0pOw0KICAJCQl9DQogIAkJfQ0KICAJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIAl9ZWxzZSBpZiAoc3R0U2VydmVyICYmIHN0dFNlcnZlci5jb25uZWN0aW9uSXNPcGVuICYmIHN0dFNlcnZlci5pc1JlYWR5Rm9yU3RyZWFtKXsNCiAgCQkvL3NlbmQgYnVmZmVyDQogIAkJc3RhcnRPckNvbnRpbnVlU3RyZWFtKCk7DQogIAl9DQogIAkvL21heCBsZW5ndGgNCiAgCWlmIChyZWNvcmRCdWZmZXJNYXhOICYmIHJlY29yZGVkQnVmZmVycy5sZW5ndGggPj0gcmVjb3JkQnVmZmVyTWF4Til7DQogIAkJbWF4TGVuZ3RoUmVhY2hlZCgpOw0KICAJfQ0KICAJaWYgKCFsb29rYmFja0J1ZmZlcklzQmxvY2tlZCkgbG9va2JhY2tCdWZmZXJJc0Jsb2NrZWQgPSB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gc3RhcnRPckNvbnRpbnVlU3RyZWFtKCl7DQogIAkvL2J1ZmZlciBoYXMgZGF0YSBhbmQgbm90aGluZyBoYXMgYmVlbiBzZW50IHlldA0KICAJaWYgKCFfc2VudEJ1ZmZlcnMgJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCl7DQogIAkJLy9zZW5kIGFsbCBhdCBvbmNlDQogIAkJdmFyIGRhdGEgPSBuZXcgQmxvYihyZWNvcmRlZEJ1ZmZlcnMpOw0KICAJCV9zZW50QnVmZmVycyA9IHJlY29yZGVkQnVmZmVycy5sZW5ndGg7DQogIAkJc2VuZEJ5dGVzKGRhdGEpOw0KICAJDQogIAkvL2J1ZmZlciBoYXMgZGF0YSBhbmQgc29tZSBoYXMgYmVlbiBzZW50IGFscmVhZHkNCiAgCX1lbHNlIGlmIChfc2VudEJ1ZmZlcnMgJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCl7DQogIAkJdmFyIG5vcm1hbGl6ZWRMZW5ndGggPSByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoICsgX3NoaWZ0ZWRCdWZmZXJzOyAvL3Rha2Ugc2hpZnRlZCBkYXRhIGludG8gYWNjb3VudA0KICAJCWlmIChfc2VudEJ1ZmZlcnMgPT0gKG5vcm1hbGl6ZWRMZW5ndGggLSAxKSl7DQogIAkJCS8vc2VuZCBsYXN0DQogIAkJCXZhciBkYXRhID0gcmVjb3JkZWRCdWZmZXJzW3JlY29yZGVkQnVmZmVycy5sZW5ndGggLSAxXTsNCiAgCQkJX3NlbnRCdWZmZXJzKys7DQogIAkJCXNlbmRCeXRlcyhkYXRhKTsNCg0KICAJCX1lbHNlIGlmIChfc2VudEJ1ZmZlcnMgPCBub3JtYWxpemVkTGVuZ3RoKXsNCiAgCQkJLy9zZW5kIHJlc3QgYXQgb25jZQ0KICAJCQl2YXIgcmVzdE4gPSBub3JtYWxpemVkTGVuZ3RoIC0gX3NlbnRCdWZmZXJzOw0KICAJCQl2YXIgZGF0YSA9IG5ldyBCbG9iKHJlY29yZGVkQnVmZmVycy5zbGljZSgtMSAqIHJlc3ROKSk7DQogIAkJCV9zZW50QnVmZmVycyArPSByZXN0TjsNCiAgCQkJc2VuZEJ5dGVzKGRhdGEpOw0KICAJCQ0KICAJCX1lbHNlOw0KICAJLy9ubyBkYXRhIHlldA0KICAJfWVsc2U7DQogIAkvL25vIGJ5dGVzIGxlZnQgYW5kIHN0cmVhbSBlbmRlZD8NCiAgCWlmIChfZ2F0ZUNsb3NlVFMpew0KICAJCXZhciBjbG9zZWREdWVUb0J1ZmZlckxpbWl0ID0gY2hlY2tJZkJ1ZmZlckxpbWl0V2FzUmVhY2hlZCgpOw0KICAJCXJlcXVlc3RGaW5hbFJlc3VsdChjbG9zZWREdWVUb0J1ZmZlckxpbWl0KTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiBzZW5kQnl0ZXMoZGF0YSl7DQogIAlzdHRTZXJ2ZXIuc2VuZEJ5dGVzKGRhdGEpOw0KICB9DQoNCiAgZnVuY3Rpb24gcmVxdWVzdEZpbmFsUmVzdWx0KGNsb3NlZER1ZVRvQnVmZmVyTGltaXQpew0KICAJLy9jbG9zZSBpbnB1dCBhbmQgcmVxdWVzdCBmaW5hbCByZXN1bHQNCiAgCXZhciBieXRlTGVuZ3RoID0gMDsNCiAgCXJlY29yZGVkQnVmZmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRhKXsNCiAgCQlieXRlTGVuZ3RoICs9IHRhLmJ5dGVMZW5ndGg7DQogIAl9KTsNCiAgCXN0dFNlcnZlci5zZW5kQXVkaW9FbmQoYnl0ZUxlbmd0aCwgY2xvc2VkRHVlVG9CdWZmZXJMaW1pdCk7DQogIH0NCg0KICBmdW5jdGlvbiBjaGVja0lmQnVmZmVyTGltaXRXYXNSZWFjaGVkKCl7DQogIAl2YXIgcmVhY2hlZEJ1ZmZlckxpbWl0ID0gKCFjb250aW51b3VzICYmIHJlY29yZGVkQnVmZmVycyAmJiByZWNvcmRCdWZmZXJNYXhOIA0KICAJCSYmIHJlY29yZGVkQnVmZmVycy5sZW5ndGggJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCA+PSByZWNvcmRCdWZmZXJNYXhOKTsNCiAgCXJldHVybiByZWFjaGVkQnVmZmVyTGltaXQ7DQogIH0NCg0KICAvL3JlYWNoZWQgbWF4IHJlY29yZGluZyBsZW5ndGgNCiAgZnVuY3Rpb24gbWF4TGVuZ3RoUmVhY2hlZCgpew0KICAJaWYgKGNvbnRpbnVvdXMpew0KICAJCS8vZHJvcCBvbGQgYnVmZmVyDQogIAkJdmFyIHNoaWZ0ID0gKHJlY29yZGVkQnVmZmVycy5sZW5ndGggLSByZWNvcmRCdWZmZXJNYXhOKTsNCiAgCQlfc2hpZnRlZEJ1ZmZlcnMgKz0gc2hpZnQ7DQogIAkJcmVjb3JkZWRCdWZmZXJzLnNwbGljZSgwLCBzaGlmdCk7DQogIAl9ZWxzZSB7DQogIAkJLy9jbG9zZQ0KICAJCWlmIChnYXRlSXNPcGVuKXsNCiAgCQkJZ2F0ZUNvbnRyb2woZmFsc2UpOw0KICAJCX0NCiAgCX0NCiAgCS8vVE9ETzogZG8gbW9yZSAuLi4gPw0KICB9DQoNCiAgLy9zZW5kIHJlc3VsdCBtZXNzYWdlIChwYXJ0aWFsIG9yIGZpbmFsKQ0KICBmdW5jdGlvbiBzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZVJlY29nbml0aW9uUmVzdWx0KGlzRmluYWwsIHRyYW5zY3JpcHQpew0KICAJaWYgKGlzRmluYWwgJiYgIXRyYW5zY3JpcHQpew0KICAJCS8vdGhpcyBpcyBhY3R1YWxseSBhICdub21hdGNoJy8nbm8tc3BlZWNoJyBlcnJvciAobm8tc3BlZWNoIHVzdWFsbHkgZmFpbHMgbW9yZSBnZW50bHkpDQogIAkJc2VuZFdlYlNwZWVjaENvbXBhdGlibGVFcnJvcigibm8tc3BlZWNoIiwgIkZpbmFsIHJlc3VsdCB3YXMgZW1wdHkiKTsNCiAgCX1lbHNlIHsNCiAgCQlwb3N0TWVzc2FnZSh7DQogIAkJCXJlY29nbml0aW9uRXZlbnQ6IHsNCiAgCQkJCXR5cGU6ICJyZXN1bHQiLA0KICAJCQkJcmVzdWx0SW5kZXg6IDAsDQogIAkJCQlyZXN1bHRzOiBbew0KICAJCQkJCWlzRmluYWw6IGlzRmluYWwsDQogIAkJCQkJIjAiOiB7DQogIAkJCQkJCXRyYW5zY3JpcHQ6IHRyYW5zY3JpcHQNCiAgCQkJCQl9DQogIAkJCQl9XSwNCiAgCQkJCXRpbWVTdGFtcDogRGF0ZS5ub3coKQ0KICAJCQl9LA0KICAJCQlldmVudEZvcm1hdDogIndlYlNwZWVjaEFwaSINCiAgCQl9KTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiBzZW5kRGVmYXVsdFJlY29nbml0aW9uUmVzdWx0KGV2ZW50KXsNCiAgCWlmIChldmVudCAmJiAhZXZlbnQudHlwZSkgZXZlbnQudHlwZSA9ICJyZXN1bHQiOw0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCXJlY29nbml0aW9uRXZlbnQ6IGV2ZW50LA0KICAJCWV2ZW50Rm9ybWF0OiAiZGVmYXVsdCINCiAgCX0pOw0KICB9DQogIGZ1bmN0aW9uIHNlbmRDb25uZWN0aW9uRXZlbnQodHlwZSwgZGF0YSl7DQogIAlwb3N0TWVzc2FnZSh7DQogIAkJY29ubmVjdGlvbkV2ZW50OiB7DQogIAkJCXR5cGU6IHR5cGUsDQogIAkJCWRhdGE6IGRhdGENCiAgCQl9DQogIAl9KTsNCiAgfQ0KICAvL3NlbmQgZXJyb3IgbWVzc2FnZQ0KICBmdW5jdGlvbiBzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZUVycm9yKGVycm9yTmFtZSwgZXJyb3JNZXNzYWdlKXsNCiAgCXZhciBldmVudE5hbWUgPSAiZXJyb3IiOwkvL3Bvc3NpYmxlIGFzIHdlbGw6ICJub21hdGNoIg0KICAJLypzdXBwb3J0ZWQgZXJyb3JzOg0KICAJCSJuZXR3b3JrIiAoMSwgMjogdGltZW91dCwgODogYnVzeSwgMTA6IHJhdGUtbGltaXQpDQogIAkJImF1ZGlvLWNhcHR1cmUiICgzLCBoYXBwZW5zIGJlZm9yZSB3b3JrZXIpDQogIAkJInVua25vd24iICg0LCA1KQ0KICAJCSJuby1zcGVlY2giICg2KQ0KICAJCSJub21hdGNoIiAoNywgdXNlIGV2ZW50TmFtZSkNCiAgCQkiYWJvcnRlZCIgKD8pDQogIAkJIm5vdC1hbGxvd2VkIiAoOSkgLyAic2VydmljZS1ub3QtYWxsb3dlZCINCiAgCQkiYmFkLWdyYW1tYXIiICg/KQ0KICAJCSJsYW5ndWFnZS1ub3Qtc3VwcG9ydGVkIiAoMTIsIDEzKQ0KICAJKi8NCiAgCXBvc3RNZXNzYWdlKHsNCiAgCQlyZWNvZ25pdGlvbkV2ZW50OiB7DQogIAkJCXR5cGU6IGV2ZW50TmFtZSwNCiAgCQkJZXJyb3I6IGVycm9yTmFtZSwNCiAgCQkJbWVzc2FnZTogZXJyb3JNZXNzYWdlLA0KICAJCQl0aW1lU3RhbXA6IERhdGUubm93KCkNCiAgCQl9LA0KICAJCWV2ZW50Rm9ybWF0OiAid2ViU3BlZWNoQXBpIg0KICAJfSk7DQogIH0NCiAgZnVuY3Rpb24gc2VuZERlZmF1bHRFcnJvckV2ZW50KGVycm9yKXsNCiAgCWlmIChlcnJvciAmJiAhZXJyb3IudHlwZSkgZXJyb3IudHlwZSA9ICJlcnJvciI7DQogIAlwb3N0TWVzc2FnZSh7DQogIAkJcmVjb2duaXRpb25FdmVudDogZXJyb3IsDQogIAkJZXZlbnRGb3JtYXQ6ICJkZWZhdWx0Ig0KICAJfSk7DQogIH0NCg0KICAvL3NlbmQgd2F2ZSBmaWxlIGFzIGFycmF5IGJ1ZmZlciAoZGF0YSB2aWV3KQ0KICBmdW5jdGlvbiBzZW5kV2F2ZUZpbGVBcnJheUJ1ZmZlcih2aWV3KXsNCiAgCXBvc3RNZXNzYWdlKHsNCiAgCQltb2R1bGVSZXNwb25zZTogdHJ1ZSwJLy9za2lwIG1lc3NhZ2UgZm9yd2FyZGluZz8NCiAgCQlvdXRwdXQ6IHsNCiAgCQkJd2F2OiB2aWV3LA0KICAJCQlzYW1wbGVSYXRlOiBpbnB1dFNhbXBsZVJhdGUsDQogIAkJCXRvdGFsU2FtcGxlczogKCh2aWV3LmJ5dGVMZW5ndGggLSA0NCkvX2J5dGVzUGVyU2FtcGxlKSwNCiAgCQkJY2hhbm5lbHM6IGNoYW5uZWxDb3VudA0KICAJCX0NCiAgCX0pOw0KICB9DQoNCiAgZnVuY3Rpb24gaGFuZGxlRXZlbnQoZGF0YSl7DQogIAkvL1RPRE86IGFueXRoaW5nIHRvIGRvPw0KICB9DQoNCiAgZnVuY3Rpb24gc3RhcnQob3B0aW9ucyl7DQogICAgICAvL3dlIGRvIG5vdGhpbmcgYnV0IHdhaXQgZm9yIGRhdGEgb3IgZ2F0ZS1vcGVuIHNpZ25hbA0KICAJLy9OT1RFOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkDQogIH0NCiAgZnVuY3Rpb24gc3RvcChvcHRpb25zKXsNCiAgCS8vbWFrZSBzdXJlIHRoYXQgZ2F0ZSBpcyBjbG9zZWQgLi4uIFRPRE86IGFueXRoaW5nIGVsc2U/DQogIAlpZiAoZ2F0ZUlzT3Blbil7DQogIAkJZ2F0ZUNvbnRyb2woZmFsc2UpOw0KICAJfQ0KICAJLy9OT1RFIDE6IEluIHRoaXMgY2FzZSBhIHN0b3BwZWQgd29ya2VyIGNhbiBzdGlsbCBzZW5kIHBhcnRpYWwgb3IgZmluYWwgcmVzdWx0cy4NCiAgCS8vTk9URSAyOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkDQogIH0NCiAgZnVuY3Rpb24gcmVzZXQob3B0aW9ucyl7DQogIAkvL2NsZWFuIHVwIGNvbm5lY3Rpb24NCiAgCWlmIChzdHRTZXJ2ZXIgJiYgc3R0U2VydmVyLmNvbm5lY3Rpb25Jc09wZW4pew0KICAJCXN0dFNlcnZlci5jbG9zZUNvbm5lY3Rpb24oKTsNCiAgCQkvL05PVEU6IHdlIHRyeSB0byByZXVzZSB0aGlzIGluc3RhbmNlDQogIAl9DQogICAgICAvL2NsZWFuIHVwIHdvcmtlcg0KICAJaW5pdCgpOw0KICAJLy9UT0RPOiBhbnl0aGluZyBlbHNlPw0KICB9DQogIGZ1bmN0aW9uIHJlbGVhc2Uob3B0aW9ucyl7DQogIAkvL3RoaXMgaXMgZXhwZWN0ZWQgdG8gaGFwcGVuIGFmdGVyIGZpbmFsIHJlc3VsdCAob3IgYWJvcnQpIHNvOiBjbGVhbiB1cCBjb25uZWN0aW9uDQogIAlpZiAoc3R0U2VydmVyICYmIHN0dFNlcnZlci5jb25uZWN0aW9uSXNPcGVuKXsNCiAgCQlzdHRTZXJ2ZXIuY2xvc2VDb25uZWN0aW9uKCk7DQogIAl9DQogIAkvL2NsZWFuIHVwIHdvcmtlciBhbmQgY2xvc2UNCiAgCV9sb29rYmFja1JpbmdCdWZmZXIgPSBudWxsOw0KICAJcmVjb3JkZWRCdWZmZXJzID0gbnVsbDsNCiAgCV9zZW50QnVmZmVycyA9IHVuZGVmaW5lZDsNCiAgCV9zaGlmdGVkQnVmZmVycyA9IHVuZGVmaW5lZDsNCiAgCWdhdGVJc09wZW4gPSBmYWxzZTsNCiAgCV9nYXRlT3BlblRTID0gMDsNCiAgCV9nYXRlQ2xvc2VUUyA9IDA7DQogIAkvL25vdGlmeSBwcm9jZXNzb3IgdGhhdCB3ZSBjYW4gdGVybWluYXRlIG5vdw0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiA5DQogIAl9KTsNCiAgfQ0KDQogIC8vLS0tIGhlbHBlcnMgLS0tDQoNCiAgZnVuY3Rpb24gU2FtcGxlUmF0ZUV4Y2VwdGlvbihtZXNzYWdlKSB7DQogIAl0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOw0KICAJdGhpcy5uYW1lID0gIlNhbXBsZVJhdGVFeGNlcHRpb24iOw0KICB9DQogIGZ1bmN0aW9uIEFycmF5VHlwZUV4Y2VwdGlvbihtZXNzYWdlKSB7DQogIAl0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOw0KICAJdGhpcy5uYW1lID0gIkFycmF5VHlwZUV4Y2VwdGlvbiI7DQogIH0NCg0KICAvL0dldCBoZWFkZXIgZm9yIHNhbXBsZXMgb3IgbWF4IHNpemUgLSBGb3JtYXQgZGVzY3JpcHRpb246IGh0dHA6Ly9zb3VuZGZpbGUuc2FwcC5vcmcvZG9jL1dhdmVGb3JtYXQvDQogIGZ1bmN0aW9uIGdldEhlYWRlckZvcldBVihzYW1wbGVzLCBzYW1wbGVSYXRlLCBudW1DaGFubmVscyl7DQogIAl2YXIgYml0RGVwdGggPSBlbmNvZGVyQml0RGVwdGg7DQogIAl2YXIgYnl0ZXNQZXJTYW1wbGUgPSBfYnl0ZXNQZXJTYW1wbGU7DQogIAl2YXIgdmlldyA9IHNhbXBsZXM/IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoNDQgKyBzYW1wbGVzLmxlbmd0aCAqIGJ5dGVzUGVyU2FtcGxlKSkgOiBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDQ0KSk7DQogIAkvL05PVEU6IHRoaXMgc2hvdWxkIGJlICJyZWFsIiBzaXplIGJ1dCBpZiB3ZSBkb24ndCBrbm93IHlldCB0YWtlIG1heCBzaXplIC0gbWF4IHNpemUgaW5jbHVkZXMgbG9va2JhY2sNCiAgCXZhciBzYW1wbGVTaXplID0gc2FtcGxlcz8gc2FtcGxlcy5sZW5ndGggOiAocmVjb3JkQnVmZmVyTWF4TiAqIGlucHV0U2FtcGxlU2l6ZSk7DQogIAkvL1JJRkYgaWRlbnRpZmllcg0KICAJd2F2V3JpdGVTdHJpbmcodmlldywgMCwgJ1JJRkYnKTsNCiAgCXZpZXcuc2V0VWludDMyKDQsIDM2ICsgKHNhbXBsZVNpemUgKiBudW1DaGFubmVscyAqIGJ5dGVzUGVyU2FtcGxlKSwgdHJ1ZSk7CS8vVE9ETzogd2FzIChzYW1wbGVzLmxlbmd0aCAqIDIpDQogIAl3YXZXcml0ZVN0cmluZyh2aWV3LCA4LCAnV0FWRScpOw0KICAJd2F2V3JpdGVTdHJpbmcodmlldywgMTIsICdmbXQgJyk7DQogIAl2aWV3LnNldFVpbnQzMigxNiwgMTYsIHRydWUpOwkvLzE2IGZvciBQQ00NCiAgCXZpZXcuc2V0VWludDE2KDIwLCAxLCB0cnVlKTsJLy8xIGZvciBQQ00NCiAgCXZpZXcuc2V0VWludDE2KDIyLCBudW1DaGFubmVscywgdHJ1ZSk7DQogIAl2aWV3LnNldFVpbnQzMigyNCwgc2FtcGxlUmF0ZSwgdHJ1ZSk7DQogIAl2aWV3LnNldFVpbnQzMigyOCwgc2FtcGxlUmF0ZSAqIGJ5dGVzUGVyU2FtcGxlICogbnVtQ2hhbm5lbHMsIHRydWUpOwkvL1RPRE86IHdhcyAoc2FtcGxlUmF0ZSAqIDQpDQogIAl2aWV3LnNldFVpbnQxNigzMiwgbnVtQ2hhbm5lbHMgKiBieXRlc1BlclNhbXBsZSwgdHJ1ZSk7DQogIAl2aWV3LnNldFVpbnQxNigzNCwgYml0RGVwdGgsIHRydWUpOw0KICAJd2F2V3JpdGVTdHJpbmcodmlldywgMzYsICdkYXRhJyk7DQogIAl2aWV3LnNldFVpbnQzMig0MCwgKHNhbXBsZVNpemUgKiBudW1DaGFubmVscyAqIGJ5dGVzUGVyU2FtcGxlKSwgdHJ1ZSk7DQogIAlyZXR1cm4gdmlldzsNCiAgfQ0KICBmdW5jdGlvbiBlbmNvZGVXQVYoaGVhZGVyVmlldywgc2FtcGxlcywgc2FtcGxlUmF0ZSwgbnVtQ2hhbm5lbHMsIGNvbnZlcnRGcm9tRmxvYXQzMil7DQogIAlpZiAoIXNhbXBsZXMgfHwgIXNhbXBsZVJhdGUgfHwgIW51bUNoYW5uZWxzKXsNCiAgCQljb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBlbmNvZGVXQVYgLSBNaXNzaW5nIHBhcmFtZXRlcnMiKTsNCiAgCQlyZXR1cm47DQogIAl9DQogIAl2YXIgdmlldzsNCiAgCXZhciBvZmZzZXQ7DQogIAlpZiAoIWhlYWRlclZpZXcpew0KICAJCXZpZXcgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKHNhbXBsZXMubGVuZ3RoICogMikpOw0KICAJCW9mZnNldCA9IDA7DQogIAl9ZWxzZSB7DQogIAkJdmlldyA9IGhlYWRlclZpZXc7DQogIAkJb2Zmc2V0ID0gNDQ7DQogIAl9DQogIAlpZiAoY29udmVydEZyb21GbG9hdDMyKXsNCiAgCQl3YXZGbG9hdFRvMTZCaXRQQ00odmlldywgb2Zmc2V0LCBzYW1wbGVzKTsNCiAgCX1lbHNlIHsNCiAgCQl3YXZXcml0ZTE2Qml0UENNKHZpZXcsIG9mZnNldCwgc2FtcGxlcyk7DQogIAl9DQogIAlyZXR1cm4gdmlldzsNCiAgfQ0KICBmdW5jdGlvbiB3YXZGbG9hdFRvMTZCaXRQQ00odmlldywgb2Zmc2V0LCBpbnB1dCkgew0KICAJZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKywgb2Zmc2V0ICs9IDIpIHsNCiAgCQlsZXQgcyA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbigxLCBpbnB1dFtpXSkpOw0KICAJCXZpZXcuc2V0SW50MTYob2Zmc2V0LCBzIDwgMCA/IHMgKiAweDgwMDAgOiBzICogMHg3RkZGLCB0cnVlKTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiB3YXZXcml0ZTE2Qml0UENNKHZpZXcsIG9mZnNldCwgaW5wdXQpIHsNCiAgCWZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyssIG9mZnNldCArPSAyKSB7DQogIAkJdmlldy5zZXRJbnQxNihvZmZzZXQsIGlucHV0W2ldLCB0cnVlKTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiB3YXZXcml0ZVN0cmluZyh2aWV3LCBvZmZzZXQsIHN0cmluZykgew0KICAJZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHsNCiAgCQl2aWV3LnNldFVpbnQ4KG9mZnNldCArIGksIHN0cmluZy5jaGFyQ29kZUF0KGkpKTsNCiAgCX0NCiAgfQoKfSkoKTsKCg==",null,!1),Vve=`//TODO: 'import' not yet supported by FF :-( (Dec 2020)\r
//import { SampleRateException, SampleSizeException } from './shared/common.js';\r
//import { RingBuffer } from './shared/ring-buffer.js';\r
//import { SpeexResampler } from './speex/speex-resampler-interface.min.js';\r
//import { Speex } from './speex/speex-resampler-wasm.js';\r
class RingBuffer{constructor(a,b,c){this._readIndex=0,this._writeIndex=0,this._framesAvailable=0,this._channelCount=b,this._length=a,this._channelData=[];for(let d=0;d<this._channelCount;++d)this._channelData[d]="Uint16"==c?new Uint16Array(a):"Int16"==c?new Int16Array(a):"Uint8"==c?new Uint8Array(a):"Int8"==c?new Int8Array(a):new Float32Array(a)}get framesAvailable(){return this._framesAvailable}push(a,b){let c=a[0].length,d=b||function(a,b,c){return a[b][c]};for(let e,f=0;f<c;++f){e=(this._writeIndex+f)%this._length;for(let b=0;b<this._channelCount;++b)this._channelData[b][e]=d(a,b,f)}this._writeIndex+=c,this._writeIndex>=this._length&&(this._writeIndex-=this._length),this._framesAvailable+=c,this._framesAvailable>this._length&&(this._framesAvailable=this._length)}pull(a,b){if(0===this._framesAvailable)return;let c=a[0].length,d=this,e=b||function(a,b,c){return a[b][c]};for(let d,f=0;f<c;++f){d=(this._readIndex+f)%this._length;for(let b=0;b<this._channelCount;++b)a[b][f]=e(this._channelData,b,d)}this._readIndex+=c,this._readIndex>=this._length&&(this._readIndex-=this._length),this._framesAvailable-=c,0>this._framesAvailable&&(this._framesAvailable=0)}};\r
class SpeexResampler{constructor(a,b,c,d=7){this.channels=a,this.inRate=b,this.outRate=c,this.quality=d,this._inBufferPtr=-1,this._inBufferSize=-1,this._outBufferPtr=-1,this._outBufferSize=-1,this._inLengthPtr=-1,this._outLengthPtr=-1}processChunk(a){if(!speexModule)throw new Error("You need to wait for SpeexResampler.initPromise before calling this method");if(0!=a.constructor.name.indexOf("Int16Array"))throw new Error("Chunk format has to be 'Int16Array'");else a=new Uint8Array(a.buffer);if(0!=a.length%(this.channels*Uint16Array.BYTES_PER_ELEMENT))throw new Error("Chunk length should be a multiple of channels * 2 bytes");if(!this._resamplerPtr){const a=speexModule._malloc(4);this._resamplerPtr=speexModule._speex_resampler_init(this.channels,this.inRate,this.outRate,this.quality,a);const b=speexModule.getValue(a,"i32");if(0!==b)throw new Error(speexModule.AsciiToString(speexModule._speex_resampler_strerror(b)));this._inLengthPtr=speexModule._malloc(Uint32Array.BYTES_PER_ELEMENT),this._outLengthPtr=speexModule._malloc(Uint32Array.BYTES_PER_ELEMENT)}this._inBufferSize<a.length&&(-1!==this._inBufferPtr&&speexModule._free(this._inBufferPtr),this._inBufferPtr=speexModule._malloc(a.length),this._inBufferSize=a.length);const b=Math.ceil(a.length*this.outRate/this.inRate);this._outBufferSize<b&&(-1!==this._outBufferPtr&&speexModule._free(this._outBufferPtr),this._outBufferPtr=speexModule._malloc(b),this._outBufferSize=b),speexModule.setValue(this._inLengthPtr,a.length/this.channels/Uint16Array.BYTES_PER_ELEMENT,"i32"),speexModule.HEAPU8.set(a,this._inBufferPtr),speexModule.setValue(this._outLengthPtr,this._outBufferSize/this.channels/Uint16Array.BYTES_PER_ELEMENT,"i32");const c=speexModule._speex_resampler_process_interleaved_int(this._resamplerPtr,this._inBufferPtr,this._inLengthPtr,this._outBufferPtr,this._outLengthPtr);if(0!==c)throw new Error(speexModule.AsciiToString(speexModule._speex_resampler_strerror(c)));const d=speexModule.getValue(this._outLengthPtr,"i32");return new Int16Array(speexModule.HEAPU8.slice(this._outBufferPtr,this._outBufferPtr+d*this.channels*Uint16Array.BYTES_PER_ELEMENT).buffer)}}\r
\r
var speexModule;\r
\r
class SpeexResampleProcessor extends AudioWorkletProcessor {\r
	\r
	get SampleRateException() {\r
		return function(message){\r
			this.message = message;\r
			this.name = "SampleRateException";\r
		}\r
	}\r
	get SampleSizeException() {\r
		return function(message){\r
			this.message = message;\r
			this.name = "SampleSizeException";\r
		};\r
	}\r
	\r
	get Speex() {\r
		return function(){return function(a){function b(a,b,c){c=c||"i8","*"===c.charAt(c.length-1)&&(c="i32"),"i1"===c?Q[a>>0]=b:"i8"===c?Q[a>>0]=b:"i16"===c?S[a>>1]=b:"i32"===c?U[a>>2]=b:"i64"===c?(oa=[b>>>0,(na=b,1<=+ga(na)?0<na?(0|ja(+ia(na/4294967296),4294967295))>>>0:~~+ha((na-+(~~na>>>0))/4294967296)>>>0:0)],U[a>>2]=oa[0],U[a+4>>2]=oa[1]):"float"===c?W[a>>2]=b:"double"===c?X[a>>3]=b:p("invalid type for setValue: "+c)}function c(a,b){switch(b=b||"i8","*"===b.charAt(b.length-1)&&(b="i32"),b){case"i1":return Q[a>>0];case"i8":return Q[a>>0];case"i16":return S[a>>1];case"i32":return U[a>>2];case"i64":return U[a>>2];case"float":return W[a>>2];case"double":return X[a>>3];default:p("invalid type for getValue: "+b);}return null}function d(a){for(var b,c="";;){if(b=R[a++>>0],!b)return c;c+=String.fromCharCode(b)}}function e(a,b){return 0<a%b&&(a+=b-a%b),a}function f(a){P=a,A.HEAP8=Q=new Int8Array(a),A.HEAP16=S=new Int16Array(a),A.HEAP32=U=new Int32Array(a),A.HEAPU8=R=new Uint8Array(a),A.HEAPU16=T=new Uint16Array(a),A.HEAPU32=V=new Uint32Array(a),A.HEAPF32=W=new Float32Array(a),A.HEAPF64=X=new Float64Array(a)}function g(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b){b(A);continue}var c=b.func;"number"==typeof c?void 0===b.arg?A.dynCall_v(c):A.dynCall_vi(c,b.arg):c(void 0===b.arg?null:b.arg)}}function h(){if(A.preRun)for("function"==typeof A.preRun&&(A.preRun=[A.preRun]);A.preRun.length;)l(A.preRun.shift());g(ba)}function i(){fa=!0,g(ca)}function j(){g(da)}function k(){if(A.postRun)for("function"==typeof A.postRun&&(A.postRun=[A.postRun]);A.postRun.length;)m(A.postRun.shift());g(ea)}function l(a){ba.unshift(a)}function m(a){ea.unshift(a)}function n(){ka++,A.monitorRunDependencies&&A.monitorRunDependencies(ka)}function o(){if(ka--,A.monitorRunDependencies&&A.monitorRunDependencies(ka),0==ka&&(null!==la&&(clearInterval(la),la=null),ma)){var a=ma;ma=null,a()}}function p(a){throw A.onAbort&&A.onAbort(a),a+="",K(a),L(a),Z=!0,$=1,a="abort("+a+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(a)}function q(a){return 0===a.indexOf(pa)}function r(a,b,c){R.copyWithin(a,b,b+c)}function s(){return R.length}function t(a){try{return O.grow(a-P.byteLength+65535>>>16),f(O.buffer),1}catch(a){}}function u(a){if("boolean"==typeof I&&I){var b;try{b=Buffer.from(a,"base64")}catch(c){b=new Buffer(a,"base64")}return new Uint8Array(b.buffer,b.byteOffset,b.byteLength)}try{for(var c=qa(a),d=new Uint8Array(c.length),e=0;e<c.length;++e)d[e]=c.charCodeAt(e);return d}catch(a){throw new Error("Converting base64 string to bytes failed.")}}function v(a){return q(a)?u(a.slice(37)):void 0}function w(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}function x(a){function b(){Ba||(Ba=!0,A.calledRun=!0,Z||(i(),j(),y(A),A.onRuntimeInitialized&&A.onRuntimeInitialized(),k()))}(a=a||D,!(0<ka))&&(h(),0<ka||(A.setStatus?(A.setStatus("Running..."),setTimeout(function(){setTimeout(function(){A.setStatus("")},1),b()},1)):b()))}a=a||{};var y,z,A="undefined"==typeof a?{}:a;A.ready=new Promise(function(a,b){y=a,z=b});var B,C={};for(B in A)A.hasOwnProperty(B)&&(C[B]=A[B]);var D=[],E="./this.program",F=function(a,b){throw b},G=!1,H=!1,I=!1;G="object"==typeof window,H="function"==typeof importScripts,I="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;var J;I?(1<process.argv.length&&(E=process.argv[1].replace(/\\\\/g,"/")),D=process.argv.slice(2),process.on("uncaughtException",function(a){if(!(a instanceof w))throw a}),process.on("unhandledRejection",p),F=function(a){process.exit(a)},A.inspect=function(){return"[Emscripten Module object]"}):(G||H)&&(J=function(a){document.title=a});var K=A.print||console.log.bind(console),L=A.printErr||console.warn.bind(console);for(B in C)C.hasOwnProperty(B)&&(A[B]=C[B]);C=null,A.arguments&&(D=A.arguments),A.thisProgram&&(E=A.thisProgram),A.quit&&(F=A.quit);var M;A.wasmBinary&&(M=A.wasmBinary);var N;A.noExitRuntime&&(N=A.noExitRuntime),"object"!=typeof WebAssembly&&p("no native wasm support detected");var O,P,Q,R,S,T,U,V,W,X,Y=new WebAssembly.Table({initial:6,maximum:6,element:"anyfunc"}),Z=!1,$=0,_=65536,aa=A.INITIAL_MEMORY||20971520;O=A.wasmMemory?A.wasmMemory:new WebAssembly.Memory({initial:aa/_,maximum:2147483648/_}),O&&(P=O.buffer),aa=P.byteLength,f(P),U[6256>>2]=5249296;var ba=[],ca=[],da=[],ea=[],fa=!1,ga=Math.abs,ha=Math.ceil,ia=Math.floor,ja=Math.min,ka=0,la=null,ma=null;A.preloadedImages={},A.preloadedAudios={};var na,oa,pa="data:application/octet-stream;base64,";ca.push({func:function(){ta()}});var qa="function"==typeof atob?atob:function(a){var b,c,d,e,f,g,h,j="",k=0;a=a.replace(/[^A-Za-z0-9\\+\\/\\=]/g,"");do e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,j+=String.fromCharCode(b),64!==g&&(j+=String.fromCharCode(c)),64!==h&&(j+=String.fromCharCode(d));while(k<a.length);return j},ra={a:r,b:function(a){a>>>=0;var b=s(),c=2147483648;if(a>c)return!1;for(var d,f=1;4>=f;f*=2){d=b*(1+.2/f),d=Math.min(d,a+100663296);var g=Math.min(c,e(Math.max(16777216,a,d),65536)),h=t(g);if(h)return!0}return!1},memory:O,table:Y},sa=function(){function a(a){var b=a.exports;A.asm=b,o("wasm-instantiate")}var b={a:ra};if(n("wasm-instantiate"),A.instantiateWasm)try{var c=A.instantiateWasm(b,a);return c}catch(a){return L("Module.instantiateWasm callback failed with error: "+a),!1}return function(a){var c=v("data:application/octet-stream;base64,AGFzbQEAAAABggETYAZ/f39/f38Bf2ABfwF/YAF/AGACf38AYAN/f38AYAJ/fwF/YAV/f39/fwF/YAAAYAV/f39/fwBgBn9/f39/fwBgA39/fwF/YAR/f39/AX9gB39/f39/f38Bf2ACfH8Bf2AEfX1/fwF9YAF8AXxgAnx/AXxgAnx8AXxgA3x8fwF8AikEAWEBYQAKAWEBYgABAWEGbWVtb3J5AgHAAoCAAgFhBXRhYmxlAXAABgMgHwIBAxABARIOAQMFEQkAAAAABAgFDwwNCwEEBgIABgcGCQF/AUGQssACCwchCAFjACABZAAfAWUAAgFmAB0BZwAcAWgAGwFpABoBagAHCQsBAEEBCwUSERAPHgrXpwEfgQ0BB38CQCAARQ0AIABBeGoiAyAAQXxqKAIAIgFBeHEiAGohBQJAIAFBAXENACABQQNxRQ0BIAMgAygCACICayIDQYQtKAIAIgRJDQEgACACaiEAIANBiC0oAgBHBEAgAkH/AU0EQCADKAIIIgQgAkEDdiICQQN0QZwtakcaIAQgAygCDCIBRgRAQfQsQfQsKAIAQX4gAndxNgIADAMLIAQgATYCDCABIAQ2AggMAgsgAygCGCEGAkAgAyADKAIMIgFHBEAgBCADKAIIIgJNBEAgAigCDBoLIAIgATYCDCABIAI2AggMAQsCQCADQRRqIgIoAgAiBA0AIANBEGoiAigCACIEDQBBACEBDAELA0AgAiEHIAQiAUEUaiICKAIAIgQNACABQRBqIQIgASgCECIEDQALIAdBADYCAAsgBkUNAQJAIAMgAygCHCICQQJ0QaQvaiIEKAIARgRAIAQgATYCACABDQFB+CxB+CwoAgBBfiACd3E2AgAMAwsgBkEQQRQgBigCECADRhtqIAE2AgAgAUUNAgsgASAGNgIYIAMoAhAiAgRAIAEgAjYCECACIAE2AhgLIAMoAhQiAkUNASABIAI2AhQgAiABNgIYDAELIAUoAgQiAUEDcUEDRw0AQfwsIAA2AgAgBSABQX5xNgIEIAMgAEEBcjYCBCAAIANqIAA2AgAPCyAFIANNDQAgBSgCBCIBQQFxRQ0AAkAgAUECcUUEQCAFQYwtKAIARgRAQYwtIAM2AgBBgC1BgC0oAgAgAGoiADYCACADIABBAXI2AgQgA0GILSgCAEcNA0H8LEEANgIAQYgtQQA2AgAPCyAFQYgtKAIARgRAQYgtIAM2AgBB/CxB/CwoAgAgAGoiADYCACADIABBAXI2AgQgACADaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIMIQIgBSgCCCIEIAFBA3YiAUEDdEGcLWoiB0cEQEGELSgCABoLIAIgBEYEQEH0LEH0LCgCAEF+IAF3cTYCAAwCCyACIAdHBEBBhC0oAgAaCyAEIAI2AgwgAiAENgIIDAELIAUoAhghBgJAIAUgBSgCDCIBRwRAQYQtKAIAIAUoAggiAk0EQCACKAIMGgsgAiABNgIMIAEgAjYCCAwBCwJAIAVBFGoiAigCACIEDQAgBUEQaiICKAIAIgQNAEEAIQEMAQsDQCACIQcgBCIBQRRqIgIoAgAiBA0AIAFBEGohAiABKAIQIgQNAAsgB0EANgIACyAGRQ0AAkAgBSAFKAIcIgJBAnRBpC9qIgQoAgBGBEAgBCABNgIAIAENAUH4LEH4LCgCAEF+IAJ3cTYCAAwCCyAGQRBBFCAGKAIQIAVGG2ogATYCACABRQ0BCyABIAY2AhggBSgCECICBEAgASACNgIQIAIgATYCGAsgBSgCFCICRQ0AIAEgAjYCFCACIAE2AhgLIAMgAEEBcjYCBCAAIANqIAA2AgAgA0GILSgCAEcNAUH8LCAANgIADwsgBSABQX5xNgIEIAMgAEEBcjYCBCAAIANqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QZwtaiEAAn9B9CwoAgAiAkEBIAF0IgFxRQRAQfQsIAEgAnI2AgAgAAwBCyAAKAIICyECIAAgAzYCCCACIAM2AgwgAyAANgIMIAMgAjYCCA8LIANCADcCECADAn9BACAAQQh2IgFFDQAaQR8gAEH///8HSw0AGiABIAFBgP4/akEQdkEIcSIBdCICIAJBgOAfakEQdkEEcSICdCIEIARBgIAPakEQdkECcSIEdEEPdiABIAJyIARyayIBQQF0IAAgAUEVanZBAXFyQRxqCyICNgIcIAJBAnRBpC9qIQECQAJAAkBB+CwoAgAiBEEBIAJ0IgdxRQRAQfgsIAQgB3I2AgAgASADNgIAIAMgATYCGAwBCyAAQQBBGSACQQF2ayACQR9GG3QhAiABKAIAIQEDQCABIgQoAgRBeHEgAEYNAiACQR12IQEgAkEBdCECIAQgAUEEcWoiB0EQaigCACIBDQALIAcgAzYCECADIAQ2AhgLIAMgAzYCDCADIAM2AggMAQsgBCgCCCIAIAM2AgwgBCADNgIIIANBADYCGCADIAQ2AgwgAyAANgIIC0GULUGULSgCAEF/aiIANgIAIAANAEG8MCEDA0AgAygCACIAQQhqIQMgAA0AC0GULUF/NgIACwtSAQJ/QfAwKAIAIgEgAEEDakF8cSICaiEAAkAgAkEBTkEAIAAgAU0bDQAgAD8AQRB0SwRAIAAQAUUNAQtB8DAgADYCACABDwtB8CxBMDYCAEF/C9YCAQF/AkAgAUUNACAAIAFqIgJBf2pBADoAACAAQQA6AAAgAUEDSQ0AIAJBfmpBADoAACAAQQA6AAEgAkF9akEAOgAAIABBADoAAiABQQdJDQAgAkF8akEAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgJqIgBBADYCACAAIAEgAmtBfHEiAmoiAUF8akEANgIAIAJBCUkNACAAQQA2AgggAEEANgIEIAFBeGpBADYCACABQXRqQQA2AgAgAkEZSQ0AIABBADYCGCAAQQA2AhQgAEEANgIQIABBADYCDCABQXBqQQA2AgAgAUFsakEANgIAIAFBaGpBADYCACABQWRqQQA2AgAgAiAAQQRxQRhyIgJrIgFBIEkNACAAIAJqIQADQCAAQgA3AxggAEIANwMQIABCADcDCCAAQgA3AwAgAEEgaiEAIAFBYGoiAUEfSw0ACwsLqAEAAkAgAUGACE4EQCAARAAAAAAAAOB/oiEAIAFB/w9IBEAgAUGBeGohAQwCCyAARAAAAAAAAOB/oiEAIAFB/RcgAUH9F0gbQYJwaiEBDAELIAFBgXhKDQAgAEQAAAAAAAAQAKIhACABQYNwSgRAIAFB/gdqIQEMAQsgAEQAAAAAAAAQAKIhACABQYZoIAFBhmhKG0H8D2ohAQsgACABQf8Haq1CNIa/ogtTAgF/AX4CQAJ/QQAgAEUNABogAK0iAqciASAAQQFyQYCABEkNABpBfyABIAJCIIinGwsiARAHIgBFDQAgAEF8ai0AAEEDcUUNACAAIAEQBAsgAAvGLQELfyMAQRBrIgskAAJAAkACQAJAAkACQAJAAkACQAJAAkAgAEH0AU0EQEH0LCgCACIGQRAgAEELakF4cSAAQQtJGyIFQQN2IgB2IgFBA3EEQCABQX9zQQFxIABqIgJBA3QiBEGkLWooAgAiAUEIaiEAAkAgASgCCCIDIARBnC1qIgRGBEBB9CwgBkF+IAJ3cTYCAAwBC0GELSgCABogAyAENgIMIAQgAzYCCAsgASACQQN0IgJBA3I2AgQgASACaiIBIAEoAgRBAXI2AgQMDAsgBUH8LCgCACIITQ0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cSIAQQAgAGtxQX9qIgAgAEEMdkEQcSIAdiIBQQV2QQhxIgIgAHIgASACdiIAQQJ2QQRxIgFyIAAgAXYiAEEBdkECcSIBciAAIAF2IgBBAXZBAXEiAXIgACABdmoiAkEDdCIDQaQtaigCACIBKAIIIgAgA0GcLWoiA0YEQEH0LCAGQX4gAndxIgY2AgAMAQtBhC0oAgAaIAAgAzYCDCADIAA2AggLIAFBCGohACABIAVBA3I2AgQgASAFaiIHIAJBA3QiAiAFayIDQQFyNgIEIAEgAmogAzYCACAIBEAgCEEDdiIEQQN0QZwtaiEBQYgtKAIAIQICfyAGQQEgBHQiBHFFBEBB9CwgBCAGcjYCACABDAELIAEoAggLIQQgASACNgIIIAQgAjYCDCACIAE2AgwgAiAENgIIC0GILSAHNgIAQfwsIAM2AgAMDAtB+CwoAgAiCkUNASAKQQAgCmtxQX9qIgAgAEEMdkEQcSIAdiIBQQV2QQhxIgIgAHIgASACdiIAQQJ2QQRxIgFyIAAgAXYiAEEBdkECcSIBciAAIAF2IgBBAXZBAXEiAXIgACABdmpBAnRBpC9qKAIAIgEoAgRBeHEgBWshAyABIQIDQAJAIAIoAhAiAEUEQCACKAIUIgBFDQELIAAoAgRBeHEgBWsiAiADIAIgA0kiAhshAyAAIAEgAhshASAAIQIMAQsLIAEoAhghCSABIAEoAgwiBEcEQEGELSgCACABKAIIIgBNBEAgACgCDBoLIAAgBDYCDCAEIAA2AggMCwsgAUEUaiICKAIAIgBFBEAgASgCECIARQ0DIAFBEGohAgsDQCACIQcgACIEQRRqIgIoAgAiAA0AIARBEGohAiAEKAIQIgANAAsgB0EANgIADAoLQX8hBSAAQb9/Sw0AIABBC2oiAEF4cSEFQfgsKAIAIgdFDQBBACAFayECAkACQAJAAn9BACAAQQh2IgBFDQAaQR8gBUH///8HSw0AGiAAIABBgP4/akEQdkEIcSIAdCIBIAFBgOAfakEQdkEEcSIBdCIDIANBgIAPakEQdkECcSIDdEEPdiAAIAFyIANyayIAQQF0IAUgAEEVanZBAXFyQRxqCyIIQQJ0QaQvaigCACIDRQRAQQAhAAwBCyAFQQBBGSAIQQF2ayAIQR9GG3QhAUEAIQADQAJAIAMoAgRBeHEgBWsiBiACTw0AIAMhBCAGIgINAEEAIQIgAyEADAMLIAAgAygCFCIGIAYgAyABQR12QQRxaigCECIDRhsgACAGGyEAIAEgA0EAR3QhASADDQALCyAAIARyRQRAQQIgCHQiAEEAIABrciAHcSIARQ0DIABBACAAa3FBf2oiACAAQQx2QRBxIgB2IgFBBXZBCHEiAyAAciABIAN2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2akECdEGkL2ooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIAVrIgMgAkkhASADIAIgARshAiAAIAQgARshBCAAKAIQIgEEfyABBSAAKAIUCyIADQALCyAERQ0AIAJB/CwoAgAgBWtPDQAgBCgCGCEIIAQgBCgCDCIBRwRAQYQtKAIAIAQoAggiAE0EQCAAKAIMGgsgACABNgIMIAEgADYCCAwJCyAEQRRqIgMoAgAiAEUEQCAEKAIQIgBFDQMgBEEQaiEDCwNAIAMhBiAAIgFBFGoiAygCACIADQAgAUEQaiEDIAEoAhAiAA0ACyAGQQA2AgAMCAtB/CwoAgAiASAFTwRAQYgtKAIAIQACQCABIAVrIgJBEE8EQEH8LCACNgIAQYgtIAAgBWoiAzYCACADIAJBAXI2AgQgACABaiACNgIAIAAgBUEDcjYCBAwBC0GILUEANgIAQfwsQQA2AgAgACABQQNyNgIEIAAgAWoiASABKAIEQQFyNgIECyAAQQhqIQAMCgtBgC0oAgAiASAFSwRAQYAtIAEgBWsiATYCAEGMLUGMLSgCACIAIAVqIgI2AgAgAiABQQFyNgIEIAAgBUEDcjYCBCAAQQhqIQAMCgtBACEAIAVBL2oiBAJ/QcwwKAIABEBB1DAoAgAMAQtB2DBCfzcCAEHQMEKAoICAgIAENwIAQcwwIAtBDGpBcHFB2KrVqgVzNgIAQeAwQQA2AgBBsDBBADYCAEGAIAsiAmoiBkEAIAJrIgdxIgIgBU0NCUGsMCgCACIDBEBBpDAoAgAiCCACaiIJIAhNDQogCSADSw0KC0GwMC0AAEEEcQ0EAkACQEGMLSgCACIDBEBBtDAhAANAIAAoAgAiCCADTQRAIAggACgCBGogA0sNAwsgACgCCCIADQALC0EAEAMiAUF/Rg0FIAIhBkHQMCgCACIAQX9qIgMgAXEEQCACIAFrIAEgA2pBACAAa3FqIQYLIAYgBU0NBSAGQf7///8HSw0FQawwKAIAIgAEQEGkMCgCACIDIAZqIgcgA00NBiAHIABLDQYLIAYQAyIAIAFHDQEMBwsgBiABayAHcSIGQf7///8HSw0EIAYQAyIBIAAoAgAgACgCBGpGDQMgASEACwJAIAVBMGogBk0NACAAQX9GDQBB1DAoAgAiASAEIAZrakEAIAFrcSIBQf7///8HSwRAIAAhAQwHCyABEANBf0cEQCABIAZqIQYgACEBDAcLQQAgBmsQAxoMBAsgACIBQX9HDQUMAwtBACEEDAcLQQAhAQwFCyABQX9HDQILQbAwQbAwKAIAQQRyNgIACyACQf7///8HSw0BIAIQAyIBQQAQAyIATw0BIAFBf0YNASAAQX9GDQEgACABayIGIAVBKGpNDQELQaQwQaQwKAIAIAZqIgA2AgAgAEGoMCgCAEsEQEGoMCAANgIACwJAAkACQEGMLSgCACIDBEBBtDAhAANAIAEgACgCACICIAAoAgQiBGpGDQIgACgCCCIADQALDAILQYQtKAIAIgBBACABIABPG0UEQEGELSABNgIAC0EAIQBBuDAgBjYCAEG0MCABNgIAQZQtQX82AgBBmC1BzDAoAgA2AgBBwDBBADYCAANAIABBA3QiAkGkLWogAkGcLWoiAzYCACACQagtaiADNgIAIABBAWoiAEEgRw0AC0GALSAGQVhqIgBBeCABa0EHcUEAIAFBCGpBB3EbIgJrIgM2AgBBjC0gASACaiICNgIAIAIgA0EBcjYCBCAAIAFqQSg2AgRBkC1B3DAoAgA2AgAMAgsgAC0ADEEIcQ0AIAEgA00NACACIANLDQAgACAEIAZqNgIEQYwtIANBeCADa0EHcUEAIANBCGpBB3EbIgBqIgE2AgBBgC1BgC0oAgAgBmoiAiAAayIANgIAIAEgAEEBcjYCBCACIANqQSg2AgRBkC1B3DAoAgA2AgAMAQsgAUGELSgCACIESQRAQYQtIAE2AgAgASEECyABIAZqIQJBtDAhAAJAAkACQAJAAkACQANAIAIgACgCAEcEQCAAKAIIIgANAQwCCwsgAC0ADEEIcUUNAQtBtDAhAANAIAAoAgAiAiADTQRAIAIgACgCBGoiBCADSw0DCyAAKAIIIQAMAAALAAsgACABNgIAIAAgACgCBCAGajYCBCABQXggAWtBB3FBACABQQhqQQdxG2oiCSAFQQNyNgIEIAJBeCACa0EHcUEAIAJBCGpBB3EbaiIBIAlrIAVrIQAgBSAJaiEHIAEgA0YEQEGMLSAHNgIAQYAtQYAtKAIAIABqIgA2AgAgByAAQQFyNgIEDAMLIAFBiC0oAgBGBEBBiC0gBzYCAEH8LEH8LCgCACAAaiIANgIAIAcgAEEBcjYCBCAAIAdqIAA2AgAMAwsgASgCBCICQQNxQQFGBEAgAkF4cSEKAkAgAkH/AU0EQCABKAIIIgMgAkEDdiIEQQN0QZwtakcaIAMgASgCDCICRgRAQfQsQfQsKAIAQX4gBHdxNgIADAILIAMgAjYCDCACIAM2AggMAQsgASgCGCEIAkAgASABKAIMIgZHBEAgBCABKAIIIgJNBEAgAigCDBoLIAIgBjYCDCAGIAI2AggMAQsCQCABQRRqIgMoAgAiBQ0AIAFBEGoiAygCACIFDQBBACEGDAELA0AgAyECIAUiBkEUaiIDKAIAIgUNACAGQRBqIQMgBigCECIFDQALIAJBADYCAAsgCEUNAAJAIAEgASgCHCICQQJ0QaQvaiIDKAIARgRAIAMgBjYCACAGDQFB+CxB+CwoAgBBfiACd3E2AgAMAgsgCEEQQRQgCCgCECABRhtqIAY2AgAgBkUNAQsgBiAINgIYIAEoAhAiAgRAIAYgAjYCECACIAY2AhgLIAEoAhQiAkUNACAGIAI2AhQgAiAGNgIYCyABIApqIQEgACAKaiEACyABIAEoAgRBfnE2AgQgByAAQQFyNgIEIAAgB2ogADYCACAAQf8BTQRAIABBA3YiAUEDdEGcLWohAAJ/QfQsKAIAIgJBASABdCIBcUUEQEH0LCABIAJyNgIAIAAMAQsgACgCCAshASAAIAc2AgggASAHNgIMIAcgADYCDCAHIAE2AggMAwsgBwJ/QQAgAEEIdiIBRQ0AGkEfIABB////B0sNABogASABQYD+P2pBEHZBCHEiAXQiAiACQYDgH2pBEHZBBHEiAnQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASACciADcmsiAUEBdCAAIAFBFWp2QQFxckEcagsiATYCHCAHQgA3AhAgAUECdEGkL2ohAgJAQfgsKAIAIgNBASABdCIEcUUEQEH4LCADIARyNgIAIAIgBzYCAAwBCyAAQQBBGSABQQF2ayABQR9GG3QhAyACKAIAIQEDQCABIgIoAgRBeHEgAEYNAyADQR12IQEgA0EBdCEDIAIgAUEEcWoiBCgCECIBDQALIAQgBzYCEAsgByACNgIYIAcgBzYCDCAHIAc2AggMAgtBgC0gBkFYaiIAQXggAWtBB3FBACABQQhqQQdxGyICayIHNgIAQYwtIAEgAmoiAjYCACACIAdBAXI2AgQgACABakEoNgIEQZAtQdwwKAIANgIAIAMgBEEnIARrQQdxQQAgBEFZakEHcRtqQVFqIgAgACADQRBqSRsiAkEbNgIEIAJBvDApAgA3AhAgAkG0MCkCADcCCEG8MCACQQhqNgIAQbgwIAY2AgBBtDAgATYCAEHAMEEANgIAIAJBGGohAANAIABBBzYCBCAAQQhqIQEgAEEEaiEAIAQgAUsNAAsgAiADRg0DIAIgAigCBEF+cTYCBCADIAIgA2siBEEBcjYCBCACIAQ2AgAgBEH/AU0EQCAEQQN2IgFBA3RBnC1qIQACf0H0LCgCACICQQEgAXQiAXFFBEBB9CwgASACcjYCACAADAELIAAoAggLIQEgACADNgIIIAEgAzYCDCADIAA2AgwgAyABNgIIDAQLIANCADcCECADAn9BACAEQQh2IgBFDQAaQR8gBEH///8HSw0AGiAAIABBgP4/akEQdkEIcSIAdCIBIAFBgOAfakEQdkEEcSIBdCICIAJBgIAPakEQdkECcSICdEEPdiAAIAFyIAJyayIAQQF0IAQgAEEVanZBAXFyQRxqCyIANgIcIABBAnRBpC9qIQECQEH4LCgCACICQQEgAHQiBnFFBEBB+CwgAiAGcjYCACABIAM2AgAgAyABNgIYDAELIARBAEEZIABBAXZrIABBH0YbdCEAIAEoAgAhAQNAIAEiAigCBEF4cSAERg0EIABBHXYhASAAQQF0IQAgAiABQQRxaiIGKAIQIgENAAsgBiADNgIQIAMgAjYCGAsgAyADNgIMIAMgAzYCCAwDCyACKAIIIgAgBzYCDCACIAc2AgggB0EANgIYIAcgAjYCDCAHIAA2AggLIAlBCGohAAwFCyACKAIIIgAgAzYCDCACIAM2AgggA0EANgIYIAMgAjYCDCADIAA2AggLQYAtKAIAIgAgBU0NAEGALSAAIAVrIgE2AgBBjC1BjC0oAgAiACAFaiICNgIAIAIgAUEBcjYCBCAAIAVBA3I2AgQgAEEIaiEADAMLQfAsQTA2AgBBACEADAILAkAgCEUNAAJAIAQoAhwiAEECdEGkL2oiAygCACAERgRAIAMgATYCACABDQFB+CwgB0F+IAB3cSIHNgIADAILIAhBEEEUIAgoAhAgBEYbaiABNgIAIAFFDQELIAEgCDYCGCAEKAIQIgAEQCABIAA2AhAgACABNgIYCyAEKAIUIgBFDQAgASAANgIUIAAgATYCGAsCQCACQQ9NBEAgBCACIAVqIgBBA3I2AgQgACAEaiIAIAAoAgRBAXI2AgQMAQsgBCAFQQNyNgIEIAQgBWoiAyACQQFyNgIEIAIgA2ogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGcLWohAAJ/QfQsKAIAIgJBASABdCIBcUUEQEH0LCABIAJyNgIAIAAMAQsgACgCCAshASAAIAM2AgggASADNgIMIAMgADYCDCADIAE2AggMAQsgAwJ/QQAgAkEIdiIARQ0AGkEfIAJB////B0sNABogACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiBSAFQYCAD2pBEHZBAnEiBXRBD3YgACABciAFcmsiAEEBdCACIABBFWp2QQFxckEcagsiADYCHCADQgA3AhAgAEECdEGkL2ohAQJAAkAgB0EBIAB0IgVxRQRAQfgsIAUgB3I2AgAgASADNgIADAELIAJBAEEZIABBAXZrIABBH0YbdCEAIAEoAgAhBQNAIAUiASgCBEF4cSACRg0CIABBHXYhBSAAQQF0IQAgASAFQQRxaiIGKAIQIgUNAAsgBiADNgIQCyADIAE2AhggAyADNgIMIAMgAzYCCAwBCyABKAIIIgAgAzYCDCABIAM2AgggA0EANgIYIAMgATYCDCADIAA2AggLIARBCGohAAwBCwJAIAlFDQACQCABKAIcIgBBAnRBpC9qIgIoAgAgAUYEQCACIAQ2AgAgBA0BQfgsIApBfiAAd3E2AgAMAgsgCUEQQRQgCSgCECABRhtqIAQ2AgAgBEUNAQsgBCAJNgIYIAEoAhAiAARAIAQgADYCECAAIAQ2AhgLIAEoAhQiAEUNACAEIAA2AhQgACAENgIYCwJAIANBD00EQCABIAMgBWoiAEEDcjYCBCAAIAFqIgAgACgCBEEBcjYCBAwBCyABIAVBA3I2AgQgASAFaiIEIANBAXI2AgQgAyAEaiADNgIAIAgEQCAIQQN2IgVBA3RBnC1qIQBBiC0oAgAhAgJ/QQEgBXQiBSAGcUUEQEH0LCAFIAZyNgIAIAAMAQsgACgCCAshBSAAIAI2AgggBSACNgIMIAIgADYCDCACIAU2AggLQYgtIAQ2AgBB/CwgAzYCAAsgAUEIaiEACyALQRBqJAAgAAuZAQEDfCAAIACiIgMgAyADoqIgA0R81c9aOtnlPaJE65wriublWr6goiADIANEff6xV+Mdxz6iRNVhwRmgASq/oKJEpvgQERERgT+goCEFIAMgAKIhBCACRQRAIAQgAyAFokRJVVVVVVXFv6CiIACgDwsgACADIAFEAAAAAAAA4D+iIAQgBaKhoiABoSAERElVVVVVVcU/oqChC7YCAgJ9B3wgAbsiBpkiB0SN7bWg98awPmMEQCAADwsgByACtyIHRAAAAAAAAOA/omQEfUMAAAAABSAAIAGUIQEgAygCAAJ/IAYgBqAgB6O2iyADKAIEspQiBI4iBYtDAAAAT10EQCAFqAwBC0GAgICAeAsiAkEDdGoiAysDCCEHIAMrAwAhCiADKwMQIQkgAysDGCEGIAG7RBgtRFT7IQlAoiIIEBYgALuiIAijIAYgBCACspMiACAAIACUIgGUuyIIRJWoZ1VVVcU/oiILIAC7IgZElahnVVVVxT+ioSIMoiAJIAG7RAAAAAAAAOA/oiIJIAagIAhEAAAAAAAA4D+ioSIIoiAKIAkgBkS1K0xVVVXVv6KgIAuhIgaiIAdEAAAAAAAA8D8gDKEgCKEgBqGioKCgorYLC/IMAhJ/An0gACAAKAIIIgIgACgCDCIDbiIGNgIkIAAgACgCEEEUbCIBQbQJaigCACIENgIwIAAoAhghCSAAIAFBsAlqKAIAIgU2AhggACACIAMgBmxrNgIoIAAoAhwhDAJAAkACQCACIANLBEAgACABQbgJaioCACADs5QgArOVOAIsIAUgBSADbiIBIANsayIFQX8gAm4iBksNAiABIAZLDQIgASACbCIBIAIgBWwgA24iBUF/c0sNAiAAIAEgBWpBB2pBeHEiBTYCGCAEIANBAXQgAkkiAXYgA0ECdCACSSIGdiADQQN0IgcgAkl2IQQCQAJAIAENACAGDQAgByACTw0BCyAAIAQ2AjALIAQgA0EEdCACSSIBdiECIAFFQQAgAhsNASAAIAJBASACGyIENgIwDAELIAAgAUG8CWooAgA2AiwLAkAgAyAFbCICIAQgBWxBCGoiAU0EQEEBIQZB/////wEgA24gBU8NAQtBACEGIAEhAkH3////ASAEbiAFSQ0BCyAAKAJQIAJJBEAgACgCTCACQQJ0EAwiAUUNASAAIAI2AlAgACABNgJMCyAAAn8CQAJAIAZFBEBBfCEBIAAoAhgiAiAAKAIwIgRsQQRqIgVBfEoNASAAKAIQIQMMAgsgACgCGCECAkAgACgCDCIBRQ0AIAJFBEBBACECDAELIAFBASABQQFLGyEEIAJBfm0hBSAAKAIQQRRsQcAJaigCACEGIAGzIRMgACgCTCEHQQAhAwNAIAIgA2whCCADsyATlSEUQQAhAQNAIAcgASAIakECdGogACoCLCABQQFqIgEgBWqyIBSTIAIgBhAJOAIAIAEgAkcNAAsgA0EBaiIDIARHDQALC0EBQQIgACgCEEEIShsMAgsgAkEBdrMhEyAAKAIQIgNBFGxBwAlqKAIAIQYgBLMhFCAAKAJMIQQDQCABQQJ0IARqIAAqAiwgAbIgFJUgE5MgAiAGEAk4AhAgAUEBaiIBIAVHDQALC0EDQQQgA0EIShsLNgJUIAIgACgCIGpBf2oiASAAKAIcIgJLBEBB/////wEgACgCFCICbiABSQ0BIAAoAkggASACbEECdBAMIgJFDQEgACABNgIcIAAgAjYCSCABIQILIAAoAjhFBEAgAiAAKAIUbCICRQRAQQAPCyAAKAJIIAJBAnQQBEEADwsgACgCGCICIAlLBEAgACgCFCIDRQRAQQAPCyAJQX9qIQ0gA0ECdEF8aiEOIAAoAkQhD0EAIQYDQCAPIANBf2oiA0ECdCIQaiIHKAIAIgJBAXQhBSACIA1qIgEEQCADIAxsIQggACgCHCADbCEKIAAoAkghBANAIAQgAUF/aiIBIAJqIApqQQJ0aiAEIAEgCGpBAnRqKAIANgIAIAENAAsLIA4gBkECdGshCCACBEAgACgCSCAAKAIcIAhsaiACQQJ0EAQLIAdBADYCAAJAIAUgCWoiBCAAKAIYIgVJBEAgBEF/aiIHBEAgBUF+aiERIARBfmohEiAAKAIcIANsIQogACgCSCELQQAhAUEAIQIDQCALIAEgEWogCmpBAnRqIAsgASASaiAKakECdGooAgA2AgAgAkF/cyEBIAJBAWoiAiAHRw0ACwsgBUF/aiICIAdLBEAgACgCSCAAKAIcIAhsaiACIAdrQQJ0EAQLIAAoAjwgEGoiAiACKAIAIAUgBGtBAXZqNgIADAELIAcgBCAFa0EBdiICNgIAIAJBf2oiAUEAIAAoAhgiBGtGDQAgASAEaiIBQQEgAUEBSxshBSAAKAIcIANsIQcgACgCSCEEQQAhAQNAIAQgASAHaiIIQQJ0aiAEIAIgCGpBAnRqKAIANgIAIAFBAWoiASAFRw0ACwsgBkEBaiEGIAMNAAtBAA8LQQAhASACIAlPDQEgACgCFEUNASAAKAJEIQZBACEDA0AgBiADQQJ0aiIEKAIAIQEgBCAJIAJrQQF2IgI2AgAgASACaiIHQX9qIgFBACAAKAIYIgVrRwRAIAEgBWoiAUEBIAFBAUsbIQggACgCHCADbCEKIAAoAkghBUEAIQEDQCAFIAEgCmoiC0ECdGogBSACIAtqQQJ0aigCADYCACABQQFqIgEgCEcNAAsLIAQgBzYCACADQQFqIgMgACgCFE8EQEEADwUgACgCGCECDAELAAALAAsgACAJNgIYIABBBTYCVEEBIQELIAELhwwBBn8gACABaiEFAkACQCAAKAIEIgJBAXENACACQQNxRQ0BIAAoAgAiAyABaiEBIAAgA2siAEGILSgCAEcEQEGELSgCACEEIANB/wFNBEAgACgCCCIEIANBA3YiA0EDdEGcLWpHGiAEIAAoAgwiAkYEQEH0LEH0LCgCAEF+IAN3cTYCAAwDCyAEIAI2AgwgAiAENgIIDAILIAAoAhghBgJAIAAgACgCDCICRwRAIAQgACgCCCIDTQRAIAMoAgwaCyADIAI2AgwgAiADNgIIDAELAkAgAEEUaiIDKAIAIgQNACAAQRBqIgMoAgAiBA0AQQAhAgwBCwNAIAMhByAEIgJBFGoiAygCACIEDQAgAkEQaiEDIAIoAhAiBA0ACyAHQQA2AgALIAZFDQECQCAAIAAoAhwiA0ECdEGkL2oiBCgCAEYEQCAEIAI2AgAgAg0BQfgsQfgsKAIAQX4gA3dxNgIADAMLIAZBEEEUIAYoAhAgAEYbaiACNgIAIAJFDQILIAIgBjYCGCAAKAIQIgMEQCACIAM2AhAgAyACNgIYCyAAKAIUIgNFDQEgAiADNgIUIAMgAjYCGAwBCyAFKAIEIgJBA3FBA0cNAEH8LCABNgIAIAUgAkF+cTYCBCAAIAFBAXI2AgQgBSABNgIADwsCQCAFKAIEIgJBAnFFBEAgBUGMLSgCAEYEQEGMLSAANgIAQYAtQYAtKAIAIAFqIgE2AgAgACABQQFyNgIEIABBiC0oAgBHDQNB/CxBADYCAEGILUEANgIADwsgBUGILSgCAEYEQEGILSAANgIAQfwsQfwsKAIAIAFqIgE2AgAgACABQQFyNgIEIAAgAWogATYCAA8LQYQtKAIAIQMgAkF4cSABaiEBAkAgAkH/AU0EQCAFKAIIIgQgAkEDdiICQQN0QZwtakcaIAQgBSgCDCIDRgRAQfQsQfQsKAIAQX4gAndxNgIADAILIAQgAzYCDCADIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgJHBEAgAyAFKAIIIgNNBEAgAygCDBoLIAMgAjYCDCACIAM2AggMAQsCQCAFQRRqIgMoAgAiBA0AIAVBEGoiAygCACIEDQBBACECDAELA0AgAyEHIAQiAkEUaiIDKAIAIgQNACACQRBqIQMgAigCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIDQQJ0QaQvaiIEKAIARgRAIAQgAjYCACACDQFB+CxB+CwoAgBBfiADd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAI2AgAgAkUNAQsgAiAGNgIYIAUoAhAiAwRAIAIgAzYCECADIAI2AhgLIAUoAhQiA0UNACACIAM2AhQgAyACNgIYCyAAIAFBAXI2AgQgACABaiABNgIAIABBiC0oAgBHDQFB/CwgATYCAA8LIAUgAkF+cTYCBCAAIAFBAXI2AgQgACABaiABNgIACyABQf8BTQRAIAFBA3YiAkEDdEGcLWohAQJ/QfQsKAIAIgNBASACdCICcUUEQEH0LCACIANyNgIAIAEMAQsgASgCCAshAyABIAA2AgggAyAANgIMIAAgATYCDCAAIAM2AggPCyAAQgA3AhAgAAJ/QQAgAUEIdiICRQ0AGkEfIAFB////B0sNABogAiACQYD+P2pBEHZBCHEiAnQiAyADQYDgH2pBEHZBBHEiA3QiBCAEQYCAD2pBEHZBAnEiBHRBD3YgAiADciAEcmsiAkEBdCABIAJBFWp2QQFxckEcagsiAzYCHCADQQJ0QaQvaiECAkACQEH4LCgCACIEQQEgA3QiB3FFBEBB+CwgBCAHcjYCACACIAA2AgAgACACNgIYDAELIAFBAEEZIANBAXZrIANBH0YbdCEDIAIoAgAhAgNAIAIiBCgCBEF4cSABRg0CIANBHXYhAiADQQF0IQMgBCACQQRxaiIHQRBqKAIAIgINAAsgByAANgIQIAAgBDYCGAsgACAANgIMIAAgADYCCA8LIAQoAggiASAANgIMIAQgADYCCCAAQQA2AhggACAENgIMIAAgATYCCAsLfwECfyAARQRAIAEQBw8LIAFBQE8EQEHwLEEwNgIAQQAPCyAAQXhqQRAgAUELakF4cSABQQtJGxAVIgIEQCACQQhqDwsgARAHIgJFBEBBAA8LIAIgAEF8QXggAEF8aigCACIDQQNxGyADQXhxaiIDIAEgAyABSRsQEyAAEAIgAguSAQEDfEQAAAAAAADwPyAAIACiIgJEAAAAAAAA4D+iIgOhIgREAAAAAAAA8D8gBKEgA6EgAiACIAIgAkSQFcsZoAH6PqJEd1HBFmzBVr+gokRMVVVVVVWlP6CiIAIgAqIiAyADoiACIAJE1DiIvun6qL2iRMSxtL2e7iE+oKJErVKcgE9+kr6goqCiIAAgAaKhoKALzQgDEH8BfQF8IwBBoCBrIgckACAFKAIAIQsgAygCACEOIAAoAlwhECAAKAJYIREgACgCSCEGIAAoAhghCSAAKAIcIQggAEEBNgJcAkAgDkUNACALRQ0AIAggCWtBAWohEiAGIAEgCGwiCEECdGohEyAIQQJ0IAZqQXxqIRQDQCAHIBIgDiAOIBJLGzYCDCAHIAtBgAggC0GACEkbIgY2AggCQAJAAn8gAUECdCIPIAAoAkRqIggoAgBFBEBBACEJIAdBEGoMAQsgByAGNgKcICAHIAgoAgA2ApggIABBATYCOCAAKAIYIQwgACABIAAoAkggACgCHCABbEECdGoiCiAHQZggaiAHQRBqIAdBnCBqIAAoAlQRAAAhDSAAKAI8IA9qIgkoAgAiCCAHKAKYICIGSARAIAcgCDYCmCAgCCEGCyAHIA02ApwgIAkgCSgCACAGazYCACAHKAKYICEGIAxBAk4EQCAMQX9qIQhBACEJA0AgCiAJQQJ0aiAKIAYgCWpBAnRqKAIANgIAIAlBAWoiCSAIRw0ACwsgACgCRCAPaiIIIAgoAgAgBmsiBjYCACAGBEAgDEF/aiEMQQAhCSAHKAKYICENA0AgCiAJIAxqIhVBAnRqIAogDSAVakECdGooAgA2AgAgCUEBaiIJIAZHDQALCyAAKAJcIQYgByAHKAIIIAcoApwgIglrNgIIIAsgCWshCyAIKAIADQEgB0EQaiAGIAlsQQJ0agshDSAHKAIMIQgCQCACBEAgCEUNASAAKAIYIQpBACEGA0AgBiAKakECdCATakF8aiACIAYgEWxBAXRqLgEAsjgCACAGQQFqIgYgCEcNAAsMAQsgCEUNACAUIAAoAhhBAnRqIAhBAnQQBAsgAEEBNgI4IAAoAhghCiAAIAEgACgCSCAAKAIcIAFsQQJ0aiIMIAdBDGogDSAHQQhqIAAoAlQRAAAhDSAAKAI8IA9qIg8oAgAiBiAHKAIMIghIBEAgByAGNgIMIAYhCAsgByANNgIIIA8gDygCACAIazYCACAHKAIMIQggCkECSA0BIApBf2ohCkEAIQYDQCAMIAZBAnRqIAwgBiAIakECdGooAgA2AgAgBkEBaiIGIApHDQALDAELQQAhCCAHQQA2AgggB0EANgIMC0EAIQYgBygCCCIKIAlqIgkEQANAIAQgBiAQbEEBdGoCf0GAgAIgB0EQaiAGQQJ0aioCACIWQwD//8ZdDQAaQf//ASAWQwD9/0ZeDQAaIBa7RAAAAAAAAOA/oJwiF5lEAAAAAAAA4EFjBEAgF6oMAQtBgICAgHgLOwEAIAZBAWoiBiAJRw0ACwsgCyAKayELIA4gCGsiDkUNASACIAggEWxBAXRqQQAgAhshAiAEIAkgEGxBAXRqIQQgCw0ACwsgACAQNgJcIAMgAygCACAOazYCACAFIAUoAgAgC2s2AgAgACgCVBogB0GgIGokAAu/BQIPfwl9IAFBAnQiBiAAKAJAaiIOKAIAIQdBACEBAkAgACgCPCAGaiIPKAIAIgggAygCACIKTg0AIAAoAighCyAAKAIkIQwgACgCXCENIAUoAgAiA0EAIANBAEobIQUgACgCDCIGsyEbIAAoAhgiEEEBTgRAA0AgASAFRgRAIAUhAQwDCyAAKAIwIhEgB2wiAyADIAZuIgMgBmxrsyEYIAIgCEECdGohEkEEIANrIRMgACgCTCEUQQAhA0MAAAAAIRZDAAAAACEZQwAAAAAhGkMAAAAAIRcDQCAZIBIgA0ECdGoqAgAiFSAUIBMgA0EBaiIDIBFsakECdGoiCSoCAJSSIRkgFiAVIAkqAgSUkiEWIBogFSAJQXxqKgIAlJIhGiAXIBUgCUF4aioCAJSSIRcgAyAQRw0ACyAEIAEgDWxBAnRqIBggG5UiFSAVIBVDiqsqPpQiGJSUIhwgGJMiGCAXlCAVIBUgFUMAAAA/lJQiF5IgFSAXlJMiHSAalJIgGUQAAAAAAADwPyAYu6EgHbuhIBcgFUM7qqq+lJIgHJMiFbuhtpSSIBUgFpSSOAIAIAcgC2oiA0EAIAYgAyAGSRtrIQcgAUEBaiEBIAggDGogAyAGT2oiCCAKSA0ADAIACwALA0AgASAFRgRAIAUhAQwCCyAEIAEgDWxBAnRqIAAoAjAgB2wgBnCzIBuVIhUgFSAVQ4qrKj6UIhaUlCIZIBaTIhpDAAAAAJQgFSAVIBVDAAAAP5SUIhaSIBUgFpSTIhdDAAAAAJSSRAAAAAAAAPA/IBq7oSAXu6EgFiAVQzuqqr6UkiAZkyIVu6G2QwAAAACUkiAVQwAAAACUkjgCACAHIAtqIgJBACAGIAIgBkkbayEHIAFBAWohASAIIAxqIAIgBk9qIgggCkgNAAsLIA8gCDYCACAOIAc2AgAgAQvpBQMPfwR9BHwgAUECdCIGIAAoAkBqIg4oAgAhB0EAIQECQCAAKAI8IAZqIg8oAgAiCCADKAIAIgpODQAgACgCKCELIAAoAiQhDCAAKAJcIQ0gBSgCACIDQQAgA0EAShshBSAAKAIMIgazIRggACgCGCIQQQFOBEADQCABIAVGBEAgBSEBDAMLIAAoAjAiESAHbCIDIAMgBm4iAyAGbGuzIRYgAiAIQQJ0aiESQQQgA2shEyAAKAJMIRRBACEDRAAAAAAAAAAAIRlEAAAAAAAAAAAhGkQAAAAAAAAAACEbRAAAAAAAAAAAIRwDQCAaIBIgA0ECdGoqAgAiFSAUIBMgA0EBaiIDIBFsakECdGoiCSoCAJS7oCEaIBkgFSAJKgIElLugIRkgGyAVIAlBfGoqAgCUu6AhGyAcIBUgCUF4aioCAJS7oCEcIAMgEEcNAAsgBCABIA1sQQJ0aiAcIBYgGJUiFSAVIBVDiqsqPpQiFpSUIhcgFpO7IhyiIBsgFSAVIBVDAAAAP5SUIhaSIBUgFpSTuyIboqAgGkQAAAAAAADwPyAcoSAboSAWIBVDO6qqvpSSIBeTuyIaoba7oqAgGSAaoqC2OAIAIAcgC2oiA0EAIAYgAyAGSRtrIQcgAUEBaiEBIAggDGogAyAGT2oiCCAKSA0ADAIACwALA0AgASAFRgRAIAUhAQwCCyAEIAEgDWxBAnRqIAAoAjAgB2wgBnCzIBiVIhUgFSAVQ4qrKj6UIhaUlCIXIBaTuyIZRAAAAAAAAAAAoiAVIBUgFUMAAAA/lJQiFpIgFSAWlJO7IhpEAAAAAAAAAACioEQAAAAAAADwPyAZoSAaoSAWIBVDO6qqvpSSIBeTuyIZoba7RAAAAAAAAAAAoqAgGUQAAAAAAAAAAKKgtjgCACAHIAtqIgJBACAGIAIgBkkbayEHIAFBAWohASAIIAxqIAIgBk9qIgggCkgNAAsLIA8gCDYCACAOIAc2AgAgAQv1AgINfwF9IAFBAnQiBiAAKAJAaiINKAIAIQdBACEBAkAgACgCPCAGaiIOKAIAIgYgAygCACIJTg0AIAAoAgwhCCAAKAIoIQogACgCJCELIAAoAlwhDCAFKAIAIgNBACADQQBKGyEDIAAoAhgiBUEBTgRAIAAoAkwhDwNAIAEgA0YEQCADIQEMAwsgAiAGQQJ0aiEQIA8gBSAHbEECdGohEUMAAAAAIRNBACEAA0AgEyARIABBAnQiEmoqAgAgECASaioCAJSSIRMgAEEBaiIAIAVHDQALIAQgASAMbEECdGogEzgCACAHIApqIgBBACAIIAAgCEkbayEHIAFBAWohASAGIAtqIAAgCE9qIgYgCUgNAAsMAQsDQCABIANGBEAgAyEBDAILIAQgASAMbEECdGpBADYCACAHIApqIgBBACAIIAAgCEkbayEHIAFBAWohASAGIAtqIAAgCE9qIgYgCUgNAAsLIA4gBjYCACANIAc2AgAgAQv5AwIOfwR8IAFBAnQiBiAAKAJAaiIRKAIAIQdBACEBAkAgACgCPCAGaiISKAIAIgYgAygCACIMTg0AIAAoAgwhCCAAKAIoIQ0gACgCJCEOIAAoAlwhDyAFKAIAIgNBACADQQBKGyEDIAAoAhgiEEEBTgRAIAAoAkwhEwNAIAEgA0YEQCADIQEMAwsgAiAGQQJ0aiEAIBMgByAQbEECdGohCkEAIQVEAAAAAAAAAAAhFEQAAAAAAAAAACEVRAAAAAAAAAAAIRZEAAAAAAAAAAAhFwNAIBcgCiAFQQJ0IglqKgIAIAAgCWoqAgCUu6AhFyAUIAogCUEMciILaioCACAAIAtqKgIAlLugIRQgFSAKIAlBCHIiC2oqAgAgACALaioCAJS7oCEVIBYgCiAJQQRyIglqKgIAIAAgCWoqAgCUu6AhFiAFQQRqIgUgEEgNAAsgBCABIA9sQQJ0aiAXIBagIBWgIBSgtjgCACAHIA1qIgBBACAIIAAgCEkbayEHIAFBAWohASAGIA5qIAAgCE9qIgYgDEgNAAsMAQsDQCABIANGBEAgAyEBDAILIAQgASAPbEECdGpBADYCACAHIA1qIgBBACAIIAAgCEkbayEHIAFBAWohASAGIA5qIAAgCE9qIgYgDEgNAAsLIBIgBjYCACARIAc2AgAgAQv+AwECfyACQYAETwRAIAAgASACEAAaDwsgACACaiEDAkAgACABc0EDcUUEQAJAIAJBAUgEQCAAIQIMAQsgAEEDcUUEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA08NASACQQNxDQALCwJAIANBfHEiAEHAAEkNACACIABBQGoiBEsNAANAIAIgASgCADYCACACIAEoAgQ2AgQgAiABKAIINgIIIAIgASgCDDYCDCACIAEoAhA2AhAgAiABKAIUNgIUIAIgASgCGDYCGCACIAEoAhw2AhwgAiABKAIgNgIgIAIgASgCJDYCJCACIAEoAig2AiggAiABKAIsNgIsIAIgASgCMDYCMCACIAEoAjQ2AjQgAiABKAI4NgI4IAIgASgCPDYCPCABQUBrIQEgAkFAayICIARNDQALCyACIABPDQEDQCACIAEoAgA2AgAgAUEEaiEBIAJBBGoiAiAASQ0ACwwBCyADQQRJBEAgACECDAELIANBfGoiBCAASQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAiABLQABOgABIAIgAS0AAjoAAiACIAEtAAM6AAMgAUEEaiEBIAJBBGoiAiAETQ0ACwsgAiADSQRAA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA0cNAAsLC7kCAQR/AkAgAUUNACACRQ0AAkAgACgCACADRw0AIAAoAgQgBEcNACAAKAIIIAFHDQAgACgCDCACRg0BCyAAIAE2AgggACAENgIEIAAgAzYCACAAKAIMIQUgACACNgIMIAEhBCACIQMDQCAEIAMiBHAiAw0ACyAAIAIgBG4iAzYCDCAAIAEgBG42AggCQCAFRQ0AIAAoAhRFDQAgACgCQCEGQQAhBANAIAYgBEECdGoiASgCACICIAIgBW4iAiAFbGsiB0F/IANuIghLDQIgAiAISw0CIAIgA2wiAiADIAdsIAVuIgNBf3NLDQIgASACIANqIgI2AgAgAiAAKAIMIgJPBEAgASACQX9qNgIACyAEQQFqIgQgACgCFE8NASAAKAIMIQMMAAALAAsgACgCNEUEQA8LIAAQChoLC6sHAQl/IAAoAgQiB0EDcSECIAAgB0F4cSIGaiEEAkBBhC0oAgAiBSAASw0AIAJBAUYNAAsCQCACRQRAQQAhAiABQYACSQ0BIAYgAUEEak8EQCAAIQIgBiABa0HUMCgCAEEBdE0NAgtBAA8LAkAgBiABTwRAIAYgAWsiAkEQSQ0BIAAgB0EBcSABckECcjYCBCAAIAFqIgEgAkEDcjYCBCAEIAQoAgRBAXI2AgQgASACEAsMAQtBACECIARBjC0oAgBGBEBBgC0oAgAgBmoiBSABTQ0CIAAgB0EBcSABckECcjYCBCAAIAFqIgIgBSABayIBQQFyNgIEQYAtIAE2AgBBjC0gAjYCAAwBCyAEQYgtKAIARgRAQfwsKAIAIAZqIgUgAUkNAgJAIAUgAWsiAkEQTwRAIAAgB0EBcSABckECcjYCBCAAIAFqIgEgAkEBcjYCBCAAIAVqIgUgAjYCACAFIAUoAgRBfnE2AgQMAQsgACAHQQFxIAVyQQJyNgIEIAAgBWoiASABKAIEQQFyNgIEQQAhAkEAIQELQYgtIAE2AgBB/CwgAjYCAAwBCyAEKAIEIgNBAnENASADQXhxIAZqIgkgAUkNASAJIAFrIQoCQCADQf8BTQRAIAQoAggiBiADQQN2IgVBA3RBnC1qRxogBiAEKAIMIghGBEBB9CxB9CwoAgBBfiAFd3E2AgAMAgsgBiAINgIMIAggBjYCCAwBCyAEKAIYIQgCQCAEIAQoAgwiA0cEQCAFIAQoAggiAk0EQCACKAIMGgsgAiADNgIMIAMgAjYCCAwBCwJAIARBFGoiAigCACIGDQAgBEEQaiICKAIAIgYNAEEAIQMMAQsDQCACIQUgBiIDQRRqIgIoAgAiBg0AIANBEGohAiADKAIQIgYNAAsgBUEANgIACyAIRQ0AAkAgBCAEKAIcIgVBAnRBpC9qIgIoAgBGBEAgAiADNgIAIAMNAUH4LEH4LCgCAEF+IAV3cTYCAAwCCyAIQRBBFCAIKAIQIARGG2ogAzYCACADRQ0BCyADIAg2AhggBCgCECICBEAgAyACNgIQIAIgAzYCGAsgBCgCFCICRQ0AIAMgAjYCFCACIAM2AhgLIApBD00EQCAAIAdBAXEgCXJBAnI2AgQgACAJaiIBIAEoAgRBAXI2AgQMAQsgACAHQQFxIAFyQQJyNgIEIAAgAWoiAiAKQQNyNgIEIAAgCWoiASABKAIEQQFyNgIEIAIgChALCyAAIQILIAILxQEBAn8jAEEQayIBJAACQCAAvUIgiKdB/////wdxIgJB+8Ok/wNNBEAgAkGAgMDyA0kNASAARAAAAAAAAAAAQQAQCCEADAELIAJBgIDA/wdPBEAgACAAoSEADAELAkACQAJAAkAgACABEBhBA3EOAwABAgMLIAErAwAgASsDCEEBEAghAAwDCyABKwMAIAErAwgQDSEADAILIAErAwAgASsDCEEBEAiaIQAMAQsgASsDACABKwMIEA2aIQALIAFBEGokACAAC9cCAQJ/AkACQAJAIABFDQAgAUUNACACRQ0AIAVBC0kNAQsgBkUNASAGQQM2AgBBAA8LQeAAEAYiB0UEQEEAIQcgBkUNASAGQQE2AgBBAA8LIAdCADcCACAHQYCAgPwDNgIsIAdBfzYCECAHQoGAgIAQNwJYIAcgADYCFCAHQaABNgIgIAdCADcCCCAHIABBAnQiABAGIgg2AjwCQCAIRQ0AIAcgABAGIgg2AkQgCEUNACAHIAAQBiIANgJAIABFDQAgByAFNgIQIAcgASACIAMgBBAUAkAgBxAKIgBFBEAgB0EBNgI0DAELIAcoAkgQAiAHKAJMEAIgBygCPBACIAcoAkQQAiAHKAJAEAIgBxACQQAhBwsgBkUNASAGIAA2AgAgBw8LIAYEQCAGQQE2AgALIAcoAkwQAiAHKAI8EAIgBygCRBACIAcoAkAQAiAHEAJBACEHCyAHC8sJAwV/AX4EfCMAQTBrIgQkAAJAAkACQCAAvSIHQiCIpyICQf////8HcSIDQfrUvYAETQRAIAJB//8/cUH7wyRGDQEgA0H8souABE0EQCAHQgBZBEAgASAARAAAQFT7Ifm/oCIARDFjYhphtNC9oCIIOQMAIAEgACAIoUQxY2IaYbTQvaA5AwhBASECDAULIAEgAEQAAEBU+yH5P6AiAEQxY2IaYbTQPaAiCDkDACABIAAgCKFEMWNiGmG00D2gOQMIQX8hAgwECyAHQgBZBEAgASAARAAAQFT7IQnAoCIARDFjYhphtOC9oCIIOQMAIAEgACAIoUQxY2IaYbTgvaA5AwhBAiECDAQLIAEgAEQAAEBU+yEJQKAiAEQxY2IaYbTgPaAiCDkDACABIAAgCKFEMWNiGmG04D2gOQMIQX4hAgwDCyADQbuM8YAETQRAIANBvPvXgARNBEAgA0H8ssuABEYNAiAHQgBZBEAgASAARAAAMH982RLAoCIARMqUk6eRDum9oCIIOQMAIAEgACAIoUTKlJOnkQ7pvaA5AwhBAyECDAULIAEgAEQAADB/fNkSQKAiAETKlJOnkQ7pPaAiCDkDACABIAAgCKFEypSTp5EO6T2gOQMIQX0hAgwECyADQfvD5IAERg0BIAdCAFkEQCABIABEAABAVPshGcCgIgBEMWNiGmG08L2gIgg5AwAgASAAIAihRDFjYhphtPC9oDkDCEEEIQIMBAsgASAARAAAQFT7IRlAoCIARDFjYhphtPA9oCIIOQMAIAEgACAIoUQxY2IaYbTwPaA5AwhBfCECDAMLIANB+sPkiQRLDQELIAEgACAARIPIyW0wX+Q/okQAAAAAAAA4Q6BEAAAAAAAAOMOgIglEAABAVPsh+b+ioCIIIAlEMWNiGmG00D2iIguhIgA5AwAgA0EUdiIFIAC9QjSIp0H/D3FrQRFIIQMCfyAJmUQAAAAAAADgQWMEQCAJqgwBC0GAgICAeAshAgJAIAMNACABIAggCUQAAGAaYbTQPaIiAKEiCiAJRHNwAy6KGaM7oiAIIAqhIAChoSILoSIAOQMAIAUgAL1CNIinQf8PcWtBMkgEQCAKIQgMAQsgASAKIAlEAAAALooZozuiIgChIgggCUTBSSAlmoN7OaIgCiAIoSAAoaEiC6EiADkDAAsgASAIIAChIAuhOQMIDAELIANBgIDA/wdPBEAgASAAIAChIgA5AwAgASAAOQMIQQAhAgwBCyAHQv////////8Hg0KAgICAgICAsMEAhL8hAEEAIQJBASEFA0AgBEEQaiACQQN0agJ/IACZRAAAAAAAAOBBYwRAIACqDAELQYCAgIB4C7ciCDkDACAAIAihRAAAAAAAAHBBoiEAQQEhAiAFQQFxIQZBACEFIAYNAAsgBCAAOQMgAkAgAEQAAAAAAAAAAGIEQEECIQIMAQtBASEFA0AgBSICQX9qIQUgBEEQaiACQQN0aisDAEQAAAAAAAAAAGENAAsLIARBEGogBCADQRR2Qep3aiACQQFqEBkhAiAEKwMAIQAgB0J/VwRAIAEgAJo5AwAgASAEKwMImjkDCEEAIAJrIQIMAQsgASAAOQMAIAEgBCkDCDcDCAsgBEEwaiQAIAILtA4CEH8CfCMAQbAEayIGJAAgAiACQX1qQRhtIgRBACAEQQBKGyINQWhsaiEIQdQWKAIAIgkgA0F/aiIHakEATgRAIAMgCWohBCANIAdrIQIDQCAGQcACaiAFQQN0aiACQQBIBHxEAAAAAAAAAAAFIAJBAnRB4BZqKAIAtws5AwAgAkEBaiECIAVBAWoiBSAERw0ACwsgCEFoaiEKQQAhBCAJQQAgCUEAShshBSADQQFIIQsDQAJAIAsEQEQAAAAAAAAAACEUDAELIAQgB2ohDEEAIQJEAAAAAAAAAAAhFANAIBQgACACQQN0aisDACAGQcACaiAMIAJrQQN0aisDAKKgIRQgAkEBaiICIANHDQALCyAGIARBA3RqIBQ5AwAgBCAFRiECIARBAWohBCACRQ0AC0EvIAhrIRBBMCAIayEOIAhBZ2ohESAJIQQCQANAIAYgBEEDdGorAwAhFEEAIQIgBCEFIARBAUgiB0UEQANAIAZB4ANqIAJBAnRqAn8gFAJ/IBREAAAAAAAAcD6iIhSZRAAAAAAAAOBBYwRAIBSqDAELQYCAgIB4C7ciFEQAAAAAAABwwaKgIhWZRAAAAAAAAOBBYwRAIBWqDAELQYCAgIB4CzYCACAGIAVBf2oiBUEDdGorAwAgFKAhFCACQQFqIgIgBEcNAAsLAn8gFCAKEAUiFCAURAAAAAAAAMA/opxEAAAAAAAAIMCioCIUmUQAAAAAAADgQWMEQCAUqgwBC0GAgICAeAshCyAUIAu3oSEUAkACQAJAAn8gCkEBSCISRQRAIARBAnQgBmoiAiACKALcAyICIAIgDnUiAiAOdGsiBTYC3AMgAiALaiELIAUgEHUMAQsgCg0BIARBAnQgBmooAtwDQRd1CyIMQQFIDQIMAQtBAiEMIBREAAAAAAAA4D9mQQFzRQ0AQQAhDAwBC0EAIQJBACEFIAdFBEADQCAGQeADaiACQQJ0aiITKAIAIQ9B////ByEHAn8CQCAFDQBBgICACCEHIA8NAEEADAELIBMgByAPazYCAEEBCyEFIAJBAWoiAiAERw0ACwsCQCASDQACQAJAIBEOAgABAgsgBEECdCAGaiICIAIoAtwDQf///wNxNgLcAwwBCyAEQQJ0IAZqIgIgAigC3ANB////AXE2AtwDCyALQQFqIQsgDEECRw0ARAAAAAAAAPA/IBShIRRBAiEMIAVFDQAgFEQAAAAAAADwPyAKEAWhIRQLIBREAAAAAAAAAABhBEBBACEFAkAgBCICIAlMDQADQCAGQeADaiACQX9qIgJBAnRqKAIAIAVyIQUgAiAJSg0ACyAFRQ0AIAohCANAIAhBaGohCCAGQeADaiAEQX9qIgRBAnRqKAIARQ0ACwwDC0EBIQIDQCACIgVBAWohAiAGQeADaiAJIAVrQQJ0aigCAEUNAAsgBCAFaiEFA0AgBkHAAmogAyAEaiIHQQN0aiAEQQFqIgQgDWpBAnRB4BZqKAIAtzkDAEEAIQJEAAAAAAAAAAAhFCADQQFOBEADQCAUIAAgAkEDdGorAwAgBkHAAmogByACa0EDdGorAwCioCEUIAJBAWoiAiADRw0ACwsgBiAEQQN0aiAUOQMAIAQgBUgNAAsgBSEEDAELCwJAIBRBACAKaxAFIhREAAAAAAAAcEFmQQFzRQRAIAZB4ANqIARBAnRqAn8gFAJ/IBREAAAAAAAAcD6iIhSZRAAAAAAAAOBBYwRAIBSqDAELQYCAgIB4CyICt0QAAAAAAABwwaKgIhSZRAAAAAAAAOBBYwRAIBSqDAELQYCAgIB4CzYCACAEQQFqIQQMAQsCfyAUmUQAAAAAAADgQWMEQCAUqgwBC0GAgICAeAshAiAKIQgLIAZB4ANqIARBAnRqIAI2AgALRAAAAAAAAPA/IAgQBSEUAkAgBEF/TA0AIAQhAgNAIAYgAkEDdGogFCAGQeADaiACQQJ0aigCALeiOQMAIBREAAAAAAAAcD6iIRQgAkEASiEAIAJBf2ohAiAADQALQQAhByAEQQBIDQAgCUEAIAlBAEobIQAgBCEFA0AgACAHIAAgB0kbIQMgBCAFayEIQQAhAkQAAAAAAAAAACEUA0AgFCACQQN0QbAsaisDACAGIAIgBWpBA3RqKwMAoqAhFCACIANHIQogAkEBaiECIAoNAAsgBkGgAWogCEEDdGogFDkDACAFQX9qIQUgBCAHRyECIAdBAWohByACDQALC0QAAAAAAAAAACEUIARBAE4EQCAEIQIDQCAUIAZBoAFqIAJBA3RqKwMAoCEUIAJBAEohACACQX9qIQIgAA0ACwsgASAUmiAUIAwbOQMAIAYrA6ABIBShIRRBASECIARBAU4EQANAIBQgBkGgAWogAkEDdGorAwCgIRQgAiAERyEAIAJBAWohAiAADQALCyABIBSaIBQgDBs5AwggBkGwBGokACALQQdxCxoAIABBBE0EQCAAQQJ0QbAWaigCAA8LQewICxYAIAEgACgCADYCACACIAAoAgQ2AgALzAEBBn8gACgCXCEIIAIoAgAhBiAEKAIAIQcgACAAKAIUIgU2AlwgACgCWCEJIAAgBTYCWAJAIAVFDQBBACEFIAFFBEADQCAEIAc2AgAgAiAGNgIAIAAgBUEAIAIgAyAFQQF0aiAEEA4gBUEBaiIFIAAoAhRJDQAMAgALAAsDQCAEIAc2AgAgAiAGNgIAIAAgBSABIAVBAXQiCmogAiADIApqIAQQDiAFQQFqIgUgACgCFEkNAAsLIAAgCDYCXCAAIAk2AlggACgCVEEFRgspACAAKAJIEAIgACgCTBACIAAoAjwQAiAAKAJEEAIgACgCQBACIAAQAgvDAQEHfyABQQJ0IgYgACgCQGoiBygCACECQQAhAQJAIAAoAjwgBmoiCCgCACIGIAMoAgAiCU4NACAAKAIMIQMgACgCKCEKIAAoAiQhCyAAKAJcIQwgBSgCACIAQQAgAEEAShshAANAIAAgAUYEQCAAIQEMAgsgBCABIAxsQQJ0akEANgIAIAIgCmoiBUEAIAMgBSADSRtrIQIgAUEBaiEBIAYgC2ogBSADT2oiBiAJSA0ACwsgCCAGNgIAIAcgAjYCACABCxIAIAAgASACIAEgAiADIAQQFwsDAAELC9wkBgBBgAgLpgFTdWNjZXNzLgBNZW1vcnkgYWxsb2NhdGlvbiBmYWlsZWQuAEJhZCByZXNhbXBsZXIgc3RhdGUuAEludmFsaWQgYXJndW1lbnQuAElucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBvdmVybGFwLgBVbmtub3duIGVycm9yLiBCYWQgZXJyb3IgY29kZSBvciBzdHJhbmdlIHZlcnNpb24gbWlzbWF0Y2guAEGwCQvQCAgAAAAEAAAA4XpUP/YoXD+MBQAAEAAAAAQAAACamVk/rkdhP4wFAAAgAAAABAAAAMHKYT/D9Wg/jAUAADAAAAAIAAAAuB5lP4PAaj+UBQAAQAAAAAgAAACoxms/16NwP5QFAABQAAAAEAAAADEIbD/Xo3A/nAUAAGAAAAAQAAAA16NwP4XrcT+cBQAAgAAAABAAAAAzM3M/MzNzP5wFAACgAAAAEAAAAI/CdT+PwnU/nAUAAMAAAAAgAAAA2c53P9nOdz+kBQAAAAEAACAAAACamXk/mpl5P6QFAACwBQAAIAAAANAGAAAgAAAA8AcAACAAAAAQCQAAQAAAAAAAAAAlkeC6IOrvPwAAAAAAAPA/JZHguiDq7z/eSyvPzajvP1of/5rmPO8/Vc8Xtdqn7j++oGT2ouvtP9eQbjq4Cu0/i+jPZQcI7D+13m+04+bqP1gAdBT3quk/InJVNDFY6D9Qxa5ptfLmP1jktgHIfuU/lEUnbLsA5D9HK0pL3XziP6mj42pk9+A/qqmXpb7o3j8WxHqCSO/bP0tmzI+FCdk/P+nhV+491j/Cam59P5LTP6C+p2ppC9E/K3JfOQhbzT8nmWIvkPfIP6EHyq8X8cQ/ymKsgIxKwT8ixb5sVAq8P2GFAIUfQbY/j95wH7k1sT9DhMmeTsOpPyF7e98ReKI/80co6LznmD9Z7Q7n6XWOPyECDqFKzX4/AAAAAAAAAADBU0zOHuLvPwAAAAAAAPA/wVNMzh7i7z/PQsiaDYnvPwxt55h/9u4/iBIteTwt7j+aTfS3DDHtP7WwwLqeBuw/zJkOGWaz6j/ceSzHdT3pP1GrIrtWq+c/lTbJTdwD5j91q+ek903kP3cAm96LkOI/E4HqH0TS4D/GAMPR2TLeP1M+BFWj19o/2QhhwT+d1z+oagbhn4zUP24kfRgprdE/Wu959kMJzj8bAGArVy7JP1GWaxuQzsQ/i+xardnrwD/p1ilefgq7P98X+tRvLrU/Bg2BTAA4sD/KvUTl9C+oP6YV+O2YeKE/S/VT0nlDmD+Uz5/0jQGQPwBuNz3/qIM/3mkZRs2ZdT/ghYzL4ShjP/yp8dJNYkA/AAAAAAAAAAC5pqOQItrvPwAAAAAAAPA/uaajkCLa7z+FCxbae2nvP0RGzXjXsO4/JlPDhsC07T8z2i5dVnvsP6nOFzkTDOs/qepxIYdv6T9y5pEeCq/nP9bRacRp1OU/wKekFJXp4z85oADlSvjhP+qDG9/NCeA/VWrVMkJN3D9DXd77n6zYPw9a9sGFPtU/HwXbykMN0j+gZzcjGEHOP4yLevPh+sg/8K5IhvtMxD904ycfzDfAP+5his0ib7k/O05VygCKsz/oYS7K6FetPyQzzSoieaU/u2lt+cyCnj8iLHRvj++UPz4R3RbZjIs/XcJfm6YygT9QCLLYBQd0P4HIKr4EG2U/3O6rk6/bUj8bypqibUY3PwBBkBILmATIUQzShPTvPwAAAAAAAPA/yFEM0oT07z/2lQfpKdLvP9rTxPEyme8/1P0Q2Q9K7z9+n7tuW+XuP2HBP53Za+4/HdfxJXXe7T9qf2/sPD7tP8nqNcFgjOw/dyRFAS7K6z8evH7aC/nqPzrQvzR3Guo/9SUjgP4v6T/yQEODPTvoPw4HU97YPec/9/Kvo3k55j9MyMUgyS/lP864eJFsIuQ//5laGQET4z8vnDHtFwPiP2PZBs0y9OA/TVqGcoHP3z/Nj2T7Nb7dPxXGN5AFt9s/4AetqD282T9gMwqT88/XP/Md/MQB9NU/SoVn+AUq1D/nzTwUYHPSP43KNDcy0dA/2NF68MGIzj+vJ3gSKpvLP8hIk9552sg/tc9bIx9Hxj89V0IUH+HDP7XNAUAdqME/TbqQu8Y2vz8uDCY41HO7P2aSBQrEBLg/gFQWx3nmtD9iSE4mbhWyP6QVhJeFG68/7LLrIKeWqj+XqEFFk5OmPz54L+9YCaM/1eesR8jdnz9sz00XOXaaP/Tx2Oj/yZU/Dwu1pnnHkT9VF2z6HruMP/6ksSiy94Y/PLeW6n4lgj+l+7XMVE58P2cfVHefwnU/BcR/FTt1cD90f7OcnW9oP9Pw8wCSwGE/91Lb+qcjWT8/wazteUBRP/FCAJH6wkY/e7LNUz6APD8mUZIi8I8wP8dUbmB6FCE/fYl/NyCrCz/xaOOItfjkPgBBsRYLEQQAAAkEAAAjBAAAOAQAAEoEAEHQFgvXFQMAAAAEAAAABAAAAAYAAACD+aIARE5uAPwpFQDRVycA3TT1AGLbwAA8mZUAQZBDAGNR/gC73qsAt2HFADpuJADSTUIASQbgAAnqLgAcktEA6x3+ACmxHADoPqcA9TWCAES7LgCc6YQAtCZwAEF+XwDWkTkAU4M5AJz0OQCLX4QAKPm9APgfOwDe/5cAD5gFABEv7wAKWosAbR9tAM9+NgAJyycARk+3AJ5mPwAt6l8Auid1AOXrxwA9e/EA9zkHAJJSigD7a+oAH7FfAAhdjQAwA1YAe/xGAPCrawAgvM8ANvSaAOOpHQBeYZEACBvmAIWZZQCgFF8AjUBoAIDY/wAnc00ABgYxAMpWFQDJqHMAe+JgAGuMwAAZxEcAzWfDAAno3ABZgyoAi3bEAKYclgBEr90AGVfRAKU+BQAFB/8AM34/AMIy6ACYT94Au30yACY9wwAea+8An/heADUfOgB/8soA8YcdAHyQIQBqJHwA1W76ADAtdwAVO0MAtRTGAMMZnQCtxMIALE1BAAwAXQCGfUYA43EtAJvGmgAzYgAAtNJ8ALSnlwA3VdUA1z72AKMQGABNdvwAZJ0qAHDXqwBjfPgAerBXABcV5wDASVYAO9bZAKeEOAAkI8sA1op3AFpUIwAAH7kA8QobABnO3wCfMf8AZh5qAJlXYQCs+0cAfn/YACJltwAy6IkA5r9gAO/EzQBsNgkAXT/UABbe1wBYO94A3puSANIiKAAohugA4lhNAMbKMgAI4xYA4H3LABfAUADzHacAGOBbAC4TNACDEmIAg0gBAPWOWwCtsH8AHunyAEhKQwAQZ9MAqt3YAK5fQgBqYc4ACiikANOZtAAGpvIAXHd/AKPCgwBhPIgAinN4AK+MWgBv170ALaZjAPS/ywCNge8AJsFnAFXKRQDK2TYAKKjSAMJhjQASyXcABCYUABJGmwDEWcQAyMVEAE2ykQAAF/MA1EOtAClJ5QD91RAAAL78AB6UzABwzu4AEz71AOzxgACz58MAx/goAJMFlADBcT4ALgmzAAtF8wCIEpwAqyB7AC61nwBHksIAezIvAAxVbQByp5AAa+cfADHLlgB5FkoAQXniAPTfiQDolJcA4uaEAJkxlwCI7WsAX182ALv9DgBImrQAZ6RsAHFyQgCNXTIAnxW4ALzlCQCNMSUA93Q5ADAFHAANDAEASwhoACzuWABHqpAAdOcCAL3WJAD3faYAbkhyAJ8W7wCOlKYAtJH2ANFTUQDPCvIAIJgzAPVLfgCyY2gA3T5fAEBdAwCFiX8AVVIpADdkwABt2BAAMkgyAFtMdQBOcdQARVRuAAsJwQAq9WkAFGbVACcHnQBdBFAAtDvbAOp2xQCH+RcASWt9AB0nugCWaSkAxsysAK0UVACQ4moAiNmJACxyUAAEpL4AdweUAPMwcAAA/CcA6nGoAGbCSQBk4D0Al92DAKM/lwBDlP0ADYaMADFB3gCSOZ0A3XCMABe35wAI3zsAFTcrAFyAoABagJMAEBGSAA/o2ABsgK8A2/9LADiQDwBZGHYAYqUVAGHLuwDHibkAEEC9ANLyBABJdScA67b2ANsiuwAKFKoAiSYvAGSDdgAJOzMADpQaAFE6qgAdo8IAr+2uAFwmEgBtwk0ALXqcAMBWlwADP4MACfD2ACtAjABtMZkAObQHAAwgFQDYw1sA9ZLEAMatSwBOyqUApzfNAOapNgCrkpQA3UJoABlj3gB2jO8AaItSAPzbNwCuoasA3xUxAACuoQAM+9oAZE1mAO0FtwApZTAAV1a/AEf/OgBq+bkAdb7zACiT3wCrgDAAZoz2AATLFQD6IgYA2eQdAD2zpABXG48ANs0JAE5C6QATvqQAMyO1APCqGgBPZagA0sGlAAs/DwBbeM0AI/l2AHuLBACJF3IAxqZTAG9u4gDv6wAAm0pYAMTatwCqZroAds/PANECHQCx8S0AjJnBAMOtdwCGSNoA912gAMaA9ACs8C8A3eyaAD9cvADQ3m0AkMcfACrbtgCjJToAAK+aAK1TkwC2VwQAKS20AEuAfgDaB6cAdqoOAHtZoQAWEioA3LctAPrl/QCJ2/4Aib79AOR2bAAGqfwAPoBwAIVuFQD9h/8AKD4HAGFnMwAqGIYATb3qALPnrwCPbW4AlWc5ADG/WwCE10gAMN8WAMctQwAlYTUAyXDOADDLuAC/bP0ApACiAAVs5ABa3aAAIW9HAGIS0gC5XIQAcGFJAGtW4ACZUgEAUFU3AB7VtwAz8cQAE25fAF0w5ACFLqkAHbLDAKEyNgAIt6QA6rHUABb3IQCPaeQAJ/93AAwDgACNQC0AT82gACClmQCzotMAL10KALT5QgAR2ssAfb7QAJvbwQCrF70AyqKBAAhqXAAuVRcAJwBVAH8U8ADhB4YAFAtkAJZBjQCHvt4A2v0qAGsltgB7iTQABfP+ALm/ngBoak8ASiqoAE/EWgAt+LwA11qYAPTHlQANTY0AIDqmAKRXXwAUP7EAgDiVAMwgAQBx3YYAyd62AL9g9QBNZREAAQdrAIywrACywNAAUVVIAB77DgCVcsMAowY7AMBANQAG3HsA4EXMAE4p+gDWysgA6PNBAHxk3gCbZNgA2b4xAKSXwwB3WNQAaePFAPDaEwC6OjwARhhGAFV1XwDSvfUAbpLGAKwuXQAORO0AHD5CAGHEhwAp/ekA59bzACJ8ygBvkTUACODFAP/XjQBuauIAsP3GAJMIwQB8XXQAa62yAM1unQA+cnsAxhFqAPfPqQApc98Atcm6ALcAUQDisg0AdLokAOV9YAB02IoADRUsAIEYDAB+ZpQAASkWAJ96dgD9/b4AVkXvANl+NgDs2RMAi7q5AMSX/AAxqCcA8W7DAJTFNgDYqFYAtKi1AM/MDgASiS0Ab1c0ACxWiQCZzuMA1iC5AGteqgA+KpwAEV/MAP0LSgDh9PsAjjttAOKGLADp1IQA/LSpAO/u0QAuNckALzlhADghRAAb2cgAgfwKAPtKagAvHNgAU7SEAE6ZjABUIswAKlXcAMDG1gALGZYAGnC4AGmVZAAmWmAAP1LuAH8RDwD0tREA/Mv1ADS8LQA0vO4A6F3MAN1eYABnjpsAkjPvAMkXuABhWJsA4Ve8AFGDxgDYPhAA3XFIAC0c3QCvGKEAISxGAFnz1wDZepgAnlTAAE+G+gBWBvwA5XmuAIkiNgA4rSIAZ5PcAFXoqgCCJjgAyuebAFENpACZM7EAqdcOAGkFSABlsvAAf4inAIhMlwD50TYAIZKzAHuCSgCYzyEAQJ/cANxHVQDhdDoAZ+tCAP6d3wBe1F8Ae2ekALqsegBV9qIAK4gjAEG6VQBZbggAISqGADlHgwCJ4+YA5Z7UAEn7QAD/VukAHA/KAMVZigCU+isA08HFAA/FzwDbWq4AR8WGAIVDYgAhhjsALHmUABBhhwAqTHsAgCwaAEO/EgCIJpAAeDyJAKjE5ADl23sAxDrCACb06gD3Z4oADZK/AGWjKwA9k7EAvXwLAKRR3AAn3WMAaeHdAJqUGQCoKZUAaM4oAAnttABEnyAATpjKAHCCYwB+fCMAD7kyAKf1jgAUVucAIfEIALWdKgBvfk0ApRlRALX5qwCC39YAlt1hABY2AgDEOp8Ag6KhAHLtbQA5jXoAgripAGsyXABGJ1sAADTtANIAdwD89FUAAVlNAOBxgABBsywLPUD7Ifk/AAAAAC1EdD4AAACAmEb4PAAAAGBRzHg7AAAAgIMb8DkAAABAICV6OAAAAIAiguM2AAAAAB3zaTU=");return WebAssembly.instantiate(c,b).then(a,function(a){L("failed to asynchronously prepare wasm: "+a),p(a)})}(function(b){a(b.instance)}),{}}(),ta=A.___wasm_call_ctors=function(){return(ta=A.___wasm_call_ctors=A.asm.c).apply(null,arguments)},ua=A._speex_resampler_init=function(){return(ua=A._speex_resampler_init=A.asm.d).apply(null,arguments)},va=A._free=function(){return(va=A._free=A.asm.e).apply(null,arguments)},wa=A._speex_resampler_destroy=function(){return(wa=A._speex_resampler_destroy=A.asm.f).apply(null,arguments)},xa=A._speex_resampler_process_interleaved_int=function(){return(xa=A._speex_resampler_process_interleaved_int=A.asm.g).apply(null,arguments)},ya=A._speex_resampler_get_rate=function(){return(ya=A._speex_resampler_get_rate=A.asm.h).apply(null,arguments)},za=A._speex_resampler_strerror=function(){return(za=A._speex_resampler_strerror=A.asm.i).apply(null,arguments)},Aa=A._malloc=function(){return(Aa=A._malloc=A.asm.j).apply(null,arguments)};A.setValue=b,A.getValue=c,A.AsciiToString=d;var Ba;if(ma=function a(){Ba||x(),Ba||(ma=a)},A.run=x,A.preInit)for("function"==typeof A.preInit&&(A.preInit=[A.preInit]);0<A.preInit.length;)A.preInit.pop()();return N=!0,x(),a.ready}}();\r
	}\r
	get SpeexResampler() {\r
		return function(cc, is, os, q){return new SpeexResampler(cc, is, os, q);}\r
	}\r
	\r
	get emitterRms() {\r
		if (this.calculateRmsVolume){\r
			let rms = Math.sqrt(this._emitterSqrSum / this._emitterSamples);\r
			this._emitterSqrSum = 0;\r
			this._emitterSamples = 0;\r
			return rms;\r
		}else{\r
			return 0;\r
		}\r
	}\r
  \r
	constructor(options) {\r
		super();\r
		\r
		let that = this;\r
		this.moduleId = "speex-resample-switch-" + Math.round(Math.random() * 1000000) + "-" + Date.now();\r
		this.doDebug = options.processorOptions.doDebug || false;\r
		this.isReadyForProcessing = false;\r
		this.EXPECTED_SAMPLE_SIZE = 128;	//currently 128, but might change in future ... and even become variable! (I hope not)\r
\r
		this.sourceSamplerate = options.processorOptions.ctxInfo.sampleRate;	//INFO: should be same as global scope 'sampleRate'\r
\r
		this.targetSampleRate = options.processorOptions.targetSampleRate || options.processorOptions.ctxInfo.targetSampleRate || 16000;\r
		this.resampleQuality = (options.processorOptions.resampleQuality != undefined)? options.processorOptions.resampleQuality : 7;	//number from 1 to 10, 1 is fast but of bad quality, 10 is slow but best quality (less noise/aliasing, a higher complexity and a higher latency)\r
		this.emitterBufferSize = options.processorOptions.bufferSize || 512;	//TODO: there is probably a mismatch (we should pull go back to the idea of making the buffer bigger but pull less)\r
		this.channelCount = 1; //options.processorOptions.channels || 1;		//TODO: supports ONLY MONO atm\r
		this._bytesPerSample = 2;			//for buffer (aka Xint8 Array) length is in bytes (8bit), so *2 to get 16bit length;\r
		this.resampler;\r
		\r
		this.passThroughMode = (options.processorOptions.passThroughMode != undefined)? options.processorOptions.passThroughMode : 1;	//0: nothing, 1: original, 2: 16bit PCM\r
		this.calculateRmsVolume = (options.processorOptions.calculateRmsVolume != undefined)? options.processorOptions.calculateRmsVolume : true;\r
		this.gain = options.processorOptions.gain || 1.0;\r
				\r
		//resampling - modes 0: no change, -1: downsampling, 1: upsampling\r
		this.resamplingMode = (this.targetSampleRate < this.sourceSamplerate? -1 : (this.targetSampleRate > this.sourceSamplerate? 1 : 0));\r
		this.resampleRatio = this.targetSampleRate/this.sourceSamplerate;\r
		\r
		function init(){\r
			var expectedSizeAfterResampling = Math.ceil(that.EXPECTED_SAMPLE_SIZE * that.resampleRatio);\r
			if (expectedSizeAfterResampling > that.emitterBufferSize){\r
				//TODO: if we don't use a string this shows up as "Uncaught [object ...]" in worker.onerror ?! :-/\r
				throw {name: "BufferSizeException", message: ("Output buffer has to be bigger than (resampleRatio*inputSampleSize)! Currently: " + expectedSizeAfterResampling + " > " + that.emitterBufferSize)};\r
			}\r
			var ringBufferSize = expectedSizeAfterResampling + that.emitterBufferSize;			//this should be a safe size\r
			\r
			//RingBuffers - alloc. space for emitter\r
			//that._inputRingBuffer = new RingBuffer(that.collectorBufferSize + that.EXPECTED_SAMPLE_SIZE, that.channelCount);\r
			that._outputRingBuffer = new RingBuffer(ringBufferSize, that.channelCount, "Int16");\r
\r
			//Input and output (for each channel) - TODO: set size, one for each channel\r
			//that._newInputBuffer = [new Float32Array(that.collectorBufferSize)];\r
			that._newInputBuffer = [new Int16Array(that.EXPECTED_SAMPLE_SIZE)];		\r
			//TODO: for interleaved STEREO we need [new Uint8Array(that.EXPECTED_SAMPLE_SIZE * that.channelCount * that._bytesPerSample)];\r
				//... or do we?\r
				//NOTE: we could use DataView instead\r
				//let buffer = new ArrayBuffer(that.EXPECTED_SAMPLE_SIZE * that.channelCount * that._bytesPerSample);\r
				//let that._inputDataView = new DataView(buffer);\r
			that._newOutputBuffer = [new Int16Array(that.emitterBufferSize)];\r
			\r
			that._isFirstValidProcess = true;\r
			//that._lastEmit = 0;\r
			\r
			that._emitterSqrSum = 0;\r
			that._emitterSamples = 0;\r
			that._hasGain = (that.gain < 1 || that.gain > 1);\r
		}\r
		init();\r
		\r
		this.floatTo16BitInterleavedPCM = function(inFloat32, outInt16, i){\r
			//TODO: if not MONO interleave channels - requires: UInt8Array !!! (or does it?)\r
			/*\r
			for (let channel = 0; channel < that.channelCount; channel++){\r
				//pass through original\r
				output[channel][i] = inFloat32[channel][i];\r
				//clip and floatTo16BitPCM\r
				let sampleVal = Math.max(-1, Math.min(1, inFloat32[channel][i])) * 32767.5 - 0.5;\r
				//assign\r
				let outputIndex = (i * that.channelCount + channel) * that._bytesPerSample;\r
				that._newInputBuffer[channel][outputIndex] = sampleVal;\r
				that._newInputBuffer[channel][outputIndex + 1] = sampleVal >> 8;\r
			}\r
			*/\r
				\r
			let sampleVal = Math.max(-1, Math.min(1, inFloat32[0][i]));		//we need -1 to 1 - If this is the first processor we could skip clipping\r
			//that._inputDataView.setInt16(i * 2, sampleVal < 0 ? sampleVal * 0x8000 : sampleVal * 0x7FFF, true);	// 16-bit signed range is -32768 to 32767, littleEndian byte order.\r
			outInt16[0][i] = sampleVal < 0 ? sampleVal * 0x8000 : sampleVal * 0x7FFF;\r
		}\r
		\r
		function ready(skipResampler){\r
			if (!skipResampler){\r
				//use new resampler for every instance - it keeps data from previous calls to improve the resampling\r
				that.resampler = that.SpeexResampler(\r
					that.channelCount, that.sourceSamplerate, that.targetSampleRate, that.resampleQuality\r
				);\r
			}\r
			that.isReadyForProcessing = true;\r
			that.port.postMessage({\r
				moduleState: 1,\r
				moduleInfo: {\r
					moduleId: that.moduleId,\r
					sourceSamplerate: that.sourceSamplerate,\r
					targetSampleRate: that.targetSampleRate,\r
					emitterBufferSize: that.emitterBufferSize,\r
					calculateRmsVolume: that.calculateRmsVolume,\r
					channelCount: that.channelCount,\r
					resamplingMode: that.resamplingMode,\r
					gain: that.gain,\r
					passThroughMode: that.passThroughMode\r
				}\r
			});\r
		}\r
		//start\r
		function start(options){\r
			//TODO: anything?\r
			//NOTE: timing of this signal is not very well defined\r
		}\r
		//stop\r
		function stop(options){\r
			//NOTE: timing of this signal is not very well defined\r
			//send out the remaining buffer data here\r
			if (that._outputRingBuffer.framesAvailable){\r
				//pull last samples\r
				var lastSamples = [new Int16Array(that._outputRingBuffer.framesAvailable)];\r
				that._outputRingBuffer.pull(lastSamples);\r
\r
				//Send info\r
				that.port.postMessage({\r
					rms: that.emitterRms,\r
					samples: lastSamples,\r
					sampleRate: that.targetSampleRate,\r
					channels: that.channelCount,\r
					type: lastSamples[0].constructor.name,\r
					isLast: true\r
				});\r
			}\r
		}\r
		function reset(options){\r
			//TODO: implement\r
			init();\r
		}\r
		function release(options){\r
			//destroy\r
			that._outputRingBuffer = null;\r
			that._newInputBuffer = null;\r
			that._newOutputBuffer = null;\r
			that.resampler = null;\r
			speexModule = null;\r
			//notify processor that we can terminate now\r
			that.port.postMessage({\r
				moduleState: 9\r
			});\r
		}\r
		\r
		//on-request resampling\r
		function resampleRequest(req){\r
			var samples = req.samples;\r
			var int16Buffer;\r
			if (req.isInt16){\r
				int16Buffer = samples;\r
			}else{\r
				var sampleSize = samples[0].length;\r
				int16Buffer = [new Int16Array(sampleSize)];		//TODO: MONO\r
				for (let i = 0; i < sampleSize; ++i){\r
					that.floatTo16BitInterleavedPCM(samples, int16Buffer, i);\r
				}\r
			}\r
			if (that.resamplingMode){\r
				var processed = that.resampler.processChunk(int16Buffer[0]);\r
				that.port.postMessage({\r
					moduleResponse: true,\r
					resampleResult: {\r
						//test: int16Buffer,		//DEBUG\r
						samples: [processed],\r
						sampleRate: that.targetSampleRate,\r
						channels: that.channelCount\r
					}\r
				});\r
			}else{\r
				that.port.postMessage({\r
					error: "No resampling required. Skipped process!",\r
					moduleResponse: true,\r
					resampleResult: {}\r
				});\r
			}\r
		}\r
		\r
		//Control messages\r
		this.port.onmessage = function(e){\r
			if (e.data.ctrl){\r
				if (that.doDebug) console.error("SpeexResampleSwitch - Controls", e.data.ctrl);			//DEBUG\r
				switch (e.data.ctrl.action) {\r
					//common interface\r
					case "start":\r
						start(e.data.ctrl.options);\r
						break;\r
					case "stop":\r
						stop(e.data.ctrl.options);\r
						break;\r
					case "reset":\r
						reset(e.data.ctrl.options);\r
						break;\r
					case "release":\r
					case "close":\r
						release(e.data.ctrl.options);\r
						break;\r
					case "process":\r
						//customProcess(e.data.ctrl.data);\r
						break;\r
					case "handle":\r
						//handleEvent(e.data.ctrl.data);\r
						break;\r
					default:\r
						console.error("SpeexResampleSwitch - Unknown control message:", e.data);\r
						break;\r
				}\r
			}else if (e.data.resample){\r
				//custom interface\r
				resampleRequest(e.data.resample);\r
			}\r
        }\r
		\r
		function onSpeexLog(msg){\r
			if (that.doDebug) console.error("SpeexResampleSwitch - SpeexModuleLog -", msg, "-", that.moduleId);			//DEBUG (use postMessage?)\r
		}\r
		//function onSpeexError(msg){}		//TODO: we could wrap the 'resampler.processChunk' function in try-catch and log the error here\r
		\r
		//prepare\r
		if (this.resamplingMode){\r
			if (!speexModule){\r
				onSpeexLog("Init. Speex WASM module");\r
				SpeexResampler.initPromise = this.Speex().then(function(s){\r
					onSpeexLog("Speex WASM module ready");\r
					speexModule = s;	//NOTE: used inside Speex\r
					ready(false);\r
				});\r
			}else{\r
				onSpeexLog("Speex WASM moduel already loaded");\r
				ready(false);\r
			}\r
		}else{\r
			onSpeexLog("Speex WASM module not needed");\r
			ready(true);\r
		}\r
	}\r
\r
	process(inputs, outputs, parameters) {\r
		if (!this.isReadyForProcessing){\r
			console.error("SpeexResampleSwitch - Module wasn't ready for processing! Input was ignored!", "-", this.moduleId);\r
			return;\r
		}\r
\r
		//Use 1st input and output only\r
		let input = inputs[0];\r
		let output = outputs[0];\r
\r
		//NOTE: AudioWorkletProcessor always gets input[0].length frames (typically 128, might change in future)\r
		if (input.length > 0){\r
			let inputSampleSize = input[0].length;\r
			\r
			if (this._isFirstValidProcess){\r
				this._isFirstValidProcess = false;\r
				//check inputSampleSize\r
				if (inputSampleSize != this.EXPECTED_SAMPLE_SIZE){\r
					let msg = "Sample size is: " + inputSampleSize + ", expected: " + this.EXPECTED_SAMPLE_SIZE + ". Need code adjustments!";\r
					console.error("AudioWorkletProcessor sample size exception - Msg.: " + msg);\r
					throw new this.SampleSizeException(msg);\r
				}\r
			}\r
			\r
			//transfer input to 16bit signed, interleaved (channels) PCM output - TODO: ONLY MONO so far!\r
			let sqrSum = 0;\r
			for (let i = 0; i < inputSampleSize; ++i){\r
				//gain\r
				if (this._hasGain) input[0][i] = input[0][i] * this.gain;\r
				\r
				//float to 16Bit interleaved PCM\r
				this.floatTo16BitInterleavedPCM(input, this._newInputBuffer, i);\r
				\r
				//pass through\r
				if (this.passThroughMode == 2){\r
					output[0][i] = this._newInputBuffer[0][i];	//16Bit PCM\r
				}else if (this.passThroughMode == 1){\r
					output[0][i] = input[0][i];					//original (float32)\r
				}\r
				\r
				//calc. sum for RMS\r
				if (this.calculateRmsVolume){\r
					this._emitterSqrSum += (input[0][i] ** 2);\r
				}\r
			}\r
			this._emitterSamples += inputSampleSize;\r
			\r
			if (this.resamplingMode != 0){\r
				//let interleaved16bitPcmAudioChunk = new Int16Array(this._inputDataView);\r
				//let processed = this.resampler.processChunk(interleaved16bitPcmAudioChunk);\r
				let processed = this.resampler.processChunk(this._newInputBuffer[0]);\r
				this._outputRingBuffer.push([processed]);				//TODO: is MONO\r
			}else{\r
				this._outputRingBuffer.push([this._newInputBuffer[0]]);	//TODO: is MONO\r
			}\r
			\r
			//Process if we have enough frames for the kernel.\r
			if (this._outputRingBuffer.framesAvailable >= this.emitterBufferSize) {\r
				//pull samples\r
				this._outputRingBuffer.pull(this._newOutputBuffer);\r
\r
				//Send info\r
				this.port.postMessage({\r
					rms: this.emitterRms,\r
					samples: this._newOutputBuffer,\r
					sampleRate: this.targetSampleRate,\r
					channels: this.channelCount,\r
					type: this._newOutputBuffer[0].constructor.name\r
				});\r
			}\r
		}\r
		return true;\r
	}\r
}\r
\r
registerProcessor('speex-resample-switch', SpeexResampleProcessor);`;if(typeof dl!="object"){var dl={};window.SepiaFW=dl}(function(n){var e=n.webAudio||{};e.version="0.9.11";var t=window.AudioContext||window.webkitAudioContext,r=void 0,i=void 0;function s(){return r=!!t&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,!!r||i}e.isStreamRecorderSupported=s(),e.isNativeStreamResamplingSupported=!0,e.tryNativeStreamResampling=!0,e.contentFetchTimeout=8e3,e.defaultProcessorOptions={moduleFolder:"modules",initSuccessCallback:console.log,initErrorCallback:console.error,onerror:console.error};var o={};e.clearPreLoadCache=function(){o={}},e.getSupportedAudioConstraints=function(){var p=navigator.mediaDevices.getSupportedConstraints(),f={},m=e.overwriteSupportedAudioConstraints;return p.deviceId&&(f.deviceId=m.deviceId!=null?m.deviceId:void 0),p.channelCount&&(f.channelCount=m.channelCount!=null?m.channelCount:1),p.noiseSuppression&&(f.noiseSuppression=m.noiseSuppression!=null?m.noiseSuppression:!0),p.autoGainControl&&(f.autoGainControl=m.autoGainControl!=null?m.autoGainControl:!1),p.echoCancellation&&(f.echoCancellation=m.echoCancellation!=null?m.echoCancellation:!1),p.sampleRate&&(f.sampleRate=m.sampleRate!=null?m.sampleRate:48e3),f},e.overwriteSupportedAudioConstraints={},e.defaultMimeTypesForCodecs={ogg:"audio/ogg",ogg_opus:"audio/ogg;codecs=opus",ogg_vorbis:"audio/ogg;codecs=vorbis",ogg_speex:"audio/ogg;codecs=speex",opus:"audio/opus",vorbis:"audio/vorbis",speex:"audio/speex",wav:"audio/wav",raw:"audio/wav",webm_ogg_opus:"audio/webm;codecs=opus",webm_ogg_vorbis:"audio/webm;codecs=vorbis",webm_mkv_pcm:"audio/webm;codecs=pcm",mp3:"audio/mpeg",mp4:"audio/mp4",flac:"audio/flac",mpeg:"audio/mpeg"},e.getSupportedMediaRecorderCodecs=function(){var p={};return window.MediaRecorder&&Object.keys(e.defaultMimeTypesForCodecs).forEach(function(f){var m=e.defaultMimeTypesForCodecs[f];window.MediaRecorder.isTypeSupported(m)&&(p[f]=m)}),p},e.createAudioContext=function(p,f){var m={};!f&&p.targetSampleRate&&(m.sampleRate=p.targetSampleRate);var g=new t(m);return g},e.Processor=function(p,f,m){var g=this;m||(m=e.defaultProcessorOptions.initErrorCallback),f||(f=e.defaultProcessorOptions.initSuccessCallback),p||(p={});var v=p.onerror||e.defaultProcessorOptions.onerror,w=(p.moduleFolder||e.defaultProcessorOptions.moduleFolder).replace(/\/$/,"")+"/",B,C=0,b,F,x,E,M=!1,H=!1,O=!1,U=p.initializerTimeout||3e3,y,I={},R={},D=[];function k($){p.debugLog&&p.debugLog("Started init. condition: "+$),I[$]=1}function V($){I[$]&&(delete I[$],p.debugLog&&p.debugLog("Completed init. condition: "+$),Object.keys(I).length==0&&(H||(clearTimeout(y),H=!0,O=!1,f({name:"ProcessorReady",message:"Processor is ready for action",inputSampleRate:B,targetSampleRate:p.targetSampleRate||B,sourceInfo:R,modulesInfo:D}))))}function Z(){clearTimeout(y),H=!1,O=!1,I={},k("sourceSetup"),k("modulesSetup")}function N($){Z(),m($)}Z(),O=!0,y=setTimeout(function(){N({message:"Initialization took too long! If you expect long running init. process use option 'initializerTimeout' (ms).",name:"ProcessorInitTimeout"})},U);async function _($,ce){if(b&&$&&(b.state!="closed"&&await b.close(),b=null),!b||b.state=="closed")if(b=e.createAudioContext(p,ce),p.startSuspended==null||p.startSuspended){try{await b.resume()}catch{}await b.suspend()}else await b.resume();return b}async function z(){if(p.modules)for(let $=0;$<p.modules.length;$++){let ce=p.modules[$],me=ie(ce),_e=me.moduleType,P=me.moduleName;if(_e==1){let fe=w+P+".js";p.debugLog&&p.debugLog("Adding audioWorklet module: "+fe);try{await b.audioWorklet.addModule(`data:application/javascript;charset=utf8,${encodeURIComponent(Vve)}`)}catch(de){console.error(de),p.debugLog&&p.debugLog("FAILED to add audioWorklet module: "+fe+" - Msg.: "+de.name+", "+de.message)}}else if(_e==2){let fe=w+P.replace(/-worker$/,"")+"-worker.js";p.debugLog&&p.debugLog("Adding worker module: "+fe)}else throw _e==3?{name:"CreateModuleError",message:"ScriptProcessor nodes are currently not supported as modules (only source)."}:_e==4?{name:"CreateModuleError",message:"AudioNodes are currently not supported as modules (you can use them as custom source)."}:{name:"CreateModuleError",message:"Module type unknown."}}}function ie($){var ce,me,_e,P;return typeof $=="object"?($.type&&$.type=="worker"||$.isWorker?ce=2:$.type&&$.type=="scriptProcessor"?ce=3:$.type&&$.type=="audioNode"?ce=4:ce=1,me=$.name,_e=$.setup||$.settings,P=$.preLoad||{}):(ce=1,me=$,_e={},P={}),{moduleType:ce,moduleName:me,moduleSetup:_e,modulePreLoads:P}}function T(){M=!0}function q(){M=!1}if(!e.isStreamRecorderSupported&&!p.customSourceTest&&!p.customSource){var ge={name:"NotSupportedError",message:"Cannot create audio stream recorder because there are no compatible interfaces!"};N(ge);return}function he($,ce,me){var _e=$.length;if(p.modules&&p.modules.length){var P=new Array(p.modules.length),fe=p.modules.length;p.modules.forEach(async function(de,ee){if(!O)return;k("module-"+ee);var K=ie(de),se=K.moduleType,ye=K.moduleName,ne=K.moduleSetup,J={},Y=Object.keys(K.modulePreLoads);try{await Promise.all(Y.map(async function(S,W){var te=K.modulePreLoads[S],oe=1,ae=void 0;typeof te=="object"?(oe=te.type&&(te.type==2||te.type.toLowerCase()=="arraybuffer")?2:1,te=te.path||te.url):S.indexOf("wasmFile")==0?oe=2:S.indexOf("wasmBase64")==0&&(oe=1,ae=u);var Se=S+"_"+te;if(o[Se])J[S]=o[Se];else try{var Ee;if(!te||oe>2)throw{name:"PreLoadError",message:"Missing 'path' (url) or unsupported type (use 1=text or 2=arraybuffer)"};oe==1?Ee=await A(te):oe==2&&(Ee=await l(te)),typeof ae=="function"&&(Ee=ae(Ee)),J[S]=Ee,o[Se]=Ee}catch(Me){throw{name:"AddModuleError",message:"Failed to pre-load data: "+S+" - name: "+ye,info:Me}}}))}catch(S){N(S);return}var ue=ne.options||{};ue.preLoadResults=J;var le;function we(S){if(!(!S||S.data==null))if(S.data.moduleState==1)le.isReady=!0,V("module-"+ee),S.data.moduleInfo&&(le.moduleInfo=S.data.moduleInfo),P[ee]={moduleName:le.moduleName,moduleInfo:le.moduleInfo},--fe==0&&me(P);else if(S.data.moduleState==9&&!le.isTerminated){if(typeof le.terminate=="function")try{le.isTerminated=!0,le.terminate()}catch(W){le.isTerminated=!0,G({name:"TerminateError",message:"Failed to terminate module",info:W})}}else S.data.moduleState==10?(S.data.error.target=S.target,G(S.data.error)):S.data.moduleResponse||ne.sendToModules&&(S.data.moduleEvent?ne.sendToModules.forEach(function(W){$[W]&&!$[W].ignoreSendToModules&&$[W].sendToModule({ctrl:{action:"handle",data:S.data}})}):ne.sendToModules.forEach(function(W){$[W]&&!$[W].ignoreSendToModules&&$[W].sendToModule({ctrl:{action:"process",data:S.data}})}));ne.onmessage&&ne.onmessage(S.data,$)}function G(S){var W;S.message&&S.message.indexOf("Uncaught {")==0?(S.preventDefault(),W=JSON.parse(S.message.replace(/^Uncaught /,"")),S.message=W):W=S,v({name:"AudioModuleProcessorException",message:"Error in module: "+S.target.moduleName+" - "+(W&&W.message?W.message:"Check console for details."),module:S.target.moduleName,info:W}),O&&!H&&N({message:"Error during setup of module: "+le.moduleName,name:"ProcessorInitError",info:W}),ne.onerror&&ne.onerror(S)}if(se==1){if(!ce){N({name:"AddModuleError",message:"Source does not support 'AudioWorkletProcessor' (use only workers instead) - name: "+ye});return}ue.processorOptions||(ue.processorOptions=ue.setup||{}),ue.processorOptions.ctxInfo||(ue.processorOptions.ctxInfo={sampleRate:b.sampleRate,targetSampleRate:p.targetSampleRate}),le=new AudioWorkletNode(b,ye,ue),le.isReady=!1,le.moduleName=ye,le.port.onmessage=we,le.onprocessorerror=G,le.sendToModule=function(S){le.isReady?le.port.postMessage(S):v({name:"AudioModuleProcessorException",message:"'sendToModule' was called before module was actually ready. Consider 'startSuspended' option maybe.'",module:le.moduleName})}}else if(se==2)ue.setup||(ue.setup={}),ue.setup.ctxInfo||(ue.setup.ctxInfo={sampleRate:b.sampleRate,targetSampleRate:p.targetSampleRate}),ye.includes("webrtc-vad")?le=Dve():ye.includes("stt-socket")&&(le=Lve()),le.isReady=!1,le.moduleName=ye,le.onmessage=we,le.onerror=G,le.sendToModule=function(S){le.isReady||S&&S.ctrl&&S.ctrl.action=="construct"?le.postMessage(S):v({name:"AudioModuleProcessorException",message:"'sendToModule' was called before module was actually ready. Consider 'startSuspended' option maybe.",module:le.moduleName})},le.sendToModule({ctrl:{action:"construct",options:ue}});else if(se==3){N({name:"AddModuleError",message:"ScriptProcessor nodes are currently not supported as modules (only source)."});return}else if(se==4){N({name:"AddModuleError",message:"AudioNodes are currently not supported as modules (you can use them as custom source)."});return}else{N({name:"AddModuleError",message:"Unknown module type."});return}if(le.moduleType=se,le.ignoreSendToModules=!1,le.deactivate=function(){le.ignoreSendToModules=!0,M&&(le.sendToModule({ctrl:{action:"stop"}}),le.sendToModule({ctrl:{action:"reset"}}))},le.activate=function(){le.ignoreSendToModules=!1,M&&le.sendToModule({ctrl:{action:"start"}})},de.handle=le,!ce&&ee==0){var Q=$[0];if(!Q.onmessage){N({name:"AddModuleError",message:"If source is not compatible to 'AudioWorklet' it has to have a 'onmessage' event to get the processed data."});return}Q.onmessage=function(S){!S||S.data==null||(S.data.moduleEvent||S.data.sourceEvent?le.sendToModule({ctrl:{action:"handle",data:S.data}}):le.sendToModule({ctrl:{action:"process",data:S.data}}))}}$[_e+ee]=le})}else me([])}function Ae($,ce,me){B=b.sampleRate,me||(me={}),p.targetSampleRate&&p.targetSampleRate!=B&&(e.isNativeStreamResamplingSupported=!1,C=B-p.targetSampleRate);var _e=[$],P=[],fe=!0;me.hasWorkletSupport!=null?fe=me.hasWorkletSupport:me.type=="scriptProcessor"&&(fe=!1),he(_e,fe,function(ee){D=ee,V("modulesSetup"),g.processNodes=_e;let K=!1;if(_e.forEach(function(se,ye){fe&&(!se.moduleType||se.moduleType==1)&&P.push(se),se.moduleInfo&&se.moduleInfo.resamplingMode&&(K=!0)}),C&&!K){N({message:"Samplerate mismatch and no resampler found!",name:"ProcessorInitError"});return}});var de=p.destinationNode||b.destination;g.mainAudioContext=b,g.source=$,g.sourceInfo=me,R=me,ce||(ce={}),F=function(ee,K){Promise.resolve((ce.onBeforeStart||d)()).then(function(){return b.resume()}).then(function(){if(P.length>1){for(var se=1;se<P.length;se++)P[se-1].connect(P[se]);P[se-1].connect(de)}else P.length==1?P[0].connect(de):_e[0].connect&&_e[0].connect(de);if(_e.forEach(function(ye){ye.sendToModule&&ye.sendToModule({ctrl:{action:"start",options:{}}})}),ce.onAfterStart)return Promise.resolve(ce.onAfterStart())}).then(ee).catch(function(se){v({name:"ProcessorStartError",message:se.name+" - Message: "+(se.message||se)}),K&&K(se)})},x=function(ee,K){Promise.resolve((ce.onBeforeStop||d)()).then(function(){return _e.forEach(function(se,ye){se.disconnect&&se.disconnect(),se.sendToModule&&se.sendToModule({ctrl:{action:"stop",options:{}}})}),b.suspend()}).then(function(){if(ce.onAfterStop)return Promise.resolve(ce.onAfterStop())}).then(ee).catch(function(se){v({name:"ProcessorStopError",message:se.name+" - Message: "+(se.message||se)}),K&&K(se)})},E=function(ee,K){Promise.resolve((ce.onBeforeRelease||d)()).then(function(){return _e.forEach(function(se,ye){se.sendToModule&&se.sendToModule({ctrl:{action:"release",options:{}}}),_e[ye]=null}),g.processNodes=null,g.source=null,b.close()}).then(function(){if(ce.onAfterRelease)return Promise.resolve(ce.onAfterRelease())}).then(ee).catch(function(se){v({name:"ProcessorReleaseError",message:se.name+" - Message: "+(se.message||se)}),K&&K(se)})},V("sourceSetup")}if(p.customSourceTest){let $;e.createWhiteNoiseGeneratorNode(.1,{targetSampleRate:p.targetSampleRate}).then(function(ce){return $=ce,b=ce.context,z()}).then(function(){Ae($,{},{type:"whiteNoiseGenerator"})}).catch(function(ce){N(ce)})}else if(p.customSource){let $=p.customSource.node;b=$.context,z().then(function(){Ae($,{onBeforeStart:p.customSource.beforeStart,onAfterStart:p.customSource.start||p.customSource.afterStart,onBeforeStop:p.customSource.stop||p.customSource.beforeStop,onAfterStop:p.customSource.afterStop,onBeforeRelease:p.customSource.beforeRelease,onAfterRelease:p.customSource.release||p.customSource.afterRelease},{type:p.customSource.type||"custom",typeData:p.customSource.typeData,hasWorkletSupport:p.customSource.hasWorkletSupport!=null?p.customSource.hasWorkletSupport:!0})}).catch(function(ce){N(ce)})}else{let $;e.getMicrophone(p,_).then(function(ce){return $=ce,z()}).then(function(){Ae($.source,$.controls||{},$.info)}).catch(function(ce){N(typeof ce=="string"?{message:ce,name:"ProcessorInitError"}:{message:ce.message,name:ce.name,ref:ce})})}g.start=function($,ce,me){H&&!M?F(function(){var _e=new Date().getTime();T(),p.onaudiostart&&p.onaudiostart({startTime:_e}),$&&$()},me):ce&&ce()},g.stop=function($,ce,me){M?x(function(){var _e=new Date().getTime();q(),p.onaudioend&&p.onaudioend({endTime:_e}),$&&$()},me):ce&&ce()},g.release=function($,ce,me){H&&E?E(function(){Z(),p.onrelease&&p.onrelease(),$&&$()},me):O?N({message:"Release was called before initialization was complete.",name:"ProcessorInitError"}):ce&&ce()},g.isInitialized=function(){return H},g.isInitPending=function(){return O},g.isProcessing=function(){return M}},e.getAudioDevices=function(p){return new Promise(function(f,m){(async function(){if(!navigator.mediaDevices.enumerateDevices)return m({message:"MediaDevices 'enumerateDevices' is not available! Check if context is secure (SSL, HTTPS, etc.).",name:"NotSupportedError"});var g=!1,v=void 0;navigator.mediaDevices.enumerateDevices().then(function(w){if(!g){clearTimeout(v);var B={},C={};return w.forEach(function(b){b.kind=="audioinput"?B[b.label]=b.deviceId:b.kind=="audiooutput"&&(C[b.label]=b.deviceId)}),f({input:B,output:C})}}).catch(function(w){return m(w)}),v=setTimeout(function(){return g=!0,m({message:"Media device enumeration timeout. Permission might require user interaction.",name:"TimeoutError"})},p||5e3)})()})},e.getMicrophone=function(p,f,m){return p||(p={}),f||(f=async function(g,v){var w=e.createAudioContext(p,v);if(p.startSuspended==null||p.startSuspended){try{await w.resume()}catch{}await w.suspend()}else await w.resume();return w}),new Promise(function(g,v){(async function(){var w=JSON.parse(JSON.stringify(e.getSupportedAudioConstraints()));w.sampleRate&&p.targetSampleRate&&(w.sampleRate=p.targetSampleRate);var B={video:!1,audio:Object.keys(w).length?w:!0};if(!navigator.mediaDevices.getUserMedia)return v({message:"MediaDevices 'getUserMedia' is not available! Check if context is secure (SSL, HTTPS, etc.).",name:"NotSupportedError"});var C=!1,b=void 0;navigator.mediaDevices.getUserMedia(B).then(async function(F){if(!C){clearTimeout(b);var x;e.tryNativeStreamResampling&&e.isNativeStreamResamplingSupported?x=await f(!1,!1):x=await f(!1,!0);var E;try{E=x.createMediaStreamSource(F)}catch(U){x=await f(!0,!0),E=x.createMediaStreamSource(F),U&&U.name&&U.name=="NotSupportedError"&&(e.isNativeStreamResamplingSupported=!1,p.debugLog&&p.debugLog("Native stream resampling has been deactivated - Info: "+U.message))}p.destinationNode||(p.destinationNode=x.createMediaStreamDestination());var M={type:"mic"},H;if(E.mediaStream&&E.mediaStream.getAudioTracks)try{H=E.mediaStream.getAudioTracks()[0],M.label=H.label,H.getSettings?M.settings=H.getSettings():M.settings={},M.settings.sampleRate=x.sampleRate}catch{}var O={onBeforeStart:function(){},onAfterStop:function(){},onAfterRelease:function(){H&&typeof H.stop=="function"&&H.readyState=="live"&&H.stop()}};return g({source:E,controls:O,info:M})}}).catch(function(F){return v(F)}),b=setTimeout(function(){return C=!0,v({message:"Media 'getUserMedia' timeout. Permission might require user interaction.",name:"TimeoutError"})},m||5e3)})()})},e.createAudioRecorder=function(p,f,m){return m||(m={}),m.codec||(m.codec="webm_ogg_opus"),new Promise(function(g,v){(async function(){try{var w=f.settings.sampleRate;if(!w)return v({message:"Sample-rate unknown! Please add correct 'sourceInfo'.",name:"AudioRecorderError"});var B=f.settings.channelCount;if(B>1)return v({message:"Sorry, but this recorder only supports MONO audio at the moment.",name:"NotSupportedError"});var C=m.mimeType||e.defaultMimeTypesForCodecs[m.codec]||e.defaultMimeTypesForCodecs.webm_ogg_opus,b=m.sampleTime||(m.chunkSize?Math.floor(1e3/w*m.chunkSize):0);if(b&&m.decodeToAudioBuffer&&console.error("WARNING: Partial decoding is not supported at the moment! It is possible but requires adding custom headers for each blob!"),window.MediaRecorder)if(MediaRecorder.isTypeSupported(C)){var F=new MediaRecorder(p,{mimeType:C,bitsPerSecond:w*2*B}),x,E,M=!1;F.onerror=m.onerror||console.error,m.onstart&&(F.onstart=m.onstart),m.onpause&&(F.onpause=m.onpause),m.onresume&&(F.onresume=m.onresume);var H=m.onstop;F.onstop=function(R){H&&!m.decodeToAudioBuffer&&H()};var O=m.ondataavailable||m.onprocess;m.decodeToAudioBuffer?O&&(F.ondataavailable=function(R){if(F.state=="inactive"&&(M=!0),R&&R.data){let D=Date.now();e.offlineAudioContextBlobDecoder(w,B,R.data,function(k){k&&O({data:k.getChannelData(0),decodeTime:Date.now()-D}),!M&&m.recordLimitMs&&Date.now()-x>=m.recordLimitMs?y():M&&H&&H()})}}):O&&(F.ondataavailable=function(R){O(R),m.recordLimitMs&&Date.now()-x>=m.recordLimitMs&&y()});var U,y=function(){U&&clearTimeout(U),E=Date.now(),F.state!="inactive"&&F.stop()},I=function(){x=Date.now(),E=void 0,M=!1,b?F.start(b):(F.start(),m.recordLimitMs&&(U=setTimeout(y,m.recordLimitMs)))};return g({getMediaRecorder:function(){return F},mimeType:C,sourceInfo:f,sampleTime:b,start:I,stop:y})}else return v({message:"MIME-Type '"+C+"' is not supported!",name:"NotSupportedError"});else return v({message:"'MediaRecorder' is not available!",name:"NotSupportedError"})}catch(R){return console.error("AudioRecorder",R),v(R)}})()})},e.offlineAudioContextBlobDecoder=function(p,f,m,g){a(m,function(v){if(!v)g();else{var w=new OfflineAudioContext(f,v.byteLength,p);w.decodeAudioData(v,function(B){g(B)},function(B){console.error("offlineAudioContext.decodeAudioData ERROR",B),g()})}})};function a(p,f){if(!p||!p.size)f();else if(typeof p.arrayBuffer=="function")p.arrayBuffer().then(function(g){f(g)}).catch(function(g){console.error("blobToArray '.arrayBuffer' ERROR",g),f()});else{var m=new FileReader;m.onload=function(){f(m.result)},m.onerror=function(g){console.error("blobToArray 'FileReader' ERROR",reader.error,g),f()},m.readAsArrayBuffer(p)}}e.blobToArray=a,e.createLegacyMicrophoneScriptProcessor=function(p){return p||(p={}),e.getMicrophone(p,void 0).then(function(f){var m=f.source,g=m.context,v=g.sampleRate,w=p.bufferSize||2048,B=1,C=g.createScriptProcessor(w,B,B);m.connect(C);var b={node:C,type:"scriptProcessor",typeData:f.info,hasWorkletSupport:!1,start:function(){f.controls.onAfterStart&&f.controls.onAfterStart()},stop:function(){f.controls.onBeforeStop&&f.controls.onBeforeStop()},release:function(){f.controls.onAfterRelease&&f.controls.onAfterRelease()}};if(f.controls&&(f.controls.onBeforeStart&&(b.beforeStart=f.controls.onBeforeStart),f.controls.onAfterStop&&(b.afterStop=f.controls.onAfterStop),f.controls.onBeforeRelease&&(b.beforeRelease=f.controls.onBeforeRelease)),p.onaudioprocess)C.onaudioprocess=p.onaudioprocess;else{let F=function(x){if(x&&x.inputBuffer){var E=[x.inputBuffer.getChannelData(0)];C.onmessage({data:{samples:E,sampleRate:v,channels:B,type:E[0].constructor.name}})}};C.onaudioprocess=function(x){F(x)},C.onmessage=p.onmessage||function(x){}}return b})},e.createWhiteNoiseGeneratorNode=function(p,f,m){f||(f={});var g=e.defaultProcessorOptions.moduleFolder.replace(/\/$/,"")+"/";return new Promise(function(v,w){(async function(){try{var B=e.createAudioContext(f);try{await B.resume()}catch{}await B.suspend();var C=g+"white-noise-generator.js";await B.audioWorklet.addModule(C);var b=new AudioWorkletNode(B,"white-noise-generator",{processorOptions:{gain:p||.1}});m&&(b.port.onmessage=m),v(b)}catch(F){return w(F)}})()})},e.createFileSource=function(p,f,m,g){return f||(f={}),new Promise(function(v,w){try{let B=function(b){w(b)},C=function(b){e.createAudioBufferSource(b,f,m,g).then(function(F){F.typeData={fileUrl:p},v(F)}).catch(B)};e.readFileAsBuffer(p,C,B)}catch(B){w(B)}})},e.createAudioBufferSource=function(p,f,m,g){return f||(f={}),new Promise(function(v,w){(async function(){try{var B=e.createAudioContext(f);try{await B.resume()}catch{}await B.suspend();var C=B.createBufferSource();B.decodeAudioData(p,function(b){return C.buffer=b,C.loop=m??!0,g&&(C.onended=g),v({node:C,type:"fileAudioBuffer",typeData:{},start:function(){C.start()},stop:function(){C.stop()},release:function(){}})},function(b){return w(b)})}catch(b){return w(b)}})()})},e.createSourceAudioPlayer=function(p,f,m,g,v){f||(f={}),f.modules=m||[],f.customSource=p,f.startSuspended==null&&(f.startSuspended=!0);var w=new e.Processor(f,g,v);return w},e.encodeWaveBuffer=function(p,f,m,g,v,w){var B=e.defaultProcessorOptions.moduleFolder.replace(/\/$/,"")+"/",C=new Worker(B+"wave-encoder-worker.js");v||(v=console.log),w||(w=console.error);var b={setup:{inputSampleRate:f,inputSampleSize:p.length,lookbackBufferMs:0}};C.onmessage=function(F){F.data.moduleState==1?C.postMessage({encode:{format:"wave",data:{samples:[p],sampleRate:f,channels:m,isFloat32:g}}}):F.data.encoderResult&&(C.terminate(),F.data.error?w({name:"EncoderError",message:F.data.error}):v(F.data.encoderResult))},C.onerror=function(F){C.terminate(),w(F)},C.postMessage({ctrl:{action:"construct",options:b}})},e.decodeAudioFile=function(p,f,m,g,v){e.readFileAsBuffer(p,function(w){var B=new OfflineAudioContext(m,w.byteLength,f);B.decodeAudioData(w,function(C){g(C)},function(C){v(C)})},function(w){v(w)})},e.decodeAudioFileToInt16Mono=function(p,f,m,g){var v=1;e.decodeAudioFile(p,f,v,function(w){var B=!0;e.encodeWaveBuffer(w.getChannelData(0),f,v,B,function(C){try{var b=new Int16Array(C.wav.buffer);m(b)}catch(F){g(F)}},g)},g)},e.resampleBufferViaSpeex=function(p,f,m,g,v,w,B){w||(w=console.log),B||(B=console.error);try{var C=new OfflineAudioContext(g,p.length,f),b=e.defaultProcessorOptions.moduleFolder.replace(/\/$/,"")+"/",F="speex-resample-switch";C.audioWorklet.addModule(b+F+".js").then(function(){var x={processorOptions:{ctxInfo:{sampleRate:f},targetSampleRate:m,resampleQuality:v,bufferSize:p.length}},E=new AudioWorkletNode(C,F,x);E.port.onmessage=function(M){M.data.moduleState==1?E.port.postMessage({resample:{samples:[p],isInt16:!0}}):M.data.resampleResult&&(C=null,M.data.error?B({name:"ResampleError",message:M.data.error}):w(M.data.resampleResult))},E.onprocessorerror=function(M){C=null,B(M)}})}catch(x){B(x)}},e.readFileAsBuffer=function(p,f,m){dl&&dl.files?dl.files.fetch(p,f,m,"arraybuffer",e.contentFetchTimeout):c("arraybuffer",p,f,m)},e.readFileAsText=function(p,f,m){dl&&dl.files?dl.files.fetch(p,f,m,void 0,e.contentFetchTimeout):c("text",p,f,m)};function l(p){return new Promise(function(f,m){e.readFileAsBuffer(p,function(g){f(g)},function(g){m(g)})})}function A(p){return new Promise(function(f,m){e.readFileAsText(p,function(g){f(g)},function(g){m(g)})})}function c(p,f,m,g){var v=new XMLHttpRequest;v.open("GET",f),v.responseType=p,v.timeout=e.contentFetchTimeout,v.onload=function(w){v.status>=200&&v.status<300?m(v.response):g({status:v.status,message:v.statusText})},v.onerror=function(w){g(w)},v.ontimeout=function(w){g(w)},v.send()}function u(p){try{for(var f=atob(p),m=new Uint8Array(f.length),g=0;g<f.length;++g)m[g]=f.charCodeAt(g);return m}catch{throw new Error("Converting base64 string to Uint8Array bytes array failed.")}}function h(p){try{return btoa(p.reduce(function(f,m){return f+String.fromCharCode(m)},""))}catch{throw new Error("Converting Uint8Array to base64 string failed.")}}e.base64={base64StringToUint8Array:u,uint8ArrayToBase64String:h},e.addAudioElementToPage=function(p,f,m){var g=document.createElement("audio");g.src=window.URL.createObjectURL(f.constructor.name=="Blob"?f:new Blob([f],{type:m||"audio/wav"})),g.setAttribute("controls","controls");var v=document.createElement("div");return v.appendChild(g),p||(p=document.body),p.appendChild(v),g};function d(){}n.webAudio=e})(dl);(function(){var n={};n.onProcessorReady=function(d){console.log("SepiaVoiceRecorder -  onProcessorReady",d)},n.onProcessorInitError=function(d){console.error("SepiaVoiceRecorder -  onProcessorInitError",d)},n.onConnected=function(d){console.log("SepiaVoiceRecorder -  onConnected",d)},n.onDisconnected=function(d){console.log("SepiaVoiceRecorder -  onDisconnected",d)},n.onAudioStart=function(d){console.log("SepiaVoiceRecorder -  onAudioStart")},n.onAudioEnd=function(d){console.log("SepiaVoiceRecorder -  onAudioEnd")},n.onProcessorError=function(d){console.error("SepiaVoiceRecorder -  onProcessorError",d)},n.onProcessorRelease=function(d){console.log("SepiaVoiceRecorder -  onProcessorRelease")},n.onDebugLog=function(d){console.log("debugLog",d)},n.onResamplerData=function(d){console.log("SepiaVoiceRecorder -  onResamplerData",d)},n.onWaveEncoderStateChange=function(d){console.log("SepiaVoiceRecorder -  onWaveEncoderStateChange",d)},n.onWaveEncoderAudioData=function(d){console.log("SepiaVoiceRecorder -  onWaveEncoderAudioData",d)};function e(d){d.output&&d.output.wav?n.onWaveEncoderAudioData(d.output.wav):d.output&&d.output.buffer,d.gate&&(n.onWaveEncoderStateChange(d.gate),d.gate.isOpen===!0?t=!0:d.gate.isOpen===!1&&(t&&u(),t=!1))}var t=!1;function r(d){d.voiceActivity!=null,d.voiceEnergy!=null,d.vadSequenceCode!=null&&(d.vadSequenceCode==1?n.onVadStateChange("vaup",1):d.vadSequenceCode==2?n.onVadStateChange("speechstart",2):d.vadSequenceCode==3?n.onVadStateChange("vadown",3):d.vadSequenceCode==4?n.onVadStateChange("speechend",4):d.vadSequenceCode==5&&n.onVadStateChange("speechend",5))}n.onSpeechRecognitionStateChange=function(d){console.log("SepiaVoiceRecorder -  onSpeechRecognitionStateChange",d)},n.onSpeechRecognitionEvent=function(d){console.log("SepiaVoiceRecorder -  onSpeechRecognitionEvent",d)};function i(d){d&&(d.gate&&(d.gate.isOpen==!1&&s?(s=!1,n.onSpeechRecognitionStateChange({state:"onStreamEnd",bufferOrTimeLimit:d.gate.bufferOrTimeLimit})):d.gate.isOpen==!0&&!s&&(n.onSpeechRecognitionStateChange({state:"onStreamStart"}),s=!0)),d.recognitionEvent&&n.onSpeechRecognitionEvent(d.recognitionEvent),d.connectionEvent&&(d.connectionEvent.type=="ready"?n.onConnected(d.connectionEvent.data):d.connectionEvent.type=="closed"&&n.onDisconnected(d.connectionEvent.data)),d.output&&d.output.wav&&n.onWaveEncoderAudioData(d.output.wav))}var s=!1,o,a=16e3,l=512;async function A(d){d?(d.targetSampleRate&&(a=d.targetSampleRate),d.resamplerBufferSize&&(l=d.resamplerBufferSize)):d={};var p=!!d.asr;typeof d.asr!="object"&&(d.asr={});var f=!!d.vad;typeof d.vad!="object"&&(d.vad={});var m=void 0;if(d.fileUrl)try{m=await SepiaFW.webAudio.createFileSource(d.fileUrl,{targetSampleRate:a})}catch(M){n.onProcessorInitError(M);return}var g={name:"speex-resample-switch",settings:{onmessage:n.onResamplerData,sendToModules:[],options:{processorOptions:{targetSampleRate:a,resampleQuality:d.resampleQuality||4,bufferSize:l,passThroughMode:0,calculateRmsVolume:!0,gain:d.gain||1}}}},v={name:"wave-encoder",type:"worker",handle:{},settings:{onmessage:e,options:{setup:{inputSampleRate:a,inputSampleSize:l,lookbackBufferMs:0,recordBufferLimitKb:500,recordBufferLimitMs:d.recordingLimitMs,doDebug:!1}}}},w,B=480*2,C={name:"webrtc-vad-worker",type:"worker",settings:{onmessage:r,options:{setup:{inputSampleRate:a,inputSampleSize:l,bufferSize:d.vad.bufferSize||B,vadMode:d.vad.mode||3,sequence:{silenceActivationTime:450,maxSequenceTime:d.vad.maxSequenceTime||1e4,minSequenceTime:d.vad.minSequenceTime||600}}}}},b,F={name:"stt-socket",type:"worker",handle:{},settings:{onmessage:i,options:{setup:{inputSampleRate:a,inputSampleSize:l,lookbackBufferMs:0,recordBufferLimitKb:500,recordBufferLimitMs:d.recordingLimitMs,serverUrl:d.asr.serverUrl,clientId:d.asr.clientId,accessToken:d.asr.accessToken,messageFormat:d.asr.messageFormat||"webSpeechApi",language:d.asr.language||"",task:d.asr.task||"",model:d.asr.model||"",continuous:d.asr.continuous!=null?d.asr.continuous:!1,optimizeFinalResult:d.asr.optimizeFinalResult,engineOptions:d.asr.engineOptions||{},returnAudioFile:d.asr.returnAudioFile||!1,doDebug:!1}}}},x,E=[];E.push(g),E.length,f&&(E.push(C),b=E.length,n.vadModule=C,g.settings.sendToModules.push(b)),p?(E.push(F),x=E.length,n.sttServerModule=F,g.settings.sendToModules.push(x)):(E.push(v),w=E.length,n.waveEncoder=v,g.settings.sendToModules.push(w)),o=new SepiaFW.webAudio.Processor({onaudiostart:n.onAudioStart,onaudioend:n.onAudioEnd,onrelease:n.onProcessorRelease,onerror:n.onProcessorError,targetSampleRate:a,modules:E,destinationNode:void 0,startSuspended:!0,debugLog:n.onDebugLog,customSource:m},function(M){n.onProcessorReady(M)},function(M){n.onProcessorInitError(M)})}n.create=function(d){if(o){n.onProcessorInitError({name:"ProcessorInitError",message:"SepiaVoiceRecorder already exists. Release old one before creating new."});return}d||(d={}),A(d)},n.isReady=function(){return!!o&&o.isInitialized()},n.isActive=function(){return!!o&&o.isInitialized()&&o.isProcessing()},n.start=function(d,p,f){o?o.start(function(){c("open"),h("open"),d&&d()},p,f):f&&f({name:"ProcessorInitError",message:"SepiaVoiceRecorder doesn't exist yet."})},n.stop=function(d,p,f){o?o.stop(function(m){c("close"),h("close"),d&&d(m)},p,f):p&&p()},n.release=function(d,p,f){o?o.release(function(){o=void 0,d&&d()},function(){o=void 0,p&&p()},function(m){o=void 0,f&&f(m)}):p&&p()},n.stopIfActive=function(d){n.isActive()?n.stop(d,d,void 0):d&&d()},n.stopAndReleaseIfActive=function(d){n.stopIfActive(function(){n.isReady()?n.release(d,d,void 0):(o=void 0,d&&d())})};function c(d){o&&n.waveEncoder&&n.waveEncoder.handle.sendToModule({gate:d})}function u(){o&&n.waveEncoder&&n.waveEncoder.handle.sendToModule({request:{get:"wave"}})}function h(d){o&&n.sttServerModule&&n.sttServerModule.handle.sendToModule({gate:d})}n.decodeAudioFileToInt16Mono=function(d,p,f,m,g){p||(p=16e3),f&&f>1&&console.error("SepiaVoiceRecorder.decodeAudioFileToInt16Mono - Channels > 1 not supported. Result will only contain data of channel 0."),m||(m=console.log),g||(g=console.error),SepiaFW.webAudio.decodeAudioFileToInt16Mono(d,p,m,g)},n.addAudioElementToPage=function(d,p,f){return SepiaFW.webAudio.addAudioElementToPage(d,p,f)},window.SepiaVoiceRecorder=n})();class Pve{constructor(e,t){it(this,"volumeThresholds",[.05,10]);it(this,"gain",1);it(this,"isLoading",!1);it(this,"isRecording",!1);it(this,"isWaitingForFinalResult",!1);it(this,"waitingForFinalResultTimer");it(this,"waitingForFinalResultDelay",4e3);it(this,"asrStreaming",!1);it(this,"sourceInfo","-?-");if(window.SepiaFW&&(SepiaFW.webAudio.defaultProcessorOptions.moduleFolder="lib"),!window.SepiaVoiceRecorder)SepiaVoiceRecorder={notSupported:!0},console.error("SEPIA Web Audio Library not found or not supported (IE11?)!");else{this.sepiaSpeechRecognition=e,this.sepiaSpeechRecognitionConfig=t;const r=this;SepiaVoiceRecorder.onProcessorReady=function(i){console.log("SepiaVoiceRecorder -  onProcessorReady",i),this.sourceInfo="Sample-rate: "+i.targetSampleRate+"Hz (factor: "+i.inputSampleRate/i.targetSampleRate+`)
Device Label:
`+(i.sourceInfo?i.sourceInfo.label:""),console.log(this.sourceInfo),r.isLoading=!1,r.isRecording=!1,r.isWaitingForFinalResult=!1,SepiaVoiceRecorder.start()},SepiaVoiceRecorder.onConnected=function(i){i&&i.model&&(console.log("INFO - connected - ASR active model: "+i.model),e._dispatchEvent(new Event("start")))},SepiaVoiceRecorder.onDisconnected=function(){e._dispatchEvent(new Event("end"))},SepiaVoiceRecorder.onProcessorInitError=function(i){r.onMicError();const s=new Sh;switch(s.message=i.message,i.name){case"NotAllowedError":s.error=eg.NOTALLOWED,s._dispatch(e);break;default:console.log(i);break}location.protocol=="http:"&&!location.origin.indexOf("http://localhost")==0&&console.error("Init. ERROR - Likely because of insecure origin (no HTTPS or localhost)")},SepiaVoiceRecorder.onProcessorError=function(i){console.error("SepiaVoiceRecorder -  onProcessorError",i),r.onMicError(),console.log("ERROR - onProcessorError: "+i.name)},SepiaVoiceRecorder.onAudioStart=function(i){e._dispatchEvent(new Event("audiostart")),r.isRecording=!0},SepiaVoiceRecorder.onAudioEnd=function(i){e._dispatchEvent(new Event("audioend")),r.isRecording=!1,r.isWaitingForFinalResult&&(clearTimeout(r.waitingForFinalResultTimer),r.waitingForFinalResultTimer=setTimeout(function(){r.isWaitingForFinalResult=!1},r.waitingForFinalResultDelay)),console.log("Microphone is CLOSED")},SepiaVoiceRecorder.onProcessorRelease=function(i){console.log("SepiaVoiceRecorder -  onProcessorRelease"),r.isRecording=!1,r.isLoading=!1,r.isWaitingForFinalResult=!1},SepiaVoiceRecorder.onDebugLog=function(i){},SepiaVoiceRecorder.onResamplerData=function(i){},SepiaVoiceRecorder.onSpeechRecognitionStateChange=function(i){i.state=="onStreamStart"?(r.asrStreaming,r.asrStreaming=!0):i.state=="onStreamEnd"&&(r.asrStreaming&&(i.bufferOrTimeLimit===!0&&console.log("Speech Recognition - Stopped streaming due to buffer- or time-limit"),r.isRecording?SepiaVoiceRecorder.stop():r.isWaitingForFinalResult&&(clearTimeout(r.waitingForFinalResultTimer),r.waitingForFinalResultTimer=setTimeout(function(){r.isWaitingForFinalResult=!1},r.waitingForFinalResultDelay))),r.asrStreaming=!1)},SepiaVoiceRecorder.onSpeechRecognitionEvent=function(i){if(i.type=="result"){if(!r.isRecording&&!r.isWaitingForFinalResult)return;const s=new Mve;s.transcript=i.transcript,s.confidence=i.confidence;const o=new Tve([s]);if(i.isFinal){r.isWaitingForFinalResult&&!r.isRecording&&clearTimeout(r.waitingForFinalResultTimer),o.isFinal=!0;const a=new SE([o]),l=new rC(a);if(i.transcript)l._dispatch(e,"result");else{const A=new Sh;A.error=eg.NOSPEECH,A.message="No speech was detected.",A._dispatch(e)}r.isWaitingForFinalResult=!1}else{o.isFinal=!1;const a=new SE([o]),l=new rC(a);i.transcript?l._dispatch(e,"result"):l._dispatch(e,"nomatch"),r.isWaitingForFinalResult=!0}}else if(i.type=="error"){const s=new Sh;if(s.message=i.message,i.name&&i.message)switch(i.name){case"SocketConnectionError":s.error=eg.NETWORK,s._dispatch(e);break;case"Error":i.message==="ChunkProcessorError failed to load."&&(s.error=eg.SERVICENOTALLOWED,s.message="You are likely unauthorized to access this SEPIA STT server.",s._dispatch(e));break;default:console.log(i);break}else console.error("Speech Recognition Error:",i)}else console.log("Speech Recognition - Event: "+i.type)},SepiaVoiceRecorder.onWaveEncoderAudioData=function(i){},SepiaVoiceRecorder.onVadStateChange=function(i,s){switch(i){case"vaup":e._dispatchEvent(new Event("soundstart"));break;case"vadown":e._dispatchEvent(new Event("soundend"));break;case"speechstart":e._dispatchEvent(new Event("speechstart"));break;case"speechend":e._dispatchEvent(new Event("speechend"));break}}}}toggleMic(){const e=this.sepiaSpeechRecognition.lang.split("-")[0];if(wA.language!=this.sepiaSpeechRecognition.lang&&wA.language!=e){const r=new Sh;r.error=eg.LANGUAGENOTSUPPORTED,r.message="The specified SEPIA STT server does not support the language specified by the user agent.",r._dispatch(this.sepiaSpeechRecognition);return}const t=this;!this.isLoading&&!this.isRecording&&!this.isWaitingForFinalResult?(this.isLoading=!0,SepiaVoiceRecorder.stopAndReleaseIfActive(function(){SepiaFW.webAudio.tryNativeStreamResampling=!1;const r={language:t.sepiaSpeechRecognition.lang,continuous:t.sepiaSpeechRecognition.continuous,messageFormat:"default"};var i=Object.assign(t.sepiaSpeechRecognitionConfig,r);console.log(i),SepiaVoiceRecorder.create({gain:t.gain,asr:i,vad:!0})})):this.isRecording?SepiaVoiceRecorder.stop():(this.isLoading||this.isWaitingForFinalResult)&&SepiaVoiceRecorder.stopAndReleaseIfActive(function(){t.isLoading=!1,t.isRecording=!1,t.isWaitingForFinalResult=!1})}releaseMic(e){SepiaVoiceRecorder.stopAndReleaseIfActive(function(){this.isLoading=!1,this.isRecording=!1,this.isWaitingForFinalResult=!1,e&&e()})}onMicError(){this.isRecording=!1,this.isWaitingForFinalResult=!1,this.isLoading=!1}}class M3{constructor(){it(this,"src","");it(this,"weight",1)}}var nu,yC,LH;class Ove{constructor(){Yu(this,yC);Yu(this,nu,[]);it(this,"length",0);it(this,"addFromURI",(e,t=1)=>{const r=new M3;fetch(e).then(i=>{i.text().then(s=>{r.src=s,r.weight=t,Fs(this,nu).push(r)})}).catch(i=>{console.log("Failed to add SpeechGrammar from URI: ",i)})});it(this,"addFromString",(e,t=1)=>{const r=new M3;r.src=e,r.weight=t,Fs(this,nu).push(r)});return new Proxy(this,{get:(e,t)=>{var r;if(t==="addFromString"||t==="addFromURI")return function(){return e[t].apply(e,arguments)};if(typeof+t=="number")return hR(r=e,yC,LH).call(r,t);if(t==="length")return Fs(e,nu).length}})}}nu=new WeakMap,yC=new WeakSet,LH=function(e){return Fs(this,nu)[e]};let VH={};const Wve=n=>(VH=n,Zve);var qh;class Zve{constructor(){Yu(this,qh,new Pve(this,VH));it(this,"grammars",new Ove);it(this,"lang",document.documentElement.lang||navigator.language);it(this,"continuous",!1);it(this,"interimResults",!1);it(this,"maxAlternatives",1);it(this,"start",()=>{Fs(this,qh).toggleMic()});it(this,"stop",()=>{Fs(this,qh).toggleMic()});it(this,"abort",()=>{Fs(this,qh).toggleMic()});it(this,"onaudiostart",e=>{});it(this,"onsoundstart",e=>{});it(this,"onspeechstart",e=>{});it(this,"onspeechend",e=>{});it(this,"onsoundend",e=>{});it(this,"onaudioend",e=>{});it(this,"onresult",e=>{});it(this,"onnomatch",e=>{});it(this,"onerror",e=>{});it(this,"onstart",e=>{});it(this,"onend",e=>{});it(this,"_eventCallbacks",new Map);it(this,"_dispatchEvent",e=>{const t=this._eventCallbacks.get(e.type);t&&t.forEach(r=>r(e)),this[`on${e.type}`](e)});it(this,"addEventListener",(e,t)=>{this._eventCallbacks.has(e)?this._eventCallbacks.get(e).push(t):this._eventCallbacks.set(e,[t])});it(this,"removeEventListener",(e,t)=>{if(this._eventCallbacks.has(e)){const r=this._eventCallbacks.get(e);r.includes(t)&&r.splice(r.indexOf(t),1)}});Rve()}}qh=new WeakMap;class Gve{constructor(){it(this,"serverUrl","http://localhost:20741");it(this,"clientId","any");it(this,"accessToken","test1234");it(this,"task","assistant");it(this,"model","");it(this,"optimizeFinalResult",!0);it(this,"engineOptions",{})}}const Jve=2e4;async function Hve(n){let e=0;const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r],s=`${i==null?void 0:i.name}: ${i==null?void 0:i.message}`;if(e+=s.length,e<Jve)t.push(s);else break}return t.reverse(),t}const zve="_message_1mjdp_1",Yve="_colorBg_1mjdp_13",Xve="_name_1mjdp_24",jve="_speaker_1mjdp_39",tg={message:zve,"chat-bubble":"_chat-bubble_1mjdp_1",colorBg:Yve,name:Xve,speaker:jve},Kve=n=>{const{timestamp:e,name:t,message:r,type:i,color:s,err:o}=n;let a=new Date(e);const l=a.getHours()<10?"0"+a.getHours():a.getHours(),A=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes(),c=`${l}:${A}`;return L.jsxs("div",{className:`${tg.message} ${i&&tg.speaker}`,children:[L.jsxs("div",{className:tg.name,style:i?{}:{color:s},children:[t,", ",L.jsx("span",{children:c})]}),L.jsxs("div",{className:tg["chat-bubble"],style:o?{color:"#7a7a7a"}:{},children:[L.jsx("div",{className:tg.colorBg,style:i?{}:{backgroundColor:s}}),r+(o?"  ( Not sent )":"")]})]})},$ve=De.sessionId??Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);De.sessionId=$ve;const qve=new Gve,eye="Speaker",tye=window.webkitSpeechRecognition||Wve(qve),nye=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],rye=["January","February","March","April","May","June","July","August","September","October","November","December"];function iye({templateInfo:n,micEnabled:e,setMicEnabled:t,speechRecognition:r,setSpeechRecognition:i}){const[s,o]=X.useState(!1),{t:a}=Ce.useContext(xs),[l]=X.useState(De[`${n.id}_fulBio`]),[A]=X.useState(De[`${n.id}_fulBio`].colorKey?QI[De[`${n.id}_fulBio`].colorKey].fontColor:QI[Object.keys(QI)[0]].fontColor),[c,u]=X.useState(De.speaker||eye);Ce.useEffect(()=>{De.speaker=c},[c]);const[h,d]=X.useState(""),[p,f]=X.useState([]),m=async b=>{b.preventDefault(),d(b.target.value)};X.useEffect(()=>{const b=document.querySelector("#msgscroll");b.scrollTo(0,b.scrollHeight)},[p]),Ce.useEffect(()=>{const b=F=>{F.ctrlKey&&F.key==="c"&&f([])};return window.addEventListener("keydown",b),()=>{window.removeEventListener("keydown",b)}},[]);const g=()=>{r.start(),t(!0)},v=()=>{r.stop(),t(!1)};Ce.useEffect(()=>{s||document.getElementById("messageInput").focus()},[s]);const w=async b=>{if(b.preventDefault&&b.preventDefault(),v(),!s){const x=b.target.elements.message.value;B(x)}},B=async b=>{if(b&&b!==""&&!s){o(!0);const F=l.name;d("");const x={name:c,message:b,timestamp:Date.now(),type:1};f(M=>[...M,x]);const E=await Hve(p);if(E.push(`${c}: ${b}`),b.replaceAll(" ","")===""){const M=Afe(lfe(yve)),H={name:F,message:M,timestamp:Date.now(),type:0};f(O=>[...O,H]),o(!1)}else try{const M=new Date,H=`${nye[M.getDay()]}, ${rye[M.getMonth()]} ${M.getDate()}, ${1900+M.getYear()}`,O=`${M.getHours()}:${M.getMinutes()} `,U="https://upstreet.webaverse.com/api/ai",I={prompt:`The following is part of a conversation between ${c} and ${F}. ${F} is descriptive and helpful, and is honest when it doesn't know an answer. Included is a context which acts a short-term memory, used to guide the conversation and track topics.

CONTEXT:
Current Day: ${H}
Current Time: ${O}

Info about ${F}
---

Bio: "${l.bio}"

Question 1: "${l.question1}"
Response 1: "${l.response1}"

Question 2: "${l.question2}"
Response 2: "${l.response2}"

Question 3: "${l.question3}"
Response 3: "${l.response3}"

Favourite Color: "${l.colorKey}"

MOST RECENT MESSAGES:

${E.join(`
`)}
${F}:`,max_tokens:250,temperature:.9,top_p:1,frequency_penalty:0,presence_penalty:.6,stop:[c+":",F+":","\\n"]};kH.post(U,I).then(R=>{const D=R.data.choices[0].text,k={name:F,message:D,timestamp:Date.now(),type:0};f(V=>[...V,k]),o(!1)}).catch(R=>{x.error=!0,o(!1),console.error(R)})}catch(M){o(!1),console.error(M)}}};let C=!1;return Ce.useEffect(()=>{if(!s){if(r||C)return;C=!0;const b=new tye({});i(b),b.onerror=F=>console.error(F.error,F.message),b.onresult=F=>{const x=F.resultIndex;F.results[x].isFinal&&(B(`${F.results[x][0].transcript}`),o(!0))},b.interimResults=!0,b.continuous=!0}},[]),L.jsxs("div",{className:Ko.chatBox,children:[L.jsxs("div",{className:Ko.speaker,children:[L.jsx("p",{className:Ko.warning,children:a("text.apiUnderMaintnance")}),L.jsx("label",{htmlFor:"speaker",children:a("labels.yourName")}),L.jsx("input",{type:"text",name:"speaker",defaultValue:c,onChange:b=>u(b.target.value)})]}),L.jsx("label",{children:a("labels.conversation")}),L.jsx("div",{className:Ko.messages,children:L.jsx("div",{className:Ko.scrollBox,id:"msgscroll",children:p.map((b,F)=>{if(b.timestamp)return L.jsx(Kve,{name:b.name,timestamp:b.timestamp,message:b.message,type:b.type,color:A,err:b.error},F)})})}),L.jsxs("form",{className:Ko.send,style:{opacity:s?"0.4":"1"},onSubmit:w,children:[L.jsx(sn,{type:"icon",theme:"light",icon:"microphone",className:Ko.mic,size:32,active:!!e,onClick:()=>e?v():g()}),L.jsx("input",{autoComplete:"off",type:"text",name:"message",id:"messageInput",value:h,onInput:m,onChange:m,disabled:s}),L.jsx(sn,{theme:"light",text:a("callToAction.send"),size:14,onSubmit:w,className:Ko.sendButton,type:"submit"})]}),L.jsxs("p",{className:`${Ko.isTyping} ${s&&Ko.show}`,children:[L.jsx("span",{style:{color:A},children:l.name})," is typing..."]})]})}function sye(){const{setViewMode:n}=X.useContext(Ci),[e,t]=X.useState(!1),[r,i]=X.useState(!1),{playSound:s}=X.useContext(bs),{isMute:o}=X.useContext(Bs),a=()=>{n(at.SAVE),!o&&s("backNextButton"),r&&r.stop(),t(!1)},{t:l}=Ce.useContext(xs);return L.jsxs("div",{className:Tc.container,children:[L.jsx("div",{className:"sectionTitle",children:l("pageTitles.chat")}),L.jsxs("div",{className:Tc.chatContainer,children:[L.jsx("div",{className:Tc.topLine}),L.jsx("div",{className:Tc.bottomLine}),L.jsx("div",{className:Tc.scrollContainer,children:L.jsx(iye,{micEnabled:e,setMicEnabled:t,speechRecognition:r,setSpeechRecognition:i})})]}),L.jsx("div",{className:Tc.buttonContainer,children:L.jsx(sn,{theme:"light",text:l("callToAction.back"),size:14,className:Tc.buttonLeft,onClick:a})})]})}const oye="_buttonContainer_1fd4o_1",aye="_buttonLeft_1fd4o_10",lye="_buttonRight_1fd4o_14",Aye="_buttonCenter_1fd4o_18",Iy={buttonContainer:oye,buttonLeft:aye,buttonRight:lye,buttonCenter:Aye},cye="_button_13dfi_1",T3={button:cye},uye="Anon",dye=()=>{Ce.useContext(xs);const[n]=X.useState(localStorage.getItem("name")||uye),{model:e,characterManager:t}=Ce.useContext(lr),r=()=>{const o=De.mergeOptions_sel_option||0;return{createTextureAtlas:De.mergeOptions_create_atlas==null?!0:De.mergeOptions_create_atlas,mToonAtlasSize:Cn(De.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:Cn(De.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:Cn(De.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:Cn(De.mergeOptions_atlas_std_transp_size||6),ktxCompression:De.merge_options_ktx_compression,exportStdAtlas:o===0||o==2,exportMtoonAtlas:o===1||o==2,twoSidedMaterial:De.mergeOptions_two_sided_mat||!1}},i=()=>{const o=r();t.downloadVRM(n,o)},s=()=>{const o=r();t.downloadGLB(n,o)};return L.jsxs(X.Fragment,{children:[L.jsx(sn,{theme:"light",text:"GLB",icon:"download",size:14,className:T3.button,onClick:()=>{s()}}),L.jsx(sn,{theme:"light",text:"VRM",icon:"download",size:14,className:T3.button,onClick:i})]})},hye="_InformationContainerPos_b0msk_1",fye="_traitInfoTitle_b0msk_13",pye="_traitInfoText_b0msk_22",gye="_flexSelect_b0msk_33",mye="_scrollContainer_b0msk_68",vye="_checked_b0msk_93",yye="_checkmark_b0msk_97",wye="_checkboxHolder_b0msk_110",ct={InformationContainerPos:hye,traitInfoTitle:fye,traitInfoText:pye,flexSelect:gye,"arrow-button":"_arrow-button_b0msk_40","left-button":"_left-button_b0msk_54","right-button":"_right-button_b0msk_61",scrollContainer:mye,"custom-checkbox":"_custom-checkbox_b0msk_79","checkbox-container":"_checkbox-container_b0msk_84",checked:vye,checkmark:yye,checkboxHolder:wye},Bye="_mainTitleWrap_4fb0s_1",Cye="_mainTitle_4fb0s_1",bye="_topLine_4fb0s_18",MI={mainTitleWrap:Bye,mainTitle:Cye,topLine:bye};function ka({title:n,width:e,left:t,right:r}){const i={width:e?`${e}px`:null,left:t?`${t}px`:null,right:r?`${r}px`:null};return n&&L.jsxs("div",{className:MI.mainTitleWrap,style:i,children:[L.jsx("div",{className:MI.topLine}),L.jsx("div",{className:MI.mainTitle,children:n})]})}const xye="_slider_1y6nx_1",Iye="_infoContainer_1y6nx_13",Fy={"slider-container":"_slider-container_1y6nx_1",slider:xye,infoContainer:Iye,"input-box":"_input-box_1y6nx_18"};function Uh({title:n,value:e,min:t,max:r,onChange:i,step:s,stepBox:o}){return L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:Fy.infoContainer,children:[n,o&&L.jsx("input",{type:"number",min:"0",max:"100",value:e,onChange:i,className:Fy["input-box"],step:o})]}),L.jsx("div",{className:Fy["slider-container"],children:L.jsx("input",{type:"range",min:t,max:r,value:e,onChange:i,className:Fy.slider,step:s})})]})}function xb({showDropToDownload:n,showCreateAtlas:e,mergeMenuTitle:t}){const[r,i]=Ce.useState(De.mergeOptions_atlas_std_size||6),[s,o]=Ce.useState(De.mergeOptions_atlas_std_transp_size||6),[a,l]=Ce.useState(De.mergeOptions_atlas_mtoon_size||6),[A,c]=Ce.useState(De.mergeOptions_atlas_mtoon_transp_size||6),[u,h]=Ce.useState(De.mergeOptions_sel_option||0),[d,p]=Ce.useState(De.mergeOptions_two_sided_mat||!1),[f]=Ce.useState(["Merge to Standard","Merge to MToon","Keep Both"]),[m,g]=Ce.useState(De.mergeOptions_download_vrm==null?!0:De.mergeOptions_download_vrm),[v,w]=Ce.useState(De.mergeOptions_download_vrm_preview==null?!0:De.mergeOptions_download_vrm_preview),[B,C]=Ce.useState(De.mergeOptions_drop_download||!1),[b,F]=Ce.useState(De.merge_options_ktx_compression||!1),[x,E]=Ce.useState(De.mergeOptions_create_atlas==null?!0:De.mergeOptions_create_atlas),[M,H]=Ce.useState(De.mergeOptions_download_lora==null?!0:De.mergeOptions_download_lora),[O,U]=Ce.useState(De.mergeOptions_download_sprites==null?!0:De.mergeOptions_download_sprites),y=T=>{C(T.target.checked),De.mergeOptions_drop_download=T.target.checked},I=T=>{p(T.target.checked),De.mergeOptions_two_sided_mat=T.target.checked},R=T=>{F(T.target.checked),De.merge_options_ktx_compression=T.target.checked},D=T=>{E(T.target.checked),De.mergeOptions_create_atlas=T.target.checked},k=T=>{g(T.target.checked),De.mergeOptions_download_vrm=T.target.checked},V=T=>{w(T.target.checked),De.mergeOptions_download_vrm_preview=T.target.checked},Z=T=>{H(T.target.checked),De.mergeOptions_download_lora=T.target.checked},N=T=>{U(T.target.checked),De.mergeOptions_download_sprites=T.target.checked},_=()=>{let T=u;u<=0?T=f.length-1:T-=1,h(T),De.mergeOptions_sel_option=T},z=()=>{let T=u;u>=f.length-1?T=0:T+=1,h(T),De.mergeOptions_sel_option=T},ie=async(T,q)=>{let ge=parseInt(T.target.value);ge>8?ge=8:ge<0&&(ge=0),(Ae=>{switch(q){case"standard opaque":i(Ae),De.mergeOptions_atlas_std_size=Ae;break;case"standard transparent":o(Ae),De.mergeOptions_atlas_std_transp_size=Ae;break;case"mtoon opaque":l(Ae),De.mergeOptions_atlas_mtoon_size=Ae;break;case"mtoon transparent":c(Ae),De.mergeOptions_atlas_mtoon_transp_size=Ae;break}})(ge)};return L.jsxs("div",{className:ct.InformationContainerPos,children:[L.jsx(ka,{title:t,width:180,left:20}),L.jsxs("div",{className:ct.scrollContainer,children:[L.jsx("div",{className:ct.traitInfoTitle,children:"Download Options"}),L.jsx(L.Fragment,{children:L.jsx("div",{className:ct.traitInfoText,children:L.jsxs("div",{className:ct.checkboxHolder,children:[L.jsx("div",{}),L.jsxs("label",{className:ct["custom-checkbox"],children:[L.jsx("input",{type:"checkbox",checked:m,onChange:k}),L.jsx("div",{className:ct["checkbox-container"]})]}),L.jsx("div",{}),L.jsx("div",{}),"Download VRM"]})})}),L.jsx(L.Fragment,{children:L.jsx("div",{className:ct.traitInfoText,children:L.jsxs("div",{className:ct.checkboxHolder,children:[L.jsx("div",{}),L.jsxs("label",{className:ct["custom-checkbox"],children:[L.jsx("input",{type:"checkbox",checked:v,onChange:V}),L.jsx("div",{className:ct["checkbox-container"]})]}),L.jsx("div",{}),L.jsx("div",{}),"Download VRM Preview"]})})}),L.jsx(L.Fragment,{children:L.jsx("div",{className:ct.traitInfoText,children:L.jsxs("div",{className:ct.checkboxHolder,children:[L.jsx("div",{}),L.jsxs("label",{className:ct["custom-checkbox"],children:[L.jsx("input",{type:"checkbox",checked:M,onChange:Z}),L.jsx("div",{className:ct["checkbox-container"]})]}),L.jsx("div",{}),L.jsx("div",{}),"Download Lora Data"]})})}),L.jsx(L.Fragment,{children:L.jsx("div",{className:ct.traitInfoText,children:L.jsxs("div",{className:ct.checkboxHolder,children:[L.jsx("div",{}),L.jsxs("label",{className:ct["custom-checkbox"],children:[L.jsx("input",{type:"checkbox",checked:O,onChange:N}),L.jsx("div",{className:ct["checkbox-container"]})]}),L.jsx("div",{}),L.jsx("div",{}),"Download Sprites Data"]})})}),m&&L.jsxs(L.Fragment,{children:[e&&L.jsx(L.Fragment,{children:L.jsx("div",{className:ct.traitInfoText,children:L.jsxs("div",{className:ct.checkboxHolder,children:[L.jsx("div",{}),L.jsxs("label",{className:ct["custom-checkbox"],children:[L.jsx("input",{type:"checkbox",checked:x,onChange:D}),L.jsx("div",{className:ct["checkbox-container"]})]}),L.jsx("div",{}),L.jsx("div",{}),"Create Atlas"]})})}),(e==!1||x)&&L.jsxs(L.Fragment,{children:[L.jsx("br",{}),L.jsx("div",{className:ct.traitInfoTitle,children:"Merge Atlas Type"}),L.jsx("br",{}),L.jsxs("div",{className:ct.flexSelect,children:[L.jsx("div",{className:`${ct["arrow-button"]} ${ct["left-button"]}`,onClick:_}),L.jsx("div",{className:ct.traitInfoText,style:{marginBottom:"0"},children:f[u]}),L.jsx("div",{className:`${ct["arrow-button"]} ${ct["right-button"]}`,onClick:z})]}),L.jsx("br",{}),L.jsx("br",{}),(u===0||u==2)&&L.jsxs(L.Fragment,{children:[L.jsx("div",{className:ct.traitInfoTitle,children:"Standard Atlas Size"}),L.jsx("br",{}),L.jsxs("div",{className:ct.traitInfoText,children:["Opaque: ",Cn(r)+" x "+Cn(r)]}),L.jsx(Uh,{value:r,onChange:T=>ie(T,"standard opaque"),min:1,max:8,step:1}),L.jsx("br",{}),L.jsxs("div",{className:ct.traitInfoText,children:["Transparent: ",Cn(s)+" x "+Cn(s)]}),L.jsx(Uh,{value:s,onChange:T=>ie(T,"standard transparent"),min:1,max:8,step:1}),L.jsx("br",{})," ",L.jsx("br",{})]}),(u===1||u==2)&&L.jsxs(L.Fragment,{children:[L.jsx("div",{className:ct.traitInfoTitle,children:"MToon Atlas Size"}),L.jsx("br",{}),L.jsxs("div",{className:ct.traitInfoText,children:["Opaque: ",Cn(a)+" x "+Cn(a)]}),L.jsx(Uh,{value:a,onChange:T=>ie(T,"mtoon opaque"),min:1,max:8,step:1}),L.jsx("br",{}),L.jsxs("div",{className:ct.traitInfoText,children:["Transparent: ",Cn(A)+" x "+Cn(A)]}),L.jsx(Uh,{value:A,onChange:T=>ie(T,"mtoon transparent"),min:1,max:8,step:1}),L.jsx("br",{})," ",L.jsx("br",{})]}),L.jsx("div",{className:ct.traitInfoTitle,children:"Options"}),L.jsx("div",{className:ct.traitInfoText,children:L.jsxs("div",{className:ct.checkboxHolder,children:[L.jsx("div",{}),L.jsxs("label",{className:ct["custom-checkbox"],children:[L.jsx("input",{type:"checkbox",checked:d,onChange:I}),L.jsx("div",{className:ct["checkbox-container"]})]}),L.jsx("div",{}),L.jsx("div",{}),"Two Sided Material"]})}),n&&L.jsx(L.Fragment,{children:L.jsx("div",{className:ct.traitInfoText,children:L.jsxs("div",{className:ct.checkboxHolder,children:[L.jsx("div",{}),L.jsxs("label",{className:ct["custom-checkbox"],children:[L.jsx("input",{type:"checkbox",checked:B,onChange:y}),L.jsx("div",{className:ct["checkbox-container"]})]}),L.jsx("div",{}),L.jsx("div",{}),"Drag Drop - Download"]})})}),L.jsx(L.Fragment,{children:L.jsx("div",{className:ct.traitInfoText,children:L.jsxs("div",{className:ct.checkboxHolder,children:[L.jsx("div",{}),L.jsxs("label",{className:ct["custom-checkbox"],children:[L.jsx("input",{type:"checkbox",checked:b,onChange:R}),L.jsx("div",{className:ct["checkbox-container"]})]}),L.jsx("div",{}),L.jsx("div",{}),"KTX Compression"]})})})]})]})]})]})}const Fye="_dropArea_1a0z4_1",_ye={dropArea:Fye};function I0({onFilesDrop:n}){const[e,t]=Ce.useState(!1),[r,i]=X.useState(null);Ce.useEffect(()=>{const o=l=>{l.preventDefault(),t(!1);const A=l.dataTransfer.files;n&&i(A)},a=l=>{l.preventDefault(),t(!0)};return window.addEventListener("drop",o),window.addEventListener("dragover",a),()=>{window.removeEventListener("drop",o),window.removeEventListener("dragover",a)}},[]),Ce.useEffect(()=>{r&&n(r)},[r]);const s=()=>{t(!1)};return L.jsx("div",{onDragLeave:s,className:_ye.dropArea,style:{display:e?"flex":"none"}})}function Eye(){const{t:n}=Ce.useContext(xs),{playSound:e}=X.useContext(bs),{isMute:t}=X.useContext(Bs),{setViewMode:r}=X.useContext(Ci),i=()=>{r(at.APPEARANCE),!t&&e("backNextButton")},s=()=>{r(at.MINT),!t&&e("backNextButton")},o=async a=>{const l=a[0];l&&l.name.toLowerCase().endsWith(".json")};return L.jsxs("div",{className:Iy.container,children:[L.jsx("div",{className:"sectionTitle",children:n("pageTitles.saveCharacter")}),L.jsxs("div",{className:Iy.buttonContainer,children:[L.jsx(I0,{onFilesDrop:o}),L.jsx(sn,{theme:"light",text:n("callToAction.back"),size:14,className:Iy.buttonLeft,onClick:i}),L.jsx(xb,{showCreateAtlas:!0,mergeMenuTitle:"Download Options"}),L.jsx(dye,{}),L.jsx(sn,{theme:"light",text:"mint",size:14,className:Iy.buttonRight,onClick:s})]})]})}const Nc={},F0="abi/5.7.0",kt=new Be(F0),Iu={};let N3={calldata:!0,memory:!0,storage:!0},Sye={calldata:!0,memory:!0};function _y(n,e){if(n==="bytes"||n==="string"){if(N3[e])return!0}else if(n==="address"){if(e==="payable")return!0}else if((n.indexOf("[")>=0||n==="tuple")&&Sye[e])return!0;return(N3[e]||e==="payable")&&kt.throwArgumentError("invalid modifier","name",e),!1}function Uye(n,e){let t=n;function r(a){kt.throwArgumentError(`unexpected character at position ${a}`,"param",n)}n=n.replace(/\s/g," ");function i(a){let l={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(l.indexed=!1),l}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<n.length;a++){let l=n[a];switch(l){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||r(a),o.state.allowType=!1,o.type=Pd(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),_y(o.type,o.name)&&(o.name=""),o.type=Pd(o.type);let A=o;o=o.parent,o||r(a),delete A.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),_y(o.type,o.name)&&(o.name=""),o.type=Pd(o.type);let c=i(o.parent);o.parent.components.push(c),delete o.parent,o=c;break;case" ":o.state.allowType&&o.type!==""&&(o.type=Pd(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||r(a),o.indexed&&r(a),o.indexed=!0,o.name=""):_y(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||r(a),o.type+=l,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(a),o.type+=l,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=l,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=l,delete o.state.allowArray):o.state.readArray?o.type+=l:r(a)}}return o.parent&&kt.throwArgumentError("unexpected eof","param",n),delete s.state,o.name==="indexed"?(e||r(t.length-7),o.indexed&&r(t.length-7),o.indexed=!0,o.name=""):_y(o.type,o.name)&&(o.name=""),s.type=Pd(s.type),s}function Iw(n,e){for(let t in e)Re(n,t,e[t])}const Ht=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Qye=new RegExp(/^(.*)\[([0-9]*)\]$/);class xr{constructor(e,t){e!==Iu&&kt.throwError("use fromString",Be.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Iw(this,t);let r=this.type.match(Qye);r?Iw(this,{arrayLength:parseInt(r[2]||"-1"),arrayChildren:xr.fromObject({type:r[1],components:this.components}),baseType:"array"}):Iw(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Ht.sighash),Ht[e]||kt.throwArgumentError("invalid format type","format",e),e===Ht.json){let r={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.components&&(r.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(r)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Ht.sighash&&(t+=this.type),t+="("+this.components.map(r=>r.format(e)).join(e===Ht.full?", ":",")+")"):t+=this.type,e!==Ht.sighash&&(this.indexed===!0&&(t+=" indexed"),e===Ht.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?xr.fromString(e,t):xr.fromObject(e)}static fromObject(e){return xr.isParamType(e)?e:new xr(Iu,{name:e.name||null,type:Pd(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(xr.fromObject):null})}static fromString(e,t){function r(i){return xr.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return r(Uye(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function Ym(n,e){return Mye(n).map(t=>xr.fromString(t,e))}class xl{constructor(e,t){e!==Iu&&kt.throwError("use a static from method",Be.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Iw(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return xl.isFragment(e)?e:typeof e=="string"?xl.fromString(e):xl.fromObject(e)}static fromObject(e){if(xl.isFragment(e))return e;switch(e.type){case"function":return fa.fromObject(e);case"event":return ml.fromObject(e);case"constructor":return ha.fromObject(e);case"error":return FA.fromObject(e);case"fallback":case"receive":return null}return kt.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?ml.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?fa.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?ha.fromString(e.trim()):e.split(" ")[0]==="error"?FA.fromString(e.substring(5).trim()):kt.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class ml extends xl{format(e){if(e||(e=Ht.sighash),Ht[e]||kt.throwArgumentError("invalid format type","format",e),e===Ht.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Ht.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Ht.full?", ":",")+") ",e!==Ht.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return typeof e=="string"?ml.fromString(e):ml.fromObject(e)}static fromObject(e){if(ml.isEventFragment(e))return e;e.type!=="event"&&kt.throwArgumentError("invalid event object","value",e);const t={name:Xm(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(xr.fromObject):[],type:"event"};return new ml(Iu,t)}static fromString(e){let t=e.match(jm);t||kt.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":r=!0;break;case"":break;default:kt.warn("unknown modifier: "+i)}}),ml.fromObject({name:t[1].trim(),anonymous:r,inputs:Ym(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function PH(n,e){e.gas=null;let t=n.split("@");return t.length!==1?(t.length>2&&kt.throwArgumentError("invalid human-readable ABI signature","value",n),t[1].match(/^[0-9]+$/)||kt.throwArgumentError("invalid human-readable ABI signature gas","value",n),e.gas=Ze.from(t[1]),t[0]):n}function OH(n,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",n.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}})}function WH(n){let e={constant:!1,payable:!0,stateMutability:"payable"};return n.stateMutability!=null?(e.stateMutability=n.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",n.constant!=null&&!!n.constant!==e.constant&&kt.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",n),e.payable=e.stateMutability==="payable",n.payable!=null&&!!n.payable!==e.payable&&kt.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",n)):n.payable!=null?(e.payable=!!n.payable,n.constant==null&&!e.payable&&n.type!=="constructor"&&kt.throwArgumentError("unable to determine stateMutability","value",n),e.constant=!!n.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&kt.throwArgumentError("cannot have constant payable function","value",n)):n.constant!=null?(e.constant=!!n.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):n.type!=="constructor"&&kt.throwArgumentError("unable to determine stateMutability","value",n),e}class ha extends xl{format(e){if(e||(e=Ht.sighash),Ht[e]||kt.throwArgumentError("invalid format type","format",e),e===Ht.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});e===Ht.sighash&&kt.throwError("cannot format a constructor for sighash",Be.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(r=>r.format(e)).join(e===Ht.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "),t.trim()}static from(e){return typeof e=="string"?ha.fromString(e):ha.fromObject(e)}static fromObject(e){if(ha.isConstructorFragment(e))return e;e.type!=="constructor"&&kt.throwArgumentError("invalid constructor object","value",e);let t=WH(e);t.constant&&kt.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(xr.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?Ze.from(e.gas):null};return new ha(Iu,r)}static fromString(e){let t={type:"constructor"};e=PH(e,t);let r=e.match(jm);return(!r||r[1].trim()!=="constructor")&&kt.throwArgumentError("invalid constructor string","value",e),t.inputs=Ym(r[2].trim(),!1),OH(r[3].trim(),t),ha.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class fa extends ha{format(e){if(e||(e=Ht.sighash),Ht[e]||kt.throwArgumentError("invalid format type","format",e),e===Ht.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Ht.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Ht.full?", ":",")+") ",e!==Ht.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(r=>r.format(e)).join(", ")+") "),this.gas!=null&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return typeof e=="string"?fa.fromString(e):fa.fromObject(e)}static fromObject(e){if(fa.isFunctionFragment(e))return e;e.type!=="function"&&kt.throwArgumentError("invalid function object","value",e);let t=WH(e);const r={type:e.type,name:Xm(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(xr.fromObject):[],outputs:e.outputs?e.outputs.map(xr.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?Ze.from(e.gas):null};return new fa(Iu,r)}static fromString(e){let t={type:"function"};e=PH(e,t);let r=e.split(" returns ");r.length>2&&kt.throwArgumentError("invalid function string","value",e);let i=r[0].match(jm);if(i||kt.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&Xm(t.name),t.inputs=Ym(i[2],!1),OH(i[3].trim(),t),r.length>1){let s=r[1].match(jm);(s[1].trim()!=""||s[3].trim()!="")&&kt.throwArgumentError("unexpected tokens","value",e),t.outputs=Ym(s[2],!1)}else t.outputs=[];return fa.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function k3(n){const e=n.format();return(e==="Error(string)"||e==="Panic(uint256)")&&kt.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",n),n}class FA extends xl{format(e){if(e||(e=Ht.sighash),Ht[e]||kt.throwArgumentError("invalid format type","format",e),e===Ht.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Ht.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Ht.full?", ":",")+") ",t.trim()}static from(e){return typeof e=="string"?FA.fromString(e):FA.fromObject(e)}static fromObject(e){if(FA.isErrorFragment(e))return e;e.type!=="error"&&kt.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:Xm(e.name),inputs:e.inputs?e.inputs.map(xr.fromObject):[]};return k3(new FA(Iu,t))}static fromString(e){let t={type:"error"},r=e.match(jm);return r||kt.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&Xm(t.name),t.inputs=Ym(r[2],!1),k3(FA.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Pd(n){return n.match(/^uint($|[^1-9])/)?n="uint256"+n.substring(4):n.match(/^int($|[^1-9])/)&&(n="int256"+n.substring(3)),n}const Rye=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Xm(n){return(!n||!n.match(Rye))&&kt.throwArgumentError(`invalid identifier "${n}"`,"value",n),n}const jm=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function Mye(n){n=n.trim();let e=[],t="",r=0;for(let i=0;i<n.length;i++){let s=n[i];s===","&&r===0?(e.push(t),t=""):(t+=s,s==="("?r++:s===")"&&(r--,r===-1&&kt.throwArgumentError("unbalanced parenthesis","value",n)))}return t&&e.push(t),e}const pQ=new Be(F0);function Tye(n){const e=[],t=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{t(o,i[s])}catch(a){e.push({path:o,error:a})}}};return t([],n),e}class zl{constructor(e,t,r,i){this.name=e,this.type=t,this.localName=r,this.dynamic=i}_throwError(e,t){pQ.throwArgumentError(e,this.localName,t)}}class UE{constructor(e){Re(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Si(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(is(e._data))}writeBytes(e){let t=At(e);const r=t.length%this.wordSize;return r&&(t=is([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=At(Ze.from(e));return t.length>this.wordSize&&pQ.throwError("value out-of-bounds",Be.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=is([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class iC{constructor(e,t,r,i){Re(this,"_data",At(e)),Re(this,"wordSize",t||32),Re(this,"_coerceFunc",r),Re(this,"allowLoose",i),this._offset=0}get data(){return tt(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):iC.coerce(e,t)}_peekBytes(e,t,r){let i=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?i=t:pQ.throwError("data out-of-bounds",Be.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new iC(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return Ze.from(this.readBytes(this.wordSize))}}class Nye extends zl{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Vr(t)}catch(r){this._throwError(r.message,t)}return e.writeValue(t)}decode(e){return Vr(Pn(e.readValue().toHexString(),20))}}class kye extends zl{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Qh=new Be(F0);function ZH(n,e,t){let r=null;if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let l={};r=e.map(A=>{const c=A.localName;return c||Qh.throwError("cannot encode object for signature with missing names",Be.errors.INVALID_ARGUMENT,{argument:"values",coder:A,value:t}),l[c]&&Qh.throwError("cannot encode object for signature with duplicate names",Be.errors.INVALID_ARGUMENT,{argument:"values",coder:A,value:t}),l[c]=!0,t[c]})}else Qh.throwArgumentError("invalid tuple value","tuple",t);e.length!==r.length&&Qh.throwArgumentError("types/value length mismatch","tuple",t);let i=new UE(n.wordSize),s=new UE(n.wordSize),o=[];e.forEach((l,A)=>{let c=r[A];if(l.dynamic){let u=s.length;l.encode(s,c);let h=i.writeUpdatableValue();o.push(d=>{h(d+u)})}else l.encode(i,c)}),o.forEach(l=>{l(i.length)});let a=n.appendWriter(i);return a+=n.appendWriter(s),a}function GH(n,e){let t=[],r=n.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=n.readValue(),l=r.subReader(a.toNumber());try{o=s.decode(l)}catch(A){if(A.code===Be.errors.BUFFER_OVERRUN)throw A;o=A,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(n)}catch(a){if(a.code===Be.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&t.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),t[a]!=null))return;const l=t[o];l instanceof Error?Object.defineProperty(t,a,{enumerable:!0,get:()=>{throw l}}):t[a]=l});for(let s=0;s<t.length;s++){const o=t[s];o instanceof Error&&Object.defineProperty(t,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(t)}class Dye extends zl{constructor(e,t,r){const i=e.type+"["+(t>=0?t:"")+"]",s=t===-1||e.dynamic;super("array",i,r,s),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;r===-1&&(r=t.length,e.writeValue(t.length)),Qh.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<t.length;s++)i.push(this.coder);return ZH(e,i,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),t*32>e._data.length&&Qh.throwError("insufficient data length",Be.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let i=0;i<t;i++)r.push(new kye(this.coder));return e.coerce(this.name,GH(e,r))}}class Lye extends zl{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class JH extends zl{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=At(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class Vye extends JH{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,tt(super.decode(e)))}}class Pye extends zl{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let r=At(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,tt(e.readBytes(this.size)))}}class Oye extends zl{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class Wye extends zl{constructor(e,t,r){const i=(t?"int":"uint")+e*8;super(i,i,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=Ze.from(t),i=v9.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(r.gt(s)||r.lt(s.add(m9).mul(g9)))&&this._throwError("value out-of-bounds",t)}else(r.lt(zV)||r.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(this.size*8).mask(this.size*8),this.signed&&(r=r.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(this.size*8);return this.signed&&(t=t.fromTwos(this.size*8)),e.coerce(this.name,t)}}class Zye extends JH{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Fa(t))}decode(e){return r0(super.decode(e))}}class Ey extends zl{constructor(e,t){let r=!1;const i=[];e.forEach(o=>{o.dynamic&&(r=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const t=this.coders.reduce((r,i)=>{const s=i.localName;return s&&(r[s]||(r[s]=0),r[s]++),r},{});return this.coders.forEach((r,i)=>{let s=r.localName;!s||t[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){return ZH(e,this.coders,t)}decode(e){return e.coerce(this.name,GH(e,this.coders))}}const Sy=new Be(F0),Gye=new RegExp(/^bytes([0-9]*)$/),Jye=new RegExp(/^(u?int)([0-9]*)$/);class Hye{constructor(e){Re(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new Nye(e.name);case"bool":return new Lye(e.name);case"string":return new Zye(e.name);case"bytes":return new Vye(e.name);case"array":return new Dye(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Ey((e.components||[]).map(r=>this._getCoder(r)),e.name);case"":return new Oye(e.name)}let t=e.type.match(Jye);if(t){let r=parseInt(t[2]||"256");return(r===0||r>256||r%8!==0)&&Sy.throwArgumentError("invalid "+t[1]+" bit length","param",e),new Wye(r/8,t[1]==="int",e.name)}if(t=e.type.match(Gye),t){let r=parseInt(t[1]);return(r===0||r>32)&&Sy.throwArgumentError("invalid bytes length","param",e),new Pye(r,e.name)}return Sy.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new iC(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new UE(this._getWordSize())}getDefaultValue(e){const t=e.map(i=>this._getCoder(xr.from(i)));return new Ey(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Sy.throwError("types/values length mismatch",Be.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(o=>this._getCoder(xr.from(o))),i=new Ey(r,"_"),s=this._getWriter();return i.encode(s,t),s.data}decode(e,t,r){const i=e.map(o=>this._getCoder(xr.from(o)));return new Ey(i,"_").decode(this._getReader(At(t),r))}}const zye=new Hye,Fn=new Be(F0);class Yye extends t0{}class Xye extends t0{}class jye extends t0{}class QE extends t0{static isIndexed(e){return!!(e&&e._isIndexed)}}const Kye={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function D3(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);return t.error=e,t}class L3{constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,Re(this,"fragments",t.map(r=>xl.from(r)).filter(r=>r!=null)),Re(this,"_abiCoder",ss(new.target,"getAbiCoder")()),Re(this,"functions",{}),Re(this,"errors",{}),Re(this,"events",{}),Re(this,"structs",{}),this.fragments.forEach(r=>{let i=null;switch(r.type){case"constructor":if(this.deploy){Fn.warn("duplicate definition - constructor");return}Re(this,"deploy",r);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=r.format();if(i[s]){Fn.warn("duplicate definition - "+s);return}i[s]=r}),this.deploy||Re(this,"deploy",ha.from({payable:!1,type:"constructor"})),Re(this,"_isInterface",!0)}format(e){e||(e=Ht.full),e===Ht.sighash&&Fn.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(r=>r.format(e));return e===Ht.json?JSON.stringify(t.map(r=>JSON.parse(r))):t}static getAbiCoder(){return zye}static getAddress(e){return Vr(e)}static getSighash(e){return zr(ih(e.format()),0,4)}static getEventTopic(e){return ih(e.format())}getFunction(e){if(It(e)){for(const r in this.functions)if(e===this.getSighash(r))return this.functions[r];Fn.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===r);return i.length===0?Fn.throwArgumentError("no matching function","name",r):i.length>1&&Fn.throwArgumentError("multiple matching functions","name",r),this.functions[i[0]]}const t=this.functions[fa.fromString(e).format()];return t||Fn.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(It(e)){const r=e.toLowerCase();for(const i in this.events)if(r===this.getEventTopic(i))return this.events[i];Fn.throwArgumentError("no matching event","topichash",r)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===r);return i.length===0?Fn.throwArgumentError("no matching event","name",r):i.length>1&&Fn.throwArgumentError("multiple matching events","name",r),this.events[i[0]]}const t=this.events[ml.fromString(e).format()];return t||Fn.throwArgumentError("no matching event","signature",e),t}getError(e){if(It(e)){const r=ss(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===r(s))return this.errors[i]}Fn.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===r);return i.length===0?Fn.throwArgumentError("no matching error","name",r):i.length>1&&Fn.throwArgumentError("multiple matching errors","name",r),this.errors[i[0]]}const t=this.errors[fa.fromString(e).format()];return t||Fn.throwArgumentError("no matching error","signature",e),t}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return ss(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),ss(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){typeof e=="string"&&(e=this.getError(e));const r=At(t);return tt(r.slice(0,4))!==this.getSighash(e)&&Fn.throwArgumentError(`data signature does not match error ${e.name}.`,"data",tt(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return typeof e=="string"&&(e=this.getError(e)),tt(is([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){typeof e=="string"&&(e=this.getFunction(e));const r=At(t);return tt(r.slice(0,4))!==this.getSighash(e)&&Fn.throwArgumentError(`data signature does not match function ${e.name}.`,"data",tt(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return typeof e=="string"&&(e=this.getFunction(e)),tt(is([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){typeof e=="string"&&(e=this.getFunction(e));let r=At(t),i=null,s="",o=null,a=null,l=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch{}break;case 4:{const A=tt(r.slice(0,4)),c=Kye[A];if(c)o=this._abiCoder.decode(c.inputs,r.slice(4)),a=c.name,l=c.signature,c.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const u=this.getError(A);o=this._abiCoder.decode(u.inputs,r.slice(4)),a=u.name,l=u.format()}catch{}break}}return Fn.throwError("call revert exception"+s,Be.errors.CALL_EXCEPTION,{method:e.format(),data:tt(t),errorArgs:o,errorName:a,errorSignature:l,reason:i})}encodeFunctionResult(e,t){return typeof e=="string"&&(e=this.getFunction(e)),tt(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){typeof e=="string"&&(e=this.getEvent(e)),t.length>e.inputs.length&&Fn.throwError("too many arguments for "+e.format(),Be.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?ih(o):s.type==="bytes"?ir(tt(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=Ze.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),Pn(tt(o),32));for(t.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&Fn.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Fn.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){typeof e=="string"&&(e=this.getEvent(e));const r=[],i=[],s=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&Fn.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const l=t[a];if(o.indexed)if(o.type==="string")r.push(ih(l));else if(o.type==="bytes")r.push(ir(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(this._abiCoder.encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:this._abiCoder.encode(i,s),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"&&(e=this.getEvent(e)),r!=null&&!e.anonymous){let h=this.getEventTopic(e);(!It(r[0],32)||r[0].toLowerCase()!==h)&&Fn.throwError("fragment/topic mismatch",Be.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:h,value:r[0]}),r=r.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((h,d)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(xr.fromObject({type:"bytes32",name:h.name})),o.push(!0)):(i.push(h),o.push(!1)):(s.push(h),o.push(!1))});let a=r!=null?this._abiCoder.decode(i,is(r)):null,l=this._abiCoder.decode(s,t,!0),A=[],c=0,u=0;e.inputs.forEach((h,d)=>{if(h.indexed)if(a==null)A[d]=new QE({_isIndexed:!0,hash:null});else if(o[d])A[d]=new QE({_isIndexed:!0,hash:a[u++]});else try{A[d]=a[u++]}catch(p){A[d]=p}else try{A[d]=l[c++]}catch(p){A[d]=p}if(h.name&&A[h.name]==null){const p=A[d];p instanceof Error?Object.defineProperty(A,h.name,{enumerable:!0,get:()=>{throw D3(`property ${JSON.stringify(h.name)}`,p)}}):A[h.name]=p}});for(let h=0;h<A.length;h++){const d=A[h];d instanceof Error&&Object.defineProperty(A,h,{enumerable:!0,get:()=>{throw D3(`index ${h}`,d)}})}return Object.freeze(A)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new Xye({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:Ze.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Yye({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=tt(e);let r=this.getError(t.substring(0,10).toLowerCase());return r?new jye({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const $ye="contracts/5.7.0";var Fu=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const Hn=new Be($ye);function sC(n,e){return Fu(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&Hn.throwArgumentError("invalid address or ENS name","name",t);try{return Vr(t)}catch{}n||Hn.throwError("a provider or signer is needed to resolve ENS names",Be.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield n.resolveName(t);return r==null&&Hn.throwArgumentError("resolver or addr is not configured for ENS name","name",t),r})}function Fw(n,e,t){return Fu(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((r,i)=>Fw(n,Array.isArray(e)?e[i]:e[r.name],r))):t.type==="address"?yield sC(n,e):t.type==="tuple"?yield Fw(n,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(r=>Fw(n,r,t.arrayChildren))):Promise.reject(Hn.makeError("invalid value for array",Be.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function Ib(n,e,t){return Fu(this,void 0,void 0,function*(){let r={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(r=xn(t.pop())),Hn.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),n.signer?r.from?r.from=qn({override:sC(n.signer,r.from),signer:n.signer.getAddress()}).then(A=>Fu(this,void 0,void 0,function*(){return Vr(A.signer)!==A.override&&Hn.throwError("Contract with a Signer cannot override from",Be.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),A.override})):r.from=n.signer.getAddress():r.from&&(r.from=sC(n.provider,r.from));const i=yield qn({args:Fw(n.signer||n.provider,t,e.inputs),address:n.resolvedAddress,overrides:qn(r)||{}}),s=n.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=Ze.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=Ze.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=Ze.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=Ze.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=Ze.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=Su(a.accessList)),o.gasLimit==null&&e.gas!=null){let A=21e3;const c=At(s);for(let u=0;u<c.length;u++)A+=4,c[u]&&(A+=64);o.gasLimit=Ze.from(e.gas).add(A)}if(a.value){const A=Ze.from(a.value);!A.isZero()&&!e.payable&&Hn.throwError("non-payable method cannot override value",Be.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),o.value=A}a.customData&&(o.customData=xn(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData,delete r.ccipReadEnabled;const l=Object.keys(r).filter(A=>r[A]!=null);return l.length&&Hn.throwError(`cannot override ${l.map(A=>JSON.stringify(A)).join(",")}`,Be.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:l}),o})}function qye(n,e){return function(...t){return Ib(n,e,t)}}function ewe(n,e){const t=n.signer||n.provider;return function(...r){return Fu(this,void 0,void 0,function*(){t||Hn.throwError("estimate require a provider or signer",Be.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield Ib(n,e,r);return yield t.estimateGas(i)})}}function twe(n,e){const t=e.wait.bind(e);e.wait=r=>t(r).then(i=>(i.events=i.logs.map(s=>{let o=ls(s),a=null;try{a=n.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(l,A)=>n.interface.decodeEventLog(a.eventFragment,l,A),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>n.provider,o.getBlock=()=>n.provider.getBlock(i.blockHash),o.getTransaction=()=>n.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function HH(n,e,t){const r=n.signer||n.provider;return function(...i){return Fu(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const l=xn(i.pop());l.blockTag!=null&&(s=yield l.blockTag),delete l.blockTag,i.push(l)}n.deployTransaction!=null&&(yield n._deployed(s));const o=yield Ib(n,e,i),a=yield r.call(o,s);try{let l=n.interface.decodeFunctionResult(e,a);return t&&e.outputs.length===1&&(l=l[0]),l}catch(l){throw l.code===Be.errors.CALL_EXCEPTION&&(l.address=n.address,l.args=i,l.transaction=o),l}})}}function nwe(n,e){return function(...t){return Fu(this,void 0,void 0,function*(){n.signer||Hn.throwError("sending a transaction requires a signer",Be.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),n.deployTransaction!=null&&(yield n._deployed());const r=yield Ib(n,e,t),i=yield n.signer.sendTransaction(r);return twe(n,i),i})}}function V3(n,e,t){return e.constant?HH(n,e,t):nwe(n,e)}function zH(n){return n.address&&(n.topics==null||n.topics.length===0)?"*":(n.address||"*")+"@"+(n.topics?n.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Km{constructor(e,t){Re(this,"tag",e),Re(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(r=>t||r.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(r=>{const i=e.slice();return setTimeout(()=>{r.listener.apply(this,i)},0),!r.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class rwe extends Km{constructor(){super("error",null)}}class P3 extends Km{constructor(e,t,r,i){const s={address:e};let o=t.getEventTopic(r);i?(o!==i[0]&&Hn.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(zH(s),s),Re(this,"address",e),Re(this,"interface",t),Re(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,r)=>this.interface.decodeEventLog(this.fragment,t,r);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=Tye(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class O3 extends Km{constructor(e,t){super("*",{address:e}),Re(this,"address",e),Re(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(r,i)=>this.interface.decodeEventLog(t.eventFragment,r,i),e.args=t.args}catch{}}}class iwe{constructor(e,t,r){Re(this,"interface",ss(new.target,"getInterface")(t)),r==null?(Re(this,"provider",null),Re(this,"signer",null)):s0.isSigner(r)?(Re(this,"provider",r.provider||null),Re(this,"signer",r)):n0.isProvider(r)?(Re(this,"provider",r),Re(this,"signer",null)):Hn.throwArgumentError("invalid signer or provider","signerOrProvider",r),Re(this,"callStatic",{}),Re(this,"estimateGas",{}),Re(this,"functions",{}),Re(this,"populateTransaction",{}),Re(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const l=this.interface.events[a];Re(this.filters,a,(...A)=>({address:this.address,topics:this.interface.encodeFilterTopics(l,A)})),o[l.name]||(o[l.name]=[]),o[l.name].push(a)}),Object.keys(o).forEach(a=>{const l=o[a];l.length===1?Re(this.filters,a,this.filters[l[0]]):Hn.warn(`Duplicate definition of ${a} (${l.join(", ")})`)})}if(Re(this,"_runningEvents",{}),Re(this,"_wrappedEmits",{}),e==null&&Hn.throwArgumentError("invalid contract address or ENS name","addressOrName",e),Re(this,"address",e),this.provider)Re(this,"resolvedAddress",sC(this.provider,e));else try{Re(this,"resolvedAddress",Promise.resolve(Vr(e)))}catch{Hn.throwError("provider is required to use ENS name as contract address",Be.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){Hn.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const l=a.name;i[`%${l}`]||(i[`%${l}`]=[]),i[`%${l}`].push(o)}this[o]==null&&Re(this,o,V3(this,a,!0)),this.functions[o]==null&&Re(this.functions,o,V3(this,a,!1)),this.callStatic[o]==null&&Re(this.callStatic,o,HH(this,a,!0)),this.populateTransaction[o]==null&&Re(this.populateTransaction,o,qye(this,a)),this.estimateGas[o]==null&&Re(this.estimateGas,o,ewe(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const l=a[0];try{this[o]==null&&Re(this,o,this[l])}catch{}this.functions[o]==null&&Re(this.functions,o,this.functions[l]),this.callStatic[o]==null&&Re(this.callStatic,o,this.callStatic[l]),this.populateTransaction[o]==null&&Re(this.populateTransaction,o,this.populateTransaction[l]),this.estimateGas[o]==null&&Re(this.estimateGas,o,this.estimateGas[l])})}static getContractAddress(e){return aP(e)}static getInterface(e){return L3.isInterface(e)?e:new L3(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&Hn.throwError("contract not deployed",Be.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Hn.throwError("sending a transactions require a signer",Be.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=xn(e||{});return["from","to"].forEach(function(r){t[r]!=null&&Hn.throwError("cannot override "+r,Be.errors.UNSUPPORTED_OPERATION,{operation:r})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new sS(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&Re(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return QE.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new rwe);if(e==="event")return this._normalizeRunningEvent(new Km("event",null));if(e==="*")return this._normalizeRunningEvent(new O3(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new P3(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const r=e.topics[0];if(typeof r!="string")throw new Error("invalid topic");const i=this.interface.getEvent(r);return this._normalizeRunningEvent(new P3(this.address,this.interface,i,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Km(zH(t),t))}return this._normalizeRunningEvent(new O3(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const i=ls(t);return i.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,r){if(this.provider||Hn.throwError("events require a provider or a signer with a provider",Be.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,t);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,t,r){const i=this._getRunningEvent(e),s=xn(i.filter);return typeof t=="string"&&It(t,32)?(r!=null&&Hn.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),s.blockHash=t):(s.fromBlock=t??0,s.toBlock=r??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),i=r.run(t)>0;return this._checkRunningEvents(r),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,r)=>t+this._runningEvents[r].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let r in this._runningEvents)this._runningEvents[r].listeners().forEach(i=>{t.push(i)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const r in this._runningEvents){const i=this._runningEvents[r];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class Fb extends iwe{}var gQ={exports:{}},jh=typeof Reflect=="object"?Reflect:null,W3=jh&&typeof jh.apply=="function"?jh.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},_w;jh&&typeof jh.ownKeys=="function"?_w=jh.ownKeys:Object.getOwnPropertySymbols?_w=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:_w=function(e){return Object.getOwnPropertyNames(e)};function swe(n){console&&console.warn&&console.warn(n)}var YH=Number.isNaN||function(e){return e!==e};function on(){on.init.call(this)}gQ.exports=on;gQ.exports.once=Awe;on.EventEmitter=on;on.prototype._events=void 0;on.prototype._eventsCount=0;on.prototype._maxListeners=void 0;var Z3=10;function _b(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(on,"defaultMaxListeners",{enumerable:!0,get:function(){return Z3},set:function(n){if(typeof n!="number"||n<0||YH(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");Z3=n}});on.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};on.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||YH(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function XH(n){return n._maxListeners===void 0?on.defaultMaxListeners:n._maxListeners}on.prototype.getMaxListeners=function(){return XH(this)};on.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")W3(l,this,t);else for(var A=l.length,c=e5(l,A),r=0;r<A;++r)W3(c[r],this,t);return!0};function jH(n,e,t,r){var i,s,o;if(_b(t),s=n._events,s===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),s=n._events),o=s[e]),o===void 0)o=s[e]=t,++n._eventsCount;else if(typeof o=="function"?o=s[e]=r?[t,o]:[o,t]:r?o.unshift(t):o.push(t),i=XH(n),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=n,a.type=e,a.count=o.length,swe(a)}return n}on.prototype.addListener=function(e,t){return jH(this,e,t,!1)};on.prototype.on=on.prototype.addListener;on.prototype.prependListener=function(e,t){return jH(this,e,t,!0)};function owe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function KH(n,e,t){var r={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},i=owe.bind(r);return i.listener=t,r.wrapFn=i,i}on.prototype.once=function(e,t){return _b(t),this.on(e,KH(this,e,t)),this};on.prototype.prependOnceListener=function(e,t){return _b(t),this.prependListener(e,KH(this,e,t)),this};on.prototype.removeListener=function(e,t){var r,i,s,o,a;if(_b(t),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():awe(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};on.prototype.off=on.prototype.removeListener;on.prototype.removeAllListeners=function(e){var t,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function $H(n,e,t){var r=n._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?lwe(i):e5(i,i.length)}on.prototype.listeners=function(e){return $H(this,e,!0)};on.prototype.rawListeners=function(e){return $H(this,e,!1)};on.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):qH.call(n,e)};on.prototype.listenerCount=qH;function qH(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}on.prototype.eventNames=function(){return this._eventsCount>0?_w(this._events):[]};function e5(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n[r];return t}function awe(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function lwe(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function Awe(n,e){return new Promise(function(t,r){function i(o){n.removeListener(e,s),r(o)}function s(){typeof n.removeListener=="function"&&n.removeListener("error",i),t([].slice.call(arguments))}t5(n,e,s,{once:!0}),e!=="error"&&cwe(n,i,{once:!0})})}function cwe(n,e,t){typeof n.on=="function"&&t5(n,"error",e,t)}function t5(n,e,t,r){if(typeof n.on=="function")r.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function i(s){r.once&&n.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var uwe=gQ.exports;function dwe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var hwe=function(n){dwe(e,n);function e(r){var i,s=r===void 0?{}:r,o=s.supportedChainIds;return i=n.call(this)||this,i.supportedChainIds=o,i}var t=e.prototype;return t.emitUpdate=function(i){this.emit(Eo.Update,i)},t.emitError=function(i){this.emit(Eo.Error,i)},t.emitDeactivate=function(){this.emit(Eo.Deactivate)},e}(uwe.EventEmitter);function RE(){return RE=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},RE.apply(this,arguments)}function mQ(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function ME(n){return ME=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ME(n)}function oC(n,e){return oC=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},oC(n,e)}function fwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Ew(n,e,t){return fwe()?Ew=Reflect.construct:Ew=function(i,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(i,a),A=new l;return o&&oC(A,o.prototype),A},Ew.apply(null,arguments)}function pwe(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function aC(n){var e=typeof Map=="function"?new Map:void 0;return aC=function(r){if(r===null||!pwe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Ew(r,arguments,ME(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),oC(i,r)},aC(n)}function Uy(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function Rd(n,e){try{var t=n()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}function $o(n){return n.hasOwnProperty("result")?n.result:n}var TI=function(n){mQ(e,n);function e(){var t;return t=n.call(this)||this,t.name=t.constructor.name,t.message="No Ethereum provider was found on window.ethereum.",t}return e}(aC(Error)),gwe=function(n){mQ(e,n);function e(){var t;return t=n.call(this)||this,t.name=t.constructor.name,t.message="The user rejected the request.",t}return e}(aC(Error)),mwe=function(n){mQ(e,n);function e(r){var i;return i=n.call(this,r)||this,i.handleNetworkChanged=i.handleNetworkChanged.bind(Uy(i)),i.handleChainChanged=i.handleChainChanged.bind(Uy(i)),i.handleAccountsChanged=i.handleAccountsChanged.bind(Uy(i)),i.handleClose=i.handleClose.bind(Uy(i)),i}var t=e.prototype;return t.handleChainChanged=function(i){this.emitUpdate({chainId:i,provider:window.ethereum})},t.handleAccountsChanged=function(i){i.length===0?this.emitDeactivate():this.emitUpdate({account:i[0]})},t.handleClose=function(i,s){this.emitDeactivate()},t.handleNetworkChanged=function(i){this.emitUpdate({chainId:i,provider:window.ethereum})},t.activate=function(){try{var i=function(c){if(s)return c;function u(){return RE({provider:window.ethereum},a?{account:a}:{})}var h=function(){if(!a)return Promise.resolve(window.ethereum.enable().then(function(d){return d&&$o(d)[0]})).then(function(d){a=d})}();return h&&h.then?h.then(u):u(h)},s=!1,o=this;if(!window.ethereum)throw new TI;window.ethereum.on&&(window.ethereum.on("chainChanged",o.handleChainChanged),window.ethereum.on("accountsChanged",o.handleAccountsChanged),window.ethereum.on("close",o.handleClose),window.ethereum.on("networkChanged",o.handleNetworkChanged)),window.ethereum.isMetaMask&&(window.ethereum.autoRefreshOnNetworkChange=!1);var a,l=Rd(function(){return Promise.resolve(window.ethereum.send("eth_requestAccounts").then(function(A){return $o(A)[0]})).then(function(A){a=A})},function(A){if(A.code===4001)throw new gwe});return Promise.resolve(l&&l.then?l.then(i):i(l))}catch(A){return Promise.reject(A)}},t.getProvider=function(){try{return Promise.resolve(window.ethereum)}catch(i){return Promise.reject(i)}},t.getChainId=function(){try{var i=function(){function l(){if(!s)try{s=$o(window.ethereum.send({method:"net_version"}))}catch{}return s||(window.ethereum.isDapper?s=$o(window.ethereum.cachedResults.net_version):s=window.ethereum.chainId||window.ethereum.netVersion||window.ethereum.networkVersion||window.ethereum._chainId),s}var A=function(){if(!s){var c=Rd(function(){return Promise.resolve(window.ethereum.send("net_version").then($o)).then(function(u){s=u})},function(){});if(c&&c.then)return c.then(function(){})}}();return A&&A.then?A.then(l):l(A)};if(!window.ethereum)throw new TI;var s,o=Rd(function(){return Promise.resolve(window.ethereum.send("eth_chainId").then($o)).then(function(a){s=a})},function(){});return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(a){return Promise.reject(a)}},t.getAccount=function(){try{var i=function(){function l(){return s||(s=$o(window.ethereum.send({method:"eth_accounts"}))[0]),s}var A=function(){if(!s){var c=Rd(function(){return Promise.resolve(window.ethereum.enable().then(function(u){return $o(u)[0]})).then(function(u){s=u})},function(){});if(c&&c.then)return c.then(function(){})}}();return A&&A.then?A.then(l):l(A)};if(!window.ethereum)throw new TI;var s,o=Rd(function(){return Promise.resolve(window.ethereum.send("eth_accounts").then(function(a){return $o(a)[0]})).then(function(a){s=a})},function(){});return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(a){return Promise.reject(a)}},t.deactivate=function(){window.ethereum&&window.ethereum.removeListener&&(window.ethereum.removeListener("chainChanged",this.handleChainChanged),window.ethereum.removeListener("accountsChanged",this.handleAccountsChanged),window.ethereum.removeListener("close",this.handleClose),window.ethereum.removeListener("networkChanged",this.handleNetworkChanged))},t.isAuthorized=function(){try{return window.ethereum?Promise.resolve(Rd(function(){return Promise.resolve(window.ethereum.send("eth_accounts").then(function(i){return $o(i).length>0}))},function(){return!1})):Promise.resolve(!1)}catch(i){return Promise.reject(i)}},e}(hwe);function vwe(){const{account:n,library:e,activate:t}=h8(),[r,i]=Ce.useState([]),{setViewMode:s}=X.useContext(Ci),{playSound:o}=X.useContext(bs),{isMute:a}=X.useContext(Bs),l=new mwe({supportedChainIds:[137,1,3,4,5,42,97]});Ce.useEffect(()=>{if(n&&e){const h="0x69341F01C2113E2d09Cd4837bbF1786dfbBc41d7",d=["function balanceOf(address owner) external view returns (uint256)","function tokenOfOwnerByIndex(address owner, uint256 index) external view returns (uint256)","function tokenURI(uint256 tokenId) external view returns (string)"],p=new Fb(h,d,e);p.balanceOf(n).then(f=>{const m=[];for(let g=0;g<f;g++)m.push(p.tokenOfOwnerByIndex(n,g));Promise.all(m).then(g=>{const v=g.map(w=>p.tokenURI(w));Promise.all(v).then(w=>{i(w)})})})}},[n,e]);const A=()=>{t(l)},c=h=>{!a&&o("backNextButton"),s(at.APPEARANCE)},u=()=>{s(at.LANDING),!a&&o("backNextButton")};return L.jsxs("div",{className:Nc.container,children:[!n&&L.jsxs("div",{className:Nc.message,children:["Please connect your wallet to load your characters",L.jsx("button",{className:Nc.button,onClick:()=>A(),children:"Connect"})]}),L.jsxs("div",{className:Nc.characterContainer,children:[L.jsx("div",{className:Nc.title,children:"Load Character"}),r.map((h,d)=>L.jsx("div",{className:Nc.character,onClick:()=>{c()},children:JSON.stringify(h)},d))]}),L.jsx("button",{className:Nc.button,onClick:()=>u(),children:"Back"})]})}const ywe="_container_q73cc_1",wwe="_mintContainer_q73cc_6",Bwe="_mainTitleWrap_q73cc_33",Cwe="_mainTitle_q73cc_33",bwe="_mintButtonContainer_q73cc_49",xwe="_mintButton_q73cc_49",Iwe="_genesisText_q73cc_60",Fwe="_required_q73cc_64",_we="_divider_q73cc_68",Ewe="_bottomContainer_q73cc_75",Swe="_mintInfo_q73cc_85",Uwe="_topLine_q73cc_91",Qwe="_bottomLine_q73cc_104",ai={container:ywe,mintContainer:wwe,mainTitleWrap:Bwe,mainTitle:Cwe,mintButtonContainer:bwe,mintButton:xwe,genesisText:Iwe,required:Fwe,divider:_we,bottomContainer:Ewe,mintInfo:Swe,topLine:Uwe,bottomLine:Qwe},Rwe="0x543D43F390b7d681513045e8a85707438c463d80",lC={owner:"0x634B0510C5062CFf8009eAAc2435eB93bc4764ad",address:"0x69341F01C2113E2d09Cd4837bbF1786dfbBc41d7",abi:[{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tokenPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"numberOfTokens",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"mintToken",outputs:[],stateMutability:"payable",type:"function"}]},G3={address:"0x0000000000000aF8FE6E4DE40F4804C90fA8Ea8F",abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AddressMismatch",type:"error"},{inputs:[],name:"AlreadyProxied",type:"error"},{inputs:[],name:"ColdAddressCannotBeTheSameAsHot",type:"error"},{inputs:[],name:"ColdIsAddressZero",type:"error"},{inputs:[],name:"ColdWalletCannotInteractUseHot",type:"error"},{inputs:[],name:"DeliveryCannotBeTheZeroAddress",type:"error"},{inputs:[],name:"DeliveryIsAddressZero",type:"error"},{inputs:[],name:"EthWithdrawFailed",type:"error"},{inputs:[],name:"IncorrectProxyRegisterFee",type:"error"},{inputs:[],name:"MigrationIsAllowedOnceOnly",type:"error"},{inputs:[],name:"NoPaymentPendingForAddress",type:"error"},{inputs:[],name:"NoRecordFoundForAddress",type:"error"},{inputs:[],name:"OnlyHotAddressCanChangeAddress",type:"error"},{inputs:[],name:"ProxyRegisterFeeRequired",type:"error"},{inputs:[],name:"RegisterAddressLocked",type:"error"},{inputs:[],name:"RewardRateIsLocked",type:"error"},{inputs:[],name:"UnknownAmount",type:"error"},{inputs:[],name:"UnrecognisedEPSAPIAmount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!0,internalType:"address",name:"delivery",type:"address"},{indexed:!1,internalType:"address",name:"oldDelivery",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"DeliveryUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"ensReverseRegistrarAddress",type:"address"}],name:"ENSReverseRegistrarSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"erc20",type:"address"},{indexed:!1,internalType:"uint256",name:"erc20Fee_",type:"uint256"}],name:"ERC20FeeUpdated",type:"event"},{anonymous:!1,inputs:[],name:"MigrationComplete",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!0,internalType:"uint64",name:"provider",type:"uint64"}],name:"NominationAccepted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"NominationMade",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!0,internalType:"uint64",name:"provider",type:"uint64"}],name:"ProxyRecordLive",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"enum IEPSProxyRegister.Participant",name:"initiator",type:"uint8"},{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"RecordDeleted",type:"event"},{anonymous:!1,inputs:[],name:"RewardRateLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint96",name:"rewardRate",type:"uint96"}],name:"RewardRateUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newToken",type:"address"}],name:"RewardTokenUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"hot_",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"}],name:"acceptNomination",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"activeEthAddresses",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"bool",name:"checkingHot_",type:"bool"}],name:"addressIsAvailable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"}],name:"beneficiaryBalance",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"id_",type:"uint256"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf1155",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf20",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryOf",outputs:[{internalType:"address",name:"beneficiary_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"coldIsActiveOnRegister",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"coldIsLive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"coldToHot",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"provider_",type:"uint256"}],name:"deleteRecord",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deletionNominalEth",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ensReverseRegistrar",outputs:[{internalType:"contract ENSReverseRegistrar",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"epsAPIBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc1155DelegationRegister",outputs:[{internalType:"contract IERC1155DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc1155DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc20DelegationRegister",outputs:[{internalType:"contract IERC20DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc20DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20PerTransactionFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721DelegationRegister",outputs:[{internalType:"contract IERC721DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses1155",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses20",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses721",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAllAddresses",outputs:[{internalType:"address[]",name:"erc721Addresses_",type:"address[]"},{internalType:"address[]",name:"erc1155Addresses_",type:"address[]"},{internalType:"address[]",name:"erc20Addresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_receivedAddress",type:"address"}],name:"getColdAndDeliveryAddresses",outputs:[{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"bool",name:"isProxied",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"}],name:"getProxyRecordForAddress",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"getProxyRecordForCold",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"getProxyRecordForHot",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"hotIsActiveOnRegister",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"hotIsLive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"hotToRecord",outputs:[{internalType:"uint64",name:"provider",type:"uint64"},{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"bool",name:"feePaid",type:"bool"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"},{internalType:"address",name:"cold_",type:"address"},{internalType:"address",name:"delivery_",type:"address"}],name:"isValidAddresses",outputs:[],stateMutability:"pure",type:"function"},{inputs:[],name:"lockERC1155DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockERC20DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockERC721DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockRewardRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"}],internalType:"struct EPSRegister.MigratedRecord[]",name:"migratedRecords_",type:"tuple[]"}],name:"migration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrationComplete",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"},{internalType:"address",name:"delivery_",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"}],name:"nominate",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"sender_",type:"address"},{internalType:"uint256",name:"erc20Value_",type:"uint256"},{internalType:"bytes",name:"data_",type:"bytes"}],name:"onTokenTransfer",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxyRegisterFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC1155",name:"token_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"}],name:"rescueERC1155",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token_",type:"address"},{internalType:"uint256",name:"amount_",type:"uint256"}],name:"rescueERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC721",name:"token_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"}],name:"rescueERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardRate",outputs:[{internalType:"uint88",name:"",type:"uint88"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardRateLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardToken",outputs:[{internalType:"contract IOAT",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"deleteNominalEth_",type:"uint256"}],name:"setDeletionNominalEth",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"ensName_",type:"string"}],name:"setENSName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"ensReverseRegistrar_",type:"address"}],name:"setENSReverseRegistrar",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc1155DelegationRegister_",type:"address"}],name:"setERC1155DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc20DelegationRegister_",type:"address"}],name:"setERC20DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc20_",type:"address"},{internalType:"uint256",name:"erc20Fee_",type:"uint256"}],name:"setERC20Fee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc721DelegationRegister_",type:"address"}],name:"setERC721DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"count_",type:"uint256"},{internalType:"uint256",name:"air_",type:"uint256"}],name:"setNNumberOfEthAddressesAndAirdropAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"registerFee_",type:"uint256"}],name:"setRegisterFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint88",name:"rewardRate_",type:"uint88"}],name:"setRewardRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"rewardToken_",type:"address"}],name:"setRewardToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"treasuryAddress_",type:"address"}],name:"setTreasuryAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"treasury",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"delivery_",type:"address"},{internalType:"uint256",name:"provider_",type:"uint256"}],name:"updateDeliveryAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token_",type:"address"},{internalType:"uint256",name:"amount_",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount_",type:"uint256"}],name:"withdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}]},Mwe={}.VITE_OPENSEA_KEY,Twe={}.VITE_PINATA_API_KEY,Nwe={}.VITE_PINATA_API_SECRET,NI="0x89";let Qy;async function kwe(){if(Qy!=null)return Qy;const n=new ZP("https://polygon-rpc.com/"),t=await new Fb(lC.address,lC.abi,n).tokenPrice();return Qy=Ze.from(t).mul(1),Qy}function Dwe(n,e){const t={method:"GET",headers:{accept:"application/json","x-api-key":Mwe}};return console.log(t),new Promise((r,i)=>{fetch("https://api.opensea.io/api/v2/chain/ethereum/account/"+n+"/nfts?collection="+e,t).then(s=>{if(s.ok)return s.json();i("Failed to fetch data from Opensea API")}).then(s=>{r(s)}).catch(s=>{i(s)})})}async function vQ(){if(window.ethereum)try{const n=await window.ethereum.request({method:"eth_chainId"});if(parseInt(n,16)==parseInt(NI,16)){const e=await window.ethereum.request({method:"eth_requestAccounts"});return e.length>0?e[0]:""}else try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:NI}]});const e=await window.ethereum.request({method:"eth_requestAccounts"});return e.length>0?e[0]:""}catch(e){console.log("polygon not find:",e);try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x89",chainName:"Polygon Mainnet",rpcUrls:["https://polygon-rpc.com"],nativeCurrency:{name:"Matic",symbol:"MATIC",decimals:18},blockExplorerUrls:["https://polygonscan.com/"]}]}),await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:NI}]});const t=await window.ethereum.request({method:"eth_requestAccounts"});return t.length>0?t[0]:""}catch(t){console.log("Adding polygon chain failed",t)}}}catch{return""}else return""}async function kI(n,e){if(!n)return console.warn("Error saving to pinata: No file data");const t="https://api.pinata.cloud/pinning/pinFileToIPFS";let r=new FormData;return r.append("file",n,e),(await kH.post(t,r,{maxContentLength:"Infinity",maxBodyLength:"Infinity",headers:{"Content-Type":`multipart/form-data; boundary=${r._boundary}`,pinata_api_key:Twe,pinata_secret_api_key:Nwe}})).data}const Lwe=n=>{let e=[];return Object.keys(n).map(t=>{Object.keys(n[t]).length!==0&&e.push({trait_type:t,value:n[t].name})}),e};async function Vwe(n,e,t,r,i){if(!n)throw new Error("No avatar was provided");if(!e)throw new Error("No screenshot was provided");if(!t)throw new Error("No model was provided");const s=await vQ();if(s=="")return"Please Connect Wallet";if(!i||await Pwe(s)){console.log("minting");let a="AvatarImage_"+Date.now()+".png",l=await(async()=>{for(let v=0;v<10;v++)try{return await kI(e,a).catch(B=>{console.error(v,"---",B)})}catch(w){return console.warn(w),w}return"Failed to upload screenshot"})();const A=await ipe(t,n,4096);let c;if(A){let v="AvatarGlb_"+Date.now()+".glb";c=await(async()=>{for(let w=0;w<10;w++)try{return await kI(A,v).catch(C=>(console.error(w,"---",C),"Couldn't save glb to pinata"))}catch(B){return console.warn(B),"Couldn't save glb to pinata"}return"Failed to upload glb"})()}else return"Unable to get glb";const u={name:r||"Avatars",description:"Character Studio Avatars.",image:`ipfs://${l.IpfsHash}`,animation_url:`ipfs://${c.IpfsHash}`,attributes:Lwe(n)},h=JSON.stringify(u),p=`ipfs://${(await kI(new Blob([h]),"AvatarMetadata_"+Date.now()+".json")).IpfsHash}`;let f=await kwe();const m=new aS(window.ethereum).getSigner(),g=new Fb(lC.address,lC.abi,m);try{const v={value:f,from:s};if((await(await g.mintToken(1,p,v)).wait()).transactionHash)return console.log("Mint success!"),"Mint success!"}catch{return"Public Mint failed."}}}const Pwe=async n=>{if(n){const e="0x6e58309CD851A5B124E3A56768a42d12f3B6D104",t=i8("mainnet",{alchemy:{}.VITE_ALCHEMY_API_KEY}),i=await new Fb(G3.address,G3.abi,t).beneficiaryBalanceOf(e,Rwe,1);return parseInt(i)>0?!0:(console.log(`Currently in alpha. You need a genesis pass to mint. 
 Will be public soon!`),!1)}else return console.log("Please connect your wallet"),!1};function Owe(){const{model:n,avatar:e}=X.useContext(lr),{setViewMode:t}=X.useContext(Ci),{playSound:r}=X.useContext(bs),{isMute:i}=X.useContext(Bs),[s,o]=X.useState(""),[a,l]=X.useState(!1),A=()=>{t(at.SAVE),!i&&r("backNextButton")},c=()=>{t(at.CHAT),!i&&r("backNextButton")};function u(){return L.jsxs("div",{className:ai.mainTitleWrap,children:[L.jsx("div",{className:ai.topLine}),L.jsx("div",{className:ai.mainTitle,children:"Mint"})]})}async function h(){!i&&r("backNextButton"),l(!0),o("Please check your wallet");const f=await Vwe(e,null,n,{name:"XXXRestore"}.name);o(f),l(!1),console.log(f)}return L.jsxs("div",{className:ai.container,children:[L.jsx("div",{className:"sectionTitle",children:"Mint Your Character"}),L.jsxs("div",{className:ai.mintContainer,children:[L.jsx(u,{}),L.jsxs("div",{className:ai.mintButtonContainer,children:[L.jsx(sn,{size:16,theme:"light",icon:"polygon",text:a?"Minting...":"Open Edition",className:ai.mintButton,disabled:a,onClick:h,minWidth:220}),L.jsx("div",{className:ai.divider}),L.jsx(sn,{size:16,theme:"light",icon:"tokens",text:"Genesis Edition",className:ai.mintButton,disabled:!0,minWidth:220}),L.jsxs("span",{className:ai.genesisText,children:["(",L.jsx("span",{className:ai.required,children:"Coming Soon!"}),")"]})]}),L.jsxs("span",{className:ai.mintInfo,children:[s," "]})]}),L.jsxs("div",{className:ai.bottomContainer,children:[L.jsx(sn,{theme:"light",text:"Back",size:14,className:ai.buttonLeft,onClick:A}),L.jsx(sn,{theme:"light",text:"Chat",size:14,className:ai.buttonRight,onClick:c})]})]})}const Wwe="_classdisabled_ecnty_1",Zwe="_container_ecnty_6",Gwe="_classContainer_ecnty_14",Jwe="_icon_ecnty_40",Hwe="_name_ecnty_71",zwe="_description_ecnty_80",Ywe="_classFrame_ecnty_85",Xwe="_frameContainer_ecnty_107",jwe="_frame_ecnty_107",Kwe="_image_ecnty_117",$we="_lockedContainer_ecnty_123",qwe="_locked_ecnty_123",eBe="_buttonContainer_ecnty_137",tBe="_buttonLeft_ecnty_146",nBe="_buttonRight_ecnty_150",rBe="_buttonCenter_ecnty_154",iBe="_topLine_ecnty_168",sBe="_bottomLine_ecnty_194",st={classdisabled:Wwe,container:Zwe,classContainer:Gwe,class:"_class_ecnty_1",icon:Jwe,name:Hwe,description:zwe,classFrame:Ywe,frameContainer:Xwe,frame:jwe,image:Kwe,lockedContainer:$we,locked:qwe,buttonContainer:eBe,buttonLeft:tBe,buttonRight:nBe,buttonCenter:rBe,topLine:iBe,bottomLine:sBe};function oBe(){const{t:n}=Ce.useContext(xs),{setViewMode:e,setIsLoading:t,isLoading:r}=X.useContext(Ci),{playSound:i}=X.useContext(bs),{isMute:s}=X.useContext(Bs),{manifest:o,characterManager:a}=X.useContext(lr),[l,A]=Ce.useState([]);Ce.useEffect(()=>{if((o==null?void 0:o.characters)!=null){const d=o.characters.map(p=>({name:p.name,image:p.portrait,description:p.description,manifest:p.manifest,icon:p.icon,format:p.format,disabled:!1}));A(d)}},[o]);const c=()=>{e(at.LANDING),!s&&i("backNextButton")},u=async d=>{t(!0),a.loadManifest(o.characters[d].manifest).then(()=>{e(at.APPEARANCE),a.loadInitialTraits().then(()=>{t(!1)})}),!s&&i("classSelect")},h=()=>{!s&&i("classMouseOver")};return L.jsxs("div",{className:`${st.container} horizontalScroll`,children:[L.jsx("div",{className:"sectionTitle",children:n("pageTitles.chooseClass")}),L.jsx("div",{className:st.vrmOptimizerButton}),L.jsx("div",{className:st.topLine}),L.jsx("div",{className:st.classContainer,children:l.map((d,p)=>L.jsxs("div",{className:d.disabled?st.classdisabled:st.class,onClick:d.disabled?null:()=>u(p),onMouseOver:d.disabled?null:()=>h(),children:[L.jsxs("div",{className:st.classFrame,style:{backgroundImage:`url(${d.image})`},children:[L.jsx("div",{className:st.frameContainer,children:L.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:st.frame})}),L.jsx("div",{className:st.lockedContainer,children:d.disabled&&L.jsx("img",{src:"./assets/icons/locked.svg",className:st.locked})})]}),L.jsx("div",{className:st.icon,children:L.jsx("img",{src:d.icon,alt:d.name})}),L.jsx("div",{className:st.name,children:d.name}),L.jsx("div",{className:st.description,children:d.description})]},p))}),L.jsx("div",{className:st.bottomLine}),L.jsx("div",{className:st.buttonContainer,children:L.jsx(sn,{theme:"light",text:n("callToAction.back"),size:14,className:st.buttonLeft,onClick:c})})]})}function aBe(){const{t:n}=Ce.useContext(xs),{setViewMode:e,setIsLoading:t,isLoading:r}=X.useContext(Ci),{playSound:i}=X.useContext(bs),{isMute:s}=X.useContext(Bs),{manifest:o,characterManager:a}=X.useContext(lr),[l,A]=Ce.useState([]);Ce.useEffect(()=>{if((o==null?void 0:o.characters)!=null){const p=o.characters.map(f=>({name:f.name,image:f.portrait,description:f.description,manifest:f.manifest,icon:f.icon,format:f.format,disabled:!1}));A(p)}},[o]);const c=()=>{e(at.LANDING),!s&&i("backNextButton")},u=async p=>{t(!0),a.loadManifest(o.characters[p].manifest).then(()=>{e(at.BATCHDOWNLOAD),a.loadInitialTraits().then(()=>{t(!1)})}),!s&&i("classSelect")},h=()=>{e(at.BATCHMANIFEST)},d=()=>{!s&&i("classMouseOver")};return L.jsxs("div",{className:`${st.container} horizontalScroll`,children:[L.jsx("div",{className:"sectionTitle",children:n("pageTitles.chooseClass")}),L.jsx("div",{className:st.vrmOptimizerButton}),L.jsx("div",{className:st.topLine}),L.jsxs("div",{className:st.classContainer,children:[l.map((p,f)=>L.jsxs("div",{className:p.disabled?st.classdisabled:st.class,onClick:p.disabled?null:()=>u(f),onMouseOver:p.disabled?null:()=>d(),children:[L.jsxs("div",{className:st.classFrame,style:{backgroundImage:`url(${p.image})`},children:[L.jsx("div",{className:st.frameContainer,children:L.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:st.frame})}),L.jsx("div",{className:st.lockedContainer,children:p.disabled&&L.jsx("img",{src:"./assets/icons/locked.svg",className:st.locked})})]}),L.jsx("div",{className:st.icon,children:L.jsx("img",{src:p.icon,alt:p.name})}),L.jsx("div",{className:st.name,children:p.name}),L.jsx("div",{className:st.description,children:p.description})]},f)),L.jsxs("div",{className:st.class,onClick:()=>h(),onMouseOver:()=>d(),children:[L.jsx("div",{className:st.classFrame,style:{backgroundImage:"url(./assets/media/disabled.png)"},children:L.jsx("div",{className:st.frameContainer,children:L.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:st.frame})})}),L.jsx("div",{className:st.icon,children:L.jsx("img",{src:"./assets/icons/class-neural-hacker.svg",alt:"manifest icons"})}),L.jsx("div",{className:st.name,children:"Manifest"}),L.jsx("div",{className:st.description,children:"Load by manifest"})]},"manifest-load")]}),L.jsx("div",{className:st.bottomLine}),L.jsx("div",{className:st.buttonContainer,children:L.jsx(sn,{theme:"light",text:n("callToAction.back"),size:14,className:st.buttonLeft,onClick:c})})]})}const lBe="_buttonContainer_1ueuk_1",ABe="_button_1ueuk_1",Md={buttonContainer:lBe,button:ABe},J3={}.VITE_OPENSEA_KEY;function cBe(){const{setViewMode:n}=X.useContext(Ci),{playSound:e}=X.useContext(bs),{isMute:t}=X.useContext(Bs),{characterManager:r}=X.useContext(lr),i=()=>{n(at.CREATE),!t&&e("backNextButton")},s=()=>{n(at.CLAIM),!t&&e("backNextButton")},o=()=>{n(at.OPTIMIZER),r.loadOptimizerManifest(),!t&&e("backNextButton")},a=async()=>{await vQ()!=""&&n(at.WALLET),!t&&e("backNextButton")};return L.jsx("div",{className:Md.container,children:L.jsxs("div",{className:Md.buttonContainer,children:[L.jsx("button",{className:Md.button,onClick:i,children:L.jsx("img",{src:"./assets/media/btn_create_character.png"})}),L.jsx("button",{className:Md.button,onClick:s,children:L.jsx("img",{src:"./assets/media/btn_batch_download_character.png"})}),L.jsx("button",{className:Md.button,onClick:o,children:L.jsx("img",{src:"./assets/media/btn_optimize_character.png"})}),J3&&J3!=""&&L.jsx("button",{className:Md.button,onClick:a,children:L.jsx("img",{src:"./assets/media/btn_optimize_character.png"})})]})})}const uBe="_buttonContainer_19n2w_1",dBe="_buttonLeft_19n2w_10",hBe="_buttonRight_19n2w_14",fBe="_buttonCenter_19n2w_18",pBe="_sideMenu_19n2w_33",gBe="_scrollContainer_19n2w_44",mBe="_scrollContainerOptions_19n2w_52",vBe="_bottomLine_19n2w_60",yBe="_editorButton_19n2w_94",wBe="_editorText_19n2w_102",BBe="_selectorContainerPos_19n2w_112",CBe="_selectorButton_19n2w_129",bBe="_selectorColorPickerUI_19n2w_138",xBe="_selectorColorPickerButton_19n2w_144",IBe="_selectorColorPickerImg_19n2w_157",FBe="_uploadContainer_19n2w_163",_Be="_uploadButton_19n2w_176",Tn={buttonContainer:uBe,buttonLeft:dBe,buttonRight:hBe,buttonCenter:fBe,sideMenu:pBe,scrollContainer:gBe,scrollContainerOptions:mBe,bottomLine:vBe,"editor-container":"_editor-container_19n2w_87",editorButton:yBe,editorText:wBe,selectorContainerPos:BBe,"selector-container":"_selector-container_19n2w_123",selectorButton:CBe,selectorColorPickerUI:bBe,selectorColorPickerButton:xBe,selectorColorPickerImg:IBe,uploadContainer:FBe,uploadButton:_Be},EBe="_ContainerPositionTop_v15ql_2",SBe="_ContainerPosition_v15ql_2",UBe="_Container_v15ql_2",QBe="_topLine_v15ql_68",RBe="_traitInfoTitle_v15ql_96",MBe="_flexSelect_v15ql_105",TBe="_flexButtons_v15ql_114",NBe="_flexButtonsTop_v15ql_122",kBe="_optionButtons_v15ql_131",DBe="_optionButtonsSmall_v15ql_143",Kn={ContainerPositionTop:EBe,ContainerPosition:SBe,Container:UBe,"arrow-button":"_arrow-button_v15ql_39","left-button":"_left-button_v15ql_55","right-button":"_right-button_v15ql_62",topLine:QBe,traitInfoTitle:RBe,flexSelect:MBe,flexButtons:TBe,flexButtonsTop:NBe,optionButtons:kBe,optionButtonsSmall:DBe},LBe="/CharacterStudio/assets/randomize-green-4388c12b.png",VBe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyNDo0My0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNiOTBlZjU3LTIwOWItYzQ0Zi05OWNjLTkwYjYxM2Q0MWJiOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2NWQ3ZjJiYi1jMWI3LWI3NDMtYWJiMy0xZjNlYzYzMWIxNDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2NWQ3ZjJiYi1jMWI3LWI3NDMtYWJiMy0xZjNlYzYzMWIxNDQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjY1ZDdmMmJiLWMxYjctYjc0My1hYmIzLTFmM2VjNjMxYjE0NCIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyNDo0My0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozYjkwZWY1Ny0yMDliLWM0NGYtOTljYy05MGI2MTNkNDFiYjgiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6bbHqfAAAFoklEQVR42u2duWtWQRTFo5hGRNAETKFiIQqCSxGto4iCqSLon6BoQJJCEcEFLASbD7QRRcTKNbihoLgUWhj/AItUCi7gVmjikubzPphAiOYts9659xQHAnl5M2/u73vnzHwvbzra7XaHNg1cPrKadJs0bnSHtEbjWGgr/HxSi9SeRWeLYwCAzOIPmk97u0ITpAMAQE7h+0ivaxR+psZIWwBAvoVfSXpsUfiZelZkBgAgx+dtJTIfaPV5W4nLB9p93lZi8oEEn39iWcRPpK2kzaSPlud4mns+0Ojzk6QTpM5p5+skHSP90ZYPtPn8DVJ3ybkXk65oygdafH6UtKlBW72klxrygfT5/BfSLoe2B0xWELt+oMbnHfoxj3RUaj6Q6vNdAfq0SGI+UOvzDn0UlQ/U+7z2fACfV54P4PPK8wF8Xnk+gM8rzwfweeX5AD6vPB/A55XnA/i88nwAn1eeD+DzyvMBfF55PoDPK88H8Hnl+aBup/aQflp26HrZc3hQaT64Zjnmv0h7nQEwT8u24PNJQdjokA9aVXfdqsaH4fNsQNhJ+mxRj2EXAO41bGw/ihUchH0Na3LXBYC7DRs7T1qOQgUr/lLSuZgA3LL0nkukhSiat8IvIF2wrMWtFABMJdHDpLkoolPxD5mxbOcGwJTekfpRzMaF305662H8kwMwpRekDShuZeHXkp57HHc2ACAfhPP5JAB8MB3+jXyQzOeLJfaLpPcpAPhmjlnmcMtSnQ8cfb6w1BXmPF9TAFB8N9Az7dhtpDfIB8F9vvjQ7Jh2rp6K72mCArDkP39z0GHaIjofOPr8lG3OmXHOJawAmHah57F+4G0+P+sHgyUAHm91/fD5cmtkDYDmfODT57MHQFM+COHzYgCQng9C+bwoACTmg9A+LxIACfkgls+LBiDHfBDb51UAkEs+SOHzagDgnA9S+rw6ADjlAw4+rxaAlPmAk8+rByB2PuDm8wAgUj7g6vMAIHA+4O7zACDc7fqk+a/lbJel1QPgIR9k/cUUAAj7SDX7r6YBgP98wM7nAUCa9YOo83kAwC8f5PIACgDwnA+yegQNADQfsGdlb9rK8HoAQMMBK3vryT0AIB+ARyXX9AgAyAfgYck1PQQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlALQAwCSX0+y18V/L/a3BQDJr2cx6UcKAMZz3BRaIADdphZJNo16ldsG0ZIAoP721thY2gmAulvH3iB1AYCot/0rMbaObbJ59KR53UonAAjW907ScTPWUfYOHpK2fXyuADhsHz/kAkBBXMvy5QqjHPNBbgBQnzbW8PnZ1Kq6I9ftxJ6KuWaZrnOaLeQCQDHFJl1zeLPJ3jrtNOnQfIe7AZt8wB0A6sM80lHSH8uxPlPUqm57Nh1cSXps2bnk+YAzANT+AOmT5dg+Ja1q2qZLZ/tIry07m2z9gCMAjj4/Rtpi27aPzg9WrERVrR90awXAzOevWo7dBOmAax98XUg2+YADAGZ2dSyWzwcHIKd8kBoAM5+P6vPRAMghH6QCIKXPRweAcz6IDQAHn08GAMd8EAsATj6fFABu+SAGANx8ngUAXPJBSAC4+jwrADzlg5u2+SAEANx9niUAqfKBTwBy8Xm2AHjKB19Ju2MDkJPPswcgZj5wBSBHn88GgBj5wBaAnH0+OwBC5oOmAEjw+SwBCJUPmrwuXorPZw2Ax3yw3pxnpOS4EXPMOkk+LwKAGflgwrI4p0kPSn5/n3RKms+LAsBDPggh1j4vDgBP+cCHsvB5sQB4ygfifV48AJ7WD8T6vBoAAueDbH1eFQAB8kH2Pq8SAA/5QIzPqwbAIh+I83kAUD8fiPR5APAvCKtJt80dYdz8vEbjWPwFnWtJD/nY2zYAAAAASUVORK5CYII=",PBe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyNDo1MS0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmM2NDY5Y2JiLWFkMzUtYmQ0Ny04M2Q1LWU0NGQ0MTI2YmYwNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMjUyMzZlNS1mYTFiLWUzNDUtOGQzNi0xOWJkMmE0YmYzNTEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMjUyMzZlNS1mYTFiLWUzNDUtOGQzNi0xOWJkMmE0YmYzNTEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjIyNTIzNmU1LWZhMWItZTM0NS04ZDM2LTE5YmQyYTRiZjM1MSIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyNDo1MS0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjNjQ2OWNiYi1hZDM1LWJkNDctODNkNS1lNDRkNDEyNmJmMDYiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6qPgTwAAAEeUlEQVR42u2dX4tNURiH58KfwR1K0USSj6BoIpdydcY0TUMmIy58BPdK/uTCLReaG7kwooQoH4FQyneQMNw53t2cqdOJPfusvfZa77ve5+JX1DlnOns9PM+cqT0T/X5/wtt6D64ekj2W/ZKtDv582OO18Hbwk7I7sv5/dle2DQDKPPzLsp81h7++6n+EKwBQzsGfkH1ucPCj+yI7CQB2D/6A7GXAwY/utewgAJTj+dAV2QdePR+64vrAu+dDV0wf4HnnfYDnnfcBnnfeB3jeeR/geed9gOed9wGed94HeN55H+B5532A5533AZ533gd43nkf4HnnfYDnnfcBnnfeB3jeeR/geed9gOed9wGed94HeN55H+B5530wzsHvkr3hQqvfW9nuLgDYKXvGBVa/F50AMATCHtkKF1rdqn+ce1NG4BHZOy589n2QHc35beBZ2VcOIvm+yRa1fBC0SXZN9oeDSbLrss0aPwqmDxR6PggA+ULnZRfpA9uel+ddkJ0LAWB56AOG/fSBLc/L86ZkrwavsxwCwOgPd6q/T9IHuj0vz9kquzl6djEAqPZDdok+0Ol5ed6S7Ps/XjMaAOurfgh0nD5Q4/lp2aea144OwPDHjvRBXs8/b/A1OgOAPtDj+awA0Af5PZ8dAPogr+fVAEAf5PG8OgDog7SeVwuA1z5I7XnVAHjqg1yeNwFAyX2Q2/OmACitDzR43iQA1vtAk+fNAmCxDzR63jwAFvpAs+eLAUBrH2j3fHEAaOkDK54vEoCcfWDN80UDkLIPrHreBQBd94Flz7sCIEYfPCnM8+4AiNEHZ2RzhXjeLQCt+6AQz7sHoFUfFOB5AIjRB4Y9DwAx+8Cg5wEgVh8Y9TwANNjt6rOADT4nuFHg+waAoc3WvOfZQt8zAAxtruY9zwFA+QDM1LznGQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANsA3AeAYnYvBIBTsvcAYH4fZaeDf328PHmxt3bzRACwteqWNkvBvz5+5MJs6a3dRBEAbOxWdVOrJmc77j1z9smeAoDaVbe1mRrnTENvnnSst3YzZQDQsepGVtMhZ9n29mkW+6AkABp5vjMAjPZBKQA09nynABjsA+sAjO35JAAY6gOrAAR7PikABvrAGgCtPZ8FAMV9YAmAKJ7PBoDSPrAAQFTPZwdAWR9oBqATz6sBQEkfaASgU8+rAyBzH2gDoHPPqwQgYx9oASCZ51UDkKEPcgOQ3PMmAEjYB7kAyOZ5UwAk6IMcAGT1vDkAOu6DlACo8LxZADrqgxQAqPK8eQAi90GXAKj0fDEAROqDrgBQ6/miAIjQB7EBUO/5IgFo0QexADDj+aIBCOiDtgCY87wLAMbogzYAmPS8GwAa9kEIAKY97w6ADfpgHACK8LxbAEb6YHVwqPM1j5sfPOZ3SZ53D8DgcLfLHsoWah6zIHsk2+HluvwF92zupxEV3NQAAAAASUVORK5CYII=",OBe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyMjo0Mi0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmY3YWFkYzZiLWM2ZmEtNjE0OC05YWZkLTgxN2Q1OWRkZTI0MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3NjUxYWZkMi1lOWE3LTk3NGYtYWVhZC03YjFjMjg0NmFhM2YiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3NjUxYWZkMi1lOWE3LTk3NGYtYWVhZC03YjFjMjg0NmFhM2YiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjc2NTFhZmQyLWU5YTctOTc0Zi1hZWFkLTdiMWMyODQ2YWEzZiIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyMjo0Mi0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmN2FhZGM2Yi1jNmZhLTYxNDgtOWFmZC04MTdkNTlkZGUyNDIiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6TWt7cAAAFm0lEQVR42u2dT2xURQCHSTXpQTH0oIJpgfZKi1ETiSK1MV7FbORQNcG0Hmg3oQVjjKARrhDBBDEYMSEYS6kWkxoVAheDiBc9kHBBuaGgMSo1KgTF+pt0JLq6dOe93X3z5zt8SbPdvtmZ37fvvc7Mm5k3MzMzD9KFRkAAGgEBAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABPKO0f3OrWCxWiTViROwQ+8QBcchywL62w77HvLdPdJpjIEAYYd8sHhDPiD3iuLggfhczGblqj/GJ2Cs2il5xCwL4EfoK8bw4LH7MEbQrF8UR8aK4T7QgQPNC77On6jNNDHwuzopXzGdDgMaEvlRsEqc8Cr0ap+2ZoRMB8gdvrulviT8CCP7/7h/GxIMI4B78Q+KjAEOvhrlHeRgB5g7e3FB9GFHwlZi6rUSA/wZ/m3g94uAreVMsRIDZ8J8S3yUU/t98L55OVgDby3Y4weArMf0JXUkJoAo/Ln4i/GtMiyeTEEAV3U3gVXktWgFUuXbxKSHPyWeiIyoBVKG7xXnCrRnTVvdEIYAqsjrniFwjGteciabEuGXKvnbes57ER4MWQBVY60FD/ioOiiHRfb3xfTt/oNu+1/zNLx58/rVBCqAPPlxww52x4/e356jDrfYYXxZcl+GgBCg4/Gk7KaSljvVpsSJcLLBe5SAEMB+04L72JQ08qy0ueKyi7LUABYe/pYn/0r4UiwSxhD9UQIfWuhgkiOGav67A8YzgJeC0n7/+W0KWIOTwj3o0keVoqBKEGv5vYoFHAiwQl0KUIMTwDSM5wuoQg3Ya90HLTvtaR47jjhbcJuWmCOBB+OcyBrTcPgJ25TrHvmKFuDNjGedCkyC08DN9+20vnms5GwM8CzhLEFr45jo73zGUbTnK2+5Y1nxxOSQJQgrf8G4B38gRxzInPWmrcl0E8Ch8w4BDEF11LLfLodwBj9qrnEsAz8I3LHMI4r06ljvpUO4yz9qsnEkA/WG/ZxX5VtxQYwh3NKD8RTWWfaOHzzn0OwmgP2izU5J8qsQJh2/hYMGXnxMePqja5iLAdg8nSk45BPBqA8rf5VD+lIftt81FgC88rMC4QwDvNKD8CYfyxz1sv88RAAG4BHAJSOMmcICbwBw3gRH8G7ioAeUvTObfwEg6giYL6gjqjqIjiK7gzF3Bg6VYuoIjGAwaYTAoruHgywwHFzAc7JkEoxkmamwQfzIhJI4pYd9knK7VU+OUMNOJszxjGV9HPSXMIwlGc0zebLf9BDsrJoWa19pzHHdDEpNCPZHgUrWOjYKmhbclNS3cEwmOeSTAseQeDPFEgq08GsbDoUMFhj+U/MOhnpwJhgmfBSK2ctpniRizx8DSBga/hCVi/JfgZ/FsrUPHjotETbNIVDjLxH1lVwtjmTgWitw8YYXsqWGhyB773gkWiqyPBI/M0f/ebC7YZWHf/0dXsPn5pP2dL5/TLK+7OpbFou8ygzgsAl37gJdpM5aLT5OTeQalQtgwYhchV2V3KlvG9LNlzL8waxA/kdqmUWY7WDaNmm2DtDaNYtu4a9vGDbJxZJobR75RYuPIqlvHfhBx8GYc4X62jk1v82hTFzaPzrh9/H7PNp2qFbPl/duil+3j6zMMu0mcCiD40+IF0RlC2wYhQIUMveJluymUL6GftWsP94XWnsEJUCHDveI5e439oYmBm06sI/abvqKeG1QhQHYZbhIr7fj9HvFxaXYjyDz3D1ftMY6LvfbYq1yfT0SA4qRotcvDm5vJNfZpYXP52CfGxCHLmH3N/G69eMyczkuzW9y3xtxGUQsACAAIAAgACAAIAAgACAAIAAgACAAIAAiAADQCAgACAAIAAgACAAIAAgACAAIAAgACAAIAAkCc/AWkhfX2hx9ZaQAAAABJRU5ErkJggg==",WBe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAATr2AAE69gE6sVc6AAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyMjo0OS0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MTQtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MTQtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhhZWE1MDNlLTM3NGItYmM0NC1iOGNjLTU0OWU2MDUyYzYxMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4YWVhNTAzZS0zNzRiLWJjNDQtYjhjYy01NDllNjA1MmM2MTMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YWVhNTAzZS0zNzRiLWJjNDQtYjhjYy01NDllNjA1MmM2MTMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjhhZWE1MDNlLTM3NGItYmM0NC1iOGNjLTU0OWU2MDUyYzYxMyIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyMjo0OS0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PslPja4AAAbiSURBVHja7Z17iFVFHMc1K80ybc3SP9K21YrubtLDiIJqK5WMpbYt1MpSKiKkba0gtU0rCCpoyxRXSKrNiJIwCmtD0u2JEWFuSC/t2sueghDU2svbd2D+uFzce89rzvxm5vvHB2TX5Zw758PMufN7zJBSqTSEhAsHgQJwECgAoQCEAhAKQCgAoQCEAhAKQCgAoQCEAhAKQCgAoQDVaO1ZOgWsB7+CAbALLAPDOdCeC4CH3AJKg/AlGM/B9lQAPNxG8HcVARS7wQQOuJ8CPFvj4VMCXwXAAx0BfowoACXwUIA68EcMASiBh0vApzEFoASeCdCZQABK4JEAw0A/JQh7H2A8KFKCsHcCxUugX1qnghlgLrgBzNP/bgXTwTRwAjiEAsQf4AkpJChmJYF+0M1gIegGm8Dn4M+I9/If+B68B3rAneBiMIoCCJwJ8DejwZVgBfgQ7E94/Vqor7ybwVJwOgWwKAH+z3HgJrDR4AOvxU7wIDiFAuQoAX7XZumBV0MtF20UID8JnhMoQUlvjXeAw5kQYl6CVUIlUOwD7WBo8BlBhiVYK1gCxU/giuBTwgxL8IJwCRTvg/qgcwINS/CKAxIolgSdFGpYgjcdkeATMDHYrGDDErzriASK+cGmhZuSAD8/DHzskARrg60LMCjBkQkTVWwuCccGWRhiUIIx4DOHJNgLCkFWBhmUYJzer3dFAhWFnOXjRtAosA6cb0ECFaL+xiEJFAt8E6BXf7Cfq22GGJRgIvjBMQlu9yUWsOUgW6M2JGgAvzgmQYfr0cA3quyPm5KgWEWCaXpLVhWtXqVp11k/6uffCpRgoav5AC9GCJvWS0svw99NVhs0OtHkgBAJ5rmWEbQiRqSs3saOYcTPcTzoAv8KkGCGKzmBnQnCpbkvBwlE2GRZAJXQ2ig9K3hOipi52Jmg7D7aLUvwXdbp81k+/DPAPykTJ1yQYKbld4MPJFYGHZPi4bgowaWWZ4I10gTYmHEKlQsS3GxZgtukFIfeayiPzgUJnrYswVm2G0Q0G06mFC2BCuHq7W1bAmxPW8OYNsBjOtJmUoKvwaQMJOiwPAussiVAXoUZJiVQJWW/gR3gSdXrMME4jIzZJ8kEl+UqgC7EzDu33pQElSxPMB6PWRZANeU8KhcBdJKFDeNNxg4q6Yk5JhcJ2CpemZcA6yxX2YibCVQdoIBlQHGhUQHUWiOk+PLEnCRoTJD0YpM+0wJIybS9xmCnknK6YozNGiFjM8eIAAJ2vsqjYlEaSGQxE2yLMT4PCBmfreBkEwK8JuQDfhTjnpsySNUeGfFaiwVlEd1hQoBXhXy4vpjf0femvF6TYzOAMQGkLAHbY763bEt5vWLEJadb0BIwxeeXQJXZOyLGPT+ewTVrSqDi9EIEmO3718DI07K+50JG16xVlfywgHHpzWMj6CkBH/SWmPe8PCcJHrU4JurUltPyEODoDDdakvJ8gvvuyejaRaES3JVnMMj2UvA7GJvgvu/zdCbYYiMc/IRlCRYlvO8GHfrdoY+42+/4TPBXkqk/q4wgm504dsf5NlDlM0zS4VQTM8Ej0nMD0w5ewWKf3kSxews9i0xK8LKEpND5lpeCMx2QwMRyoFLaxkhJC++yKIBay48IcCY4T1pl0GaLErzuSAu7rGaCzJpHZCnAOD0AtiTYEIgEqyUXhxYSHCSZaahYlal5LME7LpSHTxewSdTioQS7TPQSNNUgYoGAeMFbWdTTm+xPEEMCVbvQ4FqLmEVCIodv62PhRjs6E6iS+7NdbRJ1j6AsmQEtw0r1Fg2uBVdrHtJNoqYKlKDZ9TZxSxxqy2atIHWQfYLLfWkUeTcliC3BTN+OjLmVEkSSQEUqr/f1yJgWQb33vGhS4eKRMY36aw0lECCBrfbwdQ6d6uG1BLbPCeimBHYlkHBYxNyU/QUpgScnhmylBPlLIOoUS71Dd4ASBCpAWW1/LyUIVICyQbxE+IFPXkgg/nx7DMSNQvrveCmBeAEqRJA4I+wD57oqgTMCVHTqlvaO0GcrnyA4ASpeFhdn0AAiKTt1HF8dRHWozaSSIAWoGNyTdM/eDQbjDOq0jvX61JCmFPsdoiTwQoCDNG08R7e0Wa1zA7/SGUFRBnqP3pRSp57dD9rAqWBohjOX1TOQvBagysCP1V3DLgCz9IOdDa4DrarSRjWgBMNcPSuZArglpAgJ+DDclaA/i9mKD8JtCTopQNgS9FOAsCVQdZh1FCBcCfakbZPDgXdbgme4BIQrgWoMWaAA/kqgTiz/oooALdwH8F+C4WCZDjwN6L6GL4HJ3AkkFIBQAEIBCAUgFIBQAEIBCAUgFIBQAEIBCAUgFIBQAEIByGD8DzQJyO8fOgE8AAAAAElFTkSuQmCC",ZBe="/CharacterStudio/assets/play-de4238c5.png",GBe="/CharacterStudio/assets/reverse-e35421b8.png",JBe="/CharacterStudio/assets/pause-b6381fd4.png",HBe="/CharacterStudio/assets/fast-forward-0d3ffae5.png",zBe="/CharacterStudio/assets/fast-backward-1f713448.png";function Eb({loadedAnimationName:n,randomize:e}){const{characterManager:t,toggleDebugMode:r,debugMode:i,lookAtManager:s,animationManager:o}=Ce.useContext(lr),[a,l]=Ce.useState(s.userActivated),[A,c]=X.useState((o==null?void 0:o.getCurrentAnimationName())||"");Ce.useEffect(()=>{n==null&&(n="T-Pose"),n!=""&&c(n)},[n]);const u=()=>{r()},h=g=>{g?o.play():o.pause(),o.setSpeed(1)},d=g=>{o.play(),o.setSpeed(g)},p=()=>{s.setActive(!a),o.enableMouseLook(!a),l(!a)},f=async()=>{console.log("play next"),await o.loadNextAnimation(),c(o.getCurrentAnimationName())},m=async()=>{console.log("play prev"),await o.loadPreviousAnimation(),c(o.getCurrentAnimationName())};return L.jsxs("div",{className:Kn.Container,children:[L.jsx("div",{className:Kn.ContainerPositionTop,children:L.jsxs("div",{className:Kn.flexButtonsTop,children:[L.jsx("div",{className:`${Kn.optionButtonsSmall}`,onClick:()=>{d(-2)},children:L.jsx("img",{src:zBe})}),L.jsx("div",{className:`${Kn.optionButtonsSmall}`,onClick:()=>{d(-1)},children:L.jsx("img",{src:GBe})}),L.jsx("div",{className:`${Kn.optionButtonsSmall}`,onClick:()=>{h(!1)},children:L.jsx("img",{src:JBe})}),L.jsx("div",{className:`${Kn.optionButtonsSmall}`,onClick:()=>{h(!0)},children:L.jsx("img",{src:ZBe})}),L.jsx("div",{className:`${Kn.optionButtonsSmall}`,onClick:()=>{d(2)},children:L.jsx("img",{src:HBe})})]})}),L.jsxs("div",{className:Kn.ContainerPosition,children:[L.jsx("div",{className:Kn.topLine}),L.jsxs("div",{className:Kn.flexSelect,children:[L.jsx("div",{className:`${Kn["arrow-button"]} ${Kn["left-button"]}`,onClick:m}),L.jsx("div",{className:Kn.traitInfoTitle,style:{marginBottom:"10px"},children:A}),L.jsx("div",{className:`${Kn["arrow-button"]} ${Kn["right-button"]}`,onClick:f})]}),L.jsxs("div",{className:Kn.flexButtons,children:[e&&L.jsx("div",{className:`${Kn.optionButtons}`,onClick:e,children:L.jsx("img",{src:LBe})}),L.jsx("div",{className:`${Kn.optionButtons}`,onClick:p,children:L.jsx("img",{src:a?WBe:OBe})}),L.jsx("div",{className:`${Kn.optionButtons}`,onClick:u,children:L.jsx("img",{src:i?PBe:VBe})})]})]})]})}const YBe="_tokenBoxWrap_q4pvo_1",XBe="_mask_q4pvo_7",jBe="_timer_q4pvo_31",KBe="_level_q4pvo_42",$Be="_mythic_q4pvo_55",qBe="_epic_q4pvo_60",eCe="_rare_q4pvo_65",tCe="_uncommon_q4pvo_70",nCe="_common_q4pvo_75",rCe="_none_q4pvo_80",iCe="_value_q4pvo_85",sCe="_frame_q4pvo_95",oCe="_emptyIcon_q4pvo_111",aCe="_badge_q4pvo_123",lCe="_frameActive_q4pvo_131",fA={tokenBoxWrap:YBe,mask:XBe,timer:jBe,level:KBe,mythic:$Be,epic:qBe,rare:eCe,uncommon:tCe,common:nCe,none:rCe,value:iCe,frame:sCe,emptyIcon:oCe,badge:aCe,frameActive:lCe,default:"_default_q4pvo_159"},ACe="/CharacterStudio/assets/magic-box-cd45f027.png",DA=n=>{const{size:e,active:t,onClick:r,level:i,icon:s,rarity:o,style:a}=n,[l,A]=X.useState(!1),c=()=>{A(!0)};return L.jsxs("div",{className:fA.tokenBoxWrap,style:{width:e,height:e},onClick:r,children:[t&&L.jsx("div",{className:Xh(fA.frame,fA.frameActive)}),L.jsx("div",{className:Xh(fA.frame,o&&fA[o])}),L.jsx("img",{src:l?ACe:s,className:fA.emptyIcon,style:a,onError:c}),i&&L.jsxs("div",{className:Xh(fA.level,o&&fA[o]),children:["Lv.",i]})]})},cCe="_InformationContainerPos_72ckd_2",uCe="_scrollContainer_72ckd_15",dCe="_traitInfoTitle_72ckd_27",hCe="_traitInfoText_72ckd_35",fCe="_flexSelect_72ckd_62",pCe="_checked_72ckd_119",gCe="_checkmark_72ckd_123",mCe="_checkboxHolder_72ckd_136",qo={InformationContainerPos:cCe,scrollContainer:uCe,traitInfoTitle:dCe,traitInfoText:hCe,"input-box":"_input-box_72ckd_43",flexSelect:fCe,"arrow-button":"_arrow-button_72ckd_70","left-button":"_left-button_72ckd_86","right-button":"_right-button_72ckd_93","anim-button":"_anim-button_72ckd_100","custom-checkbox":"_custom-checkbox_72ckd_105","checkbox-container":"_checkbox-container_72ckd_110",checked:pCe,checkmark:gCe,checkboxHolder:mCe};function yQ({jsonSelectionArray:n,byManifest:e=!1}){const{isLoading:t,setIsLoading:r}=X.useContext(Ci),{characterManager:i}=Ce.useContext(lr),[s,o]=Ce.useState(0),[a,l]=X.useState({}),[A,c]=X.useState([]),u=f=>{i.setManifest(f),i.loadInitialTraits().then(()=>{r(!1)})};Ce.useEffect(()=>{t==!1&&(l(i.getAvatarSelection()),c(Object.keys(i.getAvatarSelection())))},[t]);const h=f=>{i.loadTraitsFromNFTObject(f).then(()=>{r(!1)})},d=async()=>{if(!t)if(r(!0),s>=n.length-1)e?u(n[0]):h(n[0]),o(0);else{const f=s+1;e?u(n[f]):h(n[f]),o(f)}},p=async()=>{if(!t)if(r(!0),s<=0)e?u(n[n.length-1]):h(n[n.length-1]),o(n.length-1);else{const f=s-1;e?u(n[f]):h(n[f]),o(f)}};return(n==null?void 0:n.length)>0?L.jsxs("div",{className:qo.InformationContainerPos,children:[L.jsx(ka,{title:"Trait Selection",width:180,right:20}),L.jsxs("div",{className:qo.scrollContainer,children:[L.jsxs("div",{className:qo.flexSelect,children:[(n==null?void 0:n.length)>1?L.jsx("div",{className:`${qo["arrow-button"]} ${qo["left-button"]}`,onClick:p}):L.jsx(L.Fragment,{}),(n[s].name||n[s].manifestName)&&L.jsx("div",{style:{textAlign:"center",flex:1},children:L.jsx("div",{className:qo.traitInfoTitle,children:e?n[s].manifestName:n[s].name})}),(n==null?void 0:n.length)>1?L.jsx("div",{className:`${qo["arrow-button"]} ${qo["right-button"]}`,onClick:d}):L.jsx(L.Fragment,{})]}),(n[s].thumb||n[s].thumbnail)&&L.jsx("img",{src:n[s].thumb||n[s].thumbnail,alt:"Selection Thumbnail",style:{width:"280px",height:"460px",display:"block",margin:"20px auto 20px"}}),n[s].attributes&&n[s].attributes.map(f=>L.jsx("div",{children:L.jsx("div",{className:qo.traitInfoText,children:`${f.trait_type} : ${f.value}`})},`json:${f.trait_type}_${f.value}`)),e&&A.map(f=>L.jsx("div",{children:L.jsx("div",{className:qo.traitInfoText,children:`${f} : ${a[f].id}`})},`val:${f}`))]})]}):L.jsx(L.Fragment,{})}const H3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAXASURBVHgB7ZzNchNHEMd7ZiWf5WtSCSIfVa5cLN+MTRXrEFPcWJwHwNxys/0Etm+5YZ4Ac0pOIG4EU2WlCgffIm4+pIhS8ADKEQlt07OSKKGdlVdSz64K9++kmhlpR3+Pe3qmuwUgCIIgCIIgCIIgCIIgCIIgCIIgXHAUzCDLflDWRfCVgkVA5aOCkgqhRLMt9cdQW0MhNEBhHRFehW2ondaqDZgxZkZg3w9KrTm9RdJtknBlmAwjeLXTgvuzInbuAi//FPieUrv00gdW1GGnHe7nLXRuAkdmoKDvKYUBOCVfoT3IgSvrP295Gn4nG1sB91S0p4Kvvl34/83rszpkTOYrePXGxj1A3E41GKGGCl/Rq7oXQpM2tma/q0PC0R+orFAt0rfwU32eUgcnzx7tQIZkJrDZxNpFdUwvR6/arqgP59pQrdWqTUj52a0iBCT2nRRi14ttXEv72dOSicCpxCVhFeD+i+fVGkzB8s2g7HVgj77anRHDMhO5ABkwUlzjz4Z4d1ph+5w+jTazzZX1oEYmYTfB5av05rQEjtHgmMjmJoiLqKrFFi5xiTtEPTqcJFPpzc0pTk0EraJNBeqBrU9hZA72wAH03ArZ4+PBk18Socadl39UD8ARzgTuHnfVMT2gPNw3K+L2aHbauOTKT3ZmIrwi7NrENWYhR3Ftm1pJz2lnpsKJwGb10jrdjHXQhhYWQid+6Hnimv8a8hwum0siS19wlY7s4AAnApvVC9aH4U5vl2cljbjmv8a4ZZo8FtsY7N6HsMNug83q9YrqX8ujDk+OHt0FZtKKO9i2un7buGj+8Fha4fPcvjH7CtYeWI/BHS/cB2YmEbffbhvfKkC6I/wY8JsIrW7F2uiUxm0aJhXX0PO7a7H3qJGnv4lgFdiYB6vnQHcLwMg04n6cE1jnVF75ceMSMMIqsAnz2NrNxQ0wwSHu6DmFa8AIr4kILUdiMg9cGweXuIbenGqxDo/3jppVYKXpbnaI3n3u1HCK+3FuYXxuZIevASOsApNdK8faMO7Yj4sLcSM0xCMcmPqInfIRjNDFTnm4jWJSU4VpnIlr5hbaj87AiPPrymlwKa6hrS6wwK7FzQpegTG+Ijp6/BXxuYhr4N3kFMYEVu/HEzhLcZU90tIARrg3ubhNG8OvzHrlWuN1OMMCk1/553Abib6Y5r15mAWXfnsfXhusrS6Zb8L2o96Wh7i9OfmWrqncymFYBQ49y9GTaGkIkt6T14ZmElVs7UnfYVJYBTZXknSaawy3K89+DZint6BsiSkUTuK+VuX3gxFs14D+cMwrT3G7McO4eUDEJ8AMu8Bz7+HA1j4Y88rbz02KGZJ5YM+PcJIXkRTzIuHWQjqe5inuletBoLV6HO9xEzN0clROinnRKn6Qp7hRxEUraw6Ei5ihwYnAJuZlEkwsXeU8j79RRj3YkgHVoYt0guiZ4IgowQQhVSQjC3FXbmzsWssVyHNwtXoNzkoI3v5z1vz6m4V3FCK4OWpcZuIi7tn6yK3cefnMSXZnhNMajTevz04vXV6YJ5GXrQPM6mnDztvGGUvMbhhzWvviux9+U4C/gPXxeP/kqPorOCSTDHfyKv6G5Ox2czjZ/+uoegiMmPIwbTZVSKy5q58cPXaegJ1JhrtJ1x+R5V42OcSr6xvXOMqtUtbdRSUEkAGzVwRDoXSTFDJREUz3+OufM/zzK4IZ5Or14AC12ko5vGZqkcMQ/sOBWy5FURK6yy31apkrtFNV0iRcG5v74qi6DRmSS6WnKS0YUaDigiZdNOyfPHdXKpBELpWepuLyy+8XnmiEefobp454TII58IQFvE2u2FPIgfyLwdPVtY0PU93dtMzMzxkYoXUHtsl03JrUdJCdbmjEhwW60ctqEzuP2fxBjq7YPph6ZFSLaGqSP/VnmyQm3cqZ+uUoDlif1R/kEARBEARBEARBEARBEARBEARBEC48HwDC3eeu0ZVWOQAAAABJRU5ErkJggg==",vCe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFyWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0wMlQxMTo0OTozNy0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMDJUMTE6NTI6MjMtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMDJUMTE6NTI6MjMtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjBmNjkzZGRkLWI4ZWYtZTU0Ni05YWQ2LTRjNzJkOTg4MTJhNCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjBiNWViMTliLTkxMmEtMmI0NS1iOTZlLTliNDUxOGUzZDU4NyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg4ODliZDlkLTAxZjItMTQ0Ni04NDE4LWYyYzNjNjQ1ODNlOCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODg4OWJkOWQtMDFmMi0xNDQ2LTg0MTgtZjJjM2M2NDU4M2U4IiBzdEV2dDp3aGVuPSIyMDI0LTAxLTAyVDExOjQ5OjM3LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjBmNjkzZGRkLWI4ZWYtZTU0Ni05YWQ2LTRjNzJkOTg4MTJhNCIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0wMlQxMTo1MjoyMy0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv0y+4AAAASPSURBVHja7ZxrSBVBFMctyqIgC0ujJ5UFaQpZRC/7YoUVQYUUkZQYQoVfJBF62PtBlhlJoJWSUQRSEYUFUVRiSEWRiokVgZqRWUEv7W3/oQkul53Ze+/OXWfyfPh98e6cPfNjnZ2ZPbshnZ2dIUTwIAkkmAQTJJgEk2CCBJNgEkyQYBKsgFnzlsaCanARZICFIJwEqxN8CXR68R08479lgxVgDAkOTPATC8EiXoLbYB9YDeJJsFzucPDLD8FWvABlIBcsAeNBKAn+K3i+Q7ki3oNycAys4eP8gO4oeH2QBFvxFVSAYj6uR3cHwWdcFGzFG1AF8sBakOBkeNFR8AMbAY/BedDqovQPoA6UgghjBbMxkXfGqpMfwUyv4w90wRV+1GTBCyQdmy5oc8hlwQdMFrxF0KlzkjbDwA8XBSebLPikv1cNfusBml0UHGWy4BpBp0olbYaAjgBlselZHBgNloNGm+PbQF8jBfsgKlrQbnuActMtYoWCBkmb68ZO09hNzEbIUzDCq82GAOXekuSRJGl3xGTBmT6IYXsU10Ahn5cGOo5ukeQxCLQL2q0zWXCBizeq7TZD1XdBu1iTBVe4KPieJI9kQZtPYKCRgpF4P/DW5QVDnkUeUVyk1fH3jd2L4Pu1KqSxMfohH6cbfbmS+eqRTdX22ixYck0WnKZAbguY5BV3o8IrPsVkwWUKBMQIYmcpEjzdZMF3eCfaA4C1OxGkld4/WgPdE9ZBLttLGMwJD4AI0F8SvycfPpwIvkuFJ2LBQyXzWl8pck0wmwuCcWCUZrCcwizy3aZg/E13RTBONMXjpL81g+W0wyvf/YpucHPdEpzbxQ8k7djlkesmRTHbnZRt+Ss4T3PBOz1y3aooZq1rj+1xsoMGCd6sKOYFEhxcwRm6Cf4JvmksuIUXlrz2MeZknQTv5k95e4HZvCM6CU73c5O/w2ldskrBqTbL4K4WnCbIL0MS75GrtWkSwZWSNgkaCK63Wao3CeKd0kVwgaRNmGQT2y3BZ236VS6Il6OL4OOSNpEK9gKcCq6y6VetIF6iLoKbRdt5vNhZhzE4UZDfYkm8kboIZpy2OH4C+KyJYFZsPdUrvzmSWM9dL8D2YZpWw4tBlrEyTz4n1mmaxvK5DvLBTY9NIitKdBT8P63k1pPg4ApOMllwBX+9agZYKamqdCI4x0Ec9vg+0lTBhYLYVxQLznYQp65L3jJSILhN9G4a/j5RseAefBW5gy00/PwvuWSq4GKb+PWqBAviR/Ay2UxeTV8pqObJMlVwiU38hmAKlizl4/iCqIjXIS8yeYgIE8SOUTlEGPkyuKKb3FlB7FskWN00jX1sIxVM4/uxTaqnad1dcNAXGiSYBGsjuJoXvJTy95VJsEJWeZ2/N7hBghWXQXnl0Ae8IsHOGSfJ4zAJdv59HVlR9SYS7JxESR4XSbBzLgtyiKebnDqugrEe248pkveISbAD3oEvtNCglRwJ1l1wvuaC95gueJ/mgnNMFxzFH6m84V841YVW/nZ9DH0/mD4xTpBgEkyQYBJMggkSTIJJMEGCteYPxO/zzCRZDV4AAAAASUVORK5CYII=",yCe="/CharacterStudio/assets/color-palette-71a7a2d4.png";var Ws={},_0={},wCe=typeof pa=="object"&&pa&&pa.Object===Object&&pa,n5=wCe,BCe=n5,CCe=typeof self=="object"&&self&&self.Object===Object&&self,bCe=BCe||CCe||Function("return this")(),Za=bCe,xCe=Za,ICe=xCe.Symbol,E0=ICe,z3=E0,r5=Object.prototype,FCe=r5.hasOwnProperty,_Ce=r5.toString,ng=z3?z3.toStringTag:void 0;function ECe(n){var e=FCe.call(n,ng),t=n[ng];try{n[ng]=void 0;var r=!0}catch{}var i=_Ce.call(n);return r&&(e?n[ng]=t:delete n[ng]),i}var SCe=ECe,UCe=Object.prototype,QCe=UCe.toString;function RCe(n){return QCe.call(n)}var MCe=RCe,Y3=E0,TCe=SCe,NCe=MCe,kCe="[object Null]",DCe="[object Undefined]",X3=Y3?Y3.toStringTag:void 0;function LCe(n){return n==null?n===void 0?DCe:kCe:X3&&X3 in Object(n)?TCe(n):NCe(n)}var Ou=LCe,VCe=Array.isArray,Po=VCe;function PCe(n){return n!=null&&typeof n=="object"}var Yl=PCe,OCe=Ou,WCe=Po,ZCe=Yl,GCe="[object String]";function JCe(n){return typeof n=="string"||!WCe(n)&&ZCe(n)&&OCe(n)==GCe}var HCe=JCe;function zCe(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[n?a:++i];if(t(s[l],l,s)===!1)break}return e}}var YCe=zCe,XCe=YCe,jCe=XCe(),KCe=jCe;function $Ce(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var qCe=$Ce,ebe=Ou,tbe=Yl,nbe="[object Arguments]";function rbe(n){return tbe(n)&&ebe(n)==nbe}var ibe=rbe,j3=ibe,sbe=Yl,i5=Object.prototype,obe=i5.hasOwnProperty,abe=i5.propertyIsEnumerable,lbe=j3(function(){return arguments}())?j3:function(n){return sbe(n)&&obe.call(n,"callee")&&!abe.call(n,"callee")},s5=lbe,AC={exports:{}};function Abe(){return!1}var cbe=Abe;AC.exports;(function(n,e){var t=Za,r=cbe,i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,A=l||r;n.exports=A})(AC,AC.exports);var wQ=AC.exports,ube=9007199254740991,dbe=/^(?:0|[1-9]\d*)$/;function hbe(n,e){var t=typeof n;return e=e??ube,!!e&&(t=="number"||t!="symbol"&&dbe.test(n))&&n>-1&&n%1==0&&n<e}var o5=hbe,fbe=9007199254740991;function pbe(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=fbe}var BQ=pbe,gbe=Ou,mbe=BQ,vbe=Yl,ybe="[object Arguments]",wbe="[object Array]",Bbe="[object Boolean]",Cbe="[object Date]",bbe="[object Error]",xbe="[object Function]",Ibe="[object Map]",Fbe="[object Number]",_be="[object Object]",Ebe="[object RegExp]",Sbe="[object Set]",Ube="[object String]",Qbe="[object WeakMap]",Rbe="[object ArrayBuffer]",Mbe="[object DataView]",Tbe="[object Float32Array]",Nbe="[object Float64Array]",kbe="[object Int8Array]",Dbe="[object Int16Array]",Lbe="[object Int32Array]",Vbe="[object Uint8Array]",Pbe="[object Uint8ClampedArray]",Obe="[object Uint16Array]",Wbe="[object Uint32Array]",pn={};pn[Tbe]=pn[Nbe]=pn[kbe]=pn[Dbe]=pn[Lbe]=pn[Vbe]=pn[Pbe]=pn[Obe]=pn[Wbe]=!0;pn[ybe]=pn[wbe]=pn[Rbe]=pn[Bbe]=pn[Mbe]=pn[Cbe]=pn[bbe]=pn[xbe]=pn[Ibe]=pn[Fbe]=pn[_be]=pn[Ebe]=pn[Sbe]=pn[Ube]=pn[Qbe]=!1;function Zbe(n){return vbe(n)&&mbe(n.length)&&!!pn[gbe(n)]}var Gbe=Zbe;function Jbe(n){return function(e){return n(e)}}var CQ=Jbe,cC={exports:{}};cC.exports;(function(n,e){var t=n5,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();n.exports=a})(cC,cC.exports);var bQ=cC.exports,Hbe=Gbe,zbe=CQ,K3=bQ,$3=K3&&K3.isTypedArray,Ybe=$3?zbe($3):Hbe,a5=Ybe,Xbe=qCe,jbe=s5,Kbe=Po,$be=wQ,qbe=o5,exe=a5,txe=Object.prototype,nxe=txe.hasOwnProperty;function rxe(n,e){var t=Kbe(n),r=!t&&jbe(n),i=!t&&!r&&$be(n),s=!t&&!r&&!i&&exe(n),o=t||r||i||s,a=o?Xbe(n.length,String):[],l=a.length;for(var A in n)(e||nxe.call(n,A))&&!(o&&(A=="length"||i&&(A=="offset"||A=="parent")||s&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||qbe(A,l)))&&a.push(A);return a}var l5=rxe,ixe=Object.prototype;function sxe(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||ixe;return n===t}var xQ=sxe;function oxe(n,e){return function(t){return n(e(t))}}var A5=oxe,axe=A5,lxe=axe(Object.keys,Object),Axe=lxe,cxe=xQ,uxe=Axe,dxe=Object.prototype,hxe=dxe.hasOwnProperty;function fxe(n){if(!cxe(n))return uxe(n);var e=[];for(var t in Object(n))hxe.call(n,t)&&t!="constructor"&&e.push(t);return e}var pxe=fxe;function gxe(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var np=gxe,mxe=Ou,vxe=np,yxe="[object AsyncFunction]",wxe="[object Function]",Bxe="[object GeneratorFunction]",Cxe="[object Proxy]";function bxe(n){if(!vxe(n))return!1;var e=mxe(n);return e==wxe||e==Bxe||e==yxe||e==Cxe}var c5=bxe,xxe=c5,Ixe=BQ;function Fxe(n){return n!=null&&Ixe(n.length)&&!xxe(n)}var Sb=Fxe,_xe=l5,Exe=pxe,Sxe=Sb;function Uxe(n){return Sxe(n)?_xe(n):Exe(n)}var S0=Uxe,Qxe=KCe,Rxe=S0;function Mxe(n,e){return n&&Qxe(n,e,Rxe)}var u5=Mxe;function Txe(n){return n}var d5=Txe,Nxe=d5;function kxe(n){return typeof n=="function"?n:Nxe}var Dxe=kxe,Lxe=u5,Vxe=Dxe;function Pxe(n,e){return n&&Lxe(n,Vxe(e))}var IQ=Pxe,Oxe=A5,Wxe=Oxe(Object.getPrototypeOf,Object),FQ=Wxe,Zxe=Ou,Gxe=FQ,Jxe=Yl,Hxe="[object Object]",zxe=Function.prototype,Yxe=Object.prototype,h5=zxe.toString,Xxe=Yxe.hasOwnProperty,jxe=h5.call(Object);function Kxe(n){if(!Jxe(n)||Zxe(n)!=Hxe)return!1;var e=Gxe(n);if(e===null)return!0;var t=Xxe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&h5.call(t)==jxe}var $xe=Kxe;function qxe(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var f5=qxe;function e1e(){this.__data__=[],this.size=0}var t1e=e1e;function n1e(n,e){return n===e||n!==n&&e!==e}var _Q=n1e,r1e=_Q;function i1e(n,e){for(var t=n.length;t--;)if(r1e(n[t][0],e))return t;return-1}var Ub=i1e,s1e=Ub,o1e=Array.prototype,a1e=o1e.splice;function l1e(n){var e=this.__data__,t=s1e(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():a1e.call(e,t,1),--this.size,!0}var A1e=l1e,c1e=Ub;function u1e(n){var e=this.__data__,t=c1e(e,n);return t<0?void 0:e[t][1]}var d1e=u1e,h1e=Ub;function f1e(n){return h1e(this.__data__,n)>-1}var p1e=f1e,g1e=Ub;function m1e(n,e){var t=this.__data__,r=g1e(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var v1e=m1e,y1e=t1e,w1e=A1e,B1e=d1e,C1e=p1e,b1e=v1e;function rp(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}rp.prototype.clear=y1e;rp.prototype.delete=w1e;rp.prototype.get=B1e;rp.prototype.has=C1e;rp.prototype.set=b1e;var Qb=rp,x1e=Qb;function I1e(){this.__data__=new x1e,this.size=0}var F1e=I1e;function _1e(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var E1e=_1e;function S1e(n){return this.__data__.get(n)}var U1e=S1e;function Q1e(n){return this.__data__.has(n)}var R1e=Q1e,M1e=Za,T1e=M1e["__core-js_shared__"],N1e=T1e,DI=N1e,q3=function(){var n=/[^.]+$/.exec(DI&&DI.keys&&DI.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function k1e(n){return!!q3&&q3 in n}var D1e=k1e,L1e=Function.prototype,V1e=L1e.toString;function P1e(n){if(n!=null){try{return V1e.call(n)}catch{}try{return n+""}catch{}}return""}var p5=P1e,O1e=c5,W1e=D1e,Z1e=np,G1e=p5,J1e=/[\\^$.*+?()[\]{}|]/g,H1e=/^\[object .+?Constructor\]$/,z1e=Function.prototype,Y1e=Object.prototype,X1e=z1e.toString,j1e=Y1e.hasOwnProperty,K1e=RegExp("^"+X1e.call(j1e).replace(J1e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $1e(n){if(!Z1e(n)||W1e(n))return!1;var e=O1e(n)?K1e:H1e;return e.test(G1e(n))}var q1e=$1e;function eIe(n,e){return n==null?void 0:n[e]}var tIe=eIe,nIe=q1e,rIe=tIe;function iIe(n,e){var t=rIe(n,e);return nIe(t)?t:void 0}var Wu=iIe,sIe=Wu,oIe=Za,aIe=sIe(oIe,"Map"),EQ=aIe,lIe=Wu,AIe=lIe(Object,"create"),Rb=AIe,eL=Rb;function cIe(){this.__data__=eL?eL(null):{},this.size=0}var uIe=cIe;function dIe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var hIe=dIe,fIe=Rb,pIe="__lodash_hash_undefined__",gIe=Object.prototype,mIe=gIe.hasOwnProperty;function vIe(n){var e=this.__data__;if(fIe){var t=e[n];return t===pIe?void 0:t}return mIe.call(e,n)?e[n]:void 0}var yIe=vIe,wIe=Rb,BIe=Object.prototype,CIe=BIe.hasOwnProperty;function bIe(n){var e=this.__data__;return wIe?e[n]!==void 0:CIe.call(e,n)}var xIe=bIe,IIe=Rb,FIe="__lodash_hash_undefined__";function _Ie(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=IIe&&e===void 0?FIe:e,this}var EIe=_Ie,SIe=uIe,UIe=hIe,QIe=yIe,RIe=xIe,MIe=EIe;function ip(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ip.prototype.clear=SIe;ip.prototype.delete=UIe;ip.prototype.get=QIe;ip.prototype.has=RIe;ip.prototype.set=MIe;var TIe=ip,tL=TIe,NIe=Qb,kIe=EQ;function DIe(){this.size=0,this.__data__={hash:new tL,map:new(kIe||NIe),string:new tL}}var LIe=DIe;function VIe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var PIe=VIe,OIe=PIe;function WIe(n,e){var t=n.__data__;return OIe(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Mb=WIe,ZIe=Mb;function GIe(n){var e=ZIe(this,n).delete(n);return this.size-=e?1:0,e}var JIe=GIe,HIe=Mb;function zIe(n){return HIe(this,n).get(n)}var YIe=zIe,XIe=Mb;function jIe(n){return XIe(this,n).has(n)}var KIe=jIe,$Ie=Mb;function qIe(n,e){var t=$Ie(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var eFe=qIe,tFe=LIe,nFe=JIe,rFe=YIe,iFe=KIe,sFe=eFe;function sp(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}sp.prototype.clear=tFe;sp.prototype.delete=nFe;sp.prototype.get=rFe;sp.prototype.has=iFe;sp.prototype.set=sFe;var SQ=sp,oFe=Qb,aFe=EQ,lFe=SQ,AFe=200;function cFe(n,e){var t=this.__data__;if(t instanceof oFe){var r=t.__data__;if(!aFe||r.length<AFe-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new lFe(r)}return t.set(n,e),this.size=t.size,this}var uFe=cFe,dFe=Qb,hFe=F1e,fFe=E1e,pFe=U1e,gFe=R1e,mFe=uFe;function op(n){var e=this.__data__=new dFe(n);this.size=e.size}op.prototype.clear=hFe;op.prototype.delete=fFe;op.prototype.get=pFe;op.prototype.has=gFe;op.prototype.set=mFe;var UQ=op,vFe="__lodash_hash_undefined__";function yFe(n){return this.__data__.set(n,vFe),this}var wFe=yFe;function BFe(n){return this.__data__.has(n)}var CFe=BFe,bFe=SQ,xFe=wFe,IFe=CFe;function uC(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new bFe;++e<t;)this.add(n[e])}uC.prototype.add=uC.prototype.push=xFe;uC.prototype.has=IFe;var FFe=uC;function _Fe(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}var EFe=_Fe;function SFe(n,e){return n.has(e)}var UFe=SFe,QFe=FFe,RFe=EFe,MFe=UFe,TFe=1,NFe=2;function kFe(n,e,t,r,i,s){var o=t&TFe,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var A=s.get(n),c=s.get(e);if(A&&c)return A==e&&c==n;var u=-1,h=!0,d=t&NFe?new QFe:void 0;for(s.set(n,e),s.set(e,n);++u<a;){var p=n[u],f=e[u];if(r)var m=o?r(f,p,u,e,n,s):r(p,f,u,n,e,s);if(m!==void 0){if(m)continue;h=!1;break}if(d){if(!RFe(e,function(g,v){if(!MFe(d,v)&&(p===g||i(p,g,t,r,s)))return d.push(v)})){h=!1;break}}else if(!(p===f||i(p,f,t,r,s))){h=!1;break}}return s.delete(n),s.delete(e),h}var g5=kFe,DFe=Za,LFe=DFe.Uint8Array,m5=LFe;function VFe(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}var PFe=VFe;function OFe(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var WFe=OFe,nL=E0,rL=m5,ZFe=_Q,GFe=g5,JFe=PFe,HFe=WFe,zFe=1,YFe=2,XFe="[object Boolean]",jFe="[object Date]",KFe="[object Error]",$Fe="[object Map]",qFe="[object Number]",e_e="[object RegExp]",t_e="[object Set]",n_e="[object String]",r_e="[object Symbol]",i_e="[object ArrayBuffer]",s_e="[object DataView]",iL=nL?nL.prototype:void 0,LI=iL?iL.valueOf:void 0;function o_e(n,e,t,r,i,s,o){switch(t){case s_e:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case i_e:return!(n.byteLength!=e.byteLength||!s(new rL(n),new rL(e)));case XFe:case jFe:case qFe:return ZFe(+n,+e);case KFe:return n.name==e.name&&n.message==e.message;case e_e:case n_e:return n==e+"";case $Fe:var a=JFe;case t_e:var l=r&zFe;if(a||(a=HFe),n.size!=e.size&&!l)return!1;var A=o.get(n);if(A)return A==e;r|=YFe,o.set(n,e);var c=GFe(a(n),a(e),r,i,s,o);return o.delete(n),c;case r_e:if(LI)return LI.call(n)==LI.call(e)}return!1}var a_e=o_e;function l_e(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var v5=l_e,A_e=v5,c_e=Po;function u_e(n,e,t){var r=e(n);return c_e(n)?r:A_e(r,t(n))}var y5=u_e;function d_e(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}var h_e=d_e;function f_e(){return[]}var w5=f_e,p_e=h_e,g_e=w5,m_e=Object.prototype,v_e=m_e.propertyIsEnumerable,sL=Object.getOwnPropertySymbols,y_e=sL?function(n){return n==null?[]:(n=Object(n),p_e(sL(n),function(e){return v_e.call(n,e)}))}:g_e,QQ=y_e,w_e=y5,B_e=QQ,C_e=S0;function b_e(n){return w_e(n,C_e,B_e)}var B5=b_e,oL=B5,x_e=1,I_e=Object.prototype,F_e=I_e.hasOwnProperty;function __e(n,e,t,r,i,s){var o=t&x_e,a=oL(n),l=a.length,A=oL(e),c=A.length;if(l!=c&&!o)return!1;for(var u=l;u--;){var h=a[u];if(!(o?h in e:F_e.call(e,h)))return!1}var d=s.get(n),p=s.get(e);if(d&&p)return d==e&&p==n;var f=!0;s.set(n,e),s.set(e,n);for(var m=o;++u<l;){h=a[u];var g=n[h],v=e[h];if(r)var w=o?r(v,g,h,e,n,s):r(g,v,h,n,e,s);if(!(w===void 0?g===v||i(g,v,t,r,s):w)){f=!1;break}m||(m=h=="constructor")}if(f&&!m){var B=n.constructor,C=e.constructor;B!=C&&"constructor"in n&&"constructor"in e&&!(typeof B=="function"&&B instanceof B&&typeof C=="function"&&C instanceof C)&&(f=!1)}return s.delete(n),s.delete(e),f}var E_e=__e,S_e=Wu,U_e=Za,Q_e=S_e(U_e,"DataView"),R_e=Q_e,M_e=Wu,T_e=Za,N_e=M_e(T_e,"Promise"),k_e=N_e,D_e=Wu,L_e=Za,V_e=D_e(L_e,"Set"),P_e=V_e,O_e=Wu,W_e=Za,Z_e=O_e(W_e,"WeakMap"),G_e=Z_e,TE=R_e,NE=EQ,kE=k_e,DE=P_e,LE=G_e,C5=Ou,ap=p5,aL="[object Map]",J_e="[object Object]",lL="[object Promise]",AL="[object Set]",cL="[object WeakMap]",uL="[object DataView]",H_e=ap(TE),z_e=ap(NE),Y_e=ap(kE),X_e=ap(DE),j_e=ap(LE),Oc=C5;(TE&&Oc(new TE(new ArrayBuffer(1)))!=uL||NE&&Oc(new NE)!=aL||kE&&Oc(kE.resolve())!=lL||DE&&Oc(new DE)!=AL||LE&&Oc(new LE)!=cL)&&(Oc=function(n){var e=C5(n),t=e==J_e?n.constructor:void 0,r=t?ap(t):"";if(r)switch(r){case H_e:return uL;case z_e:return aL;case Y_e:return lL;case X_e:return AL;case j_e:return cL}return e});var Tb=Oc,VI=UQ,K_e=g5,$_e=a_e,q_e=E_e,dL=Tb,hL=Po,fL=wQ,eEe=a5,tEe=1,pL="[object Arguments]",gL="[object Array]",Ry="[object Object]",nEe=Object.prototype,mL=nEe.hasOwnProperty;function rEe(n,e,t,r,i,s){var o=hL(n),a=hL(e),l=o?gL:dL(n),A=a?gL:dL(e);l=l==pL?Ry:l,A=A==pL?Ry:A;var c=l==Ry,u=A==Ry,h=l==A;if(h&&fL(n)){if(!fL(e))return!1;o=!0,c=!1}if(h&&!c)return s||(s=new VI),o||eEe(n)?K_e(n,e,t,r,i,s):$_e(n,e,l,t,r,i,s);if(!(t&tEe)){var d=c&&mL.call(n,"__wrapped__"),p=u&&mL.call(e,"__wrapped__");if(d||p){var f=d?n.value():n,m=p?e.value():e;return s||(s=new VI),i(f,m,t,r,s)}}return h?(s||(s=new VI),q_e(n,e,t,r,i,s)):!1}var iEe=rEe,sEe=iEe,vL=Yl;function b5(n,e,t,r,i){return n===e?!0:n==null||e==null||!vL(n)&&!vL(e)?n!==n&&e!==e:sEe(n,e,t,r,b5,i)}var x5=b5,oEe=UQ,aEe=x5,lEe=1,AEe=2;function cEe(n,e,t,r){var i=t.length,s=i,o=!r;if(n==null)return!s;for(n=Object(n);i--;){var a=t[i];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<s;){a=t[i];var l=a[0],A=n[l],c=a[1];if(o&&a[2]){if(A===void 0&&!(l in n))return!1}else{var u=new oEe;if(r)var h=r(A,c,l,n,e,u);if(!(h===void 0?aEe(c,A,lEe|AEe,r,u):h))return!1}}return!0}var uEe=cEe,dEe=np;function hEe(n){return n===n&&!dEe(n)}var I5=hEe,fEe=I5,pEe=S0;function gEe(n){for(var e=pEe(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,fEe(i)]}return e}var mEe=gEe;function vEe(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}var F5=vEe,yEe=uEe,wEe=mEe,BEe=F5;function CEe(n){var e=wEe(n);return e.length==1&&e[0][2]?BEe(e[0][0],e[0][1]):function(t){return t===n||yEe(t,n,e)}}var bEe=CEe,xEe=Ou,IEe=Yl,FEe="[object Symbol]";function _Ee(n){return typeof n=="symbol"||IEe(n)&&xEe(n)==FEe}var RQ=_Ee,EEe=Po,SEe=RQ,UEe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,QEe=/^\w*$/;function REe(n,e){if(EEe(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||SEe(n)?!0:QEe.test(n)||!UEe.test(n)||e!=null&&n in Object(e)}var MQ=REe,_5=SQ,MEe="Expected a function";function TQ(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(MEe);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(TQ.Cache||_5),t}TQ.Cache=_5;var TEe=TQ,NEe=TEe,kEe=500;function DEe(n){var e=NEe(n,function(r){return t.size===kEe&&t.clear(),r}),t=e.cache;return e}var LEe=DEe,VEe=LEe,PEe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,OEe=/\\(\\)?/g,WEe=VEe(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(PEe,function(t,r,i,s){e.push(i?s.replace(OEe,"$1"):r||t)}),e}),ZEe=WEe,yL=E0,GEe=f5,JEe=Po,HEe=RQ,zEe=1/0,wL=yL?yL.prototype:void 0,BL=wL?wL.toString:void 0;function E5(n){if(typeof n=="string")return n;if(JEe(n))return GEe(n,E5)+"";if(HEe(n))return BL?BL.call(n):"";var e=n+"";return e=="0"&&1/n==-zEe?"-0":e}var YEe=E5,XEe=YEe;function jEe(n){return n==null?"":XEe(n)}var KEe=jEe,$Ee=Po,qEe=MQ,eSe=ZEe,tSe=KEe;function nSe(n,e){return $Ee(n)?n:qEe(n,e)?[n]:eSe(tSe(n))}var S5=nSe,rSe=RQ,iSe=1/0;function sSe(n){if(typeof n=="string"||rSe(n))return n;var e=n+"";return e=="0"&&1/n==-iSe?"-0":e}var Nb=sSe,oSe=S5,aSe=Nb;function lSe(n,e){e=oSe(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[aSe(e[t++])];return t&&t==r?n:void 0}var U5=lSe,ASe=U5;function cSe(n,e,t){var r=n==null?void 0:ASe(n,e);return r===void 0?t:r}var uSe=cSe;function dSe(n,e){return n!=null&&e in Object(n)}var hSe=dSe,fSe=S5,pSe=s5,gSe=Po,mSe=o5,vSe=BQ,ySe=Nb;function wSe(n,e,t){e=fSe(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=ySe(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&vSe(i)&&mSe(o,i)&&(gSe(n)||pSe(n)))}var BSe=wSe,CSe=hSe,bSe=BSe;function xSe(n,e){return n!=null&&bSe(n,e,CSe)}var ISe=xSe,FSe=x5,_Se=uSe,ESe=ISe,SSe=MQ,USe=I5,QSe=F5,RSe=Nb,MSe=1,TSe=2;function NSe(n,e){return SSe(n)&&USe(e)?QSe(RSe(n),e):function(t){var r=_Se(t,n);return r===void 0&&r===e?ESe(t,n):FSe(e,r,MSe|TSe)}}var kSe=NSe;function DSe(n){return function(e){return e==null?void 0:e[n]}}var LSe=DSe,VSe=U5;function PSe(n){return function(e){return VSe(e,n)}}var OSe=PSe,WSe=LSe,ZSe=OSe,GSe=MQ,JSe=Nb;function HSe(n){return GSe(n)?WSe(JSe(n)):ZSe(n)}var zSe=HSe,YSe=bEe,XSe=kSe,jSe=d5,KSe=Po,$Se=zSe;function qSe(n){return typeof n=="function"?n:n==null?jSe:typeof n=="object"?KSe(n)?XSe(n[0],n[1]):YSe(n):$Se(n)}var eUe=qSe,tUe=Sb;function nUe(n,e){return function(t,r){if(t==null)return t;if(!tUe(t))return n(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return t}}var rUe=nUe,iUe=u5,sUe=rUe,oUe=sUe(iUe),aUe=oUe,lUe=aUe,AUe=Sb;function cUe(n,e){var t=-1,r=AUe(n)?Array(n.length):[];return lUe(n,function(i,s,o){r[++t]=e(i,s,o)}),r}var uUe=cUe,dUe=f5,hUe=eUe,fUe=uUe,pUe=Po;function gUe(n,e){var t=pUe(n)?dUe:fUe;return t(n,hUe(e))}var mUe=gUe;Object.defineProperty(_0,"__esModule",{value:!0});_0.flattenNames=void 0;var vUe=HCe,yUe=kb(vUe),wUe=IQ,BUe=kb(wUe),CUe=$xe,bUe=kb(CUe),xUe=mUe,IUe=kb(xUe);function kb(n){return n&&n.__esModule?n:{default:n}}var FUe=_0.flattenNames=function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[];return(0,IUe.default)(e,function(r){Array.isArray(r)?n(r).map(function(i){return t.push(i)}):(0,bUe.default)(r)?(0,BUe.default)(r,function(i,s){i===!0&&t.push(s),t.push(s+"-"+i)}):(0,yUe.default)(r)&&t.push(r)}),t};_0.default=FUe;var U0={};function _Ue(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var EUe=_Ue,SUe=Wu,UUe=function(){try{var n=SUe(Object,"defineProperty");return n({},"",{}),n}catch{}}(),QUe=UUe,CL=QUe;function RUe(n,e,t){e=="__proto__"&&CL?CL(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var Q5=RUe,MUe=Q5,TUe=_Q,NUe=Object.prototype,kUe=NUe.hasOwnProperty;function DUe(n,e,t){var r=n[e];(!(kUe.call(n,e)&&TUe(r,t))||t===void 0&&!(e in n))&&MUe(n,e,t)}var R5=DUe,LUe=R5,VUe=Q5;function PUe(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),i?VUe(t,a,l):LUe(t,a,l)}return t}var Db=PUe,OUe=Db,WUe=S0;function ZUe(n,e){return n&&OUe(e,WUe(e),n)}var GUe=ZUe;function JUe(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var HUe=JUe,zUe=np,YUe=xQ,XUe=HUe,jUe=Object.prototype,KUe=jUe.hasOwnProperty;function $Ue(n){if(!zUe(n))return XUe(n);var e=YUe(n),t=[];for(var r in n)r=="constructor"&&(e||!KUe.call(n,r))||t.push(r);return t}var qUe=$Ue,eQe=l5,tQe=qUe,nQe=Sb;function rQe(n){return nQe(n)?eQe(n,!0):tQe(n)}var NQ=rQe,iQe=Db,sQe=NQ;function oQe(n,e){return n&&iQe(e,sQe(e),n)}var aQe=oQe,dC={exports:{}};dC.exports;(function(n,e){var t=Za,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s?t.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(A,c){if(c)return A.slice();var u=A.length,h=a?a(u):new A.constructor(u);return A.copy(h),h}n.exports=l})(dC,dC.exports);var lQe=dC.exports;function AQe(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var cQe=AQe,uQe=Db,dQe=QQ;function hQe(n,e){return uQe(n,dQe(n),e)}var fQe=hQe,pQe=v5,gQe=FQ,mQe=QQ,vQe=w5,yQe=Object.getOwnPropertySymbols,wQe=yQe?function(n){for(var e=[];n;)pQe(e,mQe(n)),n=gQe(n);return e}:vQe,M5=wQe,BQe=Db,CQe=M5;function bQe(n,e){return BQe(n,CQe(n),e)}var xQe=bQe,IQe=y5,FQe=M5,_Qe=NQ;function EQe(n){return IQe(n,_Qe,FQe)}var SQe=EQe,UQe=Object.prototype,QQe=UQe.hasOwnProperty;function RQe(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&QQe.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var MQe=RQe,bL=m5;function TQe(n){var e=new n.constructor(n.byteLength);return new bL(e).set(new bL(n)),e}var kQ=TQe,NQe=kQ;function kQe(n,e){var t=e?NQe(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var DQe=kQe,LQe=/\w*$/;function VQe(n){var e=new n.constructor(n.source,LQe.exec(n));return e.lastIndex=n.lastIndex,e}var PQe=VQe,xL=E0,IL=xL?xL.prototype:void 0,FL=IL?IL.valueOf:void 0;function OQe(n){return FL?Object(FL.call(n)):{}}var WQe=OQe,ZQe=kQ;function GQe(n,e){var t=e?ZQe(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var JQe=GQe,HQe=kQ,zQe=DQe,YQe=PQe,XQe=WQe,jQe=JQe,KQe="[object Boolean]",$Qe="[object Date]",qQe="[object Map]",eRe="[object Number]",tRe="[object RegExp]",nRe="[object Set]",rRe="[object String]",iRe="[object Symbol]",sRe="[object ArrayBuffer]",oRe="[object DataView]",aRe="[object Float32Array]",lRe="[object Float64Array]",ARe="[object Int8Array]",cRe="[object Int16Array]",uRe="[object Int32Array]",dRe="[object Uint8Array]",hRe="[object Uint8ClampedArray]",fRe="[object Uint16Array]",pRe="[object Uint32Array]";function gRe(n,e,t){var r=n.constructor;switch(e){case sRe:return HQe(n);case KQe:case $Qe:return new r(+n);case oRe:return zQe(n,t);case aRe:case lRe:case ARe:case cRe:case uRe:case dRe:case hRe:case fRe:case pRe:return jQe(n,t);case qQe:return new r;case eRe:case rRe:return new r(n);case tRe:return YQe(n);case nRe:return new r;case iRe:return XQe(n)}}var mRe=gRe,vRe=np,_L=Object.create,yRe=function(){function n(){}return function(e){if(!vRe(e))return{};if(_L)return _L(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),wRe=yRe,BRe=wRe,CRe=FQ,bRe=xQ;function xRe(n){return typeof n.constructor=="function"&&!bRe(n)?BRe(CRe(n)):{}}var IRe=xRe,FRe=Tb,_Re=Yl,ERe="[object Map]";function SRe(n){return _Re(n)&&FRe(n)==ERe}var URe=SRe,QRe=URe,RRe=CQ,EL=bQ,SL=EL&&EL.isMap,MRe=SL?RRe(SL):QRe,TRe=MRe,NRe=Tb,kRe=Yl,DRe="[object Set]";function LRe(n){return kRe(n)&&NRe(n)==DRe}var VRe=LRe,PRe=VRe,ORe=CQ,UL=bQ,QL=UL&&UL.isSet,WRe=QL?ORe(QL):PRe,ZRe=WRe,GRe=UQ,JRe=EUe,HRe=R5,zRe=GUe,YRe=aQe,XRe=lQe,jRe=cQe,KRe=fQe,$Re=xQe,qRe=B5,e2e=SQe,t2e=Tb,n2e=MQe,r2e=mRe,i2e=IRe,s2e=Po,o2e=wQ,a2e=TRe,l2e=np,A2e=ZRe,c2e=S0,u2e=NQ,d2e=1,h2e=2,f2e=4,T5="[object Arguments]",p2e="[object Array]",g2e="[object Boolean]",m2e="[object Date]",v2e="[object Error]",N5="[object Function]",y2e="[object GeneratorFunction]",w2e="[object Map]",B2e="[object Number]",k5="[object Object]",C2e="[object RegExp]",b2e="[object Set]",x2e="[object String]",I2e="[object Symbol]",F2e="[object WeakMap]",_2e="[object ArrayBuffer]",E2e="[object DataView]",S2e="[object Float32Array]",U2e="[object Float64Array]",Q2e="[object Int8Array]",R2e="[object Int16Array]",M2e="[object Int32Array]",T2e="[object Uint8Array]",N2e="[object Uint8ClampedArray]",k2e="[object Uint16Array]",D2e="[object Uint32Array]",un={};un[T5]=un[p2e]=un[_2e]=un[E2e]=un[g2e]=un[m2e]=un[S2e]=un[U2e]=un[Q2e]=un[R2e]=un[M2e]=un[w2e]=un[B2e]=un[k5]=un[C2e]=un[b2e]=un[x2e]=un[I2e]=un[T2e]=un[N2e]=un[k2e]=un[D2e]=!0;un[v2e]=un[N5]=un[F2e]=!1;function Sw(n,e,t,r,i,s){var o,a=e&d2e,l=e&h2e,A=e&f2e;if(t&&(o=i?t(n,r,i,s):t(n)),o!==void 0)return o;if(!l2e(n))return n;var c=s2e(n);if(c){if(o=n2e(n),!a)return jRe(n,o)}else{var u=t2e(n),h=u==N5||u==y2e;if(o2e(n))return XRe(n,a);if(u==k5||u==T5||h&&!i){if(o=l||h?{}:i2e(n),!a)return l?$Re(n,YRe(o,n)):KRe(n,zRe(o,n))}else{if(!un[u])return i?n:{};o=r2e(n,u,a)}}s||(s=new GRe);var d=s.get(n);if(d)return d;s.set(n,o),A2e(n)?n.forEach(function(m){o.add(Sw(m,e,t,m,n,s))}):a2e(n)&&n.forEach(function(m,g){o.set(g,Sw(m,e,t,g,n,s))});var p=A?l?e2e:qRe:l?u2e:c2e,f=c?void 0:p(n);return JRe(f||n,function(m,g){f&&(g=m,m=n[g]),HRe(o,g,Sw(m,e,t,g,n,s))}),o}var L2e=Sw,V2e=L2e,P2e=1,O2e=4;function W2e(n){return V2e(n,P2e|O2e)}var Z2e=W2e;Object.defineProperty(U0,"__esModule",{value:!0});U0.mergeClasses=void 0;var G2e=IQ,J2e=D5(G2e),H2e=Z2e,z2e=D5(H2e),Y2e=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function D5(n){return n&&n.__esModule?n:{default:n}}var X2e=U0.mergeClasses=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=e.default&&(0,z2e.default)(e.default)||{};return t.map(function(i){var s=e[i];return s&&(0,J2e.default)(s,function(o,a){r[a]||(r[a]={}),r[a]=Y2e({},r[a],s[a])}),i}),r};U0.default=X2e;var Q0={};Object.defineProperty(Q0,"__esModule",{value:!0});Q0.autoprefix=void 0;var j2e=IQ,RL=$2e(j2e),K2e=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function $2e(n){return n&&n.__esModule?n:{default:n}}var q2e={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var r=t[e];return r||{extend:e}}},eMe=Q0.autoprefix=function(e){var t={};return(0,RL.default)(e,function(r,i){var s={};(0,RL.default)(r,function(o,a){var l=q2e[a];l?s=K2e({},s,l(o)):s[a]=o}),t[i]=s}),t};Q0.default=eMe;var R0={};Object.defineProperty(R0,"__esModule",{value:!0});R0.hover=void 0;var tMe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nMe=Ce,PI=rMe(nMe);function rMe(n){return n&&n.__esModule?n:{default:n}}function iMe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ML(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function sMe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var oMe=R0.hover=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){sMe(i,r);function i(){var s,o,a,l;iMe(this,i);for(var A=arguments.length,c=Array(A),u=0;u<A;u++)c[u]=arguments[u];return l=(o=(a=ML(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(c))),a),a.state={hover:!1},a.handleMouseOver=function(){return a.setState({hover:!0})},a.handleMouseOut=function(){return a.setState({hover:!1})},a.render=function(){return PI.default.createElement(t,{onMouseOver:a.handleMouseOver,onMouseOut:a.handleMouseOut},PI.default.createElement(e,tMe({},a.props,a.state)))},o),ML(a,l)}return i}(PI.default.Component)};R0.default=oMe;var M0={};Object.defineProperty(M0,"__esModule",{value:!0});M0.active=void 0;var aMe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lMe=Ce,OI=AMe(lMe);function AMe(n){return n&&n.__esModule?n:{default:n}}function cMe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function TL(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function uMe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var dMe=M0.active=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){uMe(i,r);function i(){var s,o,a,l;cMe(this,i);for(var A=arguments.length,c=Array(A),u=0;u<A;u++)c[u]=arguments[u];return l=(o=(a=TL(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(c))),a),a.state={active:!1},a.handleMouseDown=function(){return a.setState({active:!0})},a.handleMouseUp=function(){return a.setState({active:!1})},a.render=function(){return OI.default.createElement(t,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp},OI.default.createElement(e,aMe({},a.props,a.state)))},o),TL(a,l)}return i}(OI.default.Component)};M0.default=dMe;var DQ={};Object.defineProperty(DQ,"__esModule",{value:!0});var hMe=function(e,t){var r={},i=function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[o]=a};return e===0&&i("first-child"),e===t-1&&i("last-child"),(e===0||e%2===0)&&i("even"),Math.abs(e%2)===1&&i("odd"),i("nth-child",e),r};DQ.default=hMe;Object.defineProperty(Ws,"__esModule",{value:!0});Ws.ReactCSS=Ws.loop=Ws.handleActive=LQ=Ws.handleHover=Ws.hover=void 0;var fMe=_0,pMe=lp(fMe),gMe=U0,mMe=lp(gMe),vMe=Q0,yMe=lp(vMe),wMe=R0,L5=lp(wMe),BMe=M0,CMe=lp(BMe),bMe=DQ,xMe=lp(bMe);function lp(n){return n&&n.__esModule?n:{default:n}}Ws.hover=L5.default;var LQ=Ws.handleHover=L5.default;Ws.handleActive=CMe.default;Ws.loop=xMe.default;var IMe=Ws.ReactCSS=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var s=(0,pMe.default)(r),o=(0,mMe.default)(e,s);return(0,yMe.default)(o)},ht=Ws.default=IMe,FMe=function(e,t,r,i,s){var o=s.clientWidth,a=s.clientHeight,l=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,A=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=l-(s.getBoundingClientRect().left+window.pageXOffset),u=A-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var h=void 0;if(u<0?h=0:u>a?h=1:h=Math.round(u*100/a)/100,t.a!==h)return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}else{var d=void 0;if(c<0?d=0:c>o?d=1:d=Math.round(c*100/o)/100,i!==d)return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}return null},WI={},_Me=function(e,t,r,i){if(typeof document>"u"&&!i)return null;var s=i?new i:document.createElement("canvas");s.width=r*2,s.height=r*2;var o=s.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,s.width,s.height),o.fillStyle=t,o.fillRect(0,0,r,r),o.translate(r,r),o.fillRect(0,0,r,r),s.toDataURL()):null},EMe=function(e,t,r,i){var s=e+"-"+t+"-"+r+(i?"-server":"");if(WI[s])return WI[s];var o=_Me(e,t,r,i);return WI[s]=o,o},NL=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ap=function(e){var t=e.white,r=e.grey,i=e.size,s=e.renderers,o=e.borderRadius,a=e.boxShadow,l=e.children,A=ht({default:{grid:{borderRadius:o,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+EMe(t,r,i,s.canvas)+") center left"}}});return Ce.isValidElement(l)?X.cloneElement(l,NL({},l.props,{style:NL({},l.props.style,A.grid)})):X.createElement("div",{style:A.grid})};Ap.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var SMe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},UMe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function QMe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function kL(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function RMe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var VQ=function(n){RMe(e,n);function e(){var t,r,i,s;QMe(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(r=(i=kL(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i),i.handleChange=function(A){var c=FMe(A,i.props.hsl,i.props.direction,i.props.a,i.container);c&&typeof i.props.onChange=="function"&&i.props.onChange(c,A)},i.handleMouseDown=function(A){i.handleChange(A),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},r),kL(i,s)}return UMe(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var r=this,i=this.props.rgb,s=ht({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:SMe({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return X.createElement("div",{style:s.alpha},X.createElement("div",{style:s.checkboard},X.createElement(Ap,{renderers:this.props.renderers})),X.createElement("div",{style:s.gradient}),X.createElement("div",{style:s.container,ref:function(a){return r.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},X.createElement("div",{style:s.pointer},this.props.pointer?X.createElement(this.props.pointer,this.props):X.createElement("div",{style:s.slider}))))}}]),e}(Ce.PureComponent||Ce.Component),MMe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function TMe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NMe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function kMe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function DMe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var LMe=1,V5=38,VMe=40,PMe=[V5,VMe],OMe=function(e){return PMe.indexOf(e)>-1},WMe=function(e){return Number(String(e).replace(/%/g,""))},ZMe=1,Tt=function(n){DMe(e,n);function e(t){NMe(this,e);var r=kMe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(i){r.setUpdatedValue(i.target.value,i)},r.handleKeyDown=function(i){var s=WMe(i.target.value);if(!isNaN(s)&&OMe(i.keyCode)){var o=r.getArrowOffset(),a=i.keyCode===V5?s+o:s-o;r.setUpdatedValue(a,i)}},r.handleDrag=function(i){if(r.props.dragLabel){var s=Math.round(r.props.value+i.movementX);s>=0&&s<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(s),i)}},r.handleMouseDown=function(i){r.props.dragLabel&&(i.preventDefault(),r.handleDrag(i),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(t.value).toUpperCase(),blurValue:String(t.value).toUpperCase()},r.inputId="rc-editable-input-"+ZMe++,r}return MMe(e,[{key:"componentDidUpdate",value:function(r,i){this.props.value!==this.state.value&&(r.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(r){return TMe({},this.props.label,r)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||LMe}},{key:"setUpdatedValue",value:function(r,i){var s=this.props.label?this.getValueObjectWithLabel(r):r;this.props.onChange&&this.props.onChange(s,i),this.setState({value:r})}},{key:"render",value:function(){var r=this,i=ht({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return X.createElement("div",{style:i.wrap},X.createElement("input",{id:this.inputId,style:i.input,ref:function(o){return r.input=o},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?X.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(Ce.PureComponent||Ce.Component),GMe=function(e,t,r,i){var s=i.clientWidth,o=i.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,A=a-(i.getBoundingClientRect().left+window.pageXOffset),c=l-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var u=void 0;if(c<0)u=359;else if(c>o)u=0;else{var h=-(c*100/o)+100;u=360*h/100}if(r.h!==u)return{h:u,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var d=void 0;if(A<0)d=0;else if(A>s)d=359;else{var p=A*100/s;d=360*p/100}if(r.h!==d)return{h:d,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null},JMe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function HMe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function DL(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function zMe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var cp=function(n){zMe(e,n);function e(){var t,r,i,s;HMe(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(r=(i=DL(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i),i.handleChange=function(A){var c=GMe(A,i.props.direction,i.props.hsl,i.container);c&&typeof i.props.onChange=="function"&&i.props.onChange(c,A)},i.handleMouseDown=function(A){i.handleChange(A),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},r),DL(i,s)}return JMe(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.direction,s=i===void 0?"horizontal":i,o=ht({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return X.createElement("div",{style:o.hue},X.createElement("div",{className:"hue-"+s,style:o.container,ref:function(l){return r.container=l},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},X.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),X.createElement("div",{style:o.pointer},this.props.pointer?X.createElement(this.props.pointer,this.props):X.createElement("div",{style:o.slider}))))}}]),e}(Ce.PureComponent||Ce.Component),P5={exports:{}},YMe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",XMe=YMe,jMe=XMe;function O5(){}function W5(){}W5.resetWarningCache=O5;var KMe=function(){function n(r,i,s,o,a,l){if(l!==jMe){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:W5,resetWarningCache:O5};return t.PropTypes=t,t};P5.exports=KMe();var $Me=P5.exports;const Oe=Zl($Me);function qMe(){this.__data__=[],this.size=0}function T0(n,e){return n===e||n!==n&&e!==e}function Lb(n,e){for(var t=n.length;t--;)if(T0(n[t][0],e))return t;return-1}var eTe=Array.prototype,tTe=eTe.splice;function nTe(n){var e=this.__data__,t=Lb(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():tTe.call(e,t,1),--this.size,!0}function rTe(n){var e=this.__data__,t=Lb(e,n);return t<0?void 0:e[t][1]}function iTe(n){return Lb(this.__data__,n)>-1}function sTe(n,e){var t=this.__data__,r=Lb(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Xl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Xl.prototype.clear=qMe;Xl.prototype.delete=nTe;Xl.prototype.get=rTe;Xl.prototype.has=iTe;Xl.prototype.set=sTe;function oTe(){this.__data__=new Xl,this.size=0}function aTe(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function lTe(n){return this.__data__.get(n)}function ATe(n){return this.__data__.has(n)}var cTe=typeof global=="object"&&global&&global.Object===Object&&global;const Z5=cTe;var uTe=typeof self=="object"&&self&&self.Object===Object&&self,dTe=Z5||uTe||Function("return this")();const Oo=dTe;var hTe=Oo.Symbol;const cc=hTe;var G5=Object.prototype,fTe=G5.hasOwnProperty,pTe=G5.toString,rg=cc?cc.toStringTag:void 0;function gTe(n){var e=fTe.call(n,rg),t=n[rg];try{n[rg]=void 0;var r=!0}catch{}var i=pTe.call(n);return r&&(e?n[rg]=t:delete n[rg]),i}var mTe=Object.prototype,vTe=mTe.toString;function yTe(n){return vTe.call(n)}var wTe="[object Null]",BTe="[object Undefined]",LL=cc?cc.toStringTag:void 0;function Zu(n){return n==null?n===void 0?BTe:wTe:LL&&LL in Object(n)?gTe(n):yTe(n)}function so(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var CTe="[object AsyncFunction]",bTe="[object Function]",xTe="[object GeneratorFunction]",ITe="[object Proxy]";function PQ(n){if(!so(n))return!1;var e=Zu(n);return e==bTe||e==xTe||e==CTe||e==ITe}var FTe=Oo["__core-js_shared__"];const ZI=FTe;var VL=function(){var n=/[^.]+$/.exec(ZI&&ZI.keys&&ZI.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function _Te(n){return!!VL&&VL in n}var ETe=Function.prototype,STe=ETe.toString;function Gu(n){if(n!=null){try{return STe.call(n)}catch{}try{return n+""}catch{}}return""}var UTe=/[\\^$.*+?()[\]{}|]/g,QTe=/^\[object .+?Constructor\]$/,RTe=Function.prototype,MTe=Object.prototype,TTe=RTe.toString,NTe=MTe.hasOwnProperty,kTe=RegExp("^"+TTe.call(NTe).replace(UTe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function DTe(n){if(!so(n)||_Te(n))return!1;var e=PQ(n)?kTe:QTe;return e.test(Gu(n))}function LTe(n,e){return n==null?void 0:n[e]}function Ju(n,e){var t=LTe(n,e);return DTe(t)?t:void 0}var VTe=Ju(Oo,"Map");const $m=VTe;var PTe=Ju(Object,"create");const qm=PTe;function OTe(){this.__data__=qm?qm(null):{},this.size=0}function WTe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var ZTe="__lodash_hash_undefined__",GTe=Object.prototype,JTe=GTe.hasOwnProperty;function HTe(n){var e=this.__data__;if(qm){var t=e[n];return t===ZTe?void 0:t}return JTe.call(e,n)?e[n]:void 0}var zTe=Object.prototype,YTe=zTe.hasOwnProperty;function XTe(n){var e=this.__data__;return qm?e[n]!==void 0:YTe.call(e,n)}var jTe="__lodash_hash_undefined__";function KTe(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=qm&&e===void 0?jTe:e,this}function _u(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}_u.prototype.clear=OTe;_u.prototype.delete=WTe;_u.prototype.get=HTe;_u.prototype.has=XTe;_u.prototype.set=KTe;function $Te(){this.size=0,this.__data__={hash:new _u,map:new($m||Xl),string:new _u}}function qTe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Vb(n,e){var t=n.__data__;return qTe(e)?t[typeof e=="string"?"string":"hash"]:t.map}function eNe(n){var e=Vb(this,n).delete(n);return this.size-=e?1:0,e}function tNe(n){return Vb(this,n).get(n)}function nNe(n){return Vb(this,n).has(n)}function rNe(n,e){var t=Vb(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function jl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}jl.prototype.clear=$Te;jl.prototype.delete=eNe;jl.prototype.get=tNe;jl.prototype.has=nNe;jl.prototype.set=rNe;var iNe=200;function sNe(n,e){var t=this.__data__;if(t instanceof Xl){var r=t.__data__;if(!$m||r.length<iNe-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new jl(r)}return t.set(n,e),this.size=t.size,this}function Ia(n){var e=this.__data__=new Xl(n);this.size=e.size}Ia.prototype.clear=oTe;Ia.prototype.delete=aTe;Ia.prototype.get=lTe;Ia.prototype.has=ATe;Ia.prototype.set=sNe;var oNe=function(){try{var n=Ju(Object,"defineProperty");return n({},"",{}),n}catch{}}();const hC=oNe;function OQ(n,e,t){e=="__proto__"&&hC?hC(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function VE(n,e,t){(t!==void 0&&!T0(n[e],t)||t===void 0&&!(e in n))&&OQ(n,e,t)}function aNe(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[n?a:++i];if(t(s[l],l,s)===!1)break}return e}}var lNe=aNe();const J5=lNe;var H5=typeof exports=="object"&&exports&&!exports.nodeType&&exports,PL=H5&&typeof module=="object"&&module&&!module.nodeType&&module,ANe=PL&&PL.exports===H5,OL=ANe?Oo.Buffer:void 0,WL=OL?OL.allocUnsafe:void 0;function cNe(n,e){if(e)return n.slice();var t=n.length,r=WL?WL(t):new n.constructor(t);return n.copy(r),r}var uNe=Oo.Uint8Array;const fC=uNe;function dNe(n){var e=new n.constructor(n.byteLength);return new fC(e).set(new fC(n)),e}function hNe(n,e){var t=e?dNe(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}function fNe(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var ZL=Object.create,pNe=function(){function n(){}return function(e){if(!so(e))return{};if(ZL)return ZL(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const gNe=pNe;function z5(n,e){return function(t){return n(e(t))}}var mNe=z5(Object.getPrototypeOf,Object);const Y5=mNe;var vNe=Object.prototype;function WQ(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||vNe;return n===t}function yNe(n){return typeof n.constructor=="function"&&!WQ(n)?gNe(Y5(n)):{}}function uc(n){return n!=null&&typeof n=="object"}var wNe="[object Arguments]";function GL(n){return uc(n)&&Zu(n)==wNe}var X5=Object.prototype,BNe=X5.hasOwnProperty,CNe=X5.propertyIsEnumerable,bNe=GL(function(){return arguments}())?GL:function(n){return uc(n)&&BNe.call(n,"callee")&&!CNe.call(n,"callee")};const pC=bNe;var xNe=Array.isArray;const ms=xNe;var INe=9007199254740991;function ZQ(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=INe}function up(n){return n!=null&&ZQ(n.length)&&!PQ(n)}function FNe(n){return uc(n)&&up(n)}function _Ne(){return!1}var j5=typeof exports=="object"&&exports&&!exports.nodeType&&exports,JL=j5&&typeof module=="object"&&module&&!module.nodeType&&module,ENe=JL&&JL.exports===j5,HL=ENe?Oo.Buffer:void 0,SNe=HL?HL.isBuffer:void 0,UNe=SNe||_Ne;const gC=UNe;var QNe="[object Object]",RNe=Function.prototype,MNe=Object.prototype,K5=RNe.toString,TNe=MNe.hasOwnProperty,NNe=K5.call(Object);function kNe(n){if(!uc(n)||Zu(n)!=QNe)return!1;var e=Y5(n);if(e===null)return!0;var t=TNe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&K5.call(t)==NNe}var DNe="[object Arguments]",LNe="[object Array]",VNe="[object Boolean]",PNe="[object Date]",ONe="[object Error]",WNe="[object Function]",ZNe="[object Map]",GNe="[object Number]",JNe="[object Object]",HNe="[object RegExp]",zNe="[object Set]",YNe="[object String]",XNe="[object WeakMap]",jNe="[object ArrayBuffer]",KNe="[object DataView]",$Ne="[object Float32Array]",qNe="[object Float64Array]",eke="[object Int8Array]",tke="[object Int16Array]",nke="[object Int32Array]",rke="[object Uint8Array]",ike="[object Uint8ClampedArray]",ske="[object Uint16Array]",oke="[object Uint32Array]",gn={};gn[$Ne]=gn[qNe]=gn[eke]=gn[tke]=gn[nke]=gn[rke]=gn[ike]=gn[ske]=gn[oke]=!0;gn[DNe]=gn[LNe]=gn[jNe]=gn[VNe]=gn[KNe]=gn[PNe]=gn[ONe]=gn[WNe]=gn[ZNe]=gn[GNe]=gn[JNe]=gn[HNe]=gn[zNe]=gn[YNe]=gn[XNe]=!1;function ake(n){return uc(n)&&ZQ(n.length)&&!!gn[Zu(n)]}function lke(n){return function(e){return n(e)}}var $5=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$g=$5&&typeof module=="object"&&module&&!module.nodeType&&module,Ake=$g&&$g.exports===$5,GI=Ake&&Z5.process,cke=function(){try{var n=$g&&$g.require&&$g.require("util").types;return n||GI&&GI.binding&&GI.binding("util")}catch{}}();const zL=cke;var YL=zL&&zL.isTypedArray,uke=YL?lke(YL):ake;const GQ=uke;function PE(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var dke=Object.prototype,hke=dke.hasOwnProperty;function fke(n,e,t){var r=n[e];(!(hke.call(n,e)&&T0(r,t))||t===void 0&&!(e in n))&&OQ(n,e,t)}function pke(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),i?OQ(t,a,l):fke(t,a,l)}return t}function gke(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var mke=9007199254740991,vke=/^(?:0|[1-9]\d*)$/;function JQ(n,e){var t=typeof n;return e=e??mke,!!e&&(t=="number"||t!="symbol"&&vke.test(n))&&n>-1&&n%1==0&&n<e}var yke=Object.prototype,wke=yke.hasOwnProperty;function q5(n,e){var t=ms(n),r=!t&&pC(n),i=!t&&!r&&gC(n),s=!t&&!r&&!i&&GQ(n),o=t||r||i||s,a=o?gke(n.length,String):[],l=a.length;for(var A in n)(e||wke.call(n,A))&&!(o&&(A=="length"||i&&(A=="offset"||A=="parent")||s&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||JQ(A,l)))&&a.push(A);return a}function Bke(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var Cke=Object.prototype,bke=Cke.hasOwnProperty;function xke(n){if(!so(n))return Bke(n);var e=WQ(n),t=[];for(var r in n)r=="constructor"&&(e||!bke.call(n,r))||t.push(r);return t}function ez(n){return up(n)?q5(n,!0):xke(n)}function Ike(n){return pke(n,ez(n))}function Fke(n,e,t,r,i,s,o){var a=PE(n,t),l=PE(e,t),A=o.get(l);if(A){VE(n,t,A);return}var c=s?s(a,l,t+"",n,e,o):void 0,u=c===void 0;if(u){var h=ms(l),d=!h&&gC(l),p=!h&&!d&&GQ(l);c=l,h||d||p?ms(a)?c=a:FNe(a)?c=fNe(a):d?(u=!1,c=cNe(l,!0)):p?(u=!1,c=hNe(l,!0)):c=[]:kNe(l)||pC(l)?(c=a,pC(a)?c=Ike(a):(!so(a)||PQ(a))&&(c=yNe(l))):u=!1}u&&(o.set(l,c),i(c,l,r,s,o),o.delete(l)),VE(n,t,c)}function tz(n,e,t,r,i){n!==e&&J5(e,function(s,o){if(i||(i=new Ia),so(s))Fke(n,e,o,t,tz,r,i);else{var a=r?r(PE(n,o),s,o+"",n,e,i):void 0;a===void 0&&(a=s),VE(n,o,a)}},ez)}function Pb(n){return n}function _ke(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var XL=Math.max;function Eke(n,e,t){return e=XL(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=XL(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),_ke(n,this,a)}}function Ske(n){return function(){return n}}var Uke=hC?function(n,e){return hC(n,"toString",{configurable:!0,enumerable:!1,value:Ske(e),writable:!0})}:Pb;const Qke=Uke;var Rke=800,Mke=16,Tke=Date.now;function Nke(n){var e=0,t=0;return function(){var r=Tke(),i=Mke-(r-t);if(t=r,i>0){if(++e>=Rke)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var kke=Nke(Qke);const Dke=kke;function Lke(n,e){return Dke(Eke(n,e,Pb),n+"")}function Vke(n,e,t){if(!so(t))return!1;var r=typeof e;return(r=="number"?up(t)&&JQ(e,t.length):r=="string"&&e in t)?T0(t[e],n):!1}function Pke(n){return Lke(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(i--,s):void 0,o&&Vke(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})}var Oke=Pke(function(n,e,t){tz(n,e,t)});const Oi=Oke;var N0=function(e){var t=e.zDepth,r=e.radius,i=e.background,s=e.children,o=e.styles,a=o===void 0?{}:o,l=ht(Oi({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+t*4+"px rgba(0,0,0,.24)",borderRadius:r,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":t===1});return X.createElement("div",{style:l.wrap},X.createElement("div",{style:l.bg}),X.createElement("div",{style:l.content},s))};N0.propTypes={background:Oe.string,zDepth:Oe.oneOf([0,1,2,3,4,5]),radius:Oe.number,styles:Oe.object};N0.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var Wke=function(){return Oo.Date.now()};const JI=Wke;var Zke=/\s/;function Gke(n){for(var e=n.length;e--&&Zke.test(n.charAt(e)););return e}var Jke=/^\s+/;function Hke(n){return n&&n.slice(0,Gke(n)+1).replace(Jke,"")}var zke="[object Symbol]";function Ob(n){return typeof n=="symbol"||uc(n)&&Zu(n)==zke}var jL=0/0,Yke=/^[-+]0x[0-9a-f]+$/i,Xke=/^0b[01]+$/i,jke=/^0o[0-7]+$/i,Kke=parseInt;function KL(n){if(typeof n=="number")return n;if(Ob(n))return jL;if(so(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=so(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Hke(n);var t=Xke.test(n);return t||jke.test(n)?Kke(n.slice(2),t?2:8):Yke.test(n)?jL:+n}var $ke="Expected a function",qke=Math.max,eDe=Math.min;function nz(n,e,t){var r,i,s,o,a,l,A=0,c=!1,u=!1,h=!0;if(typeof n!="function")throw new TypeError($ke);e=KL(e)||0,so(t)&&(c=!!t.leading,u="maxWait"in t,s=u?qke(KL(t.maxWait)||0,e):s,h="trailing"in t?!!t.trailing:h);function d(b){var F=r,x=i;return r=i=void 0,A=b,o=n.apply(x,F),o}function p(b){return A=b,a=setTimeout(g,e),c?d(b):o}function f(b){var F=b-l,x=b-A,E=e-F;return u?eDe(E,s-x):E}function m(b){var F=b-l,x=b-A;return l===void 0||F>=e||F<0||u&&x>=s}function g(){var b=JI();if(m(b))return v(b);a=setTimeout(g,f(b))}function v(b){return a=void 0,h&&r?d(b):(r=i=void 0,o)}function w(){a!==void 0&&clearTimeout(a),A=0,r=l=i=a=void 0}function B(){return a===void 0?o:v(JI())}function C(){var b=JI(),F=m(b);if(r=arguments,i=this,l=b,F){if(a===void 0)return p(l);if(u)return clearTimeout(a),a=setTimeout(g,e),d(l)}return a===void 0&&(a=setTimeout(g,e)),o}return C.cancel=w,C.flush=B,C}var tDe="Expected a function";function nDe(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(tDe);return so(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),nz(n,e,{leading:r,maxWait:e,trailing:i})}var rDe=function(e,t,r){var i=r.getBoundingClientRect(),s=i.width,o=i.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,A=a-(r.getBoundingClientRect().left+window.pageXOffset),c=l-(r.getBoundingClientRect().top+window.pageYOffset);A<0?A=0:A>s&&(A=s),c<0?c=0:c>o&&(c=o);var u=A/s,h=1-c/o;return{h:t.h,s:u,v:h,a:t.a,source:"hsv"}},iDe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function sDe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function oDe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function aDe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Wb=function(n){aDe(e,n);function e(t){sDe(this,e);var r=oDe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.handleChange=function(i){typeof r.props.onChange=="function"&&r.throttle(r.props.onChange,rDe(i,r.props.hsl,r.container),i)},r.handleMouseDown=function(i){r.handleChange(i);var s=r.getContainerRenderWindow();s.addEventListener("mousemove",r.handleChange),s.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=nDe(function(i,s,o){i(s,o)},50),r}return iDe(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var r=this.container,i=window;!i.document.contains(r)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var r=this.getContainerRenderWindow();r.removeEventListener("mousemove",this.handleChange),r.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.style||{},s=i.color,o=i.white,a=i.black,l=i.pointer,A=i.circle,c=ht({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:o,black:a,pointer:l,circle:A}},{custom:!!this.props.style});return X.createElement("div",{style:c.color,ref:function(h){return r.container=h},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},X.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),X.createElement("div",{style:c.white,className:"saturation-white"},X.createElement("div",{style:c.black,className:"saturation-black"}),X.createElement("div",{style:c.pointer},this.props.pointer?X.createElement(this.props.pointer,this.props):X.createElement("div",{style:c.circle}))))}}]),e}(Ce.PureComponent||Ce.Component);function lDe(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var ADe=z5(Object.keys,Object);const cDe=ADe;var uDe=Object.prototype,dDe=uDe.hasOwnProperty;function hDe(n){if(!WQ(n))return cDe(n);var e=[];for(var t in Object(n))dDe.call(n,t)&&t!="constructor"&&e.push(t);return e}function HQ(n){return up(n)?q5(n):hDe(n)}function fDe(n,e){return n&&J5(n,e,HQ)}function pDe(n,e){return function(t,r){if(t==null)return t;if(!up(t))return n(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return t}}var gDe=pDe(fDe);const rz=gDe;function mDe(n){return typeof n=="function"?n:Pb}function vDe(n,e){var t=ms(n)?lDe:rz;return t(n,mDe(e))}function mC(n){"@babel/helpers - typeof";return mC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mC(n)}var yDe=/^\s+/,wDe=/\s+$/;function et(n,e){if(n=n||"",e=e||{},n instanceof et)return n;if(!(this instanceof et))return new et(n,e);var t=BDe(n);this._originalInput=n,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}et.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,r,i,s,o,a;return t=e.r/255,r=e.g/255,i=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*o+.0722*a},setAlpha:function(e){return this._a=iz(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=qL(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=qL(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+i+"%)":"hsva("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=$L(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=$L(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+i+"%)":"hsla("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return eV(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return IDe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Bn(this._r,255)*100)+"%",g:Math.round(Bn(this._g,255)*100)+"%",b:Math.round(Bn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Bn(this._r,255)*100)+"%, "+Math.round(Bn(this._g,255)*100)+"%, "+Math.round(Bn(this._b,255)*100)+"%)":"rgba("+Math.round(Bn(this._r,255)*100)+"%, "+Math.round(Bn(this._g,255)*100)+"%, "+Math.round(Bn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:DDe[eV(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+tV(this._r,this._g,this._b,this._a),r=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=et(e);r="#"+tV(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0,s=!t&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return et(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(SDe,arguments)},brighten:function(){return this._applyModification(UDe,arguments)},darken:function(){return this._applyModification(QDe,arguments)},desaturate:function(){return this._applyModification(FDe,arguments)},saturate:function(){return this._applyModification(_De,arguments)},greyscale:function(){return this._applyModification(EDe,arguments)},spin:function(){return this._applyModification(RDe,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(NDe,arguments)},complement:function(){return this._applyCombination(MDe,arguments)},monochromatic:function(){return this._applyCombination(kDe,arguments)},splitcomplement:function(){return this._applyCombination(TDe,arguments)},triad:function(){return this._applyCombination(nV,[3])},tetrad:function(){return this._applyCombination(nV,[4])}};et.fromRatio=function(n,e){if(mC(n)=="object"){var t={};for(var r in n)n.hasOwnProperty(r)&&(r==="a"?t[r]=n[r]:t[r]=Eg(n[r]));n=t}return et(n,e)};function BDe(n){var e={r:0,g:0,b:0},t=1,r=null,i=null,s=null,o=!1,a=!1;return typeof n=="string"&&(n=ODe(n)),mC(n)=="object"&&(il(n.r)&&il(n.g)&&il(n.b)?(e=CDe(n.r,n.g,n.b),o=!0,a=String(n.r).substr(-1)==="%"?"prgb":"rgb"):il(n.h)&&il(n.s)&&il(n.v)?(r=Eg(n.s),i=Eg(n.v),e=xDe(n.h,r,i),o=!0,a="hsv"):il(n.h)&&il(n.s)&&il(n.l)&&(r=Eg(n.s),s=Eg(n.l),e=bDe(n.h,r,s),o=!0,a="hsl"),n.hasOwnProperty("a")&&(t=n.a)),t=iz(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function CDe(n,e,t){return{r:Bn(n,255)*255,g:Bn(e,255)*255,b:Bn(t,255)*255}}function $L(n,e,t){n=Bn(n,255),e=Bn(e,255),t=Bn(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,o,a=(r+i)/2;if(r==i)s=o=0;else{var l=r-i;switch(o=a>.5?l/(2-r-i):l/(r+i),r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function bDe(n,e,t){var r,i,s;n=Bn(n,360),e=Bn(e,100),t=Bn(t,100);function o(A,c,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?A+(c-A)*6*u:u<1/2?c:u<2/3?A+(c-A)*(2/3-u)*6:A}if(e===0)r=i=s=t;else{var a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=o(l,a,n+1/3),i=o(l,a,n),s=o(l,a,n-1/3)}return{r:r*255,g:i*255,b:s*255}}function qL(n,e,t){n=Bn(n,255),e=Bn(e,255),t=Bn(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,o,a=r,l=r-i;if(o=r===0?0:l/r,r==i)s=0;else{switch(r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,v:a}}function xDe(n,e,t){n=Bn(n,360)*6,e=Bn(e,100),t=Bn(t,100);var r=Math.floor(n),i=n-r,s=t*(1-e),o=t*(1-i*e),a=t*(1-(1-i)*e),l=r%6,A=[t,o,s,s,a,t][l],c=[a,t,t,o,s,s][l],u=[s,s,a,t,t,o][l];return{r:A*255,g:c*255,b:u*255}}function eV(n,e,t,r){var i=[Qo(Math.round(n).toString(16)),Qo(Math.round(e).toString(16)),Qo(Math.round(t).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function IDe(n,e,t,r,i){var s=[Qo(Math.round(n).toString(16)),Qo(Math.round(e).toString(16)),Qo(Math.round(t).toString(16)),Qo(sz(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function tV(n,e,t,r){var i=[Qo(sz(r)),Qo(Math.round(n).toString(16)),Qo(Math.round(e).toString(16)),Qo(Math.round(t).toString(16))];return i.join("")}et.equals=function(n,e){return!n||!e?!1:et(n).toRgbString()==et(e).toRgbString()};et.random=function(){return et.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function FDe(n,e){e=e===0?0:e||10;var t=et(n).toHsl();return t.s-=e/100,t.s=Zb(t.s),et(t)}function _De(n,e){e=e===0?0:e||10;var t=et(n).toHsl();return t.s+=e/100,t.s=Zb(t.s),et(t)}function EDe(n){return et(n).desaturate(100)}function SDe(n,e){e=e===0?0:e||10;var t=et(n).toHsl();return t.l+=e/100,t.l=Zb(t.l),et(t)}function UDe(n,e){e=e===0?0:e||10;var t=et(n).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),et(t)}function QDe(n,e){e=e===0?0:e||10;var t=et(n).toHsl();return t.l-=e/100,t.l=Zb(t.l),et(t)}function RDe(n,e){var t=et(n).toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,et(t)}function MDe(n){var e=et(n).toHsl();return e.h=(e.h+180)%360,et(e)}function nV(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=et(n).toHsl(),r=[et(n)],i=360/e,s=1;s<e;s++)r.push(et({h:(t.h+s*i)%360,s:t.s,l:t.l}));return r}function TDe(n){var e=et(n).toHsl(),t=e.h;return[et(n),et({h:(t+72)%360,s:e.s,l:e.l}),et({h:(t+216)%360,s:e.s,l:e.l})]}function NDe(n,e,t){e=e||6,t=t||30;var r=et(n).toHsl(),i=360/t,s=[et(n)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(et(r));return s}function kDe(n,e){e=e||6;for(var t=et(n).toHsv(),r=t.h,i=t.s,s=t.v,o=[],a=1/e;e--;)o.push(et({h:r,s:i,v:s})),s=(s+a)%1;return o}et.mix=function(n,e,t){t=t===0?0:t||50;var r=et(n).toRgb(),i=et(e).toRgb(),s=t/100,o={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return et(o)};et.readability=function(n,e){var t=et(n),r=et(e);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)};et.isReadable=function(n,e,t){var r=et.readability(n,e),i,s;switch(s=!1,i=WDe(t),i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};et.mostReadable=function(n,e,t){var r=null,i=0,s,o,a,l;t=t||{},o=t.includeFallbackColors,a=t.level,l=t.size;for(var A=0;A<e.length;A++)s=et.readability(n,e[A]),s>i&&(i=s,r=et(e[A]));return et.isReadable(n,r,{level:a,size:l})||!o?r:(t.includeFallbackColors=!1,et.mostReadable(n,["#fff","#000"],t))};var OE=et.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},DDe=et.hexNames=LDe(OE);function LDe(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function iz(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Bn(n,e){VDe(n)&&(n="100%");var t=PDe(n);return n=Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function Zb(n){return Math.min(1,Math.max(0,n))}function Yi(n){return parseInt(n,16)}function VDe(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function PDe(n){return typeof n=="string"&&n.indexOf("%")!=-1}function Qo(n){return n.length==1?"0"+n:""+n}function Eg(n){return n<=1&&(n=n*100+"%"),n}function sz(n){return Math.round(parseFloat(n)*255).toString(16)}function rV(n){return Yi(n)/255}var bo=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+n+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function il(n){return!!bo.CSS_UNIT.exec(n)}function ODe(n){n=n.replace(yDe,"").replace(wDe,"").toLowerCase();var e=!1;if(OE[n])n=OE[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=bo.rgb.exec(n))?{r:t[1],g:t[2],b:t[3]}:(t=bo.rgba.exec(n))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=bo.hsl.exec(n))?{h:t[1],s:t[2],l:t[3]}:(t=bo.hsla.exec(n))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=bo.hsv.exec(n))?{h:t[1],s:t[2],v:t[3]}:(t=bo.hsva.exec(n))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=bo.hex8.exec(n))?{r:Yi(t[1]),g:Yi(t[2]),b:Yi(t[3]),a:rV(t[4]),format:e?"name":"hex8"}:(t=bo.hex6.exec(n))?{r:Yi(t[1]),g:Yi(t[2]),b:Yi(t[3]),format:e?"name":"hex"}:(t=bo.hex4.exec(n))?{r:Yi(t[1]+""+t[1]),g:Yi(t[2]+""+t[2]),b:Yi(t[3]+""+t[3]),a:rV(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=bo.hex3.exec(n))?{r:Yi(t[1]+""+t[1]),g:Yi(t[2]+""+t[2]),b:Yi(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function WDe(n){var e,t;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),t=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var iV=function(e){var t=["r","g","b","a","h","s","l","v"],r=0,i=0;return vDe(t,function(s){if(e[s]&&(r+=1,isNaN(e[s])||(i+=1),s==="s"||s==="l")){var o=/^\d+%$/;o.test(e[s])&&(i+=1)}}),r===i?e:!1},Sg=function(e,t){var r=e.hex?et(e.hex):et(e),i=r.toHsl(),s=r.toHsv(),o=r.toRgb(),a=r.toHex();i.s===0&&(i.h=t||0,s.h=t||0);var l=a==="000000"&&o.a===0;return{hsl:i,hex:l?"transparent":"#"+a,rgb:o,hsv:s,oldHue:e.h||t||i.h,source:e.source}},Bc=function(e){if(e==="transparent")return!0;var t=String(e).charAt(0)==="#"?1:0;return e.length!==4+t&&e.length<7+t&&et(e).isValid()},zQ=function(e){if(!e)return"#fff";var t=Sg(e);if(t.hex==="transparent")return"rgba(0,0,0,0.4)";var r=(t.rgb.r*299+t.rgb.g*587+t.rgb.b*114)/1e3;return r>=128?"#000":"#fff"},HI=function(e,t){var r=e.replace("°","");return et(t+" ("+r+")")._ok},ig=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ZDe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function GDe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function JDe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function HDe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Wi=function(e){var t=function(r){HDe(i,r);function i(s){GDe(this,i);var o=JDe(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return o.handleChange=function(a,l){var A=iV(a);if(A){var c=Sg(a,a.h||o.state.oldHue);o.setState(c),o.props.onChangeComplete&&o.debounce(o.props.onChangeComplete,c,l),o.props.onChange&&o.props.onChange(c,l)}},o.handleSwatchHover=function(a,l){var A=iV(a);if(A){var c=Sg(a,a.h||o.state.oldHue);o.props.onSwatchHover&&o.props.onSwatchHover(c,l)}},o.state=ig({},Sg(s.color,0)),o.debounce=nz(function(a,l,A){a(l,A)},100),o}return ZDe(i,[{key:"render",value:function(){var o={};return this.props.onSwatchHover&&(o.onSwatchHover=this.handleSwatchHover),X.createElement(e,ig({},this.props,this.state,{onChange:this.handleChange},o))}}],[{key:"getDerivedStateFromProps",value:function(o,a){return ig({},Sg(o.color,a.oldHue))}}]),i}(Ce.PureComponent||Ce.Component);return t.propTypes=ig({},e.propTypes),t.defaultProps=ig({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},zDe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},YDe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function XDe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function sV(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function jDe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var KDe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){jDe(i,r);function i(){var s,o,a,l;XDe(this,i);for(var A=arguments.length,c=Array(A),u=0;u<A;u++)c[u]=arguments[u];return l=(o=(a=sV(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(c))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},o),sV(a,l)}return YDe(i,[{key:"render",value:function(){return X.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},X.createElement(e,zDe({},this.props,this.state)))}}]),i}(X.Component)},oV=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$De=13,qDe=function(e){var t=e.color,r=e.style,i=e.onClick,s=i===void 0?function(){}:i,o=e.onHover,a=e.title,l=a===void 0?t:a,A=e.children,c=e.focus,u=e.focusStyle,h=u===void 0?{}:u,d=t==="transparent",p=ht({default:{swatch:oV({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,c?h:{})}}),f=function(B){return s(t,B)},m=function(B){return B.keyCode===$De&&s(t,B)},g=function(B){return o(t,B)},v={};return o&&(v.onMouseOver=g),X.createElement("div",oV({style:p.swatch,onClick:f,title:l,tabIndex:0,onKeyDown:m},v),A,d&&X.createElement(Ap,{borderRadius:p.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Hu=KDe(qDe);var e3e=function(e){var t=e.direction,r=ht({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return X.createElement("div",{style:r.picker})},t3e=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},oz=function(e){var t=e.rgb,r=e.hsl,i=e.width,s=e.height,o=e.onChange,a=e.direction,l=e.style,A=e.renderers,c=e.pointer,u=e.className,h=u===void 0?"":u,d=ht({default:{picker:{position:"relative",width:i,height:s},alpha:{radius:"2px",style:l}}});return X.createElement("div",{style:d.picker,className:"alpha-picker "+h},X.createElement(VQ,t3e({},d.alpha,{rgb:t,hsl:r,pointer:c,renderers:A,onChange:o,direction:a})))};oz.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:e3e};Wi(oz);function az(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var n3e="__lodash_hash_undefined__";function r3e(n){return this.__data__.set(n,n3e),this}function i3e(n){return this.__data__.has(n)}function vC(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new jl;++e<t;)this.add(n[e])}vC.prototype.add=vC.prototype.push=r3e;vC.prototype.has=i3e;function s3e(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function o3e(n,e){return n.has(e)}var a3e=1,l3e=2;function lz(n,e,t,r,i,s){var o=t&a3e,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var A=s.get(n),c=s.get(e);if(A&&c)return A==e&&c==n;var u=-1,h=!0,d=t&l3e?new vC:void 0;for(s.set(n,e),s.set(e,n);++u<a;){var p=n[u],f=e[u];if(r)var m=o?r(f,p,u,e,n,s):r(p,f,u,n,e,s);if(m!==void 0){if(m)continue;h=!1;break}if(d){if(!s3e(e,function(g,v){if(!o3e(d,v)&&(p===g||i(p,g,t,r,s)))return d.push(v)})){h=!1;break}}else if(!(p===f||i(p,f,t,r,s))){h=!1;break}}return s.delete(n),s.delete(e),h}function A3e(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}function c3e(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var u3e=1,d3e=2,h3e="[object Boolean]",f3e="[object Date]",p3e="[object Error]",g3e="[object Map]",m3e="[object Number]",v3e="[object RegExp]",y3e="[object Set]",w3e="[object String]",B3e="[object Symbol]",C3e="[object ArrayBuffer]",b3e="[object DataView]",aV=cc?cc.prototype:void 0,zI=aV?aV.valueOf:void 0;function x3e(n,e,t,r,i,s,o){switch(t){case b3e:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case C3e:return!(n.byteLength!=e.byteLength||!s(new fC(n),new fC(e)));case h3e:case f3e:case m3e:return T0(+n,+e);case p3e:return n.name==e.name&&n.message==e.message;case v3e:case w3e:return n==e+"";case g3e:var a=A3e;case y3e:var l=r&u3e;if(a||(a=c3e),n.size!=e.size&&!l)return!1;var A=o.get(n);if(A)return A==e;r|=d3e,o.set(n,e);var c=lz(a(n),a(e),r,i,s,o);return o.delete(n),c;case B3e:if(zI)return zI.call(n)==zI.call(e)}return!1}function I3e(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}function F3e(n,e,t){var r=e(n);return ms(n)?r:I3e(r,t(n))}function _3e(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}function E3e(){return[]}var S3e=Object.prototype,U3e=S3e.propertyIsEnumerable,lV=Object.getOwnPropertySymbols,Q3e=lV?function(n){return n==null?[]:(n=Object(n),_3e(lV(n),function(e){return U3e.call(n,e)}))}:E3e;const R3e=Q3e;function AV(n){return F3e(n,HQ,R3e)}var M3e=1,T3e=Object.prototype,N3e=T3e.hasOwnProperty;function k3e(n,e,t,r,i,s){var o=t&M3e,a=AV(n),l=a.length,A=AV(e),c=A.length;if(l!=c&&!o)return!1;for(var u=l;u--;){var h=a[u];if(!(o?h in e:N3e.call(e,h)))return!1}var d=s.get(n),p=s.get(e);if(d&&p)return d==e&&p==n;var f=!0;s.set(n,e),s.set(e,n);for(var m=o;++u<l;){h=a[u];var g=n[h],v=e[h];if(r)var w=o?r(v,g,h,e,n,s):r(g,v,h,n,e,s);if(!(w===void 0?g===v||i(g,v,t,r,s):w)){f=!1;break}m||(m=h=="constructor")}if(f&&!m){var B=n.constructor,C=e.constructor;B!=C&&"constructor"in n&&"constructor"in e&&!(typeof B=="function"&&B instanceof B&&typeof C=="function"&&C instanceof C)&&(f=!1)}return s.delete(n),s.delete(e),f}var D3e=Ju(Oo,"DataView");const WE=D3e;var L3e=Ju(Oo,"Promise");const ZE=L3e;var V3e=Ju(Oo,"Set");const GE=V3e;var P3e=Ju(Oo,"WeakMap");const JE=P3e;var cV="[object Map]",O3e="[object Object]",uV="[object Promise]",dV="[object Set]",hV="[object WeakMap]",fV="[object DataView]",W3e=Gu(WE),Z3e=Gu($m),G3e=Gu(ZE),J3e=Gu(GE),H3e=Gu(JE),Wc=Zu;(WE&&Wc(new WE(new ArrayBuffer(1)))!=fV||$m&&Wc(new $m)!=cV||ZE&&Wc(ZE.resolve())!=uV||GE&&Wc(new GE)!=dV||JE&&Wc(new JE)!=hV)&&(Wc=function(n){var e=Zu(n),t=e==O3e?n.constructor:void 0,r=t?Gu(t):"";if(r)switch(r){case W3e:return fV;case Z3e:return cV;case G3e:return uV;case J3e:return dV;case H3e:return hV}return e});const pV=Wc;var z3e=1,gV="[object Arguments]",mV="[object Array]",My="[object Object]",Y3e=Object.prototype,vV=Y3e.hasOwnProperty;function X3e(n,e,t,r,i,s){var o=ms(n),a=ms(e),l=o?mV:pV(n),A=a?mV:pV(e);l=l==gV?My:l,A=A==gV?My:A;var c=l==My,u=A==My,h=l==A;if(h&&gC(n)){if(!gC(e))return!1;o=!0,c=!1}if(h&&!c)return s||(s=new Ia),o||GQ(n)?lz(n,e,t,r,i,s):x3e(n,e,l,t,r,i,s);if(!(t&z3e)){var d=c&&vV.call(n,"__wrapped__"),p=u&&vV.call(e,"__wrapped__");if(d||p){var f=d?n.value():n,m=p?e.value():e;return s||(s=new Ia),i(f,m,t,r,s)}}return h?(s||(s=new Ia),k3e(n,e,t,r,i,s)):!1}function YQ(n,e,t,r,i){return n===e?!0:n==null||e==null||!uc(n)&&!uc(e)?n!==n&&e!==e:X3e(n,e,t,r,YQ,i)}var j3e=1,K3e=2;function $3e(n,e,t,r){var i=t.length,s=i,o=!r;if(n==null)return!s;for(n=Object(n);i--;){var a=t[i];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<s;){a=t[i];var l=a[0],A=n[l],c=a[1];if(o&&a[2]){if(A===void 0&&!(l in n))return!1}else{var u=new Ia;if(r)var h=r(A,c,l,n,e,u);if(!(h===void 0?YQ(c,A,j3e|K3e,r,u):h))return!1}}return!0}function Az(n){return n===n&&!so(n)}function q3e(n){for(var e=HQ(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,Az(i)]}return e}function cz(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function eLe(n){var e=q3e(n);return e.length==1&&e[0][2]?cz(e[0][0],e[0][1]):function(t){return t===n||$3e(t,n,e)}}var tLe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nLe=/^\w*$/;function XQ(n,e){if(ms(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||Ob(n)?!0:nLe.test(n)||!tLe.test(n)||e!=null&&n in Object(e)}var rLe="Expected a function";function jQ(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(rLe);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(jQ.Cache||jl),t}jQ.Cache=jl;var iLe=500;function sLe(n){var e=jQ(n,function(r){return t.size===iLe&&t.clear(),r}),t=e.cache;return e}var oLe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,aLe=/\\(\\)?/g,lLe=sLe(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(oLe,function(t,r,i,s){e.push(i?s.replace(aLe,"$1"):r||t)}),e});const ALe=lLe;var cLe=1/0,yV=cc?cc.prototype:void 0,wV=yV?yV.toString:void 0;function uz(n){if(typeof n=="string")return n;if(ms(n))return az(n,uz)+"";if(Ob(n))return wV?wV.call(n):"";var e=n+"";return e=="0"&&1/n==-cLe?"-0":e}function uLe(n){return n==null?"":uz(n)}function dz(n,e){return ms(n)?n:XQ(n,e)?[n]:ALe(uLe(n))}var dLe=1/0;function Gb(n){if(typeof n=="string"||Ob(n))return n;var e=n+"";return e=="0"&&1/n==-dLe?"-0":e}function hz(n,e){e=dz(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[Gb(e[t++])];return t&&t==r?n:void 0}function hLe(n,e,t){var r=n==null?void 0:hz(n,e);return r===void 0?t:r}function fLe(n,e){return n!=null&&e in Object(n)}function pLe(n,e,t){e=dz(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=Gb(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&ZQ(i)&&JQ(o,i)&&(ms(n)||pC(n)))}function gLe(n,e){return n!=null&&pLe(n,e,fLe)}var mLe=1,vLe=2;function yLe(n,e){return XQ(n)&&Az(e)?cz(Gb(n),e):function(t){var r=hLe(t,n);return r===void 0&&r===e?gLe(t,n):YQ(e,r,mLe|vLe)}}function wLe(n){return function(e){return e==null?void 0:e[n]}}function BLe(n){return function(e){return hz(e,n)}}function CLe(n){return XQ(n)?wLe(Gb(n)):BLe(n)}function bLe(n){return typeof n=="function"?n:n==null?Pb:typeof n=="object"?ms(n)?yLe(n[0],n[1]):eLe(n):CLe(n)}function xLe(n,e){var t=-1,r=up(n)?Array(n.length):[];return rz(n,function(i,s,o){r[++t]=e(i,s,o)}),r}function zu(n,e){var t=ms(n)?az:xLe;return t(n,bLe(e))}var ILe=function(e){var t=e.colors,r=e.onClick,i=e.onSwatchHover,s=ht({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return X.createElement("div",{style:s.swatches},zu(t,function(o){return X.createElement(Hu,{key:o,color:o,style:s.swatch,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+o}})}),X.createElement("div",{style:s.clear}))},KQ=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.hex,s=e.colors,o=e.width,a=e.triangle,l=e.styles,A=l===void 0?{}:l,c=e.className,u=c===void 0?"":c,h=i==="transparent",d=function(m,g){Bc(m)&&t({hex:m,source:"hex"},g)},p=ht(Oi({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:zQ(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},A),{"hide-triangle":a==="hide"});return X.createElement("div",{style:p.card,className:"block-picker "+u},X.createElement("div",{style:p.triangle}),X.createElement("div",{style:p.head},h&&X.createElement(Ap,{borderRadius:"6px 6px 0 0"}),X.createElement("div",{style:p.label},i)),X.createElement("div",{style:p.body},X.createElement(ILe,{colors:s,onClick:d,onSwatchHover:r}),X.createElement(Tt,{style:{input:p.input},value:i,onChange:d})))};KQ.propTypes={width:Oe.oneOfType([Oe.string,Oe.number]),colors:Oe.arrayOf(Oe.string),triangle:Oe.oneOf(["top","hide"]),styles:Oe.object};KQ.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Wi(KQ);var Od={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},Wd={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Zd={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},Gd={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Jd={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},Hd={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},zd={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},Yd={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},Xd={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},Ug={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},jd={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},Kd={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},$d={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},qd={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},eh={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},th={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},nh={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},rh={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},fz=function(e){var t=e.color,r=e.onClick,i=e.onSwatchHover,s=e.hover,o=e.active,a=e.circleSize,l=e.circleSpacing,A=ht({default:{swatch:{width:a,height:a,marginRight:l,marginBottom:l,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:s,active:o});return X.createElement("div",{style:A.swatch},X.createElement(Hu,{style:A.Swatch,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:A.Swatch.boxShadow+", 0 0 5px "+t}}))};fz.defaultProps={circleSize:28,circleSpacing:14};const FLe=LQ(fz);var $Q=function(e){var t=e.width,r=e.onChange,i=e.onSwatchHover,s=e.colors,o=e.hex,a=e.circleSize,l=e.styles,A=l===void 0?{}:l,c=e.circleSpacing,u=e.className,h=u===void 0?"":u,d=ht(Oi({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},A)),p=function(m,g){return r({hex:m,source:"hex"},g)};return X.createElement("div",{style:d.card,className:"circle-picker "+h},zu(s,function(f){return X.createElement(FLe,{key:f,color:f,onClick:p,onSwatchHover:i,active:o===f.toLowerCase(),circleSize:a,circleSpacing:c})}))};$Q.propTypes={width:Oe.oneOfType([Oe.string,Oe.number]),circleSize:Oe.number,circleSpacing:Oe.number,styles:Oe.object};$Q.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Od[500],Wd[500],Zd[500],Gd[500],Jd[500],Hd[500],zd[500],Yd[500],Xd[500],Ug[500],jd[500],Kd[500],$d[500],qd[500],eh[500],th[500],nh[500],rh[500]],styles:{}};Wi($Q);function BV(n){return n===void 0}var pz={};Object.defineProperty(pz,"__esModule",{value:!0});var CV=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_Le=Ce,bV=ELe(_Le);function ELe(n){return n&&n.__esModule?n:{default:n}}function SLe(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var Ty=24,ULe=pz.default=function(n){var e=n.fill,t=e===void 0?"currentColor":e,r=n.width,i=r===void 0?Ty:r,s=n.height,o=s===void 0?Ty:s,a=n.style,l=a===void 0?{}:a,A=SLe(n,["fill","width","height","style"]);return bV.default.createElement("svg",CV({viewBox:"0 0 "+Ty+" "+Ty,style:CV({fill:t,width:i,height:o},l)},A),bV.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},QLe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function RLe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function MLe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function TLe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var gz=function(n){TLe(e,n);function e(t){RLe(this,e);var r=MLe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.toggleViews=function(){r.state.view==="hex"?r.setState({view:"rgb"}):r.state.view==="rgb"?r.setState({view:"hsl"}):r.state.view==="hsl"&&(r.props.hsl.a===1?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(i,s){i.hex?Bc(i.hex)&&r.props.onChange({hex:i.hex,source:"hex"},s):i.r||i.g||i.b?r.props.onChange({r:i.r||r.props.rgb.r,g:i.g||r.props.rgb.g,b:i.b||r.props.rgb.b,source:"rgb"},s):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},s)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),r.props.onChange({h:i.h||r.props.hsl.h,s:Number(BV(i.s)?r.props.hsl.s:i.s),l:Number(BV(i.l)?r.props.hsl.l:i.l),source:"hsl"},s))},r.showHighlight=function(i){i.currentTarget.style.background="#eee"},r.hideHighlight=function(i){i.currentTarget.style.background="transparent"},t.hsl.a!==1&&t.view==="hex"?r.state={view:"rgb"}:r.state={view:t.view},r}return QLe(e,[{key:"render",value:function(){var r=this,i=ht({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=X.createElement("div",{style:i.fields,className:"flexbox-fix"},X.createElement("div",{style:i.field},X.createElement(Tt,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=X.createElement("div",{style:i.fields,className:"flexbox-fix"},X.createElement("div",{style:i.field},X.createElement(Tt,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),X.createElement("div",{style:i.field},X.createElement(Tt,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),X.createElement("div",{style:i.field},X.createElement(Tt,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),X.createElement("div",{style:i.alpha},X.createElement(Tt,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=X.createElement("div",{style:i.fields,className:"flexbox-fix"},X.createElement("div",{style:i.field},X.createElement(Tt,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),X.createElement("div",{style:i.field},X.createElement(Tt,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),X.createElement("div",{style:i.field},X.createElement(Tt,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),X.createElement("div",{style:i.alpha},X.createElement(Tt,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),X.createElement("div",{style:i.wrap,className:"flexbox-fix"},s,X.createElement("div",{style:i.toggle},X.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(a){return r.icon=a}},X.createElement(ULe,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),e}(X.Component);gz.defaultProps={view:"hex"};var xV=function(){var e=ht({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return X.createElement("div",{style:e.picker})},NLe=function(){var e=ht({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return X.createElement("div",{style:e.picker})},qQ=function(e){var t=e.width,r=e.onChange,i=e.disableAlpha,s=e.rgb,o=e.hsl,a=e.hsv,l=e.hex,A=e.renderers,c=e.styles,u=c===void 0?{}:c,h=e.className,d=h===void 0?"":h,p=e.defaultView,f=ht(Oi({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},u),{disableAlpha:i});return X.createElement("div",{style:f.picker,className:"chrome-picker "+d},X.createElement("div",{style:f.saturation},X.createElement(Wb,{style:f.Saturation,hsl:o,hsv:a,pointer:NLe,onChange:r})),X.createElement("div",{style:f.body},X.createElement("div",{style:f.controls,className:"flexbox-fix"},X.createElement("div",{style:f.color},X.createElement("div",{style:f.swatch},X.createElement("div",{style:f.active}),X.createElement(Ap,{renderers:A}))),X.createElement("div",{style:f.toggles},X.createElement("div",{style:f.hue},X.createElement(cp,{style:f.Hue,hsl:o,pointer:xV,onChange:r})),X.createElement("div",{style:f.alpha},X.createElement(VQ,{style:f.Alpha,rgb:s,hsl:o,pointer:xV,renderers:A,onChange:r})))),X.createElement(gz,{rgb:s,hsl:o,hex:l,view:p,onChange:r,disableAlpha:i})))};qQ.propTypes={width:Oe.oneOfType([Oe.string,Oe.number]),disableAlpha:Oe.bool,styles:Oe.object,defaultView:Oe.oneOf(["hex","rgb","hsl"])};qQ.defaultProps={width:225,disableAlpha:!1,styles:{}};const kLe=Wi(qQ);var DLe=function(e){var t=e.color,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=e.active,a=ht({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:zQ(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return X.createElement(Hu,{style:a.color,color:t,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},X.createElement("div",{style:a.dot}))},LLe=function(e){var t=e.hex,r=e.rgb,i=e.onChange,s=ht({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(l,A){l.r||l.g||l.b?i({r:l.r||r.r,g:l.g||r.g,b:l.b||r.b,source:"rgb"},A):i({hex:l.hex,source:"hex"},A)};return X.createElement("div",{style:s.fields,className:"flexbox-fix"},X.createElement("div",{style:s.active}),X.createElement(Tt,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:t,onChange:o}),X.createElement(Tt,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:r.r,onChange:o}),X.createElement(Tt,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:r.g,onChange:o}),X.createElement(Tt,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:r.b,onChange:o}))},eR=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.colors,s=e.hex,o=e.rgb,a=e.styles,l=a===void 0?{}:a,A=e.className,c=A===void 0?"":A,u=ht(Oi({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},l)),h=function(p,f){p.hex?Bc(p.hex)&&t({hex:p.hex,source:"hex"},f):t(p,f)};return X.createElement(N0,{style:u.Compact,styles:l},X.createElement("div",{style:u.compact,className:"compact-picker "+c},X.createElement("div",null,zu(i,function(d){return X.createElement(DLe,{key:d,color:d,active:d.toLowerCase()===s,onClick:h,onSwatchHover:r})}),X.createElement("div",{style:u.clear})),X.createElement(LLe,{hex:s,rgb:o,onChange:h})))};eR.propTypes={colors:Oe.arrayOf(Oe.string),styles:Oe.object};eR.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};Wi(eR);var VLe=function(e){var t=e.hover,r=e.color,i=e.onClick,s=e.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=ht({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:t});return X.createElement("div",{style:a.swatch},X.createElement(Hu,{color:r,onClick:i,onHover:s,focusStyle:o}))};const PLe=LQ(VLe);var tR=function(e){var t=e.width,r=e.colors,i=e.onChange,s=e.onSwatchHover,o=e.triangle,a=e.styles,l=a===void 0?{}:a,A=e.className,c=A===void 0?"":A,u=ht(Oi({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},l),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right","bottom-left-triangle":o==="bottom-left","bottom-right-triangle":o==="bottom-right"}),h=function(p,f){return i({hex:p,source:"hex"},f)};return X.createElement("div",{style:u.card,className:"github-picker "+c},X.createElement("div",{style:u.triangleShadow}),X.createElement("div",{style:u.triangle}),zu(r,function(d){return X.createElement(PLe,{color:d,key:d,onClick:h,onSwatchHover:s})}))};tR.propTypes={width:Oe.oneOfType([Oe.string,Oe.number]),colors:Oe.arrayOf(Oe.string),triangle:Oe.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Oe.object};tR.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Wi(tR);var OLe=function(e){var t=e.direction,r=ht({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return X.createElement("div",{style:r.picker})},WLe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nR=function(e){var t=e.width,r=e.height,i=e.onChange,s=e.hsl,o=e.direction,a=e.pointer,l=e.styles,A=l===void 0?{}:l,c=e.className,u=c===void 0?"":c,h=ht(Oi({default:{picker:{position:"relative",width:t,height:r},hue:{radius:"2px"}}},A)),d=function(f){return i({a:1,h:f.h,l:.5,s:1})};return X.createElement("div",{style:h.picker,className:"hue-picker "+u},X.createElement(cp,WLe({},h.hue,{hsl:s,pointer:a,onChange:d,direction:o})))};nR.propTypes={styles:Oe.object};nR.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:OLe,styles:{}};Wi(nR);var ZLe=function(e){var t=e.onChange,r=e.hex,i=e.rgb,s=e.styles,o=s===void 0?{}:s,a=e.className,l=a===void 0?"":a,A=ht(Oi({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),c=function(h,d){h.hex?Bc(h.hex)&&t({hex:h.hex,source:"hex"},d):(h.r||h.g||h.b)&&t({r:h.r||i.r,g:h.g||i.g,b:h.b||i.b,source:"rgb"},d)};return X.createElement(N0,{styles:o},X.createElement("div",{style:A.material,className:"material-picker "+l},X.createElement(Tt,{style:{wrap:A.HEXwrap,input:A.HEXinput,label:A.HEXlabel},label:"hex",value:r,onChange:c}),X.createElement("div",{style:A.split,className:"flexbox-fix"},X.createElement("div",{style:A.third},X.createElement(Tt,{style:{wrap:A.RGBwrap,input:A.RGBinput,label:A.RGBlabel},label:"r",value:i.r,onChange:c})),X.createElement("div",{style:A.third},X.createElement(Tt,{style:{wrap:A.RGBwrap,input:A.RGBinput,label:A.RGBlabel},label:"g",value:i.g,onChange:c})),X.createElement("div",{style:A.third},X.createElement(Tt,{style:{wrap:A.RGBwrap,input:A.RGBinput,label:A.RGBlabel},label:"b",value:i.b,onChange:c})))))};Wi(ZLe);var GLe=function(e){var t=e.onChange,r=e.rgb,i=e.hsv,s=e.hex,o=ht({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(A,c){A["#"]?Bc(A["#"])&&t({hex:A["#"],source:"hex"},c):A.r||A.g||A.b?t({r:A.r||r.r,g:A.g||r.g,b:A.b||r.b,source:"rgb"},c):(A.h||A.s||A.v)&&t({h:A.h||i.h,s:A.s||i.s,v:A.v||i.v,source:"hsv"},c)};return X.createElement("div",{style:o.fields},X.createElement(Tt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(i.h),onChange:a}),X.createElement(Tt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:a}),X.createElement(Tt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:a}),X.createElement("div",{style:o.divider}),X.createElement(Tt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:r.r,onChange:a}),X.createElement(Tt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:r.g,onChange:a}),X.createElement(Tt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:r.b,onChange:a}),X.createElement("div",{style:o.divider}),X.createElement(Tt,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:s.replace("#",""),onChange:a}),X.createElement("div",{style:o.fieldSymbols},X.createElement("div",{style:o.symbol},"°"),X.createElement("div",{style:o.symbol},"%"),X.createElement("div",{style:o.symbol},"%")))},JLe=function(e){var t=e.hsl,r=ht({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return X.createElement("div",{style:r.picker})},HLe=function(){var e=ht({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return X.createElement("div",{style:e.pointer},X.createElement("div",{style:e.left},X.createElement("div",{style:e.leftInside})),X.createElement("div",{style:e.right},X.createElement("div",{style:e.rightInside})))},IV=function(e){var t=e.onClick,r=e.label,i=e.children,s=e.active,o=ht({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return X.createElement("div",{style:o.button,onClick:t},r||i)},zLe=function(e){var t=e.rgb,r=e.currentColor,i=ht({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return X.createElement("div",null,X.createElement("div",{style:i.label},"new"),X.createElement("div",{style:i.swatches},X.createElement("div",{style:i.new}),X.createElement("div",{style:i.current})),X.createElement("div",{style:i.label},"current"))},YLe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function XLe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function jLe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function KLe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var rR=function(n){KLe(e,n);function e(t){XLe(this,e);var r=jLe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.state={currentColor:t.hex},r}return YLe(e,[{key:"render",value:function(){var r=this.props,i=r.styles,s=i===void 0?{}:i,o=r.className,a=o===void 0?"":o,l=ht(Oi({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return X.createElement("div",{style:l.picker,className:"photoshop-picker "+a},X.createElement("div",{style:l.head},this.props.header),X.createElement("div",{style:l.body,className:"flexbox-fix"},X.createElement("div",{style:l.saturation},X.createElement(Wb,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:JLe,onChange:this.props.onChange})),X.createElement("div",{style:l.hue},X.createElement(cp,{direction:"vertical",hsl:this.props.hsl,pointer:HLe,onChange:this.props.onChange})),X.createElement("div",{style:l.controls},X.createElement("div",{style:l.top,className:"flexbox-fix"},X.createElement("div",{style:l.previews},X.createElement(zLe,{rgb:this.props.rgb,currentColor:this.state.currentColor})),X.createElement("div",{style:l.actions},X.createElement(IV,{label:"OK",onClick:this.props.onAccept,active:!0}),X.createElement(IV,{label:"Cancel",onClick:this.props.onCancel}),X.createElement(GLe,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(X.Component);rR.propTypes={header:Oe.string,styles:Oe.object};rR.defaultProps={header:"Color Picker",styles:{}};Wi(rR);var $Le=function(e){var t=e.onChange,r=e.rgb,i=e.hsl,s=e.hex,o=e.disableAlpha,a=ht({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),l=function(c,u){c.hex?Bc(c.hex)&&t({hex:c.hex,source:"hex"},u):c.r||c.g||c.b?t({r:c.r||r.r,g:c.g||r.g,b:c.b||r.b,a:r.a,source:"rgb"},u):c.a&&(c.a<0?c.a=0:c.a>100&&(c.a=100),c.a/=100,t({h:i.h,s:i.s,l:i.l,a:c.a,source:"rgb"},u))};return X.createElement("div",{style:a.fields,className:"flexbox-fix"},X.createElement("div",{style:a.double},X.createElement(Tt,{style:{input:a.input,label:a.label},label:"hex",value:s.replace("#",""),onChange:l})),X.createElement("div",{style:a.single},X.createElement(Tt,{style:{input:a.input,label:a.label},label:"r",value:r.r,onChange:l,dragLabel:"true",dragMax:"255"})),X.createElement("div",{style:a.single},X.createElement(Tt,{style:{input:a.input,label:a.label},label:"g",value:r.g,onChange:l,dragLabel:"true",dragMax:"255"})),X.createElement("div",{style:a.single},X.createElement(Tt,{style:{input:a.input,label:a.label},label:"b",value:r.b,onChange:l,dragLabel:"true",dragMax:"255"})),X.createElement("div",{style:a.alpha},X.createElement(Tt,{style:{input:a.input,label:a.label},label:"a",value:Math.round(r.a*100),onChange:l,dragLabel:"true",dragMax:"100"})))},qLe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},mz=function(e){var t=e.colors,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=ht({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),a=function(A,c){i({hex:A,source:"hex"},c)};return X.createElement("div",{style:o.colors,className:"flexbox-fix"},t.map(function(l){var A=typeof l=="string"?{color:l}:l,c=""+A.color+(A.title||"");return X.createElement("div",{key:c,style:o.swatchWrap},X.createElement(Hu,qLe({},A,{style:o.swatch,onClick:a,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+A.color}})))}))};mz.propTypes={colors:Oe.arrayOf(Oe.oneOfType([Oe.string,Oe.shape({color:Oe.string,title:Oe.string})])).isRequired};var eVe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},iR=function(e){var t=e.width,r=e.rgb,i=e.hex,s=e.hsv,o=e.hsl,a=e.onChange,l=e.onSwatchHover,A=e.disableAlpha,c=e.presetColors,u=e.renderers,h=e.styles,d=h===void 0?{}:h,p=e.className,f=p===void 0?"":p,m=ht(Oi({default:eVe({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},d),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},d),{disableAlpha:A});return X.createElement("div",{style:m.picker,className:"sketch-picker "+f},X.createElement("div",{style:m.saturation},X.createElement(Wb,{style:m.Saturation,hsl:o,hsv:s,onChange:a})),X.createElement("div",{style:m.controls,className:"flexbox-fix"},X.createElement("div",{style:m.sliders},X.createElement("div",{style:m.hue},X.createElement(cp,{style:m.Hue,hsl:o,onChange:a})),X.createElement("div",{style:m.alpha},X.createElement(VQ,{style:m.Alpha,rgb:r,hsl:o,renderers:u,onChange:a}))),X.createElement("div",{style:m.color},X.createElement(Ap,null),X.createElement("div",{style:m.activeColor}))),X.createElement($Le,{rgb:r,hsl:o,hex:i,onChange:a,disableAlpha:A}),X.createElement(mz,{colors:c,onClick:a,onSwatchHover:l}))};iR.propTypes={disableAlpha:Oe.bool,width:Oe.oneOfType([Oe.string,Oe.number]),styles:Oe.object};iR.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};Wi(iR);var sg=function(e){var t=e.hsl,r=e.offset,i=e.onClick,s=i===void 0?function(){}:i,o=e.active,a=e.first,l=e.last,A=ht({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+r*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:a,last:l}),c=function(h){return s({h:t.h,s:.5,l:r,source:"hsl"},h)};return X.createElement("div",{style:A.swatch,onClick:c})},tVe=function(e){var t=e.onClick,r=e.hsl,i=ht({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return X.createElement("div",{style:i.swatches},X.createElement("div",{style:i.swatch},X.createElement(sg,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<s&&Math.abs(r.s-.5)<s,onClick:t,first:!0})),X.createElement("div",{style:i.swatch},X.createElement(sg,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<s&&Math.abs(r.s-.5)<s,onClick:t})),X.createElement("div",{style:i.swatch},X.createElement(sg,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<s&&Math.abs(r.s-.5)<s,onClick:t})),X.createElement("div",{style:i.swatch},X.createElement(sg,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<s&&Math.abs(r.s-.5)<s,onClick:t})),X.createElement("div",{style:i.swatch},X.createElement(sg,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<s&&Math.abs(r.s-.5)<s,onClick:t,last:!0})),X.createElement("div",{style:i.clear}))},nVe=function(){var e=ht({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return X.createElement("div",{style:e.picker})},sR=function(e){var t=e.hsl,r=e.onChange,i=e.pointer,s=e.styles,o=s===void 0?{}:s,a=e.className,l=a===void 0?"":a,A=ht(Oi({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return X.createElement("div",{style:A.wrap||{},className:"slider-picker "+l},X.createElement("div",{style:A.hue},X.createElement(cp,{style:A.Hue,hsl:t,pointer:i,onChange:r})),X.createElement("div",{style:A.swatches},X.createElement(tVe,{hsl:t,onClick:r})))};sR.propTypes={styles:Oe.object};sR.defaultProps={pointer:nVe,styles:{}};Wi(sR);var vz={};Object.defineProperty(vz,"__esModule",{value:!0});var FV=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rVe=Ce,_V=iVe(rVe);function iVe(n){return n&&n.__esModule?n:{default:n}}function sVe(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var Ny=24,oVe=vz.default=function(n){var e=n.fill,t=e===void 0?"currentColor":e,r=n.width,i=r===void 0?Ny:r,s=n.height,o=s===void 0?Ny:s,a=n.style,l=a===void 0?{}:a,A=sVe(n,["fill","width","height","style"]);return _V.default.createElement("svg",FV({viewBox:"0 0 "+Ny+" "+Ny,style:FV({fill:t,width:i,height:o},l)},A),_V.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},aVe=function(e){var t=e.color,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=e.first,a=e.last,l=e.active,A=ht({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:zQ(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:a,active:l,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return X.createElement(Hu,{color:t,style:A.color,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},X.createElement("div",{style:A.check},X.createElement(oVe,null)))},lVe=function(e){var t=e.onClick,r=e.onSwatchHover,i=e.group,s=e.active,o=ht({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return X.createElement("div",{style:o.group},zu(i,function(a,l){return X.createElement(aVe,{key:a,color:a,active:a.toLowerCase()===s,first:l===0,last:l===i.length-1,onClick:t,onSwatchHover:r})}))},oR=function(e){var t=e.width,r=e.height,i=e.onChange,s=e.onSwatchHover,o=e.colors,a=e.hex,l=e.styles,A=l===void 0?{}:l,c=e.className,u=c===void 0?"":c,h=ht(Oi({default:{picker:{width:t,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},A)),d=function(f,m){return i({hex:f,source:"hex"},m)};return X.createElement("div",{style:h.picker,className:"swatches-picker "+u},X.createElement(N0,null,X.createElement("div",{style:h.overflow},X.createElement("div",{style:h.body},zu(o,function(p){return X.createElement(lVe,{key:p.toString(),group:p,active:a,onClick:d,onSwatchHover:s})}),X.createElement("div",{style:h.clear})))))};oR.propTypes={width:Oe.oneOfType([Oe.string,Oe.number]),height:Oe.oneOfType([Oe.string,Oe.number]),colors:Oe.arrayOf(Oe.arrayOf(Oe.string)),styles:Oe.object};oR.defaultProps={width:320,height:240,colors:[[Od[900],Od[700],Od[500],Od[300],Od[100]],[Wd[900],Wd[700],Wd[500],Wd[300],Wd[100]],[Zd[900],Zd[700],Zd[500],Zd[300],Zd[100]],[Gd[900],Gd[700],Gd[500],Gd[300],Gd[100]],[Jd[900],Jd[700],Jd[500],Jd[300],Jd[100]],[Hd[900],Hd[700],Hd[500],Hd[300],Hd[100]],[zd[900],zd[700],zd[500],zd[300],zd[100]],[Yd[900],Yd[700],Yd[500],Yd[300],Yd[100]],[Xd[900],Xd[700],Xd[500],Xd[300],Xd[100]],["#194D33",Ug[700],Ug[500],Ug[300],Ug[100]],[jd[900],jd[700],jd[500],jd[300],jd[100]],[Kd[900],Kd[700],Kd[500],Kd[300],Kd[100]],[$d[900],$d[700],$d[500],$d[300],$d[100]],[qd[900],qd[700],qd[500],qd[300],qd[100]],[eh[900],eh[700],eh[500],eh[300],eh[100]],[th[900],th[700],th[500],th[300],th[100]],[nh[900],nh[700],nh[500],nh[300],nh[100]],[rh[900],rh[700],rh[500],rh[300],rh[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Wi(oR);var aR=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.hex,s=e.colors,o=e.width,a=e.triangle,l=e.styles,A=l===void 0?{}:l,c=e.className,u=c===void 0?"":c,h=ht(Oi({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},A),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),d=function(f,m){Bc(f)&&t({hex:f,source:"hex"},m)};return X.createElement("div",{style:h.card,className:"twitter-picker "+u},X.createElement("div",{style:h.triangleShadow}),X.createElement("div",{style:h.triangle}),X.createElement("div",{style:h.body},zu(s,function(p,f){return X.createElement(Hu,{key:f,color:p,hex:p,style:h.swatch,onClick:d,onHover:r,focusStyle:{boxShadow:"0 0 4px "+p}})}),X.createElement("div",{style:h.hash},"#"),X.createElement(Tt,{label:null,style:{input:h.input},value:i.replace("#",""),onChange:d}),X.createElement("div",{style:h.clear})))};aR.propTypes={width:Oe.oneOfType([Oe.string,Oe.number]),triangle:Oe.oneOf(["hide","top-left","top-right"]),colors:Oe.arrayOf(Oe.string),styles:Oe.object};aR.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Wi(aR);var lR=function(e){var t=ht({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return X.createElement("div",{style:t.picker})};lR.propTypes={hsl:Oe.shape({h:Oe.number,s:Oe.number,l:Oe.number,a:Oe.number})};lR.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var AR=function(e){var t=ht({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return X.createElement("div",{style:t.picker})};AR.propTypes={hsl:Oe.shape({h:Oe.number,s:Oe.number,l:Oe.number,a:Oe.number})};AR.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var AVe=function(e){var t=e.onChange,r=e.rgb,i=e.hsl,s=e.hex,o=e.hsv,a=function(d,p){if(d.hex)Bc(d.hex)&&t({hex:d.hex,source:"hex"},p);else if(d.rgb){var f=d.rgb.split(",");HI(d.rgb,"rgb")&&t({r:f[0],g:f[1],b:f[2],a:1,source:"rgb"},p)}else if(d.hsv){var m=d.hsv.split(",");HI(d.hsv,"hsv")&&(m[2]=m[2].replace("%",""),m[1]=m[1].replace("%",""),m[0]=m[0].replace("°",""),m[1]==1?m[1]=.01:m[2]==1&&(m[2]=.01),t({h:Number(m[0]),s:Number(m[1]),v:Number(m[2]),source:"hsv"},p))}else if(d.hsl){var g=d.hsl.split(",");HI(d.hsl,"hsl")&&(g[2]=g[2].replace("%",""),g[1]=g[1].replace("%",""),g[0]=g[0].replace("°",""),u[1]==1?u[1]=.01:u[2]==1&&(u[2]=.01),t({h:Number(g[0]),s:Number(g[1]),v:Number(g[2]),source:"hsl"},p))}},l=ht({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),A=r.r+", "+r.g+", "+r.b,c=Math.round(i.h)+"°, "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",u=Math.round(o.h)+"°, "+Math.round(o.s*100)+"%, "+Math.round(o.v*100)+"%";return X.createElement("div",{style:l.wrap,className:"flexbox-fix"},X.createElement("div",{style:l.fields},X.createElement("div",{style:l.double},X.createElement(Tt,{style:{input:l.input,label:l.label},label:"hex",value:s,onChange:a})),X.createElement("div",{style:l.column},X.createElement("div",{style:l.single},X.createElement(Tt,{style:{input:l.input2,label:l.label2},label:"rgb",value:A,onChange:a})),X.createElement("div",{style:l.single},X.createElement(Tt,{style:{input:l.input2,label:l.label2},label:"hsv",value:u,onChange:a})),X.createElement("div",{style:l.single},X.createElement(Tt,{style:{input:l.input2,label:l.label2},label:"hsl",value:c,onChange:a})))))},cR=function(e){var t=e.width,r=e.onChange,i=e.rgb,s=e.hsl,o=e.hsv,a=e.hex,l=e.header,A=e.styles,c=A===void 0?{}:A,u=e.className,h=u===void 0?"":u,d=ht(Oi({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return X.createElement("div",{style:d.picker,className:"google-picker "+h},X.createElement("div",{style:d.head},l),X.createElement("div",{style:d.swatch}),X.createElement("div",{style:d.saturation},X.createElement(Wb,{hsl:s,hsv:o,pointer:lR,onChange:r})),X.createElement("div",{style:d.body},X.createElement("div",{style:d.controls,className:"flexbox-fix"},X.createElement("div",{style:d.hue},X.createElement(cp,{style:d.Hue,hsl:s,radius:"4px",pointer:AR,onChange:r}))),X.createElement(AVe,{rgb:i,hsl:s,hex:a,hsv:o,onChange:r})))};cR.propTypes={width:Oe.oneOfType([Oe.string,Oe.number]),styles:Oe.object,header:Oe.string};cR.defaultProps={width:652,styles:{},header:"Color picker"};Wi(cR);const cVe="_InformationContainerPos_1yd4c_2",uVe="_scrollContainer_1yd4c_15",YI={InformationContainerPos:cVe,scrollContainer:uVe,"options-container":"_options-container_1yd4c_24"},dVe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAABE5AAAROQEb2ZNGAAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoxODowNS0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6NDctMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6NDctMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmU1ZTg4ZDczLWQ3YmItNjg0NS1iNDkxLWYxZTU0YmRhZDE1MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDphYTA0ZDdmOC1lYzY0LWU4NGQtYjI0My1kOGY0YTI1ZTdmM2YiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYTA0ZDdmOC1lYzY0LWU4NGQtYjI0My1kOGY0YTI1ZTdmM2YiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmFhMDRkN2Y4LWVjNjQtZTg0ZC1iMjQzLWQ4ZjRhMjVlN2YzZiIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoxODowNS0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozNzgwNzA3Yy0zNDg5LTAzNDctYmEwNy1kOTFhY2ZkYmUwODYiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6MzA6MjQtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZTVlODhkNzMtZDdiYi02ODQ1LWI0OTEtZjFlNTRiZGFkMTUyIiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMyOjQ3LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+okruHwAAA6NJREFUeNrt279LG2EYwHG1CCqKPwKOJQU3cXYqXZ0KofgPuBWcUmsgoouCFArS0UXaWUpTFxHcUnE4cO6fULoUbWnTFk2ftz4p19BoLve+d33vvsN3KWre97lPUvPm7Gs2m32U3xgCABgCAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABABnlV5VR6QH0mOpIq229VSacPj4E/oY7Y9b0TWZtY0AwO7Qp6WH0q70XrqSmh1qSLMO1zKrj9Hp8a90jbu65mkAxBv4svRR+nHD0MOZr5t3uJ75iGsxa18GQPRBl6Sgy0GHu5QWHa5rUR8j6rrMXkoAuH3Ag9KLHgYcbsfh+nZirs3sbRAA/x5uQXrb4zMs3AdpyMH6hvRnx1nbpe6xAIC/hzssHcUcbrjnUr/F9fXrz7S1PrPXYQBcD3dKemdxuKZP0pzFNc7pz7S5RrPnqVwDkAGMSTXLg211auNtmL4NPXW0RrP3sVwC0EOVwNFgW9XjPMv01anueI2By8Or/xKAbHhSeuN4sK3OpPvSQIT1Dej3nCW0RjOLyVwA0Jf9IKHBhk8IX0vFLtZX1K9tJLzGII3/DtJ4q1dLeLDhvkjH0jNpSXqkLem/HevXpLW+WtJvEZP+IKee4nB9qZ7kB0pJPvOPuLiRzgkKmQCgz/xDLmrkDpN4JUjikOeEi9lzJ64Pi1wDOOAixu7AZwBVLmDsqr7/DrAhfeVCRs7MbCMr7wLWuKCRW8vaOYC5cfIbF/bWzIwqWT0J3LRww0eWM7PZzPpnAeUUztl9yMyknJdPA7el71z0P5lZbOftfgDzSvCTi/97BuW83hG0lfNfDM3et/J+T+BKjgGscFfwNYL1DodF+yl/Pm/j/oP9Doc869wVfPNh0Z50Vzr3GMC57mEvjUMeH/8yqKJvh15Ko9I96cJjABe6h1HdUyPJQx4fAdyRFtruz/MdQDG0nwWzRwB0DyJTAPjjUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAhgDMSJ89BmDWPgOA3gGMS0+kVU8zax8HAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIACQlX4BjeT0VuSSEBUAAAAASUVORK5CYII=",hVe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoyMTozMy0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MTgtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MTgtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA4MDc2OWJhLTIwNzQtMjU0Zi1iNjM5LWJiZjEyMTFlMjljNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpjMTM0ZDhjYS01ZTFlLWMzNGMtOWZjNC0zZWU4MjRkNWE1YWMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjMTM0ZDhjYS01ZTFlLWMzNGMtOWZjNC0zZWU4MjRkNWE1YWMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxMzRkOGNhLTVlMWUtYzM0Yy05ZmM0LTNlZTgyNGQ1YTVhYyIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoyMTozMy0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NzUzMzYxZC05NmIzLTgwNDctYTA0ZC0wODcxYmNiNzY4MDAiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6Mjk6NTctMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDgwNzY5YmEtMjA3NC0yNTRmLWI2MzktYmJmMTIxMWUyOWM1IiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMyOjE4LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Yrc/VQAAAzxJREFUeNrt3b9LFnEcwHE3IW1oiUCF/gCXcgibmhyaDEqnWhoCaRXqUQhByKVVXAqsMbQyGgIHA6GhSdpNc7E/IBehp8/h94ErRLzoOc671/Ce7/O572t4/PHc9bTb7R41NzcBADcBAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAiAinVrudUfPY92o+0ut5uu1Q9AtQCsRe2SWgMAAAAAAAAAAEo/7KHoWnQl12i0USKAjXTN/AzZTEMAdB/AQvQjfRrvtBMdlAjgIF0zP0M20wIA3QewVOJBF20JAAAAAACAbgJYrDCARQD+30EPRjei66nsU/fVaLXCAFbTjKO5ubMdBgEoDuBR9Cv6+VeHFQZweMy82Q6PACgOYLbCB120WQCKA5ipEYAZAAAAoCCAxzUC8BiAk3+3fzeajCZSN6OXNQLwMu3U2W8y7TwEwNENaTe0CQCWW7cbDOA2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACcWQB3GgzgDgDLrbHoa/Ql1+foe40O+nvaKb9jtvMYAMutc9Hl9C3hTgPR0xoBeJp2yu+Y7XzO8wE8IAIAAAAAAABPCQPgTwD3ok/Req6P0V6FD3ovzZifOdvhHgD/9hKI7JPzpVwXoxcVBvAizZifeaDKL5fwsGgPiwYAAAAAAACAswJgKnqf3tzV6W20X+JB76dr5mfIZpoCoPsAeqPz6aeETheiDyUC+JCumZ8hm6kXAO8NBAAAAAAAoFQAfdG7EgFk1+oDoLuHOhI9jB6covvRVokAttI1TzNbtsMIAMUBPKnRXwOfAOD/AQAAAAAAACj04si6APDiyBMOejh6Fs3naqX/pqkLgPW0U37HbOdhAI7eoNXUbwZNAuC7gQAAAAAADQYw3mAA440BkD7svYlWotepV9FmgwFspnvQuR8r6R5N1hHAfIMPumjzdQQw52BP3RwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADA2QQwHe1E36JtHdu3dI+mfTVMAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAAV7DcOsgfgT8DmTAAAAABJRU5ErkJggg==",fVe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoxOTozNC0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzM6MTEtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzM6MTEtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjJkMTY5MDdlLWQyY2EtZDA0Mi05MWRjLTliZTMyYzYyYjlmOSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowMzZkNWExYy1jOTYwLTAxNDktODlkMC00NzQ0NDMwM2QyNWQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMzZkNWExYy1jOTYwLTAxNDktODlkMC00NzQ0NDMwM2QyNWQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjAzNmQ1YTFjLWM5NjAtMDE0OS04OWQwLTQ3NDQ0MzAzZDI1ZCIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoxOTozNC0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2N2JiZmQ0OC0yMGMzLTI0NDktODQyNS1kNWJmOTBlNzMwYjYiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6MzA6MTQtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MmQxNjkwN2UtZDJjYS1kMDQyLTkxZGMtOWJlMzJjNjJiOWY5IiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMzOjExLTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Q6I0lAAAAs1JREFUeNrt3TtrFFEYgOFE2HjFXgv9AyIYsbATMaAWQtqAYBPQ0ibCgoSA/yGbwsJ/o6Ag3gMWEkurTeGlcfwGzoIs7LKT3TXOOU/xFlnYkNnvIRNOZs4sVFW1oHLzIQDgQwBAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAiAiVt91l2OXkRVi3oTXQVg+uHfjX60bPiDfkUPADj48C+2ePh/dx2AgwF4ncHw695HHQCaA6gy6hYAZQPYAqBsANsAlA1gBwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAogDE14tRt359RL3ocbQSLQGQH4Aj0bsJ31tfF3EDgPwAvGzw/t/ROgDlAhhcY7gMQLkABpeXnQSgXAB1mwCUDeAjAGUD6ANQNoB9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOCQ6wFQNoAnQ8fWiXYBKAfAnaFjOxXtATAewIdMhv85Ojp0bGfqq3sBGA/gcrodKrt9guO11Sm+XxkA0gd1P90Y2dbhb4w4rm8ATI5gpYVbx+8On/eHHoJRAdAMwVJ9j3zaNKE3ZmOFw6z+uTaj29HxEcdxLvoKQIHVd/XW9/XN4LcLAC0c/vno04xOLwC0bPj3oi8z/PsCgIYDWExLr/+iTlrkORutTbHYA8AMAXTTuvu8e5XO8XtTLPIAMAcATzNbVgagIYAdAAAAAAAAAAAAAADKA7CdGYA+AM0AbGUG4C0AzQDczAzABgDNAHTSHrs5DL9ebTwGQHME1zIY/vfoQjG7hc8BwXr0s8XDXyvqeQFzQnClhZeXPY8uFffEkDkiOB09ShDq/9rt/4f10/n+YXSiyGcGqfCnhgkAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAAaBp+gMB5Yr6zMTlPAAAAABJRU5ErkJggg==",pVe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoxOTo1Ny0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MjYtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MjYtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmFmYmE3YzFhLWI0MTMtMGQ0MS05YmRkLTE2ZGY2MTllOTgyMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5MTFjMjQ0NC01M2M4LWI1NDgtYmYwZi03M2VhOGZlOTVmM2UiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5MTFjMjQ0NC01M2M4LWI1NDgtYmYwZi03M2VhOGZlOTVmM2UiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjkxMWMyNDQ0LTUzYzgtYjU0OC1iZjBmLTczZWE4ZmU5NWYzZSIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoxOTo1Ny0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmNjZhMzQ1Ni02ODczLWQ5NDYtOTRkMy1mZTYwZjQ5NzliNjYiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6MzA6NDQtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YWZiYTdjMWEtYjQxMy0wZDQxLTliZGQtMTZkZjYxOWU5ODIxIiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMyOjI2LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+F7DBkwAABCVJREFUeNrt3TtMFEEYwHHuAiYkNjRg74mJpSYUkCiGAhKxsLKXggQ6yi2wQUh8RMCGRJulEgotjgLwVaCVDYYeHzQaKU5FCRo4vwnfRdQgHvu4mZ1/8W/Iec7c/u7gdmd368rlch35Gy8CAHgRAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAJLpUhjkpW5pQfoolaRPjlXSsZs59Jg5AeDgDZ+T2qRFaUcqZyQzl0c6txwA9n/X9+m7ppzR1nWOeQD8DaBD+pzhjV/JzLEDAL9v/JPSmgcbv5KZaysAfv3ev+PRxq80acPfAzYAKEgrHgIwcy4AIAwGpS8eAjBzHgBAGEx7uPErhQAIg6LHAIoACIM5jwHMAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIuA3pjbYBgOwDMOvyNqUZ6azUuGcMjfqz+/qYHQBkC8BXaUI6/p/rE8b13wAgAwB+SOel+irGVC91St8B4DYAs8K4J8LYehJepQyAhAEMVfPO3+eTYAgAbgJYinGMSwBwC8A36VyMY+zU5wSAIwCWpeYYx9gsvQKAOwAe7P2eH8MYzX6ChwBwB8DtOE+60PMWxwHgDoCRBMY5AgB3AIzHeQaufgJMAIC/AQDg8beAZQC4A2Argf0AWwBwa0/gc+lIDONr0OdiT6CjxwJyEcaW41iA2wDeS70RxnZBnwMADq8HMOfhXzzEuHpTuG4BAFJaEWQO5IxKp/61f0C/75vHXEvo4A8Aarwm8J00K13WpV9HtYL+bFYfw5pAT5aFb2osC+e8AABkFcBOxADgGIBt6YU0pUfwhqWrh2xYn2NKn3MbAHYDeCId0713ed2RE0d5fc4W6TEA7APwVuqPsgK4ypXC/XpKGQAsAPBB6qrBuLti2EsIgIgAzFk/fTUce5+OAQA1AjCTxsf+Ab8OZgBQGwDmtiynLRj/mQj3OQBABAAv41z1E2H8LToWAKQMwOy3b7Bg/A06FgCkDOCmRbe7uQWA9AGMWgRgFADpAxizCMAYAAAAAAAAgL8BAJAagOsWAbgBgPQBPJWaLBh/k/QMAOkDMIsz7lkw/rsRFooAIIbDweY27avS65Rb1f+bw8EsCgUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCCAoscAigAIg2mPAYQACIPBFC7GZGNmzgMA2L0+z4qHAMycCwDYPf9+0kMAk3He08BZAIqgVVrzaOObuZ6w4bW3AoAiaI9wkqVLmTm22/K62wTA/Cq4kvCNGmvdul5TIA+A/RG0SQspXqwxrYtULurccja95lYB+OOSrd3SvH4ilPR6AC5V0rHP6y1o8za+1lYCIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAFXRT5xealqlzx1wAAAAAElFTkSuQmCC",gVe="_InformationContainerPos_1m76y_2",mVe="_scrollContainer_1m76y_15",vVe="_centerAlign_1m76y_25",yVe="_traitInfoTitle_1m76y_28",wVe="_dropdownFlex_1m76y_38",BVe="_checkboxFlex_1m76y_44",CVe="_simpleFlex_1m76y_49",bVe="_traitInfoText_1m76y_55",xVe="_dropdownBase_1m76y_64",IVe="_dropdownControl_1m76y_74",FVe="_dropdownControlSmall_1m76y_80",_Ve="_flexSelect_1m76y_106",EVe="_checked_1m76y_163",SVe="_checkmark_1m76y_167",UVe="_checkboxHolder_1m76y_180",QVe="_actionButton_1m76y_189",RVe="_tabHolder_1m76y_209",MVe="_tabButton_1m76y_215",TVe="_tabButtonSelected_1m76y_235",Ge={InformationContainerPos:gVe,scrollContainer:mVe,centerAlign:vVe,traitInfoTitle:yVe,dropdownFlex:wVe,checkboxFlex:BVe,simpleFlex:CVe,traitInfoText:bVe,dropdownBase:xVe,dropdownControl:IVe,dropdownControlSmall:FVe,"input-box":"_input-box_1m76y_87",flexSelect:_Ve,"arrow-button":"_arrow-button_1m76y_114","left-button":"_left-button_1m76y_130","right-button":"_right-button_1m76y_137","anim-button":"_anim-button_1m76y_144","custom-checkbox":"_custom-checkbox_1m76y_149","checkbox-container":"_checkbox-container_1m76y_154",checked:EVe,checkmark:SVe,checkboxHolder:UVe,actionButton:QVe,tabHolder:RVe,tabButton:MVe,tabButtonSelected:TVe};function NVe({selectedTrait:n,selectedVRM:e}){const{animationManager:t,characterManager:r}=Ce.useContext(lr),[i,s]=Ce.useState(0),[o,a]=Ce.useState(0),[l,A]=Ce.useState(0);Ce.useEffect(()=>{var p,f,m;e!=null&&(A((p=e.data)==null?void 0:p.cullingLayer),s(((f=e.data)==null?void 0:f.cullingDistance[0])||0),a(((m=e.data)==null?void 0:m.cullingDistance[1])||0))},[e]);const c=p=>{s(p.target.value),e!=null&&e.data&&(e.data.cullingDistance[0]=p.target.value)},u=p=>{a(p.target.value),e!=null&&e.data&&(e.data.cullingDistance[1]=p.target.value)},h=p=>{e!=null&&e.data&&(A(p.target.value),e.data.cullingLayer=p.target.value)},d=()=>{r.updateCullHiddenMeshes()};return L.jsx("div",{children:L.jsxs("div",{className:Ge.InformationContainerPos,children:[L.jsx(ka,{title:"Trait Information",width:180,right:20}),L.jsx("div",{className:Ge.scrollContainer,children:n!=null?L.jsxs(L.Fragment,{children:[L.jsx("div",{className:Ge.traitInfoTitle,children:"Trait ID"}),L.jsx("div",{className:Ge.traitInfoText,children:n==null?void 0:n.id}),L.jsx("div",{className:Ge.traitInfoTitle,children:"Trait Name"}),L.jsx("div",{className:Ge.traitInfoText,children:n==null?void 0:n.name}),L.jsx("div",{className:Ge.traitInfoTitle,children:"Description"}),L.jsx("div",{className:Ge.traitInfoText,children:(n==null?void 0:n.description)||"A nice "+(n==null?void 0:n.name)}),L.jsx("div",{className:Ge.traitInfoTitle,children:"Culling Options"}),L.jsx("br",{}),L.jsxs("div",{className:Ge.traitInfoText,children:["Culling Layer",L.jsx("input",{type:"number",min:"0",max:"100",value:l,onChange:h,className:Ge["input-box"],step:1}),L.jsx("br",{}),L.jsx("br",{}),L.jsx(Uh,{title:"Out Distance",value:i,onChange:c,min:0,max:1,step:.001,stepBox:.01}),L.jsx("br",{}),L.jsx(Uh,{title:"In Distance",value:o,onChange:u,min:0,max:1,step:.001,stepBox:.01}),L.jsx("div",{className:Ge.actionButton,onClick:d,children:L.jsx("div",{children:"Update Culling "})})]})]}):L.jsx(L.Fragment,{children:L.jsx("div",{className:Ge.traitInfoTitle,children:"No Trait Selected"})})})]})})}var yz={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=s(Ce),t=r(fH);function r(b){return b&&b.__esModule?b:{default:b}}function i(){if(typeof WeakMap!="function")return null;var b=new WeakMap;return i=function(){return b},b}function s(b){if(b&&b.__esModule)return b;if(b===null||o(b)!=="object"&&typeof b!="function")return{default:b};var F=i();if(F&&F.has(b))return F.get(b);var x={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in b)if(Object.prototype.hasOwnProperty.call(b,M)){var H=E?Object.getOwnPropertyDescriptor(b,M):null;H&&(H.get||H.set)?Object.defineProperty(x,M,H):x[M]=b[M]}return x.default=b,F&&F.set(b,x),x}function o(b){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(x){return typeof x}:o=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},o(b)}function a(){return a=Object.assign||function(b){for(var F=1;F<arguments.length;F++){var x=arguments[F];for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(b[E]=x[E])}return b},a.apply(this,arguments)}function l(b,F){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(b);F&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,E)}return x}function A(b){for(var F=1;F<arguments.length;F++){var x=arguments[F]!=null?arguments[F]:{};F%2?l(x,!0).forEach(function(E){c(b,E,x[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):l(x).forEach(function(E){Object.defineProperty(b,E,Object.getOwnPropertyDescriptor(x,E))})}return b}function c(b,F,x){return F in b?Object.defineProperty(b,F,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[F]=x,b}function u(b,F){if(!(b instanceof F))throw new TypeError("Cannot call a class as a function")}function h(b,F){for(var x=0;x<F.length;x++){var E=F[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(b,E.key,E)}}function d(b,F,x){return F&&h(b.prototype,F),x&&h(b,x),b}function p(b,F){return F&&(o(F)==="object"||typeof F=="function")?F:m(b)}function f(b){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)},f(b)}function m(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function g(b,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(F&&F.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),F&&v(b,F)}function v(b,F){return v=Object.setPrototypeOf||function(E,M){return E.__proto__=M,E},v(b,F)}var w="Select...",B=function(b){g(F,b);function F(x){var E;return u(this,F),E=p(this,f(F).call(this,x)),E.state={selected:E.parseValue(x.value,x.options)||{label:typeof x.placeholder>"u"?w:x.placeholder,value:""},isOpen:!1},E.dropdownRef=(0,e.createRef)(),E.mounted=!0,E.handleDocumentClick=E.handleDocumentClick.bind(m(E)),E.fireChangeEvent=E.fireChangeEvent.bind(m(E)),E}return d(F,[{key:"componentDidUpdate",value:function(E){if(this.props.value!==E.value)if(this.props.value){var M=this.parseValue(this.props.value,this.props.options);M!==this.state.selected&&this.setState({selected:M})}else this.setState({selected:{label:typeof this.props.placeholder>"u"?w:this.props.placeholder,value:""}})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,!1)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,!1)}},{key:"handleMouseDown",value:function(E){this.props.onFocus&&typeof this.props.onFocus=="function"&&this.props.onFocus(this.state.isOpen),!(E.type==="mousedown"&&E.button!==0)&&(E.stopPropagation(),E.preventDefault(),this.props.disabled||this.setState({isOpen:!this.state.isOpen}))}},{key:"parseValue",value:function(E,M){var H;if(typeof E=="string")for(var O=0,U=M.length;O<U;O++)if(M[O].type==="group"){var y=M[O].items.filter(function(I){return I.value===E});y.length&&(H=y[0])}else typeof M[O].value<"u"&&M[O].value===E&&(H=M[O]);return H||E}},{key:"setValue",value:function(E,M){var H={selected:{value:E,label:M},isOpen:!1};this.fireChangeEvent(H),this.setState(H)}},{key:"fireChangeEvent",value:function(E){E.selected!==this.state.selected&&this.props.onChange&&this.props.onChange(E.selected)}},{key:"renderOption",value:function(E){var M,H=E.value;typeof H>"u"&&(H=E.label||E);var O=E.label||E.value||E,U=H===this.state.selected.value||H===this.state.selected,y=(M={},c(M,"".concat(this.props.baseClassName,"-option"),!0),c(M,E.className,!!E.className),c(M,"is-selected",U),M),I=(0,t.default)(y),R=Object.keys(E.data||{}).reduce(function(D,k){return A({},D,c({},"data-".concat(k),E.data[k]))},{});return e.default.createElement("div",a({key:H,className:I,onMouseDown:this.setValue.bind(this,H,O),onClick:this.setValue.bind(this,H,O),role:"option","aria-selected":U?"true":"false"},R),O)}},{key:"buildMenu",value:function(){var E=this,M=this.props,H=M.options,O=M.baseClassName,U=H.map(function(y){if(y.type==="group"){var I=e.default.createElement("div",{className:"".concat(O,"-title")},y.name),R=y.items.map(function(D){return E.renderOption(D)});return e.default.createElement("div",{className:"".concat(O,"-group"),key:y.name,role:"listbox",tabIndex:"-1"},I,R)}else return E.renderOption(y)});return U.length?U:e.default.createElement("div",{className:"".concat(O,"-noresults")},"No options found")}},{key:"handleDocumentClick",value:function(E){this.mounted&&(this.dropdownRef.current.contains(E.target)||this.state.isOpen&&this.setState({isOpen:!1}))}},{key:"isValueSelected",value:function(){return typeof this.state.selected=="string"||this.state.selected.value!==""}},{key:"render",value:function(){var E,M,H,O,U,y=this.props,I=y.baseClassName,R=y.controlClassName,D=y.placeholderClassName,k=y.menuClassName,V=y.arrowClassName,Z=y.arrowClosed,N=y.arrowOpen,_=y.className,z=this.props.disabled?"Dropdown-disabled":"",ie=typeof this.state.selected=="string"?this.state.selected:this.state.selected.label,T=(0,t.default)((E={},c(E,"".concat(I,"-root"),!0),c(E,_,!!_),c(E,"is-open",this.state.isOpen),E)),q=(0,t.default)((M={},c(M,"".concat(I,"-control"),!0),c(M,R,!!R),c(M,z,!!z),M)),ge=(0,t.default)((H={},c(H,"".concat(I,"-placeholder"),!0),c(H,D,!!D),c(H,"is-selected",this.isValueSelected()),H)),he=(0,t.default)((O={},c(O,"".concat(I,"-menu"),!0),c(O,k,!!k),O)),Ae=(0,t.default)((U={},c(U,"".concat(I,"-arrow"),!0),c(U,V,!!V),U)),$=e.default.createElement("div",{className:ge},ie),ce=this.state.isOpen?e.default.createElement("div",{className:he,"aria-expanded":"true"},this.buildMenu()):null;return e.default.createElement("div",{ref:this.dropdownRef,className:T},e.default.createElement("div",{className:q,onMouseDown:this.handleMouseDown.bind(this),onTouchEnd:this.handleMouseDown.bind(this),"aria-haspopup":"listbox"},$,e.default.createElement("div",{className:"".concat(I,"-arrow-wrapper")},N&&Z?this.state.isOpen?N:Z:e.default.createElement("span",{className:Ae}))),ce)}}]),F}(e.Component);B.defaultProps={baseClassName:"Dropdown"};var C=B;n.default=C})(yz);const BA=Zl(yz);function kVe({selectedTrait:n,selectedVRM:e}){const{manifest:t,loraDataGenerator:r,sceneElements:i}=X.useContext(lr),[s,o]=Ce.useState([]),[a,l]=Ce.useState(null),A=u=>{(t==null?void 0:t.loras)!=null&&(l(t.loras[u.value]),console.log(t.loras[u.value]))},c=async()=>{const u=i.parent;u.remove(i),await r.createLoraData(a),u.add(i)};return Ce.useEffect(()=>{if((t==null?void 0:t.loras)!=null){const u=t.loras.map((h,d)=>({value:d,label:h.name,description:h.description,manifest:h.manifest}));o(u)}},[t]),L.jsx("div",{children:L.jsxs("div",{className:Ge.InformationContainerPos,children:[L.jsx(ka,{title:"Lora Creation",width:180,right:20}),L.jsxs("div",{className:Ge.scrollContainer,children:[L.jsx("div",{className:Ge.traitInfoTitle,children:"Lora Manifests"}),L.jsx(BA,{className:Ge.dropdownControl,options:s,onChange:A,placeholder:"Select an option"}),";",L.jsx("div",{className:Ge.traitInfoText,children:(a==null?void 0:a.description)||""}),a!=null&&L.jsx("div",{className:Ge.actionButton,onClick:c,children:L.jsx("div",{children:"  Create Lora Data "})})]})]})})}function DVe({selectedTrait:n,selectedVRM:e}){const{manifest:t,spriteAtlasGenerator:r,sceneElements:i}=X.useContext(lr),[s,o]=Ce.useState([]),[a,l]=Ce.useState(""),[A,c]=Ce.useState(null),u=d=>{(t==null?void 0:t.sprites)!=null&&(l(t.sprites[d.value].description),c(t.sprites[d.value]))},h=async()=>{const d=i.parent;d.remove(i),await r.createSpriteAtlas(A),d.add(i)};return Ce.useEffect(()=>{if((t==null?void 0:t.sprites)!=null){const d=t.sprites.map((p,f)=>({value:f,label:p.name,description:p.description,manifest:p.manifest}));o(d)}},[t]),L.jsx("div",{children:L.jsxs("div",{className:Ge.InformationContainerPos,children:[L.jsx(ka,{title:"Sprite Creation",width:180,right:20}),L.jsxs("div",{className:Ge.scrollContainer,children:[L.jsx("div",{className:Ge.traitInfoTitle,children:"Sprite Manifests"}),L.jsx(BA,{className:Ge.dropdownControl,options:s,onChange:u,placeholder:"Select an option"}),";",L.jsx("div",{className:Ge.traitInfoText,children:a||""}),A!=null&&L.jsx("div",{className:Ge.actionButton,onClick:h,children:L.jsx("div",{children:"  Create Sprite Data "})})]})]})})}const EV=4096;function LVe({selectedTrait:n,traitGroupName:e}){const{manifest:t,thumbnailsGenerator:r,sceneElements:i,characterManager:s}=X.useContext(lr),[o,a]=Ce.useState([]),[l,A]=Ce.useState(""),[c,u]=Ce.useState(""),[h,d]=Ce.useState(""),[p,f]=Ce.useState(!1),[m,g]=Ce.useState(512),[v,w]=Ce.useState(512),[B,C]=Ce.useState(.1),[b,F]=Ce.useState(.1),[x,E]=Ce.useState("center"),[M,H]=Ce.useState("center"),[O,U]=Ce.useState("center"),[y,I]=Ce.useState("head"),[R,D]=Ce.useState("chest"),[k,V]=Ce.useState(!0),[Z,N]=Ce.useState(!1),_=[{label:"center"},{label:"left"},{label:"right"}],z=[{label:"center"},{label:"top"},{label:"bottom"}],ie=[{label:"center"},{label:"front"},{label:"back"}],T=[{label:"head"},{label:"neck"},{label:"chest"},{label:"spine"},{label:"hips"},{label:"upperLeg"},{label:"lowerLeg"},{label:"foot"}],q=de=>{(t==null?void 0:t.thumbnails)!=null&&(A(t.thumbnails[de.value].description),d(t.thumbnails[de.value].manifest),u(t.thumbnails[de.value].name))},ge=(de,ee,K,se)=>isNaN(de)?se:de>K?K:de<ee?ee:de,he=de=>{const ee=parseInt(de.target.value);g(ge(ee,1,EV,512))},Ae=de=>{const ee=parseInt(de.target.value);w(ge(ee,1,EV,512))},$=de=>{const ee=parseFloat(de.target.value);C(ge(ee,0,1,.1))},ce=de=>{const ee=parseFloat(de.target.value);F(ge(ee,0,1,.1))},me=de=>{f(de)},_e=async()=>{const de=i.parent;de.remove(i),await r.createThumbnails(t.thumbnails[0]),de.add(i)},P=(de=!0)=>({topFrameOffset:b,bottomFrameOffset:B,thumbnailsWidth:m,thumbnailsHeight:v,backgroundColor:[0,0,0,0],thumbnailsCollection:[{traitGroup:e,cameraPosition:M+"-"+O+"-"+x,topBoneName:y==="upperLeg"||y==="lowerLeg"||y==="foot"?"left"+y[0].toUpperCase()+y.slice(1):y,topBoneMaxVertex:k,bottomBoneName:R==="upperLeg"||R==="lowerLeg"||y==="foot"?"left"+R[0].toUpperCase()+R.slice(1):R,bottomBoneMaxVertex:Z,saveOnlyIDs:de?null:n.id}]}),fe=async(de=!1)=>{s.storeCurrentAvatar();const ee=i.parent;ee.remove(i),de?await r.createThumbnailsWithObjectData(P(),!1,null,e+"_thumbnails"):await r.createThumbnailsWithObjectData(P(!1),!1),ee.add(i),s.loadStoredAvatar()};return Ce.useEffect(()=>{if((t==null?void 0:t.thumbnails)!=null){const de=t.thumbnails.map((ee,K)=>({value:K,label:ee.name,description:ee.description,manifest:ee.manifest}));a(de)}},[t]),L.jsx("div",{children:L.jsxs("div",{className:Ge.InformationContainerPos,children:[L.jsx(ka,{title:"Thumbnail Creation",width:180,right:20}),L.jsxs("div",{className:Ge.scrollContainer,children:[L.jsxs("div",{className:Ge.tabHolder,children:[L.jsx("div",{className:Ge.tabButton+(p?"":" "+Ge.tabButtonSelected),onClick:()=>{me(!1)},children:L.jsxs("div",{children:["  ","Custom"," "]})}),L.jsx("div",{className:Ge.tabButton+(p?" "+Ge.tabButtonSelected:""),onClick:()=>{me(!0)},children:L.jsxs("div",{children:["  ","Manifest"," "]})})]}),L.jsx("br",{}),p?L.jsxs(L.Fragment,{children:[L.jsx("div",{className:Ge.traitInfoTitle+" "+Ge.centerAlign,children:"Thumbnail Manifests"}),L.jsx(BA,{className:Ge.dropdownControl,options:o,value:c,onChange:q,placeholder:"Select an option"}),";",L.jsx("div",{className:Ge.traitInfoText,children:l||""}),h!=""&&L.jsx("div",{className:Ge.actionButton,onClick:_e,children:L.jsx("div",{children:"  Create Thumbnails "})})]}):L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:Ge.traitInfoText,children:[L.jsx("div",{className:Ge.traitInfoTitle+" "+Ge.centerAlign,style:{margin:"10px 0px 10px"},children:"Resolution"}),"Width ",L.jsx("input",{value:m,className:Ge["input-box"],step:1,onChange:de=>{g(de.target.value)},onBlur:he}),L.jsx("br",{}),"Height ",L.jsx("input",{value:v,className:Ge["input-box"],step:1,onChange:de=>{w(de.target.value)},onBlur:Ae}),L.jsx("br",{}),"Top Spacing ",L.jsx("input",{value:B,className:Ge["input-box"],step:.1,onChange:de=>{C(de.target.value)},onBlur:$}),L.jsx("br",{}),"Bottom Spacing ",L.jsx("input",{value:b,className:Ge["input-box"],step:.1,onChange:de=>{F(de.target.value)},onBlur:ce}),L.jsx("br",{}),L.jsx("div",{className:Ge.traitInfoTitle+" "+Ge.centerAlign,style:{margin:"20px"},children:"Camera Position"})]}),L.jsxs("div",{className:Ge.dropdownFlex,children:[L.jsx("div",{className:Ge.traitInfoTitle,style:{margin:"0px"},children:"X"}),L.jsx(BA,{className:Ge.dropdownControlSmall,options:_,onChange:de=>{H(de.label)},value:M})]}),L.jsxs("div",{className:Ge.dropdownFlex,children:[L.jsx("div",{className:Ge.traitInfoTitle,style:{margin:"0px"},children:"Y"}),L.jsx(BA,{className:Ge.dropdownControlSmall,options:z,onChange:de=>{U(de.label)},value:O})]}),L.jsxs("div",{className:Ge.dropdownFlex,children:[L.jsx("div",{className:Ge.traitInfoTitle,style:{margin:"0px"},children:"Z"}),L.jsx(BA,{className:Ge.dropdownControlSmall,options:ie,onChange:de=>{E(de.label)},value:x})]}),L.jsx("div",{className:Ge.traitInfoTitle+" "+Ge.centerAlign,style:{margin:"30px 0px 30px"},children:"Target Bones"}),L.jsxs("div",{className:Ge.dropdownFlex,style:{justifyContent:"space-between"},children:[L.jsx("div",{className:Ge.traitInfoTitle,style:{margin:"0px"},children:"Top"}),L.jsx(BA,{className:Ge.dropdownControlSmall,options:T,onChange:de=>{I(de.label)},value:y})]}),L.jsxs("div",{className:Ge.dropdownFlex,style:{justifyContent:"space-between"},children:[L.jsx("div",{className:Ge.traitInfoTitle,style:{margin:"0px"},children:"Bottom"}),L.jsx(BA,{className:Ge.dropdownControlSmall,options:T,onChange:de=>{D(de.label)},value:R})]}),L.jsxs("div",{style:{textAlign:"left"},children:[L.jsxs("div",{className:Ge.checkboxFlex,style:{marginTop:"20px"},children:[L.jsx("input",{type:"checkbox",checked:k,onChange:de=>{V(de.target.checked)}}),L.jsx("div",{className:Ge.traitInfoText,style:{margin:"0px",fontSize:"12px"},children:`Top bone ${k?"uses Top":"uses Low"} Vertex`})]}),L.jsxs("div",{className:Ge.checkboxFlex,style:{marginTop:"10px"},children:[L.jsx("input",{type:"checkbox",checked:Z,onChange:de=>{N(de.target.checked)}}),L.jsx("div",{className:Ge.traitInfoText,style:{margin:"0px",fontSize:"12px"},children:`Bottom bone ${Z?"uses Top":"uses Low"} Vertex`})]})]}),e==""?L.jsx("div",{className:Ge.traitInfoText+" "+Ge.centerAlign,style:{marginTop:"40px"},children:"Please choose a trait category in the left side menu."}):L.jsxs(L.Fragment,{children:[L.jsx("div",{className:Ge.traitInfoTitle+" "+Ge.centerAlign,style:{marginTop:"20px"},children:"Generate"}),L.jsx("div",{className:Ge.traitInfoText+" "+Ge.centerAlign,style:{margin:"0px auto 20px"},children:"( "+e+" )"}),L.jsxs("div",{className:Ge.simpleFlex,style:{marginTop:"0px"},children:[L.jsx("div",{className:Ge.actionButton,style:{margin:"0px"},onClick:()=>{fe(!1)},children:L.jsx("div",{children:"  Current "})}),L.jsx("div",{className:Ge.actionButton,style:{margin:"0px"},onClick:()=>{fe(!0)},children:L.jsx("div",{children:"  All "})})]})]})]})]})]})})}function VVe({selectedTrait:n,selectedVRM:e,traitGroupName:t}){const[r,i]=X.useState(""),s=o=>{o!=r?i(o):i("")};return L.jsxs("div",{children:[r=="Information"&&L.jsx(NVe,{selectedTrait:n,selectedVRM:e}),r=="LoraCreation"&&L.jsx(kVe,{selectedTrait:n,selectedVRM:e}),r=="SpriteCreation"&&L.jsx(DVe,{selectedTrait:n,selectedVRM:e}),r=="ThumbnailCreation"&&L.jsx(LVe,{selectedTrait:n,traitGroupName:t}),L.jsxs("div",{className:YI.InformationContainerPos,children:[L.jsx(ka,{title:"Tools",width:90,right:0}),L.jsx("div",{className:YI.scrollContainer,children:L.jsxs("div",{className:YI.optionsContainer,children:[L.jsx("div",{onClick:()=>{s("Information")},children:L.jsx(DA,{size:56,icon:dVe,rarity:r=="Information"?"mythic":"none"})},"Information"),L.jsx("div",{onClick:()=>{s("LoraCreation")},children:L.jsx(DA,{size:56,icon:fVe,rarity:r=="LoraCreation"?"mythic":"none"})},"LoraCreation"),L.jsx("div",{onClick:()=>{s("SpriteCreation")},children:L.jsx(DA,{size:56,icon:hVe,rarity:r=="SpriteCreation"?"mythic":"none"})},"SpriteCreation"),L.jsx("div",{onClick:()=>{s("ThumbnailCreation")},children:L.jsx(DA,{size:56,icon:pVe,rarity:r=="ThumbnailCreation"?"mythic":"none"})},"ThumbnailCreation")]})})]})]})}function PVe(){const{isLoading:n,setViewMode:e,setIsLoading:t}=X.useContext(Ci),{toggleDebugMode:r,characterManager:i,animationManager:s,moveCamera:o,loraDataGenerator:a,spriteAtlasGenerator:l,thumbnailsGenerator:A,sceneElements:c}=X.useContext(lr),{playSound:u}=X.useContext(bs),{isMute:h}=X.useContext(Bs),{t:d}=Ce.useContext(xs),p=()=>{!h&&u("backNextButton"),i.removeCurrentCharacter(),i.removeCurrentManifest(),e(at.CREATE),r(!1)},[f,m]=X.useState(null),[g,v]=X.useState(null),[w,B]=X.useState(""),[C,b]=X.useState(null),[F,x]=X.useState(null),[E,M]=X.useState(""),[H,O]=X.useState(!1),[U,y]=X.useState({background:"#ffffff"}),I=()=>{!h&&u("backNextButton"),e(at.SAVE),r(!1)},R=()=>{t(!0),m(null),i.loadRandomTraits().then(()=>{console.log("success"),w!=""&&b(i.getCurrentTraitData(w)),t(!1)}).catch(Ae=>{t(!1),console.error("Error loading random traits:",Ae.message)})},D=Ae=>{y({background:Ae.hex})},k=Ae=>{y({background:Ae.hex}),i.setTraitColor(w,Ae.hex)},V=async Ae=>{const $=Sl(Ae.name),ce=URL.createObjectURL(Ae);await s.loadAnimation(ce,!1,0,!0,"",$),M(s.getCurrentAnimationName())},Z=Ae=>{if(O(!1),w!=""){t(!0);const $=URL.createObjectURL(Ae);i.loadCustomTexture(w,$).then(()=>{t(!1)})}else console.warn("Please select a group trait first.")},N=Ae=>{if(O(!1),w!=""){t(!0);const $=URL.createObjectURL(Ae);i.loadCustomTrait(w,$).then(()=>{t(!1)})}else console.warn("Please select a group trait first.")},_=Ae=>{O(!1),t(!0),i.loadTrait(Ae.traitGroup.trait,Ae.id).then(()=>{t(!1),b(Ae)})},z=Ae=>{O(!1),i.removeTrait(Ae),b(null)},ie=Ae=>{O(!1),t(!0),i.loadRandomTrait(Ae).then(()=>{t(!1),b(i.getCurrentTraitData(Ae))})},T=Ae=>{O(!1);const $=Array.from(Ae),ce=[],me=_e=>new Promise((P,fe)=>{var de;if(_e&&_e.name.toLowerCase().endsWith(".json")){const ee=new FileReader,K=`${(de=i.manifestData)==null?void 0:de.getAssetsDirectory()}/anata/_thumbnails/t_${_e.name.split("_")[0]}.jpg`;console.log(K),ee.onload=function(se){try{const ye=JSON.parse(se.target.result);ye.thumb=K,ce.push(ye),P()}catch(ye){console.error("Error parsing the JSON file:",ye),fe(ye)}},ee.readAsText(_e)}});Promise.all($.map(me)).then(()=>{ce.length>0&&(m(ce),t(!0),i.loadTraitsFromNFTObject(ce[0]).then(()=>{t(!1)}))}).catch(_e=>{console.error("Error processing files:",_e)})},q=async Ae=>{const $=Ae[0];$&&$.name.toLowerCase().endsWith(".fbx")&&V($),$&&($.name.toLowerCase().endsWith(".png")||$.name.toLowerCase().endsWith(".jpg"))&&Z($),$&&$.name.toLowerCase().endsWith(".vrm")&&N($),$&&$.name.toLowerCase().endsWith(".json")&&T(Ae)},ge=Ae=>{!h&&u("optionClick"),O(!1),w!==Ae.trait?(v(i.getTraits(Ae.trait)),B(Ae.trait),b(i.getCurrentTraitData(Ae.trait)),x(i.getCurrentTraitVRM(Ae.trait)),o({targetY:Ae.cameraTarget.height,distance:Ae.cameraTarget.distance})):(v(null),B(""),b(null),o({targetY:.8,distance:3.2}))},he=()=>{O(!1);var Ae=document.createElement("input");Ae.type="file",Ae.accept=".vrm",Ae.onchange=$=>{var ce=$.target.files[0];if(ce.name.endsWith(".vrm")){const me=URL.createObjectURL(ce);t(!0),i.loadCustomTrait(w,me).then(()=>{t(!1)})}},Ae.click()};return L.jsxs("div",{className:Tn.container,children:[L.jsx("div",{className:`loadingIndicator ${n?"active":""}`,children:L.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),L.jsx("div",{className:"sectionTitle",children:d("pageTitles.chooseAppearance")}),L.jsx(I0,{onFilesDrop:q}),L.jsxs("div",{className:Tn.sideMenu,children:[L.jsx(ka,{title:"Appearance",left:20}),L.jsx("div",{className:Tn.bottomLine}),L.jsx("div",{className:Tn.scrollContainer,children:L.jsx("div",{className:Tn["editor-container"],children:i.getGroupTraits().map((Ae,$)=>L.jsxs("div",{className:Tn.editorButton,onClick:()=>{ge(Ae)},children:[L.jsx(DA,{size:56,icon:Ae.fullIconSvg,rarity:w!==Ae.trait?"none":"mythic"}),L.jsx("div",{className:Tn.editorText,children:Ae.name})]},"options_"+$))})})]}),!!g&&L.jsxs("div",{className:Tn.selectorContainerPos,children:[L.jsx(ka,{title:w,width:130,left:20}),C&&L.jsx("div",{className:Tn.selectorColorPickerButton,onClick:()=>{O(!H)},children:L.jsx("img",{className:Tn.selectorColorPickerImg,src:yCe})}),!!H&&L.jsx("div",{draggable:!1,className:Tn.selectorColorPickerUI,children:L.jsx(kLe,{draggable:!1,width:"200px",color:U.background,onChange:D,onChangeComplete:k})}),L.jsx("div",{className:Tn.bottomLine}),L.jsx("div",{className:Tn.scrollContainerOptions,children:L.jsxs("div",{className:Tn["selector-container"],children:[L.jsx("div",{className:`${Tn.selectorButton}`,onClick:()=>{ie(w)},children:L.jsx(DA,{size:56,icon:vCe,rarity:"none"})},"randomize-trait"),i.isTraitGroupRequired(w)?L.jsx(L.Fragment,{}):L.jsx("div",{className:`${Tn.selectorButton}`,icon:H3,onClick:()=>{z(w)},children:L.jsx(DA,{size:56,icon:H3,rarity:C==null?"mythic":"none"})},"no-trait"),g.map(Ae=>{let $=Ae.id===(C==null?void 0:C.id);return L.jsx("div",{className:`${Tn.selectorButton}`,onClick:()=>{_(Ae)},children:L.jsx(DA,{size:56,icon:Ae.fullThumbnail,rarity:$?"mythic":"none"})},Ae.id)})]})}),L.jsx("div",{className:Tn.uploadContainer,children:L.jsx("div",{className:Tn.uploadButton,onClick:he,children:L.jsx("div",{children:"Upload "})})})]}),L.jsx(yQ,{jsonSelectionArray:f}),L.jsx(VVe,{selectedTrait:C,selectedVRM:F,traitGroupName:w}),L.jsx(Eb,{loadedAnimationName:E,randomize:R}),L.jsxs("div",{className:Tn.buttonContainer,children:[L.jsx(sn,{theme:"light",text:d("callToAction.back"),size:14,className:Tn.buttonLeft,onClick:p}),i.canDownload()&&L.jsx(sn,{theme:"light",text:d("callToAction.next"),size:14,className:Tn.buttonRight,onClick:I})]})]})}const OVe="_InformationContainerPos_rgqwy_1",WVe="_traitInfoTitle_rgqwy_13",ZVe="_traitInfoText_rgqwy_21",GVe="_flexSelect_rgqwy_30",JVe="_scrollContainer_rgqwy_65",HVe="_checked_rgqwy_90",zVe="_checkmark_rgqwy_94",YVe="_checkboxHolder_rgqwy_107",XVe="_buttonContainer_rgqwy_114",jVe="_buttonLeft_rgqwy_123",KVe="_buttonRight_rgqwy_127",$Ve="_buttonCenter_rgqwy_131",gi={InformationContainerPos:OVe,traitInfoTitle:WVe,traitInfoText:ZVe,flexSelect:GVe,"arrow-button":"_arrow-button_rgqwy_37","left-button":"_left-button_rgqwy_51","right-button":"_right-button_rgqwy_58",scrollContainer:JVe,"custom-checkbox":"_custom-checkbox_rgqwy_76","checkbox-container":"_checkbox-container_rgqwy_81",checked:HVe,checkmark:zVe,checkboxHolder:YVe,buttonContainer:XVe,buttonLeft:jVe,buttonRight:KVe,buttonCenter:$Ve},qVe="_InformationContainerPos_11mqa_2",ePe="_scrollContainer_11mqa_16",tPe="_traitInfoTitle_11mqa_28",nPe="_traitInfoText_11mqa_38",rPe="_flexSelect_11mqa_66",iPe="_checked_11mqa_124",sPe="_checkmark_11mqa_128",oPe="_checkboxHolder_11mqa_141",Zn={InformationContainerPos:qVe,scrollContainer:ePe,traitInfoTitle:tPe,traitInfoText:nPe,"input-box":"_input-box_11mqa_47",flexSelect:rPe,"arrow-button":"_arrow-button_11mqa_76","left-button":"_left-button_11mqa_91","right-button":"_right-button_11mqa_98","anim-button":"_anim-button_11mqa_105","custom-checkbox":"_custom-checkbox_11mqa_110","checkbox-container":"_checkbox-container_11mqa_115",checked:iPe,checkmark:sPe,checkboxHolder:oPe};function uR({model:n,name:e,files:t,index:r,nextVrm:i,previousVrm:s}){const{characterManager:o}=X.useContext(lr),[a,l]=Ce.useState(0),[A,c]=Ce.useState(0),[u,h]=Ce.useState(0),[d,p]=Ce.useState(0),[f,m]=Ce.useState(0),[g,v]=Ce.useState(0),[w,B]=Ce.useState(0),[C,b]=Ce.useState(0),[F,x]=Ce.useState(0),[E,M]=Ce.useState(0);return Ce.useEffect(()=>{if(n!=null){const H=Ef(n,"Mesh"),O=Ef(n,"SkinnedMesh");l(H.length),c(O.length);const U=H.concat(O),{stdMats:y,stdCutoutpMats:I,stdTranspMats:R,mToonMats:D,mToonCutoutMats:k,mToonTranspMats:V}=ufe(U);h(y.length),p(R.length),m(I.length),v(D.length),B(V.length),b(k.length);const{triangles:Z,bones:N}=o.getBoneTriangleCount();x(Z),M(N)}},[n]),n!=null?L.jsx("div",{children:L.jsxs("div",{className:Zn.InformationContainerPos,children:[L.jsx(ka,{title:"Model Information",width:180,right:20}),L.jsxs("div",{className:Zn.scrollContainer,children:[L.jsxs("div",{className:Zn.flexSelect,children:[(t==null?void 0:t.length)>1?L.jsx("div",{className:`${Zn["arrow-button"]} ${Zn["left-button"]}`,onClick:s}):L.jsx(L.Fragment,{}),e&&L.jsx("div",{style:{textAlign:"center"},children:L.jsx("div",{className:Zn.traitInfoTitle,style:{margin:"auto",fontSize:"14px",width:"200px",textAlign:"center",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:e})}),(t==null?void 0:t.length)>1?L.jsx("div",{className:`${Zn["arrow-button"]} ${Zn["right-button"]}`,onClick:i}):L.jsx(L.Fragment,{})]}),L.jsx("div",{className:Zn.traitInfoTitle,children:"Geometry info:"}),L.jsxs("div",{className:Zn.traitInfoText,children:["Meshes: ",a]}),L.jsxs("div",{className:Zn.traitInfoText,children:["SkinnedMeshes: ",A]}),L.jsxs("div",{className:Zn.traitInfoText,children:["Triangles: ",F]}),L.jsxs("div",{className:Zn.traitInfoText,children:["Bones: ",E]}),L.jsx("div",{className:Zn.traitInfoTitle,children:"Standard Material Count:"}),L.jsxs("div",{className:Zn.traitInfoText,children:["opaque: ",u]}),L.jsxs("div",{className:Zn.traitInfoText,children:["cutout: ",f]}),L.jsxs("div",{className:Zn.traitInfoText,children:["transparent: ",d]}),L.jsx("div",{className:Zn.traitInfoTitle,children:"MToon Material Count:"}),L.jsxs("div",{className:Zn.traitInfoText,children:["opaque: ",g]}),L.jsxs("div",{className:Zn.traitInfoText,children:["cutout: ",C]}),L.jsxs("div",{className:Zn.traitInfoText,children:["transparent: ",w]})]})]})}):L.jsx(L.Fragment,{})}function aPe(){const{isLoading:n,setViewMode:e,setIsLoading:t}=X.useContext(Ci),{manifest:r,toggleDebugMode:i,characterManager:s,animationManager:o,loraDataGenerator:a,spriteAtlasGenerator:l,sceneElements:A}=X.useContext(lr),[c,u]=Ce.useState(null),[h,d]=Ce.useState(""),[p,f]=X.useState(""),{playSound:m}=X.useContext(bs),{isMute:g}=X.useContext(Bs),[v,w]=X.useState(null),B=()=>{!g&&m("backNextButton"),s.removeCurrentCharacter(),s.removeCurrentManifest(),i(!1),e(at.LANDING)},C=()=>{const U=De.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:Cn(De.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:Cn(De.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:Cn(De.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:Cn(De.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:U===0||U==2,exportMtoonAtlas:U===1||U==2,ktxCompression:De.merge_options_ktx_compression||!1,twoSidedMaterial:De.mergeOptions_two_sided_mat||!1}},b=(U,y=!1)=>{console.log(y),(async()=>{await s.loadTraitsFromNFTObject(v[U]),(De.mergeOptions_download_vrm==null?!0:De.mergeOptions_download_vrm)&&await s.downloadVRM(v[U].name,C());const D=new ep,k=A.parent;k.remove(A);const V=De.mergeOptions_download_lora==null?!0:De.mergeOptions_download_lora;if(V===!0){const N=r.loras.map(async _=>a.createLoraData(_,D));await Promise.all(N)}const Z=De.mergeOptions_download_sprites==null?!0:De.mergeOptions_download_sprites;if(Z===!0){const N=r.sprites.map(async _=>l.createSpriteAtlas(_,D));await Promise.all(N)}(V===!0||Z===!0)&&D.saveZip(v[U].name),k.add(A),U<v.length-1?b(U+1):t(!1)})()},F=()=>{t(!0),b(0,!0)},{t:x}=Ce.useContext(xs),E=async U=>{if(s.getCurrentCharacterModel()){const I=Sl(U.name),R=URL.createObjectURL(U);await o.loadAnimation(R,!1,0,!0,"",I),f(o.getCurrentAnimationName()),URL.revokeObjectURL(R)}else console.warn("Please load a vrm model to test animations.")},M=async U=>{const y=URL.createObjectURL(U);await s.loadOptimizerCharacter(y),URL.revokeObjectURL(y);const I=Sl(U.name);d(I),u(s.getCurrentCharacterModel())},H=U=>{const y=Array.from(U),I=[],R=D=>new Promise((k,V)=>{var Z;if(D&&D.name.toLowerCase().endsWith(".json")){const N=new FileReader,_=`${(Z=s.manifestData)==null?void 0:Z.getAssetsDirectory()}/anata/_thumbnails/t_${D.name.split("_")[0]}.jpg`;N.onload=function(z){try{const ie=JSON.parse(z.target.result);ie.thumb=_,I.push(ie),k()}catch(ie){console.error("Error parsing the JSON file:",ie),V(ie)}},N.readAsText(D)}});Promise.all(y.map(R)).then(()=>{I.length>0&&(w(I),t(!0),s.loadTraitsFromNFTObject(I[0]).then(()=>{t(!1)}))}).catch(D=>{console.error("Error processing files:",D)})},O=async U=>{const y=U[0];console.log("anim"),y&&y.name.toLowerCase().endsWith(".fbx")&&(console.log("anim2"),E(y)),y&&y.name.toLowerCase().endsWith(".vrm")&&M(y),y&&y.name.toLowerCase().endsWith(".json")&&H(U)};return L.jsxs("div",{className:gi.container,children:[L.jsx("div",{className:`loadingIndicator ${n?"active":""}`,children:L.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),L.jsx("div",{className:"sectionTitle",children:"Batch Download"}),L.jsx(I0,{onFilesDrop:O}),L.jsx(xb,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Download Options"}),L.jsx(uR,{model:c}),L.jsx(yQ,{jsonSelectionArray:v}),L.jsx(Eb,{loadedAnimationName:p}),L.jsxs("div",{className:gi.buttonContainer,children:[L.jsx(sn,{theme:"light",text:x("callToAction.back"),size:14,className:gi.buttonLeft,onClick:B}),(v==null?void 0:v.length)==1&&L.jsx(sn,{theme:"light",text:"Download",size:14,className:gi.buttonRight,onClick:F}),(v==null?void 0:v.length)>1&&L.jsx(sn,{theme:"light",text:"Download All",size:14,className:gi.buttonRight,onClick:F})]})]})}function lPe(){const{isLoading:n,setViewMode:e}=X.useContext(Ci),{manifest:t,characterManager:r,animationManager:i,sceneElements:s,loraDataGenerator:o,spriteAtlasGenerator:a}=X.useContext(lr),{playSound:l}=X.useContext(bs),{isMute:A}=X.useContext(Bs),[c,u]=Ce.useState(null),[h,d]=Ce.useState(""),[p,f]=Ce.useState([]),[m,g]=Ce.useState(0),[v,w]=X.useState("T-Pose"),B=()=>{!A&&l("backNextButton"),r.removeCurrentCharacter(),r.removeCurrentManifest(),e(at.LANDING)},C=()=>{const I=De.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:Cn(De.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:Cn(De.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:Cn(De.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:Cn(De.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:I===0||I==2,exportMtoonAtlas:I===1||I==2,ktxCompression:De.merge_options_ktx_compression||!1,twoSidedMaterial:De.mergeOptions_two_sided_mat||!1}},b=async()=>{for(let I=0;I<p.length;I++)try{await O(p[I]);const R=Sl(p[I].name);await F(R)}catch(R){console.error(`Error processing ${p[I].name}:`,R)}},F=async I=>{await(async()=>{var ie;I=I||h+"_merged",C(),(De.mergeOptions_download_vrm_preview==null?!0:De.mergeOptions_download_vrm_preview)&&r.savePortraitScreenshot(I+"_portrait",512,1024,1.5,-.1),(De.mergeOptions_download_vrm==null?!0:De.mergeOptions_download_vrm)&&await r.downloadVRM(I+"_merged",C());const V=new ep,Z=s.parent;Z.remove(s);const N=(ie=r.getCurrentOptimizerCharacterModel().data)==null?void 0:ie.isVRM0;N&&Z.rotateY(3.14159);const _=De.mergeOptions_download_lora==null?!0:De.mergeOptions_download_lora;if(_===!0){const T=t.loras.map(async q=>o.createLoraData(q,V));await Promise.all(T)}const z=De.mergeOptions_download_sprites==null?!0:De.mergeOptions_download_sprites;if(z===!0){const T=t.sprites.map(async q=>a.createSpriteAtlas(q,V));await Promise.all(T)}(_===!0||z===!0)&&V.saveZip(I),N&&Z.rotateY(-3.14159),Z.add(s)})()},{t:x}=Ce.useContext(xs),E=async I=>{if(r.getCurrentOptimizerCharacterModel()){const D=Sl(I.name),k=URL.createObjectURL(I);await i.loadAnimation(k,!1,0,!0,"",D),w(i.getCurrentAnimationName()),URL.revokeObjectURL(k)}else console.warn("Please load a vrm model to test animations.")},M=()=>{if(m===0)O(p[p.length-1]),g(p.length-1);else{const I=m-1;O(p[I]),g(I)}},H=()=>{if(m>=p.length-1)O(p[0]),g(0);else{const I=m+1;O(p[I]),g(I)}},O=async I=>{const R=URL.createObjectURL(I);await r.loadOptimizerCharacter(R),URL.revokeObjectURL(R);const D=Sl(I.name);d(D),u({...r.getCurrentCharacterModel()})},U=async I=>{O(I[0]);const R=[];for(let D=0;D<I.length;D++){const k=I[D];k&&k.name.toLowerCase().endsWith(".vrm")&&R.push(I[D])}f(R),g(0)},y=async I=>{const R=I[0];R&&R.name.toLowerCase().endsWith(".fbx")&&E(R),R&&R.name.toLowerCase().endsWith(".vrm")&&U(I)};return L.jsxs("div",{className:gi.container,children:[L.jsx("div",{className:`loadingIndicator ${n?"active":""}`,children:L.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),L.jsx("div",{className:"sectionTitle",children:"Optimize your character"}),L.jsx(I0,{onFilesDrop:y}),L.jsx(xb,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Optimizer Options"}),L.jsx(uR,{model:c,name:h,files:p,index:m,nextVrm:H,previousVrm:M}),L.jsx(Eb,{loadedAnimationName:v}),L.jsxs("div",{className:gi.buttonContainer,children:[L.jsx(sn,{theme:"light",text:x("callToAction.back"),size:14,className:gi.buttonLeft,onClick:B}),(p==null?void 0:p.length)>1!=""&&L.jsx(sn,{theme:"light",text:"Download All",size:14,className:gi.buttonRight,onClick:b}),c!=""&&L.jsx(sn,{theme:"light",text:"Download",size:14,className:gi.buttonRight,onClick:F})]})]})}function APe(){const{isLoading:n,setViewMode:e,setIsLoading:t}=X.useContext(Ci),{manifest:r,characterManager:i,animationManager:s,toggleDebugMode:o,loraDataGenerator:a,spriteAtlasGenerator:l,sceneElements:A}=X.useContext(lr),[c,u]=Ce.useState(null),[h,d]=Ce.useState(""),{playSound:p}=X.useContext(bs),{isMute:f}=X.useContext(Bs);X.useState(null);const[m,g]=X.useState(null),[v,w]=X.useState(""),B=()=>{!f&&p("backNextButton"),i.removeCurrentCharacter(),i.removeCurrentManifest(),o(!1),e(at.LANDING)},C=()=>{const y=De.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:Cn(De.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:Cn(De.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:Cn(De.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:Cn(De.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:y===0||y==2,exportMtoonAtlas:y===1||y==2,ktxCompression:De.merge_options_ktx_compression||!1,twoSidedMaterial:De.mergeOptions_two_sided_mat||!1}},b=y=>{const I=m[y].manifestName;(async()=>{(De.mergeOptions_download_vrm_preview==null?!0:De.mergeOptions_download_vrm_preview)&&i.savePortraitScreenshot(I,512,1024,1.5,-.1),(De.mergeOptions_download_vrm==null?!0:De.mergeOptions_download_vrm)&&await i.downloadVRM(I,C());const V=new ep,Z=A.parent;Z.remove(A);const N=De.mergeOptions_download_lora==null?!0:De.mergeOptions_download_lora;if(N===!0){const z=r.loras.map(async ie=>a.createLoraData(ie,V));await Promise.all(z)}const _=De.mergeOptions_download_sprites==null?!0:De.mergeOptions_download_sprites;if(_===!0){const z=r.sprites.map(async ie=>l.createSpriteAtlas(ie,V));await Promise.all(z)}(N===!0||_===!0)&&V.saveZip(m[y].manifestName),Z.add(A),y<m.length-1?(console.log("downloaded "+I),F(y+1)):t(!1)})()},F=async y=>{y==0?(console.log(r.loras[0]),b(y)):(await i.setManifest(m[y]),t(!0),i.loadInitialTraits().then(async()=>{await(R=>new Promise(D=>setTimeout(D,R)))(1),b(y)}))},x=()=>{t(!0),F(0)},{t:E}=Ce.useContext(xs),M=async y=>{if(i.getCurrentCharacterModel()){const R=Sl(y.name),D=URL.createObjectURL(y);await s.loadAnimation(D,!1,0,!0,"",R),w(s.getCurrentAnimationName()),URL.revokeObjectURL(D)}else console.warn("Please load a vrm model to test animations.")},H=async y=>{const I=URL.createObjectURL(y);await i.loadOptimizerCharacter(I),URL.revokeObjectURL(I);const R=Sl(y.name);d(R),u(i.getCurrentCharacterModel())},O=y=>{const I=Array.from(y),R=[],D=k=>new Promise((V,Z)=>{if(k&&k.name.toLowerCase().endsWith(".json")){const N=new FileReader,_=k.name.replace(/\.[^/.]+$/,"");N.onload=function(z){try{const ie=JSON.parse(z.target.result),T=ie.thumbnail;ie.manifestName=_,R.push(ie),V()}catch(ie){console.error("Error parsing the JSON file:",ie),Z(ie)}},N.readAsText(k)}});Promise.all(I.map(D)).then(()=>{R.length>0&&(g(R),i.setManifest(R[0]),t(!0),i.loadInitialTraits().then(()=>{t(!1)}))}).catch(k=>{console.error("Error processing files:",k)})},U=async y=>{const I=y[0];I&&I.name.toLowerCase().endsWith(".fbx")&&M(I),I&&I.name.toLowerCase().endsWith(".vrm")&&H(I),I&&I.name.toLowerCase().endsWith(".json")&&O(y)};return L.jsxs("div",{className:gi.container,children:[L.jsx("div",{className:`loadingIndicator ${n?"active":""}`,children:L.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),L.jsx("div",{className:"sectionTitle",children:"NFT Characters"}),L.jsx(I0,{onFilesDrop:U}),L.jsx(xb,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Download Options"}),L.jsx(uR,{model:c}),L.jsx(yQ,{jsonSelectionArray:m,byManifest:!0}),(m==null?void 0:m.length)>0&&L.jsx(Eb,{loadedAnimationName:v}),L.jsxs("div",{className:gi.buttonContainer,children:[L.jsx(sn,{theme:"light",text:E("callToAction.back"),size:14,className:gi.buttonLeft,onClick:B}),(m==null?void 0:m.length)==1&&L.jsx(sn,{theme:"light",text:"Download",size:14,className:gi.buttonRight,onClick:x}),(m==null?void 0:m.length)>1&&L.jsx(sn,{theme:"light",text:"Download All",size:14,className:gi.buttonRight,onClick:x})]})]})}function cPe(){const{t:n}=Ce.useContext(xs),{setViewMode:e,setIsLoading:t,isLoading:r}=X.useContext(Ci),{playSound:i}=X.useContext(bs),{isMute:s}=X.useContext(Bs),{manifest:o,characterManager:a}=X.useContext(lr);Ce.useState([]);const[l,A]=Ce.useState([]);Ce.useEffect(()=>{c()},[]);const c=async()=>{const f=await vQ();Dwe(f,"the-anata-nft").then(m=>{A(m.nfts),console.log(m.nfts)})},u=()=>{e(at.LANDING),!s&&i("backNextButton")},h=async f=>{t(!0),a.loadManifest(o[f].manifest).then(()=>{e(at.APPEARANCE),a.loadInitialTraits().then(()=>{t(!1)})}),!s&&i("classSelect")},d=()=>{console.log("ttt"),a.loadManifest(o[0].manifest).then(()=>{a.loadAppendManifest(o[1].manifest,!0).then(()=>{console.log(a.manifestData)})})},p=()=>{!s&&i("classMouseOver")};return L.jsxs("div",{className:`${st.container} horizontalScroll`,children:[L.jsx("div",{className:"sectionTitle",children:n("pageTitles.chooseClass")}),L.jsx("div",{className:st.vrmOptimizerButton}),L.jsx("div",{className:st.topLine}),L.jsx("div",{className:st.classContainer,children:l.map((f,m)=>L.jsxs("div",{className:st.class,onClick:()=>h(m),onMouseOver:()=>p(),children:[L.jsx("div",{className:st.classFrame,style:{backgroundImage:`url(${f.image_url})`},children:L.jsx("div",{className:st.frameContainer,children:L.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:st.frame})})}),L.jsx("div",{className:st.name,children:f.name})]},m))}),L.jsx("div",{className:st.bottomLine}),L.jsxs("div",{className:st.buttonContainer,children:[L.jsx(sn,{theme:"light",text:n("callToAction.back"),size:14,className:st.buttonLeft,onClick:u}),L.jsx(sn,{theme:"light",text:"test",size:14,className:st.buttonLeft,onClick:d})]})]})}const uPe="https://beta.anata.dev/character-assets/manifest.json";let XI;const jI=new j,ky=new j;let KI,$I;const dPe=1.4,hPe=new j(0,1.25,0),wz=new j(-.9786403788721187,1.4036900759197288,.9892635490125085),fPe=wz.length(),pPe=.35,SV=6,UV=new j(0,.8,0),Bz=new j(-2.2367993753934425,1.1512971720174363,2.2612065299409223),gPe=Bz.length(),mPe=.5,Td=new j,Ji=new Nt,vPe=new Nt,yPe=new j(1,0,0),wPe=new j(0,1,0);async function BPe(n){try{const e=await fetch(n);if(!e.ok)throw new Error(`Failed to fetch manifest. Status: ${e.status}`);return await e.json()}catch(e){return console.error(`Error fetching manifest: ${e.message}`),[]}}async function CPe(){const n=await BPe(uPe),e=new Cme;return{initialManifest:n,effectManager:e}}const bPe=()=>{let n,e;const r=CPe().then(i=>{n="success",e=i},i=>{n="error",e=i});return{read(){if(n==="error")throw e;if(n==="success")return e;throw r}}},xPe=bPe();function IPe(){const{initialManifest:n,effectManager:e}=xPe.read(),[t,r]=Ce.useState(!1),{camera:i,controls:s,scene:o,moveCamera:a,setManifest:l,lookAtManager:A,showEnvironmentModels:c}=Ce.useContext(lr),{viewMode:u}=Ce.useContext(Ci);e.camera=i,e.scene=o;const h=()=>{if(e.camera){if([at.BIO,at.CHAT].includes(u)){u===at.CHAT?(XI=dPe,jI.copy(hPe),ky.copy(wz),KI=fPe,$I=pPe):(XI=SV,jI.copy(UV),ky.copy(Bz),KI=gPe,$I=mPe),Ji.set(0,0,KI,1).applyMatrix4(e.camera.projectionMatrix),Ji.x/=Ji.w,Ji.y/=Ji.w,Ji.z/=Ji.w;const b=vPe.set($I*Ji.w,Ji.y*Ji.w,Ji.z*Ji.w,Ji.w).applyMatrix4(e.camera.projectionMatrixInverse).x,F=Td.set(ky.x,0,ky.z).angleTo(yPe);Td.set(b,0,0).applyAxisAngle(wPe,F),Td.add(jI),a({targetX:Td.x,targetY:Td.y,targetZ:Td.z,distance:XI})}else a({targetX:0,targetY:UV.y,targetZ:0,distance:SV});s&&([at.APPEARANCE,at.SAVE,at.OPTIMIZER,at.BATCHDOWNLOAD,at.BATCHMANIFEST].includes(u)?s.enabled=!0:s.enabled=!1)}},[d,p]=Ce.useState(!1),[f,m]=Ce.useState(""),[g,v]=Ce.useState([]),w=(b,F)=>{m(b),p(!0),v([F])},B={[at.LANDING]:L.jsx(cBe,{}),[at.APPEARANCE]:L.jsx(PVe,{confirmDialog:w}),[at.OPTIMIZER]:L.jsx(lPe,{}),[at.CREATE]:L.jsx(oBe,{}),[at.WALLET]:L.jsx(cPe,{}),[at.CLAIM]:L.jsx(aBe,{}),[at.BATCHMANIFEST]:L.jsx(APe,{}),[at.BATCHDOWNLOAD]:L.jsx(aPe,{}),[at.LOAD]:L.jsx(vwe,{}),[at.MINT]:L.jsx(Owe,{}),[at.SAVE]:L.jsx(Eye,{}),[at.CHAT]:L.jsx(sye,{})};let C=0;return Ce.useEffect(()=>{const b=F=>{const x=new Date().getTime(),E=x-C;E<300&&E>10&&F.target.id=="editor-scene"&&r(!t),C=x};return window.addEventListener("touchend",b),window.addEventListener("click",b),()=>{window.removeEventListener("touchend",b),window.removeEventListener("click",b)}},[t]),Ce.useEffect(()=>{if(A!=null)return h(),[at.BIO,at.MINT,at.CHAT].includes(u)?A.enabled=!1:A.enabled=!0,[at.LANDING,at.CREATE,at.CLAIM,at.LOAD,at.CLAIM,at.CLAIM].includes(u)?c(!1):c(!0),window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}},[u,A]),Ce.useEffect(()=>{l(n)},[n]),Ce.useContext(xs),L.jsxs(Ce.Fragment,{children:[L.jsx("div",{className:"generalTitle",children:"Character Studio"}),L.jsx(Pme,{confirmDialogText:f,confirmDialogCallback:g,confirmDialogWindow:d,setConfirmDialogWindow:p}),L.jsx(zme,{}),B[u]]})}const FPe=n=>{const e=new aS(n);return e.pollingInterval=12e3,e};AF.createRoot(document.getElementById("root")).render(L.jsx(X.StrictMode,{children:L.jsx(u8,{getLibrary:FPe,children:L.jsx(BK,{children:L.jsx(eme,{children:L.jsx(yK,{children:L.jsx(Rpe,{children:L.jsx(Upe,{children:L.jsx(Ope,{children:L.jsx(Ce.Suspense,{children:L.jsx(IPe,{})})})})})})})})})}));export{pa as c,Zl as g};
